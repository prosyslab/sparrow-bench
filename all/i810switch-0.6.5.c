/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 125 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __uid_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 17 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
struct i810_par {
   unsigned char *mmio ;
   int mem ;
   int flag ;
};
#line 187 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) unsigned long ( __attribute__((__nonnull__(1),
__leaf__)) strtoul)(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                    int __base ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 578
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) putenv)(char *__string ) ;
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 57 "/usr/include/x86_64-linux-gnu/sys/mman.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) mmap)(void *__addr ,
                                                                             size_t __len ,
                                                                             int __prot ,
                                                                             int __flags ,
                                                                             int __fd ,
                                                                             __off_t __offset ) ;
#line 76
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) munmap)(void *__addr ,
                                                                             size_t __len ) ;
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 678
extern __ssize_t getline(char ** __restrict  __lineptr , size_t * __restrict  __n ,
                         FILE * __restrict  __stream ) ;
#line 846
extern void perror(char const   *__s ) ;
#line 873
extern FILE *popen(char const   *__command , char const   *__modes ) ;
#line 879
extern int pclose(FILE *__stream ) ;
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 678
extern  __attribute__((__nothrow__)) __uid_t ( __attribute__((__leaf__)) geteuid)(void) ;
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 66
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 342
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strstr)(char const   *__haystack ,
                                                                                                 char const   *__needle )  __attribute__((__pure__)) ;
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 152 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
static void release_resource(struct i810_par *par ) 
{ 


  {
#line 154
  if (par->flag & 1) {
    {
#line 155
    close(par->mem);
    }
  }
#line 156
  if (par->flag & 2) {
    {
#line 157
    munmap((void *)par->mmio, (size_t )524288);
    }
  }
#line 158
  return;
}
}
#line 160 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
void probe_card_I810(struct i810_par *par ) 
{ 


  {
  {
#line 162
  printf((char const   */* __restrict  */)"  DCLK 0D=%08lX 1D=%08lX 0DS=%08lX\n",
         *((int volatile   *)(par->mmio + 24576)), *((int volatile   *)(par->mmio + 24580)),
         *((int volatile   *)(par->mmio + 24592)));
#line 165
  printf((char const   */* __restrict  */)"  PWR_CLKC=%08lX HVSYNC=%08lX\n", *((int volatile   *)(par->mmio + 24596)),
         *((int volatile   *)(par->mmio + 20480)));
#line 168
  printf((char const   */* __restrict  */)"  020cc=%08lX 020d8=%08lX 020dc=%08lX\n",
         *((int volatile   *)(par->mmio + 8396)), *((int volatile   *)(par->mmio + 8408)),
         *((int volatile   *)(par->mmio + 8412)));
#line 171
  printf((char const   */* __restrict  */)"  HTOTAL=%08lX HBLANK=%08lX HSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 393216)), *((int volatile   *)(par->mmio + 393220)),
         *((int volatile   *)(par->mmio + 393224)));
#line 175
  printf((char const   */* __restrict  */)"  VTOTAL=%08lX VBLANK=%08lX VSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 393228)), *((int volatile   *)(par->mmio + 393232)),
         *((int volatile   *)(par->mmio + 393236)));
#line 179
  printf((char const   */* __restrict  */)"  OVRACT=%08lX PIXCONF=%08lX 70080=%08lX\n",
         *((int volatile   *)(par->mmio + 393244)), *((int volatile   *)(par->mmio + 458760)),
         *((int volatile   *)(par->mmio + 458880)));
  }
#line 183
  return;
}
}
#line 185 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
void probe_card_I830(struct i810_par *par ) 
{ 


  {
  {
#line 187
  printf((char const   */* __restrict  */)"  DCLK 0D=%08lX 1D=%08lX 0DS=%08lX DPLL A=%08lX B=%08lX\n",
         *((int volatile   *)(par->mmio + 24576)), *((int volatile   *)(par->mmio + 24580)),
         *((int volatile   *)(par->mmio + 24592)), *((int volatile   *)(par->mmio + 24596)),
         *((int volatile   *)(par->mmio + 24600)));
#line 191
  printf((char const   */* __restrict  */)"  ADPA=%08lX  DVO A=%08lX B=%08lX C=%08lX  LVDS=%08lX\n",
         *((int volatile   *)(par->mmio + 397568)), *((int volatile   *)(par->mmio + 397600)),
         *((int volatile   *)(par->mmio + 397632)), *((int volatile   *)(par->mmio + 397664)),
         *((int volatile   *)(par->mmio + 397696)));
#line 195
  printf((char const   */* __restrict  */)"  DIM =%08lX  DIM A=%08lX B=%08lX C=%08lX       %08lX\n",
         *((int volatile   *)(par->mmio + 397572)), *((int volatile   *)(par->mmio + 397604)),
         *((int volatile   *)(par->mmio + 397636)), *((int volatile   *)(par->mmio + 397668)),
         *((int volatile   *)(par->mmio + 397700)));
#line 199
  printf((char const   */* __restrict  */)"  FPA %08lX %08lX %08lX %08lX\n", *((int volatile   *)(par->mmio + 24640)),
         *((int volatile   *)(par->mmio + 24644)), *((int volatile   *)(par->mmio + 24648)),
         *((int volatile   *)(par->mmio + 24652)));
#line 202
  printf((char const   */* __restrict  */)"  020cc=%08lX 020d8=%08lX 020dc=%08lX\n",
         *((int volatile   *)(par->mmio + 8396)), *((int volatile   *)(par->mmio + 8408)),
         *((int volatile   *)(par->mmio + 8412)));
#line 205
  printf((char const   */* __restrict  */)"  71280=%08lX 71400=%08lX\n", *((int volatile   *)(par->mmio + 463488)),
         *((int volatile   *)(par->mmio + 463872)));
#line 207
  printf((char const   */* __restrict  */)"  Pipe A\n");
#line 208
  printf((char const   */* __restrict  */)"    HTOTAL=%08lX HBLANK=%08lX HSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 393216)), *((int volatile   *)(par->mmio + 393220)),
         *((int volatile   *)(par->mmio + 393224)));
#line 212
  printf((char const   */* __restrict  */)"    VTOTAL=%08lX VBLANK=%08lX VSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 393228)), *((int volatile   *)(par->mmio + 393232)),
         *((int volatile   *)(par->mmio + 393236)));
#line 216
  printf((char const   */* __restrict  */)"    SOURCE=%08lX CONFIG=%08lX 70030=%08lX 70080=%08lX\n",
         *((int volatile   *)(par->mmio + 393244)), *((int volatile   *)(par->mmio + 458760)),
         *((int volatile   *)(par->mmio + 458800)), *((int volatile   *)(par->mmio + 458880)));
#line 221
  printf((char const   */* __restrict  */)"  Pipe B\n");
#line 222
  printf((char const   */* __restrict  */)"    HTOTAL=%08lX HBLANK=%08lX HSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 397312)), *((int volatile   *)(par->mmio + 397316)),
         *((int volatile   *)(par->mmio + 397320)));
#line 226
  printf((char const   */* __restrict  */)"    VTOTAL=%08lX VBLANK=%08lX VSYNC=%08lX\n",
         *((int volatile   *)(par->mmio + 397324)), *((int volatile   *)(par->mmio + 397328)),
         *((int volatile   *)(par->mmio + 397332)));
#line 230
  printf((char const   */* __restrict  */)"    SOURCE=%08lX CONFIG=%08lX 71030=%08lX 71080=%08lX\n",
         *((int volatile   *)(par->mmio + 397340)), *((int volatile   *)(par->mmio + 462856)),
         *((int volatile   *)(par->mmio + 462896)), *((int volatile   *)(par->mmio + 462976)));
#line 235
  printf((char const   */* __restrict  */)"  Display plane A\n");
#line 236
  printf((char const   */* __restrict  */)"    CTRL=%08lX BASE=%08lX STRIDE=%08lX\n",
         *((int volatile   *)(par->mmio + 459136)), *((int volatile   *)(par->mmio + 459140)),
         *((int volatile   *)(par->mmio + 459144)));
#line 240
  printf((char const   */* __restrict  */)"  Display plane B\n");
#line 241
  printf((char const   */* __restrict  */)"    CTRL=%08lX BASE=%08lX STRIDE=%08lX\n",
         *((int volatile   *)(par->mmio + 463232)), *((int volatile   *)(par->mmio + 463236)),
         *((int volatile   *)(par->mmio + 463240)));
  }
#line 245
  return;
}
}
#line 247 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
char *i810_chip(char **buff_ptr , int *len_ptr , FILE *pci_f , int *chiptype ) 
{ 
  int i ;
  char *p ;
  int tmp ;
  int tmp___0 ;
  __ssize_t tmp___1 ;

  {
  {
#line 252
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 252
    tmp___1 = getline((char **/* __restrict  */)buff_ptr, (size_t */* __restrict  */)len_ptr,
                      (FILE */* __restrict  */)pci_f);
    }
#line 252
    if (! (tmp___1 > 0L)) {
#line 252
      goto while_break;
    }
    {
#line 253
    p = strstr((char const   *)*buff_ptr, "8086:7121");
    }
#line 253
    if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
      tmp = 1;
    } else {
      {
#line 253
      p = strstr((char const   *)*buff_ptr, "8086:7123");
      }
#line 253
      if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
        tmp = 1;
      } else {
        {
#line 253
        p = strstr((char const   *)*buff_ptr, "8086:7125");
        }
#line 253
        if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
          tmp = 1;
        } else {
          {
#line 253
          p = strstr((char const   *)*buff_ptr, "8086:1102");
          }
#line 253
          if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
            tmp = 1;
          } else {
            {
#line 253
            p = strstr((char const   *)*buff_ptr, "8086:1112");
            }
#line 253
            if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
              tmp = 1;
            } else {
              {
#line 253
              p = strstr((char const   *)*buff_ptr, "8086:1132");
              }
#line 253
              if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 253
                tmp = 1;
              } else {
#line 253
                tmp = 0;
              }
            }
          }
        }
      }
    }
#line 253
    i = tmp;
#line 259
    if (i) {
#line 261
      *chiptype = 1;
#line 262
      return (p);
    }
    {
#line 265
    p = strstr((char const   *)*buff_ptr, "8086:3577");
    }
#line 265
    if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 265
      tmp___0 = 1;
    } else {
      {
#line 265
      p = strstr((char const   *)*buff_ptr, "8086:2562");
      }
#line 265
      if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 265
        tmp___0 = 1;
      } else {
#line 265
        tmp___0 = 0;
      }
    }
#line 265
    i = tmp___0;
#line 270
    if (i) {
#line 272
      *chiptype = 2;
#line 273
      return (p);
    }
    {
#line 276
    p = strstr((char const   *)*buff_ptr, "8086:3582");
#line 276
    i = (unsigned long )p != (unsigned long )((void *)0);
    }
#line 277
    if (i) {
#line 279
      *chiptype = 3;
#line 280
      return (p);
    }
    {
#line 283
    p = strstr((char const   *)*buff_ptr, "8086:27a2");
#line 283
    i = (unsigned long )p != (unsigned long )((void *)0);
    }
#line 284
    if (i) {
#line 286
      *chiptype = 3;
#line 287
      return (p);
    }
    {
#line 290
    p = strstr((char const   *)*buff_ptr, "8086:2592");
#line 290
    i = (unsigned long )p != (unsigned long )((void *)0);
    }
#line 291
    if (i) {
#line 293
      *chiptype = 4;
#line 294
      return (p);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 297
  return ((char *)((void *)0));
}
}
#line 300 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
unsigned long i810_addr(char **buff_ptr , int *len_ptr , FILE *pci_f ) 
{ 
  char *p ;
  unsigned long tmp ;
  char *tmp___0 ;
  __ssize_t tmp___1 ;

  {
  {
#line 304
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 304
    tmp___1 = getline((char **/* __restrict  */)buff_ptr, (size_t */* __restrict  */)len_ptr,
                      (FILE */* __restrict  */)pci_f);
    }
#line 304
    if (! (tmp___1 > 0L)) {
#line 304
      goto while_break;
    }
    {
#line 305
    tmp___0 = strstr((char const   *)*buff_ptr, "32-bit, non-prefetchable");
    }
#line 305
    if ((unsigned long )tmp___0 != (unsigned long )((void *)0)) {
      {
#line 306
      p = strstr((char const   *)*buff_ptr, "Memory at");
      }
#line 307
      if ((unsigned long )p != (unsigned long )((void *)0)) {
        {
#line 308
        tmp = strtoul((char const   */* __restrict  */)(p + sizeof("Memory at")),
                      (char **/* __restrict  */)((void *)0), 16);
        }
#line 308
        return (tmp);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 310
  return (0UL);
}
}
#line 313 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
int i810_usage(void) 
{ 


  {
  {
#line 315
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"usage: i810switch [crt on/off] [lcd on/off] [probe]\n");
#line 316
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  crt: enables/disables the output to the CRT display\n");
#line 317
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  lcd: enables/disables the output to the LCD\n");
#line 318
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  probe: dumps the video chipset registers\n");
#line 319
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  no options: displays the current output status\n");
  }
#line 320
  return (1);
}
}
#line 323 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
int main(int argc , char **argv ) 
{ 
  struct i810_par par ;
  unsigned long addr ;
  int i ;
  int crt ;
  int lcd ;
  int probe ;
  int err ;
  int count ;
  int chiptype ;
  int len ;
  FILE *pci_f ;
  char *buff ;
  char lspcistr[31] ;
  char *chip ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  char *p ;
  char *tmp___11 ;
  int tmp___12 ;
  int *tmp___13 ;
  __uid_t tmp___14 ;
  int tmp___15 ;
  void *tmp___16 ;
  char *chipname ;
  char const   *tmp___17 ;
  int pwr_clkc ;
  int hvsync ;
  int i830_adpa ;
  int dspactrl ;
  int dspbctrl ;
  int pipe___0 ;
  int lcdtv_c ;
  int lcdtv_c___0 ;
  int lcdtv_c___1 ;

  {
  {
#line 327
  crt = -1;
#line 327
  lcd = -1;
#line 327
  probe = 0;
#line 327
  err = 0;
#line 327
  count = 0;
#line 327
  len = 0;
#line 329
  buff = (char *)((void *)0);
#line 330
  lspcistr[0] = (char )'/';
#line 330
  lspcistr[1] = (char )'u';
#line 330
  lspcistr[2] = (char )'s';
#line 330
  lspcistr[3] = (char )'r';
#line 330
  lspcistr[4] = (char )'/';
#line 330
  lspcistr[5] = (char )'b';
#line 330
  lspcistr[6] = (char )'i';
#line 330
  lspcistr[7] = (char )'n';
#line 330
  lspcistr[8] = (char )'/';
#line 330
  lspcistr[9] = (char )'l';
#line 330
  lspcistr[10] = (char )'s';
#line 330
  lspcistr[11] = (char )'p';
#line 330
  lspcistr[12] = (char )'c';
#line 330
  lspcistr[13] = (char )'i';
#line 330
  lspcistr[14] = (char )' ';
#line 330
  lspcistr[15] = (char )'-';
#line 330
  lspcistr[16] = (char )'v';
#line 330
  lspcistr[17] = (char )' ';
#line 330
  lspcistr[18] = (char )'-';
#line 330
  lspcistr[19] = (char )'d';
#line 330
  lspcistr[20] = (char )' ';
#line 330
  lspcistr[21] = (char )'x';
#line 330
  lspcistr[22] = (char )'x';
#line 330
  lspcistr[23] = (char )'x';
#line 330
  lspcistr[24] = (char )'x';
#line 330
  lspcistr[25] = (char )':';
#line 330
  lspcistr[26] = (char )'x';
#line 330
  lspcistr[27] = (char )'x';
#line 330
  lspcistr[28] = (char )'x';
#line 330
  lspcistr[29] = (char )'x';
#line 330
  lspcistr[30] = (char )'\000';
#line 333
  putenv((char *)"PATH=/sbin:/usr/sbin:/bin:/usr/bin");
  }
  {
#line 335
  while (1) {
    while_continue: /* CIL Label */ ;
#line 335
    argc --;
#line 335
    if (! (argc > 0)) {
#line 335
      goto while_break;
    }
    {
#line 336
    argv ++;
#line 337
    tmp___10 = strcmp((char const   *)*(argv + 0), "crt");
    }
#line 337
    if (tmp___10) {
      {
#line 349
      tmp___9 = strcmp((char const   *)*(argv + 0), "lcd");
      }
#line 349
      if (tmp___9) {
        {
#line 361
        tmp___8 = strcmp((char const   *)*(argv + 0), "probe");
        }
#line 361
        if (tmp___8) {
          {
#line 364
          tmp___7 = i810_usage();
#line 364
          exit(tmp___7);
          }
        } else {
#line 362
          probe = 1;
        }
      } else {
#line 350
        argv ++;
#line 351
        argc --;
#line 351
        if (argc > 0) {
          {
#line 352
          tmp___5 = strcmp((char const   *)*(argv + 0), "on");
          }
#line 352
          if (tmp___5) {
            {
#line 354
            tmp___4 = strcmp((char const   *)*(argv + 0), "off");
            }
#line 354
            if (tmp___4) {
              {
#line 357
              tmp___3 = i810_usage();
#line 357
              exit(tmp___3);
              }
            } else {
#line 355
              lcd = 0;
            }
          } else {
#line 353
            lcd = 1;
          }
        } else {
          {
#line 359
          tmp___6 = i810_usage();
#line 359
          exit(tmp___6);
          }
        }
      }
    } else {
#line 338
      argc --;
#line 338
      if (argc > 0) {
        {
#line 339
        argv ++;
#line 340
        tmp___1 = strcmp((char const   *)*(argv + 0), "on");
        }
#line 340
        if (tmp___1) {
          {
#line 342
          tmp___0 = strcmp((char const   *)*(argv + 0), "off");
          }
#line 342
          if (tmp___0) {
            {
#line 345
            tmp = i810_usage();
#line 345
            exit(tmp);
            }
          } else {
#line 343
            crt = 0;
          }
        } else {
#line 341
          crt = 1;
        }
      } else {
        {
#line 347
        tmp___2 = i810_usage();
#line 347
        exit(tmp___2);
        }
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 368
  pci_f = popen("/usr/bin/lspci -n", "r");
  }
#line 369
  if (! pci_f) {
    {
#line 370
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Something is wrong with lspci.\n");
#line 371
    exit(1);
    }
  }
  {
#line 373
  chip = i810_chip(& buff, & len, pci_f, & chiptype);
  }
#line 374
  if ((unsigned long )chip == (unsigned long )((void *)0)) {
    {
#line 375
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"PCI id of i810 is not recognized.\n");
#line 376
    exit(1);
    }
  }
  {
#line 378
  pclose(pci_f);
#line 381
  tmp___11 = strstr((char const   *)(lspcistr), "xxxx:xxxx");
#line 381
  p = tmp___11;
  }
#line 382
  if ((unsigned long )p == (unsigned long )((char *)0)) {
    {
#line 383
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"CMD_LSPCI is wrong.\n");
#line 384
    exit(1);
    }
  }
  {
#line 386
  memcpy((void */* __restrict  */)p, (void const   */* __restrict  */)chip, (size_t )9);
#line 389
  pci_f = popen((char const   *)(lspcistr), "r");
  }
#line 390
  if (! pci_f) {
    {
#line 391
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Something is wrong with lspci.\n");
#line 392
    exit(1);
    }
  }
  {
#line 394
  addr = i810_addr(& buff, & len, pci_f);
  }
#line 395
  if (addr == 0UL) {
    {
#line 396
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Something is wrong with lspci.\n");
#line 397
    exit(1);
    }
  }
  {
#line 399
  pclose(pci_f);
#line 401
  memset((void *)(& par), 0, sizeof(struct i810_par ));
  }
#line 402
  if (crt + lcd == -2) {
#line 402
    tmp___12 = 0;
  } else {
#line 402
    tmp___12 = 2;
  }
  {
#line 402
  par.mem = open("/dev/mem", tmp___12);
  }
#line 403
  if (par.mem == -1) {
    {
#line 404
    tmp___13 = __errno_location();
#line 404
    i = *tmp___13;
#line 405
    perror("/dev/mem");
    }
#line 406
    if (i == 13) {
      {
#line 406
      tmp___14 = geteuid();
      }
#line 406
      if (tmp___14 != 0U) {
        {
#line 407
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Must have access to `/dev/mem\'.\n");
        }
      }
    }
    {
#line 408
    release_resource(& par);
#line 409
    exit(1);
    }
  }
#line 411
  par.flag |= 1;
#line 413
  if (crt + lcd == -2) {
#line 413
    tmp___15 = 1;
  } else {
#line 413
    tmp___15 = 3;
  }
  {
#line 413
  tmp___16 = mmap((void *)0, (size_t )524288, tmp___15, 1, par.mem, (__off_t )addr);
#line 413
  par.mmio = (unsigned char *)tmp___16;
  }
#line 415
  if (! par.mmio) {
    {
#line 416
    release_resource(& par);
#line 417
    exit(1);
    }
  }
#line 420
  par.flag |= 2;
#line 422
  if (probe) {
#line 424
    if (chiptype == 1) {
#line 424
      tmp___17 = "i810";
    } else {
#line 424
      tmp___17 = "i830";
    }
    {
#line 424
    chipname = (char *)tmp___17;
#line 425
    printf((char const   */* __restrict  */)"i810switch %s probe\n", "0.6.5beta");
#line 426
    printf((char const   */* __restrict  */)"%s (%s) io=0x%8lX\n", chipname, lspcistr + 12,
           addr);
    }
#line 427
    if (chiptype == 1) {
      {
#line 429
      probe_card_I810(& par);
      }
    } else {
      {
#line 431
      probe_card_I830(& par);
      }
    }
    {
#line 433
    release_resource(& par);
#line 434
    exit(0);
    }
  }
#line 437
  if (crt + lcd == -2) {
#line 438
    if (chiptype == 1) {
      {
#line 439
      printf((char const   */* __restrict  */)"CRT: ");
      }
#line 440
      if (*((int volatile   *)(par.mmio + 24596)) & (int volatile   )1) {
        {
#line 441
        printf((char const   */* __restrict  */)"on\n");
        }
      } else {
        {
#line 443
        printf((char const   */* __restrict  */)"off\n");
        }
      }
      {
#line 445
      printf((char const   */* __restrict  */)"LCD: ");
      }
#line 446
      if (*((int volatile   *)(par.mmio + 393240)) & (int volatile   )3072) {
        {
#line 447
        printf((char const   */* __restrict  */)"off\n");
        }
      } else {
        {
#line 449
        printf((char const   */* __restrict  */)"on\n");
        }
      }
    } else
#line 451
    if (chiptype == 2) {
#line 451
      goto _L;
    } else
#line 451
    if (chiptype == 4) {
      _L: /* CIL Label */ 
      {
#line 452
      printf((char const   */* __restrict  */)"CRT: ");
      }
#line 453
      if ((unsigned int )*((int volatile   *)(par.mmio + 397568)) & 2147483648U) {
        {
#line 454
        printf((char const   */* __restrict  */)"on\n");
        }
      } else {
        {
#line 456
        printf((char const   */* __restrict  */)"off\n");
        }
      }
      {
#line 457
      printf((char const   */* __restrict  */)"LCD: ");
      }
#line 458
      if (*((int volatile   *)(par.mmio + 24596)) & (int volatile   )1073741824) {
        {
#line 459
        printf((char const   */* __restrict  */)"on\n");
        }
      } else {
        {
#line 461
        printf((char const   */* __restrict  */)"off\n");
        }
      }
    } else
#line 463
    if (chiptype == 3) {
      {
#line 464
      printf((char const   */* __restrict  */)"CRT: ");
      }
#line 465
      if ((unsigned int )*((int volatile   *)(par.mmio + 397568)) & 2147483648U) {
        {
#line 466
        printf((char const   */* __restrict  */)"on\n");
        }
      } else {
        {
#line 468
        printf((char const   */* __restrict  */)"off\n");
        }
      }
      {
#line 469
      printf((char const   */* __restrict  */)"LCD: ");
      }
#line 470
      if (*((int volatile   *)(par.mmio + 397828)) & (int volatile   )1) {
        {
#line 471
        printf((char const   */* __restrict  */)"on\n");
        }
      } else {
        {
#line 473
        printf((char const   */* __restrict  */)"off\n");
        }
      }
    }
  }
#line 477
  if (crt != -1) {
#line 478
    if (chiptype == 1) {
#line 479
      pwr_clkc = (int )*((int volatile   *)(par.mmio + 24596));
#line 480
      hvsync = (int )*((int volatile   *)(par.mmio + 20480));
#line 482
      if (crt == 0) {
        {
#line 483
        printf((char const   */* __restrict  */)"Disabling CRT display...\n");
#line 484
        pwr_clkc &= -2;
#line 485
        hvsync = 655360;
        }
      } else {
        {
#line 487
        printf((char const   */* __restrict  */)"Enabling CRT display...\n");
#line 488
        pwr_clkc |= 1;
#line 489
        hvsync = 0;
        }
      }
#line 491
      *((int volatile   *)(par.mmio + 24596)) = (int volatile   )pwr_clkc;
#line 492
      *((int volatile   *)(par.mmio + 20480)) = (int volatile   )hvsync;
    } else
#line 494
    if (chiptype == 2) {
#line 494
      goto _L___0;
    } else
#line 494
    if (chiptype == 3) {
#line 494
      goto _L___0;
    } else
#line 494
    if (chiptype == 4) {
      _L___0: /* CIL Label */ 
#line 496
      i830_adpa = (int )*((int volatile   *)(par.mmio + 397568));
#line 497
      dspactrl = (int )*((int volatile   *)(par.mmio + 459136));
#line 498
      dspbctrl = (int )*((int volatile   *)(par.mmio + 463232));
#line 499
      pipe___0 = 0;
#line 502
      if (dspactrl & (1 << 31)) {
#line 503
        pipe___0 = (dspactrl & (1 << 24)) >> 24;
      } else
#line 504
      if (dspbctrl & (1 << 31)) {
#line 505
        pipe___0 = (dspbctrl & (1 << 24)) >> 24;
      } else {
        {
#line 507
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Warning: No active display plane detected.  Trying pipe A.\n");
        }
      }
#line 508
      if (crt == 0) {
        {
#line 509
        printf((char const   */* __restrict  */)"Disabling CRT display...\n");
#line 510
        i830_adpa = (int )((((unsigned int )i830_adpa & 2147483647U) & (unsigned int )(~ (pipe___0 << 30))) | 3072U);
        }
      } else {
        {
#line 512
        printf((char const   */* __restrict  */)"Enabling CRT display...\n");
#line 513
        i830_adpa = (int )((((unsigned int )i830_adpa | 2147483648U) | (unsigned int )(pipe___0 << 30)) & 4294964223U);
        }
      }
#line 515
      *((int volatile   *)(par.mmio + 397568)) = (int volatile   )i830_adpa;
    }
  }
#line 519
  if (lcd != -1) {
#line 520
    if (chiptype == 1) {
#line 521
      lcdtv_c = (int )*((int volatile   *)(par.mmio + 393240));
#line 522
      if (lcd == 0) {
        {
#line 523
        printf((char const   */* __restrict  */)"Disabling LCD...\n");
#line 524
        lcdtv_c |= 3072;
        }
      } else {
        {
#line 526
        printf((char const   */* __restrict  */)"Enabling LCD...\n");
#line 527
        lcdtv_c &= -3073;
        }
      }
#line 529
      *((int volatile   *)(par.mmio + 393240)) = (int volatile   )lcdtv_c;
    } else
#line 531
    if (chiptype == 2) {
#line 531
      goto _L___1;
    } else
#line 531
    if (chiptype == 4) {
      _L___1: /* CIL Label */ 
#line 533
      if (lcd == 0) {
        {
#line 534
        printf((char const   */* __restrict  */)"Disabling LCD...\n");
#line 535
        lcdtv_c___0 = (int )*((int volatile   *)(par.mmio + 24596));
#line 536
        lcdtv_c___0 &= -1073741825;
#line 537
        *((int volatile   *)(par.mmio + 24596)) = (int volatile   )lcdtv_c___0;
        }
      } else {
        {
#line 539
        printf((char const   */* __restrict  */)"Enabling LCD...\n");
#line 540
        lcdtv_c___0 = (int )*((int volatile   *)(par.mmio + 24596));
#line 541
        lcdtv_c___0 |= 1073741824;
#line 542
        *((int volatile   *)(par.mmio + 24596)) = (int volatile   )lcdtv_c___0;
        }
      }
    } else
#line 545
    if (chiptype == 3) {
#line 547
      if (lcd == 0) {
        {
#line 548
        printf((char const   */* __restrict  */)"Disabling LCD...\n");
#line 549
        lcdtv_c___1 = (int )*((int volatile   *)(par.mmio + 397828));
#line 550
        lcdtv_c___1 &= -2;
#line 551
        *((int volatile   *)(par.mmio + 397828)) = (int volatile   )lcdtv_c___1;
        }
      } else {
        {
#line 553
        printf((char const   */* __restrict  */)"Enabling LCD...\n");
#line 554
        lcdtv_c___1 |= 1;
#line 555
        *((int volatile   *)(par.mmio + 397828)) = (int volatile   )lcdtv_c___1;
        }
      }
    } else {
      {
#line 558
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"No LCD support for this chipset.\n");
      }
    }
  }
  {
#line 561
  release_resource(& par);
#line 562
  exit(0);
  }
}
}
#line 152 "/home/june/repo/benchmarks/collector/temp/i810switch-0.6.5/i810switch.c"
static void release_resource___0(struct i810_par *par ) 
{ 


  {
#line 154
  if (par->flag & 1) {
    {
#line 155
    close(par->mem);
    }
  }
#line 156
  if (par->flag & 2) {
    {
#line 157
    munmap((void *)par->mmio, (size_t )524288);
    }
  }
#line 158
  return;
}
}
