/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 44
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 40 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h"
typedef __builtin_va_list __gnuc_va_list;
#line 144 "/usr/include/libio.h"
struct _IO_FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 79 "/usr/include/stdio.h"
typedef __gnuc_va_list va_list;
/* compiler builtin: 
   void __builtin_va_start(__builtin_va_list  ) ;  */
/* compiler builtin: 
   void __builtin_va_end(__builtin_va_list  ) ;  */
#line 169
extern struct _IO_FILE *stdout ;
#line 170
extern struct _IO_FILE *stderr ;
#line 237
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 399
extern  __attribute__((__nothrow__)) int ( /* format attribute */  vasprintf)(char ** __restrict  __ptr ,
                                                                              char const   * __restrict  __f ,
                                                                              __gnuc_va_list __arg ) ;
#line 538
extern int getchar(void) ;
#line 573
extern int fputc(int __c , FILE *__stream ) ;
#line 622
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 846
extern void perror(char const   *__s ) ;
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 466
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 480
extern  __attribute__((__nothrow__)) void *( __attribute__((__warn_unused_result__,
__leaf__)) realloc)(void *__ptr , size_t __size ) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 564
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) getenv)(char const   *__name ) ;
#line 129 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 538
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncasecmp)(char const   *__s1 ,
                                                                                                    char const   *__s2 ,
                                                                                                    size_t __n )  __attribute__((__pure__)) ;
#line 79 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) unsigned short const   **( __attribute__((__leaf__)) __ctype_b_loc)(void)  __attribute__((__const__)) ;
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 11 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
char *checksum_field  =    (char *)((void *)0);
#line 13 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static void oom_die(void) 
{ 


  {
  {
#line 15
  fputs((char const   */* __restrict  */)"Out of memory!\n", (FILE */* __restrict  */)stderr);
#line 16
  exit(1);
  }
}
}
#line 19 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static char *xvasprintf(char const   *fmt , va_list ap ) 
{ 
  char *ret ;
  int *tmp ;
  int tmp___0 ;

  {
  {
#line 22
  tmp___0 = vasprintf((char **/* __restrict  */)(& ret), (char const   */* __restrict  */)fmt,
                      ap);
  }
#line 22
  if (tmp___0 < 0) {
    {
#line 23
    tmp = __errno_location();
    }
#line 23
    if (*tmp == 12) {
      {
#line 24
      oom_die();
      }
    }
#line 25
    return ((char *)((void *)0));
  }
#line 27
  return (ret);
}
}
#line 30 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static char *xasprintf(char const   *fmt  , ...) 
{ 
  va_list ap ;
  char *ret ;

  {
  {
#line 34
  __builtin_va_start(ap, fmt);
#line 35
  ret = xvasprintf(fmt, ap);
#line 36
  __builtin_va_end(ap);
  }
#line 37
  return (ret);
}
}
#line 40 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static char *fieldcpy(char *dst , char *fld ) 
{ 
  char *tmp ;
  unsigned short const   **tmp___0 ;
  char *tmp___1 ;

  {
  {
#line 41
  while (1) {
    while_continue: /* CIL Label */ ;
#line 41
    if (*fld) {
#line 41
      if (! ((int )*fld != 58)) {
#line 41
        goto while_break;
      }
    } else {
#line 41
      goto while_break;
    }
#line 42
    fld ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 43
  tmp = fld;
#line 43
  fld ++;
#line 43
  if (! *tmp) {
#line 44
    return ((char *)((void *)0));
  }
  {
#line 45
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 45
    tmp___0 = __ctype_b_loc();
    }
#line 45
    if (! ((int const   )*(*tmp___0 + (int )*fld) & 8192)) {
#line 45
      goto while_break___0;
    }
#line 45
    fld ++;
  }
  while_break___0: /* CIL Label */ ;
  }
  {
#line 46
  tmp___1 = strcpy((char */* __restrict  */)dst, (char const   */* __restrict  */)fld);
  }
#line 46
  return (tmp___1);
}
}
#line 49 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static void outputdeps(char *deps ) 
{ 
  char *pch ;
  unsigned short const   **tmp ;
  char *tmp___0 ;
  unsigned short const   **tmp___1 ;
  char *tmp___2 ;

  {
#line 50
  pch = deps;
  {
#line 52
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 53
    while (1) {
      while_continue___0: /* CIL Label */ ;
      {
#line 53
      tmp = __ctype_b_loc();
      }
#line 53
      if (! ((int const   )*(*tmp + (int )*pch) & 8192)) {
#line 53
        goto while_break___0;
      }
#line 53
      pch ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 54
    if (! *pch) {
#line 54
      goto while_break;
    }
    {
#line 56
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 56
      if (*pch) {
#line 56
        if ((int )*pch != 40) {
#line 56
          if ((int )*pch != 124) {
#line 56
            if ((int )*pch != 44) {
              {
#line 56
              tmp___1 = __ctype_b_loc();
              }
#line 56
              if ((int const   )*(*tmp___1 + (int )*pch) & 8192) {
#line 56
                goto while_break___1;
              }
            } else {
#line 56
              goto while_break___1;
            }
          } else {
#line 56
            goto while_break___1;
          }
        } else {
#line 56
          goto while_break___1;
        }
      } else {
#line 56
        goto while_break___1;
      }
      {
#line 59
      tmp___0 = pch;
#line 59
      pch ++;
#line 59
      fputc((int )*tmp___0, stdout);
      }
    }
    while_break___1: /* CIL Label */ ;
    }
    {
#line 61
    fputc('\n', stdout);
    }
    {
#line 62
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 62
      if (*pch) {
#line 62
        tmp___2 = pch;
#line 62
        pch ++;
#line 62
        if (! ((int )*tmp___2 != 44)) {
#line 62
          goto while_break___2;
        }
      } else {
#line 62
        goto while_break___2;
      }
    }
    while_break___2: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 64
  return;
}
}
#line 66 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static void dogetdeps(char *pkgsfile , char **in_pkgs , int pkgc ) 
{ 
  char buf[1000] ;
  char cur_pkg[1000] ;
  char cur_deps[1000] ;
  char cur_predeps[1000] ;
  char prev_pkg[1000] ;
  char *pkgs[100] ;
  int i ;
  int skip ;
  FILE *f ;
  int output_pkg ;
  size_t tmp ;
  size_t tmp___0 ;
  int any ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  char *tmp___6 ;

  {
#line 76
  output_pkg = -1;
#line 78
  prev_pkg[0] = (char )'\000';
#line 78
  cur_predeps[0] = prev_pkg[0];
#line 78
  cur_deps[0] = cur_predeps[0];
#line 78
  cur_pkg[0] = cur_deps[0];
#line 80
  i = 0;
  {
#line 80
  while (1) {
    while_continue: /* CIL Label */ ;
#line 80
    if (! (i < pkgc)) {
#line 80
      goto while_break;
    }
#line 80
    pkgs[i] = *(in_pkgs + i);
#line 80
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 82
  f = fopen((char const   */* __restrict  */)pkgsfile, (char const   */* __restrict  */)"r");
  }
#line 83
  if ((unsigned long )f == (unsigned long )((void *)0)) {
    {
#line 84
    perror((char const   *)pkgsfile);
#line 85
    exit(1);
    }
  }
#line 88
  skip = 1;
  {
#line 89
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 89
    tmp___6 = fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)f);
    }
#line 89
    if (! tmp___6) {
#line 89
      goto while_break___0;
    }
#line 90
    if (buf[0]) {
      {
#line 90
      tmp___0 = strlen((char const   *)(buf));
      }
#line 90
      if ((int )buf[tmp___0 - 1UL] == 10) {
        {
#line 90
        tmp = strlen((char const   *)(buf));
#line 90
        buf[tmp - 1UL] = (char )'\000';
        }
      }
    }
    {
#line 91
    tmp___5 = strncasecmp((char const   *)(buf), "Package:", (size_t )8);
    }
#line 91
    if (tmp___5 == 0) {
      {
#line 92
      any = 0;
#line 93
      skip = 1;
#line 94
      fieldcpy(cur_pkg, buf);
#line 95
      tmp___1 = strcmp((char const   *)(cur_pkg), (char const   *)(prev_pkg));
      }
#line 95
      if (tmp___1 != 0) {
#line 96
        if (output_pkg != -1) {
#line 97
          pkgs[output_pkg] = (char *)((void *)0);
        }
#line 98
        if (cur_deps[0]) {
          {
#line 99
          outputdeps(cur_deps);
          }
        }
#line 100
        if (cur_predeps[0]) {
          {
#line 101
          outputdeps(cur_predeps);
          }
        }
        {
#line 102
        strcpy((char */* __restrict  */)(prev_pkg), (char const   */* __restrict  */)(cur_pkg));
        }
      }
#line 104
      cur_predeps[0] = (char )'\000';
#line 104
      cur_deps[0] = cur_predeps[0];
#line 105
      output_pkg = -1;
#line 106
      i = 0;
      {
#line 106
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 106
        if (! (i < pkgc)) {
#line 106
          goto while_break___1;
        }
#line 107
        if (! pkgs[i]) {
#line 107
          goto __Cont;
        }
        {
#line 108
        any = 1;
#line 109
        tmp___2 = strcmp((char const   *)(cur_pkg), (char const   *)pkgs[i]);
        }
#line 109
        if (tmp___2 == 0) {
#line 110
          skip = 0;
#line 111
          output_pkg = i;
#line 112
          goto while_break___1;
        }
        __Cont: /* CIL Label */ 
#line 106
        i ++;
      }
      while_break___1: /* CIL Label */ ;
      }
#line 115
      if (! any) {
#line 115
        goto while_break___0;
      }
    } else
#line 116
    if (! skip) {
      {
#line 116
      tmp___4 = strncasecmp((char const   *)(buf), "Depends:", (size_t )8);
      }
#line 116
      if (tmp___4 == 0) {
        {
#line 117
        fieldcpy(cur_deps, buf);
        }
      } else {
#line 116
        goto _L;
      }
    } else
    _L: /* CIL Label */ 
#line 118
    if (! skip) {
      {
#line 118
      tmp___3 = strncasecmp((char const   *)(buf), "Pre-Depends:", (size_t )12);
      }
#line 118
      if (tmp___3 == 0) {
        {
#line 119
        fieldcpy(cur_predeps, buf);
        }
      }
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 121
  if (cur_deps[0]) {
    {
#line 122
    outputdeps(cur_deps);
    }
  }
#line 123
  if (cur_predeps[0]) {
    {
#line 124
    outputdeps(cur_predeps);
    }
  }
  {
#line 125
  fclose(f);
  }
#line 126
  return;
}
}
#line 128 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static void dopkgmirrorpkgs(int uniq , char *mirror , char *pkgsfile , char *fieldname ,
                            char **in_pkgs , int pkgc ) 
{ 
  char buf[1000] ;
  char cur_field[1000] ;
  char cur_pkg[1000] ;
  char cur_ver[1000] ;
  char cur_arch[1000] ;
  char cur_size[1000] ;
  char cur_checksum[1000] ;
  char cur_filename[1000] ;
  char prev_pkg[1000] ;
  char *pkgs[100] ;
  int i ;
  FILE *f ;
  char *output ;
  int output_pkg ;
  size_t tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int any ;
  int tmp___4 ;
  int tmp___5 ;
  size_t tmp___6 ;
  int tmp___7 ;
  size_t tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  char *tmp___13 ;

  {
#line 143
  output = (char *)((void *)0);
#line 144
  output_pkg = -1;
#line 146
  prev_pkg[0] = (char )'\000';
#line 146
  cur_filename[0] = prev_pkg[0];
#line 146
  cur_arch[0] = cur_filename[0];
#line 146
  cur_ver[0] = cur_arch[0];
#line 146
  cur_pkg[0] = cur_ver[0];
#line 146
  cur_field[0] = cur_pkg[0];
#line 148
  i = 0;
  {
#line 148
  while (1) {
    while_continue: /* CIL Label */ ;
#line 148
    if (! (i < pkgc)) {
#line 148
      goto while_break;
    }
#line 148
    pkgs[i] = *(in_pkgs + i);
#line 148
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 150
  f = fopen((char const   */* __restrict  */)pkgsfile, (char const   */* __restrict  */)"r");
  }
#line 151
  if ((unsigned long )f == (unsigned long )((void *)0)) {
    {
#line 152
    perror((char const   *)pkgsfile);
#line 153
    exit(1);
    }
  }
  {
#line 155
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 155
    tmp___13 = fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)f);
    }
#line 155
    if (! tmp___13) {
#line 155
      goto while_break___0;
    }
#line 156
    if (buf[0]) {
      {
#line 156
      tmp___0 = strlen((char const   *)(buf));
      }
#line 156
      if ((int )buf[tmp___0 - 1UL] == 10) {
        {
#line 156
        tmp = strlen((char const   *)(buf));
#line 156
        buf[tmp - 1UL] = (char )'\000';
        }
      }
    }
    {
#line 157
    tmp___1 = strlen((char const   *)fieldname);
#line 157
    tmp___2 = strncasecmp((char const   *)(buf), (char const   *)fieldname, tmp___1);
    }
#line 157
    if (tmp___2 == 0) {
      {
#line 158
      fieldcpy(cur_field, buf);
      }
    }
    {
#line 160
    tmp___12 = strncasecmp((char const   *)(buf), "Package:", (size_t )8);
    }
#line 160
    if (tmp___12 == 0) {
      {
#line 161
      fieldcpy(cur_pkg, buf);
#line 162
      tmp___3 = strcmp((char const   *)(cur_pkg), (char const   *)(prev_pkg));
      }
#line 162
      if (tmp___3 != 0) {
#line 163
        if (output) {
          {
#line 164
          fputs((char const   */* __restrict  */)output, (FILE */* __restrict  */)stdout);
          }
        }
#line 165
        if (uniq) {
#line 165
          if (output_pkg != -1) {
#line 166
            pkgs[output_pkg] = (char *)((void *)0);
          }
        }
        {
#line 167
        strcpy((char */* __restrict  */)(prev_pkg), (char const   */* __restrict  */)(cur_pkg));
        }
      }
      {
#line 169
      free((void *)output);
#line 170
      output = (char *)((void *)0);
#line 171
      output_pkg = -1;
      }
    } else {
      {
#line 172
      tmp___11 = strncasecmp((char const   *)(buf), "Version:", (size_t )8);
      }
#line 172
      if (tmp___11 == 0) {
        {
#line 173
        fieldcpy(cur_ver, buf);
        }
      } else {
        {
#line 174
        tmp___10 = strncasecmp((char const   *)(buf), "Architecture:", (size_t )13);
        }
#line 174
        if (tmp___10 == 0) {
          {
#line 175
          fieldcpy(cur_arch, buf);
          }
        } else {
          {
#line 176
          tmp___9 = strncasecmp((char const   *)(buf), "Size:", (size_t )5);
          }
#line 176
          if (tmp___9 == 0) {
            {
#line 177
            fieldcpy(cur_size, buf);
            }
          } else {
            {
#line 178
            tmp___6 = strlen((char const   *)checksum_field);
#line 178
            tmp___7 = strncasecmp((char const   *)(buf), (char const   *)checksum_field,
                                  tmp___6);
            }
#line 178
            if (tmp___7 == 0) {
              {
#line 178
              tmp___8 = strlen((char const   *)checksum_field);
              }
#line 178
              if ((int )buf[tmp___8] == 58) {
                {
#line 180
                fieldcpy(cur_checksum, buf);
                }
              } else {
#line 178
                goto _L;
              }
            } else {
              _L: /* CIL Label */ 
              {
#line 181
              tmp___5 = strncasecmp((char const   *)(buf), "Filename:", (size_t )9);
              }
#line 181
              if (tmp___5 == 0) {
                {
#line 182
                fieldcpy(cur_filename, buf);
                }
              } else
#line 183
              if (! buf[0]) {
#line 184
                any = 0;
#line 185
                i = 0;
                {
#line 185
                while (1) {
                  while_continue___1: /* CIL Label */ ;
#line 185
                  if (! (i < pkgc)) {
#line 185
                    goto while_break___1;
                  }
#line 186
                  if (! pkgs[i]) {
#line 186
                    goto __Cont;
                  }
                  {
#line 187
                  any = 1;
#line 188
                  tmp___4 = strcmp((char const   *)(cur_field), (char const   *)pkgs[i]);
                  }
#line 188
                  if (tmp___4 == 0) {
                    {
#line 189
                    free((void *)output);
#line 190
                    output = xasprintf("%s %s %s %s %s %s %s\n", cur_pkg, cur_ver,
                                       cur_arch, mirror, cur_filename, cur_checksum,
                                       cur_size);
#line 191
                    output_pkg = i;
                    }
#line 192
                    goto while_break___1;
                  }
                  __Cont: /* CIL Label */ 
#line 185
                  i ++;
                }
                while_break___1: /* CIL Label */ ;
                }
#line 195
                if (! any) {
#line 195
                  goto while_break___0;
                }
#line 196
                cur_field[0] = (char )'\000';
              }
            }
          }
        }
      }
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 199
  if (output) {
    {
#line 200
    fputs((char const   */* __restrict  */)output, (FILE */* __restrict  */)stdout);
    }
  }
#line 201
  if (uniq) {
#line 201
    if (output_pkg != -1) {
#line 202
      pkgs[output_pkg] = (char *)((void *)0);
    }
  }
  {
#line 203
  fclose(f);
  }
#line 206
  if (uniq) {
#line 207
    i = 0;
    {
#line 207
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 207
      if (! (i < pkgc)) {
#line 207
        goto while_break___2;
      }
#line 208
      if (pkgs[i]) {
        {
#line 209
        printf((char const   */* __restrict  */)"%s -\n", pkgs[i]);
        }
      }
#line 207
      i ++;
    }
    while_break___2: /* CIL Label */ ;
    }
  }
#line 213
  return;
}
}
#line 215 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static void dopkgstanzas(char *pkgsfile , char **pkgs , int pkgc ) 
{ 
  char buf[1000] ;
  char *accum ;
  size_t accum_size ;
  size_t accum_alloc ;
  char cur_pkg[1000] ;
  FILE *f ;
  void *tmp ;
  size_t len ;
  size_t tmp___0 ;
  void *tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;
  int i ;
  int tmp___4 ;
  int tmp___5 ;
  char *tmp___6 ;

  {
  {
#line 219
  accum_size = (size_t )0;
#line 219
  accum_alloc = (size_t )2000;
#line 223
  tmp = malloc(accum_alloc);
#line 223
  accum = (char *)tmp;
  }
#line 224
  if (! accum) {
    {
#line 225
    oom_die();
    }
  }
  {
#line 227
  f = fopen((char const   */* __restrict  */)pkgsfile, (char const   */* __restrict  */)"r");
  }
#line 228
  if ((unsigned long )f == (unsigned long )((void *)0)) {
    {
#line 229
    perror((char const   *)pkgsfile);
#line 230
    free((void *)accum);
#line 231
    exit(1);
    }
  }
  {
#line 233
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 233
    tmp___6 = fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)f);
    }
#line 233
    if (! tmp___6) {
#line 233
      goto while_break;
    }
#line 234
    if (buf[0]) {
      {
#line 235
      tmp___0 = strlen((char const   *)(buf));
#line 235
      len = tmp___0;
      }
#line 236
      if ((accum_size + len) + 1UL > accum_alloc) {
        {
#line 237
        accum_alloc = ((accum_size + len) + 1UL) * 2UL;
#line 238
        tmp___1 = realloc((void *)accum, accum_alloc);
#line 238
        accum = (char *)tmp___1;
        }
#line 239
        if (! accum) {
          {
#line 240
          oom_die();
          }
        }
      }
      {
#line 242
      strcpy((char */* __restrict  */)(accum + accum_size), (char const   */* __restrict  */)(buf));
#line 243
      accum_size += len;
      }
    }
#line 245
    if (buf[0]) {
      {
#line 245
      tmp___3 = strlen((char const   *)(buf));
      }
#line 245
      if ((int )buf[tmp___3 - 1UL] == 10) {
        {
#line 245
        tmp___2 = strlen((char const   *)(buf));
#line 245
        buf[tmp___2 - 1UL] = (char )'\000';
        }
      }
    }
    {
#line 246
    tmp___5 = strncasecmp((char const   *)(buf), "Package:", (size_t )8);
    }
#line 246
    if (tmp___5 == 0) {
      {
#line 247
      fieldcpy(cur_pkg, buf);
      }
    } else
#line 248
    if (! buf[0]) {
#line 250
      i = 0;
      {
#line 250
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 250
        if (! (i < pkgc)) {
#line 250
          goto while_break___0;
        }
#line 251
        if (! *(pkgs + i)) {
#line 251
          goto __Cont;
        }
        {
#line 252
        tmp___4 = strcmp((char const   *)(cur_pkg), (char const   *)*(pkgs + i));
        }
#line 252
        if (tmp___4 == 0) {
          {
#line 253
          fputs((char const   */* __restrict  */)accum, (FILE */* __restrict  */)stdout);
          }
#line 254
          if ((int )*(accum + (accum_size - 1UL)) != 10) {
            {
#line 255
            fputs((char const   */* __restrict  */)"\n\n", (FILE */* __restrict  */)stdout);
            }
          } else
#line 256
          if ((int )*(accum + (accum_size - 2UL)) != 10) {
            {
#line 257
            fputc('\n', stdout);
            }
          }
#line 258
          goto while_break___0;
        }
        __Cont: /* CIL Label */ 
#line 250
        i ++;
      }
      while_break___0: /* CIL Label */ ;
      }
#line 261
      *accum = (char )'\000';
#line 262
      accum_size = (size_t )0;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 265
  fclose(f);
#line 267
  free((void *)accum);
  }
#line 268
  return;
}
}
#line 270 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
static int dotranslatewgetpercent(int low , int high , int end , char *str ) 
{ 
  int ch ;
  int val ;
  int lastval ;
  int allow_percentage ;
  float f ;
  unsigned short const   **tmp ;
  unsigned short const   **tmp___0 ;

  {
#line 278
  val = 0;
#line 278
  lastval = val;
#line 279
  allow_percentage = 0;
  {
#line 280
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 280
    ch = getchar();
    }
#line 280
    if (! (ch != -1)) {
#line 280
      goto while_break;
    }
    {
#line 281
    tmp___0 = __ctype_b_loc();
    }
#line 281
    if ((int const   )*(*tmp___0 + ch) & 8192) {
#line 282
      allow_percentage = 1;
    } else
#line 283
    if (allow_percentage) {
      {
#line 283
      tmp = __ctype_b_loc();
      }
#line 283
      if ((int const   )*(*tmp + ch) & 2048) {
#line 284
        val *= 10;
#line 284
        val += ch - 48;
      } else {
#line 283
        goto _L;
      }
    } else
    _L: /* CIL Label */ 
#line 285
    if (allow_percentage) {
#line 285
      if (ch == 37) {
#line 286
        f = (float )(((double )((float )val) / 100.0) * (double )(high - low) + (double )low);
#line 287
        if (str) {
          {
#line 288
          printf((char const   */* __restrict  */)"P: %d %d %s\n", (int )f, end, str);
          }
        } else {
          {
#line 290
          printf((char const   */* __restrict  */)"P: %d %d\n", (int )f, end);
          }
        }
#line 292
        lastval = val;
      } else {
#line 294
        val = 0;
#line 295
        allow_percentage = 0;
      }
    } else {
#line 294
      val = 0;
#line 295
      allow_percentage = 0;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 298
  return (lastval == 100);
}
}
#line 301 "/home/june/collector/temp/base-installer-1.144ubuntu1/pkgdetails.c"
int main(int argc , char **argv ) 
{ 
  char *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int i ;
  int i___0 ;
  int i___1 ;
  int i___2 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;

  {
  {
#line 302
  checksum_field = getenv("DEBOOTSTRAP_CHECKSUM_FIELD");
  }
#line 303
  if ((unsigned long )checksum_field == (unsigned long )((void *)0)) {
#line 304
    checksum_field = (char *)"MD5sum";
  }
#line 307
  if (argc == 6) {
#line 307
    goto _L___4;
  } else
#line 307
  if (argc == 5) {
    _L___4: /* CIL Label */ 
    {
#line 307
    tmp___8 = strcmp((char const   *)*(argv + 1), "WGET%");
    }
#line 307
    if (tmp___8 == 0) {
#line 308
      if (argc == 6) {
#line 308
        tmp = *(argv + 5);
      } else {
#line 308
        tmp = (char *)((void *)0);
      }
      {
#line 308
      tmp___0 = atoi((char const   *)*(argv + 4));
#line 308
      tmp___1 = atoi((char const   *)*(argv + 3));
#line 308
      tmp___2 = atoi((char const   *)*(argv + 2));
#line 308
      tmp___3 = dotranslatewgetpercent(tmp___2, tmp___1, tmp___0, tmp);
      }
#line 308
      if (tmp___3) {
        {
#line 311
        exit(0);
        }
      } else {
        {
#line 313
        exit(1);
        }
      }
    } else {
#line 307
      goto _L___3;
    }
  } else
  _L___3: /* CIL Label */ 
#line 315
  if (argc >= 4) {
    {
#line 315
    tmp___7 = strcmp((char const   *)*(argv + 1), "GETDEPS");
    }
#line 315
    if (tmp___7 == 0) {
#line 317
      i = 3;
      {
#line 317
      while (1) {
        while_continue: /* CIL Label */ ;
#line 317
        if (! (argc - i > 100)) {
#line 317
          goto while_break;
        }
        {
#line 318
        dogetdeps(*(argv + 2), argv + i, 100);
#line 317
        i += 100;
        }
      }
      while_break: /* CIL Label */ ;
      }
      {
#line 320
      dogetdeps(*(argv + 2), argv + i, argc - i);
#line 321
      exit(0);
      }
    } else {
#line 315
      goto _L___2;
    }
  } else
  _L___2: /* CIL Label */ 
#line 322
  if (argc >= 5) {
    {
#line 322
    tmp___6 = strcmp((char const   *)*(argv + 1), "PKGS");
    }
#line 322
    if (tmp___6 == 0) {
#line 324
      i___0 = 4;
      {
#line 324
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 324
        if (! (argc - i___0 > 100)) {
#line 324
          goto while_break___0;
        }
        {
#line 325
        dopkgmirrorpkgs(1, *(argv + 2), *(argv + 3), (char *)"Package:", argv + i___0,
                        100);
#line 324
        i___0 += 100;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
      {
#line 327
      dopkgmirrorpkgs(1, *(argv + 2), *(argv + 3), (char *)"Package:", argv + i___0,
                      argc - i___0);
#line 328
      exit(0);
      }
    } else {
#line 322
      goto _L___1;
    }
  } else
  _L___1: /* CIL Label */ 
#line 329
  if (argc >= 6) {
    {
#line 329
    tmp___5 = strcmp((char const   *)*(argv + 1), "FIELD");
    }
#line 329
    if (tmp___5 == 0) {
#line 331
      i___1 = 5;
      {
#line 331
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 331
        if (! (argc - i___1 > 100)) {
#line 331
          goto while_break___1;
        }
        {
#line 332
        dopkgmirrorpkgs(0, *(argv + 3), *(argv + 4), *(argv + 2), argv + i___1, 100);
#line 331
        i___1 += 100;
        }
      }
      while_break___1: /* CIL Label */ ;
      }
      {
#line 334
      dopkgmirrorpkgs(0, *(argv + 3), *(argv + 4), *(argv + 2), argv + i___1, argc - i___1);
#line 335
      exit(0);
      }
    } else {
#line 329
      goto _L___0;
    }
  } else
  _L___0: /* CIL Label */ 
#line 336
  if (argc >= 4) {
    {
#line 336
    tmp___4 = strcmp((char const   *)*(argv + 1), "STANZAS");
    }
#line 336
    if (tmp___4 == 0) {
#line 338
      i___2 = 3;
      {
#line 338
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 338
        if (! (argc - i___2 > 100)) {
#line 338
          goto while_break___2;
        }
        {
#line 339
        dopkgstanzas(*(argv + 2), argv + i___2, 100);
#line 338
        i___2 += 100;
        }
      }
      while_break___2: /* CIL Label */ ;
      }
      {
#line 341
      dopkgstanzas(*(argv + 2), argv + i___2, argc - i___2);
#line 342
      exit(0);
      }
    } else {
#line 336
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    {
#line 344
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"usage: %s PKGS mirror packagesfile pkgs..\n",
            *(argv + 0));
#line 345
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"   or: %s FIELD field mirror packagesfile pkgs..\n",
            *(argv + 0));
#line 347
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"   or: %s GETDEPS packagesfile pkgs..\n",
            *(argv + 0));
#line 348
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"   or: %s STANZAS packagesfile pkgs..\n",
            *(argv + 0));
#line 349
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"   or: %s WGET%% low high end reason\n",
            *(argv + 0));
#line 350
    exit(1);
    }
  }
}
}
