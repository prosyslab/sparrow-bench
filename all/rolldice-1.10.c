/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 59 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.h"
enum __anonenum_rand_type_27 {
    UNDEF = 0,
    URANDOM = 1,
    RANDOM = 2
} ;
#line 59 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.h"
typedef enum __anonenum_rand_type_27 rand_type;
#line 104 "/usr/include/getopt.h"
struct option {
   char const   *name ;
   int has_arg ;
   int *flag ;
   int val ;
};
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 433
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) sscanf)(char const   * __restrict  __s ,
                                                                             char const   * __restrict  __format 
                                                                             , ...)  __asm__("__isoc99_sscanf")  ;
#line 709
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
#line 466 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 62 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.h"
int *parse_string(char *dice_string ) ;
#line 63
int rolldie(int num_sides ) ;
#line 64
void init_random(rand_type rand_file___0 ) ;
#line 14 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.c"
static FILE *ran_dev  ;
#line 16 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.c"
void init_random(rand_type rand_file___0 ) 
{ 


  {
#line 17
  if ((unsigned int )rand_file___0 == 2U) {
    {
#line 18
    ran_dev = fopen((char const   */* __restrict  */)"/dev/random", (char const   */* __restrict  */)"r");
    }
#line 18
    if ((unsigned long )ran_dev == (unsigned long )((void *)0)) {
      {
#line 19
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Error in opening /dev/random!\n");
#line 20
      exit(1);
      }
    }
  } else {
    {
#line 23
    ran_dev = fopen((char const   */* __restrict  */)"/dev/urandom", (char const   */* __restrict  */)"r");
    }
#line 23
    if ((unsigned long )ran_dev == (unsigned long )((void *)0)) {
      {
#line 24
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Error in opening /dev/urandom!\n");
#line 25
      exit(1);
      }
    }
  }
#line 27
  return;
}
}
#line 29 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.c"
static int get_random(int sides ) 
{ 
  unsigned int ret_value ;
  unsigned int max ;
  size_t tmp ;

  {
#line 32
  max = 4294967295U;
#line 34
  max -= max % (unsigned int )sides;
  again: 
  {
#line 36
  tmp = fread((void */* __restrict  */)(& ret_value), sizeof(unsigned int ), (size_t )1,
              (FILE */* __restrict  */)ran_dev);
  }
#line 36
  if (! (tmp == 1UL)) {
    {
#line 37
    printf((char const   */* __restrict  */)"Error in reading random device!\n");
#line 38
    exit(1);
    }
  }
#line 40
  if (ret_value >= max) {
#line 41
    goto again;
  }
#line 42
  return ((int )(ret_value % (unsigned int )sides));
}
}
#line 50 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.c"
int rolldie(int num_sides ) 
{ 
  int tmp ;

  {
  {
#line 52
  tmp = get_random(num_sides);
  }
#line 52
  return (1 + tmp);
}
}
#line 77
extern int ( /* missing proto */  isdigit)() ;
#line 61 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/rolldice.c"
int *parse_string(char *dice_string ) 
{ 
  int temp_int ;
  int *dice_nums ;
  void *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;

  {
  {
#line 62
  temp_int = -1;
#line 64
  tmp = malloc(6UL * sizeof(int ));
#line 64
  dice_nums = (int *)tmp;
  }
#line 64
  if ((unsigned long )dice_nums == (unsigned long )((void *)0)) {
#line 65
    return ((int *)((void *)0));
  }
#line 67
  *(dice_nums + 0) = 1;
#line 68
  *(dice_nums + 1) = 1;
#line 69
  *(dice_nums + 2) = 6;
#line 70
  *(dice_nums + 3) = 1;
#line 71
  *(dice_nums + 4) = 0;
#line 72
  *(dice_nums + 5) = 0;
  {
#line 74
  while (1) {
    while_continue: /* CIL Label */ ;
#line 74
    if (! ((int )*dice_string != 0)) {
#line 74
      goto while_break;
    }
    {
#line 75
    tmp___6 = isdigit((int )*dice_string);
    }
#line 75
    if (tmp___6) {
      {
#line 76
      sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
             & temp_int);
      }
      {
#line 77
      while (1) {
        while_continue___0: /* CIL Label */ ;
        {
#line 77
        dice_string ++;
#line 77
        tmp___0 = isdigit((int )*dice_string);
        }
#line 77
        if (! tmp___0) {
#line 77
          goto while_break___0;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
    } else {
      {
#line 81
      if ((int )*dice_string == 100) {
#line 81
        goto case_100;
      }
#line 93
      if ((int )*dice_string == 115) {
#line 93
        goto case_115;
      }
#line 100
      if ((int )*dice_string == 120) {
#line 100
        goto case_120;
      }
#line 107
      if ((int )*dice_string == 42) {
#line 107
        goto case_42;
      }
#line 114
      if ((int )*dice_string == 43) {
#line 114
        goto case_43;
      }
#line 121
      if ((int )*dice_string == 45) {
#line 121
        goto case_45;
      }
#line 128
      goto switch_default;
      case_100: /* CIL Label */ 
#line 82
      if (temp_int > 0) {
#line 82
        if (temp_int < 32767) {
#line 83
          *(dice_nums + 1) = temp_int;
        }
      }
#line 84
      dice_string ++;
#line 85
      if ((int )*dice_string == 37) {
#line 86
        *(dice_nums + 2) = 100;
      } else {
        {
#line 87
        tmp___1 = sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
                         & temp_int);
        }
#line 87
        if (tmp___1 < 1) {
          {
#line 89
          free((void *)dice_nums);
          }
#line 90
          return ((int *)((void *)0));
        } else
#line 87
        if (temp_int < 2) {
          {
#line 89
          free((void *)dice_nums);
          }
#line 90
          return ((int *)((void *)0));
        } else
#line 87
        if (temp_int >= 32767) {
          {
#line 89
          free((void *)dice_nums);
          }
#line 90
          return ((int *)((void *)0));
        } else {
#line 91
          *(dice_nums + 2) = temp_int;
        }
      }
#line 92
      goto switch_break;
      case_115: /* CIL Label */ 
      {
#line 94
      dice_string ++;
#line 94
      tmp___2 = sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
                       & temp_int);
      }
#line 94
      if (tmp___2 < 1) {
        {
#line 96
        free((void *)dice_nums);
        }
#line 97
        return ((int *)((void *)0));
      } else
#line 94
      if (temp_int < 0) {
        {
#line 96
        free((void *)dice_nums);
        }
#line 97
        return ((int *)((void *)0));
      } else
#line 94
      if (temp_int >= 32767) {
        {
#line 96
        free((void *)dice_nums);
        }
#line 97
        return ((int *)((void *)0));
      } else {
#line 98
        *(dice_nums + 5) = temp_int;
      }
#line 99
      goto switch_break;
      case_120: /* CIL Label */ 
#line 101
      if (temp_int < 1) {
        {
#line 102
        free((void *)dice_nums);
        }
#line 103
        return ((int *)((void *)0));
      } else
#line 101
      if (temp_int >= 32767) {
        {
#line 102
        free((void *)dice_nums);
        }
#line 103
        return ((int *)((void *)0));
      } else {
#line 104
        *(dice_nums + 0) = temp_int;
      }
#line 105
      dice_string ++;
#line 106
      goto switch_break;
      case_42: /* CIL Label */ 
      {
#line 108
      dice_string ++;
#line 108
      tmp___3 = sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
                       & temp_int);
      }
#line 108
      if (tmp___3 < 1) {
        {
#line 110
        free((void *)dice_nums);
        }
#line 111
        return ((int *)((void *)0));
      } else
#line 108
      if (temp_int < 0) {
        {
#line 110
        free((void *)dice_nums);
        }
#line 111
        return ((int *)((void *)0));
      } else
#line 108
      if (temp_int >= 32767) {
        {
#line 110
        free((void *)dice_nums);
        }
#line 111
        return ((int *)((void *)0));
      } else {
#line 112
        *(dice_nums + 3) = temp_int;
      }
#line 113
      goto switch_break;
      case_43: /* CIL Label */ 
      {
#line 115
      dice_string ++;
#line 115
      tmp___4 = sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
                       & temp_int);
      }
#line 115
      if (tmp___4 < 1) {
        {
#line 117
        free((void *)dice_nums);
        }
#line 118
        return ((int *)((void *)0));
      } else
#line 115
      if (temp_int < 0) {
        {
#line 117
        free((void *)dice_nums);
        }
#line 118
        return ((int *)((void *)0));
      } else
#line 115
      if (temp_int >= 32767) {
        {
#line 117
        free((void *)dice_nums);
        }
#line 118
        return ((int *)((void *)0));
      } else {
#line 119
        *(dice_nums + 4) = temp_int;
      }
#line 120
      goto switch_break;
      case_45: /* CIL Label */ 
      {
#line 122
      dice_string ++;
#line 122
      tmp___5 = sscanf((char const   */* __restrict  */)dice_string, (char const   */* __restrict  */)"%d",
                       & temp_int);
      }
#line 122
      if (tmp___5 < 1) {
        {
#line 124
        free((void *)dice_nums);
        }
#line 125
        return ((int *)((void *)0));
      } else
#line 122
      if (temp_int < 0) {
        {
#line 124
        free((void *)dice_nums);
        }
#line 125
        return ((int *)((void *)0));
      } else
#line 122
      if (temp_int >= 32767) {
        {
#line 124
        free((void *)dice_nums);
        }
#line 125
        return ((int *)((void *)0));
      } else {
#line 126
        *(dice_nums + 4) = - temp_int;
      }
#line 127
      goto switch_break;
      switch_default: /* CIL Label */ 
#line 129
      dice_string ++;
#line 130
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
#line 132
      temp_int = 0;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 136
  return (dice_nums);
}
}
#line 846 "/usr/include/stdio.h"
extern void perror(char const   *__s ) ;
#line 71 "/usr/include/getopt.h"
extern int optind ;
#line 173
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getopt_long)(int ___argc ,
                                                                                  char * const  *___argv ,
                                                                                  char const   *__shortopts ,
                                                                                  struct option  const  *__longopts ,
                                                                                  int *__longind ) ;
#line 14 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
static int const   MAJOR_VERSION  =    (int const   )1;
#line 15 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
static int const   MINOR_VERSION  =    (int const   )10;
#line 18 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
struct option long_opts[5]  = {      {"help", 0, (int *)((void *)0), 'h'}, 
        {"version", 0, (int *)((void *)0), 'v'}, 
        {"random", 0, (int *)((void *)0), 'r'}, 
        {"urandom", 0, (int *)((void *)0), 'u'}, 
        {"separate", 0, (int *)((void *)0), 's'}};
#line 28 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
rand_type rand_file  =    (rand_type )0;
#line 31 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
static int print_separate  ;
#line 39 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
static void print_usage(int exitval ) 
{ 


  {
  {
#line 40
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Usage: rolldice [options] <dice string>\n");
#line 41
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"For dice string format and options, ");
#line 42
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"see rolldice(6).\n");
#line 43
  exit(exitval);
  }
}
}
#line 52 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
static void print_version(void) 
{ 


  {
  {
#line 53
  printf((char const   */* __restrict  */)"rolldice, v%d.%d\n", MAJOR_VERSION, MINOR_VERSION);
#line 54
  printf((char const   */* __restrict  */)"Written by Stevie Strickland (sstrickl@resnet.gatech.edu)\n");
#line 55
  exit(0);
  }
}
}
#line 64 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
void print_rolls(int *dice_nums ) 
{ 
  int i ;
  int j ;
  int k ;
  int temp_int ;
  int temp_index ;
  int temp_total ;
  int *temp_roll ;
  void *tmp ;

  {
#line 68
  if ((unsigned long )dice_nums == (unsigned long )((void *)0)) {
    {
#line 69
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Problems with the dice string, either malformed or numbers are too large,\nso quitting!\n");
#line 71
    exit(1);
    }
  }
  {
#line 74
  tmp = malloc(sizeof(*temp_roll) * (unsigned long )*(dice_nums + 1));
#line 74
  temp_roll = (int *)tmp;
  }
#line 74
  if ((unsigned long )temp_roll == (unsigned long )((void *)0)) {
    {
#line 75
    perror("rolldice");
#line 76
    exit(1);
    }
  }
#line 79
  i = 0;
  {
#line 79
  while (1) {
    while_continue: /* CIL Label */ ;
#line 79
    if (! (i < *(dice_nums + 0))) {
#line 79
      goto while_break;
    }
#line 80
    temp_total = 0;
#line 81
    if (print_separate) {
      {
#line 81
      printf((char const   */* __restrict  */)"Roll #%d: (", i + 1);
      }
    }
#line 82
    j = 0;
    {
#line 82
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 82
      if (! (j < *(dice_nums + 1))) {
#line 82
        goto while_break___0;
      }
      {
#line 83
      *(temp_roll + j) = rolldie(*(dice_nums + 2));
      }
#line 84
      if (print_separate) {
        {
#line 84
        printf((char const   */* __restrict  */)"%d ", *(temp_roll + j));
        }
      }
#line 85
      temp_total += *(temp_roll + j);
#line 82
      j ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 87
    j = 0;
    {
#line 87
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 87
      if (! (j < *(dice_nums + 5))) {
#line 87
        goto while_break___1;
      }
#line 88
      temp_int = 32767;
#line 89
      k = 0;
      {
#line 89
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 89
        if (! (k < *(dice_nums + 1))) {
#line 89
          goto while_break___2;
        }
#line 90
        if (temp_int > *(temp_roll + k)) {
#line 91
          temp_int = *(temp_roll + k);
#line 92
          temp_index = k;
        }
#line 89
        k ++;
      }
      while_break___2: /* CIL Label */ ;
      }
#line 94
      if (print_separate) {
        {
#line 94
        printf((char const   */* __restrict  */)"- %d ", temp_int);
        }
      }
#line 95
      temp_total -= temp_int;
#line 96
      *(temp_roll + temp_index) = 32767;
#line 87
      j ++;
    }
    while_break___1: /* CIL Label */ ;
    }
#line 98
    if (print_separate) {
      {
#line 98
      printf((char const   */* __restrict  */)") ");
      }
    }
#line 99
    if (*(dice_nums + 3) != 1) {
#line 100
      if (print_separate) {
        {
#line 100
        printf((char const   */* __restrict  */)"* %d ", *(dice_nums + 3));
        }
      }
#line 101
      temp_total *= *(dice_nums + 3);
    }
#line 103
    if (*(dice_nums + 4)) {
#line 104
      if (print_separate) {
        {
#line 104
        printf((char const   */* __restrict  */)"+ %d ", *(dice_nums + 4));
        }
      }
#line 105
      temp_total += *(dice_nums + 4);
    }
#line 107
    if (print_separate) {
      {
#line 107
      printf((char const   */* __restrict  */)"= ");
      }
    }
    {
#line 108
    printf((char const   */* __restrict  */)"%d ", temp_total);
    }
#line 109
    if (print_separate) {
      {
#line 109
      printf((char const   */* __restrict  */)"\n");
      }
    }
#line 79
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 111
  if (! print_separate) {
    {
#line 111
    printf((char const   */* __restrict  */)"\n");
    }
  }
#line 112
  return;
}
}
#line 114 "/home/june/repo/benchmarks/collector/temp/rolldice-1.10/main.c"
int main(int argc , char **argv ) 
{ 
  int c ;
  int index___0 ;
  int *dice_nums ;

  {
#line 118
  dice_nums = (int *)((void *)0);
  {
#line 120
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 120
    c = getopt_long(argc, (char * const  *)argv, "hvrus", (struct option  const  *)(long_opts),
                    (int *)((void *)0));
    }
#line 120
    if (! (c != -1)) {
#line 120
      goto while_break;
    }
    {
#line 122
    if (c == 104) {
#line 122
      goto case_104;
    }
#line 124
    if (c == 118) {
#line 124
      goto case_118;
    }
#line 126
    if (c == 114) {
#line 126
      goto case_114;
    }
#line 132
    if (c == 117) {
#line 132
      goto case_117;
    }
#line 138
    if (c == 115) {
#line 138
      goto case_115;
    }
#line 121
    goto switch_break;
    case_104: /* CIL Label */ 
    {
#line 123
    print_usage(0);
    }
#line 123
    goto switch_break;
    case_118: /* CIL Label */ 
    {
#line 125
    print_version();
    }
#line 125
    goto switch_break;
    case_114: /* CIL Label */ 
#line 127
    if ((unsigned int )rand_file == 1U) {
      {
#line 128
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Choose either \'-r\' or \'-u\', please.\n");
      }
#line 129
      return (1);
    }
#line 131
    rand_file = (rand_type )2;
#line 131
    goto switch_break;
    case_117: /* CIL Label */ 
#line 133
    if ((unsigned int )rand_file == 2U) {
      {
#line 134
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Choose either \'-r\' or \'-u\', please.\n");
      }
#line 135
      return (1);
    }
#line 137
    rand_file = (rand_type )1;
#line 137
    goto switch_break;
    case_115: /* CIL Label */ 
#line 139
    print_separate = 1;
#line 139
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 143
  init_random(rand_file);
  }
#line 145
  if (argc < 2) {
    {
#line 146
    print_usage(1);
    }
  }
#line 149
  index___0 = optind;
  {
#line 149
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 149
    if (! ((unsigned long )*(argv + index___0) != (unsigned long )((void *)0))) {
#line 149
      goto while_break___0;
    }
    {
#line 150
    dice_nums = parse_string(*(argv + index___0));
    }
#line 151
    if ((unsigned long )dice_nums == (unsigned long )((void *)0)) {
      {
#line 152
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: Failure in getting dice attributes\n",
              *(argv + 0));
      }
#line 153
      return (1);
    }
    {
#line 155
    print_rolls(dice_nums);
#line 156
    free((void *)dice_nums);
#line 149
    index___0 ++;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 159
  return (0);
}
}
