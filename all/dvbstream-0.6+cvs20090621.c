/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 189 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __socklen_t;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 49 "/usr/include/stdint.h"
typedef unsigned short uint16_t;
#line 51 "/usr/include/stdint.h"
typedef unsigned int uint32_t;
#line 33 "/usr/include/x86_64-linux-gnu/bits/socket.h"
typedef __socklen_t socklen_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/sockaddr.h"
typedef unsigned short sa_family_t;
#line 149 "/usr/include/x86_64-linux-gnu/bits/socket.h"
struct sockaddr {
   sa_family_t sa_family ;
   char sa_data[14] ;
};
#line 30 "/usr/include/netinet/in.h"
typedef uint32_t in_addr_t;
#line 31 "/usr/include/netinet/in.h"
struct in_addr {
   in_addr_t s_addr ;
};
#line 117 "/usr/include/netinet/in.h"
typedef uint16_t in_port_t;
#line 237 "/usr/include/netinet/in.h"
struct sockaddr_in {
   sa_family_t sin_family ;
   in_port_t sin_port ;
   struct in_addr sin_addr ;
   unsigned char sin_zero[((sizeof(struct sockaddr ) - sizeof(unsigned short )) - sizeof(in_port_t )) - sizeof(struct in_addr )] ;
};
#line 264 "/usr/include/netinet/in.h"
struct ip_mreq {
   struct in_addr imr_multiaddr ;
   struct in_addr imr_interface ;
};
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 9 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.h"
struct rtpbits {
   unsigned int v : 2 ;
   unsigned int p : 1 ;
   unsigned int x : 1 ;
   unsigned int cc : 4 ;
   unsigned int m : 1 ;
   unsigned int pt : 7 ;
   unsigned int sequence : 16 ;
};
#line 19 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.h"
struct rtpheader {
   struct rtpbits b ;
   int timestamp ;
   int ssrc ;
   int type ;
};
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 141 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __suseconds_t;
#line 197 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef long int64_t;
#line 30 "/usr/include/x86_64-linux-gnu/bits/time.h"
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
#line 55 "/usr/include/x86_64-linux-gnu/sys/time.h"
struct timezone {
   int tz_minuteswest ;
   int tz_dsttime ;
};
#line 61 "/usr/include/x86_64-linux-gnu/sys/time.h"
typedef struct timezone * __restrict  __timezone_ptr_t;
#line 36 "/usr/include/x86_64-linux-gnu/sys/poll.h"
typedef unsigned long nfds_t;
#line 39 "/usr/include/x86_64-linux-gnu/sys/poll.h"
struct pollfd {
   int fd ;
   short events ;
   short revents ;
};
#line 48 "/usr/include/stdint.h"
typedef unsigned char uint8_t;
#line 85 "/usr/include/signal.h"
typedef void (*__sighandler_t)(int  );
#line 100 "/usr/include/netdb.h"
struct hostent {
   char *h_name ;
   char **h_aliases ;
   int h_addrtype ;
   int h_length ;
   char **h_addr_list ;
};
#line 23 "/usr/include/asm-generic/int-ll64.h"
typedef unsigned short __u16;
#line 26 "/usr/include/asm-generic/int-ll64.h"
typedef unsigned int __u32;
#line 33 "/usr/include/linux/dvb/dmx.h"
enum __anonenum_dmx_output_t_67 {
    DMX_OUT_DECODER = 0,
    DMX_OUT_TAP = 1,
    DMX_OUT_TS_TAP = 2,
    DMX_OUT_TSDEMUX_TAP = 3
} ;
#line 33 "/usr/include/linux/dvb/dmx.h"
typedef enum __anonenum_dmx_output_t_67 dmx_output_t;
#line 45
enum __anonenum_dmx_input_t_68 {
    DMX_IN_FRONTEND = 0,
    DMX_IN_DVR = 1
} ;
#line 45 "/usr/include/linux/dvb/dmx.h"
typedef enum __anonenum_dmx_input_t_68 dmx_input_t;
#line 52
enum dmx_ts_pes {
    DMX_PES_AUDIO0 = 0,
    DMX_PES_VIDEO0 = 1,
    DMX_PES_TELETEXT0 = 2,
    DMX_PES_SUBTITLE0 = 3,
    DMX_PES_PCR0 = 4,
    DMX_PES_AUDIO1 = 5,
    DMX_PES_VIDEO1 = 6,
    DMX_PES_TELETEXT1 = 7,
    DMX_PES_SUBTITLE1 = 8,
    DMX_PES_PCR1 = 9,
    DMX_PES_AUDIO2 = 10,
    DMX_PES_VIDEO2 = 11,
    DMX_PES_TELETEXT2 = 12,
    DMX_PES_SUBTITLE2 = 13,
    DMX_PES_PCR2 = 14,
    DMX_PES_AUDIO3 = 15,
    DMX_PES_VIDEO3 = 16,
    DMX_PES_TELETEXT3 = 17,
    DMX_PES_SUBTITLE3 = 18,
    DMX_PES_PCR3 = 19,
    DMX_PES_OTHER = 20
} ;
#line 52 "/usr/include/linux/dvb/dmx.h"
typedef enum dmx_ts_pes dmx_pes_type_t;
#line 109 "/usr/include/linux/dvb/dmx.h"
struct dmx_pes_filter_params {
   __u16 pid ;
   dmx_input_t input ;
   dmx_output_t output ;
   dmx_pes_type_t pes_type ;
   __u32 flags ;
};
#line 147 "/usr/include/linux/dvb/frontend.h"
enum fe_spectral_inversion {
    INVERSION_OFF = 0,
    INVERSION_ON = 1,
    INVERSION_AUTO = 2
} ;
#line 147 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_spectral_inversion fe_spectral_inversion_t;
#line 154
enum fe_code_rate {
    FEC_NONE = 0,
    FEC_1_2 = 1,
    FEC_2_3 = 2,
    FEC_3_4 = 3,
    FEC_4_5 = 4,
    FEC_5_6 = 5,
    FEC_6_7 = 6,
    FEC_7_8 = 7,
    FEC_8_9 = 8,
    FEC_AUTO = 9,
    FEC_3_5 = 10,
    FEC_9_10 = 11,
    FEC_2_5 = 12
} ;
#line 154 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_code_rate fe_code_rate_t;
#line 171
enum fe_modulation {
    QPSK = 0,
    QAM_16 = 1,
    QAM_32 = 2,
    QAM_64 = 3,
    QAM_128 = 4,
    QAM_256 = 5,
    QAM_AUTO = 6,
    VSB_8 = 7,
    VSB_16 = 8,
    PSK_8 = 9,
    APSK_16 = 10,
    APSK_32 = 11,
    DQPSK = 12,
    QAM_4_NR = 13
} ;
#line 171 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_modulation fe_modulation_t;
#line 188
enum fe_transmit_mode {
    TRANSMISSION_MODE_2K = 0,
    TRANSMISSION_MODE_8K = 1,
    TRANSMISSION_MODE_AUTO = 2,
    TRANSMISSION_MODE_4K = 3,
    TRANSMISSION_MODE_1K = 4,
    TRANSMISSION_MODE_16K = 5,
    TRANSMISSION_MODE_32K = 6,
    TRANSMISSION_MODE_C1 = 7,
    TRANSMISSION_MODE_C3780 = 8
} ;
#line 188 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_transmit_mode fe_transmit_mode_t;
#line 200
enum fe_bandwidth {
    BANDWIDTH_8_MHZ = 0,
    BANDWIDTH_7_MHZ = 1,
    BANDWIDTH_6_MHZ = 2,
    BANDWIDTH_AUTO = 3,
    BANDWIDTH_5_MHZ = 4,
    BANDWIDTH_10_MHZ = 5,
    BANDWIDTH_1_712_MHZ = 6
} ;
#line 200 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_bandwidth fe_bandwidth_t;
#line 210
enum fe_guard_interval {
    GUARD_INTERVAL_1_32 = 0,
    GUARD_INTERVAL_1_16 = 1,
    GUARD_INTERVAL_1_8 = 2,
    GUARD_INTERVAL_1_4 = 3,
    GUARD_INTERVAL_AUTO = 4,
    GUARD_INTERVAL_1_128 = 5,
    GUARD_INTERVAL_19_128 = 6,
    GUARD_INTERVAL_19_256 = 7,
    GUARD_INTERVAL_PN420 = 8,
    GUARD_INTERVAL_PN595 = 9,
    GUARD_INTERVAL_PN945 = 10
} ;
#line 210 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_guard_interval fe_guard_interval_t;
#line 225
enum fe_hierarchy {
    HIERARCHY_NONE = 0,
    HIERARCHY_1 = 1,
    HIERARCHY_2 = 2,
    HIERARCHY_4 = 3,
    HIERARCHY_AUTO = 4
} ;
#line 225 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_hierarchy fe_hierarchy_t;
#line 64 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef uint32_t u32;
#line 54 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
struct video_i {
   u32 horizontal_size ;
   u32 vertical_size ;
   u32 aspect_ratio ;
   double framerate ;
   u32 video_format ;
   u32 bit_rate ;
   u32 comp_bit_rate ;
   u32 vbv_buffer_size ;
   u32 CSPF ;
   u32 off ;
};
#line 54 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
typedef struct video_i VideoInfo;
#line 67 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
struct audio_i {
   int layer ;
   u32 bit_rate ;
   u32 frequency ;
   u32 mode ;
   u32 mode_extension ;
   u32 emphasis ;
   u32 framesize ;
   u32 off ;
};
#line 67 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
typedef struct audio_i AudioInfo;
#line 182 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
struct ipack_s {
   int size ;
   int size_orig ;
   int found ;
   int ps ;
   int has_ai ;
   int has_vi ;
   AudioInfo ai ;
   VideoInfo vi ;
   uint8_t *buf ;
   uint8_t cid ;
   uint32_t plength ;
   uint8_t plen[2] ;
   uint8_t flag1 ;
   uint8_t flag2 ;
   uint8_t hlength ;
   uint8_t pts[5] ;
   uint8_t last_pts[5] ;
   int mpeg ;
   uint8_t check ;
   int which ;
   int done ;
   void *data ;
   void (*func)(uint8_t *buf , int size , void *priv ) ;
   int count ;
   int start ;
   int fd ;
};
#line 182 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
typedef struct ipack_s ipack;
#line 407 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
typedef uint8_t PID_BIT_MAP[1024];
#line 412 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_pids_map_t_81 {
   char *filename ;
   int fd ;
   int pids[16] ;
   int num ;
   int pid_cnt ;
   int progs[16] ;
   int progs_cnt ;
   uint8_t **prognames ;
   int prognames_cnt ;
   PID_BIT_MAP pidmap ;
   long start_time ;
   long end_time ;
   int socket ;
   struct rtpheader hdr ;
   struct sockaddr_in sOut ;
   unsigned char buf[1500] ;
   unsigned char net[20] ;
   int pos ;
   int port ;
};
#line 412 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
typedef struct __anonstruct_pids_map_t_81 pids_map_t;
#line 439 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_section_t_82 {
   uint8_t buf[1281] ;
   unsigned int pos ;
};
#line 439 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
typedef struct __anonstruct_section_t_82 section_t;
#line 444 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_pat_entry_83 {
   int program ;
   int pmt_pid ;
};
#line 444 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
typedef struct __anonstruct_pat_entry_83 pat_entry;
#line 449 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_PAT_84 {
   int len ;
   int version ;
   section_t section ;
   pat_entry *entries ;
   int entries_cnt ;
};
#line 458 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_pmt_t_85 {
   section_t section ;
   int version ;
   int pids[202] ;
   int pids_cnt ;
   uint8_t name[256] ;
};
#line 458 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
typedef struct __anonstruct_pmt_t_85 pmt_t;
#line 466 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_PMT_86 {
   pmt_t *entries ;
   int cnt ;
};
#line 471 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_SDT_87 {
   int len ;
   int version ;
   section_t section ;
};
#line 140 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __useconds_t;
#line 75 "/usr/include/time.h"
typedef __time_t time_t;
#line 196 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef int int32_t;
#line 20 "/usr/include/asm-generic/int-ll64.h"
typedef unsigned char __u8;
#line 31 "/usr/include/linux/dvb/frontend.h"
enum fe_type {
    FE_QPSK = 0,
    FE_QAM = 1,
    FE_OFDM = 2,
    FE_ATSC = 3
} ;
#line 31 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_type fe_type_t;
#line 39
enum fe_caps {
    FE_IS_STUPID = 0,
    FE_CAN_INVERSION_AUTO = 1,
    FE_CAN_FEC_1_2 = 2,
    FE_CAN_FEC_2_3 = 4,
    FE_CAN_FEC_3_4 = 8,
    FE_CAN_FEC_4_5 = 16,
    FE_CAN_FEC_5_6 = 32,
    FE_CAN_FEC_6_7 = 64,
    FE_CAN_FEC_7_8 = 128,
    FE_CAN_FEC_8_9 = 256,
    FE_CAN_FEC_AUTO = 512,
    FE_CAN_QPSK = 1024,
    FE_CAN_QAM_16 = 2048,
    FE_CAN_QAM_32 = 4096,
    FE_CAN_QAM_64 = 8192,
    FE_CAN_QAM_128 = 16384,
    FE_CAN_QAM_256 = 32768,
    FE_CAN_QAM_AUTO = 65536,
    FE_CAN_TRANSMISSION_MODE_AUTO = 131072,
    FE_CAN_BANDWIDTH_AUTO = 262144,
    FE_CAN_GUARD_INTERVAL_AUTO = 524288,
    FE_CAN_HIERARCHY_AUTO = 1048576,
    FE_CAN_8VSB = 2097152,
    FE_CAN_16VSB = 4194304,
    FE_HAS_EXTENDED_CAPS = 8388608,
    FE_CAN_MULTISTREAM = 67108864,
    FE_CAN_TURBO_FEC = 134217728,
    FE_CAN_2G_MODULATION = 268435456,
    FE_NEEDS_BENDING = 536870912,
    FE_CAN_RECOVER = 1073741824,
    FE_CAN_MUTE_TS = 2147483648U
} ;
#line 39 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_caps fe_caps_t;
#line 74 "/usr/include/linux/dvb/frontend.h"
struct dvb_frontend_info {
   char name[128] ;
   fe_type_t type ;
   __u32 frequency_min ;
   __u32 frequency_max ;
   __u32 frequency_stepsize ;
   __u32 frequency_tolerance ;
   __u32 symbol_rate_min ;
   __u32 symbol_rate_max ;
   __u32 symbol_rate_tolerance ;
   __u32 notifier_delay ;
   fe_caps_t caps ;
};
#line 93 "/usr/include/linux/dvb/frontend.h"
struct dvb_diseqc_master_cmd {
   __u8 msg[6] ;
   __u8 msg_len ;
};
#line 106
enum fe_sec_voltage {
    SEC_VOLTAGE_13 = 0,
    SEC_VOLTAGE_18 = 1,
    SEC_VOLTAGE_OFF = 2
} ;
#line 106 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_sec_voltage fe_sec_voltage_t;
#line 113
enum fe_sec_tone_mode {
    SEC_TONE_ON = 0,
    SEC_TONE_OFF = 1
} ;
#line 113 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_sec_tone_mode fe_sec_tone_mode_t;
#line 137
enum fe_status {
    FE_HAS_SIGNAL = 1,
    FE_HAS_CARRIER = 2,
    FE_HAS_VITERBI = 4,
    FE_HAS_SYNC = 8,
    FE_HAS_LOCK = 16,
    FE_TIMEDOUT = 32,
    FE_REINIT = 64
} ;
#line 137 "/usr/include/linux/dvb/frontend.h"
typedef enum fe_status fe_status_t;
#line 240 "/usr/include/linux/dvb/frontend.h"
struct dvb_qpsk_parameters {
   __u32 symbol_rate ;
   fe_code_rate_t fec_inner ;
};
#line 245 "/usr/include/linux/dvb/frontend.h"
struct dvb_qam_parameters {
   __u32 symbol_rate ;
   fe_code_rate_t fec_inner ;
   fe_modulation_t modulation ;
};
#line 251 "/usr/include/linux/dvb/frontend.h"
struct dvb_vsb_parameters {
   fe_modulation_t modulation ;
};
#line 255 "/usr/include/linux/dvb/frontend.h"
struct dvb_ofdm_parameters {
   fe_bandwidth_t bandwidth ;
   fe_code_rate_t code_rate_HP ;
   fe_code_rate_t code_rate_LP ;
   fe_modulation_t constellation ;
   fe_transmit_mode_t transmission_mode ;
   fe_guard_interval_t guard_interval ;
   fe_hierarchy_t hierarchy_information ;
};
#line 266 "/usr/include/linux/dvb/frontend.h"
union __anonunion_u_34 {
   struct dvb_qpsk_parameters qpsk ;
   struct dvb_qam_parameters qam ;
   struct dvb_ofdm_parameters ofdm ;
   struct dvb_vsb_parameters vsb ;
};
#line 266 "/usr/include/linux/dvb/frontend.h"
struct dvb_frontend_parameters {
   __u32 frequency ;
   fe_spectral_inversion_t inversion ;
   union __anonunion_u_34 u ;
};
#line 51 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
struct diseqc_cmd {
   struct dvb_diseqc_master_cmd cmd ;
   uint32_t wait ;
};
#line 55 "/usr/include/stdint.h"
typedef unsigned long uint64_t;
#line 33 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.h"
struct ringbuffy {
   int read_pos ;
   int write_pos ;
   int size ;
   char *buffy ;
};
#line 33 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.h"
typedef struct ringbuffy ringbuffy;
#line 62 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef uint8_t u8;
#line 65 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef uint64_t u64;
#line 137 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct pes_packet_ {
   u8 stream_id ;
   u8 llength[2] ;
   uint32_t length ;
   u8 flags1 ;
   u8 flags2 ;
   u8 pes_hlength ;
   u8 pts[5] ;
   u8 dts[5] ;
   u8 escr[6] ;
   u8 es_rate[3] ;
   u8 trick ;
   u8 add_cpy ;
   u8 prev_pes_crc[2] ;
   u8 priv_flags ;
   u8 pes_priv_data[16] ;
   u8 pack_field_length ;
   u8 *pack_header ;
   u8 pck_sqnc_cntr ;
   u8 org_stuff_length ;
   u8 p_std[2] ;
   u8 pes_ext_lngth ;
   u8 *pes_ext ;
   u8 *pes_pckt_data ;
   int padding ;
   int mpeg ;
   int mpeg1_pad ;
   u8 *mpeg1_headr ;
   u8 stuffing ;
};
#line 137 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct pes_packet_ pes_packet;
#line 80 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
struct PTS_list_struct {
   u32 PTS ;
   int pos ;
   u32 dts ;
   int spos ;
};
#line 80 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
typedef struct PTS_list_struct PTS_List;
#line 88 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
struct frame_list_struct {
   int type ;
   int pos ;
   u32 FRAME ;
   u32 time ;
   u32 pts ;
   u32 dts ;
};
#line 88 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
typedef struct frame_list_struct FRAME_List;
#line 98 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
struct remux_struct {
   ringbuffy vid_buffy ;
   ringbuffy aud_buffy ;
   PTS_List vpts_list[8192] ;
   PTS_List apts_list[8192] ;
   FRAME_List vframe_list[8192] ;
   FRAME_List aframe_list[8192] ;
   int vptsn ;
   int aptsn ;
   int vframen ;
   int aframen ;
   long apes ;
   long vpes ;
   u32 vframe ;
   u32 aframe ;
   u32 vcframe ;
   u32 acframe ;
   u32 vpts ;
   u32 vdts ;
   u32 apts ;
   u32 vpts_old ;
   u32 apts_old ;
   u32 SCR ;
   u32 apts_off ;
   u32 vpts_off ;
   u32 apts_delay ;
   u32 vpts_delay ;
   u32 dts_delay ;
   AudioInfo audio_info ;
   VideoInfo video_info ;
   int fin ;
   int fout ;
   long awrite ;
   long vwrite ;
   long aread ;
   long vread ;
   u32 group ;
   u32 groupframe ;
   u32 muxr ;
   int pack_size ;
   u32 time_off ;
};
#line 98 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
typedef struct remux_struct Remux;
#line 119 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
struct p2pstruct {
   int found ;
   uint8_t buf[524280] ;
   uint8_t cid ;
   uint32_t plength ;
   uint8_t plen[2] ;
   uint8_t flag1 ;
   uint8_t flag2 ;
   uint8_t hlength ;
   uint8_t pts[5] ;
   int mpeg ;
   uint8_t check ;
   int fd1 ;
   int fd2 ;
   int es ;
   int filter ;
   int which ;
   int done ;
   int repack ;
   uint16_t bigend_repack ;
   void (*func)(uint8_t *buf , int count , struct p2pstruct *p ) ;
   int startv ;
   int starta ;
   int64_t apts ;
   int64_t vpts ;
   uint16_t pid ;
   uint16_t pida ;
   uint16_t pidv ;
   uint8_t acounter ;
   uint8_t vcounter ;
   uint8_t count0 ;
   uint8_t count1 ;
   void *data ;
};
#line 119 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
typedef struct p2pstruct p2p;
#line 1026 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
struct pes_buffer_s {
   ringbuffy pes_buffy ;
   uint8_t type ;
   PTS_List pts_list[8192] ;
   FRAME_List frame_list[8192] ;
   int pes_size ;
   uint64_t written ;
   uint64_t read ;
};
#line 1026 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
typedef struct pes_buffer_s PESBuffer;
#line 1052 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
struct remux_s {
   PESBuffer pbuf_list[4] ;
   int num_pbuf ;
};
#line 1052 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
typedef struct remux_s REMUX;
#line 251 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct ps_packet_ {
   u8 scr[6] ;
   u8 mux_rate[3] ;
   u8 stuff_length ;
   u8 *data ;
   u8 sheader_llength[2] ;
   int sheader_length ;
   u8 rate_bound[3] ;
   u8 audio_bound ;
   u8 video_bound ;
   u8 reserved ;
   int npes ;
   int mpeg ;
};
#line 251 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct ps_packet_ ps_packet;
#line 124 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __dev_t;
#line 125 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __uid_t;
#line 126 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __gid_t;
#line 127 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __ino_t;
#line 129 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __mode_t;
#line 130 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __nlink_t;
#line 153 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __blksize_t;
#line 158 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __blkcnt_t;
#line 175 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __syscall_slong_t;
#line 120 "/usr/include/time.h"
struct timespec {
   __time_t tv_sec ;
   __syscall_slong_t tv_nsec ;
};
#line 46 "/usr/include/x86_64-linux-gnu/bits/stat.h"
struct stat {
   __dev_t st_dev ;
   __ino_t st_ino ;
   __nlink_t st_nlink ;
   __mode_t st_mode ;
   __uid_t st_uid ;
   __gid_t st_gid ;
   int __pad0 ;
   __dev_t st_rdev ;
   __off_t st_size ;
   __blksize_t st_blksize ;
   __blkcnt_t st_blocks ;
   struct timespec st_atim ;
   struct timespec st_mtim ;
   struct timespec st_ctim ;
   __syscall_slong_t __glibc_reserved[3] ;
};
#line 63 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef uint16_t u16;
#line 208 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct ts_packet_ {
   u8 pid[2] ;
   u8 flags ;
   u8 count ;
   u8 data[184] ;
   u8 adapt_length ;
   u8 adapt_flags ;
   u8 pcr[6] ;
   u8 opcr[6] ;
   u8 splice_count ;
   u8 priv_dat_len ;
   u8 *priv_dat ;
   u8 adapt_ext_len ;
   u8 adapt_eflags ;
   u8 ltw[2] ;
   u8 piece_rate[3] ;
   u8 dts[5] ;
   int rest ;
   u8 stuffing ;
};
#line 208 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct ts_packet_ ts_packet;
#line 282 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct sectionstruct {
   int id ;
   int length ;
   int found ;
   u8 payload[4099] ;
};
#line 282 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct sectionstruct section;
#line 290 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef u32 tflags;
#line 293 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct trans_struct {
   int found ;
   u8 packet[188] ;
   u16 pid[32] ;
   u8 mask[512] ;
   u8 filt[512] ;
   u8 transbuf[6016] ;
   int transcount[32] ;
   section sec[32] ;
   tflags is_full ;
   tflags pes_start ;
   tflags pes_started ;
   tflags pes ;
   tflags set ;
};
#line 293 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct trans_struct trans;
#line 361 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
struct p2t_s {
   u8 pes[188] ;
   u8 counter ;
   long pos ;
   int frags ;
   void (*t_out)(u8 const   *buf ) ;
};
#line 361 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
typedef struct p2t_s p2t_t;
#line 104 "/usr/include/getopt.h"
struct option {
   char const   *name ;
   int has_arg ;
   int *flag ;
   int val ;
};
/* compiler builtin: 
   void *__builtin_alloca(unsigned long  ) ;  */
#line 374 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) rand)(void) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 50
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memmove)(void *__dest ,
                                                                                                  void const   *__src ,
                                                                                                  size_t __n ) ;
#line 113 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) socket)(int __domain ,
                                                                             int __type ,
                                                                             int __protocol ) ;
#line 123
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) bind)(int __fd ,
                                                                           struct sockaddr  const  *__addr ,
                                                                           socklen_t __len ) ;
#line 156
extern ssize_t recv(int __fd , void *__buf , size_t __n , int __flags ) ;
#line 163
extern ssize_t sendto(int __fd , void const   *__buf , size_t __n , int __flags ,
                      struct sockaddr  const  *__addr , socklen_t __addr_len ) ;
#line 226
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) setsockopt)(int __fd ,
                                                                                 int __level ,
                                                                                 int __optname ,
                                                                                 void const   *__optval ,
                                                                                 socklen_t __optlen ) ;
#line 374 "/usr/include/netinet/in.h"
extern  __attribute__((__nothrow__)) uint32_t ( __attribute__((__leaf__)) ntohl)(uint32_t __netlong )  __attribute__((__const__)) ;
#line 377
extern  __attribute__((__nothrow__)) uint32_t ( __attribute__((__leaf__)) htonl)(uint32_t __hostlong )  __attribute__((__const__)) ;
#line 379
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) htons)(uint16_t __hostshort )  __attribute__((__const__)) ;
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 846
extern void perror(char const   *__s ) ;
#line 34 "/usr/include/arpa/inet.h"
extern  __attribute__((__nothrow__)) in_addr_t ( __attribute__((__leaf__)) inet_addr)(char const   *__cp ) ;
#line 27 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.h"
void initrtp(struct rtpheader *foo , int pt , int type ) ;
#line 28
int sendrtp(int fd___0 , struct sockaddr_in *sSockAddr , struct rtpheader *foo , char *data ,
            int len ) ;
#line 29
int getrtp2(int fd___0 , struct rtpheader *rh , char **data , int *lengthData ) ;
#line 30
int sendrtp2(int fd___0 , struct sockaddr_in *sSockAddr , struct rtpheader *foo ,
             char *data , int len ) ;
#line 31
int getrtp(int fd___0 , struct rtpheader *rh , char **data , int *lengthData ) ;
#line 32
int makesocket(char *szAddr , unsigned short port , int TTL , struct sockaddr_in *sSockAddr ) ;
#line 33
int makeclientsocket(char *szAddr , unsigned short port , int TTL , struct sockaddr_in *sSockAddr ) ;
#line 56 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
void initrtp(struct rtpheader *foo , int pt , int type ) 
{ 
  int tmp ;

  {
  {
#line 58
  foo->b.v = 2U;
#line 59
  foo->b.p = 0U;
#line 60
  foo->b.x = 0U;
#line 61
  foo->b.cc = 0U;
#line 62
  foo->b.m = 0U;
#line 63
  foo->b.pt = (unsigned int )pt;
#line 64
  tmp = rand();
#line 64
  foo->b.sequence = (unsigned int )(tmp & 65535);
#line 65
  foo->timestamp = rand();
#line 66
  foo->ssrc = rand();
#line 67
  foo->type = type;
  }
#line 68
  return;
}
}
#line 71 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int sendrtp(int fd___0 , struct sockaddr_in *sSockAddr , struct rtpheader *foo , char *data ,
            int len ) 
{ 
  char *buf___5 ;
  void *tmp ;
  int *cast ;
  int *outcast ;
  uint32_t tmp___0 ;
  uint32_t tmp___1 ;
  ssize_t tmp___2 ;

  {
  {
#line 72
  tmp = __builtin_alloca((unsigned long )len + sizeof(struct rtpheader ));
#line 72
  buf___5 = (char *)tmp;
#line 73
  cast = (int *)foo;
#line 74
  outcast = (int *)buf___5;
#line 75
  tmp___0 = htonl((uint32_t )*(cast + 0));
#line 75
  *(outcast + 0) = (int )tmp___0;
#line 76
  tmp___1 = htonl((uint32_t )*(cast + 1));
#line 76
  *(outcast + 1) = (int )tmp___1;
#line 77
  memmove((void *)(outcast + 2), (void const   *)data, (size_t )len);
#line 78
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"v=%x %x\n",
          foo->b.v, (int )*(buf___5 + 0));
#line 79
  tmp___2 = sendto(fd___0, (void const   *)buf___5, (size_t )(len + 3), 0, (struct sockaddr  const  *)((struct sockaddr *)sSockAddr),
                   (socklen_t )sizeof(*sSockAddr));
  }
#line 79
  return ((int )tmp___2);
}
}
#line 83 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf[1600]  ;
#line 82 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int getrtp2(int fd___0 , struct rtpheader *rh , char **data , int *lengthData ) 
{ 
  unsigned int intP ;
  char *charP ;
  int headerSize ;
  int lengthPacket ;
  ssize_t tmp ;
  uint32_t tmp___0 ;

  {
  {
#line 85
  charP = (char *)(& intP);
#line 88
  tmp = recv(fd___0, (void *)(buf), (size_t )1590, 0);
#line 88
  lengthPacket = (int )tmp;
  }
#line 89
  if (lengthPacket == 0) {
    {
#line 90
    exit(1);
    }
  }
#line 91
  if (lengthPacket < 0) {
    {
#line 92
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"socket read error\n");
#line 93
    exit(2);
    }
  }
#line 95
  if (lengthPacket < 12) {
    {
#line 96
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"packet too small (%d) to be an rtp frame (>12bytes)\n",
            lengthPacket);
#line 97
    exit(3);
    }
  }
  {
#line 99
  rh->b.v = (unsigned int )(((int )buf[0] >> 6) & 3);
#line 100
  rh->b.p = (unsigned int )(((int )buf[0] >> 5) & 1);
#line 101
  rh->b.x = (unsigned int )(((int )buf[0] >> 4) & 1);
#line 102
  rh->b.cc = (unsigned int )((int )buf[0] & 15);
#line 103
  rh->b.m = (unsigned int )(((int )buf[1] >> 7) & 1);
#line 104
  rh->b.pt = (unsigned int )((int )buf[1] & 127);
#line 105
  intP = 0U;
#line 106
  memcpy((void */* __restrict  */)(charP + 2), (void const   */* __restrict  */)(& buf[2]),
         (size_t )2);
#line 107
  rh->b.sequence = ntohl(intP);
#line 108
  intP = 0U;
#line 109
  memcpy((void */* __restrict  */)charP, (void const   */* __restrict  */)(& buf[4]),
         (size_t )4);
#line 110
  tmp___0 = ntohl(intP);
#line 110
  rh->timestamp = (int )tmp___0;
#line 112
  headerSize = (int )(12U + 4U * rh->b.cc);
#line 114
  *lengthData = lengthPacket - headerSize;
#line 115
  *data = buf + headerSize;
  }
#line 119
  return (0);
}
}
#line 124 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int sendrtp2(int fd___0 , struct sockaddr_in *sSockAddr , struct rtpheader *foo ,
             char *data , int len ) 
{ 
  char *buf___5 ;
  unsigned int intP ;
  char *charP ;
  int headerSize ;
  void *tmp ;
  ssize_t tmp___0 ;

  {
#line 127
  charP = (char *)(& intP);
#line 129
  if (foo->type == 0) {
    {
#line 130
    tmp = __builtin_alloca((unsigned long )(len + 72));
#line 130
    buf___5 = (char *)tmp;
#line 131
    *(buf___5 + 0) = (char)0;
#line 132
    *(buf___5 + 0) = (char )((int )*(buf___5 + 0) | (((int )((char )foo->b.v) << 6) & 192));
#line 133
    *(buf___5 + 0) = (char )((int )*(buf___5 + 0) | (((int )((char )foo->b.p) << 5) & 32));
#line 134
    *(buf___5 + 0) = (char )((int )*(buf___5 + 0) | (((int )((char )foo->b.x) << 4) & 16));
#line 135
    *(buf___5 + 0) = (char )((int )*(buf___5 + 0) | ((int )((char )foo->b.cc) & 15));
#line 136
    *(buf___5 + 1) = (char)0;
#line 137
    *(buf___5 + 1) = (char )((int )*(buf___5 + 1) | (((int )((char )foo->b.m) << 7) & 128));
#line 138
    *(buf___5 + 1) = (char )((int )*(buf___5 + 1) | ((int )((char )foo->b.pt) & 127));
#line 139
    intP = htonl(foo->b.sequence);
#line 140
    memcpy((void */* __restrict  */)(buf___5 + 2), (void const   */* __restrict  */)(charP + 2),
           (size_t )2);
#line 141
    intP = htonl((uint32_t )foo->timestamp);
#line 142
    memcpy((void */* __restrict  */)(buf___5 + 4), (void const   */* __restrict  */)(& intP),
           (size_t )4);
#line 144
    *(buf___5 + 8) = (char)15;
#line 145
    *(buf___5 + 9) = (char)15;
#line 146
    *(buf___5 + 10) = (char)15;
#line 147
    *(buf___5 + 11) = (char)15;
#line 148
    headerSize = (int )(12U + 4U * foo->b.cc);
#line 149
    memcpy((void */* __restrict  */)(buf___5 + headerSize), (void const   */* __restrict  */)data,
           (size_t )len);
#line 153
    (foo->b.sequence) ++;
    }
  } else {
#line 155
    buf___5 = data;
#line 156
    headerSize = 0;
  }
  {
#line 158
  tmp___0 = sendto(fd___0, (void const   *)buf___5, (size_t )(len + headerSize), 0,
                   (struct sockaddr  const  *)((struct sockaddr *)sSockAddr), (socklen_t )sizeof(*sSockAddr));
  }
#line 158
  return ((int )tmp___0);
}
}
#line 163 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf___0[1600]  ;
#line 162 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int getrtp(int fd___0 , struct rtpheader *rh , char **data , int *lengthData ) 
{ 
  int headerSize ;
  int lengthPacket ;
  ssize_t tmp ;

  {
  {
#line 167
  tmp = recv(fd___0, (void *)(buf___0), (size_t )1590, 0);
#line 167
  lengthPacket = (int )tmp;
#line 168
  headerSize = 3;
#line 169
  *lengthData = lengthPacket - headerSize;
#line 170
  *data = buf___0 + headerSize;
#line 171
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[%d] %02x %x\n",
          lengthPacket, (int )buf___0[8], (int )buf___0[0]);
  }
#line 172
  return (0);
}
}
#line 176 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int makesocket(char *szAddr , unsigned short port , int TTL , struct sockaddr_in *sSockAddr ) 
{ 
  int iRet ;
  int iLoop ;
  struct sockaddr_in sin ;
  char cTtl ;
  char cLoop ;
  int iSocket ;
  int tmp ;

  {
  {
#line 177
  iLoop = 1;
#line 179
  cTtl = (char )TTL;
#line 180
  cLoop = (char)0;
#line 182
  tmp = socket(2, 2, 0);
#line 182
  iSocket = tmp;
  }
#line 184
  if (iSocket < 0) {
    {
#line 185
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"socket() failed.\n");
#line 186
    exit(1);
    }
  }
  {
#line 189
  sin.sin_family = (sa_family_t )2;
#line 189
  sSockAddr->sin_family = sin.sin_family;
#line 190
  sin.sin_port = htons(port);
#line 190
  sSockAddr->sin_port = sin.sin_port;
#line 191
  sSockAddr->sin_addr.s_addr = inet_addr((char const   *)szAddr);
#line 193
  iRet = setsockopt(iSocket, 1, 2, (void const   *)(& iLoop), (socklen_t )sizeof(int ));
  }
#line 194
  if (iRet < 0) {
    {
#line 195
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"setsockopt SO_REUSEADDR failed\n");
#line 196
    exit(1);
    }
  }
  {
#line 199
  iRet = setsockopt(iSocket, 0, 33, (void const   *)(& cTtl), (socklen_t )sizeof(char ));
  }
#line 200
  if (iRet < 0) {
    {
#line 201
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"setsockopt IP_MULTICAST_TTL failed.  multicast in kernel?\n");
#line 202
    exit(1);
    }
  }
  {
#line 205
  cLoop = (char)1;
#line 206
  iRet = setsockopt(iSocket, 0, 34, (void const   *)(& cLoop), (socklen_t )sizeof(char ));
  }
#line 208
  if (iRet < 0) {
    {
#line 209
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"setsockopt IP_MULTICAST_LOOP failed.  multicast in kernel?\n");
#line 210
    exit(1);
    }
  }
#line 213
  return (iSocket);
}
}
#line 217 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
int makeclientsocket(char *szAddr , unsigned short port , int TTL , struct sockaddr_in *sSockAddr ) 
{ 
  int socket___0 ;
  int tmp ;
  struct ip_mreq blub ;
  struct sockaddr_in sin ;
  unsigned int tempaddr ;
  int tmp___0 ;
  int tmp___1 ;
  uint32_t tmp___2 ;

  {
  {
#line 218
  tmp = makesocket(szAddr, port, TTL, sSockAddr);
#line 218
  socket___0 = tmp;
#line 222
  sin.sin_family = (sa_family_t )2;
#line 223
  sin.sin_port = htons(port);
#line 224
  sin.sin_addr.s_addr = inet_addr((char const   *)szAddr);
#line 225
  tmp___0 = bind(socket___0, (struct sockaddr  const  *)((struct sockaddr *)(& sin)),
                 (socklen_t )sizeof(sin));
  }
#line 225
  if (tmp___0) {
    {
#line 226
    perror("bind failed");
#line 227
    exit(1);
    }
  }
  {
#line 229
  tempaddr = inet_addr((char const   *)szAddr);
#line 230
  tmp___2 = ntohl(tempaddr);
  }
#line 230
  if (tmp___2 >> 28 == 14U) {
    {
#line 231
    blub.imr_multiaddr.s_addr = inet_addr((char const   *)szAddr);
#line 232
    blub.imr_interface.s_addr = (in_addr_t )0;
#line 233
    tmp___1 = setsockopt(socket___0, 0, 35, (void const   *)(& blub), (socklen_t )sizeof(blub));
    }
#line 233
    if (tmp___1) {
      {
#line 234
      perror("setsockopt IP_ADD_MEMBERSHIP failed (multicast kernel?)");
#line 235
      exit(1);
      }
    }
  }
#line 238
  return (socket___0);
}
}
#line 168 "/usr/include/stdio.h"
extern struct _IO_FILE *stdin ;
#line 169
extern struct _IO_FILE *stdout ;
#line 283
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes )  __asm__("fopen64")  ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 858
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) fileno)(FILE *__stream ) ;
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 466
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 480
extern  __attribute__((__nothrow__)) void *( __attribute__((__warn_unused_result__,
__leaf__)) realloc)(void *__ptr , size_t __size ) ;
#line 79 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) unsigned short const   **( __attribute__((__leaf__)) __ctype_b_loc)(void)  __attribute__((__const__)) ;
#line 124
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tolower)(int __c ) ;
#line 127
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) toupper)(int __c ) ;
#line 41 "/usr/include/x86_64-linux-gnu/sys/ioctl.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) ioctl)(int __fd ,
                                                                            unsigned long __request 
                                                                            , ...) ;
#line 71 "/usr/include/x86_64-linux-gnu/sys/time.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) gettimeofday)(struct timeval * __restrict  __tv ,
                                                                                                   __timezone_ptr_t __tz ) ;
#line 57 "/usr/include/x86_64-linux-gnu/sys/poll.h"
extern int poll(struct pollfd *__fds , nfds_t __nfds , int __timeout ) ;
#line 243 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern int accept(int __fd , struct sockaddr * __restrict  __addr , socklen_t * __restrict  __addr_len ) ;
#line 102 "/usr/include/signal.h"
extern  __attribute__((__nothrow__)) __sighandler_t ( __attribute__((__leaf__)) signal)(int __sig ,
                                                                                        void (*__handler)(int  ) ) ;
#line 137 "/usr/include/fcntl.h"
extern int fcntl(int __fd , int __cmd  , ...) ;
#line 149
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...)  __asm__("open64")  ;
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 360
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
#line 366
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 432
extern  __attribute__((__nothrow__)) unsigned int ( __attribute__((__leaf__)) alarm)(unsigned int __seconds ) ;
#line 66 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 129
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 132
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strncpy)(char * __restrict  __dest ,
                                                                                                  char const   * __restrict  __src ,
                                                                                                  size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 236
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strchr)(char const   *__s ,
                                                                                               int __c )  __attribute__((__pure__)) ;
#line 342
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strstr)(char const   *__haystack ,
                                                                                                 char const   *__needle )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 534
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcasecmp)(char const   *__s1 ,
                                                                                                   char const   *__s2 )  __attribute__((__pure__)) ;
#line 538
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncasecmp)(char const   *__s1 ,
                                                                                                    char const   *__s2 ,
                                                                                                    size_t __n )  __attribute__((__pure__)) ;
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 158 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
uint16_t get_pid(uint8_t *pid___0 ) ;
#line 211
void instant_repack(uint8_t *buf___5 , int count , ipack *p ) ;
#line 212
void init_ipack(ipack *p , int size , void (*func)(uint8_t *buf , int size , void *priv ) ,
                int ps ) ;
#line 216
void send_ipack(ipack *p ) ;
#line 217
void reset_ipack(ipack *p ) ;
#line 32 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvb_defaults.h"
unsigned int SLOF ;
#line 33
unsigned int LOF1 ;
#line 34
unsigned int LOF2 ;
#line 17 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.h"
int tune_it(int fd_frontend___0 , unsigned int freq___0 , unsigned int srate , char pol___0 ,
            int tone___0 , fe_spectral_inversion_t specInv___0 , unsigned char diseqc___0 ,
            fe_modulation_t modulation___0 , fe_code_rate_t HP_CodeRate___0 , fe_transmit_mode_t TransmissionMode___0 ,
            fe_guard_interval_t guardInterval___0 , fe_bandwidth_t bandwidth , fe_code_rate_t LP_CodeRate___0 ,
            fe_hierarchy_t hier___0 ) ;
#line 77 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned int SLOF  =    11700000U;
#line 78 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned int LOF1  =    9750000U;
#line 79 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned int LOF2  =    10600000U;
#line 81 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char *frontenddev[4]  = {      (char *)"/dev/dvb/adapter0/frontend0",      (char *)"/dev/dvb/adapter1/frontend0",      (char *)"/dev/dvb/adapter2/frontend0",      (char *)"/dev/dvb/adapter3/frontend0"};
#line 82 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char *dvrdev[4]  = {      (char *)"/dev/dvb/adapter0/dvr0",      (char *)"/dev/dvb/adapter1/dvr0",      (char *)"/dev/dvb/adapter2/dvr0",      (char *)"/dev/dvb/adapter3/dvr0"};
#line 83 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char *demuxdev[4]  = {      (char *)"/dev/dvb/adapter0/demux0",      (char *)"/dev/dvb/adapter1/demux0",      (char *)"/dev/dvb/adapter2/demux0",      (char *)"/dev/dvb/adapter3/demux0"};
#line 85 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int card  =    0;
#line 86 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
long now  ;
#line 87 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
long real_start_time  ;
#line 88 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int Interrupted  =    0;
#line 89 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_spectral_inversion_t specInv  =    (fe_spectral_inversion_t )2;
#line 90 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int tone  =    -1;
#line 91 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_modulation_t modulation  =    (fe_modulation_t )3;
#line 92 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_transmit_mode_t TransmissionMode  =    (fe_transmit_mode_t )0;
#line 93 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_bandwidth_t bandWidth  =    (fe_bandwidth_t )0;
#line 94 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_guard_interval_t guardInterval  =    (fe_guard_interval_t )0;
#line 95 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_code_rate_t HP_CodeRate  =    (fe_code_rate_t )2;
#line 95 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_code_rate_t LP_CodeRate  =    (fe_code_rate_t )0;
#line 96 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
fe_hierarchy_t hier  =    (fe_hierarchy_t )0;
#line 97 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned char diseqc  =    (unsigned char)0;
#line 98 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char pol  =    (char)0;
#line 99 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int streamtype  =    0;
#line 100 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int use_stdin  =    0;
#line 104 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int selection_mode  =    0;
#line 107 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int open_fe(int *fd_frontend___0 ) 
{ 
  int tmp ;

  {
  {
#line 108
  tmp = open((char const   *)frontenddev[card], 2050);
#line 108
  *fd_frontend___0 = tmp;
  }
#line 108
  if (tmp < 0) {
    {
#line 109
    perror("FRONTEND DEVICE: ");
    }
#line 110
    return (-1);
  }
#line 112
  return (1);
}
}
#line 115 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static void SignalHandler(int signum ) 
{ 
  struct timeval tv ;

  {
#line 118
  if (signum == 14) {
    {
#line 119
    gettimeofday((struct timeval */* __restrict  */)(& tv), (__timezone_ptr_t )((struct timezone *)((void *)0)));
#line 120
    now = tv.tv_sec - real_start_time;
#line 121
    alarm(5U);
    }
  } else
#line 122
  if (signum != 13) {
#line 123
    Interrupted = signum;
  }
  {
#line 125
  signal(signum, & SignalHandler);
  }
#line 126
  return;
}
}
#line 128 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
long getmsec(void) 
{ 
  struct timeval tv ;

  {
  {
#line 130
  gettimeofday((struct timeval */* __restrict  */)(& tv), (__timezone_ptr_t )((struct timezone *)((void *)0)));
  }
#line 131
  return ((tv.tv_sec % 1000000L) * 1000L + tv.tv_usec / 1000L);
}
}
#line 139 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
void set_ts_filt(int fd___0 , uint16_t pid___0 , dmx_pes_type_t pestype ) 
{ 
  struct dmx_pes_filter_params pesFilterParams ;
  int tmp ;

  {
  {
#line 144
  pesFilterParams.pid = pid___0;
#line 145
  pesFilterParams.input = (dmx_input_t )0;
#line 146
  pesFilterParams.output = (dmx_output_t )2;
#line 147
  pesFilterParams.pes_type = pestype;
#line 148
  pesFilterParams.flags = (__u32 )4;
#line 150
  tmp = ioctl(fd___0, (unsigned long )(((1U << 30) | (unsigned int )(111 << 8)) | 44U) | (sizeof(struct dmx_pes_filter_params ) << 16),
              & pesFilterParams);
  }
#line 150
  if (tmp < 0) {
    {
#line 151
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Failed setting filter for pid %i: ",
            (int )pid___0);
#line 152
    perror("DMX SET PES FILTER");
    }
  }
#line 154
  return;
}
}
#line 156 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
void make_nonblock(int f ) 
{ 
  int oldflags___0 ;
  int tmp ;

  {
  {
#line 159
  oldflags___0 = fcntl(f, 3, 0);
  }
#line 159
  if (oldflags___0 < 0) {
    {
#line 160
    perror("F_GETFL");
    }
  }
  {
#line 162
  oldflags___0 |= 2048;
#line 163
  tmp = fcntl(f, 4, oldflags___0);
  }
#line 163
  if (tmp < 0) {
    {
#line 164
    perror("F_SETFL");
    }
  }
#line 166
  return;
}
}
#line 171 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int socketIn  ;
#line 171 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int ns  ;
#line 172 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int pids[16]  ;
#line 173 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int pestypes[16]  ;
#line 174 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned char hi_mappids[8192]  ;
#line 175 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
unsigned char lo_mappids[8192]  ;
#line 176 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int fd_frontend  ;
#line 177 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int pid  ;
#line 177 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int pid2  ;
#line 178 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int connectionOpen  ;
#line 179 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int fromlen  ;
#line 180 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char hostname[64]  ;
#line 181 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
char in_ch  ;
#line 182 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct hostent *hp  ;
#line 183 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct sockaddr_in name  ;
#line 183 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct sockaddr_in fsin  ;
#line 184 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int ReUseAddr  =    1;
#line 185 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int oldflags  ;
#line 186 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int npids  =    0;
#line 187 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int fd[16]  ;
#line 188 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int to_stdout  =    0;
#line 191 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct rtpheader hdr  ;
#line 192 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct sockaddr_in sOut  ;
#line 193 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int socketOut  ;
#line 195 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
ipack pa  ;
#line 195 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
ipack pv  ;
#line 201 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int process_telnet(void) 
{ 
  char cmd[1024] ;
  int cmd_i ;
  int i ;
  char *ch ;
  dmx_pes_type_t pestype ;
  unsigned long freq___0 ;
  unsigned long srate ;
  size_t tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;
  ssize_t tmp___3 ;
  size_t tmp___4 ;
  size_t tmp___5 ;
  int tmp___6 ;
  size_t tmp___7 ;
  char *tmp___8 ;
  int tmp___9 ;
  size_t tmp___10 ;
  size_t tmp___11 ;
  size_t tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;
  size_t tmp___21 ;

  {
#line 203
  cmd_i = 0;
#line 207
  freq___0 = 0UL;
#line 208
  srate = 0UL;
#line 211
  if (ns == -1) {
    {
#line 212
    ns = accept(socketIn, (struct sockaddr */* __restrict  */)((struct sockaddr *)(& fsin)),
                (socklen_t */* __restrict  */)(& fromlen));
    }
#line 212
    if (ns > 0) {
      {
#line 213
      make_nonblock(ns);
#line 214
      cmd_i = 0;
#line 215
      cmd[0] = (char)0;
#line 216
      printf((char const   */* __restrict  */)"Opened connection\n");
#line 217
      tmp = strlen("220-DVBSTREAM - ");
#line 217
      write(ns, (void const   *)"220-DVBSTREAM - ", tmp);
#line 218
      tmp___0 = strlen((char const   *)(hostname));
#line 218
      write(ns, (void const   *)(hostname), tmp___0);
#line 219
      tmp___1 = strlen("\r\nDONE\r\n");
#line 219
      write(ns, (void const   *)"\r\nDONE\r\n", tmp___1);
#line 220
      connectionOpen = 1;
      }
    }
  }
#line 225
  if (connectionOpen) {
    {
#line 227
    while (1) {
      while_continue: /* CIL Label */ ;
      {
#line 227
      tmp___3 = read(ns, (void *)(& in_ch), (size_t )1);
      }
#line 227
      if (! (tmp___3 > 0L)) {
#line 227
        goto while_break;
      }
#line 228
      if ((int )in_ch < 32) {
#line 228
        goto while_break;
      }
#line 230
      if (cmd_i < 1023) {
#line 231
        tmp___2 = cmd_i;
#line 231
        cmd_i ++;
#line 231
        cmd[tmp___2] = in_ch;
#line 232
        cmd[cmd_i] = (char)0;
      }
    }
    while_break: /* CIL Label */ ;
    }
#line 235
    if ((int )in_ch > 0) {
#line 236
      if (cmd_i > 0) {
        {
#line 237
        printf((char const   */* __restrict  */)"CMD: \"%s\"\n", cmd);
#line 238
        tmp___20 = strcasecmp((char const   *)(cmd), "QUIT");
        }
#line 238
        if (tmp___20 == 0) {
          {
#line 239
          tmp___4 = strlen("DONE\r\n");
#line 239
          write(ns, (void const   *)"DONE\r\n", tmp___4);
#line 240
          close(ns);
#line 241
          ns = -1;
#line 242
          connectionOpen = 0;
#line 243
          printf((char const   */* __restrict  */)"Closed connection\n");
          }
        } else {
          {
#line 244
          tmp___19 = strcasecmp((char const   *)(cmd), "STOP");
          }
#line 244
          if (tmp___19 == 0) {
            {
#line 245
            tmp___5 = strlen("STOP\n");
#line 245
            write(ns, (void const   *)"STOP\n", tmp___5);
#line 246
            i = 0;
            }
            {
#line 246
            while (1) {
              while_continue___0: /* CIL Label */ ;
#line 246
              if (! (i < npids)) {
#line 246
                goto while_break___0;
              }
              {
#line 247
              tmp___6 = ioctl(fd[i], (unsigned long )((unsigned int )(111 << 8) | 42U));
              }
#line 247
              if (tmp___6 < 0) {
                {
#line 248
                perror("DMX_STOP");
                }
              }
#line 246
              i ++;
            }
            while_break___0: /* CIL Label */ ;
            }
#line 251
            i = 0;
            {
#line 251
            while (1) {
              while_continue___1: /* CIL Label */ ;
#line 251
              if (! (i < 8192)) {
#line 251
                goto while_break___1;
              }
#line 252
              hi_mappids[i] = (unsigned char )(i >> 8);
#line 253
              lo_mappids[i] = (unsigned char )(i & 255);
#line 251
              i ++;
            }
            while_break___1: /* CIL Label */ ;
            }
            {
#line 255
            tmp___7 = strlen("DONE\r\n");
#line 255
            write(ns, (void const   *)"DONE\r\n", tmp___7);
            }
          } else {
            {
#line 256
            tmp___18 = strncasecmp((char const   *)(cmd), "ADD", (size_t )3);
            }
#line 256
            if (tmp___18 == 0) {
#line 257
              i = 4;
#line 258
              if ((int )cmd[3] == 86) {
#line 258
                pestype = (dmx_pes_type_t )1;
              } else
#line 258
              if ((int )cmd[3] == 118) {
#line 258
                pestype = (dmx_pes_type_t )1;
              } else
#line 259
              if ((int )cmd[3] == 65) {
#line 259
                pestype = (dmx_pes_type_t )0;
              } else
#line 259
              if ((int )cmd[3] == 97) {
#line 259
                pestype = (dmx_pes_type_t )0;
              } else
#line 260
              if ((int )cmd[3] == 84) {
#line 260
                pestype = (dmx_pes_type_t )2;
              } else
#line 260
              if ((int )cmd[3] == 116) {
#line 260
                pestype = (dmx_pes_type_t )2;
              } else {
#line 261
                pestype = (dmx_pes_type_t )20;
#line 261
                i = 3;
              }
              {
#line 262
              while (1) {
                while_continue___2: /* CIL Label */ ;
#line 262
                if (! ((int )cmd[i] == 32)) {
#line 262
                  goto while_break___2;
                }
#line 262
                i ++;
              }
              while_break___2: /* CIL Label */ ;
              }
              {
#line 263
              tmp___8 = strstr((char const   *)(& cmd[i]), ":");
#line 263
              ch = tmp___8;
              }
#line 263
              if ((unsigned long )ch != (unsigned long )((void *)0)) {
                {
#line 264
                pid2 = atoi((char const   *)(ch + 1));
#line 265
                *(ch + 0) = (char)0;
                }
              } else {
#line 267
                pid2 = -1;
              }
              {
#line 269
              pid = atoi((char const   *)(& cmd[i]));
              }
#line 270
              if (pid) {
#line 271
                if (npids == 16) {
                  {
#line 272
                  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\nsorry, you can only set up to 8 filters.\n\n");
                  }
#line 273
                  return (-1);
                } else {
#line 275
                  pestypes[npids] = (int )pestype;
#line 276
                  pestype = (dmx_pes_type_t )20;
#line 277
                  pids[npids] = pid;
#line 278
                  if (pid2 != -1) {
                    {
#line 279
                    hi_mappids[pid] = (unsigned char )(pid2 >> 8);
#line 280
                    lo_mappids[pid] = (unsigned char )(pid2 & 255);
#line 281
                    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Mapping %d to %d\n",
                            pid, pid2);
                    }
                  }
                  {
#line 284
                  tmp___9 = open((char const   *)demuxdev[card], 2050);
#line 284
                  fd[npids] = tmp___9;
                  }
#line 284
                  if (tmp___9 < 0) {
                    {
#line 285
                    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"FD %i: ",
                            i);
#line 286
                    perror("DEMUX DEVICE: ");
                    }
                  } else {
                    {
#line 288
                    set_ts_filt(fd[npids], (uint16_t )pids[npids], (dmx_pes_type_t )pestypes[npids]);
#line 289
                    npids ++;
                    }
                  }
                }
              }
              {
#line 293
              tmp___10 = strlen("DONE\r\n");
#line 293
              write(ns, (void const   *)"DONE\r\n", tmp___10);
              }
            } else {
              {
#line 294
              tmp___17 = strcasecmp((char const   *)(cmd), "START");
              }
#line 294
              if (tmp___17 == 0) {
                {
#line 295
                tmp___11 = strlen("START\n");
#line 295
                write(ns, (void const   *)"START\n", tmp___11);
#line 296
                i = 0;
                }
                {
#line 296
                while (1) {
                  while_continue___3: /* CIL Label */ ;
#line 296
                  if (! (i < npids)) {
#line 296
                    goto while_break___3;
                  }
                  {
#line 297
                  set_ts_filt(fd[i], (uint16_t )pids[i], (dmx_pes_type_t )pestypes[i]);
#line 296
                  i ++;
                  }
                }
                while_break___3: /* CIL Label */ ;
                }
                {
#line 299
                tmp___12 = strlen("DONE\r\n");
#line 299
                write(ns, (void const   *)"DONE\r\n", tmp___12);
                }
              } else {
                {
#line 300
                tmp___16 = strncasecmp((char const   *)(cmd), "TUNE", (size_t )4);
                }
#line 300
                if (tmp___16 == 0) {
#line 301
                  i = 0;
                  {
#line 301
                  while (1) {
                    while_continue___4: /* CIL Label */ ;
#line 301
                    if (! (i < 8192)) {
#line 301
                      goto while_break___4;
                    }
#line 302
                    hi_mappids[i] = (unsigned char )(i >> 8);
#line 303
                    lo_mappids[i] = (unsigned char )(i & 255);
#line 301
                    i ++;
                  }
                  while_break___4: /* CIL Label */ ;
                  }
#line 305
                  i = 0;
                  {
#line 305
                  while (1) {
                    while_continue___5: /* CIL Label */ ;
#line 305
                    if (! (i < npids)) {
#line 305
                      goto while_break___5;
                    }
                    {
#line 306
                    tmp___13 = ioctl(fd[i], (unsigned long )((unsigned int )(111 << 8) | 42U));
                    }
#line 306
                    if (tmp___13 < 0) {
                      {
#line 307
                      perror("DMX_STOP");
#line 308
                      close(fd[i]);
                      }
                    }
#line 305
                    i ++;
                  }
                  while_break___5: /* CIL Label */ ;
                  }
#line 311
                  npids = 0;
#line 312
                  i = 4;
                  {
#line 313
                  while (1) {
                    while_continue___6: /* CIL Label */ ;
#line 313
                    if (! ((int )cmd[i] == 32)) {
#line 313
                      goto while_break___6;
                    }
#line 313
                    i ++;
                  }
                  while_break___6: /* CIL Label */ ;
                  }
                  {
#line 314
                  tmp___14 = atoi((char const   *)(& cmd[i]));
#line 314
                  freq___0 = (unsigned long )tmp___14;
                  }
                  {
#line 315
                  while (1) {
                    while_continue___7: /* CIL Label */ ;
#line 315
                    if ((int )cmd[i] != 32) {
#line 315
                      if (! ((int )cmd[i] != 0)) {
#line 315
                        goto while_break___7;
                      }
                    } else {
#line 315
                      goto while_break___7;
                    }
#line 315
                    i ++;
                  }
                  while_break___7: /* CIL Label */ ;
                  }
#line 316
                  if ((int )cmd[i] != 0) {
                    {
#line 317
                    while (1) {
                      while_continue___8: /* CIL Label */ ;
#line 317
                      if (! ((int )cmd[i] == 32)) {
#line 317
                        goto while_break___8;
                      }
#line 317
                      i ++;
                    }
                    while_break___8: /* CIL Label */ ;
                    }
#line 318
                    pol = cmd[i];
                    {
#line 319
                    while (1) {
                      while_continue___9: /* CIL Label */ ;
#line 319
                      if ((int )cmd[i] != 32) {
#line 319
                        if (! ((int )cmd[i] != 0)) {
#line 319
                          goto while_break___9;
                        }
                      } else {
#line 319
                        goto while_break___9;
                      }
#line 319
                      i ++;
                    }
                    while_break___9: /* CIL Label */ ;
                    }
#line 320
                    if ((int )cmd[i] != 0) {
                      {
#line 321
                      while (1) {
                        while_continue___10: /* CIL Label */ ;
#line 321
                        if (! ((int )cmd[i] == 32)) {
#line 321
                          goto while_break___10;
                        }
#line 321
                        i ++;
                      }
                      while_break___10: /* CIL Label */ ;
                      }
                      {
#line 322
                      tmp___15 = atoi((char const   *)(& cmd[i]));
#line 322
                      srate = (unsigned long )tmp___15 * 1000UL;
#line 323
                      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Tuning to %ld,%ld,%c\n",
                              freq___0, srate, (int )pol);
                      }
#line 324
                      if (! use_stdin) {
                        {
#line 325
                        tune_it(fd_frontend, (unsigned int )freq___0, (unsigned int )srate,
                                pol, tone, specInv, diseqc, modulation, HP_CodeRate,
                                TransmissionMode, guardInterval, bandWidth, LP_CodeRate,
                                hier);
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        {
#line 329
        cmd_i = 0;
#line 330
        cmd[0] = (char)0;
#line 331
        tmp___21 = strlen("DONE\r\n");
#line 331
        write(ns, (void const   *)"DONE\r\n", tmp___21);
        }
      }
    }
  }
#line 335
  return (0);
}
}
#line 343 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static uint8_t out_buffer[1000000]  ;
#line 344
void my_write_out(uint8_t *buf___5 , int count , void *p ) ;
#line 344 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int out_buffer_n  =    0;
#line 340 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
void my_write_out(uint8_t *buf___5 , int count , void *p ) 
{ 
  int i ;
  long tmp ;

  {
#line 347
  if (to_stdout) {
    {
#line 350
    write(1, (void const   *)buf___5, (size_t )count);
    }
  } else {
    {
#line 354
    memcpy((void */* __restrict  */)(& out_buffer[out_buffer_n]), (void const   */* __restrict  */)buf___5,
           (size_t )count);
#line 355
    out_buffer_n += count;
#line 359
    i = 0;
    }
    {
#line 360
    while (1) {
      while_continue: /* CIL Label */ ;
#line 360
      if (! (i + 1460 < out_buffer_n)) {
#line 360
        goto while_break;
      }
      {
#line 361
      tmp = getmsec();
#line 361
      hdr.timestamp = (int )(tmp * 90L);
#line 362
      sendrtp2(socketOut, & sOut, & hdr, (char *)(& out_buffer[i]), 1460);
#line 363
      i += 1460;
      }
    }
    while_break: /* CIL Label */ ;
    }
    {
#line 368
    memmove((void *)(& out_buffer[0]), (void const   *)(& out_buffer[i]), (size_t )(out_buffer_n - i));
#line 369
    out_buffer_n -= i;
    }
  }
#line 371
  return;
}
}
#line 373 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
void my_ts_to_ps(uint8_t *buf___5 , uint16_t pida , uint16_t pidv ) 
{ 
  uint16_t pid___0 ;
  ipack *p ;
  uint8_t off ;

  {
  {
#line 377
  off = (uint8_t )0;
#line 379
  pid___0 = get_pid(buf___5 + 1);
  }
#line 380
  if (! ((int )*(buf___5 + 3) & 16)) {
#line 381
    return;
  }
#line 382
  if ((int )pid___0 == (int )pidv) {
#line 383
    p = & pv;
  } else
#line 385
  if ((int )pid___0 == (int )pida) {
#line 386
    p = & pa;
  } else {
#line 387
    return;
  }
#line 390
  if ((int )*(buf___5 + 1) & 64) {
#line 391
    if (p->plength == 524274U) {
      {
#line 392
      p->plength = (uint32_t )(p->found - 6);
#line 393
      p->found = 0;
#line 394
      send_ipack(p);
#line 395
      reset_ipack(p);
      }
    }
  }
#line 399
  if ((int )*(buf___5 + 3) & 32) {
#line 400
    off = (uint8_t )((int )*(buf___5 + 4) + 1);
  }
  {
#line 403
  instant_repack((buf___5 + 4) + (int )off, 184 - (int )off, p);
  }
#line 404
  return;
}
}
#line 408 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static PID_BIT_MAP SI_PIDS  ;
#line 409 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static PID_BIT_MAP USER_PIDS  ;
#line 434 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
pids_map_t *pids_map  ;
#line 435 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int map_cnt  ;
#line 449 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static struct __anonstruct_PAT_84 PAT  ;
#line 466 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
struct __anonstruct_PMT_86 PMT  ;
#line 471 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static struct __anonstruct_SDT_87 SDT  ;
#line 477 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int SI_fd[16]  ;
#line 478 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int SI_fd_cnt  =    0;
#line 488 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
void update_bitmaps(void) 
{ 
  int i ;
  int j ;
  int k ;
  int n ;
  int pid___0 ;
  int pid___1 ;
  int tmp ;

  {
#line 492
  i = 0;
  {
#line 492
  while (1) {
    while_continue: /* CIL Label */ ;
#line 492
    if (! (i < map_cnt)) {
#line 492
      goto while_break;
    }
    {
#line 494
    memset((void *)((pids_map + i)->pidmap), 0, sizeof(PID_BIT_MAP ));
#line 495
    (pids_map + i)->pidmap[0] = (uint8_t )((int )(pids_map + i)->pidmap[0] | 1);
#line 496
    j = 0;
    }
    {
#line 496
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 496
      if (! (j < 16)) {
#line 496
        goto while_break___0;
      }
#line 498
      if ((pids_map + i)->pids[j] == -1) {
#line 498
        goto while_break___0;
      }
#line 499
      if ((pids_map + i)->pids[j] == 8192) {
        {
#line 501
        memset((void *)((pids_map + i)->pidmap), 255, sizeof(PID_BIT_MAP ));
        }
#line 502
        goto while_break___0;
      }
#line 504
      (pids_map + i)->pidmap[(pids_map + i)->pids[j] / 8] = (uint8_t )((int )(pids_map + i)->pidmap[(pids_map + i)->pids[j] / 8] | (1 << (pids_map + i)->pids[j] % 8));
#line 505
      k = 0;
      {
#line 505
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 505
        if (! (k < PMT.cnt)) {
#line 505
          goto while_break___1;
        }
#line 507
        n = 0;
        {
#line 507
        while (1) {
          while_continue___2: /* CIL Label */ ;
#line 507
          if (! (n < (PMT.entries + k)->pids_cnt)) {
#line 507
            goto while_break___2;
          }
#line 509
          if ((PMT.entries + k)->pids[n] == (pids_map + i)->pids[j]) {
#line 513
            (pids_map + i)->pidmap[(PAT.entries + k)->pmt_pid / 8] = (uint8_t )((int )(pids_map + i)->pidmap[(PAT.entries + k)->pmt_pid / 8] | (1 << (PAT.entries + k)->pmt_pid % 8));
          }
#line 507
          n ++;
        }
        while_break___2: /* CIL Label */ ;
        }
#line 505
        k ++;
      }
      while_break___1: /* CIL Label */ ;
      }
#line 496
      j ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 492
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 521
  j = 0;
  {
#line 521
  while (1) {
    while_continue___3: /* CIL Label */ ;
#line 521
    if (! (j < map_cnt)) {
#line 521
      goto while_break___3;
    }
#line 523
    k = 0;
    {
#line 523
    while (1) {
      while_continue___4: /* CIL Label */ ;
#line 523
      if (! (k < (pids_map + j)->progs_cnt)) {
#line 523
        goto while_break___4;
      }
#line 525
      i = 0;
      {
#line 525
      while (1) {
        while_continue___5: /* CIL Label */ ;
#line 525
        if (! (i < PAT.entries_cnt)) {
#line 525
          goto while_break___5;
        }
#line 527
        if ((pids_map + j)->progs[k] == (PAT.entries + i)->program) {
#line 529
          (pids_map + j)->pidmap[(PAT.entries + i)->pmt_pid / 8] = (uint8_t )((int )(pids_map + j)->pidmap[(PAT.entries + i)->pmt_pid / 8] | (1 << (PAT.entries + i)->pmt_pid % 8));
#line 530
          (pids_map + j)->pidmap[2] = (uint8_t )((int )(pids_map + j)->pidmap[2] | (1 << 1));
#line 531
          n = 0;
          {
#line 531
          while (1) {
            while_continue___6: /* CIL Label */ ;
#line 531
            if (! (n < (PMT.entries + i)->pids_cnt)) {
#line 531
              goto while_break___6;
            }
#line 533
            pid___0 = (PMT.entries + i)->pids[n];
#line 535
            (pids_map + j)->pidmap[pid___0 / 8] = (uint8_t )((int )(pids_map + j)->pidmap[pid___0 / 8] | (1 << pid___0 % 8));
#line 531
            n ++;
          }
          while_break___6: /* CIL Label */ ;
          }
        }
#line 525
        i ++;
      }
      while_break___5: /* CIL Label */ ;
      }
#line 523
      k ++;
    }
    while_break___4: /* CIL Label */ ;
    }
#line 521
    j ++;
  }
  while_break___3: /* CIL Label */ ;
  }
#line 544
  i = 0;
  {
#line 544
  while (1) {
    while_continue___7: /* CIL Label */ ;
#line 544
    if (! (i < map_cnt)) {
#line 544
      goto while_break___7;
    }
#line 546
    j = 0;
    {
#line 546
    while (1) {
      while_continue___8: /* CIL Label */ ;
#line 546
      if (! (j < (pids_map + i)->prognames_cnt)) {
#line 546
        goto while_break___8;
      }
#line 548
      k = 0;
      {
#line 548
      while (1) {
        while_continue___9: /* CIL Label */ ;
#line 548
        if (! (k < PMT.cnt)) {
#line 548
          goto while_break___9;
        }
        {
#line 550
        tmp = strcmp((char const   *)*((pids_map + i)->prognames + j), (char const   *)((PMT.entries + k)->name));
        }
#line 550
        if (! tmp) {
#line 552
          (pids_map + i)->pidmap[(PAT.entries + k)->pmt_pid / 8] = (uint8_t )((int )(pids_map + i)->pidmap[(PAT.entries + k)->pmt_pid / 8] | (1 << (PAT.entries + k)->pmt_pid % 8));
#line 553
          (pids_map + i)->pidmap[2] = (uint8_t )((int )(pids_map + i)->pidmap[2] | (1 << 1));
#line 554
          n = 0;
          {
#line 554
          while (1) {
            while_continue___10: /* CIL Label */ ;
#line 554
            if (! (n < (PMT.entries + k)->pids_cnt)) {
#line 554
              goto while_break___10;
            }
#line 556
            pid___1 = (PMT.entries + k)->pids[n];
#line 558
            (pids_map + i)->pidmap[pid___1 / 8] = (uint8_t )((int )(pids_map + i)->pidmap[pid___1 / 8] | (1 << pid___1 % 8));
#line 554
            n ++;
          }
          while_break___10: /* CIL Label */ ;
          }
        }
#line 548
        k ++;
      }
      while_break___9: /* CIL Label */ ;
      }
#line 546
      j ++;
    }
    while_break___8: /* CIL Label */ ;
    }
#line 544
    i ++;
  }
  while_break___7: /* CIL Label */ ;
  }
#line 565
  return;
}
}
#line 568 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int collect_section(section_t *section___0 , int pusi , uint8_t *buf___5 ,
                           unsigned int len ) 
{ 
  int skip ;
  int slen ;
  uint8_t *ptr ;

  {
#line 573
  if (pusi) {
#line 574
    section___0->pos = 0U;
  }
#line 576
  if (section___0->pos + len > 1281U) {
#line 577
    return (0);
  }
  {
#line 579
  memcpy((void */* __restrict  */)(& section___0->buf[section___0->pos]), (void const   */* __restrict  */)buf___5,
         (size_t )len);
#line 580
  section___0->pos += len;
#line 582
  skip = (int )section___0->buf[0];
  }
#line 583
  if ((unsigned int )(skip + 4) > section___0->pos) {
#line 584
    return (0);
  }
#line 586
  ptr = & section___0->buf[skip + 1];
#line 587
  slen = (((int )*(ptr + 1) & 15) << 8) | (int )*(ptr + 2);
#line 588
  if (section___0->pos < (unsigned int )(((skip + 1) + 3) + slen)) {
#line 589
    return (0);
  }
#line 591
  return (skip + 1);
}
}
#line 595 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int parse_pat(int pusi , uint8_t *b , int l ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int vers ;
  unsigned int seclen ;
  unsigned int num ;
  unsigned int skip ;
  uint8_t *buf___5 ;
  int tmp ;
  void *tmp___0 ;
  void *tmp___1 ;

  {
  {
#line 600
  tmp = collect_section(& PAT.section, pusi, b, (unsigned int )l);
#line 600
  skip = (unsigned int )tmp;
  }
#line 601
  if (! skip) {
#line 602
    return (0);
  }
#line 605
  PAT.section.pos = 0U;
#line 606
  buf___5 = & PAT.section.buf[skip];
#line 608
  if ((int )*(buf___5 + 0) != 0) {
#line 609
    return (0);
  }
#line 610
  if (! ((int )*(buf___5 + 5) & 1)) {
#line 611
    return (0);
  }
#line 613
  vers = (unsigned int )(((int )*(buf___5 + 5) >> 1) & 31);
#line 614
  if ((unsigned int )PAT.version == vers) {
#line 615
    return (1);
  }
  {
#line 617
  memset((void *)(SI_PIDS), 0, sizeof(PID_BIT_MAP ));
#line 618
  SI_PIDS[0] = (uint8_t )((int )SI_PIDS[0] | 1);
#line 619
  SI_PIDS[2] = (uint8_t )((int )SI_PIDS[2] | (1 << 1));
#line 620
  seclen = (unsigned int )((((int )*(buf___5 + 1) & 15) << 8) | (int )*(buf___5 + 2));
#line 621
  num = (seclen - 9U) / 4U;
  }
#line 622
  if ((unsigned int )PAT.entries_cnt != num) {
    {
#line 624
    tmp___0 = realloc((void *)PAT.entries, sizeof(pat_entry ) * (unsigned long )num);
#line 624
    PAT.entries = (pat_entry *)tmp___0;
#line 625
    PAT.entries_cnt = (int )num;
#line 626
    tmp___1 = realloc((void *)PMT.entries, sizeof(pmt_t ) * (unsigned long )num);
#line 626
    PMT.entries = (pmt_t *)tmp___1;
    }
#line 627
    if (! PMT.entries) {
#line 627
      return (0);
    }
#line 628
    PMT.cnt = (int )num;
  }
#line 631
  i = 8U;
#line 632
  j = 0U;
#line 633
  j = 0U;
  {
#line 633
  while (1) {
    while_continue: /* CIL Label */ ;
#line 633
    if (! (j < num)) {
#line 633
      goto while_break;
    }
#line 635
    (PAT.entries + j)->program = ((int )*(buf___5 + i) << 8) | (int )*(buf___5 + (i + 1U));
#line 636
    (PAT.entries + j)->pmt_pid = (((int )*(buf___5 + (i + 2U)) & 31) << 8) | (int )*(buf___5 + (i + 3U));
#line 637
    SI_PIDS[(PAT.entries + j)->pmt_pid / 8] = (uint8_t )((int )SI_PIDS[(PAT.entries + j)->pmt_pid / 8] | (1 << (PAT.entries + j)->pmt_pid % 8));
#line 638
    i += 4U;
#line 640
    (PMT.entries + j)->section.pos = 1282U;
#line 641
    (PMT.entries + j)->version = -1;
#line 642
    (PMT.entries + j)->name[0] = (uint8_t )0;
#line 633
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 644
  SDT.version = -1;
#line 645
  SDT.section.pos = 1282U;
#line 647
  PAT.version = (int )vers;
#line 649
  return (2);
}
}
#line 652 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static void add_pmt_pids(void) 
{ 
  int i ;
  PID_BIT_MAP simap ;
  int tmp ;
  int tmp___0 ;

  {
#line 657
  i = 0;
  {
#line 657
  while (1) {
    while_continue: /* CIL Label */ ;
#line 657
    if (! (i < SI_fd_cnt)) {
#line 657
      goto while_break;
    }
    {
#line 658
    close(SI_fd[i]);
#line 657
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 660
  memset((void *)(simap), 0, sizeof(PID_BIT_MAP ));
#line 661
  simap[0] = (uint8_t )((int )simap[0] | 1);
#line 662
  i = 0;
  }
  {
#line 662
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 662
    if (PAT.entries_cnt <= 16) {
#line 662
      tmp___0 = PAT.entries_cnt;
    } else {
#line 662
      tmp___0 = 16;
    }
#line 662
    if (! (i < tmp___0)) {
#line 662
      goto while_break___0;
    }
#line 664
    if ((int )USER_PIDS[(PAT.entries + i)->pmt_pid / 8] & (1 << (PAT.entries + i)->pmt_pid % 8)) {
#line 664
      goto __Cont;
    }
#line 665
    if ((int )simap[(PAT.entries + i)->pmt_pid / 8] & (1 << (PAT.entries + i)->pmt_pid % 8)) {
#line 665
      goto __Cont;
    }
    {
#line 666
    tmp = open((char const   *)demuxdev[card], 2050);
#line 666
    SI_fd[i] = tmp;
    }
#line 666
    if (tmp < 0) {
      {
#line 668
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"COULDN\'T OPEN DEMUX %i: for pid: %d",
              i, (PAT.entries + i)->pmt_pid);
      }
#line 669
      return;
    }
    {
#line 672
    set_ts_filt(SI_fd[i], (uint16_t )(PAT.entries + i)->pmt_pid, (dmx_pes_type_t )20);
#line 673
    simap[(PAT.entries + i)->pmt_pid / 8] = (uint8_t )((int )simap[(PAT.entries + i)->pmt_pid / 8] | (1 << (PAT.entries + i)->pmt_pid % 8));
#line 674
    SI_fd_cnt ++;
    }
    __Cont: /* CIL Label */ 
#line 662
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 676
  return;
}
}
#line 678 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int parse_pmt(int pusi , pmt_t *pmt , uint8_t *b , int l ) 
{ 
  unsigned int i ;
  unsigned int version ;
  unsigned int seclen ;
  unsigned int skip ;
  unsigned int prog ;
  unsigned int pcr_pid ;
  unsigned int pid___0 ;
  uint8_t *buf___5 ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 683
  tmp = collect_section(& pmt->section, pusi, b, (unsigned int )l);
#line 683
  skip = (unsigned int )tmp;
  }
#line 685
  if (! skip) {
#line 686
    return (0);
  }
#line 689
  pmt->section.pos = 0U;
#line 690
  pmt->pids_cnt = 0;
#line 691
  buf___5 = & pmt->section.buf[skip];
#line 693
  if ((int )*(buf___5 + 0) != 2) {
#line 694
    return (0);
  }
#line 695
  if (! ((int )*(buf___5 + 5) & 1)) {
#line 696
    return (0);
  }
#line 698
  prog = (unsigned int )(((int )*(buf___5 + 3) << 8) | (int )*(buf___5 + 4));
#line 699
  version = (unsigned int )(((int )*(buf___5 + 5) >> 1) & 31);
#line 701
  if ((unsigned int )pmt->version == version) {
#line 702
    return (1);
  }
#line 704
  seclen = (unsigned int )((((int )*(buf___5 + 1) & 15) << 8) | (int )*(buf___5 + 2));
#line 705
  pcr_pid = (unsigned int )((((int )*(buf___5 + 8) & 31) << 8) | (int )*(buf___5 + 9));
#line 706
  tmp___0 = pmt->pids_cnt;
#line 706
  (pmt->pids_cnt) ++;
#line 706
  pmt->pids[tmp___0] = (int )pcr_pid;
#line 708
  skip = (unsigned int )((((int )*(buf___5 + 10) & 15) << 8) | (int )*(buf___5 + 11));
#line 709
  if (skip + 12U > seclen) {
#line 710
    return (0);
  }
#line 712
  i = skip + 12U;
  {
#line 713
  while (1) {
    while_continue: /* CIL Label */ ;
#line 713
    if (! (i + 5U < seclen)) {
#line 713
      goto while_break;
    }
#line 715
    pid___0 = (unsigned int )((((int )*(buf___5 + (i + 1U)) & 31) << 8) | (int )*(buf___5 + (i + 2U)));
#line 716
    tmp___1 = pmt->pids_cnt;
#line 716
    (pmt->pids_cnt) ++;
#line 716
    pmt->pids[tmp___1] = (int )pid___0;
#line 717
    skip = (unsigned int )((((int )*(buf___5 + (i + 3U)) & 15) << 8) | (int )*(buf___5 + (i + 4U)));
#line 718
    i += skip + 5U;
  }
  while_break: /* CIL Label */ ;
  }
#line 721
  pmt->version = (int )version;
#line 722
  return (2);
}
}
#line 725 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int parse_sdt(int pusi , uint8_t *b , int l ) 
{ 
  unsigned int i ;
  unsigned int version ;
  unsigned int seclen ;
  unsigned int skip ;
  unsigned int prog ;
  unsigned int k ;
  unsigned int descr_len ;
  unsigned int found ;
  uint8_t *buf___5 ;
  int tmp ;
  int j ;
  int len___0 ;
  int dlen ;
  int provider_len ;
  int name_len ;
  int n ;
  pmt_t *pmt ;

  {
  {
#line 730
  tmp = collect_section(& SDT.section, pusi, b, (unsigned int )l);
#line 730
  skip = (unsigned int )tmp;
  }
#line 732
  if (! skip) {
#line 733
    return (0);
  }
#line 735
  buf___5 = & SDT.section.buf[skip];
#line 737
  if ((int )*(buf___5 + 0) != 66) {
#line 738
    return (0);
  }
#line 739
  if (! ((int )*(buf___5 + 5) & 1)) {
#line 740
    return (0);
  }
#line 742
  version = (unsigned int )(((int )*(buf___5 + 5) >> 1) & 31);
#line 744
  if ((unsigned int )SDT.version == version) {
#line 745
    return (1);
  }
#line 747
  seclen = (unsigned int )((((int )*(buf___5 + 1) & 15) << 8) | (int )*(buf___5 + 2));
#line 748
  if (seclen < 12U) {
#line 749
    return (0);
  }
#line 751
  i = 11U;
  {
#line 752
  while (1) {
    while_continue: /* CIL Label */ ;
#line 752
    if (! (i < seclen - 4U)) {
#line 752
      goto while_break;
    }
#line 754
    descr_len = (unsigned int )((((int )*(buf___5 + (i + 3U)) & 15) << 8) | (int )*(buf___5 + (i + 4U)));
#line 755
    if ((i + 5U) + descr_len >= seclen) {
#line 756
      goto while_break;
    }
#line 757
    prog = (unsigned int )(((int )*(buf___5 + i) << 8) | (int )*(buf___5 + (i + 1U)));
#line 758
    found = 4294967295U;
#line 759
    k = 0U;
#line 760
    k = 0U;
    {
#line 760
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 760
      if (! (k < (unsigned int )PMT.cnt)) {
#line 760
        goto while_break___0;
      }
#line 761
      if ((unsigned int )(PAT.entries + k)->program == prog) {
#line 763
        found = k;
#line 766
        if (k != 4294967295U) {
#line 770
          j = (int )(i + 5U);
#line 771
          dlen = 0;
#line 771
          len___0 = dlen;
          {
#line 772
          while (1) {
            while_continue___1: /* CIL Label */ ;
#line 772
            if (! ((unsigned int )len___0 < descr_len)) {
#line 772
              goto while_break___1;
            }
#line 777
            n = j;
#line 778
            dlen = (int )*(buf___5 + (n + 1));
#line 779
            if ((unsigned int )(len___0 + dlen) > descr_len) {
#line 779
              goto while_break___1;
            }
#line 780
            if ((int )*(buf___5 + n) == 72) {
#line 782
              provider_len = (int )*(buf___5 + (n + 3));
#line 783
              if (provider_len + 2 > dlen) {
#line 784
                goto while_break___1;
              }
#line 785
              n += 4 + provider_len;
#line 786
              name_len = (int )*(buf___5 + n);
#line 787
              if ((provider_len + 3) + name_len > dlen) {
#line 788
                goto while_break___1;
              }
              {
#line 789
              pmt = PMT.entries + k;
#line 790
              memcpy((void */* __restrict  */)(pmt->name), (void const   */* __restrict  */)(buf___5 + (n + 1)),
                     (size_t )name_len);
#line 791
              pmt->name[name_len] = (uint8_t )0;
#line 792
              fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Program n. %d, name: \'%s\'\n",
                      prog, pmt->name);
              }
            }
#line 794
            len___0 += dlen + 2;
#line 795
            j += dlen + 2;
          }
          while_break___1: /* CIL Label */ ;
          }
        }
      }
#line 760
      k ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 799
    i += 5U + descr_len;
  }
  while_break: /* CIL Label */ ;
  }
#line 801
  SDT.version = (int )version;
#line 802
  return (2);
}
}
#line 806 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int parse_ts_packet(uint8_t *buf___5 ) 
{ 
  int pid___0 ;
  int l ;
  int af ;
  int pusi ;
  int tmp ;
  int i ;
  int tmp___0 ;
  int i___0 ;
  int tmp___1 ;

  {
#line 810
  if ((int )*(buf___5 + 0) != 71) {
#line 811
    return (0);
  }
#line 812
  pusi = (int )*(buf___5 + 1) & 64;
#line 813
  pid___0 = (((int )*(buf___5 + 1) & 31) << 8) | (int )*(buf___5 + 2);
#line 814
  af = ((int )*(buf___5 + 3) >> 4) & 3;
#line 815
  l = 4;
#line 816
  if (af == 2) {
#line 817
    return (0);
  } else
#line 818
  if (af == 3) {
#line 819
    l += (int )*(buf___5 + 4) + 1;
  }
#line 820
  if (l >= 184) {
#line 821
    return (0);
  }
#line 823
  if (pid___0 == 0) {
    {
#line 825
    tmp = parse_pat(pusi, buf___5 + l, 188 - l);
    }
#line 825
    if (tmp == 2) {
      {
#line 826
      add_pmt_pids();
      }
    }
  } else
#line 828
  if (pid___0 == 17) {
    {
#line 830
    tmp___0 = parse_sdt(pusi, buf___5 + l, 188 - l);
    }
#line 830
    if (tmp___0 == 2) {
#line 833
      i = 0;
      {
#line 833
      while (1) {
        while_continue: /* CIL Label */ ;
#line 833
        if (! (i < PMT.cnt)) {
#line 833
          goto while_break;
        }
#line 835
        (PMT.entries + i)->section.pos = 1282U;
#line 836
        (PMT.entries + i)->version = -1;
#line 833
        i ++;
      }
      while_break: /* CIL Label */ ;
      }
      {
#line 838
      update_bitmaps();
      }
    }
  } else {
#line 845
    i___0 = 0;
    {
#line 845
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 845
      if (! (i___0 < PAT.entries_cnt)) {
#line 845
        goto while_break___0;
      }
#line 847
      if (pid___0 == (PAT.entries + i___0)->pmt_pid) {
        {
#line 849
        tmp___1 = parse_pmt(pusi, PMT.entries + i___0, buf___5 + l, 188 - l);
        }
#line 849
        if (tmp___1 == 2) {
          {
#line 850
          update_bitmaps();
          }
        }
      }
#line 845
      i___0 ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 854
  return (0);
}
}
#line 856 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
static int is_string(char *s ) 
{ 
  int i ;
  int n ;
  int len ;
  size_t tmp ;
  unsigned short const   **tmp___0 ;

  {
  {
#line 860
  n = 0;
#line 861
  tmp = strlen((char const   *)s);
#line 861
  len = (int )tmp;
#line 862
  i = 0;
  }
  {
#line 862
  while (1) {
    while_continue: /* CIL Label */ ;
#line 862
    if (! (i < len)) {
#line 862
      goto while_break;
    }
    {
#line 863
    tmp___0 = __ctype_b_loc();
    }
#line 863
    if ((int const   )*(*tmp___0 + (int )*(s + i)) & 2048) {
#line 864
      n ++;
    }
#line 862
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 866
  return (n != len);
}
}
#line 869 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/dvbstream.c"
int main(int argc , char **argv ) 
{ 
  int fd_dvr ;
  int i ;
  int j ;
  uint8_t buf___5[1500] ;
  struct pollfd pfds[2] ;
  unsigned int secs ;
  unsigned long freq___0 ;
  unsigned long srate ;
  int count ;
  char *ch ;
  dmx_pes_type_t pestype ;
  int bytes_read ;
  int do_analyse ;
  unsigned char *free_bytes ;
  int output_type ;
  int64_t counts[8192] ;
  double f ;
  long start_time ;
  long end_time ;
  struct timeval tv ;
  int found ;
  int stream_whole_TS ;
  char ipOut[20] ;
  int portOut ;
  int ttl ;
  char *tmp ;
  int len ;
  char addr[20] ;
  int port ;
  void *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  int tmp___23 ;
  int tmp___24 ;
  int tmp___25 ;
  int tmp___26 ;
  int tmp___27 ;
  int tmp___28 ;
  int tmp___29 ;
  int tmp___30 ;
  int tmp___31 ;
  int tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  int tmp___35 ;
  int tmp___36 ;
  int tmp___37 ;
  char *fname ;
  size_t tmp___38 ;
  void *tmp___39 ;
  void *tmp___40 ;
  size_t tmp___41 ;
  char *tmp___42 ;
  int is_progname ;
  int tmp___43 ;
  pids_map_t *map ;
  int tmp___44 ;
  void *tmp___45 ;
  size_t tmp___46 ;
  void *tmp___47 ;
  int tmp___48 ;
  int tmp___49 ;
  char *tmp___50 ;
  int tmp___51 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;
  int tmp___59 ;
  int tmp___60 ;
  int tmp___61 ;
  int tmp___62 ;
  int tmp___63 ;
  int tmp___64 ;
  int tmp___65 ;
  int tmp___66 ;
  int tmp___67 ;
  int tmp___68 ;
  int tmp___69 ;
  int tmp___70 ;
  int tmp___71 ;
  int tmp___72 ;
  int tmp___73 ;
  int tmp___74 ;
  int tmp___75 ;
  int tmp___76 ;
  int tmp___77 ;
  int tmp___78 ;
  int tmp___79 ;
  int tmp___80 ;
  int tmp___81 ;
  int tmp___82 ;
  int tmp___83 ;
  int tmp___84 ;
  int tmp___85 ;
  FILE *f___0 ;
  int *tmp___86 ;
  __sighandler_t tmp___87 ;
  __sighandler_t tmp___88 ;
  __sighandler_t tmp___89 ;
  __sighandler_t tmp___90 ;
  int tmp___91 ;
  int tmp___92 ;
  int tmp___93 ;
  char const   *tmp___94 ;
  long tmp___95 ;
  ssize_t tmp___96 ;
  ssize_t tmp___97 ;
  int bytes_read___0 ;
  ssize_t tmp___98 ;
  int pid___0 ;
  int i___0 ;
  int *tmp___99 ;
  long tmp___100 ;
  ssize_t tmp___101 ;

  {
  {
#line 879
  secs = 4294967295U;
#line 880
  freq___0 = 0UL;
#line 881
  srate = 0UL;
#line 886
  do_analyse = 0;
#line 888
  output_type = 1;
#line 891
  start_time = -1L;
#line 892
  end_time = -1L;
#line 895
  stream_whole_TS = 0;
#line 900
  ttl = 2;
#line 902
  pids_map = (pids_map_t *)((void *)0);
#line 903
  map_cnt = 0;
#line 905
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"dvbstream v0.7 - (C) Dave Chapman 2001-2004\n");
#line 906
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Released under the GPL.\n");
#line 907
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Latest version available from http://www.linuxstb.org/\n");
#line 910
  i = 0;
  }
  {
#line 910
  while (1) {
    while_continue: /* CIL Label */ ;
#line 910
    if (! (i < 8192)) {
#line 910
      goto while_break;
    }
#line 911
    hi_mappids[i] = (unsigned char )(i >> 8);
#line 912
    lo_mappids[i] = (unsigned char )(i & 255);
#line 913
    counts[i] = (int64_t )0;
#line 910
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 915
  memset((void *)(& PAT), 0, sizeof(PAT));
#line 916
  PAT.version = -1;
#line 917
  PAT.section.pos = 1282U;
#line 918
  memset((void *)(& PMT), 0, sizeof(PMT));
#line 919
  memset((void *)(SI_PIDS), 0, sizeof(PID_BIT_MAP ));
#line 920
  SI_PIDS[0] = (uint8_t )((int )SI_PIDS[0] | 1);
#line 921
  memset((void *)(& SDT), 0, sizeof(SDT));
#line 922
  SDT.section.pos = 1282U;
#line 923
  SDT.version = -1;
#line 924
  SI_PIDS[2] = (uint8_t )((int )SI_PIDS[2] | (1 << 1));
#line 925
  memset((void *)(USER_PIDS), 0, sizeof(PID_BIT_MAP ));
#line 926
  USER_PIDS[0] = (uint8_t )((int )USER_PIDS[0] | 1);
#line 929
  strcpy((char */* __restrict  */)(ipOut), (char const   */* __restrict  */)"224.0.1.2");
#line 930
  portOut = 5004;
  }
#line 932
  if (argc == 1) {
    {
#line 933
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Usage: dvbtune [OPTIONS] pid1 pid2 ... pid8\n\n");
#line 934
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-i          IP multicast address\n");
#line 935
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-r          IP multicast port\n");
#line 936
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-net ip:prt IP address:port combination to be followed by pids list. Can be repeated to generate multiple RTP streams\n");
#line 937
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-o          Stream to stdout instead of network\n");
#line 938
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-o:file.ts  Stream to named file instead of network\n");
#line 939
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-n secs     Stop after secs seconds\n");
#line 940
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-from n     Start saving the file previously specified with -o: syntax in n minutes time\n");
#line 941
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-to n       Stop saving the file previously specified with -o: syntax in n minutes time\n");
#line 942
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-ps         Convert stream to Program Stream format (needs exactly 2 pids)\n");
#line 943
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-v vpid     Decode video PID (full cards only)\n");
#line 944
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-a apid     Decode audio PID (full cards only)\n");
#line 945
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-t ttpid    Decode teletext PID (full cards only)\n");
#line 946
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\nStandard tuning options:\n\n");
#line 947
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-f freq     absolute Frequency (DVB-S in Hz or DVB-T in Hz)\n");
#line 948
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"            or L-band Frequency (DVB-S in Hz or DVB-T in Hz)\n");
#line 949
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-SL slof    S-LOF(DVB-S only)\n");
#line 950
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-L1 LOF1    LOF1(DVB-S only)\n");
#line 951
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-L2 LOF2    LOF2(DVB-S only)\n");
#line 952
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-p [H,V]    Polarity (DVB-S only)\n");
#line 953
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-s N        Symbol rate (DVB-S or DVB-C)\n");
#line 955
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\nAdvanced tuning options:\n\n");
#line 956
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-c [0-3]    Use DVB card #[0-3]\n");
#line 957
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-D [0-4AB]  DiSEqC command (0=none)\n\n");
#line 958
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-I [0|1|2]  0=Spectrum Inversion off, 1=Spectrum Inversion on, 2=auto\n");
#line 959
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-qam X      DVB-T/C and ATSC modulation - 16%s, 32%s, 64%s, 128%s or 256%s\n",
            "", "", " (default)", "", "");
#line 963
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-gi N       DVB-T guard interval 1_N (N=32%s, 16%s, 8%s or 4%s)\n",
            " (default)", "", "", "");
#line 964
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-cr N       DVB-T/C code rate. N=AUTO%s, 1_2%s, 2_3%s, 3_4%s, 5_6%s, 7_8%s\n",
            "", "", " (default)", "", "", "");
#line 965
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-crlp N     DVB-T code rate LP. N=AUTO%s, 1_2%s, 2_3%s, 3_4%s, 5_6%s, 7_8%s\n",
            "", "", "", "", "", "");
#line 966
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-bw N       DVB-T bandwidth (Mhz) - N=6%s, 7%s or 8%s\n",
            "", "", " (default)");
#line 967
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-tm N       DVB-T transmission mode - N=2%s or 8%s\n",
            " (default)", "");
#line 968
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-hy N       DVB-T hierarchy - N=1%s, 2%s, 4%s, NONE%s or AUTO%s\n",
            "", "", "", " (default)", "");
#line 969
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-ttl N      Sets TTL to N (default: 2) when streaming in RTP\n");
#line 970
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-rtp        Sets output type to RTP (default when using network out)\n");
#line 971
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-udp        Sets output type to UDP \n");
#line 972
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-prog       Selects PROGRAM mode (opens a demux on the whole TS)\n");
#line 973
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-pid        Selects PID mode (default)\n");
#line 974
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"-stdin      Use STDIN as source rather than a DVB card\n");
#line 977
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n-analyse    Perform a simple analysis of the bitrates of the PIDs in the transport stream\n");
#line 979
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
#line 980
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"NOTE: Use pid1=8192 to broadcast whole TS stream from a budget card\n");
    }
#line 981
    return (-1);
  } else {
#line 983
    pids[0] = 0;
#line 984
    npids = 1;
#line 985
    pestype = (dmx_pes_type_t )20;
#line 986
    i = 1;
    {
#line 986
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 986
      if (! (i < argc)) {
#line 986
        goto while_break___0;
      }
      {
#line 987
      tmp___85 = strcmp((char const   *)*(argv + i), "-ps");
      }
#line 987
      if (tmp___85 == 0) {
#line 988
        output_type = 0;
      } else {
        {
#line 989
        tmp___84 = strcmp((char const   *)*(argv + i), "-rtp");
        }
#line 989
        if (tmp___84) {
          {
#line 991
          tmp___83 = strcmp((char const   *)*(argv + i), "-udp");
          }
#line 991
          if (tmp___83) {
            {
#line 993
            tmp___82 = strcmp((char const   *)*(argv + i), "-analyse");
            }
#line 993
            if (tmp___82 == 0) {
#line 994
              do_analyse = 1;
#line 995
              output_type = 2;
#line 996
              if (secs == 4294967295U) {
#line 996
                secs = 10U;
              }
            } else {
              {
#line 997
              tmp___81 = strcmp((char const   *)*(argv + i), "-stdin");
              }
#line 997
              if (tmp___81 == 0) {
#line 998
                use_stdin = 1;
              } else {
                {
#line 999
                tmp___80 = strcmp((char const   *)*(argv + i), "-i");
                }
#line 999
                if (tmp___80 == 0) {
#line 1000
                  if ((unsigned long )pids_map != (unsigned long )((void *)0)) {
                    {
#line 1001
                    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"ERROR! -i and -r can\'t be used with -o and -net.  Use -net instead\n");
#line 1002
                    exit(1);
                    }
                  }
                  {
#line 1004
                  i ++;
#line 1005
                  strcpy((char */* __restrict  */)(ipOut), (char const   */* __restrict  */)*(argv + i));
                  }
                } else {
                  {
#line 1006
                  tmp___79 = strcmp((char const   *)*(argv + i), "-auto");
                  }
#line 1006
                  if (tmp___79 == 0) {
#line 1007
                    modulation = (fe_modulation_t )6;
#line 1008
                    TransmissionMode = (fe_transmit_mode_t )2;
#line 1009
                    guardInterval = (fe_guard_interval_t )4;
#line 1010
                    HP_CodeRate = (fe_code_rate_t )9;
#line 1011
                    LP_CodeRate = (fe_code_rate_t )9;
#line 1012
                    hier = (fe_hierarchy_t )4;
#line 1013
                    specInv = (fe_spectral_inversion_t )2;
                  } else {
                    {
#line 1015
                    tmp___78 = strcmp((char const   *)*(argv + i), "-r");
                    }
#line 1015
                    if (tmp___78 == 0) {
#line 1016
                      if ((unsigned long )pids_map != (unsigned long )((void *)0)) {
                        {
#line 1017
                        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"ERROR! -i and -r can\'t be used with -o and -net.  Use -net instead\n");
#line 1018
                        exit(1);
                        }
                      }
                      {
#line 1020
                      i ++;
#line 1021
                      portOut = atoi((char const   *)*(argv + i));
                      }
                    } else {
                      {
#line 1022
                      tmp___77 = strcmp((char const   *)*(argv + i), "-net");
                      }
#line 1022
                      if (tmp___77 == 0) {
                        {
#line 1024
                        i ++;
#line 1025
                        tmp = strchr((char const   *)*(argv + i), ':');
                        }
#line 1026
                        if ((unsigned long )tmp == (unsigned long )((void *)0)) {
                          {
#line 1027
                          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"No valid IP:port found after -net switch, discarding\n");
                          }
                        } else
#line 1026
                        if (tmp - *(argv + i) > 19L) {
                          {
#line 1027
                          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"No valid IP:port found after -net switch, discarding\n");
                          }
                        } else {
                          {
#line 1029
                          len = (int )(tmp - *(argv + i));
#line 1032
                          strncpy((char */* __restrict  */)(ipOut), (char const   */* __restrict  */)*(argv + i),
                                  (size_t )len);
#line 1033
                          ipOut[len] = (char)0;
#line 1034
                          strncpy((char */* __restrict  */)(addr), (char const   */* __restrict  */)*(argv + i),
                                  (size_t )len);
#line 1035
                          addr[len] = (char)0;
#line 1036
                          portOut = atoi((char const   *)(tmp + 1));
#line 1036
                          port = portOut;
#line 1039
                          tmp___0 = realloc((void *)pids_map, sizeof(pids_map_t ) * (unsigned long )(map_cnt + 1));
#line 1039
                          pids_map = (pids_map_t *)tmp___0;
                          }
#line 1040
                          if ((unsigned long )pids_map != (unsigned long )((void *)0)) {
#line 1041
                            map_cnt ++;
#line 1042
                            (pids_map + (map_cnt - 1))->pid_cnt = 0;
#line 1043
                            (pids_map + (map_cnt - 1))->progs_cnt = 0;
#line 1044
                            (pids_map + (map_cnt - 1))->start_time = start_time;
#line 1045
                            (pids_map + (map_cnt - 1))->end_time = end_time;
#line 1046
                            j = 0;
                            {
#line 1046
                            while (1) {
                              while_continue___1: /* CIL Label */ ;
#line 1046
                              if (! (j < 16)) {
#line 1046
                                goto while_break___1;
                              }
#line 1046
                              (pids_map + (map_cnt - 1))->pids[j] = -1;
#line 1046
                              j ++;
                            }
                            while_break___1: /* CIL Label */ ;
                            }
                            {
#line 1047
                            (pids_map + (map_cnt - 1))->filename = (char *)((void *)0);
#line 1048
                            strncpy((char */* __restrict  */)((pids_map + (map_cnt - 1))->net),
                                    (char const   */* __restrict  */)(addr), (size_t )len);
#line 1049
                            (pids_map + (map_cnt - 1))->net[len] = (unsigned char)0;
#line 1050
                            (pids_map + (map_cnt - 1))->port = port;
#line 1051
                            (pids_map + (map_cnt - 1))->pos = 0;
#line 1053
                            (pids_map + (map_cnt - 1))->socket = makesocket(addr,
                                                                            (unsigned short )port,
                                                                            ttl, & (pids_map + (map_cnt - 1))->sOut);
                            }
#line 1054
                            if (output_type == 1) {
#line 1054
                              tmp___1 = 33;
                            } else {
#line 1054
                              tmp___1 = 34;
                            }
                            {
#line 1054
                            initrtp(& (pids_map + (map_cnt - 1))->hdr, tmp___1, streamtype);
#line 1055
                            output_type = 3;
                            }
                          } else {
                            {
#line 1057
                            fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t alloc enough entry for this %s:%d address\n",
                                    addr, port);
                            }
                          }
                        }
                      } else {
                        {
#line 1059
                        tmp___76 = strcmp((char const   *)*(argv + i), "-f");
                        }
#line 1059
                        if (tmp___76 == 0) {
                          {
#line 1060
                          i ++;
#line 1061
                          tmp___2 = atoi((char const   *)*(argv + i));
#line 1061
                          freq___0 = (unsigned long )tmp___2;
                          }
                        } else {
                          {
#line 1062
                          tmp___75 = strcmp((char const   *)*(argv + i), "-p");
                          }
#line 1062
                          if (tmp___75 == 0) {
#line 1063
                            i ++;
#line 1064
                            if ((int )*(*(argv + i) + 1) == 0) {
                              {
#line 1065
                              tmp___4 = tolower((int )*(*(argv + i) + 0));
                              }
#line 1065
                              if (tmp___4 == 118) {
#line 1066
                                pol = (char )'V';
                              } else {
                                {
#line 1067
                                tmp___3 = tolower((int )*(*(argv + i) + 0));
                                }
#line 1067
                                if (tmp___3 == 104) {
#line 1068
                                  pol = (char )'H';
                                }
                              }
                            }
                          } else {
                            {
#line 1071
                            tmp___74 = strcmp((char const   *)*(argv + i), "-SL");
                            }
#line 1071
                            if (tmp___74 == 0) {
                              {
#line 1072
                              i ++;
#line 1073
                              tmp___5 = atoi((char const   *)*(argv + i));
#line 1073
                              SLOF = (unsigned int )tmp___5;
#line 1074
                              SLOF = (unsigned int )((unsigned long )SLOF * 1000UL);
                              }
                            } else {
                              {
#line 1075
                              tmp___73 = strcmp((char const   *)*(argv + i), "-L1");
                              }
#line 1075
                              if (tmp___73 == 0) {
                                {
#line 1076
                                i ++;
#line 1077
                                tmp___6 = atoi((char const   *)*(argv + i));
#line 1077
                                LOF1 = (unsigned int )tmp___6;
#line 1078
                                LOF1 = (unsigned int )((unsigned long )LOF1 * 1000UL);
                                }
                              } else {
                                {
#line 1079
                                tmp___72 = strcmp((char const   *)*(argv + i), "-L2");
                                }
#line 1079
                                if (tmp___72 == 0) {
                                  {
#line 1080
                                  i ++;
#line 1081
                                  tmp___7 = atoi((char const   *)*(argv + i));
#line 1081
                                  LOF2 = (unsigned int )tmp___7;
#line 1082
                                  LOF2 = (unsigned int )((unsigned long )LOF2 * 1000UL);
                                  }
                                } else {
                                  {
#line 1084
                                  tmp___71 = strcmp((char const   *)*(argv + i), "-s");
                                  }
#line 1084
                                  if (tmp___71 == 0) {
                                    {
#line 1085
                                    i ++;
#line 1086
                                    tmp___8 = atoi((char const   *)*(argv + i));
#line 1086
                                    srate = (unsigned long )tmp___8 * 1000UL;
                                    }
                                  } else {
                                    {
#line 1088
                                    tmp___70 = strcmp((char const   *)*(argv + i),
                                                      "-D");
                                    }
#line 1088
                                    if (tmp___70 == 0) {
                                      {
#line 1090
                                      i ++;
#line 1091
                                      diseqc = (unsigned char )*(*(argv + i) + 0);
#line 1092
                                      tmp___10 = toupper((int )diseqc);
                                      }
#line 1092
                                      if (tmp___10 == 65) {
#line 1093
                                        diseqc = (unsigned char )'A';
                                      } else {
                                        {
#line 1094
                                        tmp___9 = toupper((int )diseqc);
                                        }
#line 1094
                                        if (tmp___9 == 66) {
#line 1095
                                          diseqc = (unsigned char )'B';
                                        } else
#line 1096
                                        if ((int )diseqc >= 48) {
#line 1096
                                          if ((int )diseqc <= 52) {
#line 1097
                                            diseqc = (unsigned char )((int )diseqc - 48);
                                          } else {
                                            {
#line 1100
                                            fprintf((FILE */* __restrict  */)stderr,
                                                    (char const   */* __restrict  */)"DiSEqC must be between 0 and 4 or A | B\n");
#line 1101
                                            exit(-1);
                                            }
                                          }
                                        } else {
                                          {
#line 1100
                                          fprintf((FILE */* __restrict  */)stderr,
                                                  (char const   */* __restrict  */)"DiSEqC must be between 0 and 4 or A | B\n");
#line 1101
                                          exit(-1);
                                          }
                                        }
                                      }
                                    } else {
                                      {
#line 1103
                                      tmp___69 = strcmp((char const   *)*(argv + i),
                                                        "-I");
                                      }
#line 1103
                                      if (tmp___69 == 0) {
                                        {
#line 1104
                                        i ++;
#line 1105
                                        tmp___12 = atoi((char const   *)*(argv + i));
                                        }
#line 1105
                                        if (tmp___12 == 0) {
#line 1106
                                          specInv = (fe_spectral_inversion_t )0;
                                        } else {
                                          {
#line 1107
                                          tmp___11 = atoi((char const   *)*(argv + i));
                                          }
#line 1107
                                          if (tmp___11 == 1) {
#line 1108
                                            specInv = (fe_spectral_inversion_t )1;
                                          } else {
#line 1110
                                            specInv = (fe_spectral_inversion_t )2;
                                          }
                                        }
                                      } else {
                                        {
#line 1112
                                        tmp___68 = strcmp((char const   *)*(argv + i),
                                                          "-prog");
                                        }
#line 1112
                                        if (tmp___68 == 0) {
#line 1113
                                          selection_mode = 1;
                                        } else {
                                          {
#line 1115
                                          tmp___67 = strcmp((char const   *)*(argv + i),
                                                            "-pid");
                                          }
#line 1115
                                          if (tmp___67 == 0) {
#line 1116
                                            selection_mode = 0;
                                          } else {
                                            {
#line 1118
                                            tmp___66 = strcmp((char const   *)*(argv + i),
                                                              "-o");
                                            }
#line 1118
                                            if (tmp___66 == 0) {
#line 1119
                                              to_stdout = 1;
                                            } else {
                                              {
#line 1120
                                              tmp___65 = strcmp((char const   *)*(argv + i),
                                                                "-n");
                                              }
#line 1120
                                              if (tmp___65 == 0) {
                                                {
#line 1121
                                                i ++;
#line 1122
                                                tmp___13 = atoi((char const   *)*(argv + i));
#line 1122
                                                secs = (unsigned int )tmp___13;
                                                }
                                              } else {
                                                {
#line 1123
                                                tmp___64 = strcmp((char const   *)*(argv + i),
                                                                  "-c");
                                                }
#line 1123
                                                if (tmp___64 == 0) {
                                                  {
#line 1124
                                                  i ++;
#line 1125
                                                  card = atoi((char const   *)*(argv + i));
                                                  }
#line 1126
                                                  if (card < 0) {
                                                    {
#line 1127
                                                    fprintf((FILE */* __restrict  */)stderr,
                                                            (char const   */* __restrict  */)"ERROR: card parameter must be between 0 and 4\n");
                                                    }
                                                  } else
#line 1126
                                                  if (card > 3) {
                                                    {
#line 1127
                                                    fprintf((FILE */* __restrict  */)stderr,
                                                            (char const   */* __restrict  */)"ERROR: card parameter must be between 0 and 4\n");
                                                    }
                                                  }
                                                } else {
                                                  {
#line 1129
                                                  tmp___63 = strcmp((char const   *)*(argv + i),
                                                                    "-v");
                                                  }
#line 1129
                                                  if (tmp___63 == 0) {
#line 1130
                                                    pestype = (dmx_pes_type_t )1;
                                                  } else {
                                                    {
#line 1131
                                                    tmp___62 = strcmp((char const   *)*(argv + i),
                                                                      "-a");
                                                    }
#line 1131
                                                    if (tmp___62 == 0) {
#line 1132
                                                      pestype = (dmx_pes_type_t )0;
                                                    } else {
                                                      {
#line 1133
                                                      tmp___61 = strcmp((char const   *)*(argv + i),
                                                                        "-t");
                                                      }
#line 1133
                                                      if (tmp___61 == 0) {
#line 1134
                                                        pestype = (dmx_pes_type_t )2;
                                                      } else {
                                                        {
#line 1135
                                                        tmp___60 = strcmp((char const   *)*(argv + i),
                                                                          "-qam");
                                                        }
#line 1135
                                                        if (tmp___60 == 0) {
                                                          {
#line 1136
                                                          i ++;
#line 1137
                                                          tmp___14 = atoi((char const   *)*(argv + i));
                                                          }
                                                          {
#line 1138
                                                          if (tmp___14 == 16) {
#line 1138
                                                            goto case_16;
                                                          }
#line 1139
                                                          if (tmp___14 == 32) {
#line 1139
                                                            goto case_32;
                                                          }
#line 1140
                                                          if (tmp___14 == 64) {
#line 1140
                                                            goto case_64;
                                                          }
#line 1141
                                                          if (tmp___14 == 128) {
#line 1141
                                                            goto case_128;
                                                          }
#line 1142
                                                          if (tmp___14 == 256) {
#line 1142
                                                            goto case_256;
                                                          }
#line 1143
                                                          goto switch_default;
                                                          case_16: /* CIL Label */ 
#line 1138
                                                          modulation = (fe_modulation_t )1;
#line 1138
                                                          goto switch_break;
                                                          case_32: /* CIL Label */ 
#line 1139
                                                          modulation = (fe_modulation_t )2;
#line 1139
                                                          goto switch_break;
                                                          case_64: /* CIL Label */ 
#line 1140
                                                          modulation = (fe_modulation_t )3;
#line 1140
                                                          goto switch_break;
                                                          case_128: /* CIL Label */ 
#line 1141
                                                          modulation = (fe_modulation_t )4;
#line 1141
                                                          goto switch_break;
                                                          case_256: /* CIL Label */ 
#line 1142
                                                          modulation = (fe_modulation_t )5;
#line 1142
                                                          goto switch_break;
                                                          switch_default: /* CIL Label */ 
                                                          {
#line 1144
                                                          fprintf((FILE */* __restrict  */)stderr,
                                                                  (char const   */* __restrict  */)"Invalid QAM rate: %s\n",
                                                                  *(argv + i));
#line 1145
                                                          exit(0);
                                                          }
                                                          switch_break: /* CIL Label */ ;
                                                          }
                                                        } else {
                                                          {
#line 1160
                                                          tmp___59 = strcmp((char const   *)*(argv + i),
                                                                            "-gi");
                                                          }
#line 1160
                                                          if (tmp___59 == 0) {
                                                            {
#line 1161
                                                            i ++;
#line 1162
                                                            tmp___15 = atoi((char const   *)*(argv + i));
                                                            }
                                                            {
#line 1163
                                                            if (tmp___15 == 32) {
#line 1163
                                                              goto case_32___0;
                                                            }
#line 1164
                                                            if (tmp___15 == 16) {
#line 1164
                                                              goto case_16___0;
                                                            }
#line 1165
                                                            if (tmp___15 == 8) {
#line 1165
                                                              goto case_8;
                                                            }
#line 1166
                                                            if (tmp___15 == 4) {
#line 1166
                                                              goto case_4;
                                                            }
#line 1167
                                                            goto switch_default___0;
                                                            case_32___0: /* CIL Label */ 
#line 1163
                                                            guardInterval = (fe_guard_interval_t )0;
#line 1163
                                                            goto switch_break___0;
                                                            case_16___0: /* CIL Label */ 
#line 1164
                                                            guardInterval = (fe_guard_interval_t )1;
#line 1164
                                                            goto switch_break___0;
                                                            case_8: /* CIL Label */ 
#line 1165
                                                            guardInterval = (fe_guard_interval_t )2;
#line 1165
                                                            goto switch_break___0;
                                                            case_4: /* CIL Label */ 
#line 1166
                                                            guardInterval = (fe_guard_interval_t )3;
#line 1166
                                                            goto switch_break___0;
                                                            switch_default___0: /* CIL Label */ 
                                                            {
#line 1168
                                                            fprintf((FILE */* __restrict  */)stderr,
                                                                    (char const   */* __restrict  */)"Invalid Guard Interval: %s\n",
                                                                    *(argv + i));
#line 1169
                                                            exit(0);
                                                            }
                                                            switch_break___0: /* CIL Label */ ;
                                                            }
                                                          } else {
                                                            {
#line 1171
                                                            tmp___58 = strcmp((char const   *)*(argv + i),
                                                                              "-tm");
                                                            }
#line 1171
                                                            if (tmp___58 == 0) {
                                                              {
#line 1172
                                                              i ++;
#line 1173
                                                              tmp___16 = atoi((char const   *)*(argv + i));
                                                              }
                                                              {
#line 1174
                                                              if (tmp___16 == 8) {
#line 1174
                                                                goto case_8___0;
                                                              }
#line 1175
                                                              if (tmp___16 == 2) {
#line 1175
                                                                goto case_2;
                                                              }
#line 1176
                                                              goto switch_default___1;
                                                              case_8___0: /* CIL Label */ 
#line 1174
                                                              TransmissionMode = (fe_transmit_mode_t )1;
#line 1174
                                                              goto switch_break___1;
                                                              case_2: /* CIL Label */ 
#line 1175
                                                              TransmissionMode = (fe_transmit_mode_t )0;
#line 1175
                                                              goto switch_break___1;
                                                              switch_default___1: /* CIL Label */ 
                                                              {
#line 1177
                                                              fprintf((FILE */* __restrict  */)stderr,
                                                                      (char const   */* __restrict  */)"Invalid Transmission Mode: %s\n",
                                                                      *(argv + i));
#line 1178
                                                              exit(0);
                                                              }
                                                              switch_break___1: /* CIL Label */ ;
                                                              }
                                                            } else {
                                                              {
#line 1180
                                                              tmp___57 = strcmp((char const   *)*(argv + i),
                                                                                "-bw");
                                                              }
#line 1180
                                                              if (tmp___57 == 0) {
                                                                {
#line 1181
                                                                i ++;
#line 1182
                                                                tmp___17 = atoi((char const   *)*(argv + i));
                                                                }
                                                                {
#line 1183
                                                                if (tmp___17 == 8) {
#line 1183
                                                                  goto case_8___1;
                                                                }
#line 1184
                                                                if (tmp___17 == 7) {
#line 1184
                                                                  goto case_7;
                                                                }
#line 1185
                                                                if (tmp___17 == 6) {
#line 1185
                                                                  goto case_6;
                                                                }
#line 1186
                                                                goto switch_default___2;
                                                                case_8___1: /* CIL Label */ 
#line 1183
                                                                bandWidth = (fe_bandwidth_t )0;
#line 1183
                                                                goto switch_break___2;
                                                                case_7: /* CIL Label */ 
#line 1184
                                                                bandWidth = (fe_bandwidth_t )1;
#line 1184
                                                                goto switch_break___2;
                                                                case_6: /* CIL Label */ 
#line 1185
                                                                bandWidth = (fe_bandwidth_t )2;
#line 1185
                                                                goto switch_break___2;
                                                                switch_default___2: /* CIL Label */ 
                                                                {
#line 1187
                                                                fprintf((FILE */* __restrict  */)stderr,
                                                                        (char const   */* __restrict  */)"Invalid DVB-T bandwidth: %s\n",
                                                                        *(argv + i));
#line 1188
                                                                exit(0);
                                                                }
                                                                switch_break___2: /* CIL Label */ ;
                                                                }
                                                              } else {
                                                                {
#line 1190
                                                                tmp___56 = strcmp((char const   *)*(argv + i),
                                                                                  "-cr");
                                                                }
#line 1190
                                                                if (tmp___56 == 0) {
                                                                  {
#line 1191
                                                                  i ++;
#line 1192
                                                                  tmp___23 = strcmp((char const   *)*(argv + i),
                                                                                    "AUTO");
                                                                  }
#line 1192
                                                                  if (tmp___23) {
                                                                    {
#line 1194
                                                                    tmp___22 = strcmp((char const   *)*(argv + i),
                                                                                      "1_2");
                                                                    }
#line 1194
                                                                    if (tmp___22) {
                                                                      {
#line 1196
                                                                      tmp___21 = strcmp((char const   *)*(argv + i),
                                                                                        "2_3");
                                                                      }
#line 1196
                                                                      if (tmp___21) {
                                                                        {
#line 1198
                                                                        tmp___20 = strcmp((char const   *)*(argv + i),
                                                                                          "3_4");
                                                                        }
#line 1198
                                                                        if (tmp___20) {
                                                                          {
#line 1200
                                                                          tmp___19 = strcmp((char const   *)*(argv + i),
                                                                                            "5_6");
                                                                          }
#line 1200
                                                                          if (tmp___19) {
                                                                            {
#line 1202
                                                                            tmp___18 = strcmp((char const   *)*(argv + i),
                                                                                              "7_8");
                                                                            }
#line 1202
                                                                            if (tmp___18) {
                                                                              {
#line 1205
                                                                              fprintf((FILE */* __restrict  */)stderr,
                                                                                      (char const   */* __restrict  */)"Invalid Code Rate: %s\n",
                                                                                      *(argv + i));
#line 1206
                                                                              exit(0);
                                                                              }
                                                                            } else {
#line 1203
                                                                              HP_CodeRate = (fe_code_rate_t )7;
                                                                            }
                                                                          } else {
#line 1201
                                                                            HP_CodeRate = (fe_code_rate_t )5;
                                                                          }
                                                                        } else {
#line 1199
                                                                          HP_CodeRate = (fe_code_rate_t )3;
                                                                        }
                                                                      } else {
#line 1197
                                                                        HP_CodeRate = (fe_code_rate_t )2;
                                                                      }
                                                                    } else {
#line 1195
                                                                      HP_CodeRate = (fe_code_rate_t )1;
                                                                    }
                                                                  } else {
#line 1193
                                                                    HP_CodeRate = (fe_code_rate_t )9;
                                                                  }
                                                                } else {
                                                                  {
#line 1208
                                                                  tmp___55 = strcmp((char const   *)*(argv + i),
                                                                                    "-crlp");
                                                                  }
#line 1208
                                                                  if (tmp___55 == 0) {
                                                                    {
#line 1209
                                                                    i ++;
#line 1210
                                                                    tmp___29 = strcmp((char const   *)*(argv + i),
                                                                                      "AUTO");
                                                                    }
#line 1210
                                                                    if (tmp___29) {
                                                                      {
#line 1212
                                                                      tmp___28 = strcmp((char const   *)*(argv + i),
                                                                                        "1_2");
                                                                      }
#line 1212
                                                                      if (tmp___28) {
                                                                        {
#line 1214
                                                                        tmp___27 = strcmp((char const   *)*(argv + i),
                                                                                          "2_3");
                                                                        }
#line 1214
                                                                        if (tmp___27) {
                                                                          {
#line 1216
                                                                          tmp___26 = strcmp((char const   *)*(argv + i),
                                                                                            "3_4");
                                                                          }
#line 1216
                                                                          if (tmp___26) {
                                                                            {
#line 1218
                                                                            tmp___25 = strcmp((char const   *)*(argv + i),
                                                                                              "5_6");
                                                                            }
#line 1218
                                                                            if (tmp___25) {
                                                                              {
#line 1220
                                                                              tmp___24 = strcmp((char const   *)*(argv + i),
                                                                                                "7_8");
                                                                              }
#line 1220
                                                                              if (tmp___24) {
                                                                                {
#line 1223
                                                                                fprintf((FILE */* __restrict  */)stderr,
                                                                                        (char const   */* __restrict  */)"Invalid Code Rate LP: %s\n",
                                                                                        *(argv + i));
#line 1224
                                                                                exit(0);
                                                                                }
                                                                              } else {
#line 1221
                                                                                LP_CodeRate = (fe_code_rate_t )7;
                                                                              }
                                                                            } else {
#line 1219
                                                                              LP_CodeRate = (fe_code_rate_t )5;
                                                                            }
                                                                          } else {
#line 1217
                                                                            LP_CodeRate = (fe_code_rate_t )3;
                                                                          }
                                                                        } else {
#line 1215
                                                                          LP_CodeRate = (fe_code_rate_t )2;
                                                                        }
                                                                      } else {
#line 1213
                                                                        LP_CodeRate = (fe_code_rate_t )1;
                                                                      }
                                                                    } else {
#line 1211
                                                                      LP_CodeRate = (fe_code_rate_t )9;
                                                                    }
                                                                  } else {
                                                                    {
#line 1226
                                                                    tmp___54 = strcmp((char const   *)*(argv + i),
                                                                                      "-hier");
                                                                    }
#line 1226
                                                                    if (tmp___54 == 0) {
                                                                      {
#line 1227
                                                                      i ++;
#line 1228
                                                                      tmp___33 = strcmp((char const   *)*(argv + i),
                                                                                        "AUTO");
                                                                      }
#line 1228
                                                                      if (tmp___33) {
                                                                        {
#line 1230
                                                                        tmp___32 = strcmp((char const   *)*(argv + i),
                                                                                          "1");
                                                                        }
#line 1230
                                                                        if (tmp___32) {
                                                                          {
#line 1232
                                                                          tmp___31 = strcmp((char const   *)*(argv + i),
                                                                                            "4");
                                                                          }
#line 1232
                                                                          if (tmp___31) {
                                                                            {
#line 1234
                                                                            tmp___30 = strcmp((char const   *)*(argv + i),
                                                                                              "NONE");
                                                                            }
#line 1234
                                                                            if (tmp___30) {
                                                                              {
#line 1237
                                                                              fprintf((FILE */* __restrict  */)stderr,
                                                                                      (char const   */* __restrict  */)"Invalid HIERARCHY: %s\n",
                                                                                      *(argv + i));
#line 1238
                                                                              exit(0);
                                                                              }
                                                                            } else {
#line 1235
                                                                              hier = (fe_hierarchy_t )0;
                                                                            }
                                                                          } else {
#line 1233
                                                                            hier = (fe_hierarchy_t )3;
                                                                          }
                                                                        } else {
#line 1231
                                                                          hier = (fe_hierarchy_t )2;
                                                                        }
                                                                      } else {
#line 1229
                                                                        hier = (fe_hierarchy_t )4;
                                                                      }
                                                                    } else {
                                                                      {
#line 1240
                                                                      tmp___53 = strcmp((char const   *)*(argv + i),
                                                                                        "-ttl");
                                                                      }
#line 1240
                                                                      if (tmp___53 == 0) {
                                                                        {
#line 1241
                                                                        i ++;
#line 1242
                                                                        ttl = atoi((char const   *)*(argv + i));
                                                                        }
                                                                      } else {
                                                                        {
#line 1243
                                                                        tmp___52 = strcmp((char const   *)*(argv + i),
                                                                                          "-from");
                                                                        }
#line 1243
                                                                        if (tmp___52 == 0) {
#line 1244
                                                                          i ++;
#line 1245
                                                                          if (map_cnt) {
                                                                            {
#line 1246
                                                                            tmp___34 = atoi((char const   *)*(argv + i));
#line 1246
                                                                            (pids_map + (map_cnt - 1))->start_time = (long )(tmp___34 * 60);
                                                                            }
                                                                          } else {
                                                                            {
#line 1248
                                                                            tmp___35 = atoi((char const   *)*(argv + i));
#line 1248
                                                                            start_time = (long )(tmp___35 * 60);
                                                                            }
                                                                          }
                                                                        } else {
                                                                          {
#line 1250
                                                                          tmp___51 = strcmp((char const   *)*(argv + i),
                                                                                            "-to");
                                                                          }
#line 1250
                                                                          if (tmp___51 == 0) {
#line 1251
                                                                            i ++;
#line 1252
                                                                            if (map_cnt) {
                                                                              {
#line 1253
                                                                              tmp___36 = atoi((char const   *)*(argv + i));
#line 1253
                                                                              (pids_map + (map_cnt - 1))->end_time = (long )(tmp___36 * 60);
                                                                              }
                                                                            } else {
                                                                              {
#line 1255
                                                                              tmp___37 = atoi((char const   *)*(argv + i));
#line 1255
                                                                              end_time = (long )(tmp___37 * 60);
#line 1256
                                                                              secs = (unsigned int )end_time;
                                                                              }
                                                                            }
                                                                          } else {
                                                                            {
#line 1258
                                                                            tmp___50 = strstr((char const   *)*(argv + i),
                                                                                              "-o:");
                                                                            }
#line 1258
                                                                            if ((unsigned long )tmp___50 == (unsigned long )*(argv + i)) {
                                                                              {
#line 1259
                                                                              tmp___41 = strlen((char const   *)*(argv + i));
                                                                              }
#line 1259
                                                                              if (tmp___41 > 3UL) {
                                                                                {
#line 1261
                                                                                tmp___38 = strlen((char const   *)*(argv + i));
#line 1261
                                                                                tmp___39 = malloc(tmp___38 - 2UL);
#line 1261
                                                                                fname = (char *)tmp___39;
                                                                                }
#line 1262
                                                                                if ((unsigned long )fname == (unsigned long )((void *)0)) {
                                                                                  {
#line 1263
                                                                                  fprintf((FILE */* __restrict  */)stderr,
                                                                                          (char const   */* __restrict  */)"Couldn\'t alloc enough memory for this -o: entry, discarding\n");
                                                                                  }
                                                                                } else {
                                                                                  {
#line 1265
                                                                                  strcpy((char */* __restrict  */)fname,
                                                                                         (char const   */* __restrict  */)(*(argv + i) + 3));
#line 1266
                                                                                  tmp___40 = realloc((void *)pids_map,
                                                                                                     sizeof(pids_map_t ) * (unsigned long )(map_cnt + 1));
#line 1266
                                                                                  pids_map = (pids_map_t *)tmp___40;
                                                                                  }
#line 1267
                                                                                  if ((unsigned long )pids_map != (unsigned long )((void *)0)) {
#line 1268
                                                                                    map_cnt ++;
#line 1269
                                                                                    (pids_map + (map_cnt - 1))->pid_cnt = 0;
#line 1270
                                                                                    (pids_map + (map_cnt - 1))->start_time = start_time;
#line 1271
                                                                                    (pids_map + (map_cnt - 1))->end_time = end_time;
#line 1272
                                                                                    j = 0;
                                                                                    {
#line 1272
                                                                                    while (1) {
                                                                                      while_continue___2: /* CIL Label */ ;
#line 1272
                                                                                      if (! (j < 16)) {
#line 1272
                                                                                        goto while_break___2;
                                                                                      }
#line 1272
                                                                                      (pids_map + (map_cnt - 1))->pids[j] = -1;
#line 1272
                                                                                      j ++;
                                                                                    }
                                                                                    while_break___2: /* CIL Label */ ;
                                                                                    }
#line 1273
                                                                                    (pids_map + (map_cnt - 1))->filename = fname;
#line 1275
                                                                                    output_type = 3;
                                                                                  } else {
                                                                                    {
#line 1277
                                                                                    fprintf((FILE */* __restrict  */)stderr,
                                                                                            (char const   */* __restrict  */)"Couldn\'t alloc enough memory for file %s: entry, discarding\n",
                                                                                            fname);
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
                                                                            } else {
                                                                              {
#line 1281
                                                                              tmp___42 = strstr((char const   *)*(argv + i),
                                                                                                ":");
#line 1281
                                                                              ch = tmp___42;
                                                                              }
#line 1281
                                                                              if ((unsigned long )ch != (unsigned long )((void *)0)) {
                                                                                {
#line 1282
                                                                                pid2 = atoi((char const   *)(ch + 1));
#line 1283
                                                                                *(ch + 0) = (char)0;
                                                                                }
                                                                              } else {
#line 1285
                                                                                pid2 = -1;
                                                                              }
                                                                              {
#line 1287
                                                                              pid = atoi((char const   *)*(argv + i));
                                                                              }
#line 1290
                                                                              if (map_cnt) {
#line 1291
                                                                                if (selection_mode == 0) {
#line 1293
                                                                                  found = 0;
#line 1294
                                                                                  j = 0;
                                                                                  {
#line 1294
                                                                                  while (1) {
                                                                                    while_continue___3: /* CIL Label */ ;
#line 1294
                                                                                    if (! (j < 16)) {
#line 1294
                                                                                      goto while_break___3;
                                                                                    }
#line 1295
                                                                                    if ((pids_map + (map_cnt - 1))->pids[j] == pid) {
#line 1295
                                                                                      found = 1;
                                                                                    }
#line 1294
                                                                                    j ++;
                                                                                  }
                                                                                  while_break___3: /* CIL Label */ ;
                                                                                  }
#line 1297
                                                                                  if (found == 0) {
#line 1298
                                                                                    if ((pids_map + (map_cnt - 1))->pid_cnt == 0) {
#line 1299
                                                                                      (pids_map + (map_cnt - 1))->pids[0] = 0;
#line 1300
                                                                                      ((pids_map + (map_cnt - 1))->pid_cnt) ++;
                                                                                    }
#line 1302
                                                                                    if (pid == 8192) {
                                                                                      {
#line 1303
                                                                                      fprintf((FILE */* __restrict  */)stderr,
                                                                                              (char const   */* __restrict  */)"Adding whole transport stream to map n. %d\n",
                                                                                              map_cnt - 1);
#line 1304
                                                                                      memset((void *)(USER_PIDS),
                                                                                             255,
                                                                                             sizeof(PID_BIT_MAP ));
                                                                                      }
                                                                                    }
#line 1306
                                                                                    (pids_map + (map_cnt - 1))->pids[(pids_map + (map_cnt - 1))->pid_cnt] = pid;
#line 1307
                                                                                    ((pids_map + (map_cnt - 1))->pid_cnt) ++;
                                                                                  }
                                                                                } else {
                                                                                  {
#line 1312
                                                                                  tmp___43 = is_string(*(argv + i));
#line 1312
                                                                                  is_progname = tmp___43;
#line 1313
                                                                                  map = pids_map + (map_cnt - 1);
#line 1314
                                                                                  stream_whole_TS = 1;
#line 1315
                                                                                  memset((void *)(USER_PIDS),
                                                                                         255,
                                                                                         sizeof(PID_BIT_MAP ));
#line 1316
                                                                                  found = 0;
                                                                                  }
#line 1317
                                                                                  if (is_progname) {
#line 1318
                                                                                    j = 0;
                                                                                    {
#line 1318
                                                                                    while (1) {
                                                                                      while_continue___4: /* CIL Label */ ;
#line 1318
                                                                                      if (! (j < map->prognames_cnt)) {
#line 1318
                                                                                        goto while_break___4;
                                                                                      }
                                                                                      {
#line 1319
                                                                                      tmp___44 = strcmp((char const   *)*(map->prognames + j),
                                                                                                        (char const   *)*(argv + i));
                                                                                      }
#line 1319
                                                                                      if (! tmp___44) {
#line 1320
                                                                                        found = 1;
                                                                                      }
#line 1318
                                                                                      j ++;
                                                                                    }
                                                                                    while_break___4: /* CIL Label */ ;
                                                                                    }
#line 1322
                                                                                    if (found == 0) {
                                                                                      {
#line 1323
                                                                                      tmp___45 = realloc((void *)map->prognames,
                                                                                                         (unsigned long )(map->prognames_cnt + 1) * sizeof(map->prognames));
#line 1323
                                                                                      map->prognames = (uint8_t **)tmp___45;
#line 1324
                                                                                      (map->prognames_cnt) ++;
#line 1325
                                                                                      tmp___46 = strlen((char const   *)*(argv + i));
#line 1325
                                                                                      tmp___47 = malloc(tmp___46 + 1UL);
#line 1325
                                                                                      *(map->prognames + (map->prognames_cnt - 1)) = (uint8_t *)tmp___47;
#line 1326
                                                                                      strcpy((char */* __restrict  */)*(map->prognames + (map->prognames_cnt - 1)),
                                                                                             (char const   */* __restrict  */)*(argv + i));
                                                                                      }
                                                                                    }
                                                                                  } else {
#line 1330
                                                                                    j = 0;
                                                                                    {
#line 1330
                                                                                    while (1) {
                                                                                      while_continue___5: /* CIL Label */ ;
#line 1330
                                                                                      if (! (j < 16)) {
#line 1330
                                                                                        goto while_break___5;
                                                                                      }
#line 1331
                                                                                      if ((pids_map + (map_cnt - 1))->progs[j] == pid) {
#line 1331
                                                                                        found = 1;
                                                                                      }
#line 1330
                                                                                      j ++;
                                                                                    }
                                                                                    while_break___5: /* CIL Label */ ;
                                                                                    }
#line 1333
                                                                                    if (found == 0) {
#line 1334
                                                                                      tmp___48 = (pids_map + (map_cnt - 1))->progs_cnt;
#line 1334
                                                                                      ((pids_map + (map_cnt - 1))->progs_cnt) ++;
#line 1334
                                                                                      (pids_map + (map_cnt - 1))->progs[tmp___48] = pid;
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
#line 1339
                                                                              if (selection_mode == 0) {
#line 1341
                                                                                found = 0;
#line 1342
                                                                                j = 0;
                                                                                {
#line 1342
                                                                                while (1) {
                                                                                  while_continue___6: /* CIL Label */ ;
#line 1342
                                                                                  if (! (j < npids)) {
#line 1342
                                                                                    goto while_break___6;
                                                                                  }
#line 1343
                                                                                  if (pids[j] == pid) {
#line 1343
                                                                                    found = 1;
                                                                                  }
#line 1342
                                                                                  j ++;
                                                                                }
                                                                                while_break___6: /* CIL Label */ ;
                                                                                }
#line 1345
                                                                                if (found == 0) {
#line 1346
                                                                                  if (npids == 16) {
                                                                                    {
#line 1347
                                                                                    fprintf((FILE */* __restrict  */)stderr,
                                                                                            (char const   */* __restrict  */)"\nSorry, you can only set up to %d filters.\n\n",
                                                                                            16);
                                                                                    }
#line 1348
                                                                                    return (-1);
                                                                                  } else {
#line 1350
                                                                                    pestypes[npids] = (int )pestype;
#line 1351
                                                                                    pestype = (dmx_pes_type_t )20;
#line 1352
                                                                                    tmp___49 = npids;
#line 1352
                                                                                    npids ++;
#line 1352
                                                                                    pids[tmp___49] = pid;
#line 1353
                                                                                    if (pid2 != -1) {
                                                                                      {
#line 1354
                                                                                      hi_mappids[pid] = (unsigned char )(pid2 >> 8);
#line 1355
                                                                                      lo_mappids[pid] = (unsigned char )(pid2 & 255);
#line 1356
                                                                                      fprintf((FILE */* __restrict  */)stderr,
                                                                                              (char const   */* __restrict  */)"Mapping %d to %d\n",
                                                                                              pid,
                                                                                              pid2);
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                }
                                                                              }
                                                                            }
                                                                          }
                                                                        }
                                                                      }
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          } else {
#line 992
            streamtype = 1;
          }
        } else {
#line 990
          streamtype = 0;
        }
      }
#line 986
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 1365
  if (output_type == 0) {
#line 1365
    if (npids != 3) {
      {
#line 1366
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"ERROR: PS requires exactly two PIDS - video and audio.\n");
#line 1367
      exit(1);
      }
    }
  }
#line 1370
  i = 0;
  {
#line 1370
  while (1) {
    while_continue___7: /* CIL Label */ ;
#line 1370
    if (! (i < map_cnt)) {
#line 1370
      goto while_break___7;
    }
#line 1371
    if ((pids_map + i)->filename) {
      {
#line 1373
      f___0 = fopen((char const   */* __restrict  */)(pids_map + i)->filename, (char const   */* __restrict  */)"w+b");
      }
#line 1374
      if ((unsigned long )f___0 != (unsigned long )((void *)0)) {
        {
#line 1375
        (pids_map + i)->fd = fileno(f___0);
#line 1376
        make_nonblock((pids_map + i)->fd);
#line 1377
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Open file %s\n",
                (pids_map + i)->filename);
        }
      } else {
        {
#line 1379
        (pids_map + i)->fd = -1;
#line 1380
        tmp___86 = __errno_location();
#line 1380
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t open file %s, errno:%d\n",
                (pids_map + (map_cnt - 1))->filename, *tmp___86);
        }
      }
    }
#line 1370
    i ++;
  }
  while_break___7: /* CIL Label */ ;
  }
  {
#line 1384
  update_bitmaps();
#line 1386
  tmp___87 = signal(1, & SignalHandler);
  }
#line 1386
  if ((unsigned long )tmp___87 == (unsigned long )((void (*)(int  ))1)) {
    {
#line 1386
    signal(1, (void (*)(int  ))1);
    }
  }
  {
#line 1387
  tmp___88 = signal(2, & SignalHandler);
  }
#line 1387
  if ((unsigned long )tmp___88 == (unsigned long )((void (*)(int  ))1)) {
    {
#line 1387
    signal(2, (void (*)(int  ))1);
    }
  }
  {
#line 1388
  tmp___89 = signal(15, & SignalHandler);
  }
#line 1388
  if ((unsigned long )tmp___89 == (unsigned long )((void (*)(int  ))1)) {
    {
#line 1388
    signal(15, (void (*)(int  ))1);
    }
  }
  {
#line 1389
  tmp___90 = signal(14, & SignalHandler);
  }
#line 1389
  if ((unsigned long )tmp___90 == (unsigned long )((void (*)(int  ))1)) {
    {
#line 1389
    signal(14, (void (*)(int  ))1);
    }
  }
  {
#line 1390
  alarm(5U);
  }
#line 1392
  if (freq___0 != 0UL) {
#line 1392
    if (! use_stdin) {
      {
#line 1393
      tmp___91 = open_fe(& fd_frontend);
      }
#line 1393
      if (tmp___91) {
        {
#line 1394
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Tuning to %ld Hz\n",
                freq___0);
#line 1395
        i = tune_it(fd_frontend, (unsigned int )freq___0, (unsigned int )srate, pol,
                    tone, specInv, diseqc, modulation, HP_CodeRate, TransmissionMode,
                    guardInterval, bandWidth, LP_CodeRate, hier);
        }
      }
    }
  }
#line 1401
  if (map_cnt > 0) {
    {
#line 1402
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
    }
  }
#line 1403
  i = 0;
  {
#line 1403
  while (1) {
    while_continue___8: /* CIL Label */ ;
#line 1403
    if (! (i < map_cnt)) {
#line 1403
      goto while_break___8;
    }
#line 1404
    if (secs == 4294967295U) {
#line 1404
      secs = (unsigned int )(pids_map + i)->end_time;
    } else
#line 1404
    if ((long )secs < (pids_map + i)->end_time) {
#line 1404
      secs = (unsigned int )(pids_map + i)->end_time;
    }
#line 1405
    if ((unsigned long )(pids_map + i)->filename != (unsigned long )((void *)0)) {
      {
#line 1406
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"MAP %d, file %s: From %ld secs, To %ld secs, %d PIDs - ",
              i, (pids_map + i)->filename, (pids_map + i)->start_time, (pids_map + i)->end_time,
              (pids_map + i)->pid_cnt);
      }
    } else {
      {
#line 1408
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"MAP %d, addr %s:%d From %ld secs, To %ld secs, %d PIDs - ",
              i, (pids_map + i)->net, (pids_map + i)->port, (pids_map + i)->start_time,
              (pids_map + i)->end_time, (pids_map + i)->pid_cnt);
      }
    }
#line 1409
    j = 0;
    {
#line 1409
    while (1) {
      while_continue___9: /* CIL Label */ ;
#line 1409
      if (! (j < 16)) {
#line 1409
        goto while_break___9;
      }
#line 1409
      if ((pids_map + i)->pids[j] != -1) {
        {
#line 1409
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)" %d",
                (pids_map + i)->pids[j]);
        }
      }
#line 1409
      j ++;
    }
    while_break___9: /* CIL Label */ ;
    }
    {
#line 1410
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
#line 1403
    i ++;
    }
  }
  while_break___8: /* CIL Label */ ;
  }
  {
#line 1413
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"dvbstream will stop after %d seconds (%d minutes)\n",
          secs, secs / 60U);
  }
#line 1415
  if (stream_whole_TS) {
#line 1416
    npids = 1;
#line 1417
    pids[0] = 8192;
  } else {
#line 1420
    i = 0;
    {
#line 1420
    while (1) {
      while_continue___10: /* CIL Label */ ;
#line 1420
      if (! (i < npids)) {
#line 1420
        goto while_break___10;
      }
#line 1421
      if (pids[i] == 8192) {
#line 1422
        npids = 1;
#line 1423
        pids[0] = 8192;
      }
#line 1420
      i ++;
    }
    while_break___10: /* CIL Label */ ;
    }
  }
#line 1426
  if (use_stdin) {
    {
#line 1427
    fd_dvr = fileno(stdin);
    }
  } else {
#line 1429
    i = 0;
    {
#line 1429
    while (1) {
      while_continue___11: /* CIL Label */ ;
#line 1429
      if (! (i < npids)) {
#line 1429
        goto while_break___11;
      }
      {
#line 1430
      tmp___92 = open((char const   *)demuxdev[card], 2050);
#line 1430
      fd[i] = tmp___92;
      }
#line 1430
      if (tmp___92 < 0) {
        {
#line 1431
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"FD %i: ",
                i);
#line 1432
        perror("DEMUX DEVICE: ");
        }
#line 1433
        return (-1);
      }
#line 1429
      i ++;
    }
    while_break___11: /* CIL Label */ ;
    }
    {
#line 1437
    fd_dvr = open((char const   *)dvrdev[card], 2048);
    }
#line 1437
    if (fd_dvr < 0) {
      {
#line 1438
      perror("DVR DEVICE: ");
      }
#line 1439
      return (-1);
    }
#line 1443
    i = 0;
    {
#line 1443
    while (1) {
      while_continue___12: /* CIL Label */ ;
#line 1443
      if (! (i < npids)) {
#line 1443
        goto while_break___12;
      }
      {
#line 1444
      set_ts_filt(fd[i], (uint16_t )pids[i], (dmx_pes_type_t )pestypes[i]);
#line 1445
      USER_PIDS[pids[i] / 8] = (uint8_t )((int )USER_PIDS[pids[i] / 8] | (1 << pids[i] % 8));
#line 1443
      i ++;
      }
    }
    while_break___12: /* CIL Label */ ;
    }
  }
  {
#line 1449
  gettimeofday((struct timeval */* __restrict  */)(& tv), (__timezone_ptr_t )((struct timezone *)((void *)0)));
#line 1450
  real_start_time = tv.tv_sec;
#line 1451
  now = 0L;
  }
#line 1453
  if (do_analyse) {
    {
#line 1454
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Analysing PIDS\n");
    }
  } else {
#line 1456
    if (to_stdout) {
      {
#line 1457
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Output to stdout\n");
      }
    } else
#line 1459
    if (! map_cnt) {
      {
#line 1460
      ttl = 2;
#line 1461
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Using %s:%d:%d\n",
              ipOut, portOut, ttl);
#line 1464
      socketOut = makesocket(ipOut, (unsigned short )portOut, ttl, & sOut);
      }
#line 1466
      if (output_type == 1) {
#line 1466
        tmp___93 = 33;
      } else {
#line 1466
        tmp___93 = 34;
      }
      {
#line 1466
      initrtp(& hdr, tmp___93, streamtype);
#line 1467
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"version=%X\n",
              hdr.b.v);
      }
    }
#line 1469
    if (npids == 1) {
#line 1469
      tmp___94 = "";
    } else {
#line 1469
      tmp___94 = "s";
    }
    {
#line 1469
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Streaming %d stream%s\n",
            npids, tmp___94);
    }
  }
#line 1472
  if (output_type == 0) {
    {
#line 1473
    init_ipack(& pa, 2048, & my_write_out, 1);
#line 1474
    init_ipack(& pv, 2048, & my_write_out, 1);
    }
  }
#line 1478
  free_bytes = buf___5;
#line 1509
  connectionOpen = 0;
#line 1510
  ns = -1;
#line 1511
  pfds[0].fd = fd_dvr;
#line 1512
  pfds[0].events = (short)3;
#line 1513
  pfds[1].events = (short)3;
  {
#line 1515
  while (1) {
    while_continue___13: /* CIL Label */ ;
#line 1515
    if (! (! Interrupted)) {
#line 1515
      goto while_break___13;
    }
#line 1517
    if (ns == -1) {
      {
#line 1518
      poll(pfds, (nfds_t )1, 500);
      }
    } else {
      {
#line 1520
      pfds[1].fd = ns;
#line 1521
      poll(pfds, (nfds_t )2, 500);
      }
    }
    {
#line 1524
    process_telnet();
    }
#line 1526
    if (output_type == 1) {
      {
#line 1528
      tmp___96 = read(fd_dvr, (void *)free_bytes, (size_t )188);
#line 1528
      bytes_read = (int )tmp___96;
      }
#line 1528
      if (bytes_read > 0) {
#line 1529
        if (bytes_read != 188) {
          {
#line 1530
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"No bytes left to read - aborting\n");
          }
#line 1531
          goto while_break___13;
        }
#line 1534
        pid = (((int )*(free_bytes + 1) & 31) << 8) | (int )*(free_bytes + 2);
#line 1535
        *(free_bytes + 1) = (unsigned char )(((int )*(free_bytes + 1) & 224) | (int )hi_mappids[pid]);
#line 1536
        *(free_bytes + 2) = lo_mappids[pid];
#line 1537
        free_bytes += bytes_read;
#line 1540
        if ((free_bytes + 188) - buf___5 > 1460L) {
          {
#line 1541
          tmp___95 = getmsec();
#line 1541
          hdr.timestamp = (int )(tmp___95 * 90L);
          }
#line 1542
          if (to_stdout) {
            {
#line 1543
            write(1, (void const   *)(buf___5), (size_t )(free_bytes - buf___5));
            }
          } else {
            {
#line 1545
            sendrtp2(socketOut, & sOut, & hdr, (char *)(buf___5), (int )(free_bytes - buf___5));
            }
          }
#line 1547
          free_bytes = buf___5;
        }
#line 1549
        count ++;
      }
    } else
#line 1551
    if (output_type == 0) {
      {
#line 1552
      tmp___97 = read(fd_dvr, (void *)(buf___5), (size_t )188);
      }
#line 1552
      if (tmp___97 > 0L) {
        {
#line 1553
        my_ts_to_ps(buf___5, (uint16_t )pids[1], (uint16_t )pids[2]);
        }
      } else
#line 1554
      if (use_stdin) {
#line 1554
        goto while_break___13;
      }
    } else
#line 1555
    if (output_type == 3) {
      {
#line 1557
      tmp___98 = read(fd_dvr, (void *)(buf___5), (size_t )188);
#line 1557
      bytes_read___0 = (int )tmp___98;
      }
#line 1558
      if (bytes_read___0 > 0) {
#line 1559
        if ((int )buf___5[0] == 71) {
#line 1562
          pid___0 = (((int )buf___5[1] & 31) << 8) | (int )buf___5[2];
#line 1563
          if ((int )SI_PIDS[pid___0 / 8] & (1 << pid___0 % 8)) {
            {
#line 1563
            parse_ts_packet(buf___5);
            }
          }
#line 1564
          if ((unsigned long )pids_map != (unsigned long )((void *)0)) {
#line 1565
            i___0 = 0;
            {
#line 1565
            while (1) {
              while_continue___14: /* CIL Label */ ;
#line 1565
              if (! (i___0 < map_cnt)) {
#line 1565
                goto while_break___14;
              }
#line 1566
              if ((pids_map + i___0)->start_time == -1L) {
#line 1566
                goto _L___0;
              } else
#line 1566
              if ((pids_map + i___0)->start_time <= now) {
                _L___0: /* CIL Label */ 
#line 1566
                if ((pids_map + i___0)->end_time == -1L) {
#line 1566
                  goto _L;
                } else
#line 1566
                if ((pids_map + i___0)->end_time >= now) {
                  _L: /* CIL Label */ 
#line 1568
                  if ((int )(pids_map + i___0)->pidmap[pid___0 / 8] & (1 << pid___0 % 8)) {
                    {
#line 1569
                    tmp___99 = __errno_location();
#line 1569
                    *tmp___99 = 0;
                    }
#line 1570
                    if ((pids_map + i___0)->filename) {
                      {
#line 1571
                      write((pids_map + i___0)->fd, (void const   *)(buf___5), (size_t )188);
                      }
                    } else {
#line 1573
                      if ((pids_map + i___0)->pos + 188 > 1460) {
                        {
#line 1574
                        tmp___100 = getmsec();
#line 1574
                        hdr.timestamp = (int )(tmp___100 * 90L);
#line 1575
                        sendrtp2((pids_map + i___0)->socket, & (pids_map + i___0)->sOut,
                                 & (pids_map + i___0)->hdr, (char *)((pids_map + i___0)->buf),
                                 (pids_map + i___0)->pos);
#line 1576
                        (pids_map + i___0)->pos = 0;
                        }
                      }
                      {
#line 1579
                      memcpy((void */* __restrict  */)(& (pids_map + i___0)->buf[(pids_map + i___0)->pos]),
                             (void const   */* __restrict  */)(buf___5), (size_t )bytes_read___0);
#line 1580
                      (pids_map + i___0)->pos += bytes_read___0;
                      }
                    }
                  }
                }
              }
#line 1565
              i___0 ++;
            }
            while_break___14: /* CIL Label */ ;
            }
          }
        } else {
          {
#line 1587
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"NON 0X47\n");
          }
        }
      } else
#line 1590
      if (use_stdin) {
#line 1590
        goto while_break___13;
      }
    } else
#line 1592
    if (do_analyse) {
      {
#line 1593
      tmp___101 = read(fd_dvr, (void *)(buf___5), (size_t )188);
      }
#line 1593
      if (tmp___101 > 0L) {
#line 1594
        pid = (((int )buf___5[1] & 31) << 8) | (int )buf___5[2];
#line 1595
        (counts[pid]) ++;
      }
    }
#line 1599
    if (secs != 4294967295U) {
#line 1599
      if ((long )secs <= now) {
#line 1599
        Interrupted = 1;
      }
    }
  }
  while_break___13: /* CIL Label */ ;
  }
#line 1602
  if (Interrupted) {
    {
#line 1603
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Caught signal %d - closing cleanly.\n",
            Interrupted);
    }
  }
#line 1606
  if (ns != -1) {
    {
#line 1606
    close(ns);
    }
  }
  {
#line 1607
  close(socketIn);
  }
#line 1609
  if (! to_stdout) {
#line 1609
    if (! map_cnt) {
      {
#line 1609
      close(socketOut);
      }
    }
  }
#line 1610
  if (! use_stdin) {
#line 1611
    i = 0;
    {
#line 1611
    while (1) {
      while_continue___15: /* CIL Label */ ;
#line 1611
      if (! (i < npids)) {
#line 1611
        goto while_break___15;
      }
      {
#line 1611
      close(fd[i]);
#line 1611
      i ++;
      }
    }
    while_break___15: /* CIL Label */ ;
    }
    {
#line 1612
    close(fd_dvr);
#line 1613
    close(fd_frontend);
    }
  }
#line 1616
  if (do_analyse) {
#line 1617
    i = 0;
    {
#line 1617
    while (1) {
      while_continue___16: /* CIL Label */ ;
#line 1617
      if (! (i < 8192)) {
#line 1617
        goto while_break___16;
      }
#line 1618
      if (counts[i]) {
#line 1619
        f = (((double )counts[i] * 184.0) * 8.0) / (((double )secs * 1024.0) * 1024.0);
#line 1620
        if (f >= 1.0) {
          {
#line 1621
          fprintf((FILE */* __restrict  */)stdout, (char const   */* __restrict  */)"%d,%.3f Mbit/s\n",
                  i, f);
          }
        } else {
          {
#line 1623
          fprintf((FILE */* __restrict  */)stdout, (char const   */* __restrict  */)"%d,%.0f kbit/s\n",
                  i, f * (double )1024);
          }
        }
      }
#line 1617
      i ++;
    }
    while_break___16: /* CIL Label */ ;
    }
  }
#line 1629
  return (0);
}
}
/* compiler builtin: 
   int __builtin_va_arg_pack(void) ;  */
#line 460 "/usr/include/unistd.h"
extern int usleep(__useconds_t __useconds ) ;
#line 31 "/usr/include/error.h"
__inline extern void __attribute__((__gnu_inline__))  ( /* format attribute */ __attribute__((__always_inline__)) error)(int __status ,
                                                                                                                         int __errnum ,
                                                                                                                         char const   *__format 
                                                                                                                         , ...) ;
#line 34
__inline extern void __attribute__((__gnu_inline__))  ( /* format attribute */ __attribute__((__always_inline__)) error_at_line)(int __status ,
                                                                                                                                 int __errnum ,
                                                                                                                                 char const   *__fname ,
                                                                                                                                 unsigned int __line ,
                                                                                                                                 char const   *__format 
                                                                                                                                 , ...) ;
#line 24 "/usr/include/x86_64-linux-gnu/bits/error.h"
extern void ( /* format attribute */  __error_alias)(int __status , int __errnum ,
                                                     char const   *__format  , ...)  __asm__("error")  ;
#line 36 "/usr/include/x86_64-linux-gnu/bits/error.h"
__inline extern void __attribute__((__gnu_inline__))  ( /* format attribute */ __attribute__((__always_inline__)) error)(int __status ,
                                                                                                                         int __errnum ,
                                                                                                                         char const   *__format 
                                                                                                                         , ...) 
{ 


  {
  {
#line 42
  __error_alias(__status, __errnum, __format, __builtin_va_arg_pack());
  }
#line 43
  return;
}
}
#line 46
extern void ( /* format attribute */  __error_at_line_alias)(int __status , int __errnum ,
                                                             char const   *__fname ,
                                                             unsigned int __line ,
                                                             char const   *__format 
                                                             , ...)  __asm__("error_at_line")  ;
#line 63 "/usr/include/x86_64-linux-gnu/bits/error.h"
__inline extern void __attribute__((__gnu_inline__))  ( /* format attribute */ __attribute__((__always_inline__)) error_at_line)(int __status ,
                                                                                                                                 int __errnum ,
                                                                                                                                 char const   *__fname ,
                                                                                                                                 unsigned int __line ,
                                                                                                                                 char const   *__format 
                                                                                                                                 , ...) 
{ 


  {
  {
#line 71
  __error_at_line_alias(__status, __errnum, __fname, __line, __format, __builtin_va_arg_pack());
  }
#line 73
  return;
}
}
#line 192 "/usr/include/time.h"
extern  __attribute__((__nothrow__)) time_t ( __attribute__((__leaf__)) time)(time_t *__timer ) ;
#line 39 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
void print_status(FILE *fd___0 , fe_status_t festatus ) 
{ 


  {
  {
#line 40
  fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)"FE_STATUS:");
  }
#line 41
  if ((unsigned int )festatus & 1U) {
    {
#line 41
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_HAS_SIGNAL");
    }
  }
#line 42
  if ((unsigned int )festatus & 32U) {
    {
#line 42
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_TIMEDOUT");
    }
  }
#line 43
  if ((unsigned int )festatus & 16U) {
    {
#line 43
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_HAS_LOCK");
    }
  }
#line 44
  if ((unsigned int )festatus & 2U) {
    {
#line 44
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_HAS_CARRIER");
    }
  }
#line 45
  if ((unsigned int )festatus & 4U) {
    {
#line 45
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_HAS_VITERBI");
    }
  }
#line 46
  if ((unsigned int )festatus & 8U) {
    {
#line 46
    fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)" FE_HAS_SYNC");
    }
  }
  {
#line 47
  fprintf((FILE */* __restrict  */)fd___0, (char const   */* __restrict  */)"\n");
  }
#line 48
  return;
}
}
#line 56 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
static int diseqc_send_msg(int fd___0 , fe_sec_voltage_t v , struct diseqc_cmd *cmd ,
                           fe_sec_tone_mode_t t , unsigned char sat_no ) 
{ 
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  {
#line 59
  tmp = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 66U), 1);
  }
#line 59
  if (tmp < 0) {
#line 60
    return (-1);
  }
  {
#line 61
  tmp___0 = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 67U), (unsigned int )v);
  }
#line 61
  if (tmp___0 < 0) {
#line 62
    return (-1);
  }
  {
#line 63
  usleep((__useconds_t )15000);
  }
#line 64
  if ((int )sat_no >= 1) {
#line 64
    if ((int )sat_no <= 4) {
      {
#line 66
      tmp___1 = ioctl(fd___0, (unsigned long )(((1U << 30) | (unsigned int )(111 << 8)) | 63U) | (sizeof(struct dvb_diseqc_master_cmd ) << 16),
                      & cmd->cmd);
      }
#line 66
      if (tmp___1 < 0) {
#line 67
        return (-1);
      }
      {
#line 68
      usleep(cmd->wait * 1000U);
#line 69
      usleep((__useconds_t )15000);
      }
    } else {
#line 64
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    {
#line 73
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"SETTING SIMPLE %c BURST\n",
            (int )sat_no);
    }
#line 74
    if ((int )sat_no == 66) {
#line 74
      tmp___2 = 1;
    } else {
#line 74
      tmp___2 = 0;
    }
    {
#line 74
    tmp___3 = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 65U), tmp___2);
    }
#line 74
    if (tmp___3 < 0) {
#line 75
      return (-1);
    }
    {
#line 76
    usleep((__useconds_t )15000);
    }
  }
  {
#line 78
  tmp___4 = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 66U), (unsigned int )t);
  }
#line 78
  if (tmp___4 < 0) {
#line 79
    return (-1);
  }
#line 81
  return (0);
}
}
#line 88 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
static int do_diseqc(int fd___0 , unsigned char sat_no , int polv , int hi_lo ) 
{ 
  struct diseqc_cmd cmd ;
  unsigned char d ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  char const   *tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;

  {
#line 90
  cmd.cmd.msg[0] = (__u8 )224;
#line 90
  cmd.cmd.msg[1] = (__u8 )16;
#line 90
  cmd.cmd.msg[2] = (__u8 )56;
#line 90
  cmd.cmd.msg[3] = (__u8 )240;
#line 90
  cmd.cmd.msg[4] = (__u8 )0;
#line 90
  cmd.cmd.msg[5] = (__u8 )0;
#line 90
  cmd.cmd.msg_len = (__u8 )4;
#line 90
  cmd.wait = (uint32_t )0;
#line 92
  if ((int )sat_no != 0) {
#line 94
    d = sat_no;
#line 99
    if (polv) {
#line 99
      tmp = 0;
    } else {
#line 99
      tmp = 2;
    }
#line 99
    if (hi_lo) {
#line 99
      tmp___0 = 1;
    } else {
#line 99
      tmp___0 = 0;
    }
#line 99
    cmd.cmd.msg[3] = (__u8 )(240 | ((((int )sat_no * 4 & 15) | tmp) | tmp___0));
#line 102
    if (hi_lo) {
#line 102
      tmp___1 = 0;
    } else {
#line 102
      tmp___1 = 1;
    }
#line 102
    if (polv) {
#line 102
      tmp___2 = 0;
    } else {
#line 102
      tmp___2 = 1;
    }
    {
#line 102
    tmp___3 = diseqc_send_msg(fd___0, (fe_sec_voltage_t )tmp___2, & cmd, (fe_sec_tone_mode_t )tmp___1,
                              d);
    }
#line 102
    return (tmp___3);
  } else {
#line 110
    if (polv) {
#line 110
      tmp___4 = 13;
    } else {
#line 110
      tmp___4 = 18;
    }
#line 110
    if (hi_lo) {
#line 110
      tmp___5 = "ON";
    } else {
#line 110
      tmp___5 = "OFF";
    }
    {
#line 110
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Setting only tone %s and voltage %dV\n",
            tmp___5, tmp___4);
    }
#line 112
    if (polv) {
#line 112
      tmp___6 = 0;
    } else {
#line 112
      tmp___6 = 1;
    }
    {
#line 112
    tmp___7 = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 67U), tmp___6);
    }
#line 112
    if (tmp___7 < 0) {
#line 113
      return (-1);
    }
#line 115
    if (hi_lo) {
#line 115
      tmp___8 = 0;
    } else {
#line 115
      tmp___8 = 1;
    }
    {
#line 115
    tmp___9 = ioctl(fd___0, (unsigned long )((unsigned int )(111 << 8) | 66U), tmp___8);
    }
#line 115
    if (tmp___9 < 0) {
#line 116
      return (-1);
    }
    {
#line 118
    usleep((__useconds_t )15000);
    }
#line 120
    return (0);
  }
}
}
#line 124 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
int check_status(int fd_frontend___0 , int type , struct dvb_frontend_parameters *feparams ,
                 unsigned int base ) 
{ 
  int32_t strength ;
  fe_status_t festatus ;
  struct pollfd pfd[1] ;
  int locks ;
  int ok ;
  time_t tm1 ;
  time_t tm2 ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;

  {
  {
#line 128
  locks = 0;
#line 128
  ok = 0;
#line 131
  tmp = ioctl(fd_frontend___0, (unsigned long )(((1U << 30) | (unsigned int )(111 << 8)) | 76U) | (sizeof(struct dvb_frontend_parameters ) << 16),
              feparams);
  }
#line 131
  if (tmp < 0) {
    {
#line 132
    perror("ERROR tuning channel\n");
    }
#line 133
    return (-1);
  }
  {
#line 136
  pfd[0].fd = fd_frontend___0;
#line 137
  pfd[0].events = (short)2;
#line 139
  tm2 = time((time_t *)((void *)0));
#line 139
  tm1 = tm2;
#line 140
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Getting frontend status\n");
  }
  {
#line 141
  while (1) {
    while_continue: /* CIL Label */ ;
#line 141
    if (! (! ok)) {
#line 141
      goto while_break;
    }
    {
#line 142
    festatus = (fe_status_t )0;
#line 143
    tmp___1 = poll(pfd, (nfds_t )1, 3000);
    }
#line 143
    if (tmp___1 > 0) {
#line 144
      if ((int )pfd[0].revents & 2) {
        {
#line 145
        tmp___0 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 69U) | (sizeof(fe_status_t ) << 16),
                        & festatus);
        }
#line 145
        if (tmp___0 >= 0) {
#line 146
          if ((unsigned int )festatus & 16U) {
#line 147
            locks ++;
          }
        }
      }
    }
    {
#line 150
    usleep((__useconds_t )10000);
#line 151
    tm2 = time((time_t *)((void *)0));
    }
#line 152
    if ((unsigned int )festatus & 32U) {
#line 153
      ok = 1;
    } else
#line 152
    if (locks >= 2) {
#line 153
      ok = 1;
    } else
#line 152
    if (tm2 - tm1 >= 3L) {
#line 153
      ok = 1;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 156
  if ((unsigned int )festatus & 16U) {
    {
#line 157
    tmp___2 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 77U) | (sizeof(struct dvb_frontend_parameters ) << 16),
                    feparams);
    }
#line 157
    if (tmp___2 >= 0) {
      {
#line 159
      if (type == 2) {
#line 159
        goto case_2;
      }
#line 162
      if (type == 0) {
#line 162
        goto case_0;
      }
#line 168
      if (type == 1) {
#line 168
        goto case_1;
      }
#line 179
      goto switch_default;
      case_2: /* CIL Label */ 
      {
#line 160
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Event:  Frequency: %d\n",
              feparams->frequency);
      }
#line 161
      goto switch_break;
      case_0: /* CIL Label */ 
      {
#line 163
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Event:  Frequency: %d\n",
              feparams->frequency + base);
#line 164
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"        SymbolRate: %d\n",
              feparams->u.qpsk.symbol_rate);
#line 165
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"        FEC_inner:  %d\n",
              (unsigned int )feparams->u.qpsk.fec_inner);
#line 166
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
      }
#line 167
      goto switch_break;
      case_1: /* CIL Label */ 
      {
#line 169
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Event:  Frequency: %d\n",
              feparams->frequency);
#line 170
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"        SymbolRate: %d\n",
              feparams->u.qpsk.symbol_rate);
#line 171
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"        FEC_inner:  %d\n",
              (unsigned int )feparams->u.qpsk.fec_inner);
      }
#line 172
      goto switch_break;
      switch_default: /* CIL Label */ 
#line 180
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
    }
    {
#line 184
    strength = 0;
#line 185
    tmp___3 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 70U) | (sizeof(__u32 ) << 16),
                    & strength);
    }
#line 185
    if (tmp___3 >= 0) {
      {
#line 186
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Bit error rate: %d\n",
              strength);
      }
    }
    {
#line 188
    strength = 0;
#line 189
    tmp___4 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 71U) | (sizeof(__u16 ) << 16),
                    & strength);
    }
#line 189
    if (tmp___4 >= 0) {
      {
#line 190
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Signal strength: %d\n",
              strength);
      }
    }
    {
#line 192
    strength = 0;
#line 193
    tmp___5 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 72U) | (sizeof(__u16 ) << 16),
                    & strength);
    }
#line 193
    if (tmp___5 >= 0) {
      {
#line 194
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"SNR: %d\n",
              strength);
      }
    }
    {
#line 196
    strength = 0;
#line 197
    tmp___6 = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 73U) | (sizeof(__u32 ) << 16),
                    & strength);
    }
#line 197
    if (tmp___6 >= 0) {
      {
#line 198
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"UNC: %d\n",
              strength);
      }
    }
    {
#line 200
    print_status(stderr, festatus);
    }
  } else {
    {
#line 202
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not able to lock to the signal on the given frequency\n");
    }
#line 203
    return (-1);
  }
#line 205
  return (0);
}
}
#line 208 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/tune.c"
int tune_it(int fd_frontend___0 , unsigned int freq___0 , unsigned int srate , char pol___0 ,
            int tone___0 , fe_spectral_inversion_t specInv___0 , unsigned char diseqc___0 ,
            fe_modulation_t modulation___0 , fe_code_rate_t HP_CodeRate___0 , fe_transmit_mode_t TransmissionMode___0 ,
            fe_guard_interval_t guardInterval___0 , fe_bandwidth_t bandwidth , fe_code_rate_t LP_CodeRate___0 ,
            fe_hierarchy_t hier___0 ) 
{ 
  int res ;
  int hi_lo ;
  int dfd ;
  unsigned int base ;
  struct dvb_frontend_parameters feparams ;
  struct dvb_frontend_info fe_info ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  char const   *tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;

  {
  {
#line 214
  tmp = ioctl(fd_frontend___0, (unsigned long )(((2U << 30) | (unsigned int )(111 << 8)) | 61U) | (sizeof(struct dvb_frontend_info ) << 16),
              & fe_info);
#line 214
  res = tmp < 0;
  }
#line 214
  if (res) {
    {
#line 215
    perror("FE_GET_INFO: ");
    }
#line 216
    return (-1);
  }
  {
#line 219
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Using DVB card \"%s\", freq=%d\n",
          fe_info.name, freq___0);
  }
#line 221
  if (freq___0 < 1000000U) {
#line 221
    freq___0 = (unsigned int )((unsigned long )freq___0 * 1000UL);
  }
  {
#line 223
  if ((unsigned int )fe_info.type == 2U) {
#line 223
    goto case_2;
  }
#line 236
  if ((unsigned int )fe_info.type == 0U) {
#line 236
    goto case_0;
  }
#line 267
  if ((unsigned int )fe_info.type == 1U) {
#line 267
    goto case_1;
  }
#line 282
  goto switch_default;
  case_2: /* CIL Label */ 
#line 224
  feparams.frequency = freq___0;
#line 225
  feparams.inversion = (fe_spectral_inversion_t )0;
#line 226
  feparams.u.ofdm.bandwidth = bandwidth;
#line 227
  feparams.u.ofdm.code_rate_HP = HP_CodeRate___0;
#line 228
  feparams.u.ofdm.code_rate_LP = LP_CodeRate___0;
#line 229
  feparams.u.ofdm.constellation = modulation___0;
#line 230
  feparams.u.ofdm.transmission_mode = TransmissionMode___0;
#line 231
  feparams.u.ofdm.guard_interval = guardInterval___0;
#line 232
  feparams.u.ofdm.hierarchy_information = hier___0;
#line 233
  if ((unsigned int )bandwidth == 0U) {
#line 233
    tmp___1 = 8;
  } else {
#line 233
    if ((unsigned int )bandwidth == 1U) {
#line 233
      tmp___0 = 7;
    } else {
#line 233
      tmp___0 = 6;
    }
#line 233
    tmp___1 = tmp___0;
  }
  {
#line 233
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"tuning DVB-T (%s) to %d Hz, Bandwidth: %d\n",
          "in United Kingdom", freq___0, tmp___1);
  }
#line 235
  goto switch_break;
  case_0: /* CIL Label */ 
  {
#line 237
  tmp___2 = toupper((int )pol___0);
#line 237
  pol___0 = (char )tmp___2;
  }
#line 238
  if (freq___0 > 2200000U) {
#line 239
    if (freq___0 < SLOF) {
#line 240
      feparams.frequency = freq___0 - LOF1;
#line 241
      hi_lo = 0;
#line 242
      base = LOF1;
    } else {
#line 244
      feparams.frequency = freq___0 - LOF2;
#line 245
      hi_lo = 1;
#line 246
      base = LOF2;
    }
  } else {
#line 249
    feparams.frequency = freq___0;
#line 250
    base = 0U;
  }
#line 253
  if (tone___0 == 0) {
#line 253
    tmp___3 = "on";
  } else {
#line 253
    tmp___3 = "off";
  }
  {
#line 253
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"tuning DVB-S to Freq: %u, Pol:%c Srate=%d, 22kHz tone=%s, LNB: %d, SLOF %d, LOF1: %d, LOF2: %d\n",
          feparams.frequency, (int )pol___0, srate, tmp___3, (int )diseqc___0, (unsigned long )SLOF / 1000UL,
          (unsigned long )LOF1 / 1000UL, (unsigned long )LOF2 / 1000UL);
#line 255
  feparams.inversion = specInv___0;
#line 256
  feparams.u.qpsk.symbol_rate = srate;
#line 257
  feparams.u.qpsk.fec_inner = (fe_code_rate_t )9;
#line 258
  dfd = fd_frontend___0;
  }
#line 260
  if ((int )pol___0 == 86) {
#line 260
    tmp___4 = 1;
  } else {
#line 260
    tmp___4 = 0;
  }
  {
#line 260
  tmp___5 = do_diseqc(dfd, diseqc___0, tmp___4, hi_lo);
  }
#line 260
  if (tmp___5 == 0) {
    {
#line 261
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"DISEQC SETTING SUCCEDED\n");
    }
  } else {
    {
#line 263
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"DISEQC SETTING FAILED\n");
    }
#line 264
    return (-1);
  }
#line 266
  goto switch_break;
  case_1: /* CIL Label */ 
  {
#line 268
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"tuning DVB-C to %d, srate=%d\n",
          freq___0, srate);
#line 269
  feparams.frequency = freq___0;
#line 270
  feparams.inversion = specInv___0;
#line 271
  feparams.u.qam.symbol_rate = srate;
#line 272
  feparams.u.qam.fec_inner = (fe_code_rate_t )9;
#line 273
  feparams.u.qam.modulation = modulation___0;
  }
#line 274
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 283
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Unknown FE type. Aborting\n");
#line 284
  exit(-1);
  }
  switch_break: /* CIL Label */ ;
  }
  {
#line 286
  usleep((__useconds_t )100000);
#line 288
  tmp___6 = check_status(fd_frontend___0, (int )fe_info.type, & feparams, base);
  }
#line 288
  return (tmp___6);
}
}
#line 337 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) __off64_t ( __attribute__((__leaf__)) lseek)(int __fd ,
                                                                                  __off64_t __offset ,
                                                                                  int __whence )  __asm__("lseek64")  ;
#line 40 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.h"
int ring_init(ringbuffy *rbuf , int size ) ;
#line 42
int ring_write(ringbuffy *rbuf , char *data , int count ) ;
#line 43
int ring_read(ringbuffy *rbuf , char *data , int count ) ;
#line 45
int ring_read_file(ringbuffy *rbuf , int fd___0 , int count ) ;
#line 46
int ring_rest(ringbuffy *rbuf ) ;
#line 47
int ring_peek(ringbuffy *rbuf , char *data , int count , long off ) ;
#line 71 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
unsigned int trans_pts_dts(unsigned char *pts ) ;
#line 168
void init_pes(pes_packet *p ) ;
#line 169
void kill_pes(pes_packet *p ) ;
#line 174
int read_pes(int f , pes_packet *p ) ;
#line 377
int write_pes_header(unsigned char id , int length , long PTS , unsigned char *obuf ,
                     int stuffing ) ;
#line 380
int write_ps_header(uint8_t *buf___5 , uint32_t SCR___0 , long muxr___0 , uint8_t audio_bound ,
                    uint8_t fixed , uint8_t CSPS , uint8_t audio_lock , uint8_t video_lock ,
                    uint8_t video_bound , uint8_t stream1 , uint8_t buffer1_scale ,
                    uint32_t buffer1_size , uint8_t stream2 , uint8_t buffer2_scale ,
                    uint32_t buffer2_size ) ;
#line 144 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.h"
void remux(int fin , int fout , int pack_size , int mult ) ;
#line 145
void remux2(int fdin , int fdout ) ;
#line 159 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
void init_p2p(p2p *p , void (*func)(uint8_t *buf , int count , p2p *p ) , int repack ) ;
#line 161
void get_pes(uint8_t *buf___5 , int count , p2p *p , void (*func)(p2p *p ) ) ;
#line 163
void pes_repack(p2p *p ) ;
#line 3 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
unsigned int bitrates[3][16]  = { {        0U,        32U,        64U,        96U, 
            128U,        160U,        192U,        224U, 
            256U,        288U,        320U,        352U, 
            384U,        416U,        448U,        0U}, 
   {        0U,        32U,        48U,        56U, 
            64U,        80U,        96U,        112U, 
            128U,        160U,        192U,        224U, 
            256U,        320U,        384U,        0U}, 
   {        0U,        32U,        40U,        48U, 
            56U,        64U,        80U,        96U, 
            112U,        128U,        160U,        192U, 
            224U,        256U,        320U,        0U}};
#line 8 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
uint32_t freq[4]  = {      (uint32_t )441,      (uint32_t )480,      (uint32_t )320,      (uint32_t )0};
#line 9 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
static uint32_t samples[4]  = {      (uint32_t )384,      (uint32_t )1152,      (uint32_t )0,      (uint32_t )0};
#line 10 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
char *frames[3]  = {      (char *)"I-Frame",      (char *)"P-Frame",      (char *)"B-Frame"};
#line 13 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void copy_ptslm(PTS_List *a , PTS_List *b ) 
{ 


  {
#line 15
  a->pos = b->pos;
#line 16
  a->PTS = b->PTS;
#line 17
  a->dts = b->dts;
#line 18
  a->spos = b->spos;
#line 19
  return;
}
}
#line 21 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void clear_ptslm(PTS_List *a ) 
{ 


  {
#line 23
  a->pos = 0;
#line 24
  a->PTS = (u32 )0;
#line 25
  a->dts = (u32 )0;
#line 26
  a->spos = 0;
#line 27
  return;
}
}
#line 29 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void init_ptsl(PTS_List *ptsl ) 
{ 
  int i ;

  {
#line 32
  i = 0;
  {
#line 32
  while (1) {
    while_continue: /* CIL Label */ ;
#line 32
    if (! (i < 8192)) {
#line 32
      goto while_break;
    }
    {
#line 33
    clear_ptslm(ptsl + i);
#line 32
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 35
  return;
}
}
#line 37 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int del_pts(PTS_List *ptsl , int pos , int nr ) 
{ 
  int i ;
  int del ;

  {
#line 40
  del = 0;
#line 42
  i = 0;
  {
#line 42
  while (1) {
    while_continue: /* CIL Label */ ;
#line 42
    if (! (i < nr - 1)) {
#line 42
      goto while_break;
    }
#line 43
    if (pos > (ptsl + i)->pos) {
#line 43
      if (pos >= (ptsl + (i + 1))->pos) {
#line 43
        del ++;
      }
    }
#line 42
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 46
  if (del) {
#line 47
    i = 0;
    {
#line 47
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 47
      if (! (i < nr - del)) {
#line 47
        goto while_break___0;
      }
      {
#line 48
      copy_ptslm(ptsl + i, ptsl + (i + del));
#line 47
      i ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 51
  return (nr - del);
}
}
#line 54 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int del_ptss(PTS_List *ptsl , int pts , int *nb ) 
{ 
  int i ;
  int del ;
  int sum ;
  int nr ;

  {
#line 57
  del = 0;
#line 58
  sum = 0;
#line 59
  nr = *nb;
#line 61
  i = 0;
  {
#line 61
  while (1) {
    while_continue: /* CIL Label */ ;
#line 61
    if (! (i < nr)) {
#line 61
      goto while_break;
    }
#line 62
    if ((u32 )pts > (ptsl + i)->PTS) {
#line 63
      del ++;
#line 64
      sum += (ptsl + i)->pos;
    }
#line 61
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 68
  if (del) {
#line 69
    i = 0;
    {
#line 69
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 69
      if (! (i < nr - del)) {
#line 69
        goto while_break___0;
      }
      {
#line 70
      copy_ptslm(ptsl + i, ptsl + (i + del));
#line 69
      i ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 73
  *nb = nr - del;
#line 74
  return (sum);
}
}
#line 77 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int add_pts(PTS_List *ptsl , uint32_t pts , int pos , int spos , int nr , uint32_t dts ) 
{ 
  int i ;

  {
#line 81
  i = 0;
  {
#line 81
  while (1) {
    while_continue: /* CIL Label */ ;
#line 81
    if (! (i < nr)) {
#line 81
      goto while_break;
    }
#line 81
    if (spos) {
#line 81
      if ((ptsl + i)->pos == pos) {
#line 81
        return (nr);
      }
    }
#line 81
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 82
  if (nr == 8192) {
    {
#line 83
    nr = del_pts(ptsl, (ptsl + 1)->pos + 1, nr);
    }
  } else {
#line 84
    nr ++;
  }
#line 85
  i = nr - 1;
#line 87
  (ptsl + i)->pos = pos;
#line 88
  (ptsl + i)->spos = spos;
#line 89
  (ptsl + i)->PTS = pts;
#line 90
  (ptsl + i)->dts = dts;
#line 91
  return (nr);
}
}
#line 94 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void add_vpts(Remux *rem , uint8_t *pts ) 
{ 
  uint32_t PTS ;
  unsigned int tmp ;
  uint32_t tmp___0 ;

  {
  {
#line 96
  tmp = trans_pts_dts(pts);
#line 96
  tmp___0 = ntohl(tmp);
#line 96
  PTS = tmp___0;
#line 97
  rem->vptsn = add_pts(rem->vpts_list, PTS, (int )rem->vwrite, (int )rem->awrite,
                       rem->vptsn, PTS);
  }
#line 99
  return;
}
}
#line 101 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void add_apts(Remux *rem , uint8_t *pts ) 
{ 
  uint32_t PTS ;
  unsigned int tmp ;
  uint32_t tmp___0 ;

  {
  {
#line 103
  tmp = trans_pts_dts(pts);
#line 103
  tmp___0 = ntohl(tmp);
#line 103
  PTS = tmp___0;
#line 104
  rem->aptsn = add_pts(rem->apts_list, PTS, (int )rem->awrite, (int )rem->vwrite,
                       rem->aptsn, PTS);
  }
#line 106
  return;
}
}
#line 108 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void del_vpts(Remux *rem ) 
{ 


  {
  {
#line 110
  rem->vptsn = del_pts(rem->vpts_list, (int )rem->vread, rem->vptsn);
  }
#line 111
  return;
}
}
#line 113 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void del_apts(Remux *rem ) 
{ 


  {
  {
#line 115
  rem->aptsn = del_pts(rem->apts_list, (int )rem->aread, rem->aptsn);
  }
#line 116
  return;
}
}
#line 119 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void copy_framelm(FRAME_List *a , FRAME_List *b ) 
{ 


  {
#line 121
  a->type = b->type;
#line 122
  a->pos = b->pos;
#line 123
  a->FRAME = b->FRAME;
#line 124
  a->time = b->time;
#line 125
  a->pts = b->pts;
#line 126
  a->dts = b->dts;
#line 127
  return;
}
}
#line 129 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void clear_framelm(FRAME_List *a ) 
{ 


  {
#line 131
  a->type = 0;
#line 132
  a->pos = 0;
#line 133
  a->FRAME = (u32 )0;
#line 134
  a->time = (u32 )0;
#line 135
  a->pts = (u32 )0;
#line 136
  a->dts = (u32 )0;
#line 137
  return;
}
}
#line 139 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void init_framel(FRAME_List *framel ) 
{ 
  int i ;

  {
#line 142
  i = 0;
  {
#line 142
  while (1) {
    while_continue: /* CIL Label */ ;
#line 142
    if (! (i < 8192)) {
#line 142
      goto while_break;
    }
    {
#line 143
    clear_framelm(framel + i);
#line 142
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 145
  return;
}
}
#line 147 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int del_frame(FRAME_List *framel , int pos , int nr ) 
{ 
  int i ;
  int del ;

  {
#line 150
  del = 0;
#line 152
  i = 0;
  {
#line 152
  while (1) {
    while_continue: /* CIL Label */ ;
#line 152
    if (! (i < nr - 1)) {
#line 152
      goto while_break;
    }
#line 153
    if (pos > (framel + i)->pos) {
#line 153
      if (pos >= (framel + (i + 1))->pos) {
#line 153
        del ++;
      }
    }
#line 152
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 156
  if (del) {
#line 157
    i = 0;
    {
#line 157
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 157
      if (! (i < nr - del)) {
#line 157
        goto while_break___0;
      }
      {
#line 158
      copy_framelm(framel + i, framel + (i + del));
#line 157
      i ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 161
  return (nr - del);
}
}
#line 164 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int add_frame(FRAME_List *framel , uint32_t frame , int pos , int type , int nr ,
              uint32_t time___1 , uint32_t pts , uint32_t dts ) 
{ 
  int i ;

  {
#line 169
  if (nr == 8192) {
    {
#line 170
    nr = del_frame(framel, (framel + 1)->pos + 1, nr);
    }
  } else {
#line 171
    nr ++;
  }
#line 172
  i = nr - 1;
#line 174
  (framel + i)->type = type;
#line 175
  (framel + i)->pos = pos;
#line 176
  (framel + i)->FRAME = frame;
#line 177
  (framel + i)->time = time___1;
#line 178
  (framel + i)->pts = pts;
#line 179
  (framel + i)->dts = dts;
#line 180
  return (nr);
}
}
#line 183 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void add_vframe(Remux *rem , uint32_t frame , long pos , int type , int time___1 ,
                uint32_t pts , uint32_t dts ) 
{ 


  {
  {
#line 186
  rem->vframen = add_frame(rem->vframe_list, frame, (int )pos, type, rem->vframen,
                           (uint32_t )time___1, pts, dts);
  }
#line 188
  return;
}
}
#line 190 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void add_aframe(Remux *rem , uint32_t frame , long pos , uint32_t pts ) 
{ 


  {
  {
#line 192
  rem->aframen = add_frame(rem->aframe_list, frame, (int )pos, 0, rem->aframen, (uint32_t )0,
                           pts, pts);
  }
#line 194
  return;
}
}
#line 196 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void del_vframe(Remux *rem ) 
{ 


  {
  {
#line 198
  rem->vframen = del_frame(rem->vframe_list, (int )rem->vread, rem->vframen);
  }
#line 199
  return;
}
}
#line 201 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void del_aframe(Remux *rem ) 
{ 


  {
  {
#line 203
  rem->aframen = del_frame(rem->aframe_list, (int )rem->aread, rem->aframen);
  }
#line 204
  return;
}
}
#line 207 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void printpts(uint32_t pts ) 
{ 


  {
  {
#line 209
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%2d:%02d:%02d.%03d",
          (int )((double )pts / 90000.) / 3600, ((int )((double )pts / 90000.) % 3600) / 60,
          ((int )((double )pts / 90000.) % 3600) % 60, (((int )((double )pts / 90.) % 3600000) % 60000) % 1000);
  }
#line 215
  return;
}
}
#line 218 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void find_vframes(Remux *rem , uint8_t *buf___5 , int l ) 
{ 
  int c ;
  int type ;
  uint32_t time___1 ;
  int hour ;
  int min ;
  int sec ;
  u64 pts ;
  u64 dts ;
  uint32_t tempref ;

  {
#line 220
  c = 0;
#line 222
  time___1 = (uint32_t )0;
#line 226
  pts = (u64 )0;
#line 227
  dts = (u64 )0;
#line 228
  tempref = (uint32_t )0;
  {
#line 230
  while (1) {
    while_continue: /* CIL Label */ ;
#line 230
    if (! (c < l - 6)) {
#line 230
      goto while_break;
    }
#line 231
    if ((int )*(buf___5 + c) == 0) {
#line 231
      if ((int )*(buf___5 + (c + 1)) == 0) {
#line 231
        if ((int )*(buf___5 + (c + 2)) == 1) {
#line 231
          if ((int )*(buf___5 + (c + 3)) == 184) {
#line 235
            c += 4;
#line 236
            hour = ((int )*(buf___5 + c) >> 2) & 31;
#line 237
            min = (((int )*(buf___5 + c) << 4) & 48) | (((int )*(buf___5 + (c + 1)) >> 4) & 15);
#line 239
            sec = (((int )*(buf___5 + (c + 1)) << 3) & 56) | (((int )*(buf___5 + (c + 2)) >> 5) & 7);
#line 242
            time___1 = (uint32_t )((3600 * hour + 60 * min) + sec);
#line 243
            if (rem->time_off) {
#line 244
              time___1 = (uint32_t )((u64 )time___1 - (u64 )rem->time_off);
#line 245
              hour = (int )(time___1 / 3600U);
#line 246
              min = (int )((time___1 % 3600U) / 60U);
#line 247
              sec = (int )((time___1 % 3600U) % 60U);
            }
#line 255
            (rem->group) ++;
#line 256
            rem->groupframe = (u32 )0;
          }
        }
      }
    }
#line 258
    if ((int )*(buf___5 + c) == 0) {
#line 258
      if ((int )*(buf___5 + (c + 1)) == 0) {
#line 258
        if ((int )*(buf___5 + (c + 2)) == 1) {
#line 258
          if ((int )*(buf___5 + (c + 3)) == 0) {
#line 262
            c += 4;
#line 263
            tempref = (uint32_t )(((int )*(buf___5 + (c + 1)) >> 6) & 3);
#line 264
            tempref |= (unsigned int )((int )*(buf___5 + c) << 2);
#line 266
            type = ((int )*(buf___5 + (c + 1)) & 56) >> 3;
#line 267
            if (rem->video_info.framerate) {
              {
#line 268
              pts = (u64 )((double )((unsigned long long )((((u64 )rem->vframe + (u64 )tempref) + 1UL) - (u64 )rem->groupframe) * 90000ULL) / rem->video_info.framerate + (double )rem->vpts_off);
#line 272
              dts = (u64 )((double )((unsigned long long )((u64 )rem->vframe) * 90000ULL) / rem->video_info.framerate + (double )rem->vpts_off);
#line 289
              rem->vptsn = add_pts(rem->vpts_list, (uint32_t )pts, (int )((rem->vwrite + (long )c) - 4L),
                                   (int )rem->awrite, rem->vptsn, (uint32_t )dts);
              }
            }
            {
#line 298
            (rem->vframe) ++;
#line 299
            (rem->groupframe) ++;
#line 300
            add_vframe(rem, rem->vframe, rem->vwrite + (long )c, type, (int )time___1,
                       (uint32_t )pts, (uint32_t )dts);
            }
          } else {
#line 302
            c ++;
          }
        } else {
#line 302
          c ++;
        }
      } else {
#line 302
        c ++;
      }
    } else {
#line 302
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 304
  return;
}
}
#line 306 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void find_aframes(Remux *rem , uint8_t *buf___5 , int l ) 
{ 
  int c ;
  u64 pts ;
  int sam ;
  uint32_t fr ;

  {
#line 308
  c = 0;
#line 309
  pts = (u64 )0;
  {
#line 314
  while (1) {
    while_continue: /* CIL Label */ ;
#line 314
    if (! (c < l - 2)) {
#line 314
      goto while_break;
    }
#line 315
    if ((int )*(buf___5 + c) == 255) {
#line 315
      if (((int )*(buf___5 + (c + 1)) & 248) == 248) {
#line 317
        c += 2;
#line 318
        if (rem->audio_info.layer >= 0) {
          {
#line 319
          sam = (int )samples[3 - rem->audio_info.layer];
#line 320
          fr = freq[rem->audio_info.frequency];
#line 322
          pts = (u64 )(((unsigned long long )((u64 )rem->aframe * (u64 )sam) * 900ULL) / (unsigned long long )fr + (unsigned long long )rem->apts_off);
#line 335
          rem->aptsn = add_pts(rem->apts_list, (uint32_t )pts, (int )((rem->awrite + (long )c) - 2L),
                               (int )rem->vwrite, rem->aptsn, (uint32_t )pts);
          }
        }
        {
#line 342
        (rem->aframe) ++;
#line 343
        add_aframe(rem, rem->aframe, rem->awrite + (long )c, (uint32_t )pts);
        }
      } else {
#line 345
        c ++;
      }
    } else {
#line 345
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 347
  return;
}
}
#line 349 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int refill_buffy(Remux *rem ) 
{ 
  pes_packet pes ;
  int count ;
  int acount ;
  int vcount ;
  ringbuffy *vbuf ;
  ringbuffy *abuf ;
  int fin ;
  int tmp ;
  int tmp___0 ;
  int neof ;
  int tmp___1 ;
  int tmp___2 ;

  {
  {
#line 352
  count = 0;
#line 354
  vbuf = & rem->vid_buffy;
#line 355
  abuf = & rem->aud_buffy;
#line 356
  fin = rem->fin;
#line 358
  tmp = ring_rest(abuf);
#line 358
  acount = abuf->size - tmp;
#line 359
  tmp___0 = ring_rest(vbuf);
#line 359
  vcount = vbuf->size - tmp___0;
  }
  {
#line 362
  while (1) {
    while_continue: /* CIL Label */ ;
#line 362
    if (acount > 65535) {
#line 362
      if (vcount > 65535) {
#line 362
        if (! (count < 10)) {
#line 362
          goto while_break;
        }
      } else {
#line 362
        goto while_break;
      }
    } else {
#line 362
      goto while_break;
    }
    {
#line 364
    count ++;
#line 365
    init_pes(& pes);
#line 366
    neof = read_pes(fin, & pes);
    }
#line 366
    if (neof <= 0) {
#line 366
      return (-1);
    }
    {
#line 368
    if ((int )pes.stream_id == 192) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 193) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 194) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 195) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 196) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 197) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 198) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 199) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 200) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 201) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 202) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 203) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 204) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 205) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 206) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 207) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 208) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 209) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 210) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 211) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 212) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 213) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 214) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 215) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 216) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 217) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 218) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 219) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 220) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 221) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 222) {
#line 368
      goto case_192;
    }
#line 368
    if ((int )pes.stream_id == 223) {
#line 368
      goto case_192;
    }
#line 377
    if ((int )pes.stream_id == 224) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 225) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 226) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 227) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 228) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 229) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 230) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 231) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 232) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 233) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 234) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 235) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 236) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 237) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 238) {
#line 377
      goto case_224;
    }
#line 377
    if ((int )pes.stream_id == 239) {
#line 377
      goto case_224;
    }
#line 367
    goto switch_break;
    case_192: /* CIL Label */ 
    case_193: /* CIL Label */ 
    case_194: /* CIL Label */ 
    case_195: /* CIL Label */ 
    case_196: /* CIL Label */ 
    case_197: /* CIL Label */ 
    case_198: /* CIL Label */ 
    case_199: /* CIL Label */ 
    case_200: /* CIL Label */ 
    case_201: /* CIL Label */ 
    case_202: /* CIL Label */ 
    case_203: /* CIL Label */ 
    case_204: /* CIL Label */ 
    case_205: /* CIL Label */ 
    case_206: /* CIL Label */ 
    case_207: /* CIL Label */ 
    case_208: /* CIL Label */ 
    case_209: /* CIL Label */ 
    case_210: /* CIL Label */ 
    case_211: /* CIL Label */ 
    case_212: /* CIL Label */ 
    case_213: /* CIL Label */ 
    case_214: /* CIL Label */ 
    case_215: /* CIL Label */ 
    case_216: /* CIL Label */ 
    case_217: /* CIL Label */ 
    case_218: /* CIL Label */ 
    case_219: /* CIL Label */ 
    case_220: /* CIL Label */ 
    case_221: /* CIL Label */ 
    case_222: /* CIL Label */ 
    case_223: /* CIL Label */ 
#line 369
    (rem->apes) ++;
#line 370
    if (rem->audio_info.layer < 0) {
#line 370
      if ((int )pes.flags2 & 192) {
        {
#line 372
        add_apts(rem, pes.pts);
        }
      }
    }
    {
#line 373
    find_aframes(rem, pes.pes_pckt_data, (int )pes.length);
#line 374
    ring_write(abuf, (char *)pes.pes_pckt_data, (int )pes.length);
#line 375
    rem->awrite += (long )pes.length;
    }
#line 376
    goto switch_break;
    case_224: /* CIL Label */ 
    case_225: /* CIL Label */ 
    case_226: /* CIL Label */ 
    case_227: /* CIL Label */ 
    case_228: /* CIL Label */ 
    case_229: /* CIL Label */ 
    case_230: /* CIL Label */ 
    case_231: /* CIL Label */ 
    case_232: /* CIL Label */ 
    case_233: /* CIL Label */ 
    case_234: /* CIL Label */ 
    case_235: /* CIL Label */ 
    case_236: /* CIL Label */ 
    case_237: /* CIL Label */ 
    case_238: /* CIL Label */ 
    case_239: /* CIL Label */ 
#line 378
    (rem->vpes) ++;
#line 379
    if (! rem->video_info.framerate) {
#line 379
      if ((int )pes.flags2 & 192) {
        {
#line 381
        add_vpts(rem, pes.pts);
        }
      }
    }
    {
#line 383
    find_vframes(rem, pes.pes_pckt_data, (int )pes.length);
#line 385
    ring_write(vbuf, (char *)pes.pes_pckt_data, (int )pes.length);
#line 386
    rem->vwrite += (long )pes.length;
    }
#line 387
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
    {
#line 389
    tmp___1 = ring_rest(abuf);
#line 389
    acount = abuf->size - tmp___1;
#line 390
    tmp___2 = ring_rest(vbuf);
#line 390
    vcount = vbuf->size - tmp___2;
#line 391
    kill_pes(& pes);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 393
  if (count < 10) {
#line 393
    return (0);
  }
#line 394
  return (1);
}
}
#line 397 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int vring_read(Remux *rem , uint8_t *buf___5 , int l ) 
{ 
  int c ;
  int r ;
  int tmp ;

  {
  {
#line 399
  c = 0;
#line 400
  r = 0;
#line 402
  tmp = ring_rest(& rem->vid_buffy);
  }
#line 402
  if (tmp <= l) {
    {
#line 403
    r = refill_buffy(rem);
    }
  }
#line 404
  if (r) {
#line 404
    return (-1);
  }
  {
#line 406
  c = ring_read(& rem->vid_buffy, (char *)buf___5, l);
#line 407
  rem->vread += (long )c;
#line 408
  del_vpts(rem);
#line 409
  del_vframe(rem);
  }
#line 410
  return (c);
}
}
#line 413 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int aring_read(Remux *rem , uint8_t *buf___5 , int l ) 
{ 
  int c ;
  int r ;
  int tmp ;

  {
  {
#line 415
  c = 0;
#line 416
  r = 0;
#line 418
  tmp = ring_rest(& rem->aud_buffy);
  }
#line 418
  if (tmp <= l) {
    {
#line 419
    r = refill_buffy(rem);
    }
  }
#line 420
  if (r) {
#line 420
    return (-1);
  }
  {
#line 422
  c = ring_read(& rem->aud_buffy, (char *)buf___5, l);
#line 423
  rem->aread += (long )c;
#line 424
  del_apts(rem);
#line 425
  del_aframe(rem);
  }
#line 426
  return (c);
}
}
#line 429 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int vring_peek(Remux *rem , uint8_t *buf___5 , int l , long off ) 
{ 
  int c ;
  int tmp ;

  {
  {
#line 431
  c = 0;
#line 433
  tmp = ring_rest(& rem->vid_buffy);
  }
#line 433
  if (tmp <= l) {
    {
#line 434
    refill_buffy(rem);
    }
  }
  {
#line 436
  c = ring_peek(& rem->vid_buffy, (char *)buf___5, l, off);
  }
#line 437
  return (c);
}
}
#line 440 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int aring_peek(Remux *rem , uint8_t *buf___5 , int l , long off ) 
{ 
  int c ;
  int tmp ;

  {
  {
#line 442
  c = 0;
#line 444
  tmp = ring_rest(& rem->aud_buffy);
  }
#line 444
  if (tmp <= l) {
    {
#line 445
    refill_buffy(rem);
    }
  }
  {
#line 447
  c = ring_peek(& rem->aud_buffy, (char *)buf___5, l, off);
  }
#line 448
  return (c);
}
}
#line 452 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int get_video_info(Remux *rem ) 
{ 
  uint8_t buf___5[12] ;
  uint8_t *headr ;
  int found ;
  int sw ;
  long off ;
  int form ;
  ringbuffy *vid_buffy ;
  VideoInfo *vi___0 ;
  uint8_t b[3] ;
  int tmp ;
  int tmp___0 ;

  {
#line 456
  found = 0;
#line 458
  off = 0L;
#line 459
  form = -1;
#line 460
  vid_buffy = & rem->vid_buffy;
#line 461
  vi___0 = & rem->video_info;
  {
#line 463
  while (1) {
    while_continue: /* CIL Label */ ;
#line 463
    if (found < 4) {
      {
#line 463
      tmp = ring_rest(vid_buffy);
      }
#line 463
      if (! tmp) {
#line 463
        goto while_break;
      }
    } else {
#line 463
      goto while_break;
    }
    {
#line 466
    vring_peek(rem, b, 4, 0L);
    }
#line 467
    if ((int )b[0] == 0) {
#line 467
      if ((int )b[1] == 0) {
#line 467
        if ((int )b[2] == 1) {
#line 467
          if ((int )b[3] == 179) {
#line 468
            found = 4;
          } else {
            {
#line 470
            off ++;
#line 471
            vring_read(rem, b, 1);
            }
          }
        } else {
          {
#line 470
          off ++;
#line 471
          vring_read(rem, b, 1);
          }
        }
      } else {
        {
#line 470
        off ++;
#line 471
        vring_read(rem, b, 1);
        }
      }
    } else {
      {
#line 470
      off ++;
#line 471
      vring_read(rem, b, 1);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 474
  rem->vframe = (u32 )(rem->vframen - 1);
#line 476
  if (! found) {
#line 476
    return (-1);
  }
  {
#line 477
  buf___5[0] = (uint8_t )0;
#line 477
  buf___5[1] = (uint8_t )0;
#line 477
  buf___5[2] = (uint8_t )1;
#line 477
  buf___5[3] = (uint8_t )179;
#line 478
  headr = buf___5 + 4;
#line 479
  tmp___0 = vring_peek(rem, buf___5, 12, 0L);
  }
#line 479
  if (tmp___0 < 12) {
#line 479
    return (-1);
  }
#line 481
  vi___0->horizontal_size = (u32 )((((int )*(headr + 1) & 240) >> 4) | ((int )*(headr + 0) << 4));
#line 482
  vi___0->vertical_size = (u32 )((((int )*(headr + 1) & 15) << 8) | (int )*(headr + 2));
#line 484
  sw = ((int )*(headr + 3) & 240) >> 4;
  {
#line 487
  if (sw == 1) {
#line 487
    goto case_1;
  }
#line 491
  if (sw == 2) {
#line 491
    goto case_2;
  }
#line 495
  if (sw == 3) {
#line 495
    goto case_3;
  }
#line 499
  if (sw == 4) {
#line 499
    goto case_4;
  }
#line 504
  if (sw == 5) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 6) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 7) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 8) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 9) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 10) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 11) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 12) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 13) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 14) {
#line 504
    goto case_5;
  }
#line 504
  if (sw == 15) {
#line 504
    goto case_5;
  }
#line 509
  goto switch_default;
  case_1: /* CIL Label */ 
  {
#line 488
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 1:1");
#line 489
  vi___0->aspect_ratio = (u32 )100;
  }
#line 490
  goto switch_break;
  case_2: /* CIL Label */ 
  {
#line 492
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 4:3");
#line 493
  vi___0->aspect_ratio = (u32 )133;
  }
#line 494
  goto switch_break;
  case_3: /* CIL Label */ 
  {
#line 496
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 16:9");
#line 497
  vi___0->aspect_ratio = (u32 )177;
  }
#line 498
  goto switch_break;
  case_4: /* CIL Label */ 
  {
#line 500
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 2.21:1");
#line 501
  vi___0->aspect_ratio = (u32 )221;
  }
#line 502
  goto switch_break;
  case_5: /* CIL Label */ 
  case_6: /* CIL Label */ 
  case_7: /* CIL Label */ 
  case_8: /* CIL Label */ 
  case_9: /* CIL Label */ 
  case_10: /* CIL Label */ 
  case_11: /* CIL Label */ 
  case_12: /* CIL Label */ 
  case_13: /* CIL Label */ 
  case_14: /* CIL Label */ 
  case_15: /* CIL Label */ 
  {
#line 505
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: reserved");
#line 506
  vi___0->aspect_ratio = (u32 )0;
  }
#line 507
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 510
  vi___0->aspect_ratio = (u32 )0;
#line 511
  return (-1);
  switch_break: /* CIL Label */ ;
  }
  {
#line 514
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Size = %dx%d",
          vi___0->horizontal_size, vi___0->vertical_size);
#line 516
  sw = (int )*(headr + 3) & 15;
  }
  {
#line 519
  if (sw == 1) {
#line 519
    goto case_1___0;
  }
#line 524
  if (sw == 2) {
#line 524
    goto case_2___0;
  }
#line 529
  if (sw == 3) {
#line 529
    goto case_3___0;
  }
#line 534
  if (sw == 4) {
#line 534
    goto case_4___0;
  }
#line 539
  if (sw == 5) {
#line 539
    goto case_5___0;
  }
#line 544
  if (sw == 6) {
#line 544
    goto case_6___0;
  }
#line 549
  if (sw == 7) {
#line 549
    goto case_7___0;
  }
#line 518
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
  {
#line 520
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 23.976 fps");
#line 521
  vi___0->framerate = (double )24000 / 1001.;
#line 522
  form = -1;
  }
#line 523
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
  {
#line 525
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 24 fps");
#line 526
  vi___0->framerate = (double )24;
#line 527
  form = -1;
  }
#line 528
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
  {
#line 530
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 25 fps");
#line 531
  vi___0->framerate = (double )25;
#line 532
  form = 0;
  }
#line 533
  goto switch_break___0;
  case_4___0: /* CIL Label */ 
  {
#line 535
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 29.97 fps");
#line 536
  vi___0->framerate = (double )30000 / 1001.;
#line 537
  form = 1;
  }
#line 538
  goto switch_break___0;
  case_5___0: /* CIL Label */ 
  {
#line 540
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 30 fps");
#line 541
  vi___0->framerate = (double )30;
#line 542
  form = 1;
  }
#line 543
  goto switch_break___0;
  case_6___0: /* CIL Label */ 
  {
#line 545
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 50 fps");
#line 546
  vi___0->framerate = (double )50;
#line 547
  form = 0;
  }
#line 548
  goto switch_break___0;
  case_7___0: /* CIL Label */ 
  {
#line 550
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 60 fps");
#line 551
  vi___0->framerate = (double )60;
#line 552
  form = 1;
  }
#line 553
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 556
  rem->dts_delay = (u32 )((int )(((7.0 / vi___0->framerate) / 2.0) * (double )90000));
#line 558
  vi___0->bit_rate = (u32 )(400UL * ((((unsigned long )((int )*(headr + 4) << 10) & 261120UL) | ((unsigned long )((int )*(headr + 5) << 2) & 1020UL)) | ((unsigned long )(((int )*(headr + 6) & 192) >> 6) & 3UL)));
#line 562
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: %.2f Mbit/s",
          (double )vi___0->bit_rate / 1000000.);
#line 564
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
#line 565
  vi___0->video_format = (u32 )form;
  }
#line 572
  return (form);
}
}
#line 576 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int get_audio_info(Remux *rem ) 
{ 
  uint8_t *headr ;
  uint8_t buf___5[3] ;
  long off ;
  int found ;
  ringbuffy *aud_buffy ;
  AudioInfo *ai___0 ;
  int tmp ;
  int tmp___0 ;
  uint8_t b[2] ;
  int tmp___1 ;
  int tmp___2 ;

  {
#line 580
  off = 0L;
#line 581
  found = 0;
#line 582
  aud_buffy = & rem->aud_buffy;
#line 583
  ai___0 = & rem->audio_info;
  {
#line 585
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 585
    tmp = ring_rest(aud_buffy);
    }
#line 585
    if (tmp) {
#line 585
      goto while_break;
    } else {
      {
#line 585
      tmp___0 = refill_buffy(rem);
      }
#line 585
      if (tmp___0) {
#line 585
        goto while_break;
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 586
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 586
    if (found < 2) {
      {
#line 586
      tmp___1 = ring_rest(aud_buffy);
      }
#line 586
      if (! tmp___1) {
#line 586
        goto while_break___0;
      }
    } else {
#line 586
      goto while_break___0;
    }
    {
#line 588
    refill_buffy(rem);
#line 589
    aring_peek(rem, b, 2, 0L);
    }
#line 591
    if ((int )b[0] == 255) {
#line 591
      if (((int )b[1] & 248) == 248) {
#line 592
        found = 2;
      } else {
        {
#line 594
        off ++;
#line 595
        aring_read(rem, b, 1);
        }
      }
    } else {
      {
#line 594
      off ++;
#line 595
      aring_read(rem, b, 1);
      }
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 599
  if (! found) {
#line 599
    return (-1);
  }
  {
#line 600
  rem->aframe = (u32 )(rem->aframen - 1);
#line 602
  tmp___2 = aring_peek(rem, buf___5, 3, 0L);
  }
#line 602
  if (tmp___2 < 1) {
#line 602
    return (-1);
  }
  {
#line 603
  headr = buf___5 + 2;
#line 605
  ai___0->layer = ((int )buf___5[1] & 6) >> 1;
#line 607
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Audiostream: Layer: %d",
          4 - ai___0->layer);
#line 610
  ai___0->bit_rate = bitrates[3 - ai___0->layer][(int )*(headr + 0) >> 4] * 1000U;
  }
#line 612
  if (ai___0->bit_rate == 0U) {
    {
#line 613
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Bit rate: free");
    }
  } else
#line 614
  if (ai___0->bit_rate == 15U) {
    {
#line 615
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: reserved");
    }
  } else {
    {
#line 617
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: %d kb/s",
            ai___0->bit_rate / 1000U);
    }
  }
#line 620
  ai___0->frequency = (u32 )(((int )*(headr + 0) & 12) >> 2);
#line 621
  if (ai___0->frequency == 3U) {
    {
#line 622
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Freq: reserved\n");
    }
  } else {
    {
#line 624
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Freq: %2.1f kHz\n",
            (double )freq[ai___0->frequency] / 10.);
    }
  }
#line 627
  return (0);
}
}
#line 632 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void init_remux(Remux *rem , int fin , int fout , int mult ) 
{ 


  {
  {
#line 634
  rem->video_info.framerate = (double )0;
#line 635
  rem->audio_info.layer = -1;
#line 636
  rem->fin = fin;
#line 637
  rem->fout = fout;
#line 638
  ring_init(& rem->vid_buffy, 26214000 * mult);
#line 639
  ring_init(& rem->aud_buffy, 655350 * mult);
#line 640
  init_ptsl(rem->vpts_list);
#line 641
  init_ptsl(rem->apts_list);
#line 642
  init_framel(rem->vframe_list);
#line 643
  init_framel(rem->aframe_list);
#line 645
  rem->vptsn = 0;
#line 646
  rem->aptsn = 0;
#line 647
  rem->vframen = 0;
#line 648
  rem->aframen = 0;
#line 649
  rem->vframe = (u32 )0;
#line 650
  rem->aframe = (u32 )0;
#line 651
  rem->vcframe = (u32 )0;
#line 652
  rem->acframe = (u32 )0;
#line 653
  rem->vpts = (u32 )0;
#line 654
  rem->vdts = (u32 )0;
#line 655
  rem->apts_off = (u32 )0;
#line 656
  rem->vpts_off = (u32 )0;
#line 657
  rem->apts_delay = (u32 )0;
#line 658
  rem->vpts_delay = (u32 )0;
#line 659
  rem->dts_delay = (u32 )0;
#line 660
  rem->apts = (u32 )0;
#line 661
  rem->vpes = 0L;
#line 662
  rem->apes = 0L;
#line 663
  rem->vpts_old = (u32 )0;
#line 664
  rem->apts_old = (u32 )0;
#line 665
  rem->SCR = (u32 )0;
#line 666
  rem->vwrite = 0L;
#line 667
  rem->awrite = 0L;
#line 668
  rem->vread = 0L;
#line 669
  rem->aread = 0L;
#line 670
  rem->group = (u32 )0;
#line 671
  rem->groupframe = (u32 )0;
#line 672
  rem->pack_size = 0;
#line 673
  rem->muxr = (u32 )0;
#line 674
  rem->time_off = (u32 )0;
  }
#line 675
  return;
}
}
#line 677 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
uint32_t bytes2pts(int bytes , int rate ) 
{ 


  {
#line 679
  if ((unsigned long )bytes < 5965UL) {
#line 680
    return ((uint32_t )(((unsigned long )bytes * 720000UL) / (unsigned long )rate));
  } else {
#line 682
    return ((uint32_t )((unsigned long )(bytes / rate) * 720000UL));
  }
}
}
#line 685 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
long pts2bytes(uint32_t pts , int rate ) 
{ 


  {
#line 687
  if ((unsigned long )pts < 4026531839UL / (unsigned long )rate) {
#line 688
    return ((long )((pts * (uint32_t )rate) / 720000U));
  } else {
#line 690
    return ((long )(pts * (uint32_t )(rate / 720000)));
  }
}
}
#line 693 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int write_audio_pes(Remux *rem , uint8_t *buf___5 , int *alength ) 
{ 
  int add ;
  int pos ;
  int p ;
  uint32_t pts ;
  int stuff ;
  int length ;
  int tmp ;
  int tmp___0 ;

  {
#line 696
  pos = 0;
#line 697
  p = 0;
#line 698
  pts = (uint32_t )0;
#line 699
  stuff = 0;
#line 700
  length = *alength;
#line 702
  if (! length) {
#line 702
    return (0);
  }
#line 703
  p = 23;
#line 705
  if (rem->apts_old != rem->apts) {
#line 706
    pts = (uint32_t )(((u64 )rem->apts + (u64 )rem->apts_delay) - (u64 )rem->apts_off);
#line 707
    p += 5;
  }
#line 709
  if (length + p >= rem->pack_size) {
#line 710
    length = rem->pack_size;
  } else
#line 712
  if ((rem->pack_size - length) - p <= 7) {
#line 713
    stuff = rem->pack_size - length;
#line 714
    length = rem->pack_size;
  } else {
#line 716
    length += p;
  }
  {
#line 718
  pos = write_ps_header(buf___5, rem->SCR, (long )rem->muxr, (uint8_t )1, (uint8_t )0,
                        (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1, (uint8_t )0,
                        (uint8_t )0, (uint32_t )0, (uint8_t )0, (uint8_t )0, (uint32_t )0);
#line 721
  tmp = write_pes_header((u8 )192, length - pos, (long )pts, buf___5 + pos, stuff);
#line 721
  pos += tmp;
#line 722
  add = aring_read(rem, buf___5 + pos, length - pos);
#line 723
  *alength = add;
  }
#line 724
  if (add < 0) {
#line 724
    return (-1);
  }
#line 725
  pos += add;
#line 726
  rem->apts_old = rem->apts;
#line 727
  rem->apts = rem->apts_list[0].PTS;
#line 729
  if (pos + 7 < rem->pack_size) {
    {
#line 730
    tmp___0 = write_pes_header((u8 )190, rem->pack_size - pos, 0L, buf___5 + pos,
                               0);
#line 730
    pos += tmp___0;
#line 732
    pos = rem->pack_size;
    }
  }
#line 734
  if (pos != rem->pack_size) {
    {
#line 735
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"apos: %d\n",
            pos);
#line 736
    exit(1);
    }
  }
#line 739
  return (pos);
}
}
#line 742 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
int write_video_pes(Remux *rem , uint8_t *buf___5 , int *vlength ) 
{ 
  int add ;
  int pos ;
  int p ;
  uint32_t pts ;
  uint32_t dts ;
  int stuff ;
  int length ;
  long diff ;
  int tmp ;
  int tmp___0 ;

  {
#line 745
  pos = 0;
#line 746
  p = 0;
#line 747
  pts = (uint32_t )0;
#line 748
  dts = (uint32_t )0;
#line 749
  stuff = 0;
#line 750
  length = *vlength;
#line 751
  diff = 0L;
#line 753
  if (! length) {
#line 753
    return (0);
  }
#line 754
  p = 23;
#line 756
  if (rem->vpts_old != rem->vpts) {
#line 757
    pts = (uint32_t )(((u64 )rem->vpts + (u64 )rem->vpts_delay) - (u64 )rem->vpts_off);
#line 758
    p += 5;
  }
#line 760
  if (length + p >= rem->pack_size) {
#line 761
    length = rem->pack_size;
  } else
#line 763
  if ((rem->pack_size - length) - p <= 7) {
#line 764
    stuff = rem->pack_size - length;
#line 765
    length = rem->pack_size;
  } else {
#line 767
    length += p;
  }
  {
#line 770
  pos = write_ps_header(buf___5, rem->SCR, (long )rem->muxr, (uint8_t )1, (uint8_t )0,
                        (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1, (uint8_t )0,
                        (uint8_t )0, (uint32_t )0, (uint8_t )0, (uint8_t )0, (uint32_t )0);
#line 773
  tmp = write_pes_header((u8 )224, length - pos, (long )pts, buf___5 + pos, stuff);
#line 773
  pos += tmp;
#line 774
  add = vring_read(rem, buf___5 + pos, length - pos);
#line 775
  *vlength = add;
  }
#line 776
  if (add < 0) {
#line 776
    return (-1);
  }
#line 777
  pos += add;
#line 778
  rem->vpts_old = rem->vpts;
#line 779
  dts = rem->vdts;
#line 780
  rem->vpts = rem->vpts_list[0].PTS;
#line 781
  rem->vdts = rem->vpts_list[0].dts;
#line 782
  if (diff > 0L) {
#line 782
    rem->SCR = (u32 )((long )rem->SCR + diff);
  }
#line 783
  if (pos + 7 < rem->pack_size) {
    {
#line 785
    tmp___0 = write_pes_header((u8 )190, rem->pack_size - pos, 0L, buf___5 + pos,
                               0);
#line 785
    pos += tmp___0;
#line 787
    pos = rem->pack_size;
    }
  }
#line 789
  return (pos);
}
}
#line 795
void print_info(Remux *rem , int ret ) ;
#line 795 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
static int time___0  =    0;
#line 792 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void print_info(Remux *rem , int ret ) 
{ 
  int newtime ;
  int i ;

  {
#line 794
  newtime = 0;
#line 796
  i = 0;
  {
#line 798
  while (1) {
    while_continue: /* CIL Label */ ;
#line 798
    if (! newtime) {
#line 798
      if (! (i < rem->vframen)) {
#line 798
        goto while_break;
      }
    } else {
#line 798
      goto while_break;
    }
#line 799
    newtime = (int )rem->vframe_list[i].time;
#line 799
    if (newtime) {
#line 799
      goto while_break;
    }
#line 800
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 802
  if (newtime) {
#line 802
    time___0 = newtime;
  }
  {
#line 804
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"SCR:");
#line 805
  printpts(rem->SCR);
#line 806
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)" VDTS:");
#line 807
  printpts((uint32_t )(((u64 )rem->vdts - (u64 )rem->vpts_off) + (u64 )rem->vpts_delay));
#line 808
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)" APTS:");
#line 809
  printpts((uint32_t )(((u64 )rem->apts - (u64 )rem->apts_off) + (u64 )rem->apts_delay));
#line 810
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)" TIME:%2d:",
          time___0 / 3600);
#line 811
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%02d:",
          (time___0 % 3600) / 60);
#line 812
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%02d",
          (time___0 % 3600) % 60);
  }
#line 813
  if (ret) {
    {
#line 813
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
    }
  } else {
    {
#line 814
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\r");
    }
  }
#line 815
  return;
}
}
#line 817 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void remux(int fin , int fout , int pack_size , int mult ) 
{ 
  Remux rem ;
  long ptsdiff ;
  uint8_t buf___5[4096] ;
  long pos ;
  int r ;
  int i ;
  int r1 ;
  int r2 ;
  long packets ;
  uint8_t mpeg_end[4] ;
  uint32_t SCR_inc ;
  int data_size ;
  long vbuf ;
  long abuf ;
  long vbuf_max ;
  long abuf_max ;
  PTS_List abufl[8192] ;
  PTS_List vbufl[8192] ;
  int abufn ;
  int vbufn ;
  u64 pts_d ;
  int ok_audio ;
  int ok_video ;
  uint32_t apos ;
  uint32_t vpos ;
  int vpack_size ;
  int apack_size ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  uint32_t next_apts ;
  uint32_t next_vdts ;
  int asize ;
  int vsize ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;

  {
  {
#line 822
  pos = 0L;
#line 823
  r = 0;
#line 825
  packets = 0L;
#line 826
  mpeg_end[0] = (uint8_t )0;
#line 826
  mpeg_end[1] = (uint8_t )0;
#line 826
  mpeg_end[2] = (uint8_t )1;
#line 826
  mpeg_end[3] = (uint8_t )185;
#line 827
  SCR_inc = (uint32_t )0;
#line 833
  abufn = 0;
#line 834
  vbufn = 0;
#line 835
  pts_d = (u64 )0;
#line 838
  apos = (uint32_t )0;
#line 839
  vpos = (uint32_t )0;
#line 840
  vpack_size = 0;
#line 841
  apack_size = 0;
#line 843
  init_ptsl(abufl);
#line 844
  init_ptsl(vbufl);
#line 846
  init_remux(& rem, fin, fout, mult);
#line 847
  rem.pack_size = pack_size;
#line 848
  data_size = pack_size - 28;
#line 849
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"pack_size: %d header_size: %d data size: %d\n",
          pack_size, 28, data_size);
#line 851
  refill_buffy(& rem);
#line 852
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Package size: %d\n",
          pack_size);
#line 854
  tmp = get_video_info(& rem);
  }
#line 854
  if (tmp < 0) {
    {
#line 855
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"ERROR: Can\'t find valid video stream\n");
#line 856
    exit(1);
    }
  }
#line 859
  i = 0;
  {
#line 860
  while (1) {
    while_continue: /* CIL Label */ ;
#line 860
    if (! rem.time_off) {
#line 860
      if (! (i < rem.vframen)) {
#line 860
        goto while_break;
      }
    } else {
#line 860
      goto while_break;
    }
#line 861
    rem.time_off = rem.vframe_list[i].time;
#line 861
    if (rem.time_off) {
#line 861
      goto while_break;
    }
#line 862
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 865
  tmp___0 = get_audio_info(& rem);
  }
#line 865
  if (tmp___0 < 0) {
    {
#line 866
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"ERROR: Can\'t find valid audio stream\n");
#line 867
    exit(1);
    }
  }
  {
#line 870
  rem.vpts = rem.vpts_list[0].PTS;
#line 871
  rem.vdts = rem.vpts;
#line 872
  rem.vpts_off = rem.vpts;
#line 873
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Video start PTS = %fs \n",
          (double )rem.vpts_off / 90000.);
#line 874
  rem.apts = rem.apts_list[0].PTS;
#line 875
  rem.apts_off = rem.apts;
#line 876
  ptsdiff = (long )(rem.vpts - rem.apts);
  }
#line 877
  if (ptsdiff > 0L) {
#line 877
    rem.vpts_off = (u32 )((long )rem.vpts_off - ptsdiff);
  } else {
#line 878
    rem.apts_off = (u32 )((long )rem.apts_off - - ptsdiff);
  }
  {
#line 879
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Audio start PTS = %fs\n",
          (double )rem.apts_off / 90000.);
#line 880
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Difference Video - Audio = %fs\n",
          (double )ptsdiff / 90000.);
#line 881
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Time offset = %ds\n",
          rem.time_off);
#line 883
  rem.muxr = (rem.video_info.bit_rate + rem.audio_info.bit_rate) / 400U;
#line 885
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"MUXRATE: %.2f Mb/sec\n",
          (double )rem.muxr / 2500.);
#line 886
  SCR_inc = (u32 )(1800 * pack_size) / rem.muxr;
#line 888
  r = 0;
  }
  {
#line 889
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 889
    if (rem.vptsn < 2) {
#line 889
      if (! (! r)) {
#line 889
        goto while_break___0;
      }
    } else {
#line 889
      goto while_break___0;
    }
    {
#line 889
    r = refill_buffy(& rem);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 890
  r = 0;
  {
#line 891
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 891
    if (rem.aptsn < 2) {
#line 891
      if (! (! r)) {
#line 891
        goto while_break___1;
      }
    } else {
#line 891
      goto while_break___1;
    }
    {
#line 891
    r = refill_buffy(& rem);
    }
  }
  while_break___1: /* CIL Label */ ;
  }
  {
#line 894
  rem.vpts_delay = rem.dts_delay;
#line 895
  rem.apts_delay = rem.vpts_delay;
#line 897
  vbuf_max = 29440L;
#line 898
  abuf_max = 4096L;
#line 899
  vbuf = 0L;
#line 900
  abuf = 0L;
#line 901
  tmp___1 = write_ps_header(buf___5, rem.SCR, (long )rem.muxr, (uint8_t )1, (uint8_t )0,
                            (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1, (uint8_t )192,
                            (uint8_t )0, (uint32_t )32, (uint8_t )224, (uint8_t )1,
                            (uint32_t )230);
#line 901
  pos = (long )tmp___1;
#line 903
  tmp___2 = write_pes_header((u8 )190, (int )((long )pack_size - pos), 0L, buf___5 + pos,
                             0);
#line 903
  pos += (long )tmp___2;
#line 904
  pos = (long )rem.pack_size;
#line 905
  write(fout, (void const   *)(buf___5), (size_t )pos);
#line 907
  apos = (uint32_t )rem.aread;
#line 908
  vpos = (uint32_t )rem.vread;
#line 909
  print_info(& rem, 1);
  }
  {
#line 911
  while (1) {
    while_continue___2: /* CIL Label */ ;
    {
#line 911
    tmp___11 = ring_rest(& rem.aud_buffy);
    }
#line 911
    if (tmp___11) {
      {
#line 911
      tmp___12 = ring_rest(& rem.vid_buffy);
      }
#line 911
      if (! tmp___12) {
#line 911
        goto while_break___2;
      }
    } else {
#line 911
      goto while_break___2;
    }
#line 916
    r1 = 0;
#line 917
    r2 = 0;
    {
#line 918
    while (1) {
      while_continue___3: /* CIL Label */ ;
#line 918
      if (rem.aframen < 2) {
#line 918
        if (! (! r1)) {
#line 918
          goto while_break___3;
        }
      } else {
#line 918
        goto while_break___3;
      }
      {
#line 919
      r1 = refill_buffy(& rem);
      }
    }
    while_break___3: /* CIL Label */ ;
    }
    {
#line 920
    while (1) {
      while_continue___4: /* CIL Label */ ;
#line 920
      if (rem.vframen < 2) {
#line 920
        if (! (! r2)) {
#line 920
          goto while_break___4;
        }
      } else {
#line 920
        goto while_break___4;
      }
      {
#line 921
      r2 = refill_buffy(& rem);
      }
    }
    while_break___4: /* CIL Label */ ;
    }
#line 922
    if (r1) {
#line 922
      if (r2) {
#line 922
        goto while_break___2;
      }
    }
#line 924
    if (! r1) {
#line 924
      if ((long )apos <= rem.aread) {
#line 925
        apos = (uint32_t )rem.aframe_list[1].pos;
      }
    }
#line 926
    if (! r2) {
#line 926
      if ((long )vpos <= rem.vread) {
#line 927
        vpos = (uint32_t )rem.vframe_list[1].pos;
      }
    }
#line 928
    apack_size = (int )((long )apos - rem.aread);
#line 929
    vpack_size = (int )((long )vpos - rem.vread);
#line 932
    next_vdts = (uint32_t )(((u64 )rem.vdts + (u64 )rem.vpts_delay) - (u64 )rem.vpts_off);
#line 934
    ok_video = rem.SCR < next_vdts;
#line 936
    next_apts = (uint32_t )(((u64 )rem.apts + (u64 )rem.apts_delay) - (u64 )rem.apts_off);
#line 938
    ok_audio = rem.SCR < next_apts;
#line 940
    if (apack_size > data_size) {
#line 940
      asize = data_size;
    } else {
#line 940
      asize = apack_size;
    }
#line 941
    if (vpack_size > data_size) {
#line 941
      vsize = data_size;
    } else {
#line 941
      vsize = vpack_size;
    }
    {
#line 943
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"vframen: %d  aframen: %d  v_ok: %d  a_ok: %d  v_buf: %d  a_buf: %d vpacks: %d  apacks: %d\n",
            rem.vframen, rem.aframen, ok_video, ok_audio, (int )vbuf, (int )abuf,
            vsize, asize);
    }
#line 946
    if (vbuf + (long )vsize < vbuf_max) {
#line 946
      if (vsize) {
#line 946
        if (ok_audio) {
          {
#line 947
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"1 ");
#line 948
          tmp___3 = write_video_pes(& rem, buf___5, & vpack_size);
#line 948
          pos = (long )tmp___3;
#line 949
          write(fout, (void const   *)(buf___5), (size_t )pos);
#line 950
          vbuf += (long )vpack_size;
#line 951
          vbufn = add_pts(vbufl, rem.vdts, vpack_size, 0, vbufn, (uint32_t )0);
#line 953
          packets ++;
          }
        } else {
#line 946
          goto _L___6;
        }
      } else {
#line 946
        goto _L___6;
      }
    } else
    _L___6: /* CIL Label */ 
#line 954
    if (abuf + (long )asize < abuf_max) {
#line 954
      if (asize) {
#line 954
        if (ok_video) {
          {
#line 956
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"2 ");
#line 957
          tmp___4 = write_audio_pes(& rem, buf___5, & apack_size);
#line 957
          pos = (long )tmp___4;
#line 958
          write(fout, (void const   *)(buf___5), (size_t )pos);
#line 959
          abuf += (long )apack_size;
#line 960
          abufn = add_pts(abufl, rem.apts, apack_size, 0, abufn, (uint32_t )0);
#line 962
          packets ++;
          }
        } else {
#line 954
          goto _L___4;
        }
      } else {
#line 954
        goto _L___4;
      }
    } else
    _L___4: /* CIL Label */ 
#line 963
    if (abuf + (long )asize < abuf_max) {
#line 963
      if (asize) {
#line 963
        if (! ok_audio) {
          {
#line 965
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"3 ");
#line 966
          tmp___5 = write_audio_pes(& rem, buf___5, & apack_size);
#line 966
          pos = (long )tmp___5;
#line 967
          write(fout, (void const   *)(buf___5), (size_t )pos);
#line 968
          abuf += (long )apack_size;
#line 969
          abufn = add_pts(abufl, rem.apts, apack_size, 0, abufn, (uint32_t )0);
#line 971
          packets ++;
          }
        } else {
#line 963
          goto _L___2;
        }
      } else {
#line 963
        goto _L___2;
      }
    } else
    _L___2: /* CIL Label */ 
#line 972
    if (vbuf + (long )vsize < vbuf_max) {
#line 972
      if (vsize) {
#line 972
        if (! ok_video) {
          {
#line 974
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"4 ");
#line 975
          tmp___6 = write_video_pes(& rem, buf___5, & vpack_size);
#line 975
          pos = (long )tmp___6;
#line 976
          write(fout, (void const   *)(buf___5), (size_t )pos);
#line 977
          vbuf += (long )vpack_size;
#line 978
          vbufn = add_pts(vbufl, rem.vdts, vpack_size, 0, vbufn, (uint32_t )0);
#line 980
          packets ++;
          }
        } else {
#line 972
          goto _L___0;
        }
      } else {
#line 972
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      {
#line 982
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"5 ");
#line 983
      tmp___7 = write_ps_header(buf___5, rem.SCR, (long )rem.muxr, (uint8_t )1, (uint8_t )0,
                                (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1,
                                (uint8_t )0, (uint8_t )0, (uint32_t )0, (uint8_t )0,
                                (uint8_t )0, (uint32_t )0);
#line 983
      pos = (long )tmp___7;
#line 986
      tmp___8 = write_pes_header((u8 )190, (int )((long )pack_size - pos), 0L, buf___5 + pos,
                                 0);
#line 986
      pos += (long )tmp___8;
#line 988
      write(fout, (void const   *)(buf___5), (size_t )pos);
      }
    }
#line 995
    if (rem.SCR > (rem.vdts + rem.vpts_off) - rem.vpts_delay) {
#line 996
      rem.SCR = rem.vdts - rem.vpts_off;
    }
#line 997
    rem.SCR = (uint32_t )((u64 )rem.SCR + (u64 )SCR_inc);
#line 999
    if (rem.apts_off + rem.SCR < rem.apts_delay) {
#line 999
      pts_d = (u64 )0;
    } else {
#line 1000
      pts_d = ((u64 )rem.SCR + (u64 )rem.apts_off) - (u64 )rem.apts_delay;
    }
    {
#line 1001
    tmp___9 = del_ptss(abufl, (int )((uint32_t )pts_d), & abufn);
#line 1001
    abuf -= (long )tmp___9;
    }
#line 1003
    if (rem.vpts_off + rem.SCR < rem.vpts_delay) {
#line 1003
      pts_d = (u64 )0;
    } else {
#line 1004
      pts_d = ((u64 )rem.SCR + (u64 )rem.vpts_off) - (u64 )rem.vpts_delay;
    }
    {
#line 1005
    tmp___10 = del_ptss(vbufl, (int )((uint32_t )pts_d), & vbufn);
#line 1005
    vbuf -= (long )tmp___10;
#line 1007
    print_info(& rem, 1);
    }
  }
  while_break___2: /* CIL Label */ ;
  }
  {
#line 1013
  tmp___13 = write_ps_header(buf___5, rem.SCR, (long )rem.muxr, (uint8_t )1, (uint8_t )0,
                             (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1, (uint8_t )0,
                             (uint8_t )0, (uint32_t )0, (uint8_t )0, (uint8_t )0,
                             (uint32_t )0);
#line 1013
  pos = (long )tmp___13;
#line 1016
  tmp___14 = write_pes_header((u8 )190, (int )(((long )pack_size - pos) - 4L), 0L,
                              buf___5 + pos, 0);
#line 1016
  pos += (long )tmp___14;
#line 1018
  pos = (long )(rem.pack_size - 4);
#line 1019
  write(fout, (void const   *)(buf___5), (size_t )pos);
#line 1021
  write(fout, (void const   *)(mpeg_end), (size_t )4);
#line 1022
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\ndone\n");
  }
#line 1023
  return;
}
}
#line 1038 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void init_PESBuffer(PESBuffer *pbuf , int pes_size , int buf_size , uint8_t type ) 
{ 


  {
  {
#line 1040
  init_framel(pbuf->frame_list);
#line 1041
  init_ptsl(pbuf->pts_list);
#line 1042
  ring_init(& pbuf->pes_buffy, buf_size);
#line 1043
  pbuf->pes_size = pes_size;
#line 1044
  pbuf->type = type;
#line 1045
  pbuf->written = (uint64_t )0;
#line 1046
  pbuf->read = (uint64_t )0;
  }
#line 1047
  return;
}
}
#line 1059 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void init_REMUX(REMUX *rem ) 
{ 


  {
#line 1061
  rem->num_pbuf = 0;
#line 1062
  return;
}
}
#line 1070 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void remux_main(uint8_t *buf___5 , int count , p2p *p ) 
{ 
  int i ;
  int b ;
  int bufsize ;
  PESBuffer *pbuf ;
  REMUX *rem ;
  uint8_t type ;
  int *npbuf ;
  uint32_t PTS ;
  unsigned int tmp ;
  uint32_t tmp___0 ;
  int tmp___1 ;

  {
#line 1073
  bufsize = 0;
#line 1075
  rem = (REMUX *)p->data;
#line 1076
  type = *(buf___5 + 3);
#line 1077
  npbuf = & rem->num_pbuf;
  {
#line 1080
  if ((int )type == 189) {
#line 1080
    goto case_189;
  }
#line 1082
  if ((int )type == 224) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 225) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 226) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 227) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 228) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 229) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 230) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 231) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 232) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 233) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 234) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 235) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 236) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 237) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 238) {
#line 1082
    goto case_224;
  }
#line 1082
  if ((int )type == 239) {
#line 1082
    goto case_224;
  }
#line 1084
  if ((int )type == 192) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 193) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 194) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 195) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 196) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 197) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 198) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 199) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 200) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 201) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 202) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 203) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 204) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 205) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 206) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 207) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 208) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 209) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 210) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 211) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 212) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 213) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 214) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 215) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 216) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 217) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 218) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 219) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 220) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 221) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 222) {
#line 1084
    goto case_192;
  }
#line 1084
  if ((int )type == 223) {
#line 1084
    goto case_192;
  }
#line 1105
  goto switch_default;
  case_189: /* CIL Label */ 
#line 1081
  bufsize = 2097152;
  case_224: /* CIL Label */ 
  case_225: /* CIL Label */ 
  case_226: /* CIL Label */ 
  case_227: /* CIL Label */ 
  case_228: /* CIL Label */ 
  case_229: /* CIL Label */ 
  case_230: /* CIL Label */ 
  case_231: /* CIL Label */ 
  case_232: /* CIL Label */ 
  case_233: /* CIL Label */ 
  case_234: /* CIL Label */ 
  case_235: /* CIL Label */ 
  case_236: /* CIL Label */ 
  case_237: /* CIL Label */ 
  case_238: /* CIL Label */ 
  case_239: /* CIL Label */ 
#line 1083
  if (! bufsize) {
#line 1083
    bufsize = 20971520;
  }
  case_192: /* CIL Label */ 
  case_193: /* CIL Label */ 
  case_194: /* CIL Label */ 
  case_195: /* CIL Label */ 
  case_196: /* CIL Label */ 
  case_197: /* CIL Label */ 
  case_198: /* CIL Label */ 
  case_199: /* CIL Label */ 
  case_200: /* CIL Label */ 
  case_201: /* CIL Label */ 
  case_202: /* CIL Label */ 
  case_203: /* CIL Label */ 
  case_204: /* CIL Label */ 
  case_205: /* CIL Label */ 
  case_206: /* CIL Label */ 
  case_207: /* CIL Label */ 
  case_208: /* CIL Label */ 
  case_209: /* CIL Label */ 
  case_210: /* CIL Label */ 
  case_211: /* CIL Label */ 
  case_212: /* CIL Label */ 
  case_213: /* CIL Label */ 
  case_214: /* CIL Label */ 
  case_215: /* CIL Label */ 
  case_216: /* CIL Label */ 
  case_217: /* CIL Label */ 
  case_218: /* CIL Label */ 
  case_219: /* CIL Label */ 
  case_220: /* CIL Label */ 
  case_221: /* CIL Label */ 
  case_222: /* CIL Label */ 
  case_223: /* CIL Label */ 
#line 1085
  if (! bufsize) {
#line 1085
    bufsize = 2097152;
  }
#line 1086
  b = -1;
#line 1087
  i = 0;
  {
#line 1087
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1087
    if (! (i < *npbuf)) {
#line 1087
      goto while_break;
    }
#line 1088
    if ((int )type == (int )rem->pbuf_list[i].type) {
#line 1089
      b = i;
#line 1090
      goto while_break;
    }
#line 1087
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1093
  if (b < 0) {
#line 1094
    if (*npbuf < 4) {
      {
#line 1095
      init_PESBuffer(& rem->pbuf_list[*npbuf], p->repack + 6, bufsize, type);
#line 1097
      b = *npbuf;
#line 1098
      (*npbuf) ++;
      }
    } else {
      {
#line 1100
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not enough PES buffers\n");
#line 1101
      exit(1);
      }
    }
  }
#line 1104
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1106
  return;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1109
  pbuf = & rem->pbuf_list[b];
#line 1110
  tmp___1 = ring_write(& pbuf->pes_buffy, (char *)buf___5, count);
  }
#line 1110
  if (tmp___1 != count) {
    {
#line 1111
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"buffer overflow type 0x%2x\n",
            (int )type);
#line 1112
    exit(1);
    }
  } else {
#line 1114
    pbuf->written += (uint64_t )count;
#line 1115
    if ((int )p->flag2 & 192) {
      {
#line 1116
      tmp = trans_pts_dts(p->pts);
#line 1116
      tmp___0 = ntohl(tmp);
#line 1116
      PTS = tmp___0;
#line 1117
      add_pts(pbuf->pts_list, PTS, (int )pbuf->written, (int )pbuf->written, 0, (uint32_t )0);
      }
    }
#line 1120
    p->flag2 = (uint8_t )0;
  }
#line 1123
  return;
}
}
#line 1125 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void output_mux(p2p *p ) 
{ 
  int i ;
  int filling ;
  PESBuffer *pbuf ;
  ringbuffy *pes_buffy ;
  REMUX *rem ;
  int repack ;
  int npbuf ;
  int tmp ;
  int tmp___0 ;

  {
#line 1130
  rem = (REMUX *)p->data;
#line 1131
  repack = p->repack;
#line 1132
  npbuf = rem->num_pbuf;
#line 1134
  i = 0;
  {
#line 1134
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1134
    if (! (i < npbuf)) {
#line 1134
      goto while_break;
    }
    {
#line 1135
    pbuf = & rem->pbuf_list[i];
#line 1136
    pes_buffy = & pbuf->pes_buffy;
#line 1137
    tmp = ring_rest(pes_buffy);
#line 1137
    filling = pes_buffy->size - tmp;
    }
#line 1138
    if (filling / (2 * repack)) {
      {
#line 1139
      tmp___0 = ring_read_file(pes_buffy, p->fd1, (filling / repack) * repack);
#line 1139
      pbuf->read += (uint64_t )tmp___0;
      }
    }
#line 1134
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1143
  return;
}
}
#line 1149 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/remux.c"
void remux2(int fdin , int fdout ) 
{ 
  p2p p ;
  int count ;
  uint8_t buf___5[32768] ;
  uint64_t length ;
  uint64_t l ;
  int verb ;
  REMUX rem ;
  __off64_t tmp ;
  ssize_t tmp___0 ;

  {
  {
#line 1152
  count = 1;
#line 1154
  length = (uint64_t )0;
#line 1155
  l = (uint64_t )0;
#line 1156
  verb = 0;
#line 1159
  init_p2p(& p, & remux_main, 2048);
#line 1160
  p.fd1 = fdout;
#line 1161
  p.data = (void *)(& rem);
  }
#line 1164
  if (fdin != 0) {
#line 1164
    verb = 1;
  }
#line 1166
  if (verb) {
    {
#line 1167
    tmp = lseek(fdin, (__off64_t )0, 2);
#line 1167
    length = (uint64_t )tmp;
#line 1168
    lseek(fdin, (__off64_t )0, 0);
    }
  }
  {
#line 1171
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1171
    if (! (count > 0)) {
#line 1171
      goto while_break;
    }
    {
#line 1172
    tmp___0 = read(fdin, (void *)(buf___5), (size_t )32768);
#line 1172
    count = (int )tmp___0;
#line 1173
    l += (uint64_t )count;
    }
#line 1174
    if (verb) {
      {
#line 1175
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Writing  %2.2f %%\r",
              (100. * (double )l) / (double )length);
      }
    }
    {
#line 1178
    get_pes(buf___5, count, & p, & pes_repack);
#line 1179
    output_mux(& p);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1182
  return;
}
}
#line 483 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 41 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.h"
void ring_destroy(ringbuffy *rbuf ) ;
#line 44
int ring_write_file(ringbuffy *rbuf , int fd___0 , int count ) ;
#line 23 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_init(ringbuffy *rbuf , int size ) 
{ 
  char *tmp ;
  void *tmp___0 ;

  {
#line 25
  if (size > 0) {
    {
#line 26
    rbuf->size = size;
#line 27
    tmp___0 = malloc(sizeof(char ) * (unsigned long )size);
#line 27
    tmp = (char *)tmp___0;
#line 27
    rbuf->buffy = tmp;
    }
#line 27
    if (! tmp) {
      {
#line 28
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not enough memory for ringbuffy\n");
      }
#line 29
      return (-1);
    }
  } else {
    {
#line 32
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Wrong size for ringbuffy\n");
    }
#line 33
    return (-1);
  }
#line 35
  rbuf->read_pos = 0;
#line 36
  rbuf->write_pos = 0;
#line 37
  return (0);
}
}
#line 41 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
void ring_destroy(ringbuffy *rbuf ) 
{ 


  {
  {
#line 43
  free((void *)rbuf->buffy);
  }
#line 44
  return;
}
}
#line 47 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_write(ringbuffy *rbuf , char *data , int count ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;

  {
#line 52
  if (count <= 0) {
#line 52
    return (0);
  }
#line 53
  pos = rbuf->write_pos;
#line 54
  rest = rbuf->size - pos;
#line 55
  diff = rbuf->read_pos - pos;
#line 56
  if (diff > 0) {
#line 56
    free___0 = diff - 1;
  } else {
#line 56
    free___0 = (rbuf->size + diff) - 1;
  }
#line 58
  if (free___0 <= 0) {
#line 58
    return (-1000);
  }
#line 59
  if (free___0 < count) {
#line 59
    count = free___0;
  }
#line 61
  if (count >= rest) {
    {
#line 62
    memcpy(rbuf->buffy + pos, data, rest);
    }
#line 63
    if (count - rest) {
      {
#line 64
      memcpy(rbuf->buffy, data + rest, count - rest);
      }
    }
#line 65
    rbuf->write_pos = count - rest;
  } else {
    {
#line 67
    memcpy(rbuf->buffy + pos, data, count);
#line 68
    rbuf->write_pos += count;
    }
  }
#line 71
  return (count);
}
}
#line 77 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_peek(ringbuffy *rbuf , char *data , int count , long off ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;

  {
#line 82
  if (count <= 0) {
#line 82
    return (0);
  }
#line 83
  pos = (int )((long )rbuf->read_pos + off);
#line 84
  rest = rbuf->size - pos;
#line 85
  diff = rbuf->write_pos - pos;
#line 86
  if (diff >= 0) {
#line 86
    free___0 = diff;
  } else {
#line 86
    free___0 = rbuf->size + diff;
  }
#line 88
  if (free___0 <= 0) {
#line 88
    return (-1000);
  }
#line 89
  if (free___0 < count) {
#line 89
    count = free___0;
  }
#line 91
  if (count < rest) {
    {
#line 92
    memcpy(data, rbuf->buffy + pos, count);
    }
  } else {
    {
#line 94
    memcpy(data, rbuf->buffy + pos, rest);
    }
#line 95
    if (count - rest) {
      {
#line 96
      memcpy(data + rest, rbuf->buffy, count - rest);
      }
    }
  }
#line 99
  return (count);
}
}
#line 102 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_read(ringbuffy *rbuf , char *data , int count ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;

  {
#line 107
  if (count <= 0) {
#line 107
    return (0);
  }
#line 108
  pos = rbuf->read_pos;
#line 109
  rest = rbuf->size - pos;
#line 110
  diff = rbuf->write_pos - pos;
#line 111
  if (diff >= 0) {
#line 111
    free___0 = diff;
  } else {
#line 111
    free___0 = rbuf->size + diff;
  }
#line 113
  if (rest <= 0) {
#line 113
    return (0);
  }
#line 114
  if (free___0 < count) {
#line 114
    count = free___0;
  }
#line 116
  if (count < rest) {
    {
#line 117
    memcpy(data, rbuf->buffy + pos, count);
#line 118
    rbuf->read_pos += count;
    }
  } else {
    {
#line 120
    memcpy(data, rbuf->buffy + pos, rest);
    }
#line 121
    if (count - rest) {
      {
#line 122
      memcpy(data + rest, rbuf->buffy, count - rest);
      }
    }
#line 123
    rbuf->read_pos = count - rest;
  }
#line 126
  return (count);
}
}
#line 131 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_write_file(ringbuffy *rbuf , int fd___0 , int count ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;
  int rr ;
  ssize_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;

  {
#line 136
  if (count <= 0) {
#line 136
    return (0);
  }
#line 137
  pos = rbuf->write_pos;
#line 138
  rest = rbuf->size - pos;
#line 139
  diff = rbuf->read_pos - pos;
#line 140
  if (diff > 0) {
#line 140
    free___0 = diff - 1;
  } else {
#line 140
    free___0 = (rbuf->size + diff) - 1;
  }
#line 142
  if (rest <= 0) {
#line 142
    return (0);
  }
#line 143
  if (free___0 < count) {
#line 143
    count = free___0;
  }
#line 145
  if (count >= rest) {
    {
#line 146
    tmp = read(fd___0, (void *)(rbuf->buffy + pos), (size_t )rest);
#line 146
    rr = (int )tmp;
    }
#line 147
    if (rr == rest) {
#line 147
      if (count - rest) {
        {
#line 148
        tmp___0 = read(fd___0, (void *)rbuf->buffy, (size_t )(count - rest));
#line 148
        rr = (int )((ssize_t )rr + tmp___0);
        }
      }
    }
#line 149
    if (rr >= 0) {
#line 150
      rbuf->write_pos = (pos + rr) % rbuf->size;
    }
  } else {
    {
#line 152
    tmp___1 = read(fd___0, (void *)(rbuf->buffy + pos), (size_t )count);
#line 152
    rr = (int )tmp___1;
    }
#line 153
    if (rr >= 0) {
#line 154
      rbuf->write_pos += rr;
    }
  }
#line 157
  return (rr);
}
}
#line 162 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_read_file(ringbuffy *rbuf , int fd___0 , int count ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;
  int rr ;
  ssize_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;

  {
#line 167
  if (count <= 0) {
#line 167
    return (0);
  }
#line 168
  pos = rbuf->read_pos;
#line 169
  rest = rbuf->size - pos;
#line 170
  diff = rbuf->write_pos - pos;
#line 171
  if (diff >= 0) {
#line 171
    free___0 = diff;
  } else {
#line 171
    free___0 = rbuf->size + diff;
  }
#line 173
  if (free___0 <= 0) {
#line 173
    return (-1000);
  }
#line 174
  if (free___0 < count) {
#line 174
    count = free___0;
  }
#line 176
  if (count >= rest) {
    {
#line 177
    tmp = write(fd___0, (void const   *)(rbuf->buffy + pos), (size_t )rest);
#line 177
    rr = (int )tmp;
    }
#line 178
    if (rr == rest) {
#line 178
      if (count - rest) {
        {
#line 179
        tmp___0 = write(fd___0, (void const   *)rbuf->buffy, (size_t )(count - rest));
#line 179
        rr = (int )((ssize_t )rr + tmp___0);
        }
      }
    }
#line 180
    if (rr >= 0) {
#line 181
      rbuf->read_pos = (pos + rr) % rbuf->size;
    }
  } else {
    {
#line 183
    tmp___1 = write(fd___0, (void const   *)(rbuf->buffy + pos), (size_t )count);
#line 183
    rr = (int )tmp___1;
    }
#line 184
    if (rr >= 0) {
#line 185
      rbuf->read_pos += rr;
    }
  }
#line 189
  return (rr);
}
}
#line 192 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ringbuffy.c"
int ring_rest(ringbuffy *rbuf ) 
{ 
  int diff ;
  int free___0 ;
  int pos ;
  int rest ;

  {
#line 194
  pos = rbuf->read_pos;
#line 195
  rest = rbuf->size - pos;
#line 196
  diff = rbuf->write_pos - pos;
#line 197
  if (diff >= 0) {
#line 197
    free___0 = diff;
  } else {
#line 197
    free___0 = rbuf->size + diff;
  }
#line 199
  return (free___0);
}
}
#line 375 "/usr/include/netinet/in.h"
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) ntohs)(uint16_t __netshort )  __attribute__((__const__)) ;
#line 173 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
void write_pes(int fd___0 , pes_packet *p ) ;
#line 266
void init_ps(ps_packet *p ) ;
#line 274
void write_ps(int fd___0 , ps_packet *p ) ;
#line 275
int read_ps(int f , ps_packet *p ) ;
#line 353
void get_pespts(unsigned char *av_pts , unsigned char *pts ) ;
#line 156 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.h"
int write_ts_header(uint16_t pid___0 , uint8_t *counter , int pes_start , uint8_t *buf___5 ,
                    uint8_t length ) ;
#line 164
void setup_pes2ts(p2p *p , uint32_t pida , uint32_t pidv , void (*ts_write)(uint8_t *buf ,
                                                                            int count ,
                                                                            p2p *p ) ) ;
#line 166
void kpes_to_ts(p2p *p , uint8_t *buf___5 , int count ) ;
#line 167
void setup_ts2pes(p2p *pa___0 , p2p *pv___0 , uint32_t pida , uint32_t pidv , void (*pes_write)(uint8_t *buf ,
                                                                                                int count ,
                                                                                                p2p *p ) ) ;
#line 169
void kts_to_pes(p2p *p , uint8_t *buf___5 ) ;
#line 171
void extract_from_pes(int fdin , int fdout , uint8_t id , int es ) ;
#line 172
int64_t pes_dmx(int fdin , int fdouta , int fdoutv , int es ) ;
#line 173
void pes_to_ts2(int fdin , int fdout , uint16_t pida , uint16_t pidv ) ;
#line 174
void ts_to_pes(int fdin , uint16_t pida , uint16_t pidv , int ps ) ;
#line 175
int get_ainfo(uint8_t *mbuf , int count , AudioInfo *ai___0 , int pr ) ;
#line 176
int get_vinfo(uint8_t *mbuf , int count , VideoInfo *vi___0 , int pr ) ;
#line 177
int get_ac3info(uint8_t *mbuf , int count , AudioInfo *ai___0 , int pr ) ;
#line 215
void free_ipack(ipack *p ) ;
#line 218
void ps_pes(ipack *p ) ;
#line 221
int64_t ts_demux(int fdin , int fdv_out , int fda_out , uint16_t pida , uint16_t pidv ,
                 int es ) ;
#line 224
void ts2es(int fdin , uint16_t pidv ) ;
#line 225
void insert_pat_pmt(int fdin , int fdout ) ;
#line 226
void change_aspect(int fdin , int fdout , int aspect ) ;
#line 36 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static uint8_t tspid0[188]  = 
#line 36 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
  {      (uint8_t )71,      (uint8_t )64,      (uint8_t )0,      (uint8_t )16, 
        (uint8_t )0,      (uint8_t )0,      (uint8_t )176,      (uint8_t )17, 
        (uint8_t )0,      (uint8_t )0,      (uint8_t )203,      (uint8_t )0, 
        (uint8_t )0,      (uint8_t )0,      (uint8_t )0,      (uint8_t )224, 
        (uint8_t )16,      (uint8_t )0,      (uint8_t )1,      (uint8_t )228, 
        (uint8_t )0,      (uint8_t )42,      (uint8_t )214,      (uint8_t )26, 
        (uint8_t )251,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255};
#line 63 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static uint8_t tspid1[188]  = 
#line 63
  {      (uint8_t )71,      (uint8_t )68,      (uint8_t )0,      (uint8_t )16, 
        (uint8_t )0,      (uint8_t )2,      (uint8_t )176,      (uint8_t )28, 
        (uint8_t )0,      (uint8_t )1,      (uint8_t )203,      (uint8_t )0, 
        (uint8_t )0,      (uint8_t )224,      (uint8_t )160,      (uint8_t )240, 
        (uint8_t )5,      (uint8_t )72,      (uint8_t )3,      (uint8_t )1, 
        (uint8_t )0,      (uint8_t )0,      (uint8_t )2,      (uint8_t )224, 
        (uint8_t )160,      (uint8_t )240,      (uint8_t )0,      (uint8_t )3, 
        (uint8_t )224,      (uint8_t )80,      (uint8_t )240,      (uint8_t )0, 
        (uint8_t )174,      (uint8_t )234,      (uint8_t )78,      (uint8_t )72, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255, 
        (uint8_t )255,      (uint8_t )255,      (uint8_t )255,      (uint8_t )255};
#line 90 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
unsigned int trans_pts_dts(unsigned char *pts ) 
{ 
  uint32_t wts ;

  {
#line 94
  wts = (uint32_t )(((((int )*(pts + 0) & 6) << 4) | (((int )*(pts + 1) & 252) >> 2)) << 24);
#line 96
  wts |= (unsigned int )(((((int )*(pts + 1) & 3) << 6) | (((int )*(pts + 2) & 252) >> 2)) << 16);
#line 98
  wts |= (unsigned int )(((((int )*(pts + 2) & 2) << 6) | (((int )*(pts + 3) & 254) >> 1)) << 8);
#line 100
  wts |= (unsigned int )((((int )*(pts + 3) & 1) << 7) | (((int )*(pts + 4) & 254) >> 1));
#line 102
  return (wts);
}
}
#line 106 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void get_pespts(unsigned char *av_pts , unsigned char *pts ) 
{ 


  {
#line 109
  *(pts + 0) = (unsigned char )(33 | (((int )*(av_pts + 0) & 192) >> 5));
#line 111
  *(pts + 1) = (unsigned char )((((int )*(av_pts + 0) & 63) << 2) | (((int )*(av_pts + 1) & 192) >> 6));
#line 113
  *(pts + 2) = (unsigned char )((1 | (((int )*(av_pts + 1) & 63) << 2)) | (((int )*(av_pts + 2) & 128) >> 6));
#line 115
  *(pts + 3) = (unsigned char )((((int )*(av_pts + 2) & 127) << 1) | (((int )*(av_pts + 3) & 128) >> 7));
#line 117
  *(pts + 4) = (unsigned char )(1 | (((int )*(av_pts + 3) & 127) << 1));
#line 118
  return;
}
}
#line 120 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
uint16_t get_pid(uint8_t *pid___0 ) 
{ 
  uint16_t pp ;

  {
#line 122
  pp = (uint16_t )0;
#line 124
  pp = (uint16_t )(((int )*(pid___0 + 0) & 31) << 8);
#line 125
  pp = (uint16_t )((int )pp | (int )*(pid___0 + 1));
#line 127
  return (pp);
}
}
#line 130 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int write_ts_header(uint16_t pid___0 , uint8_t *counter , int pes_start , uint8_t *buf___5 ,
                    uint8_t length ) 
{ 
  int i ;
  int c ;
  int fill ;
  uint8_t tshead[4] ;
  uint8_t tmp ;

  {
#line 134
  c = 0;
#line 136
  tshead[0] = (uint8_t )71;
#line 136
  tshead[1] = (uint8_t )0;
#line 136
  tshead[2] = (uint8_t )0;
#line 136
  tshead[3] = (uint8_t )16;
#line 139
  fill = 184 - (int )length;
#line 140
  if (pes_start) {
#line 140
    tshead[1] = (uint8_t )64;
  }
#line 141
  if (fill) {
#line 141
    tshead[3] = (uint8_t )48;
  }
  {
#line 142
  tshead[1] = (uint8_t )((int )tshead[1] | (int )((uint8_t )(((int )pid___0 & 7936) >> 8)));
#line 143
  tshead[2] = (uint8_t )((int )tshead[2] | (int )((uint8_t )((int )pid___0 & 255)));
#line 144
  tmp = *counter;
#line 144
  *counter = (uint8_t )((int )*counter + 1);
#line 144
  tshead[3] = (uint8_t )((int )tshead[3] | ((int )tmp & 15));
#line 145
  memcpy((void */* __restrict  */)buf___5, (void const   */* __restrict  */)(tshead),
         (size_t )4);
#line 146
  c += 4;
  }
#line 149
  if (fill) {
#line 150
    *(buf___5 + 4) = (uint8_t )(fill - 1);
#line 151
    c ++;
#line 152
    if (fill > 1) {
#line 153
      *(buf___5 + 5) = (uint8_t )0;
#line 154
      c ++;
    }
#line 156
    i = 6;
    {
#line 156
    while (1) {
      while_continue: /* CIL Label */ ;
#line 156
      if (! (i < fill + 4)) {
#line 156
        goto while_break;
      }
#line 157
      *(buf___5 + i) = (uint8_t )255;
#line 158
      c ++;
#line 156
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 162
  return (c);
}
}
#line 166 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int write_pes_header(unsigned char id , int length , long PTS , unsigned char *obuf ,
                     int stuffing ) 
{ 
  uint8_t le[2] ;
  uint8_t dummy[3] ;
  uint8_t *pts ;
  uint8_t ppts[5] ;
  long lpts ;
  int c ;
  uint8_t headr[3] ;
  uint32_t tmp ;

  {
  {
#line 175
  headr[0] = (uint8_t )0;
#line 175
  headr[1] = (uint8_t )0;
#line 175
  headr[2] = (uint8_t )1;
#line 177
  tmp = htonl((uint32_t )PTS);
#line 177
  lpts = (long )tmp;
#line 178
  pts = (uint8_t *)(& lpts);
#line 180
  get_pespts(pts, ppts);
#line 182
  c = 0;
#line 183
  memcpy((void */* __restrict  */)(obuf + c), (void const   */* __restrict  */)(headr),
         (size_t )3);
#line 184
  c += 3;
#line 185
  memcpy((void */* __restrict  */)(obuf + c), (void const   */* __restrict  */)(& id),
         (size_t )1);
#line 186
  c ++;
#line 188
  le[0] = (uint8_t )0;
#line 189
  le[1] = (uint8_t )0;
#line 190
  length -= 6 + stuffing;
#line 192
  le[0] = (uint8_t )((int )le[0] | ((int )((uint8_t )(length >> 8)) & 255));
#line 193
  le[1] = (uint8_t )((int )le[1] | ((int )((uint8_t )length) & 255));
#line 194
  memcpy((void */* __restrict  */)(obuf + c), (void const   */* __restrict  */)(le),
         (size_t )2);
#line 195
  c += 2;
  }
#line 197
  if ((int )id == 190) {
    {
#line 198
    memset((void *)(obuf + c), 255, (size_t )length);
#line 199
    c += length;
    }
#line 200
    return (c);
  }
#line 203
  dummy[0] = (uint8_t )128;
#line 204
  dummy[1] = (uint8_t )0;
#line 205
  dummy[2] = (uint8_t )0;
#line 206
  if (PTS) {
#line 207
    dummy[1] = (uint8_t )((int )dummy[1] | 128);
#line 208
    dummy[2] = (uint8_t )(5 + stuffing);
  }
  {
#line 210
  memcpy((void */* __restrict  */)(obuf + c), (void const   */* __restrict  */)(dummy),
         (size_t )3);
#line 211
  c += 3;
#line 212
  memset((void *)(obuf + c), 255, (size_t )stuffing);
  }
#line 214
  if (PTS) {
    {
#line 215
    memcpy((void */* __restrict  */)(obuf + c), (void const   */* __restrict  */)(ppts),
           (size_t )5);
#line 216
    c += 5;
    }
  }
#line 219
  return (c);
}
}
#line 223 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void init_p2p(p2p *p , void (*func)(uint8_t *buf , int count , p2p *p ) , int repack ) 
{ 
  uint16_t tmp ;

  {
  {
#line 225
  p->found = 0;
#line 226
  p->cid = (uint8_t )0;
#line 227
  p->mpeg = 0;
#line 228
  memset((void *)(p->buf), 0, (size_t )524280);
#line 229
  p->done = 0;
#line 230
  p->fd1 = -1;
#line 231
  p->func = func;
#line 232
  p->bigend_repack = (uint16_t )0;
#line 233
  p->repack = 0;
  }
#line 234
  if (repack < 65535) {
#line 234
    if (repack > 265) {
      {
#line 235
      p->repack = repack - 6;
#line 236
      tmp = htons((uint16_t )((short )((repack - 6) & 65535)));
#line 236
      p->bigend_repack = tmp;
      }
    } else {
      {
#line 239
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Repack size %d is out of range\n",
              repack);
#line 240
      exit(1);
      }
    }
  } else {
    {
#line 239
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Repack size %d is out of range\n",
            repack);
#line 240
    exit(1);
    }
  }
#line 242
  return;
}
}
#line 246 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void pes_repack(p2p *p ) 
{ 
  int count ;
  int repack ;
  int rest ;
  uint8_t buf___5[65535] ;
  int bfill ;
  int diff ;
  uint16_t length ;

  {
#line 248
  count = 0;
#line 249
  repack = p->repack;
#line 250
  rest = (int )p->plength;
#line 252
  bfill = 0;
#line 256
  if (rest < 0) {
    {
#line 257
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Error in repack\n");
    }
#line 258
    return;
  }
#line 261
  if (! repack) {
    {
#line 262
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"forgot to set repack size\n");
    }
#line 263
    return;
  }
#line 266
  if (p->plength == (uint32_t )repack) {
    {
#line 267
    memcpy((void */* __restrict  */)(p->buf + 4), (void const   */* __restrict  */)((char *)(& p->bigend_repack)),
           (size_t )2);
#line 268
    (*(p->func))(p->buf, repack + 6, p);
    }
#line 269
    return;
  }
  {
#line 272
  buf___5[0] = (uint8_t )0;
#line 273
  buf___5[1] = (uint8_t )0;
#line 274
  buf___5[2] = (uint8_t )1;
#line 275
  buf___5[3] = p->cid;
#line 276
  memcpy((void */* __restrict  */)(buf___5 + 4), (void const   */* __restrict  */)((char *)(& p->bigend_repack)),
         (size_t )2);
#line 277
  memset((void *)(buf___5 + 6), 0, (size_t )65529);
  }
#line 279
  if (p->mpeg == 2) {
#line 281
    if (rest > repack) {
      {
#line 282
      memcpy((void */* __restrict  */)(p->buf + 4), (void const   */* __restrict  */)((char *)(& p->bigend_repack)),
             (size_t )2);
#line 283
      (*(p->func))(p->buf, repack + 6, p);
#line 284
      count += repack + 6;
#line 285
      rest -= repack;
      }
    } else {
      {
#line 287
      memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(p->buf),
             (size_t )(9 + (int )p->hlength));
#line 288
      bfill = (int )p->hlength;
#line 289
      count += 9 + (int )p->hlength;
#line 290
      rest -= (int )p->hlength + 3;
      }
    }
    {
#line 293
    while (1) {
      while_continue: /* CIL Label */ ;
#line 293
      if (! (rest >= repack - 3)) {
#line 293
        goto while_break;
      }
      {
#line 294
      memset((void *)(buf___5 + 6), 0, (size_t )65529);
#line 295
      buf___5[6] = (uint8_t )128;
#line 296
      buf___5[7] = (uint8_t )0;
#line 297
      buf___5[8] = (uint8_t )0;
#line 298
      memcpy((void */* __restrict  */)(buf___5 + 9), (void const   */* __restrict  */)(p->buf + count),
             (size_t )(repack - 3));
#line 299
      rest -= repack - 3;
#line 300
      count += repack - 3;
#line 301
      (*(p->func))(buf___5, repack + 6, p);
      }
    }
    while_break: /* CIL Label */ ;
    }
#line 304
    if (rest) {
#line 305
      diff = ((repack - 3) - rest) - bfill;
#line 306
      if (! bfill) {
#line 307
        buf___5[6] = (uint8_t )128;
#line 308
        buf___5[7] = (uint8_t )0;
#line 309
        buf___5[8] = (uint8_t )0;
      }
#line 312
      if (diff < 7) {
        {
#line 313
        length = (uint16_t )(((rest + diff) + bfill) + 3);
#line 314
        buf___5[4] = (uint8_t )(((int )length & 65280) >> 8);
#line 315
        buf___5[5] = (uint8_t )((int )length & 255);
#line 316
        buf___5[8] = (uint8_t )(bfill + diff);
#line 317
        memset((void *)((buf___5 + 9) + bfill), 255, (size_t )diff);
#line 318
        memcpy((void */* __restrict  */)(((buf___5 + 9) + bfill) + diff), (void const   */* __restrict  */)(p->buf + count),
               (size_t )rest);
        }
      } else {
        {
#line 320
        length = (uint16_t )((rest + bfill) + 3);
#line 321
        buf___5[4] = (uint8_t )(((int )length & 65280) >> 8);
#line 322
        buf___5[5] = (uint8_t )((int )length & 255);
#line 323
        memcpy((void */* __restrict  */)((buf___5 + 9) + bfill), (void const   */* __restrict  */)(p->buf + count),
               (size_t )rest);
#line 324
        bfill += rest + 9;
#line 325
        write_pes_header((unsigned char)190, diff, 0L, buf___5 + bfill, 0);
        }
      }
      {
#line 328
      (*(p->func))(buf___5, repack + 6, p);
      }
    }
  }
#line 332
  if (p->mpeg == 1) {
#line 334
    if (rest > repack) {
      {
#line 335
      memcpy((void */* __restrict  */)(p->buf + 4), (void const   */* __restrict  */)((char *)(& p->bigend_repack)),
             (size_t )2);
#line 336
      (*(p->func))(p->buf, repack + 6, p);
#line 337
      count += repack + 6;
#line 338
      rest -= repack;
      }
    } else {
      {
#line 340
      memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(p->buf),
             (size_t )(6 + (int )p->hlength));
#line 341
      bfill = (int )p->hlength;
#line 342
      count += 6;
#line 343
      rest -= (int )p->hlength;
      }
    }
    {
#line 346
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 346
      if (! (rest >= repack - 1)) {
#line 346
        goto while_break___0;
      }
      {
#line 347
      memset((void *)(buf___5 + 6), 0, (size_t )65529);
#line 348
      buf___5[6] = (uint8_t )15;
#line 349
      memcpy((void */* __restrict  */)(buf___5 + 7), (void const   */* __restrict  */)(p->buf + count),
             (size_t )(repack - 1));
#line 350
      rest -= repack - 1;
#line 351
      count += repack - 1;
#line 352
      (*(p->func))(buf___5, repack + 6, p);
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 356
    if (rest) {
#line 357
      diff = ((repack - 1) - rest) - bfill;
#line 359
      if (diff < 7) {
        {
#line 360
        length = (uint16_t )(((rest + diff) + bfill) + 1);
#line 361
        buf___5[4] = (uint8_t )(((int )length & 65280) >> 8);
#line 362
        buf___5[5] = (uint8_t )((int )length & 255);
#line 363
        memset((void *)(buf___5 + 6), 255, (size_t )diff);
        }
#line 364
        if (! bfill) {
#line 365
          buf___5[6 + diff] = (uint8_t )15;
        }
        {
#line 367
        memcpy((void */* __restrict  */)((buf___5 + 7) + diff), (void const   */* __restrict  */)(p->buf + count),
               (size_t )(rest + bfill));
        }
      } else {
#line 369
        length = (uint16_t )((rest + bfill) + 1);
#line 370
        buf___5[4] = (uint8_t )(((int )length & 65280) >> 8);
#line 371
        buf___5[5] = (uint8_t )((int )length & 255);
#line 372
        if (! bfill) {
          {
#line 373
          buf___5[6] = (uint8_t )15;
#line 374
          memcpy((void */* __restrict  */)(buf___5 + 7), (void const   */* __restrict  */)(p->buf + count),
                 (size_t )rest);
#line 375
          bfill = rest + 7;
          }
        } else {
          {
#line 377
          memcpy((void */* __restrict  */)(buf___5 + 6), (void const   */* __restrict  */)(p->buf + count),
                 (size_t )(rest + bfill));
#line 378
          bfill += rest + 6;
          }
        }
        {
#line 380
        write_pes_header((unsigned char)190, diff, 0L, buf___5 + bfill, 0);
        }
      }
      {
#line 383
      (*(p->func))(buf___5, repack + 6, p);
      }
    }
  }
#line 386
  return;
}
}
#line 391 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void pes_filt(p2p *p ) 
{ 
  int factor ;

  {
#line 393
  factor = p->mpeg - 1;
#line 395
  if ((int )p->cid == p->filter) {
#line 396
    if (p->es) {
      {
#line 397
      write(p->fd1, (void const   *)(((p->buf + (int )p->hlength) + 6) + 3 * factor),
            (size_t )((p->plength - (uint32_t )p->hlength) - (uint32_t )(3 * factor)));
      }
    } else {
      {
#line 400
      write(p->fd1, (void const   *)(p->buf), (size_t )(p->plength + 6U));
      }
    }
  }
#line 402
  return;
}
}
#line 405 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void extract_from_pes(int fdin , int fdout , uint8_t id , int es ) 
{ 
  p2p p ;
  int count ;
  uint8_t buf___5[4096] ;
  ssize_t tmp ;

  {
  {
#line 408
  count = 1;
#line 411
  init_p2p(& p, (void (*)(uint8_t *buf , int count , p2p *p ))((void *)0), 2048);
#line 412
  p.fd1 = fdout;
#line 413
  p.filter = (int )id;
#line 414
  p.es = es;
  }
  {
#line 416
  while (1) {
    while_continue: /* CIL Label */ ;
#line 416
    if (! (count > 0)) {
#line 416
      goto while_break;
    }
    {
#line 417
    tmp = read(fdin, (void *)(buf___5), (size_t )4096);
#line 417
    count = (int )tmp;
#line 418
    get_pes(buf___5, count, & p, & pes_filt);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 420
  return;
}
}
#line 423 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void pes_dfilt(p2p *p ) 
{ 
  int factor ;
  int fd___0 ;
  int type ;
  int found ;
  int c ;
  unsigned int tmp ;
  uint32_t tmp___0 ;
  int found___0 ;
  int c___0 ;
  unsigned int tmp___1 ;
  uint32_t tmp___2 ;

  {
#line 425
  factor = p->mpeg - 1;
#line 426
  fd___0 = 0;
#line 427
  type = 0;
  {
#line 430
  if ((int )p->cid == 192) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 193) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 194) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 195) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 196) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 197) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 198) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 199) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 200) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 201) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 202) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 203) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 204) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 205) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 206) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 207) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 208) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 209) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 210) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 211) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 212) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 213) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 214) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 215) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 216) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 217) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 218) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 219) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 220) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 221) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 222) {
#line 430
    goto case_192;
  }
#line 430
  if ((int )p->cid == 223) {
#line 430
    goto case_192;
  }
#line 434
  if ((int )p->cid == 224) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 225) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 226) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 227) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 228) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 229) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 230) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 231) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 232) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 233) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 234) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 235) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 236) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 237) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 238) {
#line 434
    goto case_224;
  }
#line 434
  if ((int )p->cid == 239) {
#line 434
    goto case_224;
  }
#line 429
  goto switch_break;
  case_192: /* CIL Label */ 
  case_193: /* CIL Label */ 
  case_194: /* CIL Label */ 
  case_195: /* CIL Label */ 
  case_196: /* CIL Label */ 
  case_197: /* CIL Label */ 
  case_198: /* CIL Label */ 
  case_199: /* CIL Label */ 
  case_200: /* CIL Label */ 
  case_201: /* CIL Label */ 
  case_202: /* CIL Label */ 
  case_203: /* CIL Label */ 
  case_204: /* CIL Label */ 
  case_205: /* CIL Label */ 
  case_206: /* CIL Label */ 
  case_207: /* CIL Label */ 
  case_208: /* CIL Label */ 
  case_209: /* CIL Label */ 
  case_210: /* CIL Label */ 
  case_211: /* CIL Label */ 
  case_212: /* CIL Label */ 
  case_213: /* CIL Label */ 
  case_214: /* CIL Label */ 
  case_215: /* CIL Label */ 
  case_216: /* CIL Label */ 
  case_217: /* CIL Label */ 
  case_218: /* CIL Label */ 
  case_219: /* CIL Label */ 
  case_220: /* CIL Label */ 
  case_221: /* CIL Label */ 
  case_222: /* CIL Label */ 
  case_223: /* CIL Label */ 
#line 431
  fd___0 = p->fd1;
#line 432
  type = 1;
#line 433
  goto switch_break;
  case_224: /* CIL Label */ 
  case_225: /* CIL Label */ 
  case_226: /* CIL Label */ 
  case_227: /* CIL Label */ 
  case_228: /* CIL Label */ 
  case_229: /* CIL Label */ 
  case_230: /* CIL Label */ 
  case_231: /* CIL Label */ 
  case_232: /* CIL Label */ 
  case_233: /* CIL Label */ 
  case_234: /* CIL Label */ 
  case_235: /* CIL Label */ 
  case_236: /* CIL Label */ 
  case_237: /* CIL Label */ 
  case_238: /* CIL Label */ 
  case_239: /* CIL Label */ 
#line 435
  fd___0 = p->fd2;
#line 436
  type = 2;
#line 437
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 440
  if (p->es) {
#line 440
    if (! p->startv) {
#line 440
      if (type == 2) {
#line 441
        found = 0;
#line 442
        c = (6 + (int )p->hlength) + 3 * factor;
#line 444
        if ((int )p->flag2 & 192) {
          {
#line 445
          tmp = trans_pts_dts(p->pts);
#line 445
          tmp___0 = ntohl(tmp);
#line 445
          p->vpts = (int64_t )tmp___0;
          }
        }
        {
#line 446
        while (1) {
          while_continue: /* CIL Label */ ;
#line 446
          if (! found) {
#line 446
            if (! ((uint32_t )(c + 3) < p->plength + 6U)) {
#line 446
              goto while_break;
            }
          } else {
#line 446
            goto while_break;
          }
#line 447
          if ((int )p->buf[c] == 0) {
#line 447
            if ((int )p->buf[c + 1] == 0) {
#line 447
              if ((int )p->buf[c + 2] == 1) {
#line 447
                if ((int )p->buf[c + 3] == 179) {
#line 451
                  found = 1;
                } else {
#line 452
                  c ++;
                }
              } else {
#line 452
                c ++;
              }
            } else {
#line 452
              c ++;
            }
          } else {
#line 452
            c ++;
          }
        }
        while_break: /* CIL Label */ ;
        }
#line 454
        if (found) {
          {
#line 455
          p->startv = 1;
#line 456
          write(fd___0, (void const   *)(p->buf + c), (size_t )((p->plength + 6U) - (uint32_t )c));
          }
        }
#line 458
        fd___0 = 0;
      }
    }
  }
#line 462
  if (p->es) {
#line 462
    if (! p->starta) {
#line 462
      if (type == 1) {
#line 463
        found___0 = 0;
#line 464
        c___0 = (6 + (int )p->hlength) + 3 * factor;
#line 465
        if ((int )p->flag2 & 192) {
          {
#line 466
          tmp___1 = trans_pts_dts(p->pts);
#line 466
          tmp___2 = ntohl(tmp___1);
#line 466
          p->apts = (int64_t )tmp___2;
          }
        }
#line 467
        if (p->startv) {
          {
#line 468
          while (1) {
            while_continue___0: /* CIL Label */ ;
#line 468
            if (! found___0) {
#line 468
              if (! ((uint32_t )(c___0 + 1) < p->plength + 6U)) {
#line 468
                goto while_break___0;
              }
            } else {
#line 468
              goto while_break___0;
            }
#line 469
            if ((int )p->buf[c___0] == 255) {
#line 469
              if (((int )p->buf[c___0 + 1] & 248) == 248) {
#line 471
                found___0 = 1;
              } else {
#line 472
                c___0 ++;
              }
            } else {
#line 472
              c___0 ++;
            }
          }
          while_break___0: /* CIL Label */ ;
          }
        }
#line 474
        if (found___0) {
          {
#line 475
          p->starta = 1;
#line 476
          write(fd___0, (void const   *)(p->buf + c___0), (size_t )((p->plength + 6U) - (uint32_t )c___0));
          }
        }
#line 478
        fd___0 = 0;
      }
    }
  }
#line 482
  if (fd___0) {
#line 483
    if (p->es) {
      {
#line 484
      write(fd___0, (void const   *)(((p->buf + (int )p->hlength) + 6) + 3 * factor),
            (size_t )((p->plength - (uint32_t )p->hlength) - (uint32_t )(3 * factor)));
      }
    } else {
      {
#line 487
      write(fd___0, (void const   *)(p->buf), (size_t )(p->plength + 6U));
      }
    }
  }
#line 489
  return;
}
}
#line 491 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int64_t pes_dmx(int fdin , int fdouta , int fdoutv , int es ) 
{ 
  p2p p ;
  int count ;
  uint8_t buf___5[4096] ;
  uint64_t length ;
  uint64_t l ;
  int verb ;
  __off64_t tmp ;
  ssize_t tmp___0 ;

  {
  {
#line 494
  count = 1;
#line 496
  length = (uint64_t )0;
#line 497
  l = (uint64_t )0;
#line 498
  verb = 0;
#line 500
  init_p2p(& p, (void (*)(uint8_t *buf , int count , p2p *p ))((void *)0), 2048);
#line 501
  p.fd1 = fdouta;
#line 502
  p.fd2 = fdoutv;
#line 503
  p.es = es;
#line 504
  p.startv = 0;
#line 505
  p.starta = 0;
#line 506
  p.apts = (int64_t )-1;
#line 507
  p.vpts = (int64_t )-1;
  }
#line 509
  if (fdin != 0) {
#line 509
    verb = 1;
  }
#line 511
  if (verb) {
    {
#line 512
    tmp = lseek(fdin, (__off64_t )0, 2);
#line 512
    length = (uint64_t )tmp;
#line 513
    lseek(fdin, (__off64_t )0, 0);
    }
  }
  {
#line 516
  while (1) {
    while_continue: /* CIL Label */ ;
#line 516
    if (! (count > 0)) {
#line 516
      goto while_break;
    }
    {
#line 517
    tmp___0 = read(fdin, (void *)(buf___5), (size_t )4096);
#line 517
    count = (int )tmp___0;
#line 518
    l += (uint64_t )count;
    }
#line 519
    if (verb) {
      {
#line 520
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Demuxing %2.2f %%\r",
              (100. * (double )l) / (double )length);
      }
    }
    {
#line 523
    get_pes(buf___5, count, & p, & pes_dfilt);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 526
  return (p.vpts - p.apts);
}
}
#line 532 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static void pes_in_ts(p2p *p ) 
{ 
  int l ;
  int pes_start ;
  uint8_t obuf[188] ;
  long c ;
  int length ;
  uint16_t pid___0 ;
  uint8_t *counter ;
  uint8_t tmp ;
  uint8_t tmp___0 ;

  {
#line 536
  c = 0L;
#line 537
  length = (int )(p->plength + 6U);
#line 540
  pes_start = 1;
  {
#line 542
  if ((int )p->cid == 192) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 193) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 194) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 195) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 196) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 197) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 198) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 199) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 200) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 201) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 202) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 203) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 204) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 205) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 206) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 207) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 208) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 209) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 210) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 211) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 212) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 213) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 214) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 215) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 216) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 217) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 218) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 219) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 220) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 221) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 222) {
#line 542
    goto case_192;
  }
#line 542
  if ((int )p->cid == 223) {
#line 542
    goto case_192;
  }
#line 546
  if ((int )p->cid == 224) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 225) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 226) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 227) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 228) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 229) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 230) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 231) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 232) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 233) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 234) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 235) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 236) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 237) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 238) {
#line 546
    goto case_224;
  }
#line 546
  if ((int )p->cid == 239) {
#line 546
    goto case_224;
  }
#line 563
  goto switch_default;
  case_192: /* CIL Label */ 
  case_193: /* CIL Label */ 
  case_194: /* CIL Label */ 
  case_195: /* CIL Label */ 
  case_196: /* CIL Label */ 
  case_197: /* CIL Label */ 
  case_198: /* CIL Label */ 
  case_199: /* CIL Label */ 
  case_200: /* CIL Label */ 
  case_201: /* CIL Label */ 
  case_202: /* CIL Label */ 
  case_203: /* CIL Label */ 
  case_204: /* CIL Label */ 
  case_205: /* CIL Label */ 
  case_206: /* CIL Label */ 
  case_207: /* CIL Label */ 
  case_208: /* CIL Label */ 
  case_209: /* CIL Label */ 
  case_210: /* CIL Label */ 
  case_211: /* CIL Label */ 
  case_212: /* CIL Label */ 
  case_213: /* CIL Label */ 
  case_214: /* CIL Label */ 
  case_215: /* CIL Label */ 
  case_216: /* CIL Label */ 
  case_217: /* CIL Label */ 
  case_218: /* CIL Label */ 
  case_219: /* CIL Label */ 
  case_220: /* CIL Label */ 
  case_221: /* CIL Label */ 
  case_222: /* CIL Label */ 
  case_223: /* CIL Label */ 
#line 543
  pid___0 = p->pida;
#line 544
  counter = & p->acounter;
#line 545
  goto switch_break;
  case_224: /* CIL Label */ 
  case_225: /* CIL Label */ 
  case_226: /* CIL Label */ 
  case_227: /* CIL Label */ 
  case_228: /* CIL Label */ 
  case_229: /* CIL Label */ 
  case_230: /* CIL Label */ 
  case_231: /* CIL Label */ 
  case_232: /* CIL Label */ 
  case_233: /* CIL Label */ 
  case_234: /* CIL Label */ 
  case_235: /* CIL Label */ 
  case_236: /* CIL Label */ 
  case_237: /* CIL Label */ 
  case_238: /* CIL Label */ 
  case_239: /* CIL Label */ 
  {
#line 547
  pid___0 = p->pidv;
#line 548
  counter = & p->acounter;
#line 550
  tmp = p->count0;
#line 550
  p->count0 = (uint8_t )((int )p->count0 + 1);
#line 550
  tspid0[3] = (uint8_t )((int )tspid0[3] | ((int )tmp & 15));
#line 552
  tmp___0 = p->count1;
#line 552
  p->count1 = (uint8_t )((int )p->count1 + 1);
#line 552
  tspid1[3] = (uint8_t )((int )tspid1[3] | ((int )tmp___0 & 15));
#line 555
  tspid1[24] = (uint8_t )p->pidv;
#line 556
  tspid1[23] = (uint8_t )((int )tspid1[23] | (((int )p->pidv >> 8) & 63));
#line 557
  tspid1[29] = (uint8_t )p->pida;
#line 558
  tspid1[28] = (uint8_t )((int )tspid1[28] | (((int )p->pida >> 8) & 63));
#line 560
  (*(p->func))(tspid0, 188, p);
#line 561
  (*(p->func))(tspid1, 188, p);
  }
#line 562
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 564
  return;
  switch_break: /* CIL Label */ ;
  }
  {
#line 567
  while (1) {
    while_continue: /* CIL Label */ ;
#line 567
    if (! (c < (long )length)) {
#line 567
      goto while_break;
    }
    {
#line 568
    memset((void *)(obuf), 0, (size_t )188);
    }
#line 569
    if ((long )length - c >= 184L) {
      {
#line 570
      l = write_ts_header(pid___0, counter, pes_start, obuf, (uint8_t )184);
#line 572
      memcpy((void */* __restrict  */)(obuf + l), (void const   */* __restrict  */)(p->buf + c),
             (size_t )(188 - l));
#line 573
      c += (long )(188 - l);
      }
    } else {
      {
#line 575
      l = write_ts_header(pid___0, counter, pes_start, obuf, (uint8_t )((long )length - c));
#line 577
      memcpy((void */* __restrict  */)(obuf + l), (void const   */* __restrict  */)(p->buf + c),
             (size_t )(188 - l));
#line 578
      c = (long )length;
      }
    }
    {
#line 580
    (*(p->func))(obuf, 188, p);
#line 581
    pes_start = 0;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 583
  return;
}
}
#line 587 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void pes_to_ts2(int fdin , int fdout , uint16_t pida , uint16_t pidv ) 
{ 
  p2p p ;
  int count ;
  uint8_t buf___5[4096] ;
  uint64_t length ;
  uint64_t l ;
  int verb ;
  __off64_t tmp ;
  ssize_t tmp___0 ;

  {
  {
#line 590
  count = 1;
#line 592
  length = (uint64_t )0;
#line 593
  l = (uint64_t )0;
#line 594
  verb = 0;
#line 596
  init_p2p(& p, (void (*)(uint8_t *buf , int count , p2p *p ))((void *)0), 2048);
#line 597
  p.fd1 = fdout;
#line 598
  p.pida = pida;
#line 599
  p.pidv = pidv;
#line 600
  p.acounter = (uint8_t )0;
#line 601
  p.vcounter = (uint8_t )0;
#line 602
  p.count1 = (uint8_t )0;
#line 603
  p.count0 = (uint8_t )0;
  }
#line 605
  if (fdin != 0) {
#line 605
    verb = 1;
  }
#line 607
  if (verb) {
    {
#line 608
    tmp = lseek(fdin, (__off64_t )0, 2);
#line 608
    length = (uint64_t )tmp;
#line 609
    lseek(fdin, (__off64_t )0, 0);
    }
  }
  {
#line 612
  while (1) {
    while_continue: /* CIL Label */ ;
#line 612
    if (! (count > 0)) {
#line 612
      goto while_break;
    }
    {
#line 613
    tmp___0 = read(fdin, (void *)(buf___5), (size_t )4096);
#line 613
    count = (int )tmp___0;
#line 614
    l += (uint64_t )count;
    }
#line 615
    if (verb) {
      {
#line 616
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Writing TS  %2.2f %%\r",
              (100. * (double )l) / (double )length);
      }
    }
    {
#line 619
    get_pes(buf___5, count, & p, & pes_in_ts);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 622
  return;
}
}
#line 624 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void write_out(uint8_t *buf___5 , int count , void *p ) 
{ 


  {
  {
#line 626
  write(1, (void const   *)buf___5, (size_t )count);
  }
#line 627
  return;
}
}
#line 632 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void find_avpids(int fd___0 , uint16_t *vpid , uint16_t *apid ) 
{ 
  uint8_t buf___5[1880] ;
  int count ;
  int i ;
  int off ;
  ssize_t tmp ;

  {
#line 637
  off = 0;
  {
#line 639
  while (1) {
    while_continue: /* CIL Label */ ;
#line 639
    if (! ((int )*apid == 0)) {
#line 639
      if (! ((int )*vpid == 0)) {
#line 639
        goto while_break;
      }
    }
    {
#line 640
    tmp = read(fd___0, (void *)(buf___5), (size_t )1880);
#line 640
    count = (int )tmp;
#line 641
    i = 0;
    }
    {
#line 641
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 641
      if (! (i < count - 7)) {
#line 641
        goto while_break___0;
      }
#line 642
      if ((int )buf___5[i] == 71) {
#line 643
        if ((int )buf___5[i + 1] & 64) {
#line 644
          off = 0;
#line 645
          if ((int )buf___5[3 + i] & 32) {
#line 646
            off = (int )buf___5[4 + i] + 1;
          }
          {
#line 648
          if ((int )buf___5[(i + 7) + off] == 224) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 225) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 226) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 227) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 228) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 229) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 230) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 231) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 232) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 233) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 234) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 235) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 236) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 237) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 238) {
#line 648
            goto case_224;
          }
#line 648
          if ((int )buf___5[(i + 7) + off] == 239) {
#line 648
            goto case_224;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 192) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 193) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 194) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 195) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 196) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 197) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 198) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 199) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 200) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 201) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 202) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 203) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 204) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 205) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 206) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 207) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 208) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 209) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 210) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 211) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 212) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 213) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 214) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 215) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 216) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 217) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 218) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 219) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 220) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 221) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 222) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 223) {
#line 652
            goto case_192;
          }
#line 652
          if ((int )buf___5[(i + 7) + off] == 189) {
#line 652
            goto case_192;
          }
#line 647
          goto switch_break;
          case_224: /* CIL Label */ 
          case_225: /* CIL Label */ 
          case_226: /* CIL Label */ 
          case_227: /* CIL Label */ 
          case_228: /* CIL Label */ 
          case_229: /* CIL Label */ 
          case_230: /* CIL Label */ 
          case_231: /* CIL Label */ 
          case_232: /* CIL Label */ 
          case_233: /* CIL Label */ 
          case_234: /* CIL Label */ 
          case_235: /* CIL Label */ 
          case_236: /* CIL Label */ 
          case_237: /* CIL Label */ 
          case_238: /* CIL Label */ 
          case_239: /* CIL Label */ 
          {
#line 649
          *vpid = get_pid((buf___5 + i) + 1);
          }
#line 650
          goto switch_break;
          case_192: /* CIL Label */ 
          case_193: /* CIL Label */ 
          case_194: /* CIL Label */ 
          case_195: /* CIL Label */ 
          case_196: /* CIL Label */ 
          case_197: /* CIL Label */ 
          case_198: /* CIL Label */ 
          case_199: /* CIL Label */ 
          case_200: /* CIL Label */ 
          case_201: /* CIL Label */ 
          case_202: /* CIL Label */ 
          case_203: /* CIL Label */ 
          case_204: /* CIL Label */ 
          case_205: /* CIL Label */ 
          case_206: /* CIL Label */ 
          case_207: /* CIL Label */ 
          case_208: /* CIL Label */ 
          case_209: /* CIL Label */ 
          case_210: /* CIL Label */ 
          case_211: /* CIL Label */ 
          case_212: /* CIL Label */ 
          case_213: /* CIL Label */ 
          case_214: /* CIL Label */ 
          case_215: /* CIL Label */ 
          case_216: /* CIL Label */ 
          case_217: /* CIL Label */ 
          case_218: /* CIL Label */ 
          case_219: /* CIL Label */ 
          case_220: /* CIL Label */ 
          case_221: /* CIL Label */ 
          case_222: /* CIL Label */ 
          case_223: /* CIL Label */ 
          case_189: /* CIL Label */ 
          {
#line 653
          *apid = get_pid((buf___5 + i) + 1);
          }
#line 654
          goto switch_break;
          switch_break: /* CIL Label */ ;
          }
        }
#line 657
        i += 187;
      }
#line 659
      if ((int )*apid != 0) {
#line 659
        if ((int )*vpid != 0) {
#line 659
          goto while_break___0;
        }
      }
#line 641
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 662
  return;
}
}
#line 664 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void find_bavpids(uint8_t *buf___5 , int count , uint16_t *vpid , uint16_t *apid ) 
{ 
  int i ;
  int founda ;
  int foundb ;
  int off ;

  {
#line 667
  founda = 0;
#line 668
  foundb = 0;
#line 669
  off = 0;
#line 671
  *vpid = (uint16_t )0;
#line 672
  *apid = (uint16_t )0;
#line 673
  i = 0;
  {
#line 673
  while (1) {
    while_continue: /* CIL Label */ ;
#line 673
    if (! (i < count - 7)) {
#line 673
      goto while_break;
    }
#line 674
    if ((int )*(buf___5 + i) == 71) {
#line 675
      if (((int )*(buf___5 + (i + 1)) & 240) == 64) {
#line 676
        off = 0;
#line 677
        if ((int )*(buf___5 + (3 + i)) & 32) {
#line 678
          off = (int )*(buf___5 + (4 + i)) + 1;
        }
#line 680
        if ((int )*(buf___5 + ((off + i) + 4)) == 0) {
#line 680
          if ((int )*(buf___5 + ((off + i) + 5)) == 0) {
#line 680
            if ((int )*(buf___5 + ((off + i) + 6)) == 1) {
              {
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 224) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 225) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 226) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 227) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 228) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 229) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 230) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 231) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 232) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 233) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 234) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 235) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 236) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 237) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 238) {
#line 684
                goto case_224;
              }
#line 684
              if ((int )*(buf___5 + ((off + i) + 7)) == 239) {
#line 684
                goto case_224;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 192) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 193) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 194) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 195) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 196) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 197) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 198) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 199) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 200) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 201) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 202) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 203) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 204) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 205) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 206) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 207) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 208) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 209) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 210) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 211) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 212) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 213) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 214) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 215) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 216) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 217) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 218) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 219) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 220) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 221) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 222) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 223) {
#line 689
                goto case_192;
              }
#line 689
              if ((int )*(buf___5 + ((off + i) + 7)) == 189) {
#line 689
                goto case_192;
              }
#line 683
              goto switch_break;
              case_224: /* CIL Label */ 
              case_225: /* CIL Label */ 
              case_226: /* CIL Label */ 
              case_227: /* CIL Label */ 
              case_228: /* CIL Label */ 
              case_229: /* CIL Label */ 
              case_230: /* CIL Label */ 
              case_231: /* CIL Label */ 
              case_232: /* CIL Label */ 
              case_233: /* CIL Label */ 
              case_234: /* CIL Label */ 
              case_235: /* CIL Label */ 
              case_236: /* CIL Label */ 
              case_237: /* CIL Label */ 
              case_238: /* CIL Label */ 
              case_239: /* CIL Label */ 
              {
#line 685
              *vpid = get_pid((buf___5 + i) + 1);
#line 686
              foundb = 1;
              }
#line 687
              goto switch_break;
              case_192: /* CIL Label */ 
              case_193: /* CIL Label */ 
              case_194: /* CIL Label */ 
              case_195: /* CIL Label */ 
              case_196: /* CIL Label */ 
              case_197: /* CIL Label */ 
              case_198: /* CIL Label */ 
              case_199: /* CIL Label */ 
              case_200: /* CIL Label */ 
              case_201: /* CIL Label */ 
              case_202: /* CIL Label */ 
              case_203: /* CIL Label */ 
              case_204: /* CIL Label */ 
              case_205: /* CIL Label */ 
              case_206: /* CIL Label */ 
              case_207: /* CIL Label */ 
              case_208: /* CIL Label */ 
              case_209: /* CIL Label */ 
              case_210: /* CIL Label */ 
              case_211: /* CIL Label */ 
              case_212: /* CIL Label */ 
              case_213: /* CIL Label */ 
              case_214: /* CIL Label */ 
              case_215: /* CIL Label */ 
              case_216: /* CIL Label */ 
              case_217: /* CIL Label */ 
              case_218: /* CIL Label */ 
              case_219: /* CIL Label */ 
              case_220: /* CIL Label */ 
              case_221: /* CIL Label */ 
              case_222: /* CIL Label */ 
              case_223: /* CIL Label */ 
              case_189: /* CIL Label */ 
              {
#line 690
              *apid = get_pid((buf___5 + i) + 1);
#line 691
              founda = 1;
              }
#line 692
              goto switch_break;
              switch_break: /* CIL Label */ ;
              }
            }
          }
        }
      }
#line 696
      i += 187;
    }
#line 698
    if (founda) {
#line 698
      if (foundb) {
#line 698
        goto while_break;
      }
    }
#line 673
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 700
  return;
}
}
#line 703 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void ts_to_pes(int fdin , uint16_t pida , uint16_t pidv , int ps ) 
{ 
  uint8_t buf___5[1880] ;
  uint8_t mbuf[188] ;
  int i ;
  int count ;
  uint16_t pid___0 ;
  uint16_t dummy ;
  ipack pa___0 ;
  ipack pv___0 ;
  ipack *p ;
  ssize_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  uint8_t off ;

  {
#line 709
  count = 1;
#line 715
  if (fdin != 0) {
#line 715
    if (! pida) {
      {
#line 716
      find_avpids(fdin, & pidv, & pida);
      }
    } else
#line 715
    if (! pidv) {
      {
#line 716
      find_avpids(fdin, & pidv, & pida);
      }
    }
  }
  {
#line 718
  init_ipack(& pa___0, 2048, & write_out, ps);
#line 719
  init_ipack(& pv___0, 2048, & write_out, ps);
#line 721
  tmp = read(fdin, (void *)(mbuf), (size_t )188);
#line 721
  count = (int )tmp;
  }
#line 721
  if (count < 0) {
    {
#line 722
    perror("reading");
    }
  }
#line 724
  i = 0;
  {
#line 724
  while (1) {
    while_continue: /* CIL Label */ ;
#line 724
    if (! (i < 188)) {
#line 724
      goto while_break;
    }
#line 725
    if ((int )mbuf[i] == 71) {
#line 725
      goto while_break;
    }
#line 724
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 727
  if (i == 188) {
    {
#line 728
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not a TS\n");
    }
#line 729
    return;
  } else {
    {
#line 731
    memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(mbuf + i),
           (size_t )(188 - i));
#line 732
    tmp___0 = read(fdin, (void *)(mbuf), (size_t )i);
#line 732
    count = (int )tmp___0;
    }
#line 732
    if (count < 0) {
      {
#line 733
      perror("reading");
      }
    }
    {
#line 734
    memcpy((void */* __restrict  */)((buf___5 + 188) - i), (void const   */* __restrict  */)(mbuf),
           (size_t )i);
#line 735
    i = 188;
    }
  }
#line 737
  count = 1;
  {
#line 738
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 738
    if (! (count > 0)) {
#line 738
      goto while_break___0;
    }
    {
#line 739
    tmp___1 = read(fdin, (void *)(buf___5 + i), (size_t )(1880 - i));
#line 739
    count = (int )tmp___1;
    }
#line 739
    if (count < 0) {
      {
#line 740
      perror("reading");
      }
    }
#line 743
    if (! pidv) {
      {
#line 744
      find_bavpids(buf___5 + i, 1880 - i, & pidv, & dummy);
      }
#line 745
      if (pidv) {
        {
#line 745
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"vpid %d (0x%02x)\n",
                (int )pidv, (int )pidv);
        }
      }
    }
#line 749
    if (! pida) {
      {
#line 750
      find_bavpids(buf___5 + i, 1880 - i, & dummy, & pida);
      }
#line 751
      if (pida) {
        {
#line 751
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"apid %d (0x%02x)\n",
                (int )pida, (int )pida);
        }
      }
    }
#line 756
    i = 0;
    {
#line 756
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 756
      if (! (i < count)) {
#line 756
        goto while_break___1;
      }
#line 757
      off = (uint8_t )0;
#line 759
      if (count - i < 188) {
#line 759
        goto while_break___1;
      }
      {
#line 761
      pid___0 = get_pid((buf___5 + i) + 1);
      }
#line 762
      if (! ((int )buf___5[3 + i] & 16)) {
#line 763
        goto __Cont;
      }
#line 764
      if ((int )pid___0 == (int )pidv) {
#line 765
        p = & pv___0;
      } else
#line 767
      if ((int )pid___0 == (int )pida) {
#line 768
        p = & pa___0;
      } else {
#line 769
        goto __Cont;
      }
#line 772
      if ((int )buf___5[1 + i] & 64) {
#line 773
        if (p->plength == 524274U) {
          {
#line 774
          p->plength = (uint32_t )(p->found - 6);
#line 775
          p->found = 0;
#line 776
          send_ipack(p);
#line 777
          reset_ipack(p);
          }
        }
      }
#line 781
      if ((int )buf___5[3 + i] & 32) {
#line 782
        off = (uint8_t )((int )buf___5[4 + i] + 1);
      }
      {
#line 785
      instant_repack(((buf___5 + 4) + (int )off) + i, 184 - (int )off, p);
      }
      __Cont: /* CIL Label */ 
#line 756
      i += 188;
    }
    while_break___1: /* CIL Label */ ;
    }
#line 787
    i = 0;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 791
  return;
}
}
#line 795 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void insert_pat_pmt(int fdin , int fdout ) 
{ 
  uint8_t buf___5[3760] ;
  uint8_t mbuf[188] ;
  int i ;
  int count ;
  uint16_t pida ;
  uint16_t pidv ;
  int written ;
  int c ;
  uint8_t c0 ;
  uint8_t c1 ;
  ssize_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  ssize_t tmp___2 ;
  uint8_t tmp___3 ;
  uint8_t tmp___4 ;

  {
  {
#line 801
  count = 1;
#line 802
  pida = (uint16_t )0;
#line 803
  pidv = (uint16_t )0;
#line 805
  c0 = (uint8_t )0;
#line 806
  c1 = (uint8_t )0;
#line 809
  find_avpids(fdin, & pidv, & pida);
#line 811
  tmp = read(fdin, (void *)(mbuf), (size_t )188);
#line 811
  count = (int )tmp;
#line 812
  i = 0;
  }
  {
#line 812
  while (1) {
    while_continue: /* CIL Label */ ;
#line 812
    if (! (i < 188)) {
#line 812
      goto while_break;
    }
#line 813
    if ((int )mbuf[i] == 71) {
#line 813
      goto while_break;
    }
#line 812
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 815
  if (i == 188) {
    {
#line 816
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not a TS\n");
    }
#line 817
    return;
  } else {
    {
#line 819
    memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(mbuf + i),
           (size_t )(188 - i));
#line 820
    tmp___0 = read(fdin, (void *)(mbuf), (size_t )i);
#line 820
    count = (int )tmp___0;
#line 821
    memcpy((void */* __restrict  */)((buf___5 + 188) - i), (void const   */* __restrict  */)(mbuf),
           (size_t )i);
#line 822
    i = 188;
    }
  }
#line 825
  count = 1;
  {
#line 826
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 826
    if (! (count > 0)) {
#line 826
      goto while_break___0;
    }
    {
#line 827
    tspid1[24] = (uint8_t )pidv;
#line 828
    tspid1[23] = (uint8_t )((int )tspid1[23] | (((int )pidv >> 8) & 63));
#line 829
    tspid1[29] = (uint8_t )pida;
#line 830
    tspid1[28] = (uint8_t )((int )tspid1[28] | (((int )pida >> 8) & 63));
#line 832
    write(fdout, (void const   *)(tspid0), (size_t )188);
#line 833
    write(fdout, (void const   *)(tspid1), (size_t )188);
#line 835
    tmp___1 = read(fdin, (void *)(buf___5 + i), (size_t )(3760 - i));
#line 835
    count = (int )tmp___1;
#line 837
    written = 0;
    }
    {
#line 838
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 838
      if (! (written < 1880)) {
#line 838
        goto while_break___1;
      }
      {
#line 839
      tmp___2 = write(fdout, (void const   *)(buf___5), (size_t )3760);
#line 839
      c = (int )tmp___2;
      }
#line 840
      if (c > 0) {
#line 840
        written += c;
      }
    }
    while_break___1: /* CIL Label */ ;
    }
#line 842
    tmp___3 = c0;
#line 842
    c0 = (uint8_t )((int )c0 + 1);
#line 842
    tspid0[3] = (uint8_t )((int )tspid0[3] | ((int )tmp___3 & 15));
#line 844
    tmp___4 = c1;
#line 844
    c1 = (uint8_t )((int )c1 + 1);
#line 844
    tspid1[3] = (uint8_t )((int )tspid1[3] | ((int )tmp___4 & 15));
#line 847
    i = 0;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 850
  return;
}
}
#line 852 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void get_pes(uint8_t *buf___5 , int count , p2p *p , void (*func)(p2p *p ) ) 
{ 
  int l ;
  unsigned short *pl ;
  int c ;
  uint8_t headr[3] ;
  uint16_t tmp ;
  uint16_t tmp___0 ;

  {
#line 857
  c = 0;
#line 859
  headr[0] = (uint8_t )0;
#line 859
  headr[1] = (uint8_t )0;
#line 859
  headr[2] = (uint8_t )1;
  {
#line 861
  while (1) {
    while_continue: /* CIL Label */ ;
#line 861
    if (c < count) {
#line 861
      if (p->mpeg == 0) {
#line 861
        goto _L;
      } else
#line 861
      if (p->mpeg == 1) {
#line 861
        if (p->found < 7) {
#line 861
          goto _L;
        } else {
#line 861
          goto _L___0;
        }
      } else
      _L___0: /* CIL Label */ 
#line 861
      if (p->mpeg == 2) {
#line 861
        if (p->found < 9) {
          _L: /* CIL Label */ 
#line 861
          if (! (p->found < 5)) {
#line 861
            if (! (! p->done)) {
#line 861
              goto while_break;
            }
          }
        } else {
#line 861
          goto while_break;
        }
      } else {
#line 861
        goto while_break;
      }
    } else {
#line 861
      goto while_break;
    }
    {
#line 867
    if (p->found == 1) {
#line 867
      goto case_1;
    }
#line 867
    if (p->found == 0) {
#line 867
      goto case_1;
    }
#line 872
    if (p->found == 2) {
#line 872
      goto case_2;
    }
#line 879
    if (p->found == 3) {
#line 879
      goto case_3;
    }
#line 905
    if (p->found == 4) {
#line 905
      goto case_4;
    }
#line 920
    if (p->found == 5) {
#line 920
      goto case_5;
    }
#line 929
    if (p->found == 6) {
#line 929
      goto case_6;
    }
#line 944
    if (p->found == 7) {
#line 944
      goto case_7;
    }
#line 952
    if (p->found == 8) {
#line 952
      goto case_8;
    }
#line 960
    goto switch_default___0;
    case_1: /* CIL Label */ 
    case_0: /* CIL Label */ 
#line 868
    if ((int )*(buf___5 + c) == 0) {
#line 868
      (p->found) ++;
    } else {
#line 869
      p->found = 0;
    }
#line 870
    c ++;
#line 871
    goto switch_break;
    case_2: /* CIL Label */ 
#line 873
    if ((int )*(buf___5 + c) == 1) {
#line 873
      (p->found) ++;
    } else
#line 874
    if ((int )*(buf___5 + c) == 0) {
#line 875
      p->found = 2;
    } else {
#line 876
      p->found = 0;
    }
#line 877
    c ++;
#line 878
    goto switch_break;
    case_3: /* CIL Label */ 
#line 880
    p->cid = (uint8_t )0;
    {
#line 889
    if ((int )*(buf___5 + c) == 243) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 242) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 190) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 241) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 240) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 255) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 191) {
#line 889
      goto case_243;
    }
#line 889
    if ((int )*(buf___5 + c) == 188) {
#line 889
      goto case_243;
    }
#line 893
    if ((int )*(buf___5 + c) == 192) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 193) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 194) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 195) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 196) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 197) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 198) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 199) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 200) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 201) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 202) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 203) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 204) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 205) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 206) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 207) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 208) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 209) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 210) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 211) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 212) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 213) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 214) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 215) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 216) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 217) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 218) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 219) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 220) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 221) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 222) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 223) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 224) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 225) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 226) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 227) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 228) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 229) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 230) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 231) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 232) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 233) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 234) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 235) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 236) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 237) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 238) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 239) {
#line 893
      goto case_192;
    }
#line 893
    if ((int )*(buf___5 + c) == 189) {
#line 893
      goto case_192;
    }
#line 898
    goto switch_default;
    case_243: /* CIL Label */ 
    case_242: /* CIL Label */ 
    case_190: /* CIL Label */ 
    case_241: /* CIL Label */ 
    case_240: /* CIL Label */ 
    case_255: /* CIL Label */ 
    case_191: /* CIL Label */ 
    case_188: /* CIL Label */ 
#line 890
    p->done = 1;
    case_192: /* CIL Label */ 
    case_193: /* CIL Label */ 
    case_194: /* CIL Label */ 
    case_195: /* CIL Label */ 
    case_196: /* CIL Label */ 
    case_197: /* CIL Label */ 
    case_198: /* CIL Label */ 
    case_199: /* CIL Label */ 
    case_200: /* CIL Label */ 
    case_201: /* CIL Label */ 
    case_202: /* CIL Label */ 
    case_203: /* CIL Label */ 
    case_204: /* CIL Label */ 
    case_205: /* CIL Label */ 
    case_206: /* CIL Label */ 
    case_207: /* CIL Label */ 
    case_208: /* CIL Label */ 
    case_209: /* CIL Label */ 
    case_210: /* CIL Label */ 
    case_211: /* CIL Label */ 
    case_212: /* CIL Label */ 
    case_213: /* CIL Label */ 
    case_214: /* CIL Label */ 
    case_215: /* CIL Label */ 
    case_216: /* CIL Label */ 
    case_217: /* CIL Label */ 
    case_218: /* CIL Label */ 
    case_219: /* CIL Label */ 
    case_220: /* CIL Label */ 
    case_221: /* CIL Label */ 
    case_222: /* CIL Label */ 
    case_223: /* CIL Label */ 
    case_224: /* CIL Label */ 
    case_225: /* CIL Label */ 
    case_226: /* CIL Label */ 
    case_227: /* CIL Label */ 
    case_228: /* CIL Label */ 
    case_229: /* CIL Label */ 
    case_230: /* CIL Label */ 
    case_231: /* CIL Label */ 
    case_232: /* CIL Label */ 
    case_233: /* CIL Label */ 
    case_234: /* CIL Label */ 
    case_235: /* CIL Label */ 
    case_236: /* CIL Label */ 
    case_237: /* CIL Label */ 
    case_238: /* CIL Label */ 
    case_239: /* CIL Label */ 
    case_189: /* CIL Label */ 
#line 894
    (p->found) ++;
#line 895
    p->cid = *(buf___5 + c);
#line 896
    c ++;
#line 897
    goto switch_break___0;
    switch_default: /* CIL Label */ 
#line 899
    p->found = 0;
#line 900
    goto switch_break___0;
    switch_break___0: /* CIL Label */ ;
    }
#line 902
    goto switch_break;
    case_4: /* CIL Label */ 
#line 906
    if (count - c > 1) {
      {
#line 907
      pl = (unsigned short *)(buf___5 + c);
#line 908
      tmp = ntohs(*pl);
#line 908
      p->plength = (uint32_t )tmp;
#line 909
      p->plen[0] = *(buf___5 + c);
#line 910
      c ++;
#line 911
      p->plen[1] = *(buf___5 + c);
#line 912
      c ++;
#line 913
      p->found += 2;
      }
    } else {
#line 915
      p->plen[0] = *(buf___5 + c);
#line 916
      (p->found) ++;
#line 917
      return;
    }
#line 919
    goto switch_break;
    case_5: /* CIL Label */ 
    {
#line 921
    p->plen[1] = *(buf___5 + c);
#line 922
    c ++;
#line 923
    pl = (unsigned short *)(p->plen);
#line 924
    tmp___0 = ntohs(*pl);
#line 924
    p->plength = (uint32_t )tmp___0;
#line 925
    (p->found) ++;
    }
#line 926
    goto switch_break;
    case_6: /* CIL Label */ 
#line 930
    if (! p->done) {
#line 931
      p->flag1 = *(buf___5 + c);
#line 932
      c ++;
#line 933
      (p->found) ++;
#line 934
      if (((int )p->flag1 & 192) == 128) {
#line 934
        p->mpeg = 2;
      } else {
#line 936
        p->hlength = (uint8_t )0;
#line 937
        p->which = 0;
#line 938
        p->mpeg = 1;
#line 939
        p->flag2 = (uint8_t )0;
      }
    }
#line 942
    goto switch_break;
    case_7: /* CIL Label */ 
#line 945
    if (! p->done) {
#line 945
      if (p->mpeg == 2) {
#line 946
        p->flag2 = *(buf___5 + c);
#line 947
        c ++;
#line 948
        (p->found) ++;
      }
    }
#line 950
    goto switch_break;
    case_8: /* CIL Label */ 
#line 953
    if (! p->done) {
#line 953
      if (p->mpeg == 2) {
#line 954
        p->hlength = *(buf___5 + c);
#line 955
        c ++;
#line 956
        (p->found) ++;
      }
    }
#line 958
    goto switch_break;
    switch_default___0: /* CIL Label */ 
#line 962
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 966
  if (! p->plength) {
#line 966
    p->plength = (uint32_t )524274;
  }
#line 969
  if (p->done) {
#line 969
    goto _L___2;
  } else
#line 969
  if (p->mpeg == 2) {
#line 969
    if (p->found >= 9) {
#line 969
      goto _L___2;
    } else {
#line 969
      goto _L___3;
    }
  } else
  _L___3: /* CIL Label */ 
#line 969
  if (p->mpeg == 1) {
#line 969
    if (p->found >= 7) {
      _L___2: /* CIL Label */ 
      {
#line 975
      if ((int )p->cid == 189) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 224) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 225) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 226) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 227) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 228) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 229) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 230) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 231) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 232) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 233) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 234) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 235) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 236) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 237) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 238) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 239) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 192) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 193) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 194) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 195) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 196) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 197) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 198) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 199) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 200) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 201) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 202) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 203) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 204) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 205) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 206) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 207) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 208) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 209) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 210) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 211) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 212) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 213) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 214) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 215) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 216) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 217) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 218) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 219) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 220) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 221) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 222) {
#line 975
        goto case_189___0;
      }
#line 975
      if ((int )p->cid == 223) {
#line 975
        goto case_189___0;
      }
#line 971
      goto switch_break___1;
      case_189___0: /* CIL Label */ 
      case_224___0: /* CIL Label */ 
      case_225___0: /* CIL Label */ 
      case_226___0: /* CIL Label */ 
      case_227___0: /* CIL Label */ 
      case_228___0: /* CIL Label */ 
      case_229___0: /* CIL Label */ 
      case_230___0: /* CIL Label */ 
      case_231___0: /* CIL Label */ 
      case_232___0: /* CIL Label */ 
      case_233___0: /* CIL Label */ 
      case_234___0: /* CIL Label */ 
      case_235___0: /* CIL Label */ 
      case_236___0: /* CIL Label */ 
      case_237___0: /* CIL Label */ 
      case_238___0: /* CIL Label */ 
      case_239___0: /* CIL Label */ 
      case_192___0: /* CIL Label */ 
      case_193___0: /* CIL Label */ 
      case_194___0: /* CIL Label */ 
      case_195___0: /* CIL Label */ 
      case_196___0: /* CIL Label */ 
      case_197___0: /* CIL Label */ 
      case_198___0: /* CIL Label */ 
      case_199___0: /* CIL Label */ 
      case_200___0: /* CIL Label */ 
      case_201___0: /* CIL Label */ 
      case_202___0: /* CIL Label */ 
      case_203___0: /* CIL Label */ 
      case_204___0: /* CIL Label */ 
      case_205___0: /* CIL Label */ 
      case_206___0: /* CIL Label */ 
      case_207___0: /* CIL Label */ 
      case_208___0: /* CIL Label */ 
      case_209___0: /* CIL Label */ 
      case_210___0: /* CIL Label */ 
      case_211___0: /* CIL Label */ 
      case_212___0: /* CIL Label */ 
      case_213___0: /* CIL Label */ 
      case_214___0: /* CIL Label */ 
      case_215___0: /* CIL Label */ 
      case_216___0: /* CIL Label */ 
      case_217___0: /* CIL Label */ 
      case_218___0: /* CIL Label */ 
      case_219___0: /* CIL Label */ 
      case_220___0: /* CIL Label */ 
      case_221___0: /* CIL Label */ 
      case_222___0: /* CIL Label */ 
      case_223___0: /* CIL Label */ 
      {
#line 977
      memcpy((void */* __restrict  */)(p->buf), (void const   */* __restrict  */)(headr),
             (size_t )3);
#line 978
      p->buf[3] = p->cid;
#line 979
      memcpy((void */* __restrict  */)(p->buf + 4), (void const   */* __restrict  */)(p->plen),
             (size_t )2);
      }
#line 981
      if (p->mpeg == 2) {
#line 981
        if (p->found == 9) {
#line 982
          p->buf[6] = p->flag1;
#line 983
          p->buf[7] = p->flag2;
#line 984
          p->buf[8] = p->hlength;
        }
      }
#line 987
      if (p->mpeg == 1) {
#line 987
        if (p->found == 7) {
#line 988
          p->buf[6] = p->flag1;
        }
      }
#line 992
      if (p->mpeg == 2) {
#line 992
        if ((int )p->flag2 & 128) {
#line 992
          if (p->found < 14) {
            {
#line 994
            while (1) {
              while_continue___0: /* CIL Label */ ;
#line 994
              if (c < count) {
#line 994
                if (! (p->found < 14)) {
#line 994
                  goto while_break___0;
                }
              } else {
#line 994
                goto while_break___0;
              }
#line 995
              p->pts[p->found - 9] = *(buf___5 + c);
#line 996
              p->buf[p->found] = *(buf___5 + c);
#line 997
              c ++;
#line 998
              (p->found) ++;
            }
            while_break___0: /* CIL Label */ ;
            }
#line 1000
            if (c == count) {
#line 1000
              return;
            }
          }
        }
      }
#line 1003
      if (p->mpeg == 1) {
#line 1003
        if (p->which < 2000) {
#line 1005
          if (p->found == 7) {
#line 1006
            p->check = p->flag1;
#line 1007
            p->hlength = (uint8_t )1;
          }
          {
#line 1010
          while (1) {
            while_continue___1: /* CIL Label */ ;
#line 1010
            if (! p->which) {
#line 1010
              if (c < count) {
#line 1010
                if (! ((int )p->check == 255)) {
#line 1010
                  goto while_break___1;
                }
              } else {
#line 1010
                goto while_break___1;
              }
            } else {
#line 1010
              goto while_break___1;
            }
#line 1012
            p->check = *(buf___5 + c);
#line 1013
            p->buf[p->found] = *(buf___5 + c);
#line 1014
            c ++;
#line 1015
            (p->found) ++;
#line 1016
            p->hlength = (uint8_t )((int )p->hlength + 1);
          }
          while_break___1: /* CIL Label */ ;
          }
#line 1019
          if (c == count) {
#line 1019
            return;
          }
#line 1021
          if (((int )p->check & 192) == 64) {
#line 1021
            if (! p->which) {
#line 1022
              p->check = *(buf___5 + c);
#line 1023
              p->buf[p->found] = *(buf___5 + c);
#line 1024
              c ++;
#line 1025
              (p->found) ++;
#line 1026
              p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1028
              p->which = 1;
#line 1029
              if (c == count) {
#line 1029
                return;
              }
#line 1030
              p->check = *(buf___5 + c);
#line 1031
              p->buf[p->found] = *(buf___5 + c);
#line 1032
              c ++;
#line 1033
              (p->found) ++;
#line 1034
              p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1035
              p->which = 2;
#line 1036
              if (c == count) {
#line 1036
                return;
              }
            }
          }
#line 1039
          if (p->which == 1) {
#line 1040
            p->check = *(buf___5 + c);
#line 1041
            p->buf[p->found] = *(buf___5 + c);
#line 1042
            c ++;
#line 1043
            (p->found) ++;
#line 1044
            p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1045
            p->which = 2;
#line 1046
            if (c == count) {
#line 1046
              return;
            }
          }
#line 1049
          if ((int )p->check & 48) {
#line 1049
            if ((int )p->check != 255) {
#line 1050
              p->flag2 = (uint8_t )(((int )p->check & 240) << 2);
#line 1051
              p->pts[0] = p->check;
#line 1052
              p->which = 3;
            }
          }
#line 1055
          if (c == count) {
#line 1055
            return;
          }
#line 1056
          if (p->which > 2) {
#line 1057
            if (((int )p->flag2 & 192) == 128) {
              {
#line 1059
              while (1) {
                while_continue___2: /* CIL Label */ ;
#line 1059
                if (c < count) {
#line 1059
                  if (! (p->which < 7)) {
#line 1059
                    goto while_break___2;
                  }
                } else {
#line 1059
                  goto while_break___2;
                }
#line 1061
                p->pts[p->which - 2] = *(buf___5 + c);
#line 1063
                p->buf[p->found] = *(buf___5 + c);
#line 1065
                c ++;
#line 1066
                (p->found) ++;
#line 1067
                (p->which) ++;
#line 1068
                p->hlength = (uint8_t )((int )p->hlength + 1);
              }
              while_break___2: /* CIL Label */ ;
              }
#line 1070
              if (c == count) {
#line 1070
                return;
              }
            } else
#line 1071
            if (((int )p->flag2 & 192) == 192) {
              {
#line 1073
              while (1) {
                while_continue___3: /* CIL Label */ ;
#line 1073
                if (c < count) {
#line 1073
                  if (! (p->which < 12)) {
#line 1073
                    goto while_break___3;
                  }
                } else {
#line 1073
                  goto while_break___3;
                }
#line 1075
                if (p->which < 7) {
#line 1076
                  p->pts[p->which - 2] = *(buf___5 + c);
                }
#line 1079
                p->buf[p->found] = *(buf___5 + c);
#line 1081
                c ++;
#line 1082
                (p->found) ++;
#line 1083
                (p->which) ++;
#line 1084
                p->hlength = (uint8_t )((int )p->hlength + 1);
              }
              while_break___3: /* CIL Label */ ;
              }
#line 1086
              if (c == count) {
#line 1086
                return;
              }
            }
#line 1088
            p->which = 2000;
          }
        }
      }
      {
#line 1093
      while (1) {
        while_continue___4: /* CIL Label */ ;
#line 1093
        if (c < count) {
#line 1093
          if (! ((uint32_t )p->found < p->plength + 6U)) {
#line 1093
            goto while_break___4;
          }
        } else {
#line 1093
          goto while_break___4;
        }
#line 1094
        l = count - c;
#line 1095
        if ((uint32_t )(l + p->found) > p->plength + 6U) {
#line 1096
          l = (int )((p->plength + 6U) - (uint32_t )p->found);
        }
        {
#line 1097
        memcpy((void */* __restrict  */)(p->buf + p->found), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )l);
#line 1098
        p->found += l;
#line 1099
        c += l;
        }
      }
      while_break___4: /* CIL Label */ ;
      }
#line 1101
      if ((uint32_t )p->found == p->plength + 6U) {
        {
#line 1102
        (*func)(p);
        }
      }
#line 1104
      goto switch_break___1;
      switch_break___1: /* CIL Label */ ;
      }
#line 1108
      if (p->done) {
#line 1109
        if ((uint32_t )((p->found + count) - c) < p->plength + 6U) {
#line 1110
          p->found += count - c;
#line 1111
          c = count;
        } else {
#line 1113
          c = (int )((uint32_t )c + ((p->plength + 6U) - (uint32_t )p->found));
#line 1114
          p->found = (int )(p->plength + 6U);
        }
      }
#line 1118
      if (p->plength) {
#line 1118
        if ((uint32_t )p->found == p->plength + 6U) {
          {
#line 1119
          p->found = 0;
#line 1120
          p->done = 0;
#line 1121
          p->plength = (uint32_t )0;
#line 1122
          memset((void *)(p->buf), 0, (size_t )65535);
          }
#line 1123
          if (c < count) {
            {
#line 1124
            get_pes(buf___5 + c, count - c, p, func);
            }
          }
        }
      }
    }
  }
#line 1127
  return;
}
}
#line 1133 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void setup_pes2ts(p2p *p , uint32_t pida , uint32_t pidv , void (*ts_write)(uint8_t *buf ,
                                                                            int count ,
                                                                            p2p *p ) ) 
{ 


  {
  {
#line 1136
  init_p2p(p, ts_write, 2048);
#line 1137
  p->pida = (uint16_t )pida;
#line 1138
  p->pidv = (uint16_t )pidv;
#line 1139
  p->acounter = (uint8_t )0;
#line 1140
  p->vcounter = (uint8_t )0;
#line 1141
  p->count1 = (uint8_t )0;
#line 1142
  p->count0 = (uint8_t )0;
  }
#line 1143
  return;
}
}
#line 1145 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void kpes_to_ts(p2p *p , uint8_t *buf___5 , int count ) 
{ 


  {
  {
#line 1147
  get_pes(buf___5, count, p, & pes_in_ts);
  }
#line 1148
  return;
}
}
#line 1151 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void setup_ts2pes(p2p *pa___0 , p2p *pv___0 , uint32_t pida , uint32_t pidv , void (*pes_write)(uint8_t *buf ,
                                                                                                int count ,
                                                                                                p2p *p ) ) 
{ 


  {
  {
#line 1154
  init_p2p(pa___0, pes_write, 2048);
#line 1155
  init_p2p(pv___0, pes_write, 2048);
#line 1156
  pa___0->pid = (uint16_t )pida;
#line 1157
  pv___0->pid = (uint16_t )pidv;
  }
#line 1158
  return;
}
}
#line 1160 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void kts_to_pes(p2p *p , uint8_t *buf___5 ) 
{ 
  uint8_t off ;
  uint16_t pid___0 ;

  {
#line 1162
  off = (uint8_t )0;
#line 1163
  pid___0 = (uint16_t )0;
#line 1165
  if (! ((int )*(buf___5 + 3) & 16)) {
#line 1166
    return;
  }
  {
#line 1168
  pid___0 = get_pid(buf___5 + 1);
  }
#line 1170
  if ((int )pid___0 != (int )p->pid) {
#line 1170
    return;
  }
#line 1172
  if ((int )*(buf___5 + 1) & 64) {
#line 1173
    if (p->plength == 524274U) {
      {
#line 1174
      p->plength = (uint32_t )(p->found - 6);
#line 1175
      p->found = 0;
#line 1176
      pes_repack(p);
      }
    }
  }
#line 1180
  if ((int )*(buf___5 + 3) & 32) {
#line 1181
    off = (uint8_t )((int )*(buf___5 + 4) + 1);
#line 1182
    if ((int )off + 4 > 187) {
#line 1182
      return;
    }
  }
  {
#line 1185
  get_pes((buf___5 + 4) + (int )off, 184 - (int )off, p, & pes_repack);
  }
#line 1186
  return;
}
}
#line 1194 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void reset_ipack(ipack *p ) 
{ 


  {
#line 1196
  p->found = 0;
#line 1197
  p->cid = (uint8_t )0;
#line 1198
  p->plength = (uint32_t )0;
#line 1199
  p->flag1 = (uint8_t )0;
#line 1200
  p->flag2 = (uint8_t )0;
#line 1201
  p->hlength = (uint8_t )0;
#line 1202
  p->mpeg = 0;
#line 1203
  p->check = (uint8_t )0;
#line 1204
  p->which = 0;
#line 1205
  p->done = 0;
#line 1206
  p->count = 0;
#line 1207
  p->size = p->size_orig;
#line 1208
  return;
}
}
#line 1210 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void init_ipack(ipack *p , int size , void (*func)(uint8_t *buf , int size , void *priv ) ,
                int ps ) 
{ 
  uint8_t *tmp ;
  void *tmp___0 ;

  {
  {
#line 1213
  tmp___0 = malloc((size_t )size);
#line 1213
  tmp = (uint8_t *)tmp___0;
#line 1213
  p->buf = tmp;
  }
#line 1213
  if (! tmp) {
    {
#line 1214
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t allocate memory for ipack\n");
#line 1215
    exit(1);
    }
  }
  {
#line 1217
  p->ps = ps;
#line 1218
  p->size_orig = size;
#line 1219
  p->func = func;
#line 1220
  reset_ipack(p);
#line 1221
  p->has_ai = 0;
#line 1222
  p->has_vi = 0;
#line 1223
  p->start = 0;
  }
#line 1224
  return;
}
}
#line 1226 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void free_ipack(ipack *p ) 
{ 


  {
#line 1228
  if (p->buf) {
    {
#line 1228
    free((void *)p->buf);
    }
  }
#line 1229
  return;
}
}
#line 1233 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int get_vinfo(uint8_t *mbuf , int count , VideoInfo *vi___0 , int pr ) 
{ 
  uint8_t *headr ;
  int found ;
  int sw ;
  int form ;
  int c ;
  uint8_t *b ;

  {
#line 1236
  found = 0;
#line 1238
  form = -1;
#line 1239
  c = 0;
  {
#line 1241
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1241
    if (found < 4) {
#line 1241
      if (! (c + 4 < count)) {
#line 1241
        goto while_break;
      }
    } else {
#line 1241
      goto while_break;
    }
#line 1244
    b = mbuf + c;
#line 1245
    if ((int )*(b + 0) == 0) {
#line 1245
      if ((int )*(b + 1) == 0) {
#line 1245
        if ((int )*(b + 2) == 1) {
#line 1245
          if ((int )*(b + 3) == 179) {
#line 1246
            found = 4;
          } else {
#line 1248
            c ++;
          }
        } else {
#line 1248
          c ++;
        }
      } else {
#line 1248
        c ++;
      }
    } else {
#line 1248
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1252
  if (! found) {
#line 1252
    return (-1);
  }
#line 1253
  c += 4;
#line 1254
  if (c + 12 >= count) {
#line 1254
    return (-1);
  }
#line 1255
  headr = mbuf + c;
#line 1257
  vi___0->horizontal_size = (u32 )((((int )*(headr + 1) & 240) >> 4) | ((int )*(headr + 0) << 4));
#line 1258
  vi___0->vertical_size = (u32 )((((int )*(headr + 1) & 15) << 8) | (int )*(headr + 2));
#line 1260
  sw = ((int )*(headr + 3) & 240) >> 4;
  {
#line 1263
  if (sw == 1) {
#line 1263
    goto case_1;
  }
#line 1268
  if (sw == 2) {
#line 1268
    goto case_2;
  }
#line 1273
  if (sw == 3) {
#line 1273
    goto case_3;
  }
#line 1278
  if (sw == 4) {
#line 1278
    goto case_4;
  }
#line 1284
  if (sw == 5) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 6) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 7) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 8) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 9) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 10) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 11) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 12) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 13) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 14) {
#line 1284
    goto case_5;
  }
#line 1284
  if (sw == 15) {
#line 1284
    goto case_5;
  }
#line 1290
  goto switch_default;
  case_1: /* CIL Label */ 
#line 1264
  if (pr) {
    {
#line 1265
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 1:1");
    }
  }
#line 1266
  vi___0->aspect_ratio = (u32 )100;
#line 1267
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1269
  if (pr) {
    {
#line 1270
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 4:3");
    }
  }
#line 1271
  vi___0->aspect_ratio = (u32 )133;
#line 1272
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1274
  if (pr) {
    {
#line 1275
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 16:9");
    }
  }
#line 1276
  vi___0->aspect_ratio = (u32 )177;
#line 1277
  goto switch_break;
  case_4: /* CIL Label */ 
#line 1279
  if (pr) {
    {
#line 1280
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: 2.21:1");
    }
  }
#line 1281
  vi___0->aspect_ratio = (u32 )221;
#line 1282
  goto switch_break;
  case_5: /* CIL Label */ 
  case_6: /* CIL Label */ 
  case_7: /* CIL Label */ 
  case_8: /* CIL Label */ 
  case_9: /* CIL Label */ 
  case_10: /* CIL Label */ 
  case_11: /* CIL Label */ 
  case_12: /* CIL Label */ 
  case_13: /* CIL Label */ 
  case_14: /* CIL Label */ 
  case_15: /* CIL Label */ 
#line 1285
  if (pr) {
    {
#line 1286
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Videostream: ASPECT: reserved");
    }
  }
#line 1287
  vi___0->aspect_ratio = (u32 )0;
#line 1288
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1291
  vi___0->aspect_ratio = (u32 )0;
#line 1292
  return (-1);
  switch_break: /* CIL Label */ ;
  }
#line 1295
  if (pr) {
    {
#line 1296
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Size = %dx%d",
            vi___0->horizontal_size, vi___0->vertical_size);
    }
  }
#line 1299
  sw = (int )*(headr + 3) & 15;
  {
#line 1302
  if (sw == 1) {
#line 1302
    goto case_1___0;
  }
#line 1308
  if (sw == 2) {
#line 1308
    goto case_2___0;
  }
#line 1314
  if (sw == 3) {
#line 1314
    goto case_3___0;
  }
#line 1320
  if (sw == 4) {
#line 1320
    goto case_4___0;
  }
#line 1326
  if (sw == 5) {
#line 1326
    goto case_5___0;
  }
#line 1332
  if (sw == 6) {
#line 1332
    goto case_6___0;
  }
#line 1338
  if (sw == 7) {
#line 1338
    goto case_7___0;
  }
#line 1301
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 1303
  if (pr) {
    {
#line 1304
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 23.976 fps");
    }
  }
#line 1305
  vi___0->framerate = (double )24000 / 1001.;
#line 1306
  form = -1;
#line 1307
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 1309
  if (pr) {
    {
#line 1310
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 24 fps");
    }
  }
#line 1311
  vi___0->framerate = (double )24;
#line 1312
  form = -1;
#line 1313
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 1315
  if (pr) {
    {
#line 1316
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 25 fps");
    }
  }
#line 1317
  vi___0->framerate = (double )25;
#line 1318
  form = 0;
#line 1319
  goto switch_break___0;
  case_4___0: /* CIL Label */ 
#line 1321
  if (pr) {
    {
#line 1322
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 29.97 fps");
    }
  }
#line 1323
  vi___0->framerate = (double )30000 / 1001.;
#line 1324
  form = 1;
#line 1325
  goto switch_break___0;
  case_5___0: /* CIL Label */ 
#line 1327
  if (pr) {
    {
#line 1328
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 30 fps");
    }
  }
#line 1329
  vi___0->framerate = (double )30;
#line 1330
  form = 1;
#line 1331
  goto switch_break___0;
  case_6___0: /* CIL Label */ 
#line 1333
  if (pr) {
    {
#line 1334
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 50 fps");
    }
  }
#line 1335
  vi___0->framerate = (double )50;
#line 1336
  form = 0;
#line 1337
  goto switch_break___0;
  case_7___0: /* CIL Label */ 
#line 1339
  if (pr) {
    {
#line 1340
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  FRate: 60 fps");
    }
  }
#line 1341
  vi___0->framerate = (double )60;
#line 1342
  form = 1;
#line 1343
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
#line 1346
  vi___0->bit_rate = (u32 )(400UL * ((((unsigned long )((int )*(headr + 4) << 10) & 261120UL) | ((unsigned long )((int )*(headr + 5) << 2) & 1020UL)) | ((unsigned long )(((int )*(headr + 6) & 192) >> 6) & 3UL)));
#line 1350
  if (pr) {
    {
#line 1351
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: %.2f Mbit/s",
            (double )vi___0->bit_rate / 1000000.);
#line 1352
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\n");
    }
  }
#line 1354
  vi___0->video_format = (u32 )form;
#line 1356
  vi___0->off = (u32 )(c - 4);
#line 1357
  return (c - 4);
}
}
#line 1363 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int get_ainfo(uint8_t *mbuf , int count , AudioInfo *ai___0 , int pr ) 
{ 
  uint8_t *headr ;
  int found ;
  int c ;
  int fr ;
  uint8_t *b ;

  {
#line 1366
  found = 0;
#line 1367
  c = 0;
#line 1368
  fr = 0;
  {
#line 1370
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1370
    if (! found) {
#line 1370
      if (! (c < count)) {
#line 1370
        goto while_break;
      }
    } else {
#line 1370
      goto while_break;
    }
#line 1371
    b = mbuf + c;
#line 1373
    if ((int )*(b + 0) == 255) {
#line 1373
      if (((int )*(b + 1) & 248) == 248) {
#line 1374
        found = 1;
      } else {
#line 1376
        c ++;
      }
    } else {
#line 1376
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1380
  if (! found) {
#line 1380
    return (-1);
  }
#line 1382
  if (c + 3 >= count) {
#line 1382
    return (-1);
  }
#line 1383
  headr = mbuf + c;
#line 1385
  ai___0->layer = ((int )*(headr + 1) & 6) >> 1;
#line 1387
  if (pr) {
    {
#line 1388
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Audiostream: Layer: %d",
            4 - ai___0->layer);
    }
  }
#line 1391
  ai___0->bit_rate = bitrates[3 - ai___0->layer][(int )*(headr + 2) >> 4] * 1000U;
#line 1393
  if (pr) {
#line 1394
    if (ai___0->bit_rate == 0U) {
      {
#line 1395
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Bit rate: free");
      }
    } else
#line 1396
    if (ai___0->bit_rate == 15U) {
      {
#line 1397
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: reserved");
      }
    } else {
      {
#line 1399
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: %d kb/s",
              ai___0->bit_rate / 1000U);
      }
    }
  }
#line 1402
  fr = ((int )*(headr + 2) & 12) >> 2;
#line 1403
  ai___0->frequency = freq[fr] * 100U;
#line 1405
  if (pr) {
#line 1406
    if (ai___0->frequency == 3U) {
      {
#line 1407
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Freq: reserved\n");
      }
    } else {
      {
#line 1409
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Freq: %2.1f kHz\n",
              (double )ai___0->frequency / 1000.);
      }
    }
  }
#line 1412
  ai___0->off = (u32 )c;
#line 1413
  return (c);
}
}
#line 1416 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
unsigned int ac3_bitrates[32]  = 
#line 1416
  {      32U,      40U,      48U,      56U, 
        64U,      80U,      96U,      112U, 
        128U,      160U,      192U,      224U, 
        256U,      320U,      384U,      448U, 
        512U,      576U,      640U,      0U, 
        0U,      0U,      0U,      0U, 
        0U,      0U,      0U,      0U, 
        0U,      0U,      0U,      0U};
#line 1420 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
uint32_t ac3_freq[4]  = {      (uint32_t )480,      (uint32_t )441,      (uint32_t )320,      (uint32_t )0};
#line 1421 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
uint32_t ac3_frames[3][32]  = { {        (uint32_t )64,        (uint32_t )80,        (uint32_t )96,        (uint32_t )112, 
            (uint32_t )128,        (uint32_t )160,        (uint32_t )192,        (uint32_t )224, 
            (uint32_t )256,        (uint32_t )320,        (uint32_t )384,        (uint32_t )448, 
            (uint32_t )512,        (uint32_t )640,        (uint32_t )768,        (uint32_t )896, 
            (uint32_t )1024,        (uint32_t )1152,        (uint32_t )1280,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0}, 
   {        (uint32_t )69,        (uint32_t )87,        (uint32_t )104,        (uint32_t )121, 
            (uint32_t )139,        (uint32_t )174,        (uint32_t )208,        (uint32_t )243, 
            (uint32_t )278,        (uint32_t )348,        (uint32_t )417,        (uint32_t )487, 
            (uint32_t )557,        (uint32_t )696,        (uint32_t )835,        (uint32_t )975, 
            (uint32_t )1114,        (uint32_t )1253,        (uint32_t )1393,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0}, 
   {        (uint32_t )96,        (uint32_t )120,        (uint32_t )144,        (uint32_t )168, 
            (uint32_t )192,        (uint32_t )240,        (uint32_t )288,        (uint32_t )336, 
            (uint32_t )384,        (uint32_t )480,        (uint32_t )576,        (uint32_t )672, 
            (uint32_t )768,        (uint32_t )960,        (uint32_t )1152,        (uint32_t )1344, 
            (uint32_t )1536,        (uint32_t )1728,        (uint32_t )1920,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0, 
            (uint32_t )0,        (uint32_t )0,        (uint32_t )0,        (uint32_t )0}};
#line 1429 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int get_ac3info(uint8_t *mbuf , int count , AudioInfo *ai___0 , int pr ) 
{ 
  uint8_t *headr ;
  int found ;
  int c ;
  uint8_t frame ;
  int fr ;
  uint8_t *b ;

  {
#line 1432
  found = 0;
#line 1433
  c = 0;
#line 1435
  fr = 0;
  {
#line 1437
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1437
    if (! found) {
#line 1437
      if (! (c < count)) {
#line 1437
        goto while_break;
      }
    } else {
#line 1437
      goto while_break;
    }
#line 1438
    b = mbuf + c;
#line 1439
    if ((int )*(b + 0) == 11) {
#line 1439
      if ((int )*(b + 1) == 119) {
#line 1440
        found = 1;
      } else {
#line 1442
        c ++;
      }
    } else {
#line 1442
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1447
  if (! found) {
#line 1448
    return (-1);
  }
#line 1450
  ai___0->off = (u32 )c;
#line 1452
  if (c + 5 >= count) {
#line 1452
    return (-1);
  }
#line 1454
  ai___0->layer = 0;
#line 1455
  headr = (mbuf + c) + 2;
#line 1457
  frame = (uint8_t )((int )*(headr + 2) & 63);
#line 1458
  ai___0->bit_rate = ac3_bitrates[(int )frame >> 1] * 1000U;
#line 1460
  if (pr) {
    {
#line 1460
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  BRate: %d kb/s",
            ai___0->bit_rate / 1000U);
    }
  }
#line 1462
  fr = ((int )*(headr + 2) & 192) >> 6;
#line 1463
  ai___0->frequency = freq[fr] * 100U;
#line 1464
  if (pr) {
    {
#line 1464
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Freq: %d Hz\n",
            ai___0->frequency);
    }
  }
#line 1466
  ai___0->framesize = ac3_frames[fr][(int )frame >> 1];
#line 1467
  if ((int )frame & 1) {
#line 1467
    if (fr == 1) {
#line 1467
      (ai___0->framesize) ++;
    }
  }
#line 1468
  ai___0->framesize <<= 1;
#line 1469
  if (pr) {
    {
#line 1469
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"  Framesize %d\n",
            ai___0->framesize);
    }
  }
#line 1471
  return (c);
}
}
#line 1479 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static int muxr  =    0;
#line 1480 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static int ai  =    0;
#line 1481 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static int vi  =    0;
#line 1482 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static int start  =    0;
#line 1483 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static uint32_t SCR  =    (uint32_t )0;
#line 1475 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void ps_pes(ipack *p ) 
{ 
  int check ;
  uint8_t pbuf[32] ;
  int tmp ;
  int tmp___0 ;
  unsigned int tmp___1 ;
  unsigned int tmp___2 ;

  {
#line 1485
  if (p->mpeg == 2) {
    {
#line 1487
    if ((int )*(p->buf + 3) == 224) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 225) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 226) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 227) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 228) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 229) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 230) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 231) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 232) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 233) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 234) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 235) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 236) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 237) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 238) {
#line 1487
      goto case_224;
    }
#line 1487
    if ((int )*(p->buf + 3) == 239) {
#line 1487
      goto case_224;
    }
#line 1496
    if ((int )*(p->buf + 3) == 192) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 193) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 194) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 195) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 196) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 197) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 198) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 199) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 200) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 201) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 202) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 203) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 204) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 205) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 206) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 207) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 208) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 209) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 210) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 211) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 212) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 213) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 214) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 215) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 216) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 217) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 218) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 219) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 220) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 221) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 222) {
#line 1496
      goto case_192;
    }
#line 1496
    if ((int )*(p->buf + 3) == 223) {
#line 1496
      goto case_192;
    }
#line 1486
    goto switch_break;
    case_224: /* CIL Label */ 
    case_225: /* CIL Label */ 
    case_226: /* CIL Label */ 
    case_227: /* CIL Label */ 
    case_228: /* CIL Label */ 
    case_229: /* CIL Label */ 
    case_230: /* CIL Label */ 
    case_231: /* CIL Label */ 
    case_232: /* CIL Label */ 
    case_233: /* CIL Label */ 
    case_234: /* CIL Label */ 
    case_235: /* CIL Label */ 
    case_236: /* CIL Label */ 
    case_237: /* CIL Label */ 
    case_238: /* CIL Label */ 
    case_239: /* CIL Label */ 
#line 1488
    if (! p->has_vi) {
      {
#line 1489
      tmp = get_vinfo(p->buf, p->count, & p->vi, 1);
      }
#line 1489
      if (tmp >= 0) {
#line 1490
        p->has_vi = 1;
#line 1491
        vi = (int )p->vi.bit_rate;
      }
    }
#line 1494
    goto switch_break;
    case_192: /* CIL Label */ 
    case_193: /* CIL Label */ 
    case_194: /* CIL Label */ 
    case_195: /* CIL Label */ 
    case_196: /* CIL Label */ 
    case_197: /* CIL Label */ 
    case_198: /* CIL Label */ 
    case_199: /* CIL Label */ 
    case_200: /* CIL Label */ 
    case_201: /* CIL Label */ 
    case_202: /* CIL Label */ 
    case_203: /* CIL Label */ 
    case_204: /* CIL Label */ 
    case_205: /* CIL Label */ 
    case_206: /* CIL Label */ 
    case_207: /* CIL Label */ 
    case_208: /* CIL Label */ 
    case_209: /* CIL Label */ 
    case_210: /* CIL Label */ 
    case_211: /* CIL Label */ 
    case_212: /* CIL Label */ 
    case_213: /* CIL Label */ 
    case_214: /* CIL Label */ 
    case_215: /* CIL Label */ 
    case_216: /* CIL Label */ 
    case_217: /* CIL Label */ 
    case_218: /* CIL Label */ 
    case_219: /* CIL Label */ 
    case_220: /* CIL Label */ 
    case_221: /* CIL Label */ 
    case_222: /* CIL Label */ 
    case_223: /* CIL Label */ 
#line 1497
    if (! p->has_ai) {
      {
#line 1498
      tmp___0 = get_ainfo(p->buf, p->count, & p->ai, 1);
      }
#line 1498
      if (tmp___0 >= 0) {
#line 1499
        p->has_ai = 1;
#line 1500
        ai = (int )p->ai.bit_rate;
      }
    }
#line 1503
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 1506
    if (p->has_vi) {
#line 1506
      if (vi) {
#line 1506
        if (! muxr) {
#line 1507
          muxr = (vi + ai) / 400;
        }
      }
    }
#line 1510
    if (start) {
#line 1510
      if (muxr) {
#line 1510
        if ((int )*(p->buf + 7) & 128) {
#line 1510
          if (p->has_ai) {
            {
#line 1512
            tmp___1 = trans_pts_dts(p->pts);
#line 1512
            SCR = tmp___1 - 3600U;
#line 1514
            check = write_ps_header(pbuf, SCR, (long )muxr, (uint8_t )1, (uint8_t )0,
                                    (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1,
                                    (uint8_t )0, (uint8_t )0, (uint32_t )0, (uint8_t )0,
                                    (uint8_t )0, (uint32_t )0);
#line 1519
            (*(p->func))(pbuf, check, p->data);
            }
          } else
#line 1510
          if ((int )*(p->buf + ((9 + (int )*(p->buf + 8)) + 4)) == 179) {
            {
#line 1512
            tmp___1 = trans_pts_dts(p->pts);
#line 1512
            SCR = tmp___1 - 3600U;
#line 1514
            check = write_ps_header(pbuf, SCR, (long )muxr, (uint8_t )1, (uint8_t )0,
                                    (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1,
                                    (uint8_t )0, (uint8_t )0, (uint32_t )0, (uint8_t )0,
                                    (uint8_t )0, (uint32_t )0);
#line 1519
            (*(p->func))(pbuf, check, p->data);
            }
          }
        }
      }
    }
#line 1522
    if (muxr) {
#line 1522
      if (! start) {
#line 1522
        if (vi) {
          {
#line 1523
          tmp___2 = trans_pts_dts(p->pts);
#line 1523
          SCR = tmp___2 - 3600U;
#line 1524
          check = write_ps_header(pbuf, SCR, (long )muxr, (uint8_t )1, (uint8_t )0,
                                  (uint8_t )0, (uint8_t )1, (uint8_t )1, (uint8_t )1,
                                  (uint8_t )192, (uint8_t )0, (uint32_t )64, (uint8_t )224,
                                  (uint8_t )1, (uint32_t )460);
#line 1528
          start = 1;
#line 1529
          (*(p->func))(pbuf, check, p->data);
          }
        }
      }
    }
#line 1532
    if (start) {
      {
#line 1533
      (*(p->func))(p->buf, p->count, p->data);
      }
    }
  }
#line 1535
  return;
}
}
#line 1537 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void send_ipack(ipack *p ) 
{ 
  int streamid ;
  int off ;
  int ac3_off ;
  AudioInfo ai___0 ;
  int nframes ;
  int f ;

  {
#line 1539
  streamid = 0;
#line 1541
  ac3_off = 0;
#line 1543
  nframes = 0;
#line 1544
  f = 0;
#line 1546
  if (p->count < 10) {
#line 1546
    return;
  }
#line 1547
  *(p->buf + 3) = p->cid;
#line 1548
  *(p->buf + 4) = (uint8_t )(((p->count - 6) & 65280) >> 8);
#line 1549
  *(p->buf + 5) = (uint8_t )((p->count - 6) & 255);
#line 1552
  if ((int )p->cid == 189) {
#line 1554
    off = 9 + (int )*(p->buf + 8);
#line 1555
    streamid = (int )*(p->buf + off);
#line 1556
    if ((streamid & 248) == 128) {
#line 1557
      ai___0.off = (u32 )0;
#line 1558
      ac3_off = ((int )*(p->buf + (off + 2)) << 8) | (int )*(p->buf + (off + 3));
#line 1559
      if (ac3_off < p->count) {
        {
#line 1560
        f = get_ac3info(((p->buf + off) + 3) + ac3_off, p->count - ac3_off, & ai___0,
                        0);
        }
      }
#line 1562
      if (! f) {
#line 1563
        nframes = (int )((u32 )(((p->count - off) - 3) - ac3_off) / ai___0.framesize + 1U);
#line 1565
        *(p->buf + (off + 2)) = (uint8_t )((ac3_off >> 8) & 255);
#line 1566
        *(p->buf + (off + 3)) = (uint8_t )(ac3_off & 255);
#line 1567
        *(p->buf + (off + 1)) = (uint8_t )nframes;
#line 1569
        ac3_off = (int )((u32 )ac3_off + ((u32 )nframes * ai___0.framesize - (u32 )p->count));
      }
    }
  }
#line 1574
  if (p->ps) {
    {
#line 1574
    ps_pes(p);
    }
  } else {
    {
#line 1575
    (*(p->func))(p->buf, p->count, p->data);
    }
  }
  {
#line 1578
  if (p->mpeg == 2) {
#line 1578
    goto case_2;
  }
#line 1594
  if (p->mpeg == 1) {
#line 1594
    goto case_1;
  }
#line 1577
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1580
  *(p->buf + 6) = (uint8_t )128;
#line 1581
  *(p->buf + 7) = (uint8_t )0;
#line 1582
  *(p->buf + 8) = (uint8_t )0;
#line 1583
  p->count = 9;
#line 1585
  if ((int )p->cid == 189) {
#line 1585
    if ((streamid & 248) == 128) {
#line 1586
      p->count += 4;
#line 1587
      *(p->buf + 9) = (uint8_t )streamid;
#line 1588
      *(p->buf + 10) = (uint8_t )((ac3_off >> 8) & 255);
#line 1589
      *(p->buf + 11) = (uint8_t )(ac3_off & 255);
#line 1590
      *(p->buf + 12) = (uint8_t )0;
    }
  }
#line 1593
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1595
  *(p->buf + 6) = (uint8_t )15;
#line 1596
  p->count = 7;
#line 1597
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 1600
  return;
}
}
#line 1603 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
static void write_ipack(ipack *p , uint8_t *data , int count ) 
{ 
  uint8_t headr[3] ;
  int diff ;
  unsigned int tmp ;
  unsigned int tmp___0 ;
  int rest ;

  {
#line 1606
  headr[0] = (uint8_t )0;
#line 1606
  headr[1] = (uint8_t )0;
#line 1606
  headr[2] = (uint8_t )1;
#line 1607
  diff = 0;
#line 1609
  if (p->count < 6) {
    {
#line 1610
    tmp = trans_pts_dts(p->pts);
#line 1610
    tmp___0 = trans_pts_dts(p->last_pts);
    }
#line 1610
    if (tmp > tmp___0) {
      {
#line 1611
      memcpy((void */* __restrict  */)(p->last_pts), (void const   */* __restrict  */)(p->pts),
             (size_t )5);
      }
    }
    {
#line 1612
    p->count = 0;
#line 1613
    memcpy((void */* __restrict  */)(p->buf + p->count), (void const   */* __restrict  */)(headr),
           (size_t )3);
#line 1614
    p->count += 6;
    }
  }
#line 1616
  if (p->size == p->size_orig) {
#line 1616
    if (p->plength) {
#line 1616
      diff = (int )((((6U + p->plength) - (uint32_t )p->found) + (uint32_t )p->count) + (uint32_t )count);
#line 1616
      if (diff > p->size) {
#line 1616
        if (diff < (3 * p->size) / 2) {
#line 1620
          p->size = diff / 2;
        }
      }
    }
  }
#line 1623
  if (p->count + count < p->size) {
    {
#line 1624
    memcpy((void */* __restrict  */)(p->buf + p->count), (void const   */* __restrict  */)data,
           (size_t )count);
#line 1625
    p->count += count;
    }
  } else {
#line 1627
    rest = p->size - p->count;
#line 1628
    if (rest < 0) {
#line 1628
      rest = 0;
    }
    {
#line 1629
    memcpy((void */* __restrict  */)(p->buf + p->count), (void const   */* __restrict  */)data,
           (size_t )rest);
#line 1630
    p->count += rest;
#line 1632
    send_ipack(p);
    }
#line 1633
    if (count - rest > 0) {
      {
#line 1634
      write_ipack(p, data + rest, count - rest);
      }
    }
  }
#line 1636
  return;
}
}
#line 1638 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void instant_repack(uint8_t *buf___5 , int count , ipack *p ) 
{ 
  int l ;
  unsigned short *pl ;
  int c ;
  uint16_t tmp ;
  uint16_t tmp___0 ;

  {
#line 1643
  c = 0;
  {
#line 1645
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1645
    if (c < count) {
#line 1645
      if (p->mpeg == 0) {
#line 1645
        goto _L;
      } else
#line 1645
      if (p->mpeg == 1) {
#line 1645
        if (p->found < 7) {
#line 1645
          goto _L;
        } else {
#line 1645
          goto _L___0;
        }
      } else
      _L___0: /* CIL Label */ 
#line 1645
      if (p->mpeg == 2) {
#line 1645
        if (p->found < 9) {
          _L: /* CIL Label */ 
#line 1645
          if (! (p->found < 5)) {
#line 1645
            if (! (! p->done)) {
#line 1645
              goto while_break;
            }
          }
        } else {
#line 1645
          goto while_break;
        }
      } else {
#line 1645
        goto while_break;
      }
    } else {
#line 1645
      goto while_break;
    }
    {
#line 1651
    if (p->found == 1) {
#line 1651
      goto case_1;
    }
#line 1651
    if (p->found == 0) {
#line 1651
      goto case_1;
    }
#line 1656
    if (p->found == 2) {
#line 1656
      goto case_2;
    }
#line 1663
    if (p->found == 3) {
#line 1663
      goto case_3;
    }
#line 1689
    if (p->found == 4) {
#line 1689
      goto case_4;
    }
#line 1704
    if (p->found == 5) {
#line 1704
      goto case_5;
    }
#line 1713
    if (p->found == 6) {
#line 1713
      goto case_6;
    }
#line 1728
    if (p->found == 7) {
#line 1728
      goto case_7;
    }
#line 1736
    if (p->found == 8) {
#line 1736
      goto case_8;
    }
#line 1744
    goto switch_default___0;
    case_1: /* CIL Label */ 
    case_0: /* CIL Label */ 
#line 1652
    if ((int )*(buf___5 + c) == 0) {
#line 1652
      (p->found) ++;
    } else {
#line 1653
      p->found = 0;
    }
#line 1654
    c ++;
#line 1655
    goto switch_break;
    case_2: /* CIL Label */ 
#line 1657
    if ((int )*(buf___5 + c) == 1) {
#line 1657
      (p->found) ++;
    } else
#line 1658
    if ((int )*(buf___5 + c) == 0) {
#line 1659
      p->found = 2;
    } else {
#line 1660
      p->found = 0;
    }
#line 1661
    c ++;
#line 1662
    goto switch_break;
    case_3: /* CIL Label */ 
#line 1664
    p->cid = (uint8_t )0;
    {
#line 1673
    if ((int )*(buf___5 + c) == 243) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 242) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 190) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 241) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 240) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 255) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 191) {
#line 1673
      goto case_243;
    }
#line 1673
    if ((int )*(buf___5 + c) == 188) {
#line 1673
      goto case_243;
    }
#line 1677
    if ((int )*(buf___5 + c) == 192) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 193) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 194) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 195) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 196) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 197) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 198) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 199) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 200) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 201) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 202) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 203) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 204) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 205) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 206) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 207) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 208) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 209) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 210) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 211) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 212) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 213) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 214) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 215) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 216) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 217) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 218) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 219) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 220) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 221) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 222) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 223) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 224) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 225) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 226) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 227) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 228) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 229) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 230) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 231) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 232) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 233) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 234) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 235) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 236) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 237) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 238) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 239) {
#line 1677
      goto case_192;
    }
#line 1677
    if ((int )*(buf___5 + c) == 189) {
#line 1677
      goto case_192;
    }
#line 1682
    goto switch_default;
    case_243: /* CIL Label */ 
    case_242: /* CIL Label */ 
    case_190: /* CIL Label */ 
    case_241: /* CIL Label */ 
    case_240: /* CIL Label */ 
    case_255: /* CIL Label */ 
    case_191: /* CIL Label */ 
    case_188: /* CIL Label */ 
#line 1674
    p->done = 1;
    case_192: /* CIL Label */ 
    case_193: /* CIL Label */ 
    case_194: /* CIL Label */ 
    case_195: /* CIL Label */ 
    case_196: /* CIL Label */ 
    case_197: /* CIL Label */ 
    case_198: /* CIL Label */ 
    case_199: /* CIL Label */ 
    case_200: /* CIL Label */ 
    case_201: /* CIL Label */ 
    case_202: /* CIL Label */ 
    case_203: /* CIL Label */ 
    case_204: /* CIL Label */ 
    case_205: /* CIL Label */ 
    case_206: /* CIL Label */ 
    case_207: /* CIL Label */ 
    case_208: /* CIL Label */ 
    case_209: /* CIL Label */ 
    case_210: /* CIL Label */ 
    case_211: /* CIL Label */ 
    case_212: /* CIL Label */ 
    case_213: /* CIL Label */ 
    case_214: /* CIL Label */ 
    case_215: /* CIL Label */ 
    case_216: /* CIL Label */ 
    case_217: /* CIL Label */ 
    case_218: /* CIL Label */ 
    case_219: /* CIL Label */ 
    case_220: /* CIL Label */ 
    case_221: /* CIL Label */ 
    case_222: /* CIL Label */ 
    case_223: /* CIL Label */ 
    case_224: /* CIL Label */ 
    case_225: /* CIL Label */ 
    case_226: /* CIL Label */ 
    case_227: /* CIL Label */ 
    case_228: /* CIL Label */ 
    case_229: /* CIL Label */ 
    case_230: /* CIL Label */ 
    case_231: /* CIL Label */ 
    case_232: /* CIL Label */ 
    case_233: /* CIL Label */ 
    case_234: /* CIL Label */ 
    case_235: /* CIL Label */ 
    case_236: /* CIL Label */ 
    case_237: /* CIL Label */ 
    case_238: /* CIL Label */ 
    case_239: /* CIL Label */ 
    case_189: /* CIL Label */ 
#line 1678
    (p->found) ++;
#line 1679
    p->cid = *(buf___5 + c);
#line 1680
    c ++;
#line 1681
    goto switch_break___0;
    switch_default: /* CIL Label */ 
#line 1683
    p->found = 0;
#line 1684
    goto switch_break___0;
    switch_break___0: /* CIL Label */ ;
    }
#line 1686
    goto switch_break;
    case_4: /* CIL Label */ 
#line 1690
    if (count - c > 1) {
      {
#line 1691
      pl = (unsigned short *)(buf___5 + c);
#line 1692
      tmp = ntohs(*pl);
#line 1692
      p->plength = (uint32_t )tmp;
#line 1693
      p->plen[0] = *(buf___5 + c);
#line 1694
      c ++;
#line 1695
      p->plen[1] = *(buf___5 + c);
#line 1696
      c ++;
#line 1697
      p->found += 2;
      }
    } else {
#line 1699
      p->plen[0] = *(buf___5 + c);
#line 1700
      (p->found) ++;
#line 1701
      return;
    }
#line 1703
    goto switch_break;
    case_5: /* CIL Label */ 
    {
#line 1705
    p->plen[1] = *(buf___5 + c);
#line 1706
    c ++;
#line 1707
    pl = (unsigned short *)(p->plen);
#line 1708
    tmp___0 = ntohs(*pl);
#line 1708
    p->plength = (uint32_t )tmp___0;
#line 1709
    (p->found) ++;
    }
#line 1710
    goto switch_break;
    case_6: /* CIL Label */ 
#line 1714
    if (! p->done) {
#line 1715
      p->flag1 = *(buf___5 + c);
#line 1716
      c ++;
#line 1717
      (p->found) ++;
#line 1718
      if (((int )p->flag1 & 192) == 128) {
#line 1718
        p->mpeg = 2;
      } else {
#line 1720
        p->hlength = (uint8_t )0;
#line 1721
        p->which = 0;
#line 1722
        p->mpeg = 1;
#line 1723
        p->flag2 = (uint8_t )0;
      }
    }
#line 1726
    goto switch_break;
    case_7: /* CIL Label */ 
#line 1729
    if (! p->done) {
#line 1729
      if (p->mpeg == 2) {
#line 1730
        p->flag2 = *(buf___5 + c);
#line 1731
        c ++;
#line 1732
        (p->found) ++;
      }
    }
#line 1734
    goto switch_break;
    case_8: /* CIL Label */ 
#line 1737
    if (! p->done) {
#line 1737
      if (p->mpeg == 2) {
#line 1738
        p->hlength = *(buf___5 + c);
#line 1739
        c ++;
#line 1740
        (p->found) ++;
      }
    }
#line 1742
    goto switch_break;
    switch_default___0: /* CIL Label */ 
#line 1746
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1751
  if (c == count) {
#line 1751
    return;
  }
#line 1753
  if (! p->plength) {
#line 1753
    p->plength = (uint32_t )524274;
  }
#line 1756
  if (p->done) {
#line 1756
    goto _L___2;
  } else
#line 1756
  if (p->mpeg == 2) {
#line 1756
    if (p->found >= 9) {
#line 1756
      goto _L___2;
    } else {
#line 1756
      goto _L___3;
    }
  } else
  _L___3: /* CIL Label */ 
#line 1756
  if (p->mpeg == 1) {
#line 1756
    if (p->found >= 7) {
      _L___2: /* CIL Label */ 
      {
#line 1762
      if ((int )p->cid == 189) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 224) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 225) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 226) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 227) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 228) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 229) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 230) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 231) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 232) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 233) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 234) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 235) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 236) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 237) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 238) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 239) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 192) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 193) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 194) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 195) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 196) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 197) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 198) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 199) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 200) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 201) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 202) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 203) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 204) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 205) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 206) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 207) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 208) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 209) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 210) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 211) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 212) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 213) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 214) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 215) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 216) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 217) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 218) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 219) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 220) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 221) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 222) {
#line 1762
        goto case_189___0;
      }
#line 1762
      if ((int )p->cid == 223) {
#line 1762
        goto case_189___0;
      }
#line 1758
      goto switch_break___1;
      case_189___0: /* CIL Label */ 
      case_224___0: /* CIL Label */ 
      case_225___0: /* CIL Label */ 
      case_226___0: /* CIL Label */ 
      case_227___0: /* CIL Label */ 
      case_228___0: /* CIL Label */ 
      case_229___0: /* CIL Label */ 
      case_230___0: /* CIL Label */ 
      case_231___0: /* CIL Label */ 
      case_232___0: /* CIL Label */ 
      case_233___0: /* CIL Label */ 
      case_234___0: /* CIL Label */ 
      case_235___0: /* CIL Label */ 
      case_236___0: /* CIL Label */ 
      case_237___0: /* CIL Label */ 
      case_238___0: /* CIL Label */ 
      case_239___0: /* CIL Label */ 
      case_192___0: /* CIL Label */ 
      case_193___0: /* CIL Label */ 
      case_194___0: /* CIL Label */ 
      case_195___0: /* CIL Label */ 
      case_196___0: /* CIL Label */ 
      case_197___0: /* CIL Label */ 
      case_198___0: /* CIL Label */ 
      case_199___0: /* CIL Label */ 
      case_200___0: /* CIL Label */ 
      case_201___0: /* CIL Label */ 
      case_202___0: /* CIL Label */ 
      case_203___0: /* CIL Label */ 
      case_204___0: /* CIL Label */ 
      case_205___0: /* CIL Label */ 
      case_206___0: /* CIL Label */ 
      case_207___0: /* CIL Label */ 
      case_208___0: /* CIL Label */ 
      case_209___0: /* CIL Label */ 
      case_210___0: /* CIL Label */ 
      case_211___0: /* CIL Label */ 
      case_212___0: /* CIL Label */ 
      case_213___0: /* CIL Label */ 
      case_214___0: /* CIL Label */ 
      case_215___0: /* CIL Label */ 
      case_216___0: /* CIL Label */ 
      case_217___0: /* CIL Label */ 
      case_218___0: /* CIL Label */ 
      case_219___0: /* CIL Label */ 
      case_220___0: /* CIL Label */ 
      case_221___0: /* CIL Label */ 
      case_222___0: /* CIL Label */ 
      case_223___0: /* CIL Label */ 
#line 1764
      if (p->mpeg == 2) {
#line 1764
        if (p->found == 9) {
          {
#line 1765
          write_ipack(p, & p->flag1, 1);
#line 1766
          write_ipack(p, & p->flag2, 1);
#line 1767
          write_ipack(p, & p->hlength, 1);
          }
        }
      }
#line 1770
      if (p->mpeg == 1) {
#line 1770
        if (p->found == 7) {
          {
#line 1771
          write_ipack(p, & p->flag1, 1);
          }
        }
      }
#line 1775
      if (p->mpeg == 2) {
#line 1775
        if ((int )p->flag2 & 128) {
#line 1775
          if (p->found < 14) {
            {
#line 1777
            while (1) {
              while_continue___0: /* CIL Label */ ;
#line 1777
              if (c < count) {
#line 1777
                if (! (p->found < 14)) {
#line 1777
                  goto while_break___0;
                }
              } else {
#line 1777
                goto while_break___0;
              }
              {
#line 1778
              p->pts[p->found - 9] = *(buf___5 + c);
#line 1779
              write_ipack(p, buf___5 + c, 1);
#line 1780
              c ++;
#line 1781
              (p->found) ++;
              }
            }
            while_break___0: /* CIL Label */ ;
            }
#line 1783
            if (c == count) {
#line 1783
              return;
            }
          }
        }
      }
#line 1786
      if (p->mpeg == 1) {
#line 1786
        if (p->which < 2000) {
#line 1788
          if (p->found == 7) {
#line 1789
            p->check = p->flag1;
#line 1790
            p->hlength = (uint8_t )1;
          }
          {
#line 1793
          while (1) {
            while_continue___1: /* CIL Label */ ;
#line 1793
            if (! p->which) {
#line 1793
              if (c < count) {
#line 1793
                if (! ((int )p->check == 255)) {
#line 1793
                  goto while_break___1;
                }
              } else {
#line 1793
                goto while_break___1;
              }
            } else {
#line 1793
              goto while_break___1;
            }
            {
#line 1795
            p->check = *(buf___5 + c);
#line 1796
            write_ipack(p, buf___5 + c, 1);
#line 1797
            c ++;
#line 1798
            (p->found) ++;
#line 1799
            p->hlength = (uint8_t )((int )p->hlength + 1);
            }
          }
          while_break___1: /* CIL Label */ ;
          }
#line 1802
          if (c == count) {
#line 1802
            return;
          }
#line 1804
          if (((int )p->check & 192) == 64) {
#line 1804
            if (! p->which) {
              {
#line 1805
              p->check = *(buf___5 + c);
#line 1806
              write_ipack(p, buf___5 + c, 1);
#line 1807
              c ++;
#line 1808
              (p->found) ++;
#line 1809
              p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1811
              p->which = 1;
              }
#line 1812
              if (c == count) {
#line 1812
                return;
              }
              {
#line 1813
              p->check = *(buf___5 + c);
#line 1814
              write_ipack(p, buf___5 + c, 1);
#line 1815
              c ++;
#line 1816
              (p->found) ++;
#line 1817
              p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1818
              p->which = 2;
              }
#line 1819
              if (c == count) {
#line 1819
                return;
              }
            }
          }
#line 1822
          if (p->which == 1) {
            {
#line 1823
            p->check = *(buf___5 + c);
#line 1824
            write_ipack(p, buf___5 + c, 1);
#line 1825
            c ++;
#line 1826
            (p->found) ++;
#line 1827
            p->hlength = (uint8_t )((int )p->hlength + 1);
#line 1828
            p->which = 2;
            }
#line 1829
            if (c == count) {
#line 1829
              return;
            }
          }
#line 1832
          if ((int )p->check & 48) {
#line 1832
            if ((int )p->check != 255) {
#line 1833
              p->flag2 = (uint8_t )(((int )p->check & 240) << 2);
#line 1834
              p->pts[0] = p->check;
#line 1835
              p->which = 3;
            }
          }
#line 1838
          if (c == count) {
#line 1838
            return;
          }
#line 1839
          if (p->which > 2) {
#line 1840
            if (((int )p->flag2 & 192) == 128) {
              {
#line 1842
              while (1) {
                while_continue___2: /* CIL Label */ ;
#line 1842
                if (c < count) {
#line 1842
                  if (! (p->which < 7)) {
#line 1842
                    goto while_break___2;
                  }
                } else {
#line 1842
                  goto while_break___2;
                }
                {
#line 1844
                p->pts[p->which - 2] = *(buf___5 + c);
#line 1846
                write_ipack(p, buf___5 + c, 1);
#line 1847
                c ++;
#line 1848
                (p->found) ++;
#line 1849
                (p->which) ++;
#line 1850
                p->hlength = (uint8_t )((int )p->hlength + 1);
                }
              }
              while_break___2: /* CIL Label */ ;
              }
#line 1852
              if (c == count) {
#line 1852
                return;
              }
            } else
#line 1853
            if (((int )p->flag2 & 192) == 192) {
              {
#line 1855
              while (1) {
                while_continue___3: /* CIL Label */ ;
#line 1855
                if (c < count) {
#line 1855
                  if (! (p->which < 12)) {
#line 1855
                    goto while_break___3;
                  }
                } else {
#line 1855
                  goto while_break___3;
                }
#line 1857
                if (p->which < 7) {
#line 1858
                  p->pts[p->which - 2] = *(buf___5 + c);
                }
                {
#line 1861
                write_ipack(p, buf___5 + c, 1);
#line 1862
                c ++;
#line 1863
                (p->found) ++;
#line 1864
                (p->which) ++;
#line 1865
                p->hlength = (uint8_t )((int )p->hlength + 1);
                }
              }
              while_break___3: /* CIL Label */ ;
              }
#line 1867
              if (c == count) {
#line 1867
                return;
              }
            }
#line 1869
            p->which = 2000;
          }
        }
      }
      {
#line 1874
      while (1) {
        while_continue___4: /* CIL Label */ ;
#line 1874
        if (c < count) {
#line 1874
          if (! ((uint32_t )p->found < p->plength + 6U)) {
#line 1874
            goto while_break___4;
          }
        } else {
#line 1874
          goto while_break___4;
        }
#line 1875
        l = count - c;
#line 1876
        if ((uint32_t )(l + p->found) > p->plength + 6U) {
#line 1877
          l = (int )((p->plength + 6U) - (uint32_t )p->found);
        }
        {
#line 1878
        write_ipack(p, buf___5 + c, l);
#line 1879
        p->found += l;
#line 1880
        c += l;
        }
      }
      while_break___4: /* CIL Label */ ;
      }
#line 1883
      goto switch_break___1;
      switch_break___1: /* CIL Label */ ;
      }
#line 1887
      if (p->done) {
#line 1888
        if ((uint32_t )((p->found + count) - c) < p->plength + 6U) {
#line 1889
          p->found += count - c;
#line 1890
          c = count;
        } else {
#line 1892
          c = (int )((uint32_t )c + ((p->plength + 6U) - (uint32_t )p->found));
#line 1893
          p->found = (int )(p->plength + 6U);
        }
      }
#line 1897
      if (p->plength) {
#line 1897
        if ((uint32_t )p->found == p->plength + 6U) {
          {
#line 1898
          send_ipack(p);
#line 1899
          reset_ipack(p);
          }
#line 1900
          if (c < count) {
            {
#line 1901
            instant_repack(buf___5 + c, count - c, p);
            }
          }
        }
      }
    }
  }
#line 1904
  return;
}
}
#line 1907 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void write_out_es(uint8_t *buf___5 , int count , void *priv ) 
{ 
  ipack *p ;
  u8 payl ;

  {
  {
#line 1909
  p = (ipack *)priv;
#line 1910
  payl = (u8 )((((int )*(buf___5 + 8) + 9) + p->start) - 1);
#line 1912
  write(p->fd, (void const   *)(buf___5 + (int )payl), (size_t )(count - (int )payl));
#line 1913
  p->start = 1;
  }
#line 1914
  return;
}
}
#line 1916 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void write_out_pes(uint8_t *buf___5 , int count , void *priv ) 
{ 
  ipack *p ;

  {
  {
#line 1918
  p = (ipack *)priv;
#line 1919
  write(p->fd, (void const   *)buf___5, (size_t )count);
  }
#line 1920
  return;
}
}
#line 1924 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
int64_t ts_demux(int fdin , int fdv_out , int fda_out , uint16_t pida , uint16_t pidv ,
                 int es ) 
{ 
  uint8_t buf___5[1880] ;
  uint8_t mbuf[188] ;
  int i ;
  int count ;
  uint16_t pid___0 ;
  ipack pa___0 ;
  ipack pv___0 ;
  ipack *p ;
  u8 *sb ;
  int64_t apts ;
  int64_t vpts ;
  int verb ;
  uint64_t length ;
  uint64_t l ;
  int perc ;
  int last_perc ;
  __off64_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  ssize_t tmp___2 ;
  uint8_t off ;
  uint8_t *pay ;
  int l___0 ;
  unsigned int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  unsigned int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;

  {
#line 1930
  count = 1;
#line 1935
  apts = (int64_t )0;
#line 1936
  vpts = (int64_t )0;
#line 1937
  verb = 0;
#line 1938
  length = (uint64_t )0;
#line 1939
  l = (uint64_t )0;
#line 1940
  perc = 0;
#line 1941
  last_perc = 0;
#line 1943
  if (fdin != 0) {
#line 1943
    verb = 1;
  }
#line 1945
  if (verb) {
    {
#line 1946
    tmp = lseek(fdin, (__off64_t )0, 2);
#line 1946
    length = (uint64_t )tmp;
#line 1947
    lseek(fdin, (__off64_t )0, 0);
    }
  }
#line 1950
  if (! pida) {
    {
#line 1951
    find_avpids(fdin, & pidv, & pida);
    }
  } else
#line 1950
  if (! pidv) {
    {
#line 1951
    find_avpids(fdin, & pidv, & pida);
    }
  }
#line 1953
  if (es) {
    {
#line 1954
    init_ipack(& pa___0, 2048, & write_out_es, 0);
#line 1955
    init_ipack(& pv___0, 2048, & write_out_es, 0);
    }
  } else {
    {
#line 1957
    init_ipack(& pa___0, 2048, & write_out_pes, 0);
#line 1958
    init_ipack(& pv___0, 2048, & write_out_pes, 0);
    }
  }
  {
#line 1960
  pa___0.fd = fda_out;
#line 1961
  pv___0.fd = fdv_out;
#line 1962
  pa___0.data = (void *)(& pa___0);
#line 1963
  pv___0.data = (void *)(& pv___0);
#line 1965
  tmp___0 = read(fdin, (void *)(mbuf), (size_t )188);
#line 1965
  count = (int )tmp___0;
  }
#line 1966
  if (count) {
#line 1966
    l += (uint64_t )count;
  }
#line 1967
  i = 0;
  {
#line 1967
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1967
    if (! (i < 188)) {
#line 1967
      goto while_break;
    }
#line 1968
    if ((int )mbuf[i] == 71) {
#line 1968
      goto while_break;
    }
#line 1967
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1970
  if (i == 188) {
    {
#line 1971
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not a TS\n");
    }
#line 1972
    return ((int64_t )0);
  } else {
    {
#line 1974
    memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(mbuf + i),
           (size_t )(188 - i));
#line 1975
    tmp___1 = read(fdin, (void *)(mbuf), (size_t )i);
#line 1975
    count = (int )tmp___1;
    }
#line 1976
    if (count) {
#line 1976
      l += (uint64_t )count;
    }
    {
#line 1977
    memcpy((void */* __restrict  */)((buf___5 + 188) - i), (void const   */* __restrict  */)(mbuf),
           (size_t )i);
#line 1978
    i = 188;
    }
  }
#line 1981
  count = 1;
  {
#line 1982
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 1982
    if (! (count > 0)) {
#line 1982
      goto while_break___0;
    }
    {
#line 1983
    tmp___2 = read(fdin, (void *)(buf___5 + i), (size_t )(1880 - i));
#line 1983
    count = (int )tmp___2;
    }
#line 1984
    if (count) {
#line 1984
      l += (uint64_t )count;
    }
#line 1985
    if (verb) {
#line 1985
      if (perc > last_perc) {
        {
#line 1986
        perc = (int )((100UL * l) / length);
#line 1987
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Reading TS  %d %%\r",
                perc);
#line 1988
        last_perc = perc;
        }
      }
    }
#line 1991
    i = 0;
    {
#line 1991
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 1991
      if (! (i < count)) {
#line 1991
        goto while_break___1;
      }
#line 1992
      off = (uint8_t )0;
#line 1994
      if (count - i < 188) {
#line 1994
        goto while_break___1;
      }
      {
#line 1996
      pid___0 = get_pid((buf___5 + i) + 1);
      }
#line 1997
      if (! ((int )buf___5[3 + i] & 16)) {
#line 1998
        goto __Cont;
      }
#line 1999
      if ((int )pid___0 == (int )pidv) {
#line 2000
        p = & pv___0;
      } else
#line 2002
      if ((int )pid___0 == (int )pida) {
#line 2003
        p = & pa___0;
      } else {
#line 2004
        goto __Cont;
      }
#line 2007
      if ((int )buf___5[3 + i] & 32) {
#line 2008
        off = (uint8_t )((int )buf___5[4 + i] + 1);
      }
#line 2011
      if ((int )buf___5[1 + i] & 64) {
#line 2012
        if (p->plength == 524274U) {
          {
#line 2013
          p->plength = (uint32_t )(p->found - 6);
#line 2014
          p->found = 0;
#line 2015
          send_ipack(p);
#line 2016
          reset_ipack(p);
          }
        }
#line 2018
        sb = ((buf___5 + 4) + (int )off) + i;
#line 2019
        if (es) {
#line 2019
          if (! p->start) {
#line 2019
            if ((int )*(sb + 7) & 192) {
#line 2021
              pay = (sb + (int )*(sb + 8)) + 9;
#line 2022
              l___0 = (175 - (int )off) - (int )*(sb + 8);
#line 2023
              if ((int )pid___0 == (int )pidv) {
                {
#line 2023
                tmp___5 = get_vinfo(pay, l___0, & p->vi, 1);
#line 2023
                tmp___4 = tmp___5 + 1;
#line 2023
                p->start = tmp___4;
                }
#line 2023
                if (tmp___4 > 0) {
                  {
#line 2027
                  tmp___3 = trans_pts_dts(sb + 9);
#line 2027
                  vpts = (int64_t )tmp___3;
#line 2028
                  printf((char const   */* __restrict  */)"vpts : %fs\n", (double )vpts / 90000.);
                  }
                }
              }
#line 2031
              if ((int )pid___0 == (int )pida) {
                {
#line 2031
                tmp___8 = get_ainfo(pay, l___0, & p->ai, 1);
#line 2031
                tmp___7 = tmp___8 + 1;
#line 2031
                p->start = tmp___7;
                }
#line 2031
                if (tmp___7 > 0) {
                  {
#line 2035
                  tmp___6 = trans_pts_dts(sb + 9);
#line 2035
                  apts = (int64_t )tmp___6;
#line 2036
                  printf((char const   */* __restrict  */)"apts : %fs\n", (double )apts / 90000.);
                  }
                }
              }
            }
          }
        }
      }
#line 2042
      if (p->start) {
        {
#line 2043
        instant_repack(((buf___5 + 4) + (int )off) + i, 184 - (int )off, p);
        }
      }
      __Cont: /* CIL Label */ 
#line 1991
      i += 188;
    }
    while_break___1: /* CIL Label */ ;
    }
#line 2045
    i = 0;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2049
  return (vpts - apts);
}
}
#line 2052 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void ts2es(int fdin , uint16_t pidv ) 
{ 
  uint8_t buf___5[1880] ;
  uint8_t mbuf[188] ;
  int i ;
  int count ;
  ipack p ;
  int verb ;
  uint64_t length ;
  uint64_t l ;
  int perc ;
  int last_perc ;
  uint16_t pid___0 ;
  __off64_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  ssize_t tmp___2 ;
  uint8_t off ;

  {
#line 2057
  count = 1;
#line 2059
  verb = 0;
#line 2060
  length = (uint64_t )0;
#line 2061
  l = (uint64_t )0;
#line 2062
  perc = 0;
#line 2063
  last_perc = 0;
#line 2066
  if (fdin != 0) {
#line 2066
    verb = 1;
  }
#line 2068
  if (verb) {
    {
#line 2069
    tmp = lseek(fdin, (__off64_t )0, 2);
#line 2069
    length = (uint64_t )tmp;
#line 2070
    lseek(fdin, (__off64_t )0, 0);
    }
  }
  {
#line 2073
  init_ipack(& p, 2048, & write_out_es, 0);
#line 2075
  p.fd = 1;
#line 2076
  p.data = (void *)(& p);
#line 2078
  tmp___0 = read(fdin, (void *)(mbuf), (size_t )188);
#line 2078
  count = (int )tmp___0;
  }
#line 2079
  if (count) {
#line 2079
    l += (uint64_t )count;
  }
#line 2080
  i = 0;
  {
#line 2080
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2080
    if (! (i < 188)) {
#line 2080
      goto while_break;
    }
#line 2081
    if ((int )mbuf[i] == 71) {
#line 2081
      goto while_break;
    }
#line 2080
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2083
  if (i == 188) {
    {
#line 2084
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Not a TS\n");
    }
#line 2085
    return;
  } else {
    {
#line 2087
    memcpy((void */* __restrict  */)(buf___5), (void const   */* __restrict  */)(mbuf + i),
           (size_t )(188 - i));
#line 2088
    tmp___1 = read(fdin, (void *)(mbuf), (size_t )i);
#line 2088
    count = (int )tmp___1;
    }
#line 2089
    if (count) {
#line 2089
      l += (uint64_t )count;
    }
    {
#line 2090
    memcpy((void */* __restrict  */)((buf___5 + 188) - i), (void const   */* __restrict  */)(mbuf),
           (size_t )i);
#line 2091
    i = 188;
    }
  }
#line 2094
  count = 1;
  {
#line 2095
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2095
    if (! (count > 0)) {
#line 2095
      goto while_break___0;
    }
    {
#line 2096
    tmp___2 = read(fdin, (void *)(buf___5 + i), (size_t )(1880 - i));
#line 2096
    count = (int )tmp___2;
    }
#line 2097
    if (count) {
#line 2097
      l += (uint64_t )count;
    }
#line 2098
    if (verb) {
#line 2098
      if (perc > last_perc) {
        {
#line 2099
        perc = (int )((100UL * l) / length);
#line 2100
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Reading TS  %d %%\r",
                perc);
#line 2101
        last_perc = perc;
        }
      }
    }
#line 2104
    i = 0;
    {
#line 2104
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 2104
      if (! (i < count)) {
#line 2104
        goto while_break___1;
      }
#line 2105
      off = (uint8_t )0;
#line 2107
      if (count - i < 188) {
#line 2107
        goto while_break___1;
      }
      {
#line 2109
      pid___0 = get_pid((buf___5 + i) + 1);
      }
#line 2110
      if (! ((int )buf___5[3 + i] & 16)) {
#line 2111
        goto __Cont;
      }
#line 2112
      if ((int )pid___0 != (int )pidv) {
#line 2113
        goto __Cont;
      }
#line 2116
      if ((int )buf___5[3 + i] & 32) {
#line 2117
        off = (uint8_t )((int )buf___5[4 + i] + 1);
      }
#line 2120
      if ((int )buf___5[1 + i] & 64) {
#line 2121
        if (p.plength == 524274U) {
          {
#line 2122
          p.plength = (uint32_t )(p.found - 6);
#line 2123
          p.found = 0;
#line 2124
          send_ipack(& p);
#line 2125
          reset_ipack(& p);
          }
        }
      }
      {
#line 2129
      instant_repack(((buf___5 + 4) + (int )off) + i, 184 - (int )off, & p);
      }
      __Cont: /* CIL Label */ 
#line 2104
      i += 188;
    }
    while_break___1: /* CIL Label */ ;
    }
#line 2131
    i = 0;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2134
  return;
}
}
#line 2137 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/transform.c"
void change_aspect(int fdin , int fdout , int aspect ) 
{ 
  ps_packet ps ;
  pes_packet pes ;
  int neof ;
  int i ;
  u8 *buf___5 ;
  int c ;
  int l ;

  {
  {
#line 2143
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 2144
    init_ps(& ps);
#line 2145
    neof = read_ps(fdin, & ps);
#line 2146
    write_ps(fdout, & ps);
#line 2147
    i = 0;
    }
    {
#line 2147
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 2147
      if (! (i < ps.npes)) {
#line 2147
        goto while_break___0;
      }
      {
#line 2149
      c = 0;
#line 2152
      init_pes(& pes);
#line 2153
      read_pes(fdin, & pes);
#line 2155
      buf___5 = pes.pes_pckt_data;
      }
      {
#line 2158
      if ((int )pes.stream_id == 224) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 225) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 226) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 227) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 228) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 229) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 230) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 231) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 232) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 233) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 234) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 235) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 236) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 237) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 238) {
#line 2158
        goto case_224;
      }
#line 2158
      if ((int )pes.stream_id == 239) {
#line 2158
        goto case_224;
      }
#line 2161
      goto switch_default;
      case_224: /* CIL Label */ 
      case_225: /* CIL Label */ 
      case_226: /* CIL Label */ 
      case_227: /* CIL Label */ 
      case_228: /* CIL Label */ 
      case_229: /* CIL Label */ 
      case_230: /* CIL Label */ 
      case_231: /* CIL Label */ 
      case_232: /* CIL Label */ 
      case_233: /* CIL Label */ 
      case_234: /* CIL Label */ 
      case_235: /* CIL Label */ 
      case_236: /* CIL Label */ 
      case_237: /* CIL Label */ 
      case_238: /* CIL Label */ 
      case_239: /* CIL Label */ 
#line 2159
      l = (int )pes.length;
#line 2160
      goto switch_break;
      switch_default: /* CIL Label */ 
#line 2162
      l = 0;
#line 2163
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
      {
#line 2165
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 2165
        if (! (c < l - 6)) {
#line 2165
          goto while_break___1;
        }
#line 2166
        if ((int )*(buf___5 + c) == 0) {
#line 2166
          if ((int )*(buf___5 + (c + 1)) == 0) {
#line 2166
            if ((int )*(buf___5 + (c + 2)) == 1) {
#line 2166
              if ((int )*(buf___5 + (c + 3)) == 179) {
#line 2170
                c += 4;
#line 2171
                *(buf___5 + (c + 3)) = (u8 )((int )*(buf___5 + (c + 3)) & 15);
#line 2172
                *(buf___5 + (c + 3)) = (u8 )((int )*(buf___5 + (c + 3)) | aspect);
              } else {
#line 2174
                c ++;
              }
            } else {
#line 2174
              c ++;
            }
          } else {
#line 2174
            c ++;
          }
        } else {
#line 2174
          c ++;
        }
      }
      while_break___1: /* CIL Label */ ;
      }
      {
#line 2176
      write_pes(fdout, & pes);
#line 2147
      i ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 2143
    if (! (neof > 0)) {
#line 2143
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 2179
  return;
}
}
#line 306 "/usr/include/stdio.h"
extern  __attribute__((__nothrow__)) FILE *( __attribute__((__leaf__)) fdopen)(int __fd ,
                                                                               char const   *__modes ) ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 137 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern int connect(int __fd , struct sockaddr  const  *__addr , socklen_t __len ) ;
#line 137 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcat)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 147
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncmp)(char const   *__s1 ,
                                                                                                char const   *__s2 ,
                                                                                                size_t __n )  __attribute__((__pure__)) ;
#line 176
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strdup)(char const   *__s )  __attribute__((__malloc__)) ;
#line 220 "/usr/include/x86_64-linux-gnu/sys/stat.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(2), __leaf__)) fstat)(int __fd ,
                                                                                            struct stat *__buf )  __asm__("fstat64")  ;
#line 144 "/usr/include/netdb.h"
extern struct hostent *gethostbyname(char const   *__name ) ;
#line 170 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.h"
void setlength_pes(pes_packet *p ) ;
#line 171
void nlength_pes(pes_packet *p ) ;
#line 172
int cwrite_pes(u8 *buf___5 , pes_packet *p , long length ) ;
#line 175
void cread_pes(char *buf___5 , pes_packet *p ) ;
#line 229
void init_ts(ts_packet *p ) ;
#line 230
void kill_ts(ts_packet *p ) ;
#line 231
unsigned short pid_ts(ts_packet *p ) ;
#line 232
int cwrite_ts(u8 *buf___5 , ts_packet *p , long length ) ;
#line 233
void write_ts(int fd___0 , ts_packet *p ) ;
#line 234
int read_ts(int f , ts_packet *p ) ;
#line 235
void cread_ts(char *buf___5 , ts_packet *p , long length ) ;
#line 267
void kill_ps(ps_packet *p ) ;
#line 268
void setlength_ps(ps_packet *p ) ;
#line 269
u32 scr_base_ps(ps_packet *p ) ;
#line 270
u16 scr_ext_ps(ps_packet *p ) ;
#line 271
int mux_ps(ps_packet *p ) ;
#line 272
int rate_ps(ps_packet *p ) ;
#line 273
int cwrite_ps(u8 *buf___5 , ps_packet *p , long length ) ;
#line 276
void cread_ps(char *buf___5 , ps_packet *p , long length ) ;
#line 310
void init_trans(trans *p ) ;
#line 311
int set_trans_filt(trans *p , int filtn , u16 pid___0 , u8 *mask , u8 *filt , int pes ) ;
#line 314
void clear_trans_filt(trans *p , int filtn ) ;
#line 315
int filt_is_set(trans *p , int filtn ) ;
#line 316
int pes_is_set(trans *p , int filtn ) ;
#line 317
int pes_is_started(trans *p , int filtn ) ;
#line 318
int pes_is_start(trans *p , int filtn ) ;
#line 319
int filt_is_ready(trans *p , int filtn ) ;
#line 321
void trans_filt(u8 *buf___5 , int count , trans *p ) ;
#line 322
void filter(trans *p ) ;
#line 323
void pes_filter(trans *p , int filtn , int off ) ;
#line 324
void sec_filter(trans *p , int filtn , int off ) ;
#line 325
int get_filt_buf(trans *p , int filtn , u8 **buf___5 ) ;
#line 326
section *get_filt_sec(trans *p , int filtn ) ;
#line 358
void pts2pts(u8 *av_pts , u8 *pts ) ;
#line 359
void write_ps_headr(ps_packet *p , u8 *pts , int fd___0 ) ;
#line 369
void twrite(u8 const   *buf___5 ) ;
#line 370
void init_p2t(p2t_t *p , void (*fkt)(u8 const   *buf ) ) ;
#line 371
long find_pes_header(u8 const   *buf___5 , long length , int *frags ) ;
#line 372
void pes_to_ts(u8 const   *buf___5 , long length , u16 pid___0 , p2t_t *p ) ;
#line 373
void p_to_t(u8 const   *buf___5 , long length , u16 pid___0 , u8 *counter , void (*ts_write)(u8 const   * ) ) ;
#line 399
void split_mpg(char *name___0 , uint64_t size ) ;
#line 400
void cut_mpg(char *name___0 , uint64_t size ) ;
#line 401
int http_open(char *url ) ;
#line 42 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void init_pes(pes_packet *p ) 
{ 


  {
#line 43
  p->stream_id = (u8 )0;
#line 44
  p->llength[0] = (u8 )0;
#line 45
  p->llength[1] = (u8 )0;
#line 46
  p->length = (uint32_t )0;
#line 47
  p->flags1 = (u8 )128;
#line 48
  p->flags2 = (u8 )0;
#line 49
  p->pes_hlength = (u8 )0;
#line 50
  p->trick = (u8 )0;
#line 51
  p->add_cpy = (u8 )0;
#line 52
  p->priv_flags = (u8 )0;
#line 53
  p->pack_field_length = (u8 )0;
#line 54
  p->pack_header = (u8 *)((void *)0);
#line 55
  p->pck_sqnc_cntr = (u8 )0;
#line 56
  p->org_stuff_length = (u8 )0;
#line 57
  p->pes_ext_lngth = (u8 )0;
#line 58
  p->pes_ext = (u8 *)((void *)0);
#line 59
  p->pes_pckt_data = (u8 *)((void *)0);
#line 60
  p->padding = 0;
#line 61
  p->mpeg = 2;
#line 62
  p->mpeg1_pad = 0;
#line 63
  p->mpeg1_headr = (u8 *)((void *)0);
#line 64
  p->stuffing = (u8 )0;
#line 65
  return;
}
}
#line 67 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void kill_pes(pes_packet *p ) 
{ 


  {
#line 68
  if (p->pack_header) {
    {
#line 69
    free((void *)p->pack_header);
    }
  }
#line 70
  if (p->pes_ext) {
    {
#line 71
    free((void *)p->pes_ext);
    }
  }
#line 72
  if (p->pes_pckt_data) {
    {
#line 73
    free((void *)p->pes_pckt_data);
    }
  }
#line 74
  if (p->mpeg1_headr) {
    {
#line 75
    free((void *)p->mpeg1_headr);
    }
  }
  {
#line 76
  init_pes(p);
  }
#line 77
  return;
}
}
#line 79 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void setlength_pes(pes_packet *p ) 
{ 
  short *ll ;
  uint16_t tmp ;

  {
  {
#line 81
  ll = (short *)(p->llength);
#line 82
  tmp = ntohs((uint16_t )*ll);
#line 82
  p->length = (uint32_t )tmp;
  }
#line 83
  return;
}
}
#line 85 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
static void setl_pes(pes_packet *p ) 
{ 
  void *tmp ;

  {
  {
#line 86
  setlength_pes(p);
  }
#line 87
  if (p->length) {
    {
#line 88
    tmp = malloc((size_t )p->length);
#line 88
    p->pes_pckt_data = (u8 *)tmp;
    }
  }
#line 89
  return;
}
}
#line 91 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void nlength_pes(pes_packet *p ) 
{ 
  short *ll ;
  short l ;
  uint16_t tmp ;

  {
#line 92
  if (p->length <= 65535U) {
    {
#line 93
    ll = (short *)(p->llength);
#line 94
    l = (short )p->length;
#line 95
    tmp = htons((uint16_t )l);
#line 95
    *ll = (short )tmp;
    }
  } else {
#line 97
    p->llength[0] = (u8 )0;
#line 98
    p->llength[1] = (u8 )0;
  }
#line 100
  return;
}
}
#line 102 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
static void nl_pes(pes_packet *p ) 
{ 
  void *tmp ;

  {
  {
#line 104
  nlength_pes(p);
#line 105
  tmp = malloc((size_t )p->length);
#line 105
  p->pes_pckt_data = (u8 *)tmp;
  }
#line 106
  return;
}
}
#line 108 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void pts2pts(u8 *av_pts , u8 *pts ) 
{ 


  {
#line 111
  *(av_pts + 0) = (u8 )((((int )*(pts + 0) & 6) << 5) | (((int )*(pts + 1) & 252) >> 2));
#line 113
  *(av_pts + 1) = (u8 )((((int )*(pts + 1) & 3) << 6) | (((int )*(pts + 2) & 252) >> 2));
#line 115
  *(av_pts + 2) = (u8 )((((int )*(pts + 2) & 2) << 6) | (((int )*(pts + 3) & 254) >> 1));
#line 117
  *(av_pts + 3) = (u8 )((((int )*(pts + 3) & 1) << 7) | (((int )*(pts + 4) & 254) >> 1));
#line 120
  return;
}
}
#line 123 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int cwrite_pes(u8 *buf___5 , pes_packet *p , long length ) 
{ 
  int count ;
  int i ;
  u8 dummy ;
  int more ;
  u8 headr[3] ;

  {
#line 126
  more = 0;
#line 127
  headr[0] = (u8 )0;
#line 127
  headr[1] = (u8 )0;
#line 127
  headr[2] = (u8 )1;
#line 129
  if (length < (long )(p->length + (uint32_t )p->pes_hlength)) {
    {
#line 130
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Wrong buffer size in cwrite_pes\n");
#line 131
    exit(1);
    }
  }
  {
#line 135
  memcpy((void */* __restrict  */)buf___5, (void const   */* __restrict  */)(headr),
         (size_t )3);
#line 136
  count = 3;
#line 137
  *(buf___5 + count) = p->stream_id;
#line 138
  count ++;
  }
  {
#line 147
  if ((int )p->stream_id == 190) {
#line 147
    goto case_190;
  }
#line 147
  if ((int )p->stream_id == 241) {
#line 147
    goto case_190;
  }
#line 147
  if ((int )p->stream_id == 240) {
#line 147
    goto case_190;
  }
#line 147
  if ((int )p->stream_id == 255) {
#line 147
    goto case_190;
  }
#line 147
  if ((int )p->stream_id == 191) {
#line 147
    goto case_190;
  }
#line 147
  if ((int )p->stream_id == 188) {
#line 147
    goto case_190;
  }
#line 159
  if ((int )p->stream_id == 224) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 225) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 226) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 227) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 228) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 229) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 230) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 231) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 232) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 233) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 234) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 235) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 236) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 237) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 238) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 239) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 192) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 193) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 194) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 195) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 196) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 197) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 198) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 199) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 200) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 201) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 202) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 203) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 204) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 205) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 206) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 207) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 208) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 209) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 210) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 211) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 212) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 213) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 214) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 215) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 216) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 217) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 218) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 219) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 220) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 221) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 222) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 223) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 189) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 243) {
#line 159
    goto case_224;
  }
#line 159
  if ((int )p->stream_id == 242) {
#line 159
    goto case_224;
  }
#line 140
  goto switch_break;
  case_190: /* CIL Label */ 
  case_241: /* CIL Label */ 
  case_240: /* CIL Label */ 
  case_255: /* CIL Label */ 
  case_191: /* CIL Label */ 
  case_188: /* CIL Label */ 
  {
#line 148
  *(buf___5 + count) = p->llength[0];
#line 149
  count ++;
#line 150
  *(buf___5 + count) = p->llength[1];
#line 151
  count ++;
#line 152
  memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->pes_pckt_data,
         (size_t )p->length);
#line 153
  count = (int )((uint32_t )count + p->length);
  }
#line 154
  goto switch_break;
  case_224: /* CIL Label */ 
  case_225: /* CIL Label */ 
  case_226: /* CIL Label */ 
  case_227: /* CIL Label */ 
  case_228: /* CIL Label */ 
  case_229: /* CIL Label */ 
  case_230: /* CIL Label */ 
  case_231: /* CIL Label */ 
  case_232: /* CIL Label */ 
  case_233: /* CIL Label */ 
  case_234: /* CIL Label */ 
  case_235: /* CIL Label */ 
  case_236: /* CIL Label */ 
  case_237: /* CIL Label */ 
  case_238: /* CIL Label */ 
  case_239: /* CIL Label */ 
  case_192: /* CIL Label */ 
  case_193: /* CIL Label */ 
  case_194: /* CIL Label */ 
  case_195: /* CIL Label */ 
  case_196: /* CIL Label */ 
  case_197: /* CIL Label */ 
  case_198: /* CIL Label */ 
  case_199: /* CIL Label */ 
  case_200: /* CIL Label */ 
  case_201: /* CIL Label */ 
  case_202: /* CIL Label */ 
  case_203: /* CIL Label */ 
  case_204: /* CIL Label */ 
  case_205: /* CIL Label */ 
  case_206: /* CIL Label */ 
  case_207: /* CIL Label */ 
  case_208: /* CIL Label */ 
  case_209: /* CIL Label */ 
  case_210: /* CIL Label */ 
  case_211: /* CIL Label */ 
  case_212: /* CIL Label */ 
  case_213: /* CIL Label */ 
  case_214: /* CIL Label */ 
  case_215: /* CIL Label */ 
  case_216: /* CIL Label */ 
  case_217: /* CIL Label */ 
  case_218: /* CIL Label */ 
  case_219: /* CIL Label */ 
  case_220: /* CIL Label */ 
  case_221: /* CIL Label */ 
  case_222: /* CIL Label */ 
  case_223: /* CIL Label */ 
  case_189: /* CIL Label */ 
  case_243: /* CIL Label */ 
  case_242: /* CIL Label */ 
#line 160
  *(buf___5 + count) = p->llength[0];
#line 161
  count ++;
#line 162
  *(buf___5 + count) = p->llength[1];
#line 163
  count ++;
#line 164
  more = 1;
#line 165
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 169
  if (more) {
#line 170
    if (p->mpeg == 2) {
      {
#line 171
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->flags1),
             (size_t )1);
#line 172
      count ++;
#line 173
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->flags2),
             (size_t )1);
#line 174
      count ++;
#line 175
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->pes_hlength),
             (size_t )1);
#line 176
      count ++;
      }
#line 178
      if (((int )p->flags2 & 192) == 128) {
        {
#line 179
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pts),
               (size_t )5);
#line 180
        count += 5;
        }
      } else
#line 182
      if (((int )p->flags2 & 192) == 192) {
        {
#line 183
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pts),
               (size_t )5);
#line 184
        count += 5;
#line 185
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->dts),
               (size_t )5);
#line 186
        count += 5;
        }
      }
#line 188
      if ((int )p->flags2 & 32) {
        {
#line 189
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->escr),
               (size_t )6);
#line 190
        count += 6;
        }
      }
#line 192
      if ((int )p->flags2 & 16) {
        {
#line 193
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->es_rate),
               (size_t )3);
#line 194
        count += 3;
        }
      }
#line 196
      if ((int )p->flags2 & 8) {
        {
#line 197
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->trick),
               (size_t )1);
#line 198
        count ++;
        }
      }
#line 200
      if ((int )p->flags2 & 4) {
        {
#line 201
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->add_cpy),
               (size_t )1);
#line 202
        count ++;
        }
      }
#line 204
      if ((int )p->flags2 & 2) {
        {
#line 205
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->prev_pes_crc),
               (size_t )2);
#line 206
        count += 2;
        }
      }
#line 208
      if ((int )p->flags2 & 1) {
        {
#line 209
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->priv_flags),
               (size_t )1);
#line 210
        count ++;
        }
#line 212
        if ((int )p->priv_flags & 128) {
          {
#line 213
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pes_priv_data),
                 (size_t )16);
#line 214
          count += 16;
          }
        }
#line 216
        if ((int )p->priv_flags & 64) {
          {
#line 217
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->pack_field_length),
                 (size_t )1);
#line 219
          count ++;
#line 220
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->pack_header,
                 (size_t )p->pack_field_length);
#line 222
          count += (int )p->pack_field_length;
          }
        }
#line 226
        if ((int )p->priv_flags & 32) {
          {
#line 227
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->pck_sqnc_cntr),
                 (size_t )1);
#line 228
          count ++;
#line 229
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->org_stuff_length),
                 (size_t )1);
#line 231
          count ++;
          }
        }
#line 234
        if ((int )p->priv_flags & 16) {
          {
#line 235
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->p_std),
                 (size_t )2);
#line 236
          count += 2;
          }
        }
#line 238
        if ((int )p->priv_flags & 1) {
          {
#line 239
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->pes_ext_lngth),
                 (size_t )1);
#line 240
          count ++;
#line 241
          memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->pes_ext,
                 (size_t )p->pes_ext_lngth);
#line 243
          count += (int )p->pes_ext_lngth;
          }
        }
      }
#line 246
      dummy = (u8 )255;
#line 247
      i = 0;
      {
#line 247
      while (1) {
        while_continue: /* CIL Label */ ;
#line 247
        if (! (i < (int )p->stuffing)) {
#line 247
          goto while_break;
        }
        {
#line 248
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& dummy),
               (size_t )1);
#line 249
        count ++;
#line 247
        i ++;
        }
      }
      while_break: /* CIL Label */ ;
      }
    } else {
#line 252
      if (p->mpeg1_pad) {
        {
#line 253
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->mpeg1_headr,
               (size_t )p->mpeg1_pad);
#line 254
        count += p->mpeg1_pad;
        }
      }
#line 256
      if (((int )p->flags2 & 192) == 128) {
        {
#line 257
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pts),
               (size_t )5);
#line 258
        count += 5;
        }
      } else
#line 260
      if (((int )p->flags2 & 192) == 192) {
        {
#line 262
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pts),
               (size_t )5);
#line 263
        count += 5;
#line 264
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->dts),
               (size_t )5);
#line 265
        count += 5;
        }
      }
    }
    {
#line 268
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->pes_pckt_data,
           (size_t )p->length);
#line 269
    count = (int )((uint32_t )count + p->length);
    }
  }
#line 272
  return (count);
}
}
#line 276 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_pes(int fd___0 , pes_packet *p ) 
{ 
  long length ;
  u8 *buf___5 ;
  int l ;
  void *tmp ;
  int tmp___0 ;

  {
  {
#line 279
  l = (int )(p->length + (uint32_t )p->pes_hlength);
#line 281
  tmp = malloc((size_t )l);
#line 281
  buf___5 = (u8 *)tmp;
#line 282
  tmp___0 = cwrite_pes(buf___5, p, (long )l);
#line 282
  length = (long )tmp___0;
#line 283
  write(fd___0, (void const   *)buf___5, (size_t )length);
#line 284
  free((void *)buf___5);
  }
#line 285
  return;
}
}
#line 287 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
static unsigned int find_length(int f ) 
{ 
  uint64_t p ;
  uint64_t start___0 ;
  uint64_t q ;
  int found ;
  u8 sync4[4] ;
  int neof ;
  __off64_t tmp ;
  __off64_t tmp___0 ;
  ssize_t tmp___1 ;
  __off64_t tmp___2 ;
  __off64_t tmp___3 ;

  {
  {
#line 288
  p = (uint64_t )0;
#line 289
  start___0 = (uint64_t )0;
#line 290
  q = (uint64_t )0;
#line 291
  found = 0;
#line 293
  neof = 1;
#line 295
  tmp = lseek(f, (__off64_t )0, 1);
#line 295
  start___0 = (uint64_t )tmp;
#line 296
  start___0 -= 2UL;
#line 297
  lseek(f, (__off64_t )start___0, 0);
  }
  {
#line 298
  while (1) {
    while_continue: /* CIL Label */ ;
#line 298
    if (neof > 0) {
#line 298
      if (! (! found)) {
#line 298
        goto while_break;
      }
    } else {
#line 298
      goto while_break;
    }
    {
#line 299
    tmp___0 = lseek(f, (__off64_t )0, 1);
#line 299
    p = (uint64_t )tmp___0;
#line 300
    tmp___1 = read(f, (void *)(& sync4), (size_t )4);
#line 300
    neof = (int )tmp___1;
    }
#line 301
    if ((int )sync4[0] == 0) {
#line 301
      if ((int )sync4[1] == 0) {
#line 301
        if ((int )sync4[2] == 1) {
          {
#line 314
          if ((int )sync4[3] == 224) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 225) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 226) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 227) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 228) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 229) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 230) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 231) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 232) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 233) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 234) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 235) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 236) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 237) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 238) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 239) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 192) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 193) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 194) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 195) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 196) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 197) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 198) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 199) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 200) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 201) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 202) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 203) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 204) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 205) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 206) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 207) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 208) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 209) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 210) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 211) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 212) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 213) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 214) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 215) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 216) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 217) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 218) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 219) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 220) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 221) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 222) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 223) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 189) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 243) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 242) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 190) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 241) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 240) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 255) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 191) {
#line 314
            goto case_224;
          }
#line 314
          if ((int )sync4[3] == 188) {
#line 314
            goto case_224;
          }
#line 317
          goto switch_default;
          case_224: /* CIL Label */ 
          case_225: /* CIL Label */ 
          case_226: /* CIL Label */ 
          case_227: /* CIL Label */ 
          case_228: /* CIL Label */ 
          case_229: /* CIL Label */ 
          case_230: /* CIL Label */ 
          case_231: /* CIL Label */ 
          case_232: /* CIL Label */ 
          case_233: /* CIL Label */ 
          case_234: /* CIL Label */ 
          case_235: /* CIL Label */ 
          case_236: /* CIL Label */ 
          case_237: /* CIL Label */ 
          case_238: /* CIL Label */ 
          case_239: /* CIL Label */ 
          case_192: /* CIL Label */ 
          case_193: /* CIL Label */ 
          case_194: /* CIL Label */ 
          case_195: /* CIL Label */ 
          case_196: /* CIL Label */ 
          case_197: /* CIL Label */ 
          case_198: /* CIL Label */ 
          case_199: /* CIL Label */ 
          case_200: /* CIL Label */ 
          case_201: /* CIL Label */ 
          case_202: /* CIL Label */ 
          case_203: /* CIL Label */ 
          case_204: /* CIL Label */ 
          case_205: /* CIL Label */ 
          case_206: /* CIL Label */ 
          case_207: /* CIL Label */ 
          case_208: /* CIL Label */ 
          case_209: /* CIL Label */ 
          case_210: /* CIL Label */ 
          case_211: /* CIL Label */ 
          case_212: /* CIL Label */ 
          case_213: /* CIL Label */ 
          case_214: /* CIL Label */ 
          case_215: /* CIL Label */ 
          case_216: /* CIL Label */ 
          case_217: /* CIL Label */ 
          case_218: /* CIL Label */ 
          case_219: /* CIL Label */ 
          case_220: /* CIL Label */ 
          case_221: /* CIL Label */ 
          case_222: /* CIL Label */ 
          case_223: /* CIL Label */ 
          case_189: /* CIL Label */ 
          case_243: /* CIL Label */ 
          case_242: /* CIL Label */ 
          case_190: /* CIL Label */ 
          case_241: /* CIL Label */ 
          case_240: /* CIL Label */ 
          case_255: /* CIL Label */ 
          case_191: /* CIL Label */ 
          case_188: /* CIL Label */ 
#line 315
          found = 1;
#line 316
          goto switch_break;
          switch_default: /* CIL Label */ 
          {
#line 318
          tmp___2 = lseek(f, (__off64_t )0, 1);
#line 318
          q = (uint64_t )tmp___2;
          }
#line 319
          goto switch_break;
          switch_break: /* CIL Label */ ;
          }
        }
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 323
  tmp___3 = lseek(f, (__off64_t )0, 1);
#line 323
  q = (uint64_t )tmp___3;
#line 324
  lseek(f, (__off64_t )(start___0 + 2UL), 0);
  }
#line 325
  if (found) {
#line 325
    return (((unsigned int )(q - start___0) - 4U) - 2U);
  } else {
#line 326
    return ((unsigned int )((q - start___0) - 2UL));
  }
}
}
#line 331 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void cread_pes(char *buf___5 , pes_packet *p ) 
{ 
  u8 count ;
  u8 dummy ;
  u8 check ;
  int i ;
  uint64_t po ;
  int c ;
  void *tmp ;
  void *tmp___0 ;
  void *tmp___1 ;
  void *tmp___2 ;

  {
#line 335
  po = (uint64_t )0;
#line 336
  c = 0;
  {
#line 344
  if ((int )p->stream_id == 241) {
#line 344
    goto case_241;
  }
#line 344
  if ((int )p->stream_id == 240) {
#line 344
    goto case_241;
  }
#line 344
  if ((int )p->stream_id == 255) {
#line 344
    goto case_241;
  }
#line 344
  if ((int )p->stream_id == 191) {
#line 344
    goto case_241;
  }
#line 344
  if ((int )p->stream_id == 188) {
#line 344
    goto case_241;
  }
#line 348
  if ((int )p->stream_id == 190) {
#line 348
    goto case_190;
  }
#line 357
  if ((int )p->stream_id == 224) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 225) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 226) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 227) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 228) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 229) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 230) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 231) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 232) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 233) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 234) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 235) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 236) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 237) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 238) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 239) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 192) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 193) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 194) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 195) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 196) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 197) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 198) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 199) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 200) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 201) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 202) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 203) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 204) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 205) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 206) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 207) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 208) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 209) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 210) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 211) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 212) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 213) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 214) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 215) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 216) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 217) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 218) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 219) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 220) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 221) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 222) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 223) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 189) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 243) {
#line 357
    goto case_224;
  }
#line 357
  if ((int )p->stream_id == 242) {
#line 357
    goto case_224;
  }
#line 359
  goto switch_default;
  case_241: /* CIL Label */ 
  case_240: /* CIL Label */ 
  case_255: /* CIL Label */ 
  case_191: /* CIL Label */ 
  case_188: /* CIL Label */ 
  {
#line 345
  memcpy((void */* __restrict  */)p->pes_pckt_data, (void const   */* __restrict  */)(buf___5 + c),
         (size_t )p->length);
  }
#line 346
  return;
#line 347
  goto switch_break;
  case_190: /* CIL Label */ 
  {
#line 349
  p->padding = (int )p->length;
#line 350
  memcpy((void */* __restrict  */)p->pes_pckt_data, (void const   */* __restrict  */)(buf___5 + c),
         (size_t )p->length);
  }
#line 351
  return;
#line 352
  goto switch_break;
  case_224: /* CIL Label */ 
  case_225: /* CIL Label */ 
  case_226: /* CIL Label */ 
  case_227: /* CIL Label */ 
  case_228: /* CIL Label */ 
  case_229: /* CIL Label */ 
  case_230: /* CIL Label */ 
  case_231: /* CIL Label */ 
  case_232: /* CIL Label */ 
  case_233: /* CIL Label */ 
  case_234: /* CIL Label */ 
  case_235: /* CIL Label */ 
  case_236: /* CIL Label */ 
  case_237: /* CIL Label */ 
  case_238: /* CIL Label */ 
  case_239: /* CIL Label */ 
  case_192: /* CIL Label */ 
  case_193: /* CIL Label */ 
  case_194: /* CIL Label */ 
  case_195: /* CIL Label */ 
  case_196: /* CIL Label */ 
  case_197: /* CIL Label */ 
  case_198: /* CIL Label */ 
  case_199: /* CIL Label */ 
  case_200: /* CIL Label */ 
  case_201: /* CIL Label */ 
  case_202: /* CIL Label */ 
  case_203: /* CIL Label */ 
  case_204: /* CIL Label */ 
  case_205: /* CIL Label */ 
  case_206: /* CIL Label */ 
  case_207: /* CIL Label */ 
  case_208: /* CIL Label */ 
  case_209: /* CIL Label */ 
  case_210: /* CIL Label */ 
  case_211: /* CIL Label */ 
  case_212: /* CIL Label */ 
  case_213: /* CIL Label */ 
  case_214: /* CIL Label */ 
  case_215: /* CIL Label */ 
  case_216: /* CIL Label */ 
  case_217: /* CIL Label */ 
  case_218: /* CIL Label */ 
  case_219: /* CIL Label */ 
  case_220: /* CIL Label */ 
  case_221: /* CIL Label */ 
  case_222: /* CIL Label */ 
  case_223: /* CIL Label */ 
  case_189: /* CIL Label */ 
  case_243: /* CIL Label */ 
  case_242: /* CIL Label */ 
#line 358
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 360
  return;
#line 361
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 364
  po = (uint64_t )c;
#line 365
  memcpy((void */* __restrict  */)(& p->flags1), (void const   */* __restrict  */)(buf___5 + c),
         (size_t )1);
#line 366
  c ++;
  }
#line 367
  if (((int )p->flags1 & 192) == 128) {
#line 367
    p->mpeg = 2;
  } else {
#line 368
    p->mpeg = 1;
  }
#line 370
  if (p->mpeg == 2) {
    {
#line 371
    memcpy((void */* __restrict  */)(& p->flags2), (void const   */* __restrict  */)(buf___5 + c),
           (size_t )1);
#line 372
    c ++;
#line 373
    memcpy((void */* __restrict  */)(& p->pes_hlength), (void const   */* __restrict  */)(buf___5 + c),
           (size_t )1);
#line 374
    c ++;
#line 376
    p->length -= (uint32_t )((int )p->pes_hlength + 3);
#line 377
    count = p->pes_hlength;
    }
#line 379
    if (((int )p->flags2 & 192) == 128) {
      {
#line 380
      memcpy((void */* __restrict  */)(p->pts), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )5);
#line 381
      c += 5;
#line 382
      count = (u8 )((int )count - 5);
      }
    } else
#line 384
    if (((int )p->flags2 & 192) == 192) {
      {
#line 385
      memcpy((void */* __restrict  */)(p->pts), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )5);
#line 386
      c += 5;
#line 387
      memcpy((void */* __restrict  */)(p->dts), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )5);
#line 388
      c += 5;
#line 389
      count = (u8 )((int )count - 10);
      }
    }
#line 392
    if ((int )p->flags2 & 32) {
      {
#line 393
      memcpy((void */* __restrict  */)(p->escr), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )6);
#line 394
      c += 6;
#line 395
      count = (u8 )((int )count - 6);
      }
    }
#line 398
    if ((int )p->flags2 & 16) {
      {
#line 399
      memcpy((void */* __restrict  */)(p->es_rate), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )3);
#line 400
      c += 6;
#line 401
      count = (u8 )((int )count - 6);
      }
    }
#line 404
    if ((int )p->flags2 & 8) {
      {
#line 405
      memcpy((void */* __restrict  */)(& p->trick), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 406
      c += 6;
#line 407
      count = (u8 )((int )count - 1);
      }
    }
#line 410
    if ((int )p->flags2 & 4) {
      {
#line 411
      memcpy((void */* __restrict  */)(& p->add_cpy), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 412
      c ++;
#line 413
      count = (u8 )((int )count - 1);
      }
    }
#line 416
    if ((int )p->flags2 & 2) {
      {
#line 417
      memcpy((void */* __restrict  */)(p->prev_pes_crc), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )2);
#line 418
      c += 2;
#line 419
      count = (u8 )((int )count - 2);
      }
    }
#line 422
    if ((int )p->flags2 & 1) {
      {
#line 423
      memcpy((void */* __restrict  */)(& p->priv_flags), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 424
      c ++;
#line 425
      count = (u8 )((int )count - 1);
      }
#line 427
      if ((int )p->priv_flags & 128) {
        {
#line 428
        memcpy((void */* __restrict  */)(p->pes_priv_data), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )16);
#line 429
        c += 16;
#line 430
        count = (u8 )((int )count - 16);
        }
      }
#line 433
      if ((int )p->priv_flags & 64) {
        {
#line 434
        memcpy((void */* __restrict  */)(& p->pack_field_length), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )1);
#line 435
        c ++;
#line 436
        tmp = malloc((size_t )p->pack_field_length);
#line 436
        p->pack_header = (u8 *)tmp;
#line 438
        memcpy((void */* __restrict  */)p->pack_header, (void const   */* __restrict  */)(buf___5 + c),
               (size_t )p->pack_field_length);
#line 440
        c += (int )p->pack_field_length;
#line 441
        count = (u8 )((int )count - (1 + (int )p->pack_field_length));
        }
      }
#line 444
      if ((int )p->priv_flags & 32) {
        {
#line 445
        memcpy((void */* __restrict  */)(& p->pck_sqnc_cntr), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )1);
#line 446
        c ++;
#line 447
        memcpy((void */* __restrict  */)(& p->org_stuff_length), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )1);
#line 448
        c ++;
#line 449
        count = (u8 )((int )count - 2);
        }
      }
#line 452
      if ((int )p->priv_flags & 16) {
        {
#line 453
        memcpy((void */* __restrict  */)(p->p_std), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )2);
#line 454
        c += 2;
#line 455
        count = (u8 )((int )count - 2);
        }
      }
#line 458
      if ((int )p->priv_flags & 1) {
        {
#line 459
        memcpy((void */* __restrict  */)(& p->pes_ext_lngth), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )1);
#line 460
        c ++;
#line 461
        tmp___0 = malloc((size_t )p->pes_ext_lngth);
#line 461
        p->pes_ext = (u8 *)tmp___0;
#line 463
        memcpy((void */* __restrict  */)p->pes_ext, (void const   */* __restrict  */)(buf___5 + c),
               (size_t )p->pes_ext_lngth);
#line 465
        c += (int )p->pes_ext_lngth;
#line 466
        count = (u8 )((int )count - (1 + (int )p->pes_ext_lngth));
        }
      }
    }
#line 469
    p->stuffing = count;
#line 470
    i = 0;
    {
#line 470
    while (1) {
      while_continue: /* CIL Label */ ;
#line 470
      if (! (i < (int )count)) {
#line 470
        goto while_break;
      }
      {
#line 471
      memcpy((void */* __restrict  */)(& dummy), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 472
      c ++;
#line 470
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 475
    p->mpeg1_pad = 1;
#line 476
    check = p->flags1;
    {
#line 477
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 477
      if (! ((int )check == 255)) {
#line 477
        goto while_break___0;
      }
      {
#line 478
      memcpy((void */* __restrict  */)(& check), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 479
      c ++;
#line 480
      (p->mpeg1_pad) ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 483
    if (((int )check & 192) == 64) {
      {
#line 484
      memcpy((void */* __restrict  */)(& check), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 485
      c ++;
#line 486
      (p->mpeg1_pad) ++;
#line 487
      memcpy((void */* __restrict  */)(& check), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 488
      c ++;
#line 489
      (p->mpeg1_pad) ++;
      }
    }
#line 491
    p->flags2 = (u8 )0;
#line 492
    p->length -= (uint32_t )p->mpeg1_pad;
#line 494
    c = (int )po;
#line 495
    if ((int )check & 48) {
#line 496
      (p->length) ++;
#line 497
      (p->mpeg1_pad) --;
#line 499
      if ((int )check == (int )p->flags1) {
#line 500
        p->pes_hlength = (u8 )0;
      } else {
        {
#line 502
        tmp___1 = malloc((size_t )p->mpeg1_pad);
#line 502
        p->mpeg1_headr = (u8 *)tmp___1;
#line 504
        p->pes_hlength = (u8 )p->mpeg1_pad;
#line 505
        memcpy((void */* __restrict  */)p->mpeg1_headr, (void const   */* __restrict  */)(buf___5 + c),
               (size_t )p->mpeg1_pad);
#line 507
        c += p->mpeg1_pad;
        }
      }
#line 510
      p->flags2 = (u8 )(((int )check & 240) << 2);
#line 511
      if (((int )p->flags2 & 192) == 128) {
        {
#line 512
        memcpy((void */* __restrict  */)(p->pts), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )5);
#line 513
        c += 5;
#line 514
        p->length -= 5U;
#line 515
        p->pes_hlength = (u8 )((int )p->pes_hlength + 5);
        }
      } else
#line 517
      if (((int )p->flags2 & 192) == 192) {
        {
#line 519
        memcpy((void */* __restrict  */)(p->pts), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )5);
#line 520
        c += 5;
#line 521
        memcpy((void */* __restrict  */)(p->dts), (void const   */* __restrict  */)(buf___5 + c),
               (size_t )5);
#line 522
        c += 5;
#line 523
        p->length -= 10U;
#line 524
        p->pes_hlength = (u8 )((int )p->pes_hlength + 10);
        }
      }
    } else {
      {
#line 527
      tmp___2 = malloc((size_t )p->mpeg1_pad);
#line 527
      p->mpeg1_headr = (u8 *)tmp___2;
#line 528
      p->pes_hlength = (u8 )p->mpeg1_pad;
#line 529
      memcpy((void */* __restrict  */)p->mpeg1_headr, (void const   */* __restrict  */)(buf___5 + c),
             (size_t )p->mpeg1_pad);
#line 531
      c += p->mpeg1_pad;
      }
    }
  }
  {
#line 534
  memcpy((void */* __restrict  */)p->pes_pckt_data, (void const   */* __restrict  */)(buf___5 + c),
         (size_t )p->length);
  }
#line 535
  return;
}
}
#line 538 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int read_pes(int f , pes_packet *p ) 
{ 
  u8 sync4[4] ;
  int found ;
  uint64_t po ;
  int neof ;
  u8 *buf___5 ;
  __off64_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  __off64_t tmp___2 ;
  __off64_t tmp___3 ;
  void *tmp___4 ;
  ssize_t tmp___5 ;

  {
#line 541
  found = 0;
#line 542
  po = (uint64_t )0;
#line 543
  neof = 1;
  {
#line 546
  while (1) {
    while_continue: /* CIL Label */ ;
#line 546
    if (neof > 0) {
#line 546
      if (! (! found)) {
#line 546
        goto while_break;
      }
    } else {
#line 546
      goto while_break;
    }
    {
#line 547
    tmp = lseek(f, (__off64_t )0, 1);
#line 547
    po = (uint64_t )tmp;
    }
#line 548
    if (po < 0UL) {
#line 548
      return (-1);
    }
    {
#line 549
    tmp___0 = read(f, (void *)(& sync4), (size_t )4);
#line 549
    neof = (int )tmp___0;
    }
#line 549
    if (neof < 4) {
#line 549
      return (-1);
    }
#line 550
    if ((int )sync4[0] == 0) {
#line 550
      if ((int )sync4[1] == 0) {
#line 550
        if ((int )sync4[2] == 1) {
#line 551
          p->stream_id = sync4[3];
          {
#line 564
          if ((int )sync4[3] == 224) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 225) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 226) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 227) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 228) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 229) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 230) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 231) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 232) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 233) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 234) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 235) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 236) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 237) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 238) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 239) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 192) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 193) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 194) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 195) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 196) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 197) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 198) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 199) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 200) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 201) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 202) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 203) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 204) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 205) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 206) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 207) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 208) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 209) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 210) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 211) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 212) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 213) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 214) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 215) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 216) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 217) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 218) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 219) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 220) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 221) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 222) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 223) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 189) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 243) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 242) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 190) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 241) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 240) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 255) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 191) {
#line 564
            goto case_224;
          }
#line 564
          if ((int )sync4[3] == 188) {
#line 564
            goto case_224;
          }
#line 575
          goto switch_default;
          case_224: /* CIL Label */ 
          case_225: /* CIL Label */ 
          case_226: /* CIL Label */ 
          case_227: /* CIL Label */ 
          case_228: /* CIL Label */ 
          case_229: /* CIL Label */ 
          case_230: /* CIL Label */ 
          case_231: /* CIL Label */ 
          case_232: /* CIL Label */ 
          case_233: /* CIL Label */ 
          case_234: /* CIL Label */ 
          case_235: /* CIL Label */ 
          case_236: /* CIL Label */ 
          case_237: /* CIL Label */ 
          case_238: /* CIL Label */ 
          case_239: /* CIL Label */ 
          case_192: /* CIL Label */ 
          case_193: /* CIL Label */ 
          case_194: /* CIL Label */ 
          case_195: /* CIL Label */ 
          case_196: /* CIL Label */ 
          case_197: /* CIL Label */ 
          case_198: /* CIL Label */ 
          case_199: /* CIL Label */ 
          case_200: /* CIL Label */ 
          case_201: /* CIL Label */ 
          case_202: /* CIL Label */ 
          case_203: /* CIL Label */ 
          case_204: /* CIL Label */ 
          case_205: /* CIL Label */ 
          case_206: /* CIL Label */ 
          case_207: /* CIL Label */ 
          case_208: /* CIL Label */ 
          case_209: /* CIL Label */ 
          case_210: /* CIL Label */ 
          case_211: /* CIL Label */ 
          case_212: /* CIL Label */ 
          case_213: /* CIL Label */ 
          case_214: /* CIL Label */ 
          case_215: /* CIL Label */ 
          case_216: /* CIL Label */ 
          case_217: /* CIL Label */ 
          case_218: /* CIL Label */ 
          case_219: /* CIL Label */ 
          case_220: /* CIL Label */ 
          case_221: /* CIL Label */ 
          case_222: /* CIL Label */ 
          case_223: /* CIL Label */ 
          case_189: /* CIL Label */ 
          case_243: /* CIL Label */ 
          case_242: /* CIL Label */ 
          case_190: /* CIL Label */ 
          case_241: /* CIL Label */ 
          case_240: /* CIL Label */ 
          case_255: /* CIL Label */ 
          case_191: /* CIL Label */ 
          case_188: /* CIL Label */ 
          {
#line 565
          tmp___1 = read(f, (void *)(p->llength), (size_t )2);
#line 565
          neof = (int )tmp___1;
          }
#line 565
          if (neof < 2) {
#line 566
            return (-1);
          }
          {
#line 567
          setl_pes(p);
          }
#line 568
          if (! p->length) {
            {
#line 569
            p->length = find_length(f);
#line 570
            nl_pes(p);
            }
          }
#line 572
          found = 1;
#line 573
          goto switch_break;
          switch_default: /* CIL Label */ 
          {
#line 576
          tmp___2 = lseek(f, (__off64_t )(po + 1UL), 0);
          }
#line 576
          if ((uint64_t )tmp___2 < po + 1UL) {
#line 576
            return (-1);
          }
#line 577
          goto switch_break;
          switch_break: /* CIL Label */ ;
          }
        } else {
#line 550
          goto _L___0;
        }
      } else {
#line 550
        goto _L___0;
      }
    } else {
      _L___0: /* CIL Label */ 
      {
#line 579
      tmp___3 = lseek(f, (__off64_t )(po + 1UL), 0);
      }
#line 579
      if ((uint64_t )tmp___3 < po + 1UL) {
#line 579
        return (-1);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 582
  if (! found) {
#line 582
    return (0);
  } else
#line 582
  if (! p->length) {
#line 582
    return (0);
  }
#line 584
  if (p->length > 0U) {
    {
#line 585
    tmp___4 = malloc((size_t )p->length);
#line 585
    buf___5 = (u8 *)tmp___4;
#line 586
    tmp___5 = read(f, (void *)buf___5, (size_t )p->length);
#line 586
    neof = (int )tmp___5;
    }
#line 586
    if ((uint32_t )neof < p->length) {
#line 586
      return (-1);
    }
    {
#line 587
    cread_pes((char *)buf___5, p);
#line 588
    free((void *)buf___5);
    }
  } else {
#line 589
    return (0);
  }
#line 591
  return (neof);
}
}
#line 600 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void init_ts(ts_packet *p ) 
{ 


  {
#line 601
  p->pid[0] = (u8 )0;
#line 602
  p->pid[1] = (u8 )0;
#line 603
  p->flags = (u8 )0;
#line 604
  p->count = (u8 )0;
#line 605
  p->adapt_length = (u8 )0;
#line 606
  p->adapt_flags = (u8 )0;
#line 607
  p->splice_count = (u8 )0;
#line 608
  p->priv_dat_len = (u8 )0;
#line 609
  p->priv_dat = (u8 *)((void *)0);
#line 610
  p->adapt_ext_len = (u8 )0;
#line 611
  p->adapt_eflags = (u8 )0;
#line 612
  p->rest = 0;
#line 613
  p->stuffing = (u8 )0;
#line 614
  return;
}
}
#line 616 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void kill_ts(ts_packet *p ) 
{ 


  {
#line 617
  if (p->priv_dat) {
    {
#line 618
    free((void *)p->priv_dat);
    }
  }
  {
#line 619
  init_ts(p);
  }
#line 620
  return;
}
}
#line 624 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
unsigned short pid_ts(ts_packet *p ) 
{ 
  uint16_t tmp ;

  {
  {
#line 626
  tmp = get_pid(p->pid);
  }
#line 626
  return (tmp);
}
}
#line 629 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int cwrite_ts(u8 *buf___5 , ts_packet *p , long length ) 
{ 
  long count ;
  long i ;
  u8 sync___0 ;
  u8 dummy ;

  {
  {
#line 633
  sync___0 = (u8 )71;
#line 634
  memcpy((void */* __restrict  */)buf___5, (void const   */* __restrict  */)(& sync___0),
         (size_t )1);
#line 635
  count = 1L;
#line 636
  memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pid),
         (size_t )2);
#line 637
  count += 2L;
#line 638
  memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->flags),
         (size_t )1);
#line 639
  count ++;
  }
#line 642
  if (! ((int )p->flags & 32)) {
#line 642
    if ((int )p->flags & 16) {
      {
#line 643
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->data),
             (size_t )184);
#line 644
      count += 184L;
      }
    } else {
#line 642
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    {
#line 646
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->adapt_length),
           (size_t )1);
#line 647
    count ++;
#line 648
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->adapt_flags),
           (size_t )1);
#line 649
    count ++;
    }
#line 651
    if ((int )p->adapt_flags & 16) {
      {
#line 652
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->pcr),
             (size_t )6);
#line 653
      count += 6L;
      }
    }
#line 655
    if ((int )p->adapt_flags & 8) {
      {
#line 656
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->opcr),
             (size_t )6);
#line 657
      count += 6L;
      }
    }
#line 659
    if ((int )p->adapt_flags & 4) {
      {
#line 660
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->splice_count),
             (size_t )1);
#line 661
      count ++;
      }
    }
#line 663
    if ((int )p->adapt_flags & 2) {
      {
#line 664
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->priv_dat_len),
             (size_t )1);
#line 665
      count ++;
#line 666
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->priv_dat,
             (size_t )p->priv_dat_len);
#line 667
      count += (long )p->priv_dat_len;
      }
    }
#line 670
    if ((int )p->adapt_flags & 1) {
      {
#line 671
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->adapt_ext_len),
             (size_t )1);
#line 672
      count ++;
#line 673
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->adapt_eflags),
             (size_t )1);
#line 674
      count ++;
      }
#line 676
      if ((int )p->adapt_eflags & 128) {
        {
#line 677
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->ltw),
               (size_t )2);
#line 678
        count += 2L;
        }
      }
#line 680
      if ((int )p->adapt_eflags & 64) {
        {
#line 681
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->piece_rate),
               (size_t )3);
#line 682
        count += 3L;
        }
      }
#line 684
      if ((int )p->adapt_eflags & 32) {
        {
#line 685
        memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->dts),
               (size_t )5);
#line 686
        count += 5L;
        }
      }
    }
#line 689
    dummy = (u8 )255;
#line 690
    i = 0L;
    {
#line 690
    while (1) {
      while_continue: /* CIL Label */ ;
#line 690
      if (! (i < (long )p->stuffing)) {
#line 690
        goto while_break;
      }
      {
#line 691
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& dummy),
             (size_t )1);
#line 692
      count ++;
#line 690
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
#line 694
    if ((int )p->flags & 16) {
      {
#line 695
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->data),
             (size_t )p->rest);
#line 696
      count += (long )p->rest;
      }
    }
  }
#line 701
  return ((int )count);
}
}
#line 704 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_ts(int fd___0 , ts_packet *p ) 
{ 
  long length ;
  u8 buf___5[188] ;
  int tmp ;

  {
  {
#line 708
  tmp = cwrite_ts(buf___5, p, 188L);
#line 708
  length = (long )tmp;
#line 709
  write(fd___0, (void const   *)(buf___5), (size_t )length);
  }
#line 710
  return;
}
}
#line 712 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int read_ts(int f , ts_packet *p ) 
{ 
  u8 sync___0 ;
  int found ;
  uint64_t po ;
  uint64_t q ;
  int neof ;
  ssize_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  ssize_t tmp___2 ;
  ssize_t tmp___3 ;
  __off64_t tmp___4 ;
  ssize_t tmp___5 ;
  ssize_t tmp___6 ;
  ssize_t tmp___7 ;
  ssize_t tmp___8 ;
  ssize_t tmp___9 ;
  void *tmp___10 ;
  ssize_t tmp___11 ;
  ssize_t tmp___12 ;
  ssize_t tmp___13 ;
  ssize_t tmp___14 ;
  ssize_t tmp___15 ;
  ssize_t tmp___16 ;
  __off64_t tmp___17 ;
  ssize_t tmp___18 ;

  {
#line 714
  found = 0;
#line 716
  neof = 1;
#line 718
  sync___0 = (u8 )0;
  {
#line 719
  while (1) {
    while_continue: /* CIL Label */ ;
#line 719
    if (neof > 0) {
#line 719
      if (! (! found)) {
#line 719
        goto while_break;
      }
    } else {
#line 719
      goto while_break;
    }
    {
#line 720
    tmp = read(f, (void *)(& sync___0), (size_t )1);
#line 720
    neof = (int )tmp;
    }
#line 721
    if ((int )sync___0 == 71) {
#line 722
      found = 1;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 724
  tmp___0 = read(f, (void *)(p->pid), (size_t )2);
#line 724
  neof = (int )tmp___0;
#line 725
  tmp___1 = read(f, (void *)(& p->flags), (size_t )1);
#line 725
  neof = (int )tmp___1;
#line 726
  p->count = (u8 )((int )p->flags & 15);
  }
#line 728
  if (! ((int )p->flags & 32)) {
#line 728
    if ((int )p->flags & 16) {
      {
#line 730
      tmp___2 = read(f, (void *)(p->data), (size_t )184);
#line 730
      neof = (int )tmp___2;
#line 731
      p->rest = 184;
      }
#line 732
      return (neof);
    }
  }
#line 735
  if ((int )p->flags & 32) {
    {
#line 737
    tmp___3 = read(f, (void *)(& p->adapt_length), (size_t )1);
#line 737
    neof = (int )tmp___3;
#line 738
    tmp___4 = lseek(f, (__off64_t )0, 1);
#line 738
    po = (uint64_t )tmp___4;
#line 739
    tmp___5 = read(f, (void *)(& p->adapt_flags), (size_t )1);
#line 739
    neof = (int )tmp___5;
    }
#line 741
    if ((int )p->adapt_flags & 16) {
      {
#line 742
      tmp___6 = read(f, (void *)(p->pcr), (size_t )6);
#line 742
      neof = (int )tmp___6;
      }
    }
#line 744
    if ((int )p->adapt_flags & 8) {
      {
#line 745
      tmp___7 = read(f, (void *)(p->opcr), (size_t )6);
#line 745
      neof = (int )tmp___7;
      }
    }
#line 747
    if ((int )p->adapt_flags & 4) {
      {
#line 748
      tmp___8 = read(f, (void *)(& p->splice_count), (size_t )1);
#line 748
      neof = (int )tmp___8;
      }
    }
#line 750
    if ((int )p->adapt_flags & 2) {
      {
#line 751
      tmp___9 = read(f, (void *)(& p->priv_dat_len), (size_t )1);
#line 751
      neof = (int )tmp___9;
#line 752
      tmp___10 = malloc((size_t )p->priv_dat_len);
#line 752
      p->priv_dat = (u8 *)tmp___10;
#line 753
      tmp___11 = read(f, (void *)p->priv_dat, (size_t )p->priv_dat_len);
#line 753
      neof = (int )tmp___11;
      }
    }
#line 756
    if ((int )p->adapt_flags & 1) {
      {
#line 757
      tmp___12 = read(f, (void *)(& p->adapt_ext_len), (size_t )1);
#line 757
      neof = (int )tmp___12;
#line 758
      tmp___13 = read(f, (void *)(& p->adapt_eflags), (size_t )1);
#line 758
      neof = (int )tmp___13;
      }
#line 759
      if ((int )p->adapt_eflags & 128) {
        {
#line 760
        tmp___14 = read(f, (void *)(p->ltw), (size_t )2);
#line 760
        neof = (int )tmp___14;
        }
      }
#line 762
      if ((int )p->adapt_eflags & 64) {
        {
#line 763
        tmp___15 = read(f, (void *)(p->piece_rate), (size_t )3);
#line 763
        neof = (int )tmp___15;
        }
      }
#line 765
      if ((int )p->adapt_eflags & 32) {
        {
#line 766
        tmp___16 = read(f, (void *)(p->dts), (size_t )5);
#line 766
        neof = (int )tmp___16;
        }
      }
    }
    {
#line 768
    tmp___17 = lseek(f, (__off64_t )0, 1);
#line 768
    q = (uint64_t )tmp___17;
#line 769
    p->stuffing = (u8 )((uint64_t )p->adapt_length - (q - po));
#line 770
    p->rest = 183 - (int )p->adapt_length;
#line 771
    lseek(f, (__off64_t )(q + (uint64_t )p->stuffing), 0);
    }
#line 772
    if ((int )p->flags & 16) {
      {
#line 773
      tmp___18 = read(f, (void *)(p->data), (size_t )p->rest);
#line 773
      neof = (int )tmp___18;
      }
    } else {
      {
#line 775
      lseek(f, (__off64_t )(q + (uint64_t )p->rest), 0);
      }
    }
  }
#line 777
  return (neof);
}
}
#line 780 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void cread_ts(char *buf___5 , ts_packet *p , long length ) 
{ 
  u8 sync___0 ;
  int found ;
  uint64_t po ;
  uint64_t q ;
  long count ;
  void *tmp ;

  {
#line 782
  found = 0;
#line 784
  count = 0L;
#line 786
  sync___0 = (u8 )0;
  {
#line 787
  while (1) {
    while_continue: /* CIL Label */ ;
#line 787
    if (count < length) {
#line 787
      if (! (! found)) {
#line 787
        goto while_break;
      }
    } else {
#line 787
      goto while_break;
    }
#line 788
    sync___0 = (u8 )*(buf___5 + count);
#line 789
    count ++;
#line 790
    if ((int )sync___0 == 71) {
#line 791
      found = 1;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 793
  memcpy((void */* __restrict  */)(p->pid), (void const   */* __restrict  */)(buf___5 + count),
         (size_t )2);
#line 794
  count += 2L;
#line 795
  p->flags = (u8 )*(buf___5 + count);
#line 796
  count ++;
#line 797
  p->count = (u8 )((int )p->flags & 15);
  }
#line 799
  if (! ((int )p->flags & 32)) {
#line 799
    if ((int )p->flags & 16) {
      {
#line 801
      memcpy((void */* __restrict  */)(p->data), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )184);
#line 802
      p->rest = 184;
      }
#line 803
      return;
    }
  }
#line 806
  if ((int )p->flags & 32) {
    {
#line 808
    p->adapt_length = (u8 )*(buf___5 + count);
#line 809
    count ++;
#line 810
    po = (uint64_t )count;
#line 811
    memcpy((void */* __restrict  */)(& p->adapt_flags), (void const   */* __restrict  */)(buf___5 + count),
           (size_t )1);
#line 812
    count ++;
    }
#line 814
    if ((int )p->adapt_flags & 16) {
      {
#line 815
      memcpy((void */* __restrict  */)(p->pcr), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )6);
#line 816
      count += 6L;
      }
    }
#line 818
    if ((int )p->adapt_flags & 8) {
      {
#line 819
      memcpy((void */* __restrict  */)(p->opcr), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )6);
#line 820
      count += 6L;
      }
    }
#line 822
    if ((int )p->adapt_flags & 4) {
      {
#line 823
      memcpy((void */* __restrict  */)(& p->splice_count), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )1);
#line 824
      count ++;
      }
    }
#line 826
    if ((int )p->adapt_flags & 2) {
      {
#line 827
      memcpy((void */* __restrict  */)(& p->priv_dat_len), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )1);
#line 828
      count ++;
#line 829
      tmp = malloc((size_t )p->priv_dat_len);
#line 829
      p->priv_dat = (u8 *)tmp;
#line 830
      memcpy((void */* __restrict  */)p->priv_dat, (void const   */* __restrict  */)(buf___5 + count),
             (size_t )p->priv_dat_len);
#line 831
      count += (long )p->priv_dat_len;
      }
    }
#line 834
    if ((int )p->adapt_flags & 1) {
      {
#line 835
      memcpy((void */* __restrict  */)(& p->adapt_ext_len), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )1);
#line 836
      count ++;
#line 837
      memcpy((void */* __restrict  */)(& p->adapt_eflags), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )1);
#line 838
      count ++;
      }
#line 839
      if ((int )p->adapt_eflags & 128) {
        {
#line 840
        memcpy((void */* __restrict  */)(p->ltw), (void const   */* __restrict  */)(buf___5 + count),
               (size_t )2);
#line 841
        count += 2L;
        }
      }
#line 843
      if ((int )p->adapt_eflags & 64) {
        {
#line 844
        memcpy((void */* __restrict  */)(p->piece_rate), (void const   */* __restrict  */)(buf___5 + count),
               (size_t )3);
#line 845
        count += 3L;
        }
      }
#line 847
      if ((int )p->adapt_eflags & 32) {
        {
#line 848
        memcpy((void */* __restrict  */)(p->dts), (void const   */* __restrict  */)(buf___5 + count),
               (size_t )5);
#line 849
        count += 5L;
        }
      }
    }
#line 852
    q = (uint64_t )count;
#line 853
    p->stuffing = (u8 )((uint64_t )p->adapt_length - (q - po));
#line 854
    p->rest = 183 - (int )p->adapt_length;
#line 855
    count = (long )(q + (uint64_t )p->stuffing);
#line 856
    if ((int )p->flags & 16) {
      {
#line 857
      memcpy((void */* __restrict  */)(p->data), (void const   */* __restrict  */)(buf___5 + count),
             (size_t )p->rest);
#line 858
      count += (long )p->rest;
      }
    } else {
#line 860
      count = (long )(q + (uint64_t )p->rest);
    }
  }
#line 862
  return;
}
}
#line 872 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void init_ps(ps_packet *p ) 
{ 


  {
#line 874
  p->stuff_length = (u8 )248;
#line 875
  p->data = (u8 *)((void *)0);
#line 876
  p->sheader_length = 0;
#line 877
  p->audio_bound = (u8 )0;
#line 878
  p->video_bound = (u8 )0;
#line 879
  p->npes = 0;
#line 880
  p->mpeg = 2;
#line 881
  return;
}
}
#line 883 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void kill_ps(ps_packet *p ) 
{ 


  {
#line 885
  if (p->data) {
    {
#line 886
    free((void *)p->data);
    }
  }
  {
#line 887
  init_ps(p);
  }
#line 888
  return;
}
}
#line 890 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void setlength_ps(ps_packet *p ) 
{ 
  short *ll ;
  uint16_t tmp ;
  uint16_t tmp___0 ;

  {
#line 893
  ll = (short *)(p->sheader_llength);
#line 894
  if (p->mpeg == 2) {
    {
#line 895
    tmp = ntohs((uint16_t )*ll);
#line 895
    p->sheader_length = (int )tmp - 6;
    }
  } else {
    {
#line 897
    tmp___0 = ntohs((uint16_t )*ll);
#line 897
    p->sheader_length = (int )tmp___0;
    }
  }
#line 898
  return;
}
}
#line 900 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
static void setl_ps(ps_packet *p ) 
{ 
  void *tmp ;

  {
  {
#line 902
  setlength_ps(p);
#line 903
  tmp = malloc((size_t )p->sheader_length);
#line 903
  p->data = (u8 *)tmp;
  }
#line 904
  return;
}
}
#line 906 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int mux_ps(ps_packet *p ) 
{ 
  u32 mux ;
  u8 *i ;

  {
  {
#line 908
  mux = (u32 )0;
#line 909
  i = (u8 *)(& mux);
#line 911
  *(i + 1) = p->mux_rate[0];
#line 912
  *(i + 2) = p->mux_rate[1];
#line 913
  *(i + 3) = p->mux_rate[2];
#line 914
  mux = ntohl(mux);
#line 915
  mux >>= 2;
  }
#line 916
  return ((int )mux);
}
}
#line 919 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int rate_ps(ps_packet *p ) 
{ 
  u32 rate ;
  u8 *i ;

  {
  {
#line 921
  rate = (u32 )0;
#line 922
  i = (u8 *)(& rate);
#line 924
  *(i + 1) = (u8 )((int )p->rate_bound[0] & 127);
#line 925
  *(i + 2) = p->rate_bound[1];
#line 926
  *(i + 3) = p->rate_bound[2];
#line 928
  rate = ntohl(rate);
#line 929
  rate >>= 1;
  }
#line 930
  return ((int )rate);
}
}
#line 934 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
u32 scr_base_ps(ps_packet *p ) 
{ 
  u32 base ;
  u8 *buf___5 ;

  {
  {
#line 936
  base = (u32 )0;
#line 937
  buf___5 = (u8 *)(& base);
#line 939
  *(buf___5 + 0) = (u8 )((long )*(buf___5 + 0) | (long )(((int )p->scr[0] & 24) << 3));
#line 940
  *(buf___5 + 0) = (u8 )((long )*(buf___5 + 0) | (long )(((int )p->scr[0] & 3) << 4));
#line 941
  *(buf___5 + 0) = (u8 )((long )*(buf___5 + 0) | (long )(((int )p->scr[1] & 240) >> 4));
#line 943
  *(buf___5 + 1) = (u8 )((long )*(buf___5 + 1) | (long )(((int )p->scr[1] & 15) << 4));
#line 944
  *(buf___5 + 1) = (u8 )((long )*(buf___5 + 1) | (long )(((int )p->scr[2] & 240) >> 4));
#line 946
  *(buf___5 + 2) = (u8 )((long )*(buf___5 + 2) | (long )(((int )p->scr[2] & 8) << 4));
#line 947
  *(buf___5 + 2) = (u8 )((long )*(buf___5 + 2) | (long )(((int )p->scr[2] & 3) << 5));
#line 948
  *(buf___5 + 2) = (u8 )((long )*(buf___5 + 2) | (long )(((int )p->scr[3] & 248) >> 3));
#line 950
  *(buf___5 + 3) = (u8 )((long )*(buf___5 + 3) | (long )(((int )p->scr[3] & 7) << 5));
#line 951
  *(buf___5 + 3) = (u8 )((long )*(buf___5 + 3) | (long )(((int )p->scr[4] & 248) >> 3));
#line 953
  base = ntohl(base);
  }
#line 954
  return (base);
}
}
#line 957 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
u16 scr_ext_ps(ps_packet *p ) 
{ 
  short ext ;

  {
#line 959
  ext = (short)0;
#line 961
  ext = (short )((int )p->scr[5] >> 1);
#line 962
  ext = (short )((int )ext + (int )((short )((int )p->scr[4] & 3)) * 128);
#line 964
  return ((u16 )ext);
}
}
#line 967 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int cwrite_ps(u8 *buf___5 , ps_packet *p , long length ) 
{ 
  long count ;
  long i ;
  u8 headr1[4] ;
  u8 headr2[4] ;
  u8 buffy ;

  {
  {
#line 970
  headr1[0] = (u8 )0;
#line 970
  headr1[1] = (u8 )0;
#line 970
  headr1[2] = (u8 )1;
#line 970
  headr1[3] = (u8 )186;
#line 971
  headr2[0] = (u8 )0;
#line 971
  headr2[1] = (u8 )0;
#line 971
  headr2[2] = (u8 )1;
#line 971
  headr2[3] = (u8 )187;
#line 972
  buffy = (u8 )255;
#line 975
  memcpy((void */* __restrict  */)buf___5, (void const   */* __restrict  */)(headr1),
         (size_t )4);
#line 976
  count = 4L;
  }
#line 977
  if (p->mpeg == 2) {
    {
#line 978
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->scr),
           (size_t )6);
#line 979
    count += 6L;
#line 980
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->mux_rate),
           (size_t )3);
#line 981
    count += 3L;
#line 982
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->stuff_length),
           (size_t )1);
#line 983
    count ++;
#line 984
    i = 0L;
    }
    {
#line 984
    while (1) {
      while_continue: /* CIL Label */ ;
#line 984
      if (! (i < (long )((int )p->stuff_length & 3))) {
#line 984
        goto while_break;
      }
      {
#line 985
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& buffy),
             (size_t )1);
#line 986
      count ++;
#line 984
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  } else {
    {
#line 989
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->scr),
           (size_t )5);
#line 990
    count += 5L;
#line 991
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->mux_rate),
           (size_t )3);
#line 992
    count += 3L;
    }
  }
#line 994
  if (p->sheader_length) {
    {
#line 995
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(headr2),
           (size_t )4);
#line 996
    count += 4L;
#line 997
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->sheader_llength),
           (size_t )2);
#line 998
    count += 2L;
    }
#line 999
    if (p->mpeg == 2) {
      {
#line 1000
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(p->rate_bound),
             (size_t )3);
#line 1001
      count += 3L;
#line 1002
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->audio_bound),
             (size_t )1);
#line 1003
      count ++;
#line 1004
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->video_bound),
             (size_t )1);
#line 1005
      count ++;
#line 1006
      memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)(& p->reserved),
             (size_t )1);
#line 1007
      count ++;
      }
    }
    {
#line 1009
    memcpy((void */* __restrict  */)(buf___5 + count), (void const   */* __restrict  */)p->data,
           (size_t )p->sheader_length);
#line 1010
    count += (long )p->sheader_length;
    }
  }
#line 1013
  return ((int )count);
}
}
#line 1016 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_ps(int fd___0 , ps_packet *p ) 
{ 
  long length ;
  u8 buf___5[200] ;
  int tmp ;

  {
  {
#line 1020
  tmp = cwrite_ps(buf___5, p, 200L);
#line 1020
  length = (long )tmp;
#line 1021
  write(fd___0, (void const   *)(buf___5), (size_t )length);
  }
#line 1022
  return;
}
}
#line 1024 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int read_ps(int f , ps_packet *p ) 
{ 
  u8 headr[4] ;
  pes_packet pes ;
  int i ;
  int done ;
  int found ;
  uint64_t po ;
  uint64_t q ;
  long count ;
  int neof ;
  __off64_t tmp ;
  ssize_t tmp___0 ;
  ssize_t tmp___1 ;
  ssize_t tmp___2 ;
  ssize_t tmp___3 ;
  __off64_t tmp___4 ;
  ssize_t tmp___5 ;
  __off64_t tmp___6 ;
  ssize_t tmp___7 ;
  ssize_t tmp___8 ;
  ssize_t tmp___9 ;
  ssize_t tmp___10 ;
  ssize_t tmp___11 ;
  ssize_t tmp___12 ;
  ssize_t tmp___13 ;
  __off64_t tmp___14 ;
  __off64_t tmp___15 ;
  ssize_t tmp___16 ;

  {
  {
#line 1028
  found = 0;
#line 1029
  po = (uint64_t )0;
#line 1030
  q = (uint64_t )0;
#line 1031
  count = 0L;
#line 1032
  neof = 1;
#line 1034
  tmp = lseek(f, (__off64_t )0, 1);
#line 1034
  po = (uint64_t )tmp;
  }
  {
#line 1035
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1035
    if (neof > 0) {
#line 1035
      if (! found) {
#line 1035
        if (! (count < 1048576L)) {
#line 1035
          goto while_break;
        }
      } else {
#line 1035
        goto while_break;
      }
    } else {
#line 1035
      goto while_break;
    }
    {
#line 1036
    tmp___0 = read(f, (void *)(& headr), (size_t )4);
#line 1036
    neof = (int )tmp___0;
    }
#line 1037
    if ((int )headr[0] == 0) {
#line 1037
      if ((int )headr[1] == 0) {
#line 1037
        if ((int )headr[2] == 1) {
#line 1038
          if ((int )headr[3] == 186) {
#line 1039
            found = 1;
          } else
#line 1041
          if ((int )headr[3] == 185) {
#line 1041
            goto while_break;
          } else {
            {
#line 1042
            lseek(f, (__off64_t )(po + 1UL), 0);
            }
          }
        }
      }
    }
#line 1044
    count ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1047
  if (found) {
    {
#line 1048
    tmp___1 = read(f, (void *)(p->scr), (size_t )6);
#line 1048
    neof = (int )tmp___1;
    }
#line 1049
    if ((int )p->scr[0] & 64) {
#line 1050
      p->mpeg = 2;
    } else {
#line 1052
      p->mpeg = 1;
    }
#line 1054
    if (p->mpeg == 2) {
      {
#line 1055
      tmp___2 = read(f, (void *)(p->mux_rate), (size_t )3);
#line 1055
      neof = (int )tmp___2;
#line 1056
      tmp___3 = read(f, (void *)(& p->stuff_length), (size_t )1);
#line 1056
      neof = (int )tmp___3;
#line 1057
      tmp___4 = lseek(f, (__off64_t )0, 1);
#line 1057
      po = (uint64_t )tmp___4;
#line 1058
      lseek(f, (__off64_t )(po + (uint64_t )((int )p->stuff_length & 3)), 0);
      }
    } else {
      {
#line 1060
      p->mux_rate[0] = p->scr[5];
#line 1061
      tmp___5 = read(f, (void *)(p->mux_rate + 1), (size_t )2);
#line 1061
      neof = (int )tmp___5;
      }
    }
    {
#line 1064
    tmp___6 = lseek(f, (__off64_t )0, 1);
#line 1064
    po = (uint64_t )tmp___6;
#line 1065
    tmp___7 = read(f, (void *)(headr), (size_t )4);
#line 1065
    neof = (int )tmp___7;
    }
#line 1066
    if ((int )headr[0] == 0) {
#line 1066
      if ((int )headr[1] == 0) {
#line 1066
        if ((int )headr[2] == 1) {
#line 1066
          if ((int )headr[3] == 187) {
            {
#line 1068
            tmp___8 = read(f, (void *)(p->sheader_llength), (size_t )2);
#line 1068
            neof = (int )tmp___8;
#line 1069
            setl_ps(p);
            }
#line 1070
            if (p->mpeg == 2) {
              {
#line 1071
              tmp___9 = read(f, (void *)(p->rate_bound), (size_t )3);
#line 1071
              neof = (int )tmp___9;
#line 1072
              tmp___10 = read(f, (void *)(& p->audio_bound), (size_t )1);
#line 1072
              neof = (int )tmp___10;
#line 1073
              tmp___11 = read(f, (void *)(& p->video_bound), (size_t )1);
#line 1073
              neof = (int )tmp___11;
#line 1074
              tmp___12 = read(f, (void *)(& p->reserved), (size_t )1);
#line 1074
              neof = (int )tmp___12;
              }
            }
            {
#line 1076
            tmp___13 = read(f, (void *)p->data, (size_t )p->sheader_length);
#line 1076
            neof = (int )tmp___13;
            }
          } else {
            {
#line 1078
            lseek(f, (__off64_t )po, 0);
#line 1079
            p->sheader_length = 0;
            }
          }
        } else {
          {
#line 1078
          lseek(f, (__off64_t )po, 0);
#line 1079
          p->sheader_length = 0;
          }
        }
      } else {
        {
#line 1078
        lseek(f, (__off64_t )po, 0);
#line 1079
        p->sheader_length = 0;
        }
      }
    } else {
      {
#line 1078
      lseek(f, (__off64_t )po, 0);
#line 1079
      p->sheader_length = 0;
      }
    }
    {
#line 1082
    i = 0;
#line 1083
    done = 0;
#line 1084
    tmp___14 = lseek(f, (__off64_t )0, 1);
#line 1084
    q = (uint64_t )tmp___14;
    }
    {
#line 1085
    while (1) {
      while_continue___0: /* CIL Label */ ;
      {
#line 1086
      tmp___15 = lseek(f, (__off64_t )0, 1);
#line 1086
      po = (uint64_t )tmp___15;
#line 1087
      tmp___16 = read(f, (void *)(headr), (size_t )4);
#line 1087
      neof = (int )tmp___16;
#line 1088
      lseek(f, (__off64_t )po, 0);
      }
#line 1089
      if ((int )headr[0] == 0) {
#line 1089
        if ((int )headr[1] == 0) {
#line 1089
          if ((int )headr[2] == 1) {
#line 1089
            if ((int )headr[3] != 186) {
              {
#line 1091
              init_pes(& pes);
#line 1092
              neof = read_pes(f, & pes);
#line 1093
              i ++;
              }
            } else {
#line 1094
              done = 1;
            }
          } else {
#line 1094
            done = 1;
          }
        } else {
#line 1094
          done = 1;
        }
      } else {
#line 1094
        done = 1;
      }
      {
#line 1095
      kill_pes(& pes);
      }
#line 1085
      if (neof > 0) {
#line 1085
        if (! (! done)) {
#line 1085
          goto while_break___0;
        }
      } else {
#line 1085
        goto while_break___0;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 1097
    p->npes = i;
#line 1098
    lseek(f, (__off64_t )q, 0);
    }
  }
#line 1100
  return (neof);
}
}
#line 1103 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void cread_ps(char *buf___5 , ps_packet *p , long length ) 
{ 
  u8 *headr ;
  pes_packet pes ;
  int i ;
  int done ;
  int found ;
  uint64_t po ;
  uint64_t q ;
  long count ;
  long c ;

  {
#line 1107
  found = 0;
#line 1108
  po = (uint64_t )0;
#line 1109
  q = (uint64_t )0;
#line 1110
  count = 0L;
#line 1111
  c = 0L;
#line 1113
  po = (uint64_t )c;
  {
#line 1114
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1114
    if (count < length) {
#line 1114
      if (! found) {
#line 1114
        if (! (count < 1048576L)) {
#line 1114
          goto while_break;
        }
      } else {
#line 1114
        goto while_break;
      }
    } else {
#line 1114
      goto while_break;
    }
#line 1115
    headr = (u8 *)buf___5 + c;
#line 1116
    c += 4L;
#line 1117
    if ((int )*(headr + 0) == 0) {
#line 1117
      if ((int )*(headr + 1) == 0) {
#line 1117
        if ((int )*(headr + 2) == 1) {
#line 1118
          if ((int )*(headr + 3) == 186) {
#line 1119
            found = 1;
          } else
#line 1121
          if ((int )*(headr + 3) == 185) {
#line 1121
            goto while_break;
          } else {
#line 1122
            c = (long )(po + 1UL);
          }
        }
      }
    }
#line 1124
    count ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1127
  if (found) {
    {
#line 1128
    memcpy((void */* __restrict  */)(p->scr), (void const   */* __restrict  */)(buf___5 + c),
           (size_t )6);
#line 1129
    c += 6L;
    }
#line 1130
    if ((int )p->scr[0] & 64) {
#line 1131
      p->mpeg = 2;
    } else {
#line 1133
      p->mpeg = 1;
    }
#line 1135
    if (p->mpeg == 2) {
      {
#line 1136
      memcpy((void */* __restrict  */)(p->mux_rate), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )3);
#line 1137
      c += 3L;
#line 1138
      memcpy((void */* __restrict  */)(& p->stuff_length), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )1);
#line 1139
      c ++;
#line 1140
      po = (uint64_t )c;
#line 1141
      c = (long )(po + (uint64_t )((int )p->stuff_length & 3));
      }
    } else {
      {
#line 1143
      p->mux_rate[0] = p->scr[5];
#line 1144
      memcpy((void */* __restrict  */)(p->mux_rate + 1), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )2);
#line 1145
      c += 2L;
      }
    }
#line 1148
    po = (uint64_t )c;
#line 1149
    headr = (u8 *)buf___5 + c;
#line 1150
    c += 4L;
#line 1151
    if ((int )*(headr + 0) == 0) {
#line 1151
      if ((int )*(headr + 1) == 0) {
#line 1151
        if ((int )*(headr + 2) == 1) {
#line 1151
          if ((int )*(headr + 3) == 187) {
            {
#line 1153
            memcpy((void */* __restrict  */)(p->sheader_llength), (void const   */* __restrict  */)(buf___5 + c),
                   (size_t )2);
#line 1154
            c += 2L;
#line 1155
            setl_ps(p);
            }
#line 1156
            if (p->mpeg == 2) {
              {
#line 1157
              memcpy((void */* __restrict  */)(p->rate_bound), (void const   */* __restrict  */)(buf___5 + c),
                     (size_t )3);
#line 1158
              c += 3L;
#line 1159
              memcpy((void */* __restrict  */)(& p->audio_bound), (void const   */* __restrict  */)(buf___5 + c),
                     (size_t )1);
#line 1160
              c ++;
#line 1161
              memcpy((void */* __restrict  */)(& p->video_bound), (void const   */* __restrict  */)(buf___5 + c),
                     (size_t )1);
#line 1162
              c ++;
#line 1163
              memcpy((void */* __restrict  */)(& p->reserved), (void const   */* __restrict  */)(buf___5 + c),
                     (size_t )1);
#line 1164
              c ++;
              }
            }
            {
#line 1166
            memcpy((void */* __restrict  */)p->data, (void const   */* __restrict  */)(buf___5 + c),
                   (size_t )p->sheader_length);
#line 1167
            c += (long )p->sheader_length;
            }
          } else {
#line 1169
            c = (long )po;
#line 1170
            p->sheader_length = 0;
          }
        } else {
#line 1169
          c = (long )po;
#line 1170
          p->sheader_length = 0;
        }
      } else {
#line 1169
        c = (long )po;
#line 1170
        p->sheader_length = 0;
      }
    } else {
#line 1169
      c = (long )po;
#line 1170
      p->sheader_length = 0;
    }
#line 1173
    i = 0;
#line 1174
    done = 0;
#line 1175
    q = (uint64_t )c;
    {
#line 1176
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 1177
      headr = (u8 *)buf___5 + c;
#line 1178
      if ((int )*(headr + 0) == 0) {
#line 1178
        if ((int )*(headr + 1) == 0) {
#line 1178
          if ((int )*(headr + 2) == 1) {
#line 1178
            if ((int )*(headr + 3) != 186) {
              {
#line 1180
              init_pes(& pes);
#line 1182
              i ++;
              }
            } else {
#line 1183
              done = 1;
            }
          } else {
#line 1183
            done = 1;
          }
        } else {
#line 1183
          done = 1;
        }
      } else {
#line 1183
        done = 1;
      }
      {
#line 1184
      kill_pes(& pes);
      }
#line 1176
      if (c < length) {
#line 1176
        if (! (! done)) {
#line 1176
          goto while_break___0;
        }
      } else {
#line 1176
        goto while_break___0;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 1186
    p->npes = i;
#line 1187
    c = (long )q;
  }
#line 1189
  return;
}
}
#line 1201 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void init_trans(trans *p ) 
{ 
  int i ;

  {
#line 1205
  p->found = 0;
#line 1206
  p->pes = (tflags )0;
#line 1207
  p->is_full = (tflags )0;
#line 1208
  p->pes_start = (tflags )0;
#line 1209
  p->pes_started = (tflags )0;
#line 1210
  p->set = (tflags )0;
#line 1212
  i = 0;
  {
#line 1212
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1212
    if (! (i < 512)) {
#line 1212
      goto while_break;
    }
#line 1213
    p->mask[i] = (u8 )0;
#line 1214
    p->filt[i] = (u8 )0;
#line 1212
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1216
  i = 0;
  {
#line 1216
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 1216
    if (! (i < 32)) {
#line 1216
      goto while_break___0;
    }
#line 1217
    p->sec[i].found = 0;
#line 1218
    p->sec[i].length = 0;
#line 1216
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 1220
  return;
}
}
#line 1222 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int set_trans_filt(trans *p , int filtn , u16 pid___0 , u8 *mask , u8 *filt , int pes ) 
{ 
  int i ;
  int off ;

  {
#line 1227
  if (filtn > 31) {
#line 1227
    return (-1);
  } else
#line 1227
  if (filtn < 0) {
#line 1227
    return (-1);
  }
#line 1228
  p->pid[filtn] = pid___0;
#line 1229
  if (pes) {
#line 1229
    p->pes |= (tflags )(1 << filtn);
  } else {
#line 1231
    off = 16 * filtn;
#line 1232
    p->pes &= ~ ((tflags )(1 << filtn));
#line 1233
    i = 0;
    {
#line 1233
    while (1) {
      while_continue: /* CIL Label */ ;
#line 1233
      if (! (i < 16)) {
#line 1233
        goto while_break;
      }
#line 1234
      p->mask[off + i] = *(mask + i);
#line 1235
      p->filt[off + i] = *(filt + i);
#line 1233
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 1238
  p->set |= (tflags )(1 << filtn);
#line 1239
  return (0);
}
}
#line 1242 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void clear_trans_filt(trans *p , int filtn ) 
{ 
  int i ;

  {
#line 1246
  p->set &= ~ ((tflags )(1 << filtn));
#line 1247
  p->pes &= ~ ((tflags )(1 << filtn));
#line 1248
  p->is_full &= ~ ((tflags )(1 << filtn));
#line 1249
  p->pes_start &= ~ ((tflags )(1 << filtn));
#line 1250
  p->pes_started &= ~ ((tflags )(1 << filtn));
#line 1252
  i = 16 * filtn;
  {
#line 1252
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1252
    if (! (i < 16 * (filtn + 1))) {
#line 1252
      goto while_break;
    }
#line 1253
    p->mask[i] = (u8 )0;
#line 1254
    p->filt[i] = (u8 )0;
#line 1252
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1256
  p->sec[filtn].found = 0;
#line 1257
  p->sec[filtn].length = 0;
#line 1258
  return;
}
}
#line 1260 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int filt_is_set(trans *p , int filtn ) 
{ 


  {
#line 1262
  if (p->set & (tflags )(1 << filtn)) {
#line 1262
    return (1);
  }
#line 1263
  return (0);
}
}
#line 1266 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int pes_is_set(trans *p , int filtn ) 
{ 


  {
#line 1268
  if (p->pes & (tflags )(1 << filtn)) {
#line 1268
    return (1);
  }
#line 1269
  return (0);
}
}
#line 1272 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int pes_is_started(trans *p , int filtn ) 
{ 


  {
#line 1274
  if (p->pes_started & (tflags )(1 << filtn)) {
#line 1274
    return (1);
  }
#line 1275
  return (0);
}
}
#line 1278 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int pes_is_start(trans *p , int filtn ) 
{ 


  {
#line 1280
  if (p->pes_start & (tflags )(1 << filtn)) {
#line 1280
    return (1);
  }
#line 1281
  return (0);
}
}
#line 1284 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int filt_is_ready(trans *p , int filtn ) 
{ 


  {
#line 1286
  if (p->is_full & (tflags )(1 << filtn)) {
#line 1286
    return (1);
  }
#line 1287
  return (0);
}
}
#line 1290 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void trans_filt(u8 *buf___5 , int count , trans *p ) 
{ 
  int c ;

  {
#line 1292
  c = 0;
  {
#line 1296
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1296
    if (c < count) {
#line 1296
      if (! (p->found < 1)) {
#line 1296
        goto while_break;
      }
    } else {
#line 1296
      goto while_break;
    }
#line 1297
    if ((int )*(buf___5 + c) == 71) {
#line 1297
      p->found = 1;
    }
#line 1298
    c ++;
#line 1299
    p->packet[0] = (u8 )71;
  }
  while_break: /* CIL Label */ ;
  }
#line 1301
  if (c == count) {
#line 1301
    return;
  }
  {
#line 1303
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 1303
    if (c < count) {
#line 1303
      if (p->found < 188) {
#line 1303
        if (! (p->found > 0)) {
#line 1303
          goto while_break___0;
        }
      } else {
#line 1303
        goto while_break___0;
      }
    } else {
#line 1303
      goto while_break___0;
    }
#line 1304
    p->packet[p->found] = *(buf___5 + c);
#line 1305
    c ++;
#line 1306
    (p->found) ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 1308
  if (p->found == 188) {
    {
#line 1309
    p->found = 0;
#line 1310
    filter(p);
    }
  }
#line 1313
  if (c < count) {
    {
#line 1313
    trans_filt(buf___5 + c, count - c, p);
    }
  }
#line 1314
  return;
}
}
#line 1317 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void filter(trans *p ) 
{ 
  int l ;
  int c ;
  int tpid ;
  u8 flag ;
  u8 flags ;
  u8 adapt_length ;
  u8 cpid[2] ;
  uint16_t tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 1322
  adapt_length = (u8 )0;
#line 1328
  cpid[0] = p->packet[1];
#line 1329
  cpid[1] = p->packet[2];
#line 1330
  tmp = get_pid(cpid);
#line 1330
  tpid = (int )tmp;
#line 1332
  flag = cpid[0];
#line 1333
  flags = p->packet[3];
  }
#line 1335
  if ((int )flags & 32) {
#line 1337
    adapt_length = p->packet[4];
  }
#line 1340
  c = (5 + (int )adapt_length) - ! ((int )flags & 32);
#line 1341
  if ((int )flags & 16) {
#line 1342
    l = 0;
    {
#line 1342
    while (1) {
      while_continue: /* CIL Label */ ;
#line 1342
      if (! (l < 32)) {
#line 1342
        goto while_break;
      }
      {
#line 1343
      tmp___1 = filt_is_set(p, l);
      }
#line 1343
      if (tmp___1) {
#line 1344
        if ((int )p->pid[l] == tpid) {
          {
#line 1345
          tmp___0 = pes_is_set(p, l);
          }
#line 1345
          if (tmp___0) {
#line 1346
            if ((int )cpid[0] & 64) {
#line 1347
              p->pes_started |= (tflags )(1 << l);
#line 1350
              p->pes_start |= (tflags )(1 << l);
            } else {
#line 1354
              p->pes_start &= ~ ((tflags )(1 << l));
            }
            {
#line 1358
            pes_filter(p, l, c);
            }
          } else {
            {
#line 1360
            sec_filter(p, l, c);
            }
          }
        }
      }
#line 1342
      l ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 1366
  return;
}
}
#line 1369 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void pes_filter(trans *p , int filtn , int off ) 
{ 
  int count ;
  int c ;
  u8 *buf___5 ;
  int tmp ;

  {
#line 1374
  if (filtn < 0) {
#line 1374
    return;
  } else
#line 1374
  if (filtn >= 32) {
#line 1374
    return;
  }
  {
#line 1376
  count = 188 - off;
#line 1377
  c = 188 * filtn;
#line 1378
  buf___5 = p->packet + off;
#line 1379
  tmp = pes_is_started(p, filtn);
  }
#line 1379
  if (tmp) {
    {
#line 1380
    p->is_full |= (tflags )(1 << filtn);
#line 1381
    memcpy((void */* __restrict  */)(p->transbuf + c), (void const   */* __restrict  */)buf___5,
           (size_t )count);
#line 1382
    p->transcount[filtn] = count;
    }
  }
#line 1384
  return;
}
}
#line 1386 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
section *get_filt_sec(trans *p , int filtn ) 
{ 
  section *sec ;

  {
#line 1390
  sec = & p->sec[filtn];
#line 1391
  p->is_full &= ~ ((tflags )(1 << filtn));
#line 1392
  return (sec);
}
}
#line 1395 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int get_filt_buf(trans *p , int filtn , u8 **buf___5 ) 
{ 


  {
#line 1397
  *buf___5 = p->transbuf + 188 * filtn;
#line 1398
  p->is_full &= ~ ((tflags )(1 << filtn));
#line 1399
  return (p->transcount[filtn]);
}
}
#line 1405 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void sec_filter(trans *p , int filtn , int off ) 
{ 
  int i ;
  int j ;
  int error___0 ;
  int count ;
  int c ;
  u8 *buf___5 ;
  u8 *secbuf ;
  section *sec ;
  int tmp ;

  {
#line 1415
  if (filtn < 0) {
#line 1415
    return;
  } else
#line 1415
  if (filtn >= 32) {
#line 1415
    return;
  }
  {
#line 1417
  count = 188 - off;
#line 1418
  c = 0;
#line 1419
  buf___5 = p->packet + off;
#line 1420
  sec = & p->sec[filtn];
#line 1421
  secbuf = sec->payload;
#line 1422
  tmp = filt_is_ready(p, filtn);
  }
#line 1422
  if (! tmp) {
#line 1423
    p->is_full &= ~ ((tflags )(1 << filtn));
#line 1424
    sec->found = 0;
#line 1425
    sec->length = 0;
  }
#line 1428
  if (! sec->found) {
#line 1429
    c = (int )*(buf___5 + c) + 1;
#line 1430
    if (c >= count) {
#line 1430
      return;
    }
#line 1431
    sec->id = (int )*(buf___5 + c);
#line 1432
    *(secbuf + 0) = *(buf___5 + c);
#line 1433
    c ++;
#line 1434
    (sec->found) ++;
#line 1435
    sec->length = 0;
  }
  {
#line 1438
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1438
    if (c < count) {
#line 1438
      if (! (sec->found < 3)) {
#line 1438
        goto while_break;
      }
    } else {
#line 1438
      goto while_break;
    }
#line 1439
    *(secbuf + sec->found) = *(buf___5 + c);
#line 1440
    c ++;
#line 1441
    (sec->found) ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1443
  if (c == count) {
#line 1443
    return;
  }
#line 1445
  if (! sec->length) {
#line 1445
    if (sec->found == 3) {
#line 1446
      sec->length |= ((int )*(secbuf + 1) & 15) << 8;
#line 1447
      sec->length |= (int )*(secbuf + 2) & 255;
    }
  }
  {
#line 1450
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 1450
    if (c < count) {
#line 1450
      if (! (sec->found < sec->length + 3)) {
#line 1450
        goto while_break___0;
      }
    } else {
#line 1450
      goto while_break___0;
    }
#line 1451
    *(secbuf + sec->found) = *(buf___5 + c);
#line 1452
    c ++;
#line 1453
    (sec->found) ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 1456
  if (sec->length) {
#line 1456
    if (sec->found == sec->length + 3) {
#line 1457
      error___0 = 0;
#line 1458
      i = 0;
      {
#line 1458
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 1458
        if (! (i < 16)) {
#line 1458
          goto while_break___1;
        }
#line 1459
        if (i > 0) {
#line 1459
          j = 2 + i;
        } else {
#line 1460
          j = 0;
        }
#line 1461
        error___0 += ((int )sec->payload[j] & (int )p->mask[16 * filtn + i]) ^ ((int )p->filt[16 * filtn + i] & (int )p->mask[16 * filtn + i]);
#line 1458
        i ++;
      }
      while_break___1: /* CIL Label */ ;
      }
#line 1465
      if (! error___0) {
#line 1466
        p->is_full |= (tflags )(1 << filtn);
      }
#line 1468
      if ((int )*(buf___5 + 0) + 1 < c) {
#line 1468
        c = count;
      }
    }
  }
#line 1471
  if (c < count) {
    {
#line 1471
    sec_filter(p, filtn, off);
    }
  }
#line 1473
  return;
}
}
#line 1478 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_ps_headr(ps_packet *p , u8 *pts , int fd___0 ) 
{ 
  long muxr___0 ;
  u8 audio_bound ;
  u8 fixed ;
  u8 CSPS ;
  u8 audio_lock ;
  u8 video_lock ;
  u8 video_bound ;
  u8 stream1 ;
  u8 buffer1_scale ;
  u32 buffer1_size ;
  u8 stream2 ;
  u8 buffer2_scale ;
  u32 buffer2_size ;

  {
  {
#line 1480
  muxr___0 = 37500L;
#line 1481
  audio_bound = (u8 )1;
#line 1482
  fixed = (u8 )0;
#line 1483
  CSPS = (u8 )0;
#line 1484
  audio_lock = (u8 )1;
#line 1485
  video_lock = (u8 )1;
#line 1486
  video_bound = (u8 )1;
#line 1487
  stream1 = (u8 )192;
#line 1488
  buffer1_scale = (u8 )1;
#line 1489
  buffer1_size = (u32 )32;
#line 1490
  stream2 = (u8 )224;
#line 1491
  buffer2_scale = (u8 )1;
#line 1492
  buffer2_size = (u32 )230;
#line 1494
  init_ps(p);
#line 1496
  p->mpeg = 2;
#line 1498
  p->scr[0] = (u8 )68;
#line 1499
  p->scr[1] = (u8 )0;
#line 1500
  p->scr[2] = (u8 )4;
#line 1501
  p->scr[3] = (u8 )0;
#line 1502
  p->scr[4] = (u8 )4;
#line 1503
  p->scr[5] = (u8 )1;
#line 1506
  p->scr[0] = (u8 )((68 | (((int )*(pts + 0) >> 3) & 24)) | (((int )*(pts + 0) >> 4) & 3));
#line 1507
  p->scr[1] = (u8 )((((int )*(pts + 0) << 4) & 240) | (((int )*(pts + 1) >> 4) & 15));
#line 1508
  p->scr[2] = (u8 )(((4 | (((int )*(pts + 1) << 4) & 240)) | (((int )*(pts + 2) >> 4) & 8)) | (((int )*(pts + 2) >> 5) & 3));
#line 1510
  p->scr[3] = (u8 )((((int )*(pts + 2) << 3) & 248) | (((int )*(pts + 3) >> 5) & 7));
#line 1511
  p->scr[4] = (u8 )(4 | (((int )*(pts + 3) << 3) & 248));
#line 1512
  p->scr[5] = (u8 )1;
#line 1514
  p->mux_rate[0] = (u8 )(muxr___0 >> 14);
#line 1515
  p->mux_rate[1] = (u8 )(255L & (muxr___0 >> 6));
#line 1516
  p->mux_rate[2] = (u8 )(3L | ((muxr___0 & 63L) << 2));
#line 1518
  p->stuff_length = (u8 )248;
#line 1520
  p->sheader_llength[0] = (u8 )0;
#line 1521
  p->sheader_llength[1] = (u8 )12;
#line 1523
  setl_ps(p);
#line 1525
  p->rate_bound[0] = (u8 )(128L | (muxr___0 >> 15));
#line 1526
  p->rate_bound[1] = (u8 )(255L & (muxr___0 >> 7));
#line 1527
  p->rate_bound[2] = (u8 )(1L | ((muxr___0 & 127L) << 1));
#line 1530
  p->audio_bound = (u8 )((((int )audio_bound << 2) | ((int )fixed << 1)) | (int )CSPS);
#line 1531
  p->video_bound = (u8 )(((((int )audio_lock << 7) | ((int )video_lock << 6)) | 32) | (int )video_bound);
#line 1533
  p->reserved = (u8 )255;
#line 1535
  *(p->data + 0) = stream2;
#line 1536
  *(p->data + 1) = (u8 )((unsigned int )(192 | ((int )buffer2_scale << 5)) | (buffer2_size >> 8));
#line 1538
  *(p->data + 2) = (u8 )(buffer2_size & 255U);
#line 1539
  *(p->data + 3) = stream1;
#line 1540
  *(p->data + 4) = (u8 )((unsigned int )(192 | ((int )buffer1_scale << 5)) | (buffer1_size >> 8));
#line 1542
  *(p->data + 5) = (u8 )(buffer1_size & 255U);
#line 1544
  write_ps(fd___0, p);
#line 1545
  kill_ps(p);
  }
#line 1546
  return;
}
}
#line 1550 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void twrite(u8 const   *buf___5 ) 
{ 
  int l ;
  int c ;
  int w ;
  ssize_t tmp ;

  {
#line 1552
  l = 188;
#line 1553
  c = 0;
  {
#line 1557
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1557
    if (! l) {
#line 1557
      goto while_break;
    }
    {
#line 1558
    tmp = write(1, (void const   *)(buf___5 + c), (size_t )l);
#line 1558
    w = (int )tmp;
    }
#line 1559
    if (w >= 0) {
#line 1560
      l -= w;
#line 1561
      c += w;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1564
  return;
}
}
#line 1566 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void init_p2t(p2t_t *p , void (*fkt)(u8 const   *buf ) ) 
{ 


  {
  {
#line 1568
  memset((void *)(p->pes), 0, (size_t )188);
#line 1569
  p->counter = (u8 )0;
#line 1570
  p->pos = 0L;
#line 1571
  p->frags = 0;
  }
#line 1572
  if (fkt) {
#line 1572
    p->t_out = fkt;
  } else {
#line 1573
    p->t_out = & twrite;
  }
#line 1574
  return;
}
}
#line 1576 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void clear_p2t(p2t_t *p ) 
{ 


  {
  {
#line 1578
  memset((void *)(p->pes), 0, (size_t )188);
#line 1579
  p->counter = (u8 )0;
#line 1580
  p->pos = 0L;
#line 1581
  p->frags = 0;
  }
#line 1582
  return;
}
}
#line 1585 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
long find_pes_header(u8 const   *buf___5 , long length , int *frags ) 
{ 
  int c ;
  int found ;

  {
#line 1587
  c = 0;
#line 1588
  found = 0;
#line 1590
  *frags = 0;
  {
#line 1592
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1592
    if ((long )c < length - 3L) {
#line 1592
      if (! (! found)) {
#line 1592
        goto while_break;
      }
    } else {
#line 1592
      goto while_break;
    }
#line 1593
    if ((int const   )*(buf___5 + c) == 0) {
#line 1593
      if ((int const   )*(buf___5 + (c + 1)) == 0) {
#line 1593
        if ((int const   )*(buf___5 + (c + 2)) == 1) {
          {
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 224) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 225) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 226) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 227) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 228) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 229) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 230) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 231) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 232) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 233) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 234) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 235) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 236) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 237) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 238) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 239) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 192) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 193) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 194) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 195) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 196) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 197) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 198) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 199) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 200) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 201) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 202) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 203) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 204) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 205) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 206) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 207) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 208) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 209) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 210) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 211) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 212) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 213) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 214) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 215) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 216) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 217) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 218) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 219) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 220) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 221) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 222) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 223) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 189) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 243) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 242) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 190) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 241) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 240) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 255) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 191) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 188) {
#line 1607
            goto case_224;
          }
#line 1607
          if ((int const   )*(buf___5 + (c + 3)) == 186) {
#line 1607
            goto case_224;
          }
#line 1611
          goto switch_default;
          case_224: /* CIL Label */ 
          case_225: /* CIL Label */ 
          case_226: /* CIL Label */ 
          case_227: /* CIL Label */ 
          case_228: /* CIL Label */ 
          case_229: /* CIL Label */ 
          case_230: /* CIL Label */ 
          case_231: /* CIL Label */ 
          case_232: /* CIL Label */ 
          case_233: /* CIL Label */ 
          case_234: /* CIL Label */ 
          case_235: /* CIL Label */ 
          case_236: /* CIL Label */ 
          case_237: /* CIL Label */ 
          case_238: /* CIL Label */ 
          case_239: /* CIL Label */ 
          case_192: /* CIL Label */ 
          case_193: /* CIL Label */ 
          case_194: /* CIL Label */ 
          case_195: /* CIL Label */ 
          case_196: /* CIL Label */ 
          case_197: /* CIL Label */ 
          case_198: /* CIL Label */ 
          case_199: /* CIL Label */ 
          case_200: /* CIL Label */ 
          case_201: /* CIL Label */ 
          case_202: /* CIL Label */ 
          case_203: /* CIL Label */ 
          case_204: /* CIL Label */ 
          case_205: /* CIL Label */ 
          case_206: /* CIL Label */ 
          case_207: /* CIL Label */ 
          case_208: /* CIL Label */ 
          case_209: /* CIL Label */ 
          case_210: /* CIL Label */ 
          case_211: /* CIL Label */ 
          case_212: /* CIL Label */ 
          case_213: /* CIL Label */ 
          case_214: /* CIL Label */ 
          case_215: /* CIL Label */ 
          case_216: /* CIL Label */ 
          case_217: /* CIL Label */ 
          case_218: /* CIL Label */ 
          case_219: /* CIL Label */ 
          case_220: /* CIL Label */ 
          case_221: /* CIL Label */ 
          case_222: /* CIL Label */ 
          case_223: /* CIL Label */ 
          case_189: /* CIL Label */ 
          case_243: /* CIL Label */ 
          case_242: /* CIL Label */ 
          case_190: /* CIL Label */ 
          case_241: /* CIL Label */ 
          case_240: /* CIL Label */ 
          case_255: /* CIL Label */ 
          case_191: /* CIL Label */ 
          case_188: /* CIL Label */ 
          case_186: /* CIL Label */ 
#line 1608
          found = 1;
#line 1609
          goto switch_break;
          switch_default: /* CIL Label */ 
#line 1612
          c ++;
#line 1613
          goto switch_break;
          switch_break: /* CIL Label */ ;
          }
        } else {
#line 1615
          c ++;
        }
      } else {
#line 1615
        c ++;
      }
    } else {
#line 1615
      c ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1617
  if ((long )c == length - 3L) {
#line 1617
    if (! found) {
#line 1618
      if ((int const   )*(buf___5 + (length - 1L)) == 0) {
#line 1618
        *frags = 1;
      }
#line 1619
      if ((int const   )*(buf___5 + (length - 2L)) == 0) {
#line 1619
        if ((int const   )*(buf___5 + (length - 1L)) == 0) {
#line 1620
          *frags = 2;
        }
      }
#line 1621
      if ((int const   )*(buf___5 + (length - 3L)) == 0) {
#line 1621
        if ((int const   )*(buf___5 + (length - 2L)) == 0) {
#line 1621
          if ((int const   )*(buf___5 + (length - 1L)) == 1) {
#line 1623
            *frags = 3;
          }
        }
      }
#line 1624
      return (-1L);
    }
  }
#line 1627
  return ((long )c);
}
}
#line 1630 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void pes_to_ts(u8 const   *buf___5 , long length , u16 pid___0 , p2t_t *p ) 
{ 
  int c ;
  int c2 ;
  int l ;
  int add ;
  int check ;
  int rest ;
  long tmp ;
  long tmp___0 ;

  {
#line 1635
  c = 0;
#line 1636
  c2 = 0;
#line 1637
  if (p->frags) {
#line 1638
    check = 0;
    {
#line 1640
    if (p->frags == 1) {
#line 1640
      goto case_1;
    }
#line 1646
    if (p->frags == 2) {
#line 1646
      goto case_2;
    }
#line 1652
    if (p->frags == 3) {
#line 1652
      goto case_3;
    }
#line 1639
    goto switch_break;
    case_1: /* CIL Label */ 
#line 1641
    if ((int const   )*(buf___5 + c) == 0) {
#line 1641
      if ((int const   )*(buf___5 + (c + 1)) == 1) {
#line 1642
        check = 1;
#line 1643
        c += 2;
      }
    }
#line 1645
    goto switch_break;
    case_2: /* CIL Label */ 
#line 1647
    if ((int const   )*(buf___5 + c) == 1) {
#line 1648
      check = 1;
#line 1649
      c ++;
    }
#line 1651
    goto switch_break;
    case_3: /* CIL Label */ 
#line 1653
    check = 1;
    switch_break: /* CIL Label */ ;
    }
#line 1655
    if (check) {
      {
#line 1668
      if ((int const   )*(buf___5 + c) == 224) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 225) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 226) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 227) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 228) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 229) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 230) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 231) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 232) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 233) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 234) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 235) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 236) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 237) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 238) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 239) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 192) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 193) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 194) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 195) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 196) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 197) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 198) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 199) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 200) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 201) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 202) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 203) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 204) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 205) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 206) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 207) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 208) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 209) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 210) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 211) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 212) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 213) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 214) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 215) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 216) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 217) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 218) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 219) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 220) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 221) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 222) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 223) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 189) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 243) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 242) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 190) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 241) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 240) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 255) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 191) {
#line 1668
        goto case_224;
      }
#line 1668
      if ((int const   )*(buf___5 + c) == 188) {
#line 1668
        goto case_224;
      }
#line 1681
      goto switch_default;
      case_224: /* CIL Label */ 
      case_225: /* CIL Label */ 
      case_226: /* CIL Label */ 
      case_227: /* CIL Label */ 
      case_228: /* CIL Label */ 
      case_229: /* CIL Label */ 
      case_230: /* CIL Label */ 
      case_231: /* CIL Label */ 
      case_232: /* CIL Label */ 
      case_233: /* CIL Label */ 
      case_234: /* CIL Label */ 
      case_235: /* CIL Label */ 
      case_236: /* CIL Label */ 
      case_237: /* CIL Label */ 
      case_238: /* CIL Label */ 
      case_239: /* CIL Label */ 
      case_192: /* CIL Label */ 
      case_193: /* CIL Label */ 
      case_194: /* CIL Label */ 
      case_195: /* CIL Label */ 
      case_196: /* CIL Label */ 
      case_197: /* CIL Label */ 
      case_198: /* CIL Label */ 
      case_199: /* CIL Label */ 
      case_200: /* CIL Label */ 
      case_201: /* CIL Label */ 
      case_202: /* CIL Label */ 
      case_203: /* CIL Label */ 
      case_204: /* CIL Label */ 
      case_205: /* CIL Label */ 
      case_206: /* CIL Label */ 
      case_207: /* CIL Label */ 
      case_208: /* CIL Label */ 
      case_209: /* CIL Label */ 
      case_210: /* CIL Label */ 
      case_211: /* CIL Label */ 
      case_212: /* CIL Label */ 
      case_213: /* CIL Label */ 
      case_214: /* CIL Label */ 
      case_215: /* CIL Label */ 
      case_216: /* CIL Label */ 
      case_217: /* CIL Label */ 
      case_218: /* CIL Label */ 
      case_219: /* CIL Label */ 
      case_220: /* CIL Label */ 
      case_221: /* CIL Label */ 
      case_222: /* CIL Label */ 
      case_223: /* CIL Label */ 
      case_189: /* CIL Label */ 
      case_243: /* CIL Label */ 
      case_242: /* CIL Label */ 
      case_190: /* CIL Label */ 
      case_241: /* CIL Label */ 
      case_240: /* CIL Label */ 
      case_255: /* CIL Label */ 
      case_191: /* CIL Label */ 
      case_188: /* CIL Label */ 
      {
#line 1669
      p->pes[0] = (u8 )0;
#line 1670
      p->pes[1] = (u8 )0;
#line 1671
      p->pes[2] = (u8 )1;
#line 1672
      p->pes[3] = (u8 )*(buf___5 + c);
#line 1673
      p->pos = 4L;
#line 1674
      memcpy((void */* __restrict  */)(p->pes + p->pos), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )(184L - p->pos));
#line 1675
      c = (int )((long )c + (184L - p->pos));
#line 1676
      p_to_t((u8 const   *)(p->pes), 184L, pid___0, & p->counter, p->t_out);
#line 1678
      clear_p2t(p);
      }
#line 1679
      goto switch_break___0;
      switch_default: /* CIL Label */ 
#line 1682
      c = 0;
#line 1683
      goto switch_break___0;
      switch_break___0: /* CIL Label */ ;
      }
    }
#line 1686
    p->frags = 0;
  }
#line 1689
  if (p->pos) {
    {
#line 1690
    tmp = find_pes_header(buf___5 + c, length - (long )c, & p->frags);
#line 1690
    c2 = (int )tmp;
    }
#line 1691
    if (c2 >= 0) {
#line 1691
      if ((long )c2 < 184L - p->pos) {
#line 1692
        l = c2 + c;
      } else {
#line 1693
        l = (int )(184L - p->pos);
      }
    } else {
#line 1693
      l = (int )(184L - p->pos);
    }
    {
#line 1694
    memcpy((void */* __restrict  */)(p->pes + p->pos), (void const   */* __restrict  */)buf___5,
           (size_t )l);
#line 1695
    c += l;
#line 1696
    p->pos += (long )l;
#line 1697
    p_to_t((u8 const   *)(p->pes), p->pos, pid___0, & p->counter, p->t_out);
#line 1699
    clear_p2t(p);
    }
  }
#line 1702
  add = 0;
  {
#line 1703
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1703
    if (! ((long )c < length)) {
#line 1703
      goto while_break;
    }
    {
#line 1704
    tmp___0 = find_pes_header((buf___5 + c) + add, (length - (long )c) - (long )add,
                              & p->frags);
#line 1704
    c2 = (int )tmp___0;
    }
#line 1705
    if (c2 >= 0) {
#line 1706
      c2 += c + add;
#line 1707
      if (c2 > c) {
        {
#line 1708
        p_to_t(buf___5 + c, (long )(c2 - c), pid___0, & p->counter, p->t_out);
#line 1710
        c = c2;
#line 1711
        clear_p2t(p);
#line 1712
        add = 0;
        }
      } else {
#line 1713
        add = 1;
      }
    } else {
      {
#line 1715
      l = (int )(length - (long )c);
#line 1716
      rest = l % 184;
#line 1717
      l -= rest;
#line 1718
      p_to_t(buf___5 + c, (long )l, pid___0, & p->counter, p->t_out);
#line 1720
      memcpy((void */* __restrict  */)(p->pes), (void const   */* __restrict  */)((buf___5 + c) + l),
             (size_t )rest);
#line 1721
      p->pos = (long )rest;
#line 1722
      c = (int )length;
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1725
  return;
}
}
#line 1729 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void p_to_t(u8 const   *buf___5 , long length , u16 pid___0 , u8 *counter , void (*ts_write)(u8 const   * ) ) 
{ 
  int l ;
  int pes_start ;
  u8 obuf[188] ;
  long c ;

  {
#line 1735
  c = 0L;
#line 1736
  pes_start = 0;
#line 1737
  if (length > 3L) {
#line 1737
    if ((int const   )*(buf___5 + 0) == 0) {
#line 1737
      if ((int const   )*(buf___5 + 1) == 0) {
#line 1737
        if ((int const   )*(buf___5 + 2) == 1) {
          {
#line 1750
          if ((int const   )*(buf___5 + 3) == 224) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 225) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 226) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 227) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 228) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 229) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 230) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 231) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 232) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 233) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 234) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 235) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 236) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 237) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 238) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 239) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 192) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 193) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 194) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 195) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 196) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 197) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 198) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 199) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 200) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 201) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 202) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 203) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 204) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 205) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 206) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 207) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 208) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 209) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 210) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 211) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 212) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 213) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 214) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 215) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 216) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 217) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 218) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 219) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 220) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 221) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 222) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 223) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 189) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 243) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 242) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 190) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 241) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 240) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 255) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 191) {
#line 1750
            goto case_224;
          }
#line 1750
          if ((int const   )*(buf___5 + 3) == 188) {
#line 1750
            goto case_224;
          }
#line 1754
          goto switch_default;
          case_224: /* CIL Label */ 
          case_225: /* CIL Label */ 
          case_226: /* CIL Label */ 
          case_227: /* CIL Label */ 
          case_228: /* CIL Label */ 
          case_229: /* CIL Label */ 
          case_230: /* CIL Label */ 
          case_231: /* CIL Label */ 
          case_232: /* CIL Label */ 
          case_233: /* CIL Label */ 
          case_234: /* CIL Label */ 
          case_235: /* CIL Label */ 
          case_236: /* CIL Label */ 
          case_237: /* CIL Label */ 
          case_238: /* CIL Label */ 
          case_239: /* CIL Label */ 
          case_192: /* CIL Label */ 
          case_193: /* CIL Label */ 
          case_194: /* CIL Label */ 
          case_195: /* CIL Label */ 
          case_196: /* CIL Label */ 
          case_197: /* CIL Label */ 
          case_198: /* CIL Label */ 
          case_199: /* CIL Label */ 
          case_200: /* CIL Label */ 
          case_201: /* CIL Label */ 
          case_202: /* CIL Label */ 
          case_203: /* CIL Label */ 
          case_204: /* CIL Label */ 
          case_205: /* CIL Label */ 
          case_206: /* CIL Label */ 
          case_207: /* CIL Label */ 
          case_208: /* CIL Label */ 
          case_209: /* CIL Label */ 
          case_210: /* CIL Label */ 
          case_211: /* CIL Label */ 
          case_212: /* CIL Label */ 
          case_213: /* CIL Label */ 
          case_214: /* CIL Label */ 
          case_215: /* CIL Label */ 
          case_216: /* CIL Label */ 
          case_217: /* CIL Label */ 
          case_218: /* CIL Label */ 
          case_219: /* CIL Label */ 
          case_220: /* CIL Label */ 
          case_221: /* CIL Label */ 
          case_222: /* CIL Label */ 
          case_223: /* CIL Label */ 
          case_189: /* CIL Label */ 
          case_243: /* CIL Label */ 
          case_242: /* CIL Label */ 
          case_190: /* CIL Label */ 
          case_241: /* CIL Label */ 
          case_240: /* CIL Label */ 
          case_255: /* CIL Label */ 
          case_191: /* CIL Label */ 
          case_188: /* CIL Label */ 
#line 1751
          pes_start = 1;
#line 1752
          goto switch_break;
          switch_default: /* CIL Label */ 
#line 1755
          goto switch_break;
          switch_break: /* CIL Label */ ;
          }
        }
      }
    }
  }
  {
#line 1758
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1758
    if (! (c < length)) {
#line 1758
      goto while_break;
    }
    {
#line 1759
    memset((void *)(obuf), 0, (size_t )188);
    }
#line 1760
    if (length - c >= 184L) {
      {
#line 1761
      l = write_ts_header(pid___0, counter, pes_start, obuf, (uint8_t )184);
#line 1763
      memcpy((void */* __restrict  */)(obuf + l), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )(188 - l));
#line 1764
      c += (long )(188 - l);
      }
    } else {
      {
#line 1766
      l = write_ts_header(pid___0, counter, pes_start, obuf, (uint8_t )(length - c));
#line 1768
      memcpy((void */* __restrict  */)(obuf + l), (void const   */* __restrict  */)(buf___5 + c),
             (size_t )(188 - l));
#line 1769
      c = length;
      }
    }
    {
#line 1771
    (*ts_write)((u8 const   *)(obuf));
#line 1772
    pes_start = 0;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1774
  return;
}
}
#line 1777 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int write_ps_header(uint8_t *buf___5 , uint32_t SCR___0 , long muxr___0 , uint8_t audio_bound ,
                    uint8_t fixed , uint8_t CSPS , uint8_t audio_lock , uint8_t video_lock ,
                    uint8_t video_bound , uint8_t stream1 , uint8_t buffer1_scale ,
                    uint32_t buffer1_size , uint8_t stream2 , uint8_t buffer2_scale ,
                    uint32_t buffer2_size ) 
{ 
  ps_packet p ;
  uint8_t *pts ;
  long lpts ;
  uint32_t tmp ;

  {
  {
#line 1796
  init_ps(& p);
#line 1798
  tmp = htonl(SCR___0);
#line 1798
  lpts = (long )tmp;
#line 1799
  pts = (uint8_t *)(& lpts);
#line 1802
  p.mpeg = 2;
#line 1804
  p.scr[0] = (u8 )68;
#line 1805
  p.scr[1] = (u8 )0;
#line 1806
  p.scr[2] = (u8 )4;
#line 1807
  p.scr[3] = (u8 )0;
#line 1808
  p.scr[4] = (u8 )4;
#line 1809
  p.scr[5] = (u8 )1;
#line 1812
  p.scr[0] = (u8 )((68 | (((int )*(pts + 0) >> 3) & 24)) | (((int )*(pts + 0) >> 4) & 3));
#line 1813
  p.scr[1] = (u8 )((((int )*(pts + 0) << 4) & 240) | (((int )*(pts + 1) >> 4) & 15));
#line 1814
  p.scr[2] = (u8 )(((4 | (((int )*(pts + 1) << 4) & 240)) | (((int )*(pts + 2) >> 4) & 8)) | (((int )*(pts + 2) >> 5) & 3));
#line 1816
  p.scr[3] = (u8 )((((int )*(pts + 2) << 3) & 248) | (((int )*(pts + 3) >> 5) & 7));
#line 1817
  p.scr[4] = (u8 )(4 | (((int )*(pts + 3) << 3) & 248));
#line 1818
  p.scr[5] = (u8 )1;
#line 1820
  p.mux_rate[0] = (uint8_t )(muxr___0 >> 14);
#line 1821
  p.mux_rate[1] = (uint8_t )(255L & (muxr___0 >> 6));
#line 1822
  p.mux_rate[2] = (uint8_t )(3L | ((muxr___0 & 63L) << 2));
#line 1824
  p.stuff_length = (u8 )248;
  }
#line 1826
  if (stream1) {
#line 1826
    if (stream2) {
      {
#line 1827
      p.sheader_llength[0] = (u8 )0;
#line 1828
      p.sheader_llength[1] = (u8 )12;
#line 1830
      setl_ps(& p);
#line 1832
      p.rate_bound[0] = (uint8_t )(128L | (muxr___0 >> 15));
#line 1833
      p.rate_bound[1] = (uint8_t )(255L & (muxr___0 >> 7));
#line 1834
      p.rate_bound[2] = (uint8_t )(1L | ((muxr___0 & 127L) << 1));
#line 1837
      p.audio_bound = (uint8_t )((((int )audio_bound << 2) | ((int )fixed << 1)) | (int )CSPS);
#line 1838
      p.video_bound = (uint8_t )(((((int )audio_lock << 7) | ((int )video_lock << 6)) | 32) | (int )video_bound);
#line 1840
      p.reserved = (uint8_t )(255 >> 1);
#line 1842
      *(p.data + 0) = stream2;
#line 1843
      *(p.data + 1) = (uint8_t )((unsigned int )(192 | ((int )buffer2_scale << 5)) | (buffer2_size >> 8));
#line 1845
      *(p.data + 2) = (uint8_t )(buffer2_size & 255U);
#line 1846
      *(p.data + 3) = stream1;
#line 1847
      *(p.data + 4) = (uint8_t )((unsigned int )(192 | ((int )buffer1_scale << 5)) | (buffer1_size >> 8));
#line 1849
      *(p.data + 5) = (uint8_t )(buffer1_size & 255U);
#line 1851
      cwrite_ps(buf___5, & p, 32L);
#line 1852
      kill_ps(& p);
      }
#line 1853
      return (32);
    } else {
      {
#line 1855
      cwrite_ps(buf___5, & p, 14L);
#line 1856
      kill_ps(& p);
      }
#line 1857
      return (14);
    }
  } else {
    {
#line 1855
    cwrite_ps(buf___5, & p, 14L);
#line 1856
    kill_ps(& p);
    }
#line 1857
    return (14);
  }
}
}
#line 1867 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int break_up_filename(char *name___0 , char *base_name , char *path , char *ext ) 
{ 
  int l ;
  int i ;
  int sstop ;
  int sstart ;
  size_t tmp ;

  {
  {
#line 1871
  tmp = strlen((char const   *)name___0);
#line 1871
  l = (int )tmp;
#line 1872
  sstop = l;
#line 1873
  sstart = -1;
#line 1874
  i = l - 1;
  }
  {
#line 1874
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1874
    if (! (i >= 0)) {
#line 1874
      goto while_break;
    }
#line 1875
    if (sstop == l) {
#line 1875
      if ((int )*(name___0 + i) == 46) {
#line 1875
        sstop = i;
      }
    }
#line 1876
    if (sstart < 0) {
#line 1876
      if ((int )*(name___0 + i) == 47) {
#line 1876
        sstart = i + 1;
      }
    }
#line 1874
    i --;
  }
  while_break: /* CIL Label */ ;
  }
#line 1878
  if (sstart < 0) {
#line 1878
    sstart = 0;
  }
#line 1879
  if (sstop - sstart < 80) {
    {
#line 1880
    strncpy((char */* __restrict  */)base_name, (char const   */* __restrict  */)(name___0 + sstart),
            (size_t )(sstop - sstart));
#line 1881
    *(base_name + (sstop - sstart)) = (char)0;
    }
#line 1882
    if (sstart > 0) {
#line 1883
      if ((l - sstop) + sstart < 256) {
        {
#line 1884
        strncpy((char */* __restrict  */)path, (char const   */* __restrict  */)name___0,
                (size_t )sstart);
#line 1885
        *(path + sstart) = (char)0;
        }
      } else {
        {
#line 1887
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"PATH too long\n");
        }
#line 1888
        return (-1);
      }
    } else {
      {
#line 1892
      strcpy((char */* __restrict  */)path, (char const   */* __restrict  */)"./");
      }
    }
#line 1895
    if (sstop < l) {
#line 1896
      if ((l - sstop) - 1 < 10) {
        {
#line 1897
        strncpy((char */* __restrict  */)ext, (char const   */* __restrict  */)((name___0 + sstop) + 1),
                (size_t )((l - sstop) - 1));
#line 1898
        *(ext + ((l - sstop) - 1)) = (char)0;
        }
      } else {
        {
#line 1900
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Extension too long\n");
        }
#line 1901
        return (-1);
      }
    } else {
      {
#line 1905
      strcpy((char */* __restrict  */)ext, (char const   */* __restrict  */)"");
      }
    }
  } else {
    {
#line 1909
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Name too long\n");
    }
#line 1910
    return (-1);
  }
#line 1919
  return (0);
}
}
#line 1923 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int seek_mpg_start(uint8_t *buf___5 , int size ) 
{ 
  int found ;
  int c ;
  int seq ;
  int mpeg ;
  int mark ;

  {
#line 1925
  found = 0;
#line 1926
  c = 0;
#line 1927
  seq = 0;
#line 1928
  mpeg = 0;
#line 1929
  mark = 0;
  {
#line 1931
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1931
    if (! (! seq)) {
#line 1931
      goto while_break;
    }
    {
#line 1932
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 1932
      if (! (found != 4)) {
#line 1932
        goto while_break___0;
      }
      {
#line 1934
      if (found == 0) {
#line 1934
        goto case_0;
      }
#line 1938
      if (found == 1) {
#line 1938
        goto case_1;
      }
#line 1943
      if (found == 2) {
#line 1943
        goto case_2;
      }
#line 1950
      if (found == 3) {
#line 1950
        goto case_3;
      }
#line 1933
      goto switch_break;
      case_0: /* CIL Label */ 
#line 1935
      if ((int )*(buf___5 + c) == 0) {
#line 1935
        found ++;
      }
#line 1936
      c ++;
#line 1937
      goto switch_break;
      case_1: /* CIL Label */ 
#line 1939
      if ((int )*(buf___5 + c) == 0) {
#line 1939
        found ++;
      } else {
#line 1940
        found = 0;
      }
#line 1941
      c ++;
#line 1942
      goto switch_break;
      case_2: /* CIL Label */ 
#line 1944
      if ((int )*(buf___5 + c) == 1) {
#line 1944
        found ++;
      } else {
#line 1945
        found = 0;
      }
#line 1946
      if ((int )*(buf___5 + c) == 0) {
#line 1946
        found = 2;
      }
#line 1947
      c ++;
#line 1948
      goto switch_break;
      case_3: /* CIL Label */ 
#line 1951
      if (((int )*(buf___5 + c) & 224) == 224) {
#line 1951
        found ++;
      } else {
#line 1952
        found = 0;
      }
#line 1953
      c ++;
#line 1954
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
#line 1956
      if (c >= size) {
#line 1956
        return (-1);
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 1959
    if (found == 4) {
#line 1960
      mark = c - 4;
#line 1961
      c += 2;
#line 1962
      if (c >= size) {
#line 1962
        return (-1);
      }
#line 1964
      if (((int )*(buf___5 + c) & 192) == 128) {
#line 1965
        mpeg = 2;
#line 1966
        c += 2;
#line 1967
        if (c >= size) {
#line 1967
          return (-1);
        }
#line 1968
        c += (int )*(buf___5 + c) + 1;
#line 1969
        if (c >= size) {
#line 1969
          return (-1);
        }
      } else {
#line 1971
        mpeg = 1;
        {
#line 1972
        while (1) {
          while_continue___1: /* CIL Label */ ;
#line 1972
          if (! ((int )*(buf___5 + c) == 255)) {
#line 1972
            goto while_break___1;
          }
#line 1973
          c ++;
#line 1974
          if (c >= size) {
#line 1974
            return (-1);
          }
        }
        while_break___1: /* CIL Label */ ;
        }
#line 1976
        if (((int )*(buf___5 + c) & 192) == 64) {
#line 1976
          c += 2;
        }
#line 1977
        if (c >= size) {
#line 1977
          return (-1);
        }
#line 1978
        if ((int )*(buf___5 + c) & 48) {
#line 1979
          if (((int )*(buf___5 + c) & 48) == 32) {
#line 1979
            c += 5;
          } else {
#line 1980
            c += 10;
          }
        } else {
#line 1981
          c ++;
        }
#line 1982
        if (c >= size) {
#line 1982
          return (-1);
        }
      }
#line 1985
      if ((int )*(buf___5 + c) == 0) {
#line 1985
        if ((int )*(buf___5 + (c + 1)) == 0) {
#line 1985
          if ((int )*(buf___5 + (c + 2)) == 1) {
#line 1985
            if ((int )*(buf___5 + (c + 3)) == 179) {
#line 1989
              seq = 1;
            }
          }
        }
      }
    }
#line 1991
    found = 0;
  }
  while_break: /* CIL Label */ ;
  }
#line 1994
  return (size - mark);
}
}
#line 1998 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_mpg(int fstart , uint64_t length , int fdin , int fdout ) 
{ 
  uint8_t *buf___5 ;
  uint64_t l ;
  uint64_t count ;
  struct stat sb ;
  int buf_size ;
  void *tmp ;
  ssize_t tmp___0 ;

  {
  {
#line 2002
  l = (uint64_t )0;
#line 2003
  count = (uint64_t )0;
#line 2007
  fstat(fdout, & sb);
#line 2008
  buf_size = (int )sb.st_blksize;
#line 2010
  tmp = __builtin_alloca((unsigned long )buf_size + sizeof(int ));
#line 2010
  buf___5 = (uint8_t *)((char *)tmp);
#line 2012
  lseek(fdin, (__off64_t )fstart, 0);
  }
  {
#line 2014
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2014
    if (count < length) {
      {
#line 2014
      tmp___0 = read(fdin, (void *)buf___5, (size_t )buf_size);
#line 2014
      l = (uint64_t )tmp___0;
      }
#line 2014
      if (! (l >= 0UL)) {
#line 2014
        goto while_break;
      }
    } else {
#line 2014
      goto while_break;
    }
#line 2015
    if (l > 0UL) {
#line 2015
      count += l;
    }
    {
#line 2016
    write(fdout, (void const   *)buf___5, l);
#line 2017
    printf((char const   */* __restrict  */)"written %02.2f%%\r", (100. * (double )count) / (double )length);
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 2019
  printf((char const   */* __restrict  */)"\n");
  }
#line 2022
  return;
}
}
#line 2027 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void split_mpg(char *name___0 , uint64_t size ) 
{ 
  char base_name[80] ;
  char path[256] ;
  char ext[10] ;
  char new_name[256] ;
  uint8_t buf___5[1048576] ;
  int fdin ;
  int fdout ;
  uint64_t length ;
  uint64_t last ;
  int i ;
  int mark ;
  int csize ;
  struct stat sb ;
  int tmp ;

  {
  {
#line 2036
  length = (uint64_t )0;
#line 2042
  tmp = break_up_filename(name___0, base_name, path, ext);
  }
#line 2042
  if (tmp < 0) {
    {
#line 2042
    exit(1);
    }
  }
  {
#line 2045
  fdin = open((char const   *)name___0, 0);
  }
#line 2045
  if (fdin < 0) {
    {
#line 2046
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
            name___0);
#line 2047
    exit(1);
    }
  }
  {
#line 2050
  fstat(fdin, & sb);
#line 2052
  length = (uint64_t )sb.st_size;
  }
#line 2053
  if (length < 1073741824UL) {
    {
#line 2054
    printf((char const   */* __restrict  */)"Filelength = %2.2f MB\n", ((double )length / 1024.) / 1024.);
    }
  } else {
    {
#line 2056
    printf((char const   */* __restrict  */)"Filelength = %2.2f GB\n", (((double )length / 1024.) / 1024.) / 1024.);
    }
  }
#line 2058
  if (length < size) {
#line 2058
    length = size;
  }
  {
#line 2060
  printf((char const   */* __restrict  */)"Splitting %s into Files with size <= %2.2f MB\n",
         name___0, ((double )size / 1024.) / 1024.);
#line 2063
  csize = 1048576;
#line 2064
  read(fdin, (void *)(buf___5), (size_t )csize);
#line 2065
  mark = seek_mpg_start(buf___5, csize);
  }
#line 2065
  if (mark < 0) {
    {
#line 2066
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t find sequence header\n");
#line 2067
    exit(1);
    }
  }
#line 2070
  last = (uint64_t )(csize - mark);
#line 2072
  i = 0;
  {
#line 2072
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2072
    if (! ((uint64_t )i < length / size)) {
#line 2072
      goto while_break;
    }
#line 2073
    csize = 1048576;
#line 2075
    if ((uint64_t )csize > length - last) {
#line 2075
      csize = (int )(length - last);
    }
    {
#line 2076
    lseek(fdin, (__off64_t )((last + size) - (uint64_t )csize), 0);
#line 2077
    read(fdin, (void *)(buf___5), (size_t )csize);
#line 2078
    mark = seek_mpg_start(buf___5, csize);
    }
#line 2078
    if (mark < 0) {
      {
#line 2079
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t find sequence header\n");
#line 2080
      exit(1);
      }
    }
    {
#line 2083
    sprintf((char */* __restrict  */)(new_name), (char const   */* __restrict  */)"%s-%03d.%s",
            base_name, i, ext);
#line 2084
    printf((char const   */* __restrict  */)"writing %s\n", new_name);
#line 2086
    fdout = open((char const   *)(new_name), 577, (((384 | (256 >> 3)) | (128 >> 3)) | ((256 >> 3) >> 3)) | ((128 >> 3) >> 3));
    }
#line 2086
    if (fdout < 0) {
      {
#line 2090
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
              new_name);
#line 2091
      exit(1);
      }
    }
    {
#line 2093
    write_mpg((int )last, size - (uint64_t )mark, fdin, fdout);
#line 2094
    last = (last + size) - (uint64_t )mark;
#line 2072
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 2096
  sprintf((char */* __restrict  */)(new_name), (char const   */* __restrict  */)"%s-%03d.%s",
          base_name, i, ext);
#line 2097
  printf((char const   */* __restrict  */)"writing %s\n", new_name);
#line 2099
  fdout = open((char const   *)(new_name), 577, (((384 | (256 >> 3)) | (128 >> 3)) | ((256 >> 3) >> 3)) | ((128 >> 3) >> 3));
  }
#line 2099
  if (fdout < 0) {
    {
#line 2103
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
            new_name);
#line 2104
    exit(1);
    }
  }
  {
#line 2106
  write_mpg((int )last, length - last, fdin, fdout);
  }
#line 2107
  return;
}
}
#line 2112 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void cut_mpg(char *name___0 , uint64_t size ) 
{ 
  char base_name[80] ;
  char path[256] ;
  char ext[10] ;
  char new_name[256] ;
  uint8_t buf___5[1048576] ;
  int fdin ;
  int fdout ;
  uint64_t length ;
  uint64_t last ;
  int mark ;
  int csize ;
  struct stat sb ;
  int tmp ;

  {
  {
#line 2121
  length = (uint64_t )0;
#line 2126
  tmp = break_up_filename(name___0, base_name, path, ext);
  }
#line 2126
  if (tmp < 0) {
    {
#line 2126
    exit(1);
    }
  }
  {
#line 2129
  fdin = open((char const   *)name___0, 0);
  }
#line 2129
  if (fdin < 0) {
    {
#line 2130
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
            name___0);
#line 2131
    exit(1);
    }
  }
  {
#line 2134
  fstat(fdin, & sb);
#line 2136
  length = (uint64_t )sb.st_size;
  }
#line 2137
  if (length < 1073741824UL) {
    {
#line 2138
    printf((char const   */* __restrict  */)"Filelength = %2.2f MB\n", ((double )length / 1024.) / 1024.);
    }
  } else {
    {
#line 2140
    printf((char const   */* __restrict  */)"Filelength = %2.2f GB\n", (((double )length / 1024.) / 1024.) / 1024.);
    }
  }
#line 2142
  if (length < size) {
#line 2142
    length = size;
  }
  {
#line 2144
  printf((char const   */* __restrict  */)"Splitting %s into 2 Files with length %.2f MB and %.2f MB\n",
         name___0, ((double )size / 1024.) / 1024., ((double )(length - size) / 1024.) / 1024.);
#line 2147
  csize = 1048576;
#line 2148
  read(fdin, (void *)(buf___5), (size_t )csize);
#line 2149
  mark = seek_mpg_start(buf___5, csize);
  }
#line 2149
  if (mark < 0) {
    {
#line 2150
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t find sequence header\n");
#line 2151
    exit(1);
    }
  }
#line 2154
  last = (uint64_t )(csize - mark);
#line 2156
  if ((uint64_t )csize > length - last) {
#line 2156
    csize = (int )(length - last);
  }
  {
#line 2157
  lseek(fdin, (__off64_t )((last + size) - (uint64_t )csize), 0);
#line 2158
  read(fdin, (void *)(buf___5), (size_t )csize);
#line 2159
  mark = seek_mpg_start(buf___5, csize);
  }
#line 2159
  if (mark < 0) {
    {
#line 2160
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Couldn\'t find sequence header\n");
#line 2161
    exit(1);
    }
  }
  {
#line 2164
  sprintf((char */* __restrict  */)(new_name), (char const   */* __restrict  */)"%s-1.%s",
          base_name, ext);
#line 2165
  printf((char const   */* __restrict  */)"writing %s\n", new_name);
#line 2167
  fdout = open((char const   *)(new_name), 577, (((384 | (256 >> 3)) | (128 >> 3)) | ((256 >> 3) >> 3)) | ((128 >> 3) >> 3));
  }
#line 2167
  if (fdout < 0) {
    {
#line 2171
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
            new_name);
#line 2172
    exit(1);
    }
  }
  {
#line 2174
  write_mpg((int )last, size - (uint64_t )mark, fdin, fdout);
#line 2175
  last = (last + size) - (uint64_t )mark;
#line 2177
  sprintf((char */* __restrict  */)(new_name), (char const   */* __restrict  */)"%s-2.%s",
          base_name, ext);
#line 2178
  printf((char const   */* __restrict  */)"writing %s\n", new_name);
#line 2180
  fdout = open((char const   *)(new_name), 577, (((384 | (256 >> 3)) | (128 >> 3)) | ((256 >> 3) >> 3)) | ((128 >> 3) >> 3));
  }
#line 2180
  if (fdout < 0) {
    {
#line 2184
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Can\'t open %s\n",
            new_name);
#line 2185
    exit(1);
    }
  }
  {
#line 2187
  write_mpg((int )last, length - last, fdin, fdout);
  }
#line 2188
  return;
}
}
#line 2193 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void write_all(int fd___0 , uint8_t *data , int length ) 
{ 
  int r ;
  ssize_t tmp ;

  {
  {
#line 2197
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2197
    if (! length) {
#line 2197
      goto while_break;
    }
    {
#line 2198
    tmp = write(fd___0, (void const   *)data, (size_t )length);
#line 2198
    r = (int )tmp;
    }
#line 2198
    if (r > 0) {
#line 2199
      data += r;
#line 2200
      length -= r;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 2203
  return;
}
}
#line 2207 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
void read_all(int fd___0 , uint8_t *data , int length ) 
{ 
  int c ;
  ssize_t tmp ;

  {
#line 2209
  c = 0;
  {
#line 2211
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 2212
    tmp = read(fd___0, (void *)(data + c), (size_t )1);
    }
#line 2212
    if (tmp == 1L) {
#line 2213
      c ++;
#line 2214
      if ((int )*(data + (c - 1)) == 10) {
#line 2215
        *(data + c) = (uint8_t )0;
#line 2216
        goto while_break;
      }
    } else {
      {
#line 2220
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Error reading socket\n");
#line 2221
      exit(1);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 2224
  return;
}
}
#line 2228 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
char *url2host(uint8_t *url , char **name___0 , uint32_t *ip , uint32_t *port ) 
{ 
  uint8_t *murl ;
  struct hostent *hoste ;
  struct in_addr haddr ;
  int found_ip ;
  int tmp ;
  uint32_t tmp___0 ;
  int tmp___1 ;

  {
  {
#line 2233
  found_ip = 1;
#line 2235
  tmp = strncmp((char const   *)url, "http://", (size_t )7);
  }
#line 2235
  if (! tmp) {
#line 2236
    url += 7;
  }
  {
#line 2238
  *name___0 = strdup((char const   *)url);
  }
#line 2239
  if (! *name___0) {
#line 2240
    *name___0 = (char *)((void *)0);
#line 2241
    return ((char *)((void *)0));
  }
#line 2244
  murl = url;
  {
#line 2245
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2245
    if (*murl) {
#line 2245
      if ((int )*murl != 58) {
#line 2245
        if (! ((int )*murl != 47)) {
#line 2245
          goto while_break;
        }
      } else {
#line 2245
        goto while_break;
      }
    } else {
#line 2245
      goto while_break;
    }
#line 2246
    if ((int )*murl < 48) {
#line 2246
      goto _L;
    } else
#line 2246
    if ((int )*murl > 57) {
      _L: /* CIL Label */ 
#line 2246
      if ((int )*murl != 46) {
#line 2247
        found_ip = 0;
      }
    }
#line 2248
    murl ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2251
  *(*name___0 + (murl - url)) = (char)0;
#line 2252
  if (found_ip) {
    {
#line 2253
    tmp___0 = inet_addr((char const   *)*name___0);
#line 2253
    *ip = tmp___0;
    }
#line 2253
    if (tmp___0 == 4294967295U) {
#line 2254
      return ((char *)((void *)0));
    }
  } else {
    {
#line 2256
    hoste = gethostbyname((char const   *)*name___0);
    }
#line 2256
    if (! hoste) {
#line 2257
      return ((char *)((void *)0));
    }
    {
#line 2258
    memcpy((void */* __restrict  */)(& haddr), (void const   */* __restrict  */)*(hoste->h_addr_list + 0),
           sizeof(haddr));
#line 2259
    *ip = haddr.s_addr;
    }
  }
#line 2262
  if (! *murl) {
#line 2263
    *port = (uint32_t )80;
#line 2264
    return ((char *)murl);
  } else
#line 2262
  if ((int )*murl == 47) {
#line 2263
    *port = (uint32_t )80;
#line 2264
    return ((char *)murl);
  }
  {
#line 2266
  murl ++;
#line 2266
  tmp___1 = atoi((char const   *)murl);
#line 2266
  *port = (uint32_t )tmp___1;
  }
  {
#line 2268
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2268
    if (*murl) {
#line 2268
      if (! ((int )*murl != 47)) {
#line 2268
        goto while_break___0;
      }
    } else {
#line 2268
      goto while_break___0;
    }
#line 2269
    murl ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2270
  return ((char *)murl);
}
}
#line 2275 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/mpegtools/ctools.c"
int http_open(char *url ) 
{ 
  char purl[1024] ;
  char *host ;
  char req[1024] ;
  char *sptr ;
  uint32_t ip ;
  uint32_t port ;
  int sock ;
  int reloc ;
  int relocnum ;
  struct sockaddr_in server ;
  int mfd ;
  size_t tmp ;
  size_t tmp___0 ;
  int tmp___1 ;
  size_t tmp___2 ;
  FILE *tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;

  {
  {
#line 2281
  relocnum = 0;
#line 2285
  strncpy((char */* __restrict  */)(purl), (char const   */* __restrict  */)url, (size_t )1023);
#line 2286
  purl[1023] = (char )'\000';
  }
  {
#line 2288
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 2289
    host = (char *)((void *)0);
#line 2290
    strcpy((char */* __restrict  */)(req), (char const   */* __restrict  */)"GET ");
#line 2291
    sptr = url2host((uint8_t *)(purl), & host, & ip, & port);
    }
#line 2291
    if (! sptr) {
      {
#line 2292
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Unknown host\n");
#line 2293
      exit(1);
      }
    }
    {
#line 2295
    strcat((char */* __restrict  */)(req), (char const   */* __restrict  */)sptr);
#line 2296
    tmp = strlen((char const   *)(req));
#line 2296
    sprintf((char */* __restrict  */)(req + tmp), (char const   */* __restrict  */)" HTTP/1.0\r\nUser-Agent: %s/%s\r\n",
            "whatever", "you want");
    }
#line 2299
    if (host) {
      {
#line 2300
      tmp___0 = strlen((char const   *)(req));
#line 2300
      sprintf((char */* __restrict  */)(req + tmp___0), (char const   */* __restrict  */)"Host: %s:%u\r\n",
              host, port);
#line 2302
      free((void *)host);
      }
    }
    {
#line 2305
    strcat((char */* __restrict  */)(req), (char const   */* __restrict  */)"Accept: video/mpeg, video/x-mpegurl, */*\r\n");
#line 2306
    strcat((char */* __restrict  */)(req), (char const   */* __restrict  */)"\r\n");
#line 2308
    server.sin_port = htons((uint16_t )port);
#line 2309
    server.sin_family = (sa_family_t )2;
#line 2310
    server.sin_addr.s_addr = ip;
#line 2312
    sock = socket(2, 1, 6);
    }
#line 2312
    if (sock < 0) {
      {
#line 2313
      perror("socket");
#line 2314
      exit(1);
      }
    }
    {
#line 2317
    tmp___1 = connect(sock, (struct sockaddr  const  *)((struct sockaddr *)(& server)),
                      (socklen_t )sizeof(server));
    }
#line 2317
    if (tmp___1) {
      {
#line 2319
      perror("connect");
#line 2320
      exit(1);
      }
    }
    {
#line 2323
    tmp___2 = strlen((char const   *)(req));
#line 2323
    write_all(sock, (uint8_t *)(req), (int )tmp___2);
#line 2324
    tmp___3 = fdopen(sock, "rb");
#line 2324
    mfd = fileno(tmp___3);
    }
#line 2324
    if (! mfd) {
      {
#line 2325
      perror("open");
#line 2326
      exit(1);
      }
    }
    {
#line 2328
    reloc = 0;
#line 2329
    purl[0] = (char )'\000';
#line 2330
    read_all(mfd, (uint8_t *)(req), 1023);
#line 2331
    sptr = strchr((char const   *)(req), ' ');
    }
#line 2331
    if (sptr) {
      {
#line 2333
      if ((int )*(sptr + 1) == 50) {
#line 2333
        goto case_50;
      }
#line 2335
      if ((int )*(sptr + 1) == 51) {
#line 2335
        goto case_51;
      }
#line 2337
      goto switch_default;
      case_50: /* CIL Label */ 
#line 2334
      goto switch_break;
      case_51: /* CIL Label */ 
#line 2336
      reloc = 1;
      switch_default: /* CIL Label */ 
      {
#line 2338
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"HTTP req failed:%s",
              sptr + 1);
#line 2340
      exit(1);
      }
      switch_break: /* CIL Label */ ;
      }
    }
    {
#line 2343
    while (1) {
      while_continue___0: /* CIL Label */ ;
      {
#line 2344
      read_all(mfd, (uint8_t *)(req), 1023);
#line 2345
      tmp___4 = strncmp((char const   *)(req), "Location:", (size_t )9);
      }
#line 2345
      if (! tmp___4) {
        {
#line 2346
        strncpy((char */* __restrict  */)(purl), (char const   */* __restrict  */)(req + 10),
                (size_t )1023);
        }
      }
#line 2343
      if ((int )req[0] != 13) {
#line 2343
        if (! ((int )req[0] != 10)) {
#line 2343
          goto while_break___0;
        }
      } else {
#line 2343
        goto while_break___0;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 2288
    if (reloc) {
#line 2288
      if (purl[0]) {
#line 2288
        tmp___5 = relocnum;
#line 2288
        relocnum ++;
#line 2288
        if (! (tmp___5 < 3)) {
#line 2288
          goto while_break;
        }
      } else {
#line 2288
        goto while_break;
      }
    } else {
#line 2288
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 2349
  if (reloc) {
    {
#line 2350
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Too many HTTP relocations.\n");
#line 2351
    exit(1);
    }
  }
#line 2354
  return (sock);
}
}
#line 709 "/usr/include/stdio.h"
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
#line 715
extern size_t fwrite(void const   * __restrict  __ptr , size_t __size , size_t __n ,
                     FILE * __restrict  __s ) ;
#line 83 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf___1[1600]  ;
#line 163 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf___2[1600]  ;
#line 57 "/usr/include/getopt.h"
extern char *optarg ;
#line 173
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getopt_long)(int ___argc ,
                                                                                  char * const  *___argv ,
                                                                                  char const   *__shortopts ,
                                                                                  struct option  const  *__longopts ,
                                                                                  int *__longind ) ;
#line 46 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtpfeed.c"
void dumprtp(int socket___0 , int fd_dvr ) 
{ 
  char *buf___5 ;
  struct rtpheader rh ;
  int lengthData ;
  int written ;
  ssize_t tmp ;

  {
  {
#line 52
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 53
    getrtp2(socket___0, & rh, & buf___5, & lengthData);
#line 55
    written = 0;
    }
    {
#line 56
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 56
      if (! (written < lengthData)) {
#line 56
        goto while_break___0;
      }
      {
#line 57
      tmp = write(fd_dvr, (void const   *)(buf___5 + written), (size_t )(lengthData - written));
#line 57
      written = (int )((ssize_t )written + tmp);
      }
    }
    while_break___0: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
}
}
#line 99 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtpfeed.c"
static struct option long_options[6]  = {      {"group", 1, (int *)((void *)0), 'g'}, 
        {"port", 1, (int *)((void *)0), 'p'}, 
        {"vpid", 1, (int *)((void *)0), 'v'}, 
        {"apid", 1, (int *)((void *)0), 'a'}, 
        {"help", 0, (int *)((void *)0), 'h'}, 
        {(char const   *)0, 0, (int *)0, 0}};
#line 83 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf___3[1600]  ;
#line 163 "/home/june/repo/benchmarks/collector/temp/dvbstream-0.6+cvs20090621/rtp.c"
static char buf___4[1600]  ;
