/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 30 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned char __u_char;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 33 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __u_char u_char;
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 23 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned char cc_t;
#line 24 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned int speed_t;
#line 25 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned int tcflag_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/termios.h"
struct termios {
   tcflag_t c_iflag ;
   tcflag_t c_oflag ;
   tcflag_t c_cflag ;
   tcflag_t c_lflag ;
   cc_t c_line ;
   cc_t c_cc[32] ;
   speed_t c_ispeed ;
   speed_t c_ospeed ;
};
#line 31 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned short __u_short;
#line 32 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __u_int;
#line 124 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __dev_t;
#line 125 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __uid_t;
#line 126 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __gid_t;
#line 127 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __ino_t;
#line 129 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __mode_t;
#line 130 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned long __nlink_t;
#line 133 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef int __pid_t;
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 141 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __suseconds_t;
#line 153 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __blksize_t;
#line 158 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __blkcnt_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 175 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __syscall_slong_t;
#line 189 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __socklen_t;
#line 120 "/usr/include/time.h"
struct timespec {
   __time_t tv_sec ;
   __syscall_slong_t tv_nsec ;
};
#line 46 "/usr/include/x86_64-linux-gnu/bits/stat.h"
struct stat {
   __dev_t st_dev ;
   __ino_t st_ino ;
   __nlink_t st_nlink ;
   __mode_t st_mode ;
   __uid_t st_uid ;
   __gid_t st_gid ;
   int __pad0 ;
   __dev_t st_rdev ;
   __off_t st_size ;
   __blksize_t st_blksize ;
   __blkcnt_t st_blocks ;
   struct timespec st_atim ;
   struct timespec st_mtim ;
   struct timespec st_ctim ;
   __syscall_slong_t __glibc_reserved[3] ;
};
#line 34 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __u_short u_short;
#line 35 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __u_int u_int;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 75 "/usr/include/time.h"
typedef __time_t time_t;
#line 201 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef unsigned short u_int16_t;
#line 30 "/usr/include/x86_64-linux-gnu/bits/time.h"
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
#line 54 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef long __fd_mask;
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
struct __anonstruct_fd_set_3 {
   __fd_mask __fds_bits[1024 / (8 * (int )sizeof(__fd_mask ))] ;
};
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef struct __anonstruct_fd_set_3 fd_set;
#line 85 "/usr/include/signal.h"
typedef void (*__sighandler_t)(int  );
#line 33 "/usr/include/x86_64-linux-gnu/bits/socket.h"
typedef __socklen_t socklen_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/sockaddr.h"
typedef unsigned short sa_family_t;
#line 149 "/usr/include/x86_64-linux-gnu/bits/socket.h"
struct sockaddr {
   sa_family_t sa_family ;
   char sa_data[14] ;
};
#line 29 "/usr/include/x86_64-linux-gnu/sys/un.h"
struct sockaddr_un {
   sa_family_t sun_family ;
   char sun_path[108] ;
};
#line 49 "/usr/include/stdint.h"
typedef unsigned short uint16_t;
#line 51 "/usr/include/stdint.h"
typedef unsigned int uint32_t;
#line 30 "/usr/include/netinet/in.h"
typedef uint32_t in_addr_t;
#line 31 "/usr/include/netinet/in.h"
struct in_addr {
   in_addr_t s_addr ;
};
#line 117 "/usr/include/netinet/in.h"
typedef uint16_t in_port_t;
#line 237 "/usr/include/netinet/in.h"
struct sockaddr_in {
   sa_family_t sin_family ;
   in_port_t sin_port ;
   struct in_addr sin_addr ;
   unsigned char sin_zero[((sizeof(struct sockaddr ) - sizeof(unsigned short )) - sizeof(in_port_t )) - sizeof(struct in_addr )] ;
};
#line 100 "/usr/include/netdb.h"
struct hostent {
   char *h_name ;
   char **h_aliases ;
   int h_addrtype ;
   int h_length ;
   char **h_addr_list ;
};
#line 49 "/usr/include/pwd.h"
struct passwd {
   char *pw_name ;
   char *pw_passwd ;
   __uid_t pw_uid ;
   __gid_t pw_gid ;
   char *pw_gecos ;
   char *pw_dir ;
   char *pw_shell ;
};
#line 47 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.h"
struct ttyprot {
   u_int16_t f ;
   u_int16_t i ;
   u_char c[468] ;
};
#line 47 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.h"
typedef struct ttyprot ttyprot;
#line 60 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
enum __anonenum_type_59 {
    local = 0,
    remote = 1
} ;
#line 60
enum __anonenum_state_60 {
    wlogin = 0,
    wpasswd = 1,
    auth = 2
} ;
#line 60 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct whoson {
   char *who ;
   char *host ;
   char *auth ;
   time_t lastInput ;
   enum __anonenum_type_59 type ;
   enum __anonenum_state_60 state ;
   int aux ;
};
#line 798 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct partab {
   char *parity ;
   int sysparity ;
};
#line 805 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct cstab {
   int wordsize ;
   int syswordsize ;
};
#line 813 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct baudtab {
   int baud ;
   int sysbaud ;
};
#line 183 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef char *__caddr_t;
#line 116 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __caddr_t caddr_t;
#line 43 "/usr/include/x86_64-linux-gnu/bits/uio.h"
struct iovec {
   void *iov_base ;
   size_t iov_len ;
};
#line 246 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
enum __anonenum_state_55 {
    base = 0,
    need_cr = 1,
    tilde = 2
} ;
#line 137 "/usr/include/fcntl.h"
extern int fcntl(int __fd , int __cmd  , ...) ;
#line 79 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) unsigned short const   **( __attribute__((__leaf__)) __ctype_b_loc)(void)  __attribute__((__const__)) ;
#line 356 "/usr/include/stdio.h"
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 573
extern int fputc(int __c , FILE *__stream ) ;
#line 846
extern void perror(char const   *__s ) ;
#line 176 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strdup)(char const   *__s )  __attribute__((__malloc__)) ;
#line 70 "/usr/include/termios.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tcsetattr)(int __fd ,
                                                                                int __optional_actions ,
                                                                                struct termios  const  *__termios_p ) ;
#line 1 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.h"
void cat_v(FILE *file , u_char const   *buf , int nchars ) ;
#line 2
int install_ttyios(int tty , struct termios  const  *ios ) ;
#line 3
void prepare_term(struct termios *ios , cc_t vmin ) ;
#line 4
int tty_nonblock(int tty , int nonblock ) ;
#line 6
void *safe_malloc(size_t size ) ;
#line 7
void *safe_calloc(size_t n , size_t size ) ;
#line 8
void *safe_realloc(void *ptr , size_t size ) ;
#line 9
char *safe_strdup(char const   *str ) ;
#line 466 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 468
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) calloc)(size_t __nmemb ,
                                                                               size_t __size )  __attribute__((__malloc__)) ;
#line 480
extern  __attribute__((__nothrow__)) void *( __attribute__((__warn_unused_result__,
__leaf__)) realloc)(void *__ptr , size_t __size ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 50 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
void cat_v(FILE *file , u_char const   *buf , int nchars ) 
{ 
  int c ;
  u_char const   *tmp ;
  unsigned short const   **tmp___0 ;
  unsigned short const   **tmp___1 ;
  int tmp___2 ;

  {
  {
#line 52
  while (1) {
    while_continue: /* CIL Label */ ;
#line 52
    tmp___2 = nchars;
#line 52
    nchars --;
#line 52
    if (! (tmp___2 > 0)) {
#line 52
      goto while_break;
    }
    {
#line 53
    tmp = buf;
#line 53
    buf ++;
#line 53
    c = (int )*tmp;
#line 55
    tmp___1 = __ctype_b_loc();
    }
#line 55
    if ((int const   )*(*tmp___1 + c) & 16384) {
      {
#line 56
      fputc(c, file);
      }
    } else {
      {
#line 57
      tmp___0 = __ctype_b_loc();
      }
#line 57
      if ((int const   )*(*tmp___0 + c) & 2) {
        {
#line 58
        fputc('^', file);
#line 59
        fputc(64 + c, file);
        }
      } else {
        {
#line 61
        fprintf((FILE */* __restrict  */)file, (char const   */* __restrict  */)"\\%03o",
                c);
        }
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 64
  return;
}
}
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
int install_ttyios(int tty , struct termios  const  *ios ) 
{ 
  int tmp ;

  {
  {
#line 77
  tmp = tcsetattr(tty, 0, ios);
  }
#line 77
  if (0 > tmp) {
    {
#line 78
    perror("tcsetattr");
    }
#line 79
    return (-1);
  }
#line 81
  return (0);
}
}
#line 84 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
void prepare_term(struct termios *ios , cc_t vmin ) 
{ 


  {
#line 86
  ios->c_cflag |= 3248U;
#line 87
  ios->c_lflag |= 128U;
#line 88
  ios->c_lflag &= 4294934148U;
#line 89
  ios->c_iflag &= 4294961664U;
#line 91
  ios->c_oflag &= 4294967294U;
#line 92
  ios->c_cc[6] = vmin;
#line 93
  ios->c_cc[5] = (cc_t )0;
#line 94
  return;
}
}
#line 96 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
int tty_nonblock(int tty , int nonblock ) 
{ 
  int old ;
  int new ;
  int tmp ;

  {
  {
#line 100
  old = fcntl(tty, 3, 0);
  }
#line 101
  if (old == -1) {
    {
#line 102
    perror("fcntl(F_GETFL)");
#line 103
    exit(1);
    }
  }
#line 105
  if (nonblock) {
#line 106
    new = old | 2048;
  } else {
#line 108
    new = old & -2049;
  }
#line 109
  if (new != old) {
    {
#line 110
    tmp = fcntl(tty, 4, new);
    }
#line 110
    if (tmp == -1) {
      {
#line 111
      perror("fcntl(F_SETFL)");
#line 112
      exit(1);
      }
    }
  }
#line 115
  return ((old & 2048) != 0);
}
}
#line 118 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
void *safe_malloc(size_t size ) 
{ 
  void *ret ;
  void *tmp ;

  {
  {
#line 120
  tmp = malloc(size);
#line 120
  ret = tmp;
  }
#line 122
  if (! ret) {
    {
#line 123
    perror("malloc");
#line 124
    exit(1);
    }
  }
#line 126
  return (ret);
}
}
#line 129 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
void *safe_calloc(size_t n , size_t size ) 
{ 
  void *ret ;
  void *tmp ;

  {
  {
#line 131
  tmp = calloc(n, size);
#line 131
  ret = tmp;
  }
#line 133
  if (! ret) {
    {
#line 134
    perror("calloc");
#line 135
    exit(1);
    }
  }
#line 137
  return (ret);
}
}
#line 140 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
void *safe_realloc(void *ptr , size_t size ) 
{ 
  void *ret ;
  void *tmp ;

  {
  {
#line 142
  tmp = realloc(ptr, size);
#line 142
  ret = tmp;
  }
#line 144
  if (! ret) {
    {
#line 145
    perror("realloc");
#line 146
    exit(1);
    }
  }
#line 148
  return (ret);
}
}
#line 151 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
char *safe_strdup(char const   *str ) 
{ 
  char *new ;
  char *tmp ;

  {
  {
#line 153
  tmp = strdup(str);
#line 153
  new = tmp;
  }
#line 155
  if ((unsigned long )new == (unsigned long )((void *)0)) {
    {
#line 156
    perror("strdup");
#line 157
    exit(1);
    }
  }
#line 159
  return (new);
}
}
#line 166 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/misc.c"
int isnumber(char const   *s ) 
{ 
  char ch ;
  int n ;
  unsigned short const   **tmp ;
  char const   *tmp___0 ;

  {
#line 171
  n = 0;
  {
#line 172
  while (1) {
    while_continue: /* CIL Label */ ;
#line 172
    tmp___0 = s;
#line 172
    s ++;
#line 172
    ch = (char )*tmp___0;
#line 172
    if (! ch) {
#line 172
      goto while_break;
    }
    {
#line 173
    n ++;
#line 174
    tmp = __ctype_b_loc();
    }
#line 174
    if (! ((int const   )*(*tmp + (int )ch) & 2048)) {
#line 175
      return (0);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 177
  return (n != 0);
}
}
#line 2 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/version.c"
char Copyright[63]  = 
#line 2 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/version.c"
  {      (char )'C',      (char )'o',      (char )'p',      (char )'y', 
        (char )'r',      (char )'i',      (char )'g',      (char )'h', 
        (char )'t',      (char )' ',      (char )'1',      (char )'9', 
        (char )'9',      (char )'6',      (char )',',      (char )'1', 
        (char )'9',      (char )'9',      (char )'7',      (char )',', 
        (char )'2',      (char )'0',      (char )'0',      (char )'1', 
        (char )' ',      (char )'b',      (char )'y',      (char )' ', 
        (char )'I',      (char )'n',      (char )'t',      (char )'e', 
        (char )'r',      (char )'n',      (char )'e',      (char )'t', 
        (char )' ',      (char )'S',      (char )'o',      (char )'f', 
        (char )'t',      (char )'w',      (char )'a',      (char )'r', 
        (char )'e',      (char )' ',      (char )'C',      (char )'o', 
        (char )'n',      (char )'s',      (char )'o',      (char )'r', 
        (char )'t',      (char )'i',      (char )'u',      (char )'m', 
        (char )',',      (char )' ',      (char )'I',      (char )'n', 
        (char )'c',      (char )'.',      (char )'\000'};
#line 4 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/version.c"
char Version[72]  = 
#line 4
  {      (char )'V',      (char )'e',      (char )'r',      (char )'s', 
        (char )'i',      (char )'o',      (char )'n',      (char )' ', 
        (char )'4',      (char )'.',      (char )'0',      (char )' ', 
        (char )'(',      (char )'j',      (char )'u',      (char )'n', 
        (char )'e',      (char )'@',      (char )'h',      (char )'a', 
        (char )'k',      (char )'j',      (char )'o',      (char )'o', 
        (char )'-',      (char )'S',      (char )'u',      (char )'p', 
        (char )'e',      (char )'r',      (char )'-',      (char )'S', 
        (char )'e',      (char )'r',      (char )'v',      (char )'e', 
        (char )'r',      (char )' ',      (char )'2',      (char )'0', 
        (char )'1',      (char )'6',      (char )'.',      (char )' ', 
        (char )'0',      (char )'3',      (char )'.',      (char )' ', 
        (char )'1',      (char )'0',      (char )'.',      (char )' ', 
        (char )'(',      (char )'\353',      (char )'\252',      (char )'\251', 
        (char )')',      (char )' ',      (char )'0',      (char )'0', 
        (char )':',      (char )'5',      (char )'5',      (char )':', 
        (char )'1',      (char )'4',      (char )' ',      (char )'K', 
        (char )'S',      (char )'T',      (char )')',      (char )'\000'};
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 300 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/locbrok.c"
int main(int argc , char **argv ) 
{ 


  {
  {
#line 302
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"There is no location broker for this system.\n");
#line 303
  exit(1);
  }
}
}
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 106 "/usr/include/x86_64-linux-gnu/sys/select.h"
extern int select(int __nfds , fd_set * __restrict  __readfds , fd_set * __restrict  __writefds ,
                  fd_set * __restrict  __exceptfds , struct timeval * __restrict  __timeout ) ;
#line 102 "/usr/include/signal.h"
extern  __attribute__((__nothrow__)) __sighandler_t ( __attribute__((__leaf__)) signal)(int __sig ,
                                                                                        void (*__handler)(int  ) ) ;
#line 209 "/usr/include/x86_64-linux-gnu/sys/stat.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) stat)(char const   * __restrict  __file ,
                                                                                             struct stat * __restrict  __buf ) ;
#line 113 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) socket)(int __domain ,
                                                                             int __type ,
                                                                             int __protocol ) ;
#line 123
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) bind)(int __fd ,
                                                                           struct sockaddr  const  *__addr ,
                                                                           socklen_t __len ) ;
#line 233
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) listen)(int __fd ,
                                                                             int __n ) ;
#line 243
extern int accept(int __fd , struct sockaddr * __restrict  __addr , socklen_t * __restrict  __addr_len ) ;
#line 129 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 132
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strncpy)(char * __restrict  __dest ,
                                                                                                  char const   * __restrict  __src ,
                                                                                                  size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 375 "/usr/include/netinet/in.h"
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) ntohs)(uint16_t __netshort )  __attribute__((__const__)) ;
#line 53 "/usr/include/arpa/inet.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) inet_ntoa)(struct in_addr __in ) ;
#line 237 "/usr/include/stdio.h"
extern int fclose(FILE *__stream ) ;
#line 242
extern int fflush(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 709
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
#line 715
extern size_t fwrite(void const   * __restrict  __ptr , size_t __size , size_t __n ,
                     FILE * __restrict  __s ) ;
#line 749
extern int fseek(FILE *__stream , long __off , int __whence ) ;
#line 754
extern long ftell(FILE *__stream ) ;
#line 54 "/usr/include/termios.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) cfsetospeed)(struct termios *__termios_p ,
                                                                                  speed_t __speed ) ;
#line 57
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) cfsetispeed)(struct termios *__termios_p ,
                                                                                  speed_t __speed ) ;
#line 66
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tcgetattr)(int __fd ,
                                                                                struct termios *__termios_p ) ;
#line 80
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tcsendbreak)(int __fd ,
                                                                                  int __duration ) ;
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 515
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) abort)(void) ;
#line 137 "/usr/include/netdb.h"
extern struct hostent *gethostbyaddr(void const   *__addr , __socklen_t __len , int __type ) ;
#line 116 "/usr/include/pwd.h"
extern struct passwd *getpwnam(char const   *__name ) ;
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 360
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
#line 366
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 628
extern  __attribute__((__nothrow__)) __pid_t ( __attribute__((__leaf__)) getpid)(void) ;
#line 826
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) unlink)(char const   *__name ) ;
#line 57 "/usr/include/getopt.h"
extern char *optarg ;
#line 150
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getopt)(int ___argc ,
                                                                             char * const  *___argv ,
                                                                             char const   *__shortopts ) ;
#line 879 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) gethostname)(char *__name ,
                                                                                                  size_t __len ) ;
#line 983
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getdtablesize)(void) ;
#line 53 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.h"
int tp_senddata(int fd , u_char const   *buf , int len , int typ ) ;
#line 54
int tp_sendctl(int fd , u_int f , u_int i , u_char *c ) ;
#line 55
int tp_getdata(int fd , ttyprot *tp ) ;
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *ProgName  =    (char *)"amnesia";
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *LServSpec  =    (char *)((void *)0);
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *RServSpec  =    (char *)((void *)0);
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *TtySpec  =    (char *)((void *)0);
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *LogSpec  =    (char *)((void *)0);
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *Parity  =    (char *)"none";
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char ParityBuf[468]  ;
#line 82 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *PidFile  =    (char *)((void *)0);
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int LServ  =    -1;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int RServ  =    -1;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int Tty  =    -1;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int Ttyios_set  =    0;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int LogDirty  =    0;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int Baud  =    9600;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int Wordsize  =    8;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int highest_fd  =    -1;
#line 90 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int Sigpiped  =    0;
#line 105 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static struct termios Ttyios  ;
#line 105 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static struct termios Ttyios_orig  ;
#line 106 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static FILE *LogF  =    (FILE *)((void *)0);
#line 107 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static fd_set Clients  ;
#line 108 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static ttyprot T___0  ;
#line 109 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static time_t Now  ;
#line 110 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char Hostname[64]  ;
#line 112 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static struct timeval TOinput  =    {(__time_t )0, (__suseconds_t )3000};
#line 113 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static struct timeval TOflush  =    {(__time_t )1, (__suseconds_t )0};
#line 114 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static struct whoson **WhosOn  ;
#line 116
static char *handle_option(char *option ) ;
#line 117
static void main_loop(void) ;
#line 117
static void tty_input(int fd , int aggregate ) ;
#line 117
static void broadcast(u_char *buf , int nchars , u_int typ ) ;
#line 117
static void sigpipe(int x ) ;
#line 117
static void sighup(int x ) ;
#line 117
static void open_log(void) ;
#line 117
static void quit(int x ) ;
#line 117
static void serv_input(int fd ) ;
#line 117
static void client_input(int fd ) ;
#line 117
static void close_client(int fd ) ;
#line 117
static void set_parity(u_int parity ) ;
#line 117
static void set_wordsize(u_int wordsize ) ;
#line 117
static void auth_needed(int fd ) ;
#line 117
static void auth_ok(int fd ) ;
#line 133
static int set_baud(int baud ) ;
#line 133
static int find_parity(char *parity ) ;
#line 133
static int find_wordsize(int wordsize ) ;
#line 133
static int find_baud(int baud ) ;
#line 353
extern int ( /* missing proto */  time)() ;
#line 316 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void main_loop(void) 
{ 
  int __d0 ;
  int __d1 ;
  int tmp___0 ;
  int tmp___1 ;
  fd_set readfds ;
  int nfound ;
  int fd ;
  struct timeval *tmp___2 ;
  int *tmp___3 ;
  int tmp___4 ;

  {
#line 318
  if (LServ != -1) {
    {
#line 319
    listen(LServ, 10);
    }
  }
#line 320
  if (RServ != -1) {
    {
#line 321
    listen(RServ, 10);
    }
  }
  {
#line 323
  signal(13, & sigpipe);
#line 324
  signal(1, & sighup);
  }
  {
#line 325
  while (1) {
    while_continue: /* CIL Label */ ;
#line 325
    __asm__  volatile   ("cld; rep; "
                         "stosq": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) / sizeof(__fd_mask )),
                         "1" (& Clients.__fds_bits[0]): "memory");
#line 325
    goto while_break;
  }
  while_break: /* CIL Label */ ;
  }
#line 326
  if (LServ > RServ) {
#line 326
    tmp___1 = LServ;
  } else {
#line 326
    tmp___1 = RServ;
  }
#line 326
  if (tmp___1 > Tty) {
#line 326
    if (LServ > RServ) {
#line 326
      tmp___0 = LServ;
    } else {
#line 326
      tmp___0 = RServ;
    }
#line 326
    highest_fd = tmp___0;
  } else {
#line 326
    highest_fd = Tty;
  }
  {
#line 328
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 332
    readfds = Clients;
#line 333
    if (LServ != -1) {
#line 334
      readfds.__fds_bits[LServ / (8 * (int )sizeof(__fd_mask ))] |= 1L << LServ % (8 * (int )sizeof(__fd_mask ));
    }
#line 335
    if (RServ != -1) {
#line 336
      readfds.__fds_bits[RServ / (8 * (int )sizeof(__fd_mask ))] |= 1L << RServ % (8 * (int )sizeof(__fd_mask ));
    }
#line 337
    readfds.__fds_bits[Tty / (8 * (int )sizeof(__fd_mask ))] |= 1L << Tty % (8 * (int )sizeof(__fd_mask ));
#line 345
    if (LogDirty) {
#line 345
      tmp___2 = & TOflush;
    } else {
#line 345
      tmp___2 = (struct timeval *)((void *)0);
    }
    {
#line 345
    nfound = select(highest_fd + 1, (fd_set */* __restrict  */)(& readfds), (fd_set */* __restrict  */)((void *)0),
                    (fd_set */* __restrict  */)((void *)0), (struct timeval */* __restrict  */)tmp___2);
    }
#line 347
    if (nfound < 0) {
      {
#line 347
      tmp___3 = __errno_location();
      }
#line 347
      if (*tmp___3 == 4) {
#line 348
        goto __Cont;
      }
    }
#line 349
    if (nfound == 0) {
#line 349
      if (LogDirty) {
#line 349
        if (LogF) {
          {
#line 350
          fflush(LogF);
#line 351
          LogDirty = 0;
          }
        }
      }
    }
    {
#line 353
    tmp___4 = time(0);
#line 353
    Now = (time_t )tmp___4;
#line 358
    fd = 0;
    }
    {
#line 358
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 358
      if (! (fd <= highest_fd)) {
#line 358
        goto while_break___1;
      }
#line 359
      if (! ((readfds.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] & (1L << fd % (8 * (int )sizeof(__fd_mask )))) != 0L)) {
#line 360
        goto __Cont___0;
      }
#line 363
      if (fd == Tty) {
        {
#line 364
        tty_input(fd, 0);
#line 365
        tty_input(fd, 1);
        }
      } else
#line 366
      if (fd == LServ) {
        {
#line 367
        serv_input(fd);
        }
      } else
#line 366
      if (fd == RServ) {
        {
#line 367
        serv_input(fd);
        }
      } else {
        {
#line 369
        client_input(fd);
        }
      }
      __Cont___0: /* CIL Label */ 
#line 358
      fd ++;
    }
    while_break___1: /* CIL Label */ ;
    }
    __Cont: /* CIL Label */ ;
  }
  while_break___0: /* CIL Label */ ;
  }
}
}
#line 376 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void tty_input(int fd , int aggregate ) 
{ 
  u_char buf[468] ;
  int nchars ;
  int x ;
  int nloops ;
  ssize_t tmp ;
  int tmp___0 ;
  size_t tmp___1 ;

  {
#line 381
  nchars = 0;
#line 382
  nloops = 0;
  {
#line 383
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 384
    nloops ++;
#line 385
    tmp = read(fd, (void *)(buf + nchars), (size_t )(468 - nchars));
#line 385
    x = (int )tmp;
    }
#line 383
    if (x > 0) {
#line 383
      nchars += x;
#line 383
      if (nchars < 468) {
#line 383
        if (aggregate) {
          {
#line 383
          tmp___0 = select(0, (fd_set */* __restrict  */)((void *)0), (fd_set */* __restrict  */)((void *)0),
                           (fd_set */* __restrict  */)((void *)0), (struct timeval */* __restrict  */)(& TOinput));
          }
#line 383
          if (tmp___0) {
#line 383
            goto while_break;
          }
        } else {
#line 383
          goto while_break;
        }
      } else {
#line 383
        goto while_break;
      }
    } else {
#line 383
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 403
  if (nchars == 0) {
#line 404
    return;
  }
#line 405
  if (LogF) {
    {
#line 406
    tmp___1 = fwrite((void const   */* __restrict  */)(buf), sizeof(char ), (size_t )nchars,
                     (FILE */* __restrict  */)LogF);
    }
#line 406
    if ((size_t )nchars != tmp___1) {
      {
#line 407
      perror("fwrite(LogF)");
      }
    } else {
#line 409
      LogDirty = 1;
    }
  }
  {
#line 412
  broadcast(buf, nchars, (u_int )1);
  }
#line 413
  return;
}
}
#line 415 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void broadcast(u_char *buf , int nchars , u_int typ ) 
{ 
  int fd ;
  int x ;

  {
#line 419
  fd = 0;
  {
#line 419
  while (1) {
    while_continue: /* CIL Label */ ;
#line 419
    if (! (fd <= highest_fd)) {
#line 419
      goto while_break;
    }
#line 420
    if (! ((Clients.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] & (1L << fd % (8 * (int )sizeof(__fd_mask )))) != 0L)) {
#line 421
      goto __Cont;
    }
    {
#line 424
    Sigpiped = 0;
#line 425
    x = tp_senddata(fd, (u_char const   *)buf, nchars, (int )typ);
    }
#line 429
    if (Sigpiped) {
      {
#line 432
      close_client(fd);
      }
    }
    __Cont: /* CIL Label */ 
#line 419
    fd ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 435
  return;
}
}
#line 437 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void serv_input(int fd ) 
{ 
  struct sockaddr_un un ;
  struct sockaddr_in in ;
  struct sockaddr *sa ;
  int fromlen ;
  void *tmp ;
  struct hostent *hp ;
  char *tmp___0 ;
  char *tmp___1 ;

  {
#line 444
  if (fd == LServ) {
#line 445
    sa = (struct sockaddr *)(& un);
#line 446
    fromlen = (int )sizeof(un);
  } else
#line 447
  if (fd == RServ) {
#line 448
    sa = (struct sockaddr *)(& in);
#line 449
    fromlen = (int )sizeof(in);
  } else {
    {
#line 451
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: panic - serv_input(%d)\n",
            ProgName, fd);
#line 452
    abort();
    }
  }
  {
#line 457
  fd = accept(fd, (struct sockaddr */* __restrict  */)sa, (socklen_t */* __restrict  */)(& fromlen));
  }
#line 457
  if (fd == -1) {
    {
#line 458
    perror("accept");
    }
#line 459
    return;
  }
#line 464
  Clients.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] |= 1L << fd % (8 * (int )sizeof(__fd_mask ));
#line 465
  if (fd > highest_fd) {
#line 466
    highest_fd = fd;
  }
#line 468
  if (! *(WhosOn + fd)) {
    {
#line 469
    tmp = malloc(sizeof(struct whoson ));
#line 469
    *(WhosOn + fd) = (struct whoson *)tmp;
    }
  }
#line 471
  (*(WhosOn + fd))->who = (char *)((void *)0);
#line 472
  (*(WhosOn + fd))->lastInput = Now;
#line 473
  (*(WhosOn + fd))->auth = (char *)((void *)0);
#line 474
  if ((unsigned long )sa == (unsigned long )((struct sockaddr *)(& un))) {
    {
#line 475
    (*(WhosOn + fd))->host = safe_strdup((char const   *)(Hostname));
#line 476
    (*(WhosOn + fd))->type = (enum __anonenum_type_59 )0;
#line 477
    auth_ok(fd);
    }
  } else
#line 478
  if ((unsigned long )sa == (unsigned long )((struct sockaddr *)(& in))) {
    {
#line 481
    hp = gethostbyaddr((void const   *)((char *)(& in.sin_addr)), (__socklen_t )sizeof(in.sin_addr),
                       (int )in.sin_family);
    }
#line 484
    if (hp) {
#line 484
      tmp___1 = hp->h_name;
    } else {
      {
#line 484
      tmp___0 = inet_ntoa(in.sin_addr);
#line 484
      tmp___1 = tmp___0;
      }
    }
    {
#line 484
    (*(WhosOn + fd))->host = safe_strdup((char const   *)tmp___1);
#line 487
    (*(WhosOn + fd))->type = (enum __anonenum_type_59 )1;
#line 488
    auth_needed(fd);
    }
  } else {
    {
#line 490
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: panic - serv_input #2\n",
            ProgName);
#line 491
    abort();
    }
  }
#line 493
  return;
}
}
#line 495 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void client_input(int fd ) 
{ 
  int nchars ;
  int i ;
  int new ;
  int query ;
  struct passwd *pw ;
  u_short salt ;
  char s[3] ;
  u_int f ;
  ssize_t tmp ;
  uint16_t tmp___0 ;
  uint16_t tmp___1 ;
  uint16_t tmp___2 ;
  ssize_t tmp___3 ;
  int tmp___4 ;
  size_t tmp___5 ;
  int iwho ;
  int tmp___6 ;
  struct whoson *who ;
  char data[468] ;
  int idle ;
  char const   *tmp___7 ;
  char const   *tmp___8 ;
  char const   *tmp___9 ;
  size_t tmp___10 ;
  char buf[468] ;
  size_t tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  long tmp___14 ;
  char buf___0[468] ;
  int len ;
  int something ;
  size_t tmp___15 ;
  size_t tmp___16 ;
  char data___0[468] ;
  size_t tmp___17 ;
  char data___1[468] ;
  size_t tmp___18 ;
  int tmp___19 ;

  {
#line 503
  if (! *(WhosOn + fd)) {
#line 504
    return;
  }
  {
#line 505
  (*(WhosOn + fd))->lastInput = Now;
#line 509
  tmp = read(fd, (void *)(& T___0), sizeof(u_int16_t ) + sizeof(u_int16_t ));
#line 509
  nchars = (int )tmp;
  }
#line 509
  if (sizeof(u_int16_t ) + sizeof(u_int16_t ) != (unsigned long )nchars) {
    {
#line 514
    close_client(fd);
    }
#line 515
    return;
  }
  {
#line 520
  tmp___0 = ntohs(T___0.i);
#line 520
  i = (int )tmp___0;
#line 521
  tmp___1 = ntohs(T___0.f);
#line 521
  query = (int )tmp___1 & 256;
#line 522
  tmp___2 = ntohs(T___0.f);
#line 522
  f = (u_int )((int )tmp___2 & 255);
  }
  {
#line 531
  if (f == 1U) {
#line 531
    goto case_1;
  }
#line 557
  if (f == 5U) {
#line 557
    goto case_5;
  }
#line 567
  if (f == 2U) {
#line 567
    goto case_2;
  }
#line 590
  if (f == 3U) {
#line 590
    goto case_3;
  }
#line 618
  if (f == 4U) {
#line 618
    goto case_4;
  }
#line 637
  if (f == 6U) {
#line 637
    goto case_6;
  }
#line 679
  if (f == 7U) {
#line 679
    goto case_7;
  }
#line 714
  if (f == 9U) {
#line 714
    goto case_9;
  }
#line 719
  if (f == 10U) {
#line 719
    goto case_10;
  }
#line 745
  if (f == 11U) {
#line 745
    goto case_11;
  }
#line 771
  goto switch_default;
  case_1: /* CIL Label */ 
  {
#line 532
  nchars = tp_getdata(fd, & T___0);
  }
#line 532
  if (! nchars) {
    {
#line 533
    close_client(fd);
    }
#line 534
    goto switch_break;
  }
#line 537
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 538
    goto switch_break;
  }
  {
#line 548
  tmp___3 = write(Tty, (void const   *)(T___0.c), (size_t )nchars);
#line 548
  nchars = (int )tmp___3;
  }
#line 556
  goto switch_break;
  case_5: /* CIL Label */ 
#line 558
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 559
    goto switch_break;
  }
  {
#line 561
  tcsendbreak(Tty, 0);
#line 562
  tp_senddata(fd, (u_char const   *)((u_char *)"BREAK"), 5, 8);
  }
#line 563
  if (LogF) {
    {
#line 564
    fputs((char const   */* __restrict  */)"[BREAK]", (FILE */* __restrict  */)LogF);
    }
  }
#line 566
  goto switch_break;
  case_2: /* CIL Label */ 
#line 568
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 569
    goto switch_break;
  }
#line 570
  if (query) {
    {
#line 571
    tp_sendctl(fd, (u_int )258, (u_int )Baud, (u_char *)((void *)0));
    }
#line 572
    goto switch_break;
  }
  {
#line 575
  new = find_baud(i);
  }
#line 575
  if (-1 == new) {
    {
#line 576
    tp_sendctl(fd, (u_int )2, (u_int )0, (u_char *)((void *)0));
    }
  } else {
    {
#line 578
    tmp___4 = set_baud(new);
    }
#line 578
    if (tmp___4 != -1) {
      {
#line 579
      Baud = i;
#line 580
      install_ttyios(Tty, (struct termios  const  *)(& Ttyios));
      }
#line 581
      if (LogF) {
        {
#line 582
        fprintf((FILE */* __restrict  */)LogF, (char const   */* __restrict  */)"[baud now %d]",
                i);
        }
      }
      {
#line 584
      tp_sendctl(fd, (u_int )2, (u_int )1, (u_char *)((void *)0));
      }
    } else {
      {
#line 586
      tp_sendctl(fd, (u_int )2, (u_int )0, (u_char *)((void *)0));
      }
    }
  }
#line 589
  goto switch_break;
  case_3: /* CIL Label */ 
#line 591
  if (! query) {
    {
#line 592
    nchars = tp_getdata(fd, & T___0);
    }
#line 592
    if (! nchars) {
      {
#line 593
      close_client(fd);
      }
#line 594
      goto switch_break;
    }
#line 596
    T___0.c[i] = (u_char )'\000';
  }
#line 598
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 599
    goto switch_break;
  }
#line 600
  if (query) {
    {
#line 601
    tmp___5 = strlen((char const   *)Parity);
#line 601
    tp_sendctl(fd, (u_int )259, (u_int )tmp___5, (u_char *)Parity);
    }
#line 603
    goto switch_break;
  }
  {
#line 605
  new = find_parity((char *)(T___0.c));
  }
#line 605
  if (-1 == new) {
    {
#line 606
    tp_sendctl(fd, (u_int )3, (u_int )0, (u_char *)((void *)0));
    }
  } else {
    {
#line 608
    strcpy((char */* __restrict  */)(ParityBuf), (char const   */* __restrict  */)((char *)(T___0.c)));
#line 609
    Parity = ParityBuf;
#line 610
    set_parity((u_int )new);
#line 611
    install_ttyios(Tty, (struct termios  const  *)(& Ttyios));
    }
#line 612
    if (LogF) {
      {
#line 613
      fprintf((FILE */* __restrict  */)LogF, (char const   */* __restrict  */)"[parity now %s]",
              (char *)(T___0.c));
      }
    }
    {
#line 615
    tp_sendctl(fd, (u_int )3, (u_int )1, (u_char *)((void *)0));
    }
  }
#line 617
  goto switch_break;
  case_4: /* CIL Label */ 
#line 619
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 620
    goto switch_break;
  }
#line 621
  if (query) {
    {
#line 622
    tp_sendctl(fd, (u_int )260, (u_int )Wordsize, (u_char *)((void *)0));
    }
#line 623
    goto switch_break;
  }
  {
#line 625
  new = find_wordsize(i);
  }
#line 625
  if (-1 == new) {
    {
#line 626
    tp_sendctl(fd, (u_int )4, (u_int )0, (u_char *)((void *)0));
    }
  } else {
    {
#line 628
    Wordsize = i;
#line 629
    set_wordsize((u_int )new);
#line 630
    install_ttyios(Tty, (struct termios  const  *)(& Ttyios));
    }
#line 631
    if (LogF) {
      {
#line 632
      fprintf((FILE */* __restrict  */)LogF, (char const   */* __restrict  */)"[wordsize now %d]",
              i);
      }
    }
    {
#line 634
    tp_sendctl(fd, (u_int )4, (u_int )1, (u_char *)((void *)0));
    }
  }
#line 636
  goto switch_break;
  case_6: /* CIL Label */ 
#line 638
  if (! query) {
    {
#line 639
    nchars = tp_getdata(fd, & T___0);
    }
#line 639
    if (! nchars) {
      {
#line 640
      close_client(fd);
      }
#line 641
      goto switch_break;
    }
#line 643
    T___0.c[i] = (u_char )'\000';
  }
#line 645
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 646
    goto switch_break;
  }
#line 647
  if (query) {
    {
#line 650
    tmp___6 = getdtablesize();
#line 650
    iwho = tmp___6 - 1;
    }
    {
#line 650
    while (1) {
      while_continue: /* CIL Label */ ;
#line 650
      if (! (iwho >= 0)) {
#line 650
        goto while_break;
      }
#line 651
      who = *(WhosOn + iwho);
#line 655
      if (! who) {
#line 656
        goto __Cont;
      }
#line 657
      idle = (int )(Now - who->lastInput);
#line 658
      if (idle == 1) {
#line 658
        tmp___7 = "";
      } else {
#line 658
        tmp___7 = "s";
      }
#line 658
      if (who->host) {
#line 658
        tmp___8 = (char const   *)who->host;
      } else {
#line 658
        tmp___8 = "?";
      }
#line 658
      if (who->who) {
#line 658
        tmp___9 = (char const   *)who->who;
      } else {
#line 658
        tmp___9 = "undeclared";
      }
      {
#line 658
      sprintf((char */* __restrict  */)(data), (char const   */* __restrict  */)"%s [%s] (idle %d sec%s)",
              tmp___9, tmp___8, idle, tmp___7);
#line 662
      tmp___10 = strlen((char const   *)(data));
#line 662
      tp_senddata(fd, (u_char const   *)((u_char *)(data)), (int )tmp___10, 8);
      }
      __Cont: /* CIL Label */ 
#line 650
      iwho --;
    }
    while_break: /* CIL Label */ ;
    }
#line 665
    goto switch_break;
  }
#line 667
  if (*(WhosOn + fd)) {
#line 668
    if ((*(WhosOn + fd))->who) {
      {
#line 669
      free((void *)(*(WhosOn + fd))->who);
      }
    }
    {
#line 670
    (*(WhosOn + fd))->who = safe_strdup((char const   *)((char *)(T___0.c)));
    }
  }
  {
#line 675
  sprintf((char */* __restrict  */)(buf), (char const   */* __restrict  */)"%-*.*s connected\a",
          i, i, T___0.c);
#line 676
  tmp___11 = strlen((char const   *)(buf));
#line 676
  broadcast((u_char *)(buf), (int )tmp___11, (u_int )8);
  }
#line 678
  goto switch_break;
  case_7: /* CIL Label */ 
#line 680
  if ((unsigned int )(*(WhosOn + fd))->state != 2U) {
#line 681
    goto switch_break;
  }
#line 682
  if (! query) {
#line 683
    goto switch_break;
  }
#line 684
  if (! LogF) {
#line 685
    goto switch_break;
  }
  {
#line 686
  fflush(LogF);
#line 687
  LogDirty = 0;
#line 688
  tmp___14 = ftell(LogF);
  }
#line 688
  if (tmp___14 < 1024L) {
    {
#line 689
    tmp___12 = fseek(LogF, 0L, 0);
    }
#line 689
    if (0 > tmp___12) {
#line 690
      goto switch_break;
    }
  } else {
    {
#line 692
    tmp___13 = fseek(LogF, -1024L, 2);
    }
#line 692
    if (0 > tmp___13) {
#line 693
      goto switch_break;
    }
  }
#line 697
  something = 0;
  {
#line 699
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 699
    tmp___15 = fread((void */* __restrict  */)(buf___0), sizeof(char ), sizeof(buf___0),
                     (FILE */* __restrict  */)LogF);
#line 699
    len = (int )tmp___15;
    }
#line 699
    if (! (0 < len)) {
#line 699
      goto while_break___0;
    }
#line 701
    if (! something) {
      {
#line 702
      tp_senddata(fd, (u_char const   *)((u_char *)"tail+"), 5, 8);
#line 704
      something = 1;
      }
    }
    {
#line 706
    tp_senddata(fd, (u_char const   *)((u_char *)(buf___0)), len, 1);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 708
  if (something) {
    {
#line 709
    tp_senddata(fd, (u_char const   *)((u_char *)"tail-"), 5, 8);
    }
  }
#line 713
  goto switch_break;
  case_9: /* CIL Label */ 
#line 715
  if (! query) {
#line 716
    goto switch_break;
  }
  {
#line 717
  tmp___16 = strlen((char const   *)(Version));
#line 717
  tp_senddata(fd, (u_char const   *)((u_char *)(Version)), (int )tmp___16, 8);
  }
#line 718
  goto switch_break;
  case_10: /* CIL Label */ 
  {
#line 720
  nchars = tp_getdata(fd, & T___0);
  }
#line 720
  if (! nchars) {
    {
#line 721
    close_client(fd);
    }
#line 722
    goto switch_break;
  }
#line 724
  T___0.c[i] = (u_char )'\000';
#line 725
  if (query) {
#line 726
    goto switch_break;
  }
#line 727
  if ((unsigned int )(*(WhosOn + fd))->state != 0U) {
#line 728
    goto switch_break;
  }
  {
#line 729
  pw = getpwnam((char const   *)((char *)(T___0.c)));
  }
#line 730
  if (! pw) {
    {
#line 733
    sprintf((char */* __restrict  */)(data___0), (char const   */* __restrict  */)"%s - no such user",
            T___0.c);
#line 734
    tmp___17 = strlen((char const   *)(data___0));
#line 734
    tp_senddata(fd, (u_char const   *)((u_char *)(data___0)), (int )tmp___17, 8);
    }
  } else
#line 736
  if (! *(pw->pw_passwd + 0)) {
    {
#line 737
    auth_ok(fd);
    }
  } else {
    {
#line 739
    (*(WhosOn + fd))->state = (enum __anonenum_state_60 )1;
#line 740
    (*(WhosOn + fd))->auth = safe_strdup((char const   *)pw->pw_passwd);
#line 741
    salt = (u_short )(((int )*((*(WhosOn + fd))->auth + 0) << 8) | (int )*((*(WhosOn + fd))->auth + 1));
#line 742
    tp_sendctl(fd, (u_int )267, (u_int )salt, (u_char *)((void *)0));
    }
  }
#line 744
  goto switch_break;
  case_11: /* CIL Label */ 
  {
#line 746
  nchars = tp_getdata(fd, & T___0);
  }
#line 746
  if (! nchars) {
    {
#line 747
    close_client(fd);
    }
#line 748
    goto switch_break;
  }
#line 750
  T___0.c[i] = (u_char )'\000';
#line 751
  if (query) {
#line 752
    goto switch_break;
  }
#line 753
  if ((unsigned int )(*(WhosOn + fd))->state != 1U) {
#line 754
    goto switch_break;
  }
  {
#line 755
  strncpy((char */* __restrict  */)(s), (char const   */* __restrict  */)(*(WhosOn + fd))->auth,
          (size_t )2);
#line 756
  tmp___19 = strcmp((char const   *)((char *)(T___0.c)), (char const   *)(*(WhosOn + fd))->auth);
  }
#line 756
  if (tmp___19) {
    {
#line 761
    sprintf((char */* __restrict  */)(data___1), (char const   */* __restrict  */)"login incorrect");
#line 762
    ((*(WhosOn + fd))->aux) ++;
    }
#line 762
    if ((*(WhosOn + fd))->aux > 3) {
      {
#line 763
      close_client(fd);
      }
    } else {
      {
#line 765
      tmp___18 = strlen((char const   *)(data___1));
#line 765
      tp_senddata(fd, (u_char const   *)((u_char *)(data___1)), (int )tmp___18, 8);
#line 767
      auth_needed(fd);
      }
    }
  } else {
    {
#line 757
    auth_ok(fd);
    }
  }
#line 770
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 772
  ntohs(T___0.f);
  }
#line 773
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 775
  return;
}
}
#line 777 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void close_client(int fd ) 
{ 
  char buf[468] ;
  size_t tmp ;

  {
  {
#line 780
  close(fd);
#line 781
  Clients.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] &= ~ (1L << fd % (8 * (int )sizeof(__fd_mask )));
  }
#line 782
  if (*(WhosOn + fd)) {
#line 783
    if ((*(WhosOn + fd))->who) {
      {
#line 786
      sprintf((char */* __restrict  */)(buf), (char const   */* __restrict  */)"%s disconnected\a",
              (*(WhosOn + fd))->who);
#line 787
      tmp = strlen((char const   *)(buf));
#line 787
      broadcast((u_char *)(buf), (int )tmp, (u_int )8);
#line 788
      free((void *)(*(WhosOn + fd))->who);
      }
    }
    {
#line 790
    free((void *)(*(WhosOn + fd))->host);
    }
#line 791
    if ((*(WhosOn + fd))->auth) {
      {
#line 792
      free((void *)(*(WhosOn + fd))->auth);
      }
    }
    {
#line 793
    free((void *)((char *)*(WhosOn + fd)));
#line 794
    *(WhosOn + fd) = (struct whoson *)((void *)0);
    }
  }
#line 796
  return;
}
}
#line 798 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct partab partab[4]  = {      {(char *)"even", 256}, 
        {(char *)"odd", 768}, 
        {(char *)"none", 0}, 
        {(char *)((void *)0), -1}};
#line 805 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct cstab cstab[5]  = {      {5, 0}, 
        {6, 16}, 
        {7, 32}, 
        {8, 48}, 
        {0, -1}};
#line 813 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
struct baudtab baudtab[20]  = 
#line 813
  {      {50, 1}, 
        {75, 2}, 
        {110, 3}, 
        {134, 4}, 
        {150, 5}, 
        {200, 6}, 
        {300, 7}, 
        {600, 8}, 
        {1200, 9}, 
        {1800, 10}, 
        {2400, 11}, 
        {4800, 12}, 
        {9600, 13}, 
        {19200, 14}, 
        {38400, 15}, 
        {57600, 4097}, 
        {115200, 4098}, 
        {230400, 4099}, 
        {460800, 4100}, 
        {0, -1}};
#line 844 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int find_baud(int baud ) 
{ 
  struct baudtab *baudp ;
  int sysbaud ;

  {
#line 847
  sysbaud = -1;
#line 849
  baudp = baudtab;
  {
#line 849
  while (1) {
    while_continue: /* CIL Label */ ;
#line 849
    if (! baudp->baud) {
#line 849
      goto while_break;
    }
#line 850
    if (baudp->baud == baud) {
#line 851
      sysbaud = baudp->sysbaud;
    }
#line 849
    baudp ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 854
  return (sysbaud);
}
}
#line 857 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int set_baud(int baud ) 
{ 
  int tmp ;
  int tmp___0 ;

  {
  {
#line 859
  tmp = cfsetispeed(& Ttyios, (speed_t )baud);
  }
#line 859
  if (tmp < 0) {
#line 860
    return (-1);
  }
  {
#line 861
  tmp___0 = cfsetospeed(& Ttyios, (speed_t )baud);
  }
#line 861
  if (tmp___0 < 0) {
#line 862
    return (-1);
  }
#line 863
  return (0);
}
}
#line 866 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int find_parity(char *parity ) 
{ 
  struct partab *parp ;
  int sysparity ;
  int tmp ;

  {
#line 869
  sysparity = -1;
#line 871
  parp = partab;
  {
#line 871
  while (1) {
    while_continue: /* CIL Label */ ;
#line 871
    if (! parp->parity) {
#line 871
      goto while_break;
    }
    {
#line 872
    tmp = strcmp((char const   *)parp->parity, (char const   *)parity);
    }
#line 872
    if (! tmp) {
#line 873
      sysparity = parp->sysparity;
    }
#line 871
    parp ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 876
  return (sysparity);
}
}
#line 879 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void set_parity(u_int parity ) 
{ 


  {
#line 881
  Ttyios.c_cflag &= 4294966527U;
#line 882
  Ttyios.c_cflag |= parity;
#line 883
  return;
}
}
#line 885 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static int find_wordsize(int wordsize ) 
{ 
  struct cstab *csp ;
  int syswordsize ;

  {
#line 888
  syswordsize = -1;
#line 890
  csp = cstab;
  {
#line 890
  while (1) {
    while_continue: /* CIL Label */ ;
#line 890
    if (! csp->wordsize) {
#line 890
      goto while_break;
    }
#line 891
    if (csp->wordsize == wordsize) {
#line 892
      syswordsize = csp->syswordsize;
    }
#line 890
    csp ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 894
  return (syswordsize);
}
}
#line 897 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void set_wordsize(u_int wordsize ) 
{ 


  {
#line 899
  Ttyios.c_cflag &= 4294967247U;
#line 900
  Ttyios.c_cflag |= wordsize;
#line 901
  return;
}
}
#line 903 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static char *handle_option(char *option ) 
{ 
  int tmp ;

  {
  {
#line 905
  tmp = strcmp("nolocal", (char const   *)option);
  }
#line 905
  if (tmp) {
#line 908
    return ((char *)"unrecognized");
  } else {
#line 906
    Ttyios.c_cflag &= 4294965247U;
  }
#line 910
  return ((char *)((void *)0));
}
}
#line 913 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void auth_needed(int fd ) 
{ 
  char data[468] ;
  size_t tmp ;

  {
  {
#line 917
  sprintf((char */* __restrict  */)(data), (char const   */* __restrict  */)"authorization needed");
#line 918
  tmp = strlen((char const   *)(data));
#line 918
  tp_senddata(fd, (u_char const   *)((u_char *)(data)), (int )tmp, 8);
#line 919
  (*(WhosOn + fd))->state = (enum __anonenum_state_60 )0;
#line 920
  tp_sendctl(fd, (u_int )266, (u_int )0, (u_char *)((void *)0));
  }
#line 921
  return;
}
}
#line 923 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void auth_ok(int fd ) 
{ 
  char data[468] ;
  size_t tmp ;

  {
  {
#line 927
  sprintf((char */* __restrict  */)(data), (char const   */* __restrict  */)"authorized");
#line 928
  tmp = strlen((char const   *)(data));
#line 928
  tp_senddata(fd, (u_char const   *)((u_char *)(data)), (int )tmp, 8);
#line 929
  (*(WhosOn + fd))->state = (enum __anonenum_state_60 )2;
  }
#line 930
  return;
}
}
#line 932 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void sigpipe(int x ) 
{ 


  {
#line 934
  Sigpiped ++;
#line 935
  return;
}
}
#line 937 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void sighup(int x ) 
{ 


  {
#line 939
  if (LogF) {
    {
#line 940
    fclose(LogF);
#line 941
    LogF = (FILE *)((void *)0);
#line 942
    LogDirty = 0;
#line 943
    open_log();
    }
  }
#line 945
  return;
}
}
#line 947 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void open_log(void) 
{ 


  {
  {
#line 949
  LogF = fopen((char const   */* __restrict  */)LogSpec, (char const   */* __restrict  */)"a+");
  }
#line 949
  if (! LogF) {
    {
#line 950
    perror((char const   *)LogSpec);
#line 951
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: can\'t open log file\n",
            ProgName);
    }
  }
#line 953
  return;
}
}
#line 955 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttysrv.c"
static void quit(int x ) 
{ 


  {
#line 958
  if (Ttyios_set) {
#line 958
    if (Tty != -1) {
      {
#line 959
      install_ttyios(Tty, (struct termios  const  *)(& Ttyios_orig));
      }
    }
  }
  {
#line 960
  exit(0);
  }
}
}
#line 50 "/usr/include/x86_64-linux-gnu/sys/uio.h"
extern ssize_t writev(int __fd , struct iovec  const  *__iovec , int __count ) ;
#line 55 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.c"
extern int ( /* missing proto */  htons)() ;
#line 42 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.c"
int tp_senddata(int fd , u_char const   *buf , int len , int typ ) 
{ 
  struct iovec iov[2] ;
  ttyprot t ;
  int n ;
  int tmp ;
  int i ;
  int tmp___0 ;
  int tmp___1 ;
  ssize_t tmp___2 ;

  {
  {
#line 46
  n = 0;
#line 55
  tmp = htons(typ);
#line 55
  t.f = (u_int16_t )tmp;
#line 56
  iov[0].iov_base = (void *)((caddr_t )(& t));
#line 57
  iov[0].iov_len = sizeof(u_int16_t ) + sizeof(u_int16_t );
  }
  {
#line 58
  while (1) {
    while_continue: /* CIL Label */ ;
#line 58
    if (! (len > 0)) {
#line 58
      goto while_break;
    }
#line 59
    if (len > 468) {
#line 59
      tmp___0 = 468;
    } else {
#line 59
      tmp___0 = len;
    }
    {
#line 59
    i = tmp___0;
#line 61
    tmp___1 = htons(i);
#line 61
    t.i = (u_int16_t )tmp___1;
#line 62
    iov[1].iov_base = (void *)((caddr_t )buf);
#line 63
    iov[1].iov_len = (size_t )i;
#line 64
    buf += i;
#line 65
    len -= i;
#line 66
    tmp___2 = writev(fd, (struct iovec  const  *)(iov), 2);
#line 66
    i = (int )tmp___2;
    }
#line 67
    if (i < 0) {
#line 68
      goto while_break;
    }
#line 69
    n += i;
  }
  while_break: /* CIL Label */ ;
  }
#line 71
  return (n);
}
}
#line 74 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.c"
int tp_sendctl(int fd , u_int f , u_int i , u_char *c ) 
{ 
  struct iovec iov[2] ;
  ttyprot t ;
  int len ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;
  int il ;
  int tmp___4 ;
  int tmp___5 ;
  ssize_t tmp___6 ;

  {
#line 78
  if (c) {
    {
#line 78
    tmp___2 = strlen((char const   *)((char *)c));
    }
#line 78
    if (tmp___2 > 468UL) {
#line 78
      tmp___1 = (size_t )468;
    } else {
      {
#line 78
      tmp___0 = strlen((char const   *)((char *)c));
#line 78
      tmp___1 = tmp___0;
      }
    }
#line 78
    tmp___3 = tmp___1;
  } else {
#line 78
    tmp___3 = (size_t )0;
  }
  {
#line 78
  len = (int )tmp___3;
#line 79
  il = 0;
#line 89
  tmp___4 = htons(f);
#line 89
  t.f = (u_int16_t )tmp___4;
#line 90
  tmp___5 = htons(i);
#line 90
  t.i = (u_int16_t )tmp___5;
#line 91
  iov[il].iov_base = (void *)((caddr_t )(& t));
#line 92
  iov[il].iov_len = sizeof(u_int16_t ) + sizeof(u_int16_t );
#line 93
  il ++;
  }
#line 94
  if (c) {
#line 95
    iov[il].iov_base = (void *)((caddr_t )c);
#line 96
    iov[il].iov_len = (size_t )len;
#line 97
    il ++;
  }
  {
#line 99
  tmp___6 = writev(fd, (struct iovec  const  *)(iov), il);
  }
#line 99
  return ((int )tmp___6);
}
}
#line 102 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/ttyprot.c"
int tp_getdata(int fd , ttyprot *tp ) 
{ 
  int len ;
  int tmp ;
  int nchars ;
  ssize_t tmp___0 ;

  {
  {
#line 104
  tmp = (int )ntohs((int )tp->i);
#line 104
  len = tmp;
#line 107
  tmp___0 = read(fd, (void *)(tp->c), (size_t )len);
#line 107
  nchars = (int )tmp___0;
  }
#line 107
  if (nchars != len) {
#line 110
    if (nchars < 0) {
      {
#line 111
      perror("read#2");
      }
    } else {
      {
#line 113
      fputc('\n', stderr);
      }
    }
#line 114
    return (0);
  }
#line 128
  return (nchars);
}
}
#line 137 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern int connect(int __fd , struct sockaddr  const  *__addr , socklen_t __len ) ;
#line 127 "/usr/include/signal.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) kill)(__pid_t __pid ,
                                                                           int __sig ) ;
#line 168 "/usr/include/stdio.h"
extern struct _IO_FILE *stdin ;
#line 169
extern struct _IO_FILE *stdout ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 622
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
#line 110 "/usr/include/pwd.h"
extern struct passwd *getpwuid(__uid_t __uid ) ;
#line 675 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) __uid_t ( __attribute__((__leaf__)) getuid)(void) ;
#line 770
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) ttyname)(int __fd ) ;
#line 849
extern char *getlogin(void) ;
#line 71 "/usr/include/getopt.h"
extern int optind ;
#line 59 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
ttyprot T  ;
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char *ProgName___0  =    (char *)"amnesia";
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char WhoAmI[468]  ;
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char *ServSpec  =    (char *)((void *)0);
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char *Login  =    (char *)((void *)0);
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char *TtyName  =    (char *)((void *)0);
#line 66 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static char LogSpec___0[4096]  ;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int Serv  =    -1;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int Log  =    -1;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int Ttyios_set___0  =    0;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int SevenBit  =    0;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int Restricted  =    0;
#line 72 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static int highest_fd___0  =    -1;
#line 79 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static struct termios Ttyios___0  ;
#line 79 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static struct termios Ttyios_orig___0  ;
#line 80 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static fd_set fds  ;
#line 82
static void main_loop___0(void) ;
#line 82
static void tty_input___0(int fd ) ;
#line 82
static void query_or_set(int fd , int ch ) ;
#line 82
static void logging(int fd ) ;
#line 82
static void serv_input___0(int fd ) ;
#line 82
static void server_replied(char *msg , int i ) ;
#line 82
static void server_died(void) ;
#line 82
static void quit___0(int x ) ;
#line 210 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void main_loop___0(void) 
{ 
  int __d0 ;
  int __d1 ;
  fd_set readfds ;
  fd_set exceptfds ;
  int nfound ;
  int fd ;
  int *tmp ;
  int save_errno ;
  int *tmp___0 ;
  int *tmp___1 ;

  {
  {
#line 212
  while (1) {
    while_continue: /* CIL Label */ ;
#line 212
    __asm__  volatile   ("cld; rep; "
                         "stosq": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) / sizeof(__fd_mask )),
                         "1" (& fds.__fds_bits[0]): "memory");
#line 212
    goto while_break;
  }
  while_break: /* CIL Label */ ;
  }
#line 213
  fds.__fds_bits[Serv / (8 * (int )sizeof(__fd_mask ))] |= 1L << Serv % (8 * (int )sizeof(__fd_mask ));
#line 214
  fds.__fds_bits[0 / (8 * (int )sizeof(__fd_mask ))] |= 1L << 0 % (8 * (int )sizeof(__fd_mask ));
#line 215
  if (Serv > 0) {
#line 215
    highest_fd___0 = Serv;
  } else {
#line 215
    highest_fd___0 = 0;
  }
  {
#line 217
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 221
    readfds = fds;
#line 222
    exceptfds = fds;
#line 223
    nfound = select(highest_fd___0 + 1, (fd_set */* __restrict  */)(& readfds), (fd_set */* __restrict  */)((void *)0),
                    (fd_set */* __restrict  */)(& exceptfds), (struct timeval */* __restrict  */)((void *)0));
    }
#line 225
    if (nfound < 0) {
      {
#line 225
      tmp = __errno_location();
      }
#line 225
      if (*tmp == 4) {
#line 226
        goto __Cont;
      }
    }
#line 227
    if (! (0 <= nfound)) {
      {
#line 227
      tmp___0 = __errno_location();
#line 227
      save_errno = *tmp___0;
#line 227
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: %s: ",
              ProgName___0, "");
#line 227
      tmp___1 = __errno_location();
#line 227
      *tmp___1 = save_errno;
#line 227
      perror("select");
#line 227
      exit(1);
      }
    }
#line 228
    fd = 0;
    {
#line 228
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 228
      if (! (fd <= highest_fd___0)) {
#line 228
        goto while_break___1;
      }
#line 229
      if ((exceptfds.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] & (1L << fd % (8 * (int )sizeof(__fd_mask )))) != 0L) {
#line 230
        if (fd == Serv) {
          {
#line 231
          server_died();
          }
        }
      }
#line 233
      if ((readfds.__fds_bits[fd / (8 * (int )sizeof(__fd_mask ))] & (1L << fd % (8 * (int )sizeof(__fd_mask )))) != 0L) {
#line 234
        if (fd == 0) {
          {
#line 235
          tty_input___0(fd);
          }
        } else
#line 236
        if (fd == Serv) {
          {
#line 237
          serv_input___0(fd);
          }
        }
      }
#line 228
      fd ++;
    }
    while_break___1: /* CIL Label */ ;
    }
    __Cont: /* CIL Label */ ;
  }
  while_break___0: /* CIL Label */ ;
  }
}
}
#line 246 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static enum __anonenum_state_55 state  =    (enum __anonenum_state_55 )0;
#line 244 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void tty_input___0(int fd ) 
{ 
  u_char buf[1] ;
  int n ;
  int save_nonblock ;
  u_char ch ;
  __pid_t tmp ;
  int tmp___0 ;
  ssize_t tmp___1 ;

  {
  {
#line 250
  save_nonblock = tty_nonblock(fd, 1);
  }
  {
#line 251
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 251
    tmp___1 = read(fd, (void *)(buf), (size_t )1);
#line 251
    n = (int )tmp___1;
    }
#line 251
    if (! (n == 1)) {
#line 251
      goto while_break;
    }
#line 252
    ch = buf[0];
    {
#line 255
    if ((unsigned int )state == 0U) {
#line 255
      goto case_0;
    }
#line 264
    if ((unsigned int )state == 1U) {
#line 264
      goto case_1;
    }
#line 270
    if ((unsigned int )state == 2U) {
#line 270
      goto case_2;
    }
#line 254
    goto switch_break;
    case_0: /* CIL Label */ 
#line 256
    if ((int )ch == 126) {
#line 257
      state = (enum __anonenum_state_55 )2;
#line 258
      goto while_continue;
    }
#line 260
    if ((int )ch != 13) {
#line 261
      state = (enum __anonenum_state_55 )1;
    }
#line 263
    goto switch_break;
    case_1: /* CIL Label */ 
#line 266
    if ((int )ch == 13) {
#line 267
      state = (enum __anonenum_state_55 )0;
    } else
#line 266
    if ((int )ch == 4) {
#line 267
      state = (enum __anonenum_state_55 )0;
    }
#line 269
    goto switch_break;
    case_2: /* CIL Label */ 
#line 283
    state = (enum __anonenum_state_55 )0;
    {
#line 285
    if ((int )ch == 126) {
#line 285
      goto case_126;
    }
#line 287
    if ((int )ch == 46) {
#line 287
      goto case_46;
    }
#line 291
    if ((int )ch == 12) {
#line 291
      goto case_12;
    }
#line 298
    if ((int )ch == 26) {
#line 298
      goto case_26;
    }
#line 307
    if ((int )ch == 115) {
#line 307
      goto case_115;
    }
#line 307
    if ((int )ch == 113) {
#line 307
      goto case_115;
    }
#line 312
    if ((int )ch == 35) {
#line 312
      goto case_35;
    }
#line 315
    if ((int )ch == 63) {
#line 315
      goto case_63;
    }
#line 321
    goto passthrough;
    case_126: /* CIL Label */ 
#line 286
    goto switch_break___0;
    case_46: /* CIL Label */ 
    {
#line 288
    tty_nonblock(fd, 0);
#line 289
    quit___0(0);
    }
    case_12: /* CIL Label */ 
#line 292
    if (Restricted) {
#line 293
      goto passthrough;
    }
    {
#line 294
    install_ttyios(fd, (struct termios  const  *)(& Ttyios_orig___0));
#line 295
    logging(fd);
#line 296
    install_ttyios(fd, (struct termios  const  *)(& Ttyios___0));
    }
#line 297
    goto while_continue;
    case_26: /* CIL Label */ 
#line 299
    if (Restricted) {
#line 300
      goto passthrough;
    }
    {
#line 301
    install_ttyios(fd, (struct termios  const  *)(& Ttyios_orig___0));
#line 302
    tmp = getpid();
#line 302
    kill(tmp, 20);
#line 303
    install_ttyios(fd, (struct termios  const  *)(& Ttyios___0));
    }
#line 304
    goto while_continue;
    case_115: /* CIL Label */ 
    case_113: /* CIL Label */ 
#line 308
    if (Restricted) {
#line 309
      goto passthrough;
    }
    {
#line 310
    query_or_set(fd, (int )ch);
    }
#line 311
    goto while_continue;
    case_35: /* CIL Label */ 
    {
#line 313
    tp_sendctl(Serv, (u_int )5, (u_int )0, (u_char *)((void *)0));
    }
#line 314
    goto while_continue;
    case_63: /* CIL Label */ 
#line 316
    if (! Restricted) {
      {
#line 317
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\r\n~^Z - suspend program\r\n~^L - set logging\r\n~q  - query server\r\n~s  - set option\r\n");
      }
    }
    {
#line 318
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\r\n~~  - send one tilde (~)\r\n~.  - exit program\r\n~#  - send BREAK\r\n~?  - this message\r\n");
    }
#line 319
    goto while_continue;
    passthrough: 
    switch_default: /* CIL Label */ 
    {
#line 322
    tp_senddata(Serv, (u_char const   *)((u_char *)"~"), 1, 1);
    }
#line 324
    if (Log != -1) {
      {
#line 325
      write(Log, (void const   *)"~", (size_t )1);
      }
    }
#line 327
    goto switch_break___0;
    switch_break___0: /* CIL Label */ ;
    }
#line 329
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
    {
#line 331
    tmp___0 = tp_senddata(Serv, (u_char const   *)(buf), 1, 1);
    }
#line 331
    if (0 > tmp___0) {
      {
#line 332
      server_died();
      }
    }
#line 334
    if (Log != -1) {
      {
#line 335
      write(Log, (void const   *)(buf), (size_t )1);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 338
  tty_nonblock(fd, save_nonblock);
  }
#line 339
  if (n == 0) {
    {
#line 340
    quit___0(0);
    }
  }
#line 341
  return;
}
}
#line 343 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void query_or_set(int fd , int ch ) 
{ 
  int set ;
  int new ;
  int save_nonblock ;
  char buf[64] ;
  char const   *tmp ;
  ssize_t tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;
  size_t tmp___4 ;
  size_t tmp___5 ;

  {
  {
#line 349
  if (ch == 113) {
#line 349
    goto case_113;
  }
#line 352
  if (ch == 115) {
#line 352
    goto case_115;
  }
#line 355
  goto switch_default;
  case_113: /* CIL Label */ 
#line 350
  set = 0;
#line 351
  goto switch_break;
  case_115: /* CIL Label */ 
#line 353
  set = 1;
#line 354
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 356
  fputc(7, stderr);
  }
#line 357
  return;
  switch_break: /* CIL Label */ ;
  }
#line 360
  if (set) {
#line 360
    tmp = "~set ";
  } else {
#line 360
    tmp = "~query ";
  }
  {
#line 360
  fputs((char const   */* __restrict  */)tmp, (FILE */* __restrict  */)stderr);
#line 361
  save_nonblock = tty_nonblock(fd, 0);
#line 363
  tmp___0 = read(fd, (void *)(buf), (size_t )1);
  }
  {
#line 364
  if (tmp___0 == -1L) {
#line 364
    goto case_neg_1;
  }
#line 367
  if (tmp___0 == 0L) {
#line 367
    goto case_0;
  }
#line 371
  goto switch_default___0;
  case_neg_1: /* CIL Label */ 
  {
#line 365
  perror("read");
  }
#line 366
  goto done;
  case_0: /* CIL Label */ 
  {
#line 368
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"!read");
#line 369
  fflush(stderr);
  }
#line 370
  goto done;
  switch_default___0: /* CIL Label */ 
#line 372
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 378
  if ((int )buf[0] == 97) {
#line 378
    goto case_97;
  }
#line 378
  if ((int )buf[0] == 13) {
#line 378
    goto case_97;
  }
#line 378
  if ((int )buf[0] == 10) {
#line 378
    goto case_97;
  }
#line 384
  if ((int )buf[0] == 98) {
#line 384
    goto case_98;
  }
#line 400
  if ((int )buf[0] == 112) {
#line 400
    goto case_112;
  }
#line 414
  if ((int )buf[0] == 119) {
#line 414
    goto case_119;
  }
#line 427
  if ((int )buf[0] == 84) {
#line 427
    goto case_84;
  }
#line 435
  if ((int )buf[0] == 87) {
#line 435
    goto case_87;
  }
#line 443
  if ((int )buf[0] == 86) {
#line 443
    goto case_86;
  }
#line 452
  goto switch_default___1;
  case_97: /* CIL Label */ 
  case_13: /* CIL Label */ 
  case_10: /* CIL Label */ 
  {
#line 379
  fputs((char const   */* __restrict  */)"(show all)\r\n", (FILE */* __restrict  */)stderr);
#line 380
  tp_sendctl(Serv, (u_int )258, (u_int )0, (u_char *)((void *)0));
#line 381
  tp_sendctl(Serv, (u_int )259, (u_int )0, (u_char *)((void *)0));
#line 382
  tp_sendctl(Serv, (u_int )260, (u_int )0, (u_char *)((void *)0));
  }
#line 383
  goto switch_break___1;
  case_98: /* CIL Label */ 
#line 385
  if (! set) {
    {
#line 386
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 388
    fputs((char const   */* __restrict  */)"baud ", (FILE */* __restrict  */)stderr);
#line 389
    install_ttyios(fd, (struct termios  const  *)(& Ttyios_orig___0));
#line 390
    fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)stdin);
#line 391
    tmp___2 = strlen((char const   *)(buf));
    }
#line 391
    if ((int )buf[tmp___2 - 1UL] == 10) {
      {
#line 392
      tmp___1 = strlen((char const   *)(buf));
#line 392
      buf[tmp___1 - 1UL] = (char )'\000';
      }
    }
    {
#line 394
    new = atoi((char const   *)(buf));
    }
#line 394
    if (! new) {
#line 395
      goto switch_break___1;
    }
    {
#line 397
    tp_sendctl(Serv, (u_int )2, (u_int )new, (u_char *)((void *)0));
    }
  }
#line 399
  goto switch_break___1;
  case_112: /* CIL Label */ 
#line 401
  if (! set) {
    {
#line 402
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 404
    fputs((char const   */* __restrict  */)"parity ", (FILE */* __restrict  */)stderr);
#line 405
    install_ttyios(fd, (struct termios  const  *)(& Ttyios_orig___0));
#line 406
    fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)stdin);
#line 407
    tmp___4 = strlen((char const   *)(buf));
    }
#line 407
    if ((int )buf[tmp___4 - 1UL] == 10) {
      {
#line 408
      tmp___3 = strlen((char const   *)(buf));
#line 408
      buf[tmp___3 - 1UL] = (char )'\000';
      }
    }
    {
#line 410
    tmp___5 = strlen((char const   *)(buf));
#line 410
    tp_sendctl(Serv, (u_int )3, (u_int )tmp___5, (u_char *)(buf));
    }
  }
#line 413
  goto switch_break___1;
  case_119: /* CIL Label */ 
#line 415
  if (! set) {
    {
#line 416
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 418
    fputs((char const   */* __restrict  */)"wordsize ", (FILE */* __restrict  */)stderr);
#line 419
    install_ttyios(fd, (struct termios  const  *)(& Ttyios_orig___0));
#line 420
    fgets((char */* __restrict  */)(buf), (int )sizeof(buf), (FILE */* __restrict  */)stdin);
#line 421
    new = atoi((char const   *)(buf));
    }
#line 421
    if (! new) {
#line 422
      goto switch_break___1;
    }
    {
#line 424
    tp_sendctl(Serv, (u_int )4, (u_int )new, (u_char *)((void *)0));
    }
  }
#line 426
  goto switch_break___1;
  case_84: /* CIL Label */ 
#line 428
  if (set) {
    {
#line 429
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 431
    fputs((char const   */* __restrict  */)"Tail\r\n", (FILE */* __restrict  */)stderr);
#line 432
    tp_sendctl(Serv, (u_int )263, (u_int )0, (u_char *)((void *)0));
    }
  }
#line 434
  goto switch_break___1;
  case_87: /* CIL Label */ 
#line 436
  if (set) {
    {
#line 437
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 439
    fputs((char const   */* __restrict  */)"Whoson\r\n", (FILE */* __restrict  */)stderr);
#line 440
    tp_sendctl(Serv, (u_int )262, (u_int )0, (u_char *)((void *)0));
    }
  }
#line 442
  goto switch_break___1;
  case_86: /* CIL Label */ 
#line 444
  if (set) {
    {
#line 445
    fputs((char const   */* __restrict  */)"\a\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 447
    fputs((char const   */* __restrict  */)"Version\r\n", (FILE */* __restrict  */)stderr);
#line 448
    tp_sendctl(Serv, (u_int )265, (u_int )0, (u_char *)((void *)0));
#line 449
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[%s (client)]\r\n",
            Version);
    }
  }
#line 451
  goto switch_break___1;
  switch_default___1: /* CIL Label */ 
#line 453
  if (set) {
    {
#line 454
    fputs((char const   */* __restrict  */)"[all baud parity wordsize]\r\n", (FILE */* __restrict  */)stderr);
    }
  } else {
    {
#line 457
    fputs((char const   */* __restrict  */)"[all Whoson Tail Version]\r\n", (FILE */* __restrict  */)stderr);
    }
  }
#line 458
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  done: 
  {
#line 461
  tty_nonblock(fd, save_nonblock);
  }
#line 462
  return;
}
}
#line 465 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void logging(int fd ) 
{ 
  int save_nonblock ;
  int tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;

  {
#line 467
  if (Log == -1) {
    {
#line 468
    tmp = tty_nonblock(fd, 0);
#line 468
    save_nonblock = tmp;
#line 470
    printf((char const   */* __restrict  */)"\r\nLog file is: ");
#line 470
    fflush(stdout);
#line 471
    fgets((char */* __restrict  */)(LogSpec___0), (int )sizeof(LogSpec___0), (FILE */* __restrict  */)stdin);
#line 472
    tmp___1 = strlen((char const   *)(LogSpec___0));
    }
#line 472
    if ((int )LogSpec___0[tmp___1 - 1UL] == 10) {
      {
#line 473
      tmp___0 = strlen((char const   *)(LogSpec___0));
#line 473
      LogSpec___0[tmp___0 - 1UL] = (char )'\000';
      }
    }
#line 474
    if (LogSpec___0[0]) {
      {
#line 475
      Log = open((char const   *)(LogSpec___0), 1089, 416);
      }
#line 476
      if (Log == -1) {
        {
#line 477
        perror((char const   *)(LogSpec___0));
        }
      }
    }
    {
#line 479
    tty_nonblock(fd, save_nonblock);
    }
  } else {
    {
#line 481
    tmp___2 = close(Log);
    }
#line 481
    if (0 > tmp___2) {
      {
#line 482
      perror((char const   *)(LogSpec___0));
      }
    } else {
      {
#line 484
      printf((char const   */* __restrict  */)"\n[%s closed]\n", LogSpec___0);
      }
    }
#line 485
    Log = -1;
  }
#line 487
  return;
}
}
#line 491
extern char *crypt() ;
#line 489 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void serv_input___0(int fd ) 
{ 
  char passwd[468] ;
  char s[3] ;
  char *c ;
  int nchars ;
  int i ;
  u_int f ;
  u_int o ;
  u_int t ;
  ssize_t tmp ;
  int tmp___0 ;
  ssize_t tmp___1 ;
  int i___0 ;
  ssize_t tmp___2 ;
  size_t tmp___3 ;
  fd_set infd ;
  int __d0 ;
  int __d1 ;
  int tmp___4 ;
  ssize_t tmp___5 ;
  size_t tmp___6 ;

  {
  {
#line 495
  tmp = read(fd, (void *)(& T), sizeof(u_int16_t ) + sizeof(u_int16_t ));
#line 495
  nchars = (int )tmp;
  }
#line 495
  if (0 >= nchars) {
    {
#line 496
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"serv_input: read(%d) returns %d\n",
            fd, nchars);
#line 498
    server_died();
    }
  }
  {
#line 501
  i = (int )ntohs((int )T.i);
#line 502
  tmp___0 = (int )ntohs((int )T.f);
#line 502
  f = (u_int )tmp___0;
#line 503
  o = f & 65280U;
#line 504
  t = f & 255U;
  }
  {
#line 507
  if (t == 8U) {
#line 507
    goto case_8;
  }
#line 507
  if (t == 1U) {
#line 507
    goto case_8;
  }
#line 539
  if (t == 2U) {
#line 539
    goto case_2;
  }
#line 545
  if (t == 3U) {
#line 545
    goto case_3;
  }
#line 556
  if (t == 4U) {
#line 556
    goto case_4;
  }
#line 562
  if (t == 10U) {
#line 562
    goto case_10;
  }
#line 567
  if (t == 11U) {
#line 567
    goto case_11;
  }
#line 505
  goto switch_break;
  case_8: /* CIL Label */ 
  case_1: /* CIL Label */ 
  {
#line 508
  tmp___1 = read(fd, (void *)(T.c), (size_t )i);
#line 508
  nchars = (int )tmp___1;
  }
#line 508
  if (i != nchars) {
    {
#line 509
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"serv_input: read@%d need %d got %d\n",
            fd, i, nchars);
#line 511
    server_died();
    }
  }
#line 513
  if (SevenBit) {
#line 516
    i___0 = 0;
    {
#line 516
    while (1) {
      while_continue: /* CIL Label */ ;
#line 516
      if (! (i___0 < nchars)) {
#line 516
        goto while_break;
      }
#line 517
      T.c[i___0] = (u_char )((int )T.c[i___0] & 127);
#line 516
      i___0 ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
  {
#line 520
  if (t == 1U) {
#line 520
    goto case_1___0;
  }
#line 525
  if (t == 8U) {
#line 525
    goto case_8___0;
  }
#line 535
  goto switch_default;
  case_1___0: /* CIL Label */ 
  {
#line 521
  write(1, (void const   *)(T.c), (size_t )nchars);
  }
#line 522
  if (Log != -1) {
    {
#line 523
    write(Log, (void const   *)(T.c), (size_t )nchars);
    }
  }
#line 524
  goto switch_break___0;
  case_8___0: /* CIL Label */ 
  {
#line 526
  write(1, (void const   *)"[", (size_t )1);
#line 527
  write(1, (void const   *)(T.c), (size_t )nchars);
#line 528
  write(1, (void const   *)"]\r\n", (size_t )3);
  }
#line 529
  if (Log != -1) {
    {
#line 530
    write(Log, (void const   *)"[", (size_t )1);
#line 531
    write(Log, (void const   *)(T.c), (size_t )nchars);
#line 532
    write(Log, (void const   *)"]\r\n", (size_t )3);
    }
  }
#line 534
  goto switch_break___0;
  switch_default: /* CIL Label */ 
#line 536
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
#line 538
  goto switch_break;
  case_2: /* CIL Label */ 
#line 540
  if ((o & 256U) != 0U) {
    {
#line 541
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[baud %d]\r\n",
            i);
    }
  } else {
    {
#line 543
    server_replied((char *)"baud rate change", i);
    }
  }
#line 544
  goto switch_break;
  case_3: /* CIL Label */ 
#line 546
  if ((o & 256U) != 0U) {
    {
#line 547
    tmp___2 = read(fd, (void *)(T.c), (size_t )i);
#line 547
    nchars = (int )tmp___2;
    }
#line 547
    if (i != nchars) {
      {
#line 548
      server_died();
      }
    }
    {
#line 550
    T.c[i] = (u_char )'\000';
#line 551
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[parity %s]\r\n",
            T.c);
    }
  } else {
    {
#line 553
    server_replied((char *)"parity change", i);
    }
  }
#line 555
  goto switch_break;
  case_4: /* CIL Label */ 
#line 557
  if ((o & 256U) != 0U) {
    {
#line 558
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[wordsize %d]\r\n",
            i);
    }
  } else {
    {
#line 560
    server_replied((char *)"wordsize change", i);
    }
  }
#line 561
  goto switch_break;
  case_10: /* CIL Label */ 
#line 563
  if ((o & 256U) == 0U) {
#line 564
    goto switch_break;
  }
  {
#line 565
  tmp___3 = strlen((char const   *)Login);
#line 565
  tp_sendctl(Serv, (u_int )10, (u_int )tmp___3, (u_char *)Login);
  }
#line 566
  goto switch_break;
  case_11: /* CIL Label */ 
#line 568
  if ((o & 256U) == 0U) {
#line 569
    goto switch_break;
  }
  {
#line 570
  fputs((char const   */* __restrict  */)"Password:", (FILE */* __restrict  */)stderr);
#line 570
  fflush(stderr);
#line 571
  c = passwd;
  }
  {
#line 571
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 571
    if (! ((unsigned long )c < (unsigned long )(& passwd[sizeof(passwd)]))) {
#line 571
      goto while_break___0;
    }
    {
#line 574
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 574
      __asm__  volatile   ("cld; rep; "
                           "stosq": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) / sizeof(__fd_mask )),
                           "1" (& infd.__fds_bits[0]): "memory");
#line 574
      goto while_break___1;
    }
    while_break___1: /* CIL Label */ ;
    }
    {
#line 575
    infd.__fds_bits[0 / (8 * (int )sizeof(__fd_mask ))] |= 1L << 0 % (8 * (int )sizeof(__fd_mask ));
#line 576
    tmp___4 = select(1, (fd_set */* __restrict  */)(& infd), (fd_set */* __restrict  */)((void *)0),
                     (fd_set */* __restrict  */)((void *)0), (struct timeval */* __restrict  */)((void *)0));
    }
#line 576
    if (1 != tmp___4) {
#line 577
      goto while_break___0;
    }
    {
#line 578
    tmp___5 = read(0, (void *)c, (size_t )1);
    }
#line 578
    if (1L != tmp___5) {
#line 579
      goto while_break___0;
    }
#line 580
    if ((int )*c == 13) {
#line 581
      goto while_break___0;
    }
#line 571
    c ++;
  }
  while_break___0: /* CIL Label */ ;
  }
  {
#line 583
  *c = (char )'\000';
#line 584
  fputs((char const   */* __restrict  */)"\r\n", (FILE */* __restrict  */)stderr);
#line 584
  fflush(stderr);
#line 585
  s[0] = (char )(255 & (i >> 8));
#line 586
  s[1] = (char )(255 & i);
#line 587
  s[2] = (char )'\000';
#line 588
  c = crypt(passwd, s);
#line 589
  tmp___6 = strlen((char const   *)c);
#line 589
  tp_sendctl(Serv, (u_int )11, (u_int )tmp___6, (u_char *)c);
  }
#line 590
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 592
  return;
}
}
#line 594 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void server_replied(char *msg , int i ) 
{ 
  char const   *tmp ;

  {
#line 596
  if (i) {
#line 596
    tmp = "accepted";
  } else {
#line 596
    tmp = "rejected";
  }
  {
#line 596
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"[%s %s]\r\n",
          msg, tmp);
  }
#line 597
  return;
}
}
#line 599 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void server_died(void) 
{ 


  {
  {
#line 601
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\r\n[server disconnect]\r\n");
#line 602
  quit___0(0);
  }
#line 603
  return;
}
}
#line 605 "/home/june/repo/benchmarks/collector/temp/remote-tty-4.0/rtty.c"
static void quit___0(int x ) 
{ 


  {
  {
#line 607
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"\r\n[rtty exiting]\r\n");
  }
#line 608
  if (Ttyios_set___0) {
    {
#line 609
    install_ttyios(0, (struct termios  const  *)(& Ttyios_orig___0));
    }
  }
  {
#line 610
  exit(0);
  }
}
}
