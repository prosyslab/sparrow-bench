/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 44
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 144 "/usr/include/libio.h"
struct _IO_FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 102 "/usr/include/stdio.h"
typedef __ssize_t ssize_t;
#line 169
extern struct _IO_FILE *stdout ;
#line 170
extern struct _IO_FILE *stderr ;
#line 242
extern int fflush(FILE *__stream ) ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 830
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) ferror)(FILE *__stream ) ;
#line 846
extern void perror(char const   *__s ) ;
#line 543 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 132 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strncpy)(char * __restrict  __dest ,
                                                                                                  char const   * __restrict  __src ,
                                                                                                  size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 147
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncmp)(char const   *__s1 ,
                                                                                                char const   *__s2 ,
                                                                                                size_t __n )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 360 "/usr/include/unistd.h"
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
#line 79 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
int fd  ;
#line 80 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
char string[40]  ;
#line 82
static void readline(void) ;
#line 83
static char nextchar(void) ;
#line 84
static int skipuntil(char const   *s ) ;
#line 85
static int getentry(void) ;
#line 86
static void capitalize(char *sp ) ;
#line 87
static int letter(char ch ) ;
#line 88
static int digit(char ch ) ;
#line 90
int main(int argc , char **argv ) ;
#line 92 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
int main(int argc , char **argv ) 
{ 
  int i ;
  int propct ;
  char *sp ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
#line 97
  i = 0;
#line 98
  propct = 0;
#line 100
  if (argc != 2) {
    {
#line 101
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"usage: makedefs file\n");
#line 102
    exit(1);
    }
  }
  {
#line 104
  fd = open((char const   *)*(argv + 1), 0);
  }
#line 104
  if (fd < 0) {
    {
#line 105
    perror((char const   *)*(argv + 1));
#line 106
    exit(1);
    }
  }
  {
#line 108
  skipuntil("objects[] = {");
  }
  {
#line 109
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 109
    tmp___2 = getentry();
    }
#line 109
    if (! tmp___2) {
#line 109
      goto while_break;
    }
#line 110
    if (! string[0]) {
#line 111
      i ++;
#line 112
      goto while_continue;
    }
#line 114
    sp = string;
    {
#line 114
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 114
      if (! *sp) {
#line 114
        goto while_break___0;
      }
#line 115
      if ((int )*sp == 32) {
#line 116
        *sp = (char )'_';
      } else
#line 115
      if ((int )*sp == 9) {
#line 116
        *sp = (char )'_';
      } else
#line 115
      if ((int )*sp == 45) {
#line 116
        *sp = (char )'_';
      }
#line 114
      sp ++;
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 117
    tmp___0 = strncmp((char const   *)(string), "RIN_", (size_t )4);
    }
#line 117
    if (! tmp___0) {
      {
#line 118
      capitalize(string + 4);
#line 119
      tmp = propct;
#line 119
      propct ++;
#line 119
      printf((char const   */* __restrict  */)"#define\t%s\tu.uprops[%d].p_flgs\n",
             string + 4, tmp);
      }
    }
#line 122
    sp = string;
    {
#line 122
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 122
      if (! *sp) {
#line 122
        goto while_break___1;
      }
      {
#line 123
      capitalize(sp);
#line 122
      sp ++;
      }
    }
    while_break___1: /* CIL Label */ ;
    }
    {
#line 125
    tmp___1 = strncmp((char const   *)(string), "WORTHLESS_PIECE_OF_", (size_t )19);
    }
#line 125
    if (tmp___1) {
      {
#line 128
      printf((char const   */* __restrict  */)"#define\t%s\t%d\n", string, i);
      }
    } else {
      {
#line 126
      printf((char const   */* __restrict  */)"/* #define %s\t%d */\n", string, i);
      }
    }
#line 129
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 131
  printf((char const   */* __restrict  */)"\n#define\tCORPSE\tDEAD_HUMAN\n");
#line 132
  printf((char const   */* __restrict  */)"#define\tLAST_GEM\t(JADE+1)\n");
#line 133
  printf((char const   */* __restrict  */)"#define\tLAST_RING\t%d\n", propct);
#line 134
  printf((char const   */* __restrict  */)"#define\tNROFOBJECTS\t%d\n", i - 1);
#line 135
  fflush(stdout);
#line 136
  tmp___3 = ferror(stdout);
  }
#line 136
  if (tmp___3) {
    {
#line 137
    perror("standard output");
#line 138
    exit(1);
    }
  }
  {
#line 140
  exit(0);
  }
}
}
#line 143 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
char line[1000]  ;
#line 143 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
char *lp  =    line;
#line 143 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
char *lp0  =    line;
#line 143 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
char *lpe  =    line;
#line 144 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
int eof  ;
#line 146 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static void readline(void) 
{ 
  int n ;
  ssize_t tmp ;

  {
  {
#line 149
  tmp = read(fd, (void *)lp0, (size_t )((line + 1000) - lp0));
#line 149
  n = (int )tmp;
  }
#line 150
  if (n < 0) {
    {
#line 151
    printf((char const   */* __restrict  */)"Input error.\n");
#line 152
    exit(1);
    }
  }
#line 154
  if (n == 0) {
#line 155
    eof ++;
  }
#line 156
  lpe = lp0 + n;
#line 157
  return;
}
}
#line 159 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static char nextchar(void) 
{ 
  char *tmp ;
  int tmp___0 ;

  {
#line 162
  if ((unsigned long )lp == (unsigned long )lpe) {
    {
#line 163
    readline();
#line 164
    lp = lp0;
    }
  }
#line 166
  if ((unsigned long )lp == (unsigned long )lpe) {
#line 166
    tmp___0 = 0;
  } else {
#line 166
    tmp = lp;
#line 166
    lp ++;
#line 166
    tmp___0 = (int )*tmp;
  }
#line 166
  return ((char )tmp___0);
}
}
#line 169 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static int skipuntil(char const   *s ) 
{ 
  char const   *sp0 ;
  char *sp1 ;
  char tmp ;
  char *lp1 ;
  char *lp2 ;
  char *tmp___0 ;
  char *tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;

  {
  loop: 
  {
#line 176
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 176
    tmp = nextchar();
    }
#line 176
    if (! ((int const   )*s != (int const   )tmp)) {
#line 176
      goto while_break;
    }
#line 177
    if (eof) {
      {
#line 178
      printf((char const   */* __restrict  */)"Cannot skipuntil %s\n", s);
#line 179
      exit(1);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 181
  tmp___3 = strlen(s);
  }
#line 181
  if ((long )((int )tmp___3) > (lpe - lp) + 1L) {
#line 183
    lp2 = lp;
#line 184
    lp = lp0;
#line 184
    lp1 = lp;
    {
#line 185
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 185
      if (! ((unsigned long )lp2 != (unsigned long )lpe)) {
#line 185
        goto while_break___0;
      }
#line 186
      tmp___0 = lp1;
#line 186
      lp1 ++;
#line 186
      tmp___1 = lp2;
#line 186
      lp2 ++;
#line 186
      *tmp___0 = *tmp___1;
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 187
    lp2 = lp0;
#line 188
    lp0 = lp1;
#line 189
    readline();
#line 190
    lp0 = lp2;
#line 191
    tmp___2 = strlen(s);
    }
#line 191
    if ((long )((int )tmp___2) > (lpe - lp) + 1L) {
      {
#line 192
      printf((char const   */* __restrict  */)"error in skipuntil");
#line 193
      exit(1);
      }
    }
  }
#line 196
  sp0 = s + 1;
#line 197
  sp1 = lp;
  {
#line 198
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 198
    if (*sp0) {
#line 198
      if (! ((int const   )*sp0 == (int const   )*sp1)) {
#line 198
        goto while_break___1;
      }
    } else {
#line 198
      goto while_break___1;
    }
#line 199
    sp0 ++;
#line 199
    sp1 ++;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 200
  if (! *sp0) {
#line 201
    lp = sp1;
#line 202
    return (1);
  }
#line 204
  goto loop;
}
}
#line 207 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static int getentry(void) 
{ 
  int inbraces ;
  int inparens ;
  int stringseen ;
  int commaseen ;
  int prefix ;
  char ch ;
  char identif[10] ;
  char *ip ;
  char *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  char pch ;
  char tmp___7 ;
  char *sp ;
  char pch___0 ;
  int store ;
  int tmp___8 ;
  int tmp___9 ;
  char *tmp___10 ;

  {
#line 210
  inbraces = 0;
#line 210
  inparens = 0;
#line 210
  stringseen = 0;
#line 210
  commaseen = 0;
#line 211
  prefix = 0;
#line 215
  string[4] = (char)0;
#line 215
  string[0] = string[4];
  {
#line 220
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 221
    ch = nextchar();
    }
    swi: 
    {
#line 223
    tmp___6 = letter((int )ch);
    }
#line 223
    if (tmp___6) {
#line 224
      ip = identif;
      {
#line 225
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 226
        if ((unsigned long )ip < (unsigned long )((identif + 10) - 1)) {
#line 227
          tmp = ip;
#line 227
          ip ++;
#line 227
          *tmp = ch;
        }
        {
#line 228
        ch = nextchar();
#line 225
        tmp___0 = letter((int )ch);
        }
#line 225
        if (! tmp___0) {
          {
#line 225
          tmp___1 = digit((int )ch);
          }
#line 225
          if (! tmp___1) {
#line 225
            goto while_break___0;
          }
        }
      }
      while_break___0: /* CIL Label */ ;
      }
#line 230
      *ip = (char)0;
      {
#line 231
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 231
        if (! ((int )ch == 32)) {
#line 231
          if (! ((int )ch == 9)) {
#line 231
            goto while_break___1;
          }
        }
        {
#line 232
        ch = nextchar();
        }
      }
      while_break___1: /* CIL Label */ ;
      }
#line 233
      if ((int )ch == 40) {
#line 233
        if (! inparens) {
#line 233
          if (! stringseen) {
            {
#line 234
            tmp___2 = strcmp((char const   *)(identif), "WAND");
            }
#line 234
            if (tmp___2) {
              {
#line 234
              tmp___3 = strcmp((char const   *)(identif), "RING");
              }
#line 234
              if (tmp___3) {
                {
#line 234
                tmp___4 = strcmp((char const   *)(identif), "POTION");
                }
#line 234
                if (tmp___4) {
                  {
#line 234
                  tmp___5 = strcmp((char const   *)(identif), "SCROLL");
                  }
#line 234
                  if (! tmp___5) {
                    {
#line 238
                    strncpy((char */* __restrict  */)(string), (char const   */* __restrict  */)(identif),
                            (size_t )3);
#line 238
                    string[3] = (char )'_';
#line 238
                    prefix = 4;
                    }
                  }
                } else {
                  {
#line 238
                  strncpy((char */* __restrict  */)(string), (char const   */* __restrict  */)(identif),
                          (size_t )3);
#line 238
                  string[3] = (char )'_';
#line 238
                  prefix = 4;
                  }
                }
              } else {
                {
#line 238
                strncpy((char */* __restrict  */)(string), (char const   */* __restrict  */)(identif),
                        (size_t )3);
#line 238
                string[3] = (char )'_';
#line 238
                prefix = 4;
                }
              }
            } else {
              {
#line 238
              strncpy((char */* __restrict  */)(string), (char const   */* __restrict  */)(identif),
                      (size_t )3);
#line 238
              string[3] = (char )'_';
#line 238
              prefix = 4;
              }
            }
          }
        }
      }
    }
    {
#line 243
    if ((int )ch == 47) {
#line 243
      goto case_47;
    }
#line 248
    if ((int )ch == 123) {
#line 248
      goto case_123;
    }
#line 251
    if ((int )ch == 40) {
#line 251
      goto case_40;
    }
#line 254
    if ((int )ch == 125) {
#line 254
      goto case_125;
    }
#line 259
    if ((int )ch == 41) {
#line 259
      goto case_41;
    }
#line 266
    if ((int )ch == 10) {
#line 266
      goto case_10;
    }
#line 278
    if ((int )ch == 44) {
#line 278
      goto case_44;
    }
#line 289
    if ((int )ch == 39) {
#line 289
      goto case_39;
    }
#line 297
    if ((int )ch == 34) {
#line 297
      goto case_34;
    }
#line 242
    goto switch_break;
    case_47: /* CIL Label */ 
    {
#line 245
    ch = nextchar();
    }
#line 245
    if ((int )ch == 42) {
      {
#line 246
      skipuntil("*/");
      }
    }
#line 247
    goto swi;
    case_123: /* CIL Label */ 
#line 249
    inbraces ++;
#line 250
    goto while_continue;
    case_40: /* CIL Label */ 
#line 252
    inparens ++;
#line 253
    goto while_continue;
    case_125: /* CIL Label */ 
#line 255
    inbraces --;
#line 256
    if (inbraces < 0) {
#line 257
      return (0);
    }
#line 258
    goto while_continue;
    case_41: /* CIL Label */ 
#line 260
    inparens --;
#line 261
    if (inparens < 0) {
      {
#line 262
      printf((char const   */* __restrict  */)"too many ) ?");
#line 263
      exit(1);
      }
    }
#line 265
    goto while_continue;
    case_10: /* CIL Label */ 
    {
#line 268
    ch = nextchar();
    }
#line 268
    if ((int )ch == 35) {
      {
#line 271
      while (1) {
        while_continue___2: /* CIL Label */ ;
        {
#line 272
        pch = ch;
#line 273
        ch = nextchar();
        }
#line 271
        if (! ((int )ch != 10)) {
#line 271
          if (! ((int )pch == 92)) {
#line 271
            goto while_break___2;
          }
        }
      }
      while_break___2: /* CIL Label */ ;
      }
#line 275
      goto while_continue;
    }
#line 277
    goto swi;
    case_44: /* CIL Label */ 
#line 279
    if (! inparens) {
#line 279
      if (! inbraces) {
#line 280
        if (prefix) {
#line 280
          if (! string[prefix]) {
#line 281
            string[0] = (char)0;
          }
        }
#line 282
        if (stringseen) {
#line 283
          return (1);
        }
        {
#line 284
        printf((char const   */* __restrict  */)"unexpected ,\n");
#line 285
        exit(1);
        }
      }
    }
#line 287
    commaseen ++;
#line 288
    goto while_continue;
    case_39: /* CIL Label */ 
    {
#line 290
    ch = nextchar();
    }
#line 290
    if ((int )ch == 92) {
      {
#line 291
      ch = nextchar();
      }
    }
    {
#line 292
    tmp___7 = nextchar();
    }
#line 292
    if ((int )tmp___7 != 39) {
      {
#line 293
      printf((char const   */* __restrict  */)"strange character denotation?\n");
#line 294
      exit(1);
      }
    }
#line 296
    goto while_continue;
    case_34: /* CIL Label */ 
#line 299
    sp = string + prefix;
#line 301
    if (inbraces) {
#line 301
      goto _L;
    } else
#line 301
    if (inparens) {
      _L: /* CIL Label */ 
#line 301
      tmp___8 = stringseen;
#line 301
      stringseen ++;
#line 301
      if (tmp___8) {
#line 301
        tmp___9 = 0;
      } else
#line 301
      if (! commaseen) {
#line 301
        tmp___9 = 1;
      } else {
#line 301
        tmp___9 = 0;
      }
    } else {
#line 301
      tmp___9 = 0;
    }
#line 301
    store = tmp___9;
    {
#line 303
    while (1) {
      while_continue___3: /* CIL Label */ ;
      {
#line 304
      pch___0 = ch;
#line 305
      ch = nextchar();
      }
#line 306
      if (store) {
#line 306
        if ((unsigned long )sp < (unsigned long )(string + 40)) {
#line 307
          tmp___10 = sp;
#line 307
          sp ++;
#line 307
          *tmp___10 = ch;
        }
      }
#line 303
      if (! ((int )ch != 34)) {
#line 303
        if (! ((int )pch___0 == 92)) {
#line 303
          goto while_break___3;
        }
      }
    }
    while_break___3: /* CIL Label */ ;
    }
#line 309
    if (store) {
#line 310
      sp --;
#line 310
      *sp = (char)0;
    }
#line 311
    goto while_continue;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
}
}
#line 317 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static void capitalize(char *sp ) 
{ 


  {
#line 321
  if (97 <= (int )*sp) {
#line 321
    if ((int )*sp <= 122) {
#line 322
      *sp = (char )((int )*sp + -32);
    }
  }
#line 323
  return;
}
}
#line 325 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static int letter(char ch ) 
{ 
  int tmp ;

  {
#line 329
  if (97 <= (int )ch) {
#line 329
    if ((int )ch <= 122) {
#line 329
      tmp = 1;
    } else {
#line 329
      goto _L;
    }
  } else
  _L: /* CIL Label */ 
#line 329
  if (65 <= (int )ch) {
#line 329
    if ((int )ch <= 90) {
#line 329
      tmp = 1;
    } else {
#line 329
      tmp = 0;
    }
  } else {
#line 329
    tmp = 0;
  }
#line 329
  return (tmp);
}
}
#line 333 "/home/june/collector/temp/bsdgames-2.17/hack/makedefs.c"
static int digit(char ch ) 
{ 
  int tmp ;

  {
#line 337
  if (48 <= (int )ch) {
#line 337
    if ((int )ch <= 57) {
#line 337
      tmp = 1;
    } else {
#line 337
      tmp = 0;
    }
  } else {
#line 337
    tmp = 0;
  }
#line 337
  return (tmp);
}
}
