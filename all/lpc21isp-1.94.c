/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 75 "/usr/include/time.h"
typedef __time_t time_t;
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 23 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned char cc_t;
#line 24 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned int speed_t;
#line 25 "/usr/include/x86_64-linux-gnu/bits/termios.h"
typedef unsigned int tcflag_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/termios.h"
struct termios {
   tcflag_t c_iflag ;
   tcflag_t c_oflag ;
   tcflag_t c_cflag ;
   tcflag_t c_lflag ;
   cc_t c_line ;
   cc_t c_cc[32] ;
   speed_t c_ispeed ;
   speed_t c_ospeed ;
};
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 123 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
enum __anonenum_TARGET_29 {
    NXP_ARM = 0,
    ANALOG_DEVICES_ARM = 1
} ;
#line 123 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef enum __anonenum_TARGET_29 TARGET;
#line 129
enum __anonenum_TARGET_MODE_30 {
    PROGRAM_MODE = 0,
    RUN_MODE = 1
} ;
#line 129 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef enum __anonenum_TARGET_MODE_30 TARGET_MODE;
#line 135
enum __anonenum_FILE_FORMAT_TYPE_31 {
    FORMAT_BINARY = 0,
    FORMAT_HEX = 1
} ;
#line 135 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef enum __anonenum_FILE_FORMAT_TYPE_31 FILE_FORMAT_TYPE;
#line 141 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef unsigned char BINARY;
#line 144
struct file_list;
#line 144 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef struct file_list FILE_LIST;
#line 154 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
struct file_list {
   char const   *name ;
   FILE_LIST *prev ;
   char hex_flag ;
};
#line 161 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
struct __anonstruct_ISP_ENVIRONMENT_32 {
   TARGET micro ;
   FILE_FORMAT_TYPE FileFormat ;
   unsigned char ProgramChip ;
   unsigned char ControlLines ;
   unsigned char ControlLinesSwapped ;
   unsigned char ControlLinesInverted ;
   unsigned char LogFile ;
   FILE_LIST *f_list ;
   int nQuestionMarks ;
   int DoNotStart ;
   int BootHold ;
   char *serial_port ;
   unsigned char TerminalOnly ;
   unsigned char TerminalAfterUpload ;
   unsigned char LocalEcho ;
   unsigned char HalfDuplex ;
   unsigned char DetectOnly ;
   unsigned char WipeDevice ;
   unsigned char Verify ;
   int DetectedDevice ;
   char *baud_rate ;
   char StringOscillator[6] ;
   BINARY *FileContent ;
   BINARY *BinaryContent ;
   unsigned long BinaryLength ;
   unsigned long BinaryOffset ;
   unsigned long StartAddress ;
   unsigned long BinaryMemSize ;
   int fdCom ;
   struct termios oldtio ;
   struct termios newtio ;
   unsigned int serial_timeout_count ;
};
#line 161 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
typedef struct __anonstruct_ISP_ENVIRONMENT_32 ISP_ENVIRONMENT;
#line 113 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.h"
enum __anonenum_CHIP_VARIANT_33 {
    CHIP_VARIANT_NONE = 0,
    CHIP_VARIANT_LPC43XX = 1,
    CHIP_VARIANT_LPC2XXX = 2,
    CHIP_VARIANT_LPC18XX = 3,
    CHIP_VARIANT_LPC17XX = 4,
    CHIP_VARIANT_LPC13XX = 5,
    CHIP_VARIANT_LPC11XX = 6,
    CHIP_VARIANT_LPC8XX = 7
} ;
#line 113 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.h"
typedef enum __anonenum_CHIP_VARIANT_33 CHIP_VARIANT;
#line 125 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.h"
struct __anonstruct_LPC_DEVICE_TYPE_34 {
   unsigned long const   id ;
   unsigned long const   id2 ;
   unsigned int const   EvalId2 ;
   char const   *Product ;
   unsigned int const   FlashSize ;
   unsigned int const   RAMSize ;
   unsigned int FlashSectors ;
   unsigned int MaxCopySize ;
   unsigned int const   *SectorTable ;
   CHIP_VARIANT const   ChipVariant ;
};
#line 125 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.h"
typedef struct __anonstruct_LPC_DEVICE_TYPE_34 LPC_DEVICE_TYPE;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 40 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcterm.h"
typedef int BOOL;
#line 39 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.h"
struct __anonstruct_AD_SYNC_RESPONSE_33 {
   BINARY product_id[15] ;
   BINARY version[3] ;
   BINARY reserved[4] ;
   BINARY terminator[2] ;
};
#line 39 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.h"
typedef struct __anonstruct_AD_SYNC_RESPONSE_33 AD_SYNC_RESPONSE;
#line 101 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
struct __anonstruct_AD_PACKET_34 {
   char start1 ;
   char start2 ;
   BINARY bytes ;
   char cmd ;
   BINARY address_h ;
   BINARY address_u ;
   BINARY address_m ;
   BINARY address_l ;
   BINARY data[251] ;
};
#line 101 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
typedef struct __anonstruct_AD_PACKET_34 AD_PACKET;
/* compiler builtin: 
   void *__builtin_alloca(unsigned long  ) ;  */
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 187
extern  __attribute__((__nothrow__)) unsigned long ( __attribute__((__nonnull__(1),
__leaf__)) strtoul)(char const   * __restrict  __nptr , char ** __restrict  __endptr ,
                    int __base ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 66 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 69
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) memcmp)(void const   *__s1 ,
                                                                                               void const   *__s2 ,
                                                                                               size_t __n )  __attribute__((__pure__)) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 147
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncmp)(char const   *__s1 ,
                                                                                                char const   *__s2 ,
                                                                                                size_t __n )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 98 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
extern int kbhit(void) ;
#line 99
extern int getch(void) ;
#line 169 "/usr/include/stdio.h"
extern struct _IO_FILE *stdout ;
#line 242
extern int fflush(FILE *__stream ) ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 192 "/usr/include/time.h"
extern  __attribute__((__nothrow__)) time_t ( __attribute__((__leaf__)) time)(time_t *__timer ) ;
#line 254 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
extern void DebugPrintf(int level , char const   *fmt  , ...) ;
#line 259
extern void ControlXonXoffSerialPort(ISP_ENVIRONMENT *IspEnvironment , unsigned char XonXoff ) ;
#line 288
extern void ReceiveComPort(ISP_ENVIRONMENT *IspEnvironment , char const   *Ans , unsigned long MaxSize ,
                           unsigned long *RealSize , unsigned long WantedNr0x0A ,
                           unsigned int timeOutMilliseconds ) ;
#line 292
extern void PrepareKeyboardTtySettings(void) ;
#line 293
extern void ResetKeyboardTtySettings(void) ;
#line 294
extern void ResetTarget(ISP_ENVIRONMENT *IspEnvironment , TARGET_MODE mode ) ;
#line 296
extern void DumpString(int level , void const   *s , size_t size , char const   *prefix_string ) ;
#line 297
extern void SendComPort(ISP_ENVIRONMENT *IspEnvironment , char const   *s ) ;
#line 298
extern void SendComPortBlock(ISP_ENVIRONMENT *IspEnvironment , void const   *s , size_t n ) ;
#line 299
extern int ReceiveComPortBlockComplete(ISP_ENVIRONMENT *IspEnvironment , void *block ,
                                       size_t size , unsigned int timeout ) ;
#line 139 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.h"
int NxpDownload(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 141
unsigned long ReturnValueLpcRamStart(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 143
unsigned long ReturnValueLpcRamBase(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 46 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_210x[15]  = 
#line 46 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192};
#line 52 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_2103[8]  = 
#line 52
  {      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096};
#line 57 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_2109[8]  = 
#line 57
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192};
#line 62 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_211x[15]  = 
#line 62
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192};
#line 68 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_212x[17]  = 
#line 68
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192};
#line 76 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_213x[28]  = 
#line 76
  {      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096};
#line 85 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_17xx[30]  = 
#line 85
  {      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096,      (unsigned int const   )4096, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768,      (unsigned int const   )32768, 
        (unsigned int const   )32768,      (unsigned int const   )32768};
#line 94 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_18xx[15]  = 
#line 94
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536, 
        (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536};
#line 101 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_43xx[15]  = 
#line 101
  {      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192,      (unsigned int const   )8192, 
        (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536, 
        (unsigned int const   )65536,      (unsigned int const   )65536,      (unsigned int const   )65536};
#line 108 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int const   SectorTable_8xx[16]  = 
#line 108
  {      (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024, 
        (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024, 
        (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024, 
        (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024,      (unsigned int const   )1024};
#line 114 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned int SectorTable_RAM[1]  = {      65000U};
#line 116 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static LPC_DEVICE_TYPE LPCtypes[136]  = 
#line 116
  {      {(unsigned long const   )0, (unsigned long const   )0, (unsigned int const   )0,
      (char const   *)0, (unsigned int const   )0, (unsigned int const   )0, 0U, 0U,
      (unsigned int const   *)0, (CHIP_VARIANT const   )0}, 
        {(unsigned long const   )33024, (unsigned long const   )0, (unsigned int const   )0,
      "810M021FN8", (unsigned int const   )4, (unsigned int const   )1, 4U, 256U,
      SectorTable_8xx, (CHIP_VARIANT const   )7}, 
        {(unsigned long const   )33040, (unsigned long const   )0, (unsigned int const   )0,
      "811M001FDH16", (unsigned int const   )8, (unsigned int const   )2, 8U, 1024U,
      SectorTable_8xx, (CHIP_VARIANT const   )7}, 
        {(unsigned long const   )33056, (unsigned long const   )0, (unsigned int const   )0,
      "812M101FDH16", (unsigned int const   )16, (unsigned int const   )4, 16U, 1024U,
      SectorTable_8xx, (CHIP_VARIANT const   )7}, 
        {(unsigned long const   )33057, (unsigned long const   )0, (unsigned int const   )0,
      "812M101FD20", (unsigned int const   )16, (unsigned int const   )4, 16U, 1024U,
      SectorTable_8xx, (CHIP_VARIANT const   )7}, 
        {(unsigned long const   )33058, (unsigned long const   )0, (unsigned int const   )0,
      "812M101FDH20", (unsigned int const   )16, (unsigned int const   )4, 16U, 1024U,
      SectorTable_8xx, (CHIP_VARIANT const   )7}, 
        {(unsigned long const   )620761131, (unsigned long const   )0, (unsigned int const   )0,
      "1102", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )168235051, (unsigned long const   )0, (unsigned int const   )0,
      "1110.../002", (unsigned int const   )4, (unsigned int const   )1, 1U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )436670507, (unsigned long const   )0, (unsigned int const   )0,
      "1110.../002", (unsigned int const   )4, (unsigned int const   )1, 1U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )169267243, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../002", (unsigned int const   )8, (unsigned int const   )2, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )437702699, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../002", (unsigned int const   )8, (unsigned int const   )2, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )69095467, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../101", (unsigned int const   )8, (unsigned int const   )2, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )622252075, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../102", (unsigned int const   )8, (unsigned int const   )2, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )68571179, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../201", (unsigned int const   )8, (unsigned int const   )4, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )622235691, (unsigned long const   )0, (unsigned int const   )0,
      "1111.../202", (unsigned int const   )8, (unsigned int const   )4, 2U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )70078507, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../101", (unsigned int const   )16, (unsigned int const   )2, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )623169579, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../102", (unsigned int const   )16, (unsigned int const   )2, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )170168363, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../102", (unsigned int const   )16, (unsigned int const   )4, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )438603819, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../102", (unsigned int const   )16, (unsigned int const   )4, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )69554219, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../201", (unsigned int const   )16, (unsigned int const   )4, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )623153195, (unsigned long const   )0, (unsigned int const   )0,
      "1112.../202", (unsigned int const   )16, (unsigned int const   )4, 4U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )70537259, (unsigned long const   )0, (unsigned int const   )0,
      "1113.../201", (unsigned int const   )24, (unsigned int const   )4, 6U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )624070699, (unsigned long const   )0, (unsigned int const   )0,
      "1113.../202", (unsigned int const   )24, (unsigned int const   )4, 6U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )70520875, (unsigned long const   )0, (unsigned int const   )0,
      "1113.../301", (unsigned int const   )24, (unsigned int const   )8, 6U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )624037931, (unsigned long const   )0, (unsigned int const   )0,
      "1113.../302", (unsigned int const   )24, (unsigned int const   )8, 6U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )172003371, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../102", (unsigned int const   )32, (unsigned int const   )4, 8U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )440438827, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../102", (unsigned int const   )32, (unsigned int const   )4, 8U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )71585835, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../201", (unsigned int const   )32, (unsigned int const   )4, 8U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )624988203, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../202", (unsigned int const   )32, (unsigned int const   )4, 8U, 1024U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )71569451, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../301", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )624955435, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../302", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )262210, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../203", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )262208, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../303", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )262240, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../323", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )262256, (unsigned long const   )0, (unsigned int const   )0,
      "1114.../333", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )327808, (unsigned long const   )0, (unsigned int const   )0,
      "1115.../303", (unsigned int const   )64, (unsigned int const   )8, 16U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )337711147, (unsigned long const   )0, (unsigned int const   )0,
      "11C12.../301", (unsigned int const   )16, (unsigned int const   )8, 4U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )339742763, (unsigned long const   )0, (unsigned int const   )0,
      "11C14.../301", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )338759723, (unsigned long const   )0, (unsigned int const   )0,
      "11C22.../301", (unsigned int const   )16, (unsigned int const   )8, 4U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )338694187, (unsigned long const   )0, (unsigned int const   )0,
      "11C24.../301", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )56885291, (unsigned long const   )0, (unsigned int const   )0,
      "1224.../101", (unsigned int const   )32, (unsigned int const   )8, 4U, 2048U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )56893483, (unsigned long const   )0, (unsigned int const   )0,
      "1224.../121", (unsigned int const   )48, (unsigned int const   )12, 32U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )56950827, (unsigned long const   )0, (unsigned int const   )0,
      "1225.../301", (unsigned int const   )64, (unsigned int const   )16, 32U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )56959019, (unsigned long const   )0, (unsigned int const   )0,
      "1225.../321", (unsigned int const   )80, (unsigned int const   )20, 32U, 4096U,
      SectorTable_17xx, (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )57016363, (unsigned long const   )0, (unsigned int const   )0,
      "1226", (unsigned int const   )96, (unsigned int const   )24, 32U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )57081899, (unsigned long const   )0, (unsigned int const   )0,
      "1227", (unsigned int const   )128, (unsigned int const   )32, 32U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )6}, 
        {(unsigned long const   )742543403, (unsigned long const   )0, (unsigned int const   )0,
      "1311", (unsigned int const   )8, (unsigned int const   )4, 2U, 1024U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )404131883, (unsigned long const   )0, (unsigned int const   )0,
      "1311/01", (unsigned int const   )8, (unsigned int const   )4, 2U, 1024U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )742395947, (unsigned long const   )0, (unsigned int const   )0,
      "1313", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )405803051, (unsigned long const   )0, (unsigned int const   )0,
      "1313/01", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )1023492139, (unsigned long const   )0, (unsigned int const   )0,
      "1342", (unsigned int const   )16, (unsigned int const   )4, 4U, 1024U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )1023410219, (unsigned long const   )0, (unsigned int const   )0,
      "1343", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )5}, 
        {(unsigned long const   )620761368, (unsigned long const   )0, (unsigned int const   )0,
      "1751", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )620761377, (unsigned long const   )0, (unsigned int const   )0,
      "1752", (unsigned int const   )64, (unsigned int const   )16, 16U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )620828450, (unsigned long const   )0, (unsigned int const   )0,
      "1754", (unsigned int const   )128, (unsigned int const   )32, 18U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )620828451, (unsigned long const   )0, (unsigned int const   )0,
      "1756", (unsigned int const   )256, (unsigned int const   )32, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )620838711, (unsigned long const   )0, (unsigned int const   )0,
      "1758", (unsigned int const   )512, (unsigned int const   )64, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )621885239, (unsigned long const   )0, (unsigned int const   )0,
      "1759", (unsigned int const   )512, (unsigned int const   )64, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )637606178, (unsigned long const   )0, (unsigned int const   )0,
      "1764", (unsigned int const   )128, (unsigned int const   )32, 18U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )637613875, (unsigned long const   )0, (unsigned int const   )0,
      "1765", (unsigned int const   )256, (unsigned int const   )64, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )637615923, (unsigned long const   )0, (unsigned int const   )0,
      "1766", (unsigned int const   )256, (unsigned int const   )64, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )637610039, (unsigned long const   )0, (unsigned int const   )0,
      "1767", (unsigned int const   )512, (unsigned int const   )64, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )637615927, (unsigned long const   )0, (unsigned int const   )0,
      "1768", (unsigned int const   )512, (unsigned int const   )64, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )638664503, (unsigned long const   )0, (unsigned int const   )0,
      "1769", (unsigned int const   )512, (unsigned int const   )64, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )654381362, (unsigned long const   )0, (unsigned int const   )0,
      "1774", (unsigned int const   )128, (unsigned int const   )40, 18U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )655957827, (unsigned long const   )0, (unsigned int const   )0,
      "1776", (unsigned int const   )256, (unsigned int const   )80, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )655963975, (unsigned long const   )0, (unsigned int const   )0,
      "1777", (unsigned int const   )512, (unsigned int const   )96, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )655966023, (unsigned long const   )0, (unsigned int const   )0,
      "1778", (unsigned int const   )512, (unsigned int const   )96, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )672995139, (unsigned long const   )0, (unsigned int const   )0,
      "1785", (unsigned int const   )256, (unsigned int const   )80, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )672997187, (unsigned long const   )0, (unsigned int const   )0,
      "1786", (unsigned int const   )256, (unsigned int const   )80, 22U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )673003335, (unsigned long const   )0, (unsigned int const   )0,
      "1787", (unsigned int const   )512, (unsigned int const   )96, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )673005383, (unsigned long const   )0, (unsigned int const   )0,
      "1788", (unsigned int const   )512, (unsigned int const   )96, 30U, 4096U, SectorTable_17xx,
      (CHIP_VARIANT const   )4}, 
        {(unsigned long const   )4027259711U, (unsigned long const   )0, (unsigned int const   )1,
      "1810", (unsigned int const   )0, (unsigned int const   )32, 0U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4027226940U, (unsigned long const   )0, (unsigned int const   )1,
      "1820", (unsigned int const   )0, (unsigned int const   )32, 0U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026571312U, (unsigned long const   )0, (unsigned int const   )1,
      "1830", (unsigned int const   )0, (unsigned int const   )32, 0U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026653232U, (unsigned long const   )68, (unsigned int const   )1,
      "1833", (unsigned int const   )512, (unsigned int const   )32, 11U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026653232U, (unsigned long const   )0, (unsigned int const   )1,
      "1837", (unsigned int const   )1024, (unsigned int const   )32, 15U, 8192U,
      SectorTable_18xx, (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026570800U, (unsigned long const   )0, (unsigned int const   )1,
      "1850", (unsigned int const   )0, (unsigned int const   )32, 0U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026652720U, (unsigned long const   )68, (unsigned int const   )1,
      "1853", (unsigned int const   )512, (unsigned int const   )32, 11U, 8192U, SectorTable_18xx,
      (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )4026652720U, (unsigned long const   )0, (unsigned int const   )1,
      "1857", (unsigned int const   )1024, (unsigned int const   )32, 15U, 8192U,
      SectorTable_18xx, (CHIP_VARIANT const   )3}, 
        {(unsigned long const   )327441, (unsigned long const   )0, (unsigned int const   )0,
      "2103", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_2103,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )4293984018U, (unsigned long const   )0, (unsigned int const   )0,
      "2104", (unsigned int const   )128, (unsigned int const   )16, 15U, 8192U, SectorTable_210x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )4293984034U, (unsigned long const   )0, (unsigned int const   )0,
      "2105", (unsigned int const   )128, (unsigned int const   )32, 15U, 8192U, SectorTable_210x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )4293984050U, (unsigned long const   )0, (unsigned int const   )0,
      "2106", (unsigned int const   )128, (unsigned int const   )64, 15U, 8192U, SectorTable_210x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )33685249, (unsigned long const   )0, (unsigned int const   )0,
      "2109", (unsigned int const   )64, (unsigned int const   )8, 8U, 4096U, SectorTable_2109,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )16908050, (unsigned long const   )0, (unsigned int const   )0,
      "2114", (unsigned int const   )128, (unsigned int const   )16, 15U, 8192U, SectorTable_211x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )33685266, (unsigned long const   )0, (unsigned int const   )0,
      "2119", (unsigned int const   )128, (unsigned int const   )16, 15U, 8192U, SectorTable_211x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )16908051, (unsigned long const   )0, (unsigned int const   )0,
      "2124", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )33685267, (unsigned long const   )0, (unsigned int const   )0,
      "2129", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )196353, (unsigned long const   )0, (unsigned int const   )0,
      "2131", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )196369, (unsigned long const   )0, (unsigned int const   )0,
      "2132", (unsigned int const   )64, (unsigned int const   )16, 9U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )196370, (unsigned long const   )0, (unsigned int const   )0,
      "2134", (unsigned int const   )128, (unsigned int const   )16, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )196387, (unsigned long const   )0, (unsigned int const   )0,
      "2136", (unsigned int const   )256, (unsigned int const   )32, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )196389, (unsigned long const   )0, (unsigned int const   )0,
      "2138", (unsigned int const   )512, (unsigned int const   )32, 27U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67305217, (unsigned long const   )0, (unsigned int const   )0,
      "2141", (unsigned int const   )32, (unsigned int const   )8, 8U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67305233, (unsigned long const   )0, (unsigned int const   )0,
      "2142", (unsigned int const   )64, (unsigned int const   )16, 9U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67305234, (unsigned long const   )0, (unsigned int const   )0,
      "2144", (unsigned int const   )128, (unsigned int const   )16, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67305251, (unsigned long const   )0, (unsigned int const   )0,
      "2146", (unsigned int const   )256, (unsigned int const   )40, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67305253, (unsigned long const   )0, (unsigned int const   )0,
      "2148", (unsigned int const   )512, (unsigned int const   )40, 27U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )50462483, (unsigned long const   )0, (unsigned int const   )0,
      "2194", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )50462482, (unsigned long const   )0, (unsigned int const   )0,
      "2210", (unsigned int const   )0, (unsigned int const   )16, 0U, 8192U, SectorTable_211x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67239698, (unsigned long const   )0, (unsigned int const   )0,
      "2212", (unsigned int const   )128, (unsigned int const   )16, 15U, 8192U, SectorTable_211x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )100794131, (unsigned long const   )0, (unsigned int const   )0,
      "2214", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )67239699, (unsigned long const   )0, (unsigned int const   )0,
      "2292", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )84016915, (unsigned long const   )0, (unsigned int const   )0,
      "2294", (unsigned int const   )256, (unsigned int const   )16, 17U, 8192U, SectorTable_212x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369161985, (unsigned long const   )0, (unsigned int const   )0,
      "2361", (unsigned int const   )128, (unsigned int const   )34, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369164066, (unsigned long const   )0, (unsigned int const   )0,
      "2362", (unsigned int const   )128, (unsigned int const   )34, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )100924162, (unsigned long const   )0, (unsigned int const   )0,
      "2364", (unsigned int const   )128, (unsigned int const   )34, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369162498, (unsigned long const   )0, (unsigned int const   )0,
      "2364", (unsigned int const   )128, (unsigned int const   )34, 11U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369158179, (unsigned long const   )0, (unsigned int const   )0,
      "2365", (unsigned int const   )256, (unsigned int const   )58, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )100924195, (unsigned long const   )0, (unsigned int const   )0,
      "2366", (unsigned int const   )256, (unsigned int const   )58, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369162531, (unsigned long const   )0, (unsigned int const   )0,
      "2366", (unsigned int const   )256, (unsigned int const   )58, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369158181, (unsigned long const   )0, (unsigned int const   )0,
      "2367", (unsigned int const   )512, (unsigned int const   )58, 15U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )100924197, (unsigned long const   )0, (unsigned int const   )0,
      "2368", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369162533, (unsigned long const   )0, (unsigned int const   )0,
      "2368", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )385935397, (unsigned long const   )0, (unsigned int const   )0,
      "2377", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )117702437, (unsigned long const   )0, (unsigned int const   )0,
      "2378", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369163557, (unsigned long const   )0, (unsigned int const   )0,
      "2378", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )385940773, (unsigned long const   )0, (unsigned int const   )0,
      "2378", (unsigned int const   )512, (unsigned int const   )58, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )385941301, (unsigned long const   )0, (unsigned int const   )0,
      "2387", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )402716981, (unsigned long const   )0, (unsigned int const   )0,
      "2387", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )402718517, (unsigned long const   )0, (unsigned int const   )0,
      "2388", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )352386869, (unsigned long const   )0, (unsigned int const   )0,
      "2458", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369164080, (unsigned long const   )0, (unsigned int const   )0,
      "2460", (unsigned int const   )0, (unsigned int const   )98, 0U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )369164085, (unsigned long const   )0, (unsigned int const   )0,
      "2468", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )386006832, (unsigned long const   )0, (unsigned int const   )0,
      "2470", (unsigned int const   )0, (unsigned int const   )98, 0U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )386006837, (unsigned long const   )0, (unsigned int const   )0,
      "2478", (unsigned int const   )512, (unsigned int const   )98, 28U, 4096U, SectorTable_213x,
      (CHIP_VARIANT const   )2}, 
        {(unsigned long const   )2685045567U, (unsigned long const   )0, (unsigned int const   )1,
      "4310", (unsigned int const   )0, (unsigned int const   )168, 0U, 4096U, SectorTable_43xx,
      (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684390204U, (unsigned long const   )0, (unsigned int const   )1,
      "4320", (unsigned int const   )0, (unsigned int const   )200, 0U, 4096U, SectorTable_43xx,
      (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684357168U, (unsigned long const   )0, (unsigned int const   )1,
      "4330", (unsigned int const   )0, (unsigned int const   )264, 0U, 4096U, SectorTable_43xx,
      (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684471856U, (unsigned long const   )68, (unsigned int const   )1,
      "4333", (unsigned int const   )512, (unsigned int const   )512, 11U, 4096U,
      SectorTable_43xx, (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684471856U, (unsigned long const   )0, (unsigned int const   )1,
      "4337", (unsigned int const   )1024, (unsigned int const   )512, 15U, 4096U,
      SectorTable_43xx, (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684356656U, (unsigned long const   )0, (unsigned int const   )1,
      "4350", (unsigned int const   )0, (unsigned int const   )264, 0U, 4096U, SectorTable_43xx,
      (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684471344U, (unsigned long const   )68, (unsigned int const   )1,
      "4353", (unsigned int const   )512, (unsigned int const   )512, 11U, 4096U,
      SectorTable_43xx, (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684471344U, (unsigned long const   )0, (unsigned int const   )1,
      "4357", (unsigned int const   )1024, (unsigned int const   )512, 15U, 4096U,
      SectorTable_43xx, (CHIP_VARIANT const   )1}, 
        {(unsigned long const   )2684471344U, (unsigned long const   )251002880, (unsigned int const   )1,
      "4357", (unsigned int const   )1024, (unsigned int const   )512, 15U, 4096U,
      SectorTable_43xx, (CHIP_VARIANT const   )1}};
#line 299 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static void FormatCommand(char const   *In , char *Out ) 
{ 
  size_t i ;
  size_t j ;

  {
#line 302
  i = (size_t )0;
#line 302
  j = (size_t )0;
  {
#line 302
  while (1) {
    while_continue: /* CIL Label */ ;
#line 302
    if (! ((int const   )*(In + j) != 0)) {
#line 302
      goto while_break;
    }
#line 304
    if ((int const   )*(In + j) == 13) {
#line 304
      goto _L;
    } else
#line 304
    if ((int const   )*(In + j) == 10) {
      _L: /* CIL Label */ 
#line 306
      if (i > 0UL) {
#line 308
        *(Out + i) = (char )'\n';
      } else {
#line 312
        i --;
      }
      {
#line 314
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 314
        if (! ((int const   )*(In + (j + 1UL)) == 13)) {
#line 314
          if (! ((int const   )*(In + (j + 1UL)) == 10)) {
#line 314
            goto while_break___0;
          }
        }
#line 316
        j ++;
      }
      while_break___0: /* CIL Label */ ;
      }
    } else {
#line 321
      *(Out + i) = (char )*(In + j);
    }
#line 302
    i ++;
#line 302
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 324
  *(Out + i) = (char )'\000';
#line 325
  return;
}
}
#line 327 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static int SendAndVerify(ISP_ENVIRONMENT *IspEnvironment , char const   *Command ,
                         char *AnswerBuffer , int AnswerLength ) 
{ 
  unsigned long realsize ;
  int cmdlen ;
  char *FormattedCommand ;
  size_t tmp ;
  void *tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  {
#line 334
  SendComPort(IspEnvironment, Command);
#line 335
  ReceiveComPort(IspEnvironment, (char const   *)AnswerBuffer, (unsigned long )(AnswerLength - 1),
                 & realsize, 2UL, 5000U);
#line 337
  tmp = strlen(Command);
#line 337
  cmdlen = (int )tmp;
#line 338
  tmp___0 = __builtin_alloca((unsigned long )(cmdlen + 1));
#line 338
  FormattedCommand = (char *)tmp___0;
#line 339
  FormatCommand(Command, FormattedCommand);
#line 340
  FormatCommand((char const   *)AnswerBuffer, AnswerBuffer);
#line 341
  tmp___1 = strlen((char const   *)FormattedCommand);
#line 341
  cmdlen = (int )tmp___1;
#line 342
  tmp___2 = strncmp((char const   *)AnswerBuffer, (char const   *)FormattedCommand,
                    (size_t )cmdlen);
  }
#line 342
  if (tmp___2 == 0) {
    {
#line 342
    tmp___3 = strcmp((char const   *)(AnswerBuffer + cmdlen), "0\n");
    }
#line 342
    if (tmp___3 == 0) {
#line 342
      tmp___4 = 1;
    } else {
#line 342
      tmp___4 = 0;
    }
  } else {
#line 342
    tmp___4 = 0;
  }
#line 342
  return (tmp___4);
}
}
#line 358 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static void NxpOutputErrorMessage(unsigned char ErrorNumber ) 
{ 


  {
  {
#line 362
  if ((int )ErrorNumber == 0) {
#line 362
    goto case_0;
  }
#line 366
  if ((int )ErrorNumber == 1) {
#line 366
    goto case_1;
  }
#line 370
  if ((int )ErrorNumber == 2) {
#line 370
    goto case_2;
  }
#line 373
  if ((int )ErrorNumber == 3) {
#line 373
    goto case_3;
  }
#line 377
  if ((int )ErrorNumber == 4) {
#line 377
    goto case_4;
  }
#line 382
  if ((int )ErrorNumber == 5) {
#line 382
    goto case_5;
  }
#line 387
  if ((int )ErrorNumber == 6) {
#line 387
    goto case_6;
  }
#line 391
  if ((int )ErrorNumber == 7) {
#line 391
    goto case_7;
  }
#line 396
  if ((int )ErrorNumber == 8) {
#line 396
    goto case_8;
  }
#line 400
  if ((int )ErrorNumber == 9) {
#line 400
    goto case_9;
  }
#line 405
  if ((int )ErrorNumber == 10) {
#line 405
    goto case_10;
  }
#line 409
  if ((int )ErrorNumber == 11) {
#line 409
    goto case_11;
  }
#line 413
  if ((int )ErrorNumber == 12) {
#line 413
    goto case_12;
  }
#line 417
  if ((int )ErrorNumber == 13) {
#line 417
    goto case_13;
  }
#line 421
  if ((int )ErrorNumber == 14) {
#line 421
    goto case_14;
  }
#line 426
  if ((int )ErrorNumber == 15) {
#line 426
    goto case_15;
  }
#line 430
  if ((int )ErrorNumber == 16) {
#line 430
    goto case_16;
  }
#line 434
  if ((int )ErrorNumber == 17) {
#line 434
    goto case_17;
  }
#line 438
  if ((int )ErrorNumber == 18) {
#line 438
    goto case_18;
  }
#line 442
  if ((int )ErrorNumber == 19) {
#line 442
    goto case_19;
  }
#line 446
  if ((int )ErrorNumber == 255) {
#line 446
    goto case_255;
  }
#line 449
  goto switch_default;
  case_0: /* CIL Label */ 
  {
#line 363
  DebugPrintf(1, "CMD_SUCCESS\n");
  }
#line 364
  goto switch_break;
  case_1: /* CIL Label */ 
  {
#line 367
  DebugPrintf(1, "INVALID_COMMAND\n");
  }
#line 368
  goto switch_break;
  case_2: /* CIL Label */ 
  {
#line 371
  DebugPrintf(1, "SRC_ADDR_ERROR: Source address is not on word boundary.\n");
  }
#line 372
  goto switch_break;
  case_3: /* CIL Label */ 
  {
#line 374
  DebugPrintf(1, "DST_ADDR_ERROR: Destination address is not on a correct boundary.\n");
  }
#line 375
  goto switch_break;
  case_4: /* CIL Label */ 
  {
#line 378
  DebugPrintf(1, "SRC_ADDR_NOT_MAPPED: Source address is not mapped in the memory map.\n                     Count value is taken into consideration where applicable.\n");
  }
#line 380
  goto switch_break;
  case_5: /* CIL Label */ 
  {
#line 383
  DebugPrintf(1, "DST_ADDR_NOT_MAPPED: Destination address is not mapped in the memory map.\n                     Count value is taken into consideration where applicable.\n");
  }
#line 385
  goto switch_break;
  case_6: /* CIL Label */ 
  {
#line 388
  DebugPrintf(1, "COUNT_ERROR: Byte count is not multiple of 4 or is not a permitted value.\n");
  }
#line 389
  goto switch_break;
  case_7: /* CIL Label */ 
  {
#line 392
  DebugPrintf(1, "INVALID_SECTOR: Sector number is invalid or end sector number is\n                greater than start sector number.\n");
  }
#line 394
  goto switch_break;
  case_8: /* CIL Label */ 
  {
#line 397
  DebugPrintf(1, "SECTOR_NOT_BLANK\n");
  }
#line 398
  goto switch_break;
  case_9: /* CIL Label */ 
  {
#line 401
  DebugPrintf(1, "SECTOR_NOT_PREPARED_FOR_WRITE_OPERATION:\nCommand to prepare sector for write operation was not executed.\n");
  }
#line 403
  goto switch_break;
  case_10: /* CIL Label */ 
  {
#line 406
  DebugPrintf(1, "COMPARE_ERROR: Source and destination data not equal.\n");
  }
#line 407
  goto switch_break;
  case_11: /* CIL Label */ 
  {
#line 410
  DebugPrintf(1, "BUSY: Flash programming hardware interface is busy.\n");
  }
#line 411
  goto switch_break;
  case_12: /* CIL Label */ 
  {
#line 414
  DebugPrintf(1, "PARAM_ERROR: Insufficient number of parameters or invalid parameter.\n");
  }
#line 415
  goto switch_break;
  case_13: /* CIL Label */ 
  {
#line 418
  DebugPrintf(1, "ADDR_ERROR: Address is not on word boundary.\n");
  }
#line 419
  goto switch_break;
  case_14: /* CIL Label */ 
  {
#line 422
  DebugPrintf(1, "ADDR_NOT_MAPPED: Address is not mapped in the memory map.\n                 Count value is taken in to consideration where applicable.\n");
  }
#line 424
  goto switch_break;
  case_15: /* CIL Label */ 
  {
#line 427
  DebugPrintf(1, "CMD_LOCKED\n");
  }
#line 428
  goto switch_break;
  case_16: /* CIL Label */ 
  {
#line 431
  DebugPrintf(1, "INVALID_CODE: Unlock code is invalid.\n");
  }
#line 432
  goto switch_break;
  case_17: /* CIL Label */ 
  {
#line 435
  DebugPrintf(1, "INVALID_BAUD_RATE: Invalid baud rate setting.\n");
  }
#line 436
  goto switch_break;
  case_18: /* CIL Label */ 
  {
#line 439
  DebugPrintf(1, "INVALID_STOP_BIT: Invalid stop bit setting.\n");
  }
#line 440
  goto switch_break;
  case_19: /* CIL Label */ 
  {
#line 443
  DebugPrintf(1, "CODE READ PROTECTION ENABLED\n");
  }
#line 444
  goto switch_break;
  case_255: /* CIL Label */ 
#line 447
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 450
  DebugPrintf(1, "unknown error %u\n", (int )ErrorNumber);
  }
#line 451
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 455
  return;
}
}
#line 466 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
static unsigned char GetAndReportErrorNumber(char const   *Answer ) 
{ 
  unsigned char Result ;
  unsigned int i ;
  int tmp ;

  {
#line 468
  Result = (unsigned char)255;
#line 469
  i = 0U;
  {
#line 471
  while (1) {
    while_continue: /* CIL Label */ ;
#line 473
    if ((int const   )*(Answer + i) == 0) {
#line 475
      goto while_break;
    }
#line 478
    if ((int const   )*(Answer + i) == 10) {
#line 480
      i ++;
#line 482
      if ((int const   )*(Answer + i) < 48) {
        {
#line 484
        DebugPrintf(1, "ErrorString: %s", Answer + i);
        }
#line 485
        goto while_break;
      } else
#line 482
      if ((int const   )*(Answer + i) > 57) {
        {
#line 484
        DebugPrintf(1, "ErrorString: %s", Answer + i);
        }
#line 485
        goto while_break;
      }
      {
#line 488
      tmp = atoi(Answer + i);
#line 488
      Result = (unsigned char )tmp;
      }
#line 489
      goto while_break;
    }
#line 492
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 495
  NxpOutputErrorMessage(Result);
  }
#line 497
  return (Result);
}
}
#line 501 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
int NxpDownload(ISP_ENVIRONMENT *IspEnvironment ) 
{ 
  unsigned long realsize ;
  char Answer[128] ;
  char ExpectedAnswer[128] ;
  char temp[128] ;
  char *strippedAnswer ;
  char *endPtr ;
  int strippedsize ;
  int nQuestionMarks ;
  int found ;
  unsigned long Sector ;
  unsigned long SectorLength ;
  unsigned long SectorStart ;
  unsigned long SectorOffset ;
  unsigned long SectorChunk ;
  char tmpString[128] ;
  char uuencode_table[64] ;
  int Line ;
  unsigned long tmpStringPos ;
  unsigned long BlockOffset ;
  unsigned long Block ;
  unsigned long Pos ;
  unsigned long Id[2] ;
  unsigned long CopyLength ;
  int c ;
  int k ;
  int i ;
  unsigned long ivt_CRC ;
  unsigned long block_CRC ;
  time_t tStartUpload ;
  time_t tDoneUpload ;
  char tmp_string[64] ;
  char *cmdstr ;
  int repeat ;
  char sendbuf0[128] ;
  char sendbuf1[128] ;
  char sendbuf2[128] ;
  char sendbuf3[128] ;
  char sendbuf4[128] ;
  char sendbuf5[128] ;
  char sendbuf6[128] ;
  char sendbuf7[128] ;
  char sendbuf8[128] ;
  char sendbuf9[128] ;
  char sendbuf10[128] ;
  char sendbuf11[128] ;
  char sendbuf12[128] ;
  char sendbuf13[128] ;
  char sendbuf14[128] ;
  char sendbuf15[128] ;
  char sendbuf16[128] ;
  char sendbuf17[128] ;
  char sendbuf18[128] ;
  char sendbuf19[128] ;
  char *sendbuf[20] ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  unsigned char tmp___4 ;
  int tmp___5 ;
  size_t tmp___6 ;
  int tmp___7 ;
  size_t tmp___8 ;
  size_t tmp___9 ;
  int tmp___10 ;
  size_t tmp___11 ;
  int tmp___12 ;
  int tmp___14 ;
  size_t tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  int tmp___23 ;
  unsigned long tmp___24 ;
  unsigned long tmp___25 ;
  unsigned long tmp___26 ;
  unsigned long tmp___27 ;
  unsigned char tmp___28 ;
  int tmp___29 ;
  unsigned char tmp___30 ;
  int tmp___31 ;
  unsigned char tmp___32 ;
  int tmp___33 ;
  unsigned char tmp___34 ;
  int tmp___35 ;
  unsigned char tmp___36 ;
  int tmp___37 ;
  unsigned char tmp___38 ;
  int tmp___39 ;
  unsigned long tmp___40 ;
  unsigned long tmp___41 ;
  unsigned long tmp___42 ;
  unsigned char tmp___43 ;
  int tmp___44 ;
  unsigned long tmp___45 ;
  unsigned long tmp___46 ;
  unsigned long tmp___47 ;
  unsigned long tmp___48 ;
  unsigned long tmp___49 ;
  unsigned long tmp___50 ;
  unsigned long tmp___51 ;
  unsigned long tmp___52 ;
  unsigned long tmp___53 ;
  unsigned long tmp___54 ;
  size_t tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;
  unsigned char BigAnswer[4096] ;
  unsigned long CopyLengthPartialOffset ;
  unsigned long CopyLengthPartialRemainingBytes ;
  int tmp___59 ;
  int tmp___60 ;
  unsigned char tmp___61 ;
  int tmp___62 ;
  unsigned long tmp___63 ;
  unsigned char tmp___64 ;
  int tmp___65 ;
  unsigned long tmp___66 ;
  unsigned long tmp___67 ;
  unsigned char tmp___68 ;
  int tmp___69 ;
  unsigned long tmp___70 ;
  unsigned long tmp___71 ;
  unsigned char tmp___72 ;
  int tmp___73 ;
  unsigned char tmp___74 ;
  size_t tmp___75 ;
  int tmp___76 ;
  unsigned long tmp___77 ;
  unsigned long tmp___78 ;

  {
  {
#line 523
  k = 0;
#line 526
  tStartUpload = (time_t )0;
#line 526
  tDoneUpload = (time_t )0;
#line 539
  repeat = 0;
#line 562
  sendbuf[0] = sendbuf0;
#line 562
  sendbuf[1] = sendbuf1;
#line 562
  sendbuf[2] = sendbuf2;
#line 562
  sendbuf[3] = sendbuf3;
#line 562
  sendbuf[4] = sendbuf4;
#line 562
  sendbuf[5] = sendbuf5;
#line 562
  sendbuf[6] = sendbuf6;
#line 562
  sendbuf[7] = sendbuf7;
#line 562
  sendbuf[8] = sendbuf8;
#line 562
  sendbuf[9] = sendbuf9;
#line 562
  sendbuf[10] = sendbuf10;
#line 562
  sendbuf[11] = sendbuf11;
#line 562
  sendbuf[12] = sendbuf12;
#line 562
  sendbuf[13] = sendbuf13;
#line 562
  sendbuf[14] = sendbuf14;
#line 562
  sendbuf[15] = sendbuf15;
#line 562
  sendbuf[16] = sendbuf16;
#line 562
  sendbuf[17] = sendbuf17;
#line 562
  sendbuf[18] = sendbuf18;
#line 562
  sendbuf[19] = sendbuf19;
#line 568
  DebugPrintf(2, "Synchronizing (ESC to abort)");
#line 570
  PrepareKeyboardTtySettings();
#line 580
  found = 0;
#line 580
  nQuestionMarks = found;
  }
  {
#line 580
  while (1) {
    while_continue: /* CIL Label */ ;
#line 580
    if (! found) {
#line 580
      if (! (nQuestionMarks < IspEnvironment->nQuestionMarks)) {
#line 580
        goto while_break;
      }
    } else {
#line 580
      goto while_break;
    }
    {
#line 591
    tmp___0 = kbhit();
    }
#line 591
    if (tmp___0) {
      {
#line 593
      tmp = getch();
      }
#line 593
      if (tmp == 27) {
        {
#line 595
        ResetKeyboardTtySettings();
#line 596
        DebugPrintf(2, "\nUser aborted during synchronisation\n");
        }
#line 597
        return (4106);
      }
    }
    {
#line 603
    DebugPrintf(2, ".");
#line 604
    SendComPort(IspEnvironment, "?");
#line 606
    memset((void *)(Answer), 0, sizeof(Answer));
#line 607
    ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                   & realsize, 1UL, 100U);
#line 609
    strippedAnswer = Answer;
#line 610
    strippedsize = (int )realsize;
    }
    {
#line 611
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 611
      if (strippedsize > 0) {
#line 611
        if (! ((int )*strippedAnswer == 63)) {
#line 611
          if (! ((int )*strippedAnswer == 0)) {
#line 611
            goto while_break___0;
          }
        }
      } else {
#line 611
        goto while_break___0;
      }
#line 613
      strippedAnswer ++;
#line 614
      strippedsize --;
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 617
    sprintf((char */* __restrict  */)(tmp_string), (char const   */* __restrict  */)"StrippedAnswer(Length=%d): ",
            strippedsize);
#line 618
    DumpString(3, (void const   *)strippedAnswer, (size_t )strippedsize, (char const   *)(tmp_string));
#line 620
    tStartUpload = time((time_t *)((void *)0));
#line 622
    FormatCommand((char const   *)strippedAnswer, strippedAnswer);
#line 623
    tmp___1 = strcmp((char const   *)strippedAnswer, "Synchronized\n");
    }
#line 623
    if (tmp___1 == 0) {
#line 625
      found = 1;
    } else {
      {
#line 630
      ResetTarget(IspEnvironment, (TARGET_MODE )0);
      }
    }
#line 580
    nQuestionMarks ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 636
  ResetKeyboardTtySettings();
  }
#line 638
  if (! found) {
    {
#line 640
    DebugPrintf(1, " no answer on \'?\'\n");
    }
#line 641
    return (4097);
  }
  {
#line 648
  DebugPrintf(2, " OK\n");
#line 650
  SendComPort(IspEnvironment, "Synchronized\r\n");
#line 652
  ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL, & realsize,
                 2UL, 1000U);
#line 654
  FormatCommand((char const   *)(Answer), Answer);
#line 655
  tmp___2 = strcmp((char const   *)(Answer), "Synchronized\nOK\n");
  }
#line 655
  if (tmp___2 != 0) {
    {
#line 657
    DebugPrintf(1, "No answer on \'Synchronized\'\n");
    }
#line 658
    return (4098);
  }
  {
#line 661
  DebugPrintf(3, "Synchronized 1\n");
#line 663
  DebugPrintf(3, "Setting oscillator\n");
#line 665
  sprintf((char */* __restrict  */)(temp), (char const   */* __restrict  */)"%s\r\n",
          IspEnvironment->StringOscillator);
#line 667
  SendComPort(IspEnvironment, (char const   *)(temp));
#line 669
  ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL, & realsize,
                 2UL, 1000U);
#line 671
  sprintf((char */* __restrict  */)(temp), (char const   */* __restrict  */)"%s\nOK\n",
          IspEnvironment->StringOscillator);
#line 673
  FormatCommand((char const   *)(Answer), Answer);
#line 674
  tmp___3 = strcmp((char const   *)(Answer), (char const   *)(temp));
  }
#line 674
  if (tmp___3 != 0) {
    {
#line 676
    DebugPrintf(1, "No answer on Oscillator-Command\n");
    }
#line 677
    return (4099);
  }
  {
#line 680
  DebugPrintf(3, "Unlock\n");
#line 682
  cmdstr = (char *)"U 23130\r\n";
#line 684
  tmp___5 = SendAndVerify(IspEnvironment, (char const   *)cmdstr, Answer, (int )sizeof(Answer));
  }
#line 684
  if (! tmp___5) {
    {
#line 686
    DebugPrintf(1, "Unlock-Command:\n");
#line 687
    tmp___4 = GetAndReportErrorNumber((char const   *)(Answer));
    }
#line 687
    return (4352 + (int )tmp___4);
  }
  {
#line 690
  DebugPrintf(2, "Read bootcode version: ");
#line 692
  cmdstr = (char *)"K\r\n";
#line 694
  SendComPort(IspEnvironment, (char const   *)cmdstr);
#line 696
  ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL, & realsize,
                 4UL, 5000U);
#line 698
  FormatCommand((char const   *)cmdstr, temp);
#line 699
  FormatCommand((char const   *)(Answer), Answer);
#line 700
  tmp___6 = strlen((char const   *)(temp));
#line 700
  tmp___7 = strncmp((char const   *)(Answer), (char const   *)(temp), tmp___6);
  }
#line 700
  if (tmp___7 != 0) {
    {
#line 702
    DebugPrintf(1, "no answer on Read Boot Code Version\n");
    }
#line 703
    return (4100);
  }
  {
#line 706
  tmp___9 = strlen((char const   *)(temp));
#line 706
  tmp___10 = strncmp((char const   *)(Answer + tmp___9), "0\n", (size_t )2);
  }
#line 706
  if (tmp___10 == 0) {
    {
#line 708
    tmp___8 = strlen((char const   *)(temp));
#line 708
    strippedAnswer = (Answer + tmp___8) + 2;
#line 718
    DebugPrintf(2, (char const   *)strippedAnswer);
    }
  } else {
    {
#line 722
    DebugPrintf(2, "unknown\n");
    }
  }
  {
#line 725
  DebugPrintf(2, "Read part ID: ");
#line 727
  cmdstr = (char *)"J\r\n";
#line 729
  SendComPort(IspEnvironment, (char const   *)cmdstr);
#line 731
  ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL, & realsize,
                 3UL, 5000U);
#line 733
  FormatCommand((char const   *)cmdstr, temp);
#line 734
  FormatCommand((char const   *)(Answer), Answer);
#line 735
  tmp___11 = strlen((char const   *)(temp));
#line 735
  tmp___12 = strncmp((char const   *)(Answer), (char const   *)(temp), tmp___11);
  }
#line 735
  if (tmp___12 != 0) {
    {
#line 737
    DebugPrintf(1, "no answer on Read Part Id\n");
    }
#line 738
    return (4101);
  }
  {
#line 741
  tmp___14 = strncmp((char const   *)(Answer), "J\n0\n", (size_t )4);
  }
#line 741
  if (tmp___14 == 0) {
#line 741
    strippedAnswer = Answer + 4;
  } else {
#line 741
    strippedAnswer = Answer;
  }
  {
#line 743
  Id[0] = strtoul((char const   */* __restrict  */)strippedAnswer, (char **/* __restrict  */)(& endPtr),
                  10);
#line 744
  Id[1] = 0UL;
#line 745
  *endPtr = (char )'\000';
#line 746
  i = (int )(sizeof(LPCtypes) / sizeof(LPCtypes[0]) - 1UL);
  }
  {
#line 746
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 746
    if (i > 0) {
#line 746
      if (! (LPCtypes[i].id != (unsigned long const   )Id[0])) {
#line 746
        goto while_break___1;
      }
    } else {
#line 746
      goto while_break___1;
    }
#line 746
    i --;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 748
  IspEnvironment->DetectedDevice = i;
#line 749
  if (LPCtypes[IspEnvironment->DetectedDevice].EvalId2 != 0U) {
#line 752
    *endPtr = (char )'\n';
#line 753
    endPtr ++;
#line 754
    if ((int )*(endPtr + 0) == 0) {
      {
#line 757
      ReceiveComPort(IspEnvironment, (char const   *)endPtr, (sizeof(Answer) - (unsigned long )(endPtr - Answer)) - 1UL,
                     & realsize, 1UL, 100U);
      }
    } else {
      {
#line 754
      tmp___15 = strlen((char const   *)endPtr);
      }
#line 754
      if ((int )*(endPtr + (tmp___15 - 1UL)) != 10) {
        {
#line 757
        ReceiveComPort(IspEnvironment, (char const   *)endPtr, (sizeof(Answer) - (unsigned long )(endPtr - Answer)) - 1UL,
                       & realsize, 1UL, 100U);
        }
      }
    }
    {
#line 760
    FormatCommand((char const   *)endPtr, endPtr);
    }
#line 761
    if ((int )*endPtr == 0) {
      {
#line 763
      DebugPrintf(1, "incomplete answer on Read Part Id (second configuration word missing)\n");
      }
#line 764
      return (4101);
    } else
#line 761
    if ((int )*endPtr == 10) {
      {
#line 763
      DebugPrintf(1, "incomplete answer on Read Part Id (second configuration word missing)\n");
      }
#line 764
      return (4101);
    }
    {
#line 767
    Id[1] = strtoul((char const   */* __restrict  */)endPtr, (char **/* __restrict  */)(& endPtr),
                    10);
#line 768
    *endPtr = (char )'\000';
#line 771
    i = (int )(sizeof(LPCtypes) / sizeof(LPCtypes[0]) - 1UL);
    }
    {
#line 771
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 771
      if (i > 0) {
#line 771
        if (! (LPCtypes[i].id != (unsigned long const   )Id[0])) {
#line 771
          if (! (LPCtypes[i].id2 != (unsigned long const   )Id[1])) {
#line 771
            goto while_break___2;
          }
        }
      } else {
#line 771
        goto while_break___2;
      }
#line 771
      i --;
    }
    while_break___2: /* CIL Label */ ;
    }
#line 773
    IspEnvironment->DetectedDevice = i;
  }
#line 775
  if (IspEnvironment->DetectedDevice == 0) {
    {
#line 776
    DebugPrintf(2, "unknown");
    }
  } else {
    {
#line 779
    DebugPrintf(2, "LPC%s, %d kiB FLASH / %d kiB SRAM", LPCtypes[IspEnvironment->DetectedDevice].Product,
                LPCtypes[IspEnvironment->DetectedDevice].FlashSize, LPCtypes[IspEnvironment->DetectedDevice].RAMSize);
    }
  }
#line 784
  if (LPCtypes[IspEnvironment->DetectedDevice].EvalId2 != 0U) {
    {
#line 786
    DebugPrintf(2, " (0x%08lX / 0x%08lX)\n", Id[0], Id[1]);
    }
  } else {
    {
#line 790
    DebugPrintf(2, " (0x%08lX)\n", Id[0]);
    }
  }
#line 793
  if (! IspEnvironment->DetectOnly) {
#line 796
    uuencode_table[0] = (char)96;
#line 798
    i = 1;
    {
#line 798
    while (1) {
      while_continue___3: /* CIL Label */ ;
#line 798
      if (! (i < 64)) {
#line 798
        goto while_break___3;
      }
#line 800
      uuencode_table[i] = (char )(32 + i);
#line 798
      i ++;
    }
    while_break___3: /* CIL Label */ ;
    }
#line 803
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
#line 807
      ivt_CRC = 0UL;
#line 810
      i = 0;
      {
#line 810
      while (1) {
        while_continue___4: /* CIL Label */ ;
#line 810
        if (! (i < 4)) {
#line 810
          goto while_break___4;
        }
#line 812
        *(IspEnvironment->BinaryContent + (i + 20)) = (BINARY )0;
#line 810
        i ++;
      }
      while_break___4: /* CIL Label */ ;
      }
#line 816
      i = 0;
      {
#line 816
      while (1) {
        while_continue___5: /* CIL Label */ ;
#line 816
        if (! (i < 32)) {
#line 816
          goto while_break___5;
        }
#line 817
        tmp___16 = i;
#line 817
        i ++;
#line 817
        ivt_CRC += (unsigned long )*(IspEnvironment->BinaryContent + tmp___16);
#line 818
        tmp___17 = i;
#line 818
        i ++;
#line 818
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___17) << 8);
#line 819
        tmp___18 = i;
#line 819
        i ++;
#line 819
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___18) << 16);
#line 820
        tmp___19 = i;
#line 820
        i ++;
#line 820
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___19) << 24);
      }
      while_break___5: /* CIL Label */ ;
      }
#line 825
      ivt_CRC = 0UL - ivt_CRC;
#line 826
      i = 0;
      {
#line 826
      while (1) {
        while_continue___6: /* CIL Label */ ;
#line 826
        if (! (i < 4)) {
#line 826
          goto while_break___6;
        }
#line 828
        *(IspEnvironment->BinaryContent + (i + 20)) = (unsigned char )(ivt_CRC >> 8 * i);
#line 826
        i ++;
      }
      while_break___6: /* CIL Label */ ;
      }
      {
#line 831
      DebugPrintf(3, "Position 0x14 patched: ivt_CRC = 0x%08lX\n", ivt_CRC);
      }
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
#line 833
      goto _L;
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
#line 833
      goto _L;
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
#line 833
      goto _L;
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
#line 833
      goto _L;
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
#line 833
      goto _L;
    } else
#line 833
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
      _L: /* CIL Label */ 
#line 842
      ivt_CRC = 0UL;
#line 845
      i = 0;
      {
#line 845
      while (1) {
        while_continue___7: /* CIL Label */ ;
#line 845
        if (! (i < 4)) {
#line 845
          goto while_break___7;
        }
#line 847
        *(IspEnvironment->BinaryContent + (i + 28)) = (BINARY )0;
#line 845
        i ++;
      }
      while_break___7: /* CIL Label */ ;
      }
#line 851
      i = 0;
      {
#line 851
      while (1) {
        while_continue___8: /* CIL Label */ ;
#line 851
        if (! (i < 32)) {
#line 851
          goto while_break___8;
        }
#line 852
        tmp___20 = i;
#line 852
        i ++;
#line 852
        ivt_CRC += (unsigned long )*(IspEnvironment->BinaryContent + tmp___20);
#line 853
        tmp___21 = i;
#line 853
        i ++;
#line 853
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___21) << 8);
#line 854
        tmp___22 = i;
#line 854
        i ++;
#line 854
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___22) << 16);
#line 855
        tmp___23 = i;
#line 855
        i ++;
#line 855
        ivt_CRC += (unsigned long )((int )*(IspEnvironment->BinaryContent + tmp___23) << 24);
      }
      while_break___8: /* CIL Label */ ;
      }
#line 860
      ivt_CRC = 0UL - ivt_CRC;
#line 861
      i = 0;
      {
#line 861
      while (1) {
        while_continue___9: /* CIL Label */ ;
#line 861
        if (! (i < 4)) {
#line 861
          goto while_break___9;
        }
#line 863
        *(IspEnvironment->BinaryContent + (i + 28)) = (unsigned char )(ivt_CRC >> 8 * i);
#line 861
        i ++;
      }
      while_break___9: /* CIL Label */ ;
      }
      {
#line 866
      DebugPrintf(3, "Position 0x1C patched: ivt_CRC = 0x%08lX\n", ivt_CRC);
      }
    } else {
      {
#line 870
      DebugPrintf(1, "Internal error: wrong chip variant %d (detected device %d)\n",
                  (unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant,
                  IspEnvironment->DetectedDevice);
#line 871
      exit(1);
      }
    }
  }
  {
#line 908
  tmp___26 = ReturnValueLpcRamStart(IspEnvironment);
  }
#line 908
  if (IspEnvironment->BinaryOffset >= tmp___26) {
    {
#line 908
    tmp___27 = ReturnValueLpcRamStart(IspEnvironment);
    }
#line 908
    if (IspEnvironment->BinaryOffset + IspEnvironment->BinaryLength <= tmp___27 + (unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U)) {
      {
#line 911
      LPCtypes[IspEnvironment->DetectedDevice].FlashSectors = 1U;
#line 912
      tmp___24 = ReturnValueLpcRamBase(IspEnvironment);
#line 912
      tmp___25 = ReturnValueLpcRamStart(IspEnvironment);
#line 912
      LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize = (unsigned int )((unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U) - (tmp___24 - tmp___25));
#line 913
      LPCtypes[IspEnvironment->DetectedDevice].SectorTable = (unsigned int const   *)(SectorTable_RAM);
#line 914
      SectorTable_RAM[0] = LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize;
      }
    }
  }
#line 916
  if (IspEnvironment->DetectOnly) {
#line 917
    return (0);
  }
#line 919
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
    {
#line 923
    DebugPrintf(3, "Switch off XON/XOFF !!!\n");
#line 924
    ControlXonXoffSerialPort(IspEnvironment, (unsigned char)0);
    }
  }
  {
#line 930
  DebugPrintf(2, "Will start programming at Sector 1 if possible, and conclude with Sector 0 to ensure that checksum is written last.\n");
  }
#line 931
  if ((unsigned long )*(LPCtypes[IspEnvironment->DetectedDevice].SectorTable + 0) >= IspEnvironment->BinaryLength) {
#line 933
    Sector = 0UL;
#line 934
    SectorStart = 0UL;
  } else {
#line 938
    SectorStart = (unsigned long )*(LPCtypes[IspEnvironment->DetectedDevice].SectorTable + 0);
#line 939
    Sector = 1UL;
  }
#line 942
  if ((int )IspEnvironment->WipeDevice == 1) {
    {
#line 944
    DebugPrintf(2, "Wiping Device. ");
    }
#line 946
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 950
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d 0\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    } else
#line 946
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 950
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d 0\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    } else {
      {
#line 954
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    }
    {
#line 957
    tmp___29 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                             (int )sizeof(Answer));
    }
#line 957
    if (! tmp___29) {
      {
#line 959
      DebugPrintf(1, "Wrong answer on Prepare-Command\n");
#line 960
      tmp___28 = GetAndReportErrorNumber((char const   *)(Answer));
      }
#line 960
      return (4608 + (int )tmp___28);
    }
#line 963
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 967
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d 0\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    } else
#line 963
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 967
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d 0\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    } else {
      {
#line 971
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d\r\n",
              0, LPCtypes[IspEnvironment->DetectedDevice].FlashSectors - 1U);
      }
    }
    {
#line 973
    tmp___31 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                             (int )sizeof(Answer));
    }
#line 973
    if (! tmp___31) {
      {
#line 975
      DebugPrintf(1, "Wrong answer on Erase-Command\n");
#line 976
      tmp___30 = GetAndReportErrorNumber((char const   *)(Answer));
      }
#line 976
      return (4864 + (int )tmp___30);
    }
    {
#line 978
    DebugPrintf(2, "OK \n");
    }
#line 980
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 983
      DebugPrintf(2, "ATTENTION: Only bank A was wiped!!!\n");
      }
    } else
#line 980
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 983
      DebugPrintf(2, "ATTENTION: Only bank A was wiped!!!\n");
      }
    }
  } else {
    {
#line 988
    DebugPrintf(2, "Erasing sector 0 first, to invalidate checksum. ");
    }
#line 990
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 994
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d 0\r\n",
              0, 0);
      }
    } else
#line 990
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 994
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d 0\r\n",
              0, 0);
      }
    } else {
      {
#line 998
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %d %d\r\n",
              0, 0);
      }
    }
    {
#line 1001
    tmp___33 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                             (int )sizeof(Answer));
    }
#line 1001
    if (! tmp___33) {
      {
#line 1003
      DebugPrintf(1, "Wrong answer on Prepare-Command\n");
#line 1004
      tmp___32 = GetAndReportErrorNumber((char const   *)(Answer));
      }
#line 1004
      return (4608 + (int )tmp___32);
    }
#line 1007
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 1011
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d 0\r\n",
              0, 0);
      }
    } else
#line 1007
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 1011
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d 0\r\n",
              0, 0);
      }
    } else {
      {
#line 1015
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %d %d\r\n",
              0, 0);
      }
    }
    {
#line 1018
    tmp___35 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                             (int )sizeof(Answer));
    }
#line 1018
    if (! tmp___35) {
      {
#line 1020
      DebugPrintf(1, "Wrong answer on Erase-Command\n");
#line 1021
      tmp___34 = GetAndReportErrorNumber((char const   *)(Answer));
      }
#line 1021
      return (4864 + (int )tmp___34);
    }
    {
#line 1023
    DebugPrintf(2, "OK \n");
    }
  }
  {
#line 1025
  while (1) {
    while_continue___10: /* CIL Label */ ;
#line 1027
    if (Sector >= (unsigned long )LPCtypes[IspEnvironment->DetectedDevice].FlashSectors) {
      {
#line 1029
      DebugPrintf(1, "Program too large; running out of Flash sectors.\n");
      }
#line 1030
      return (4105);
    }
    {
#line 1033
    DebugPrintf(2, "Sector %ld: ", Sector);
#line 1034
    fflush(stdout);
#line 1036
    tmp___40 = ReturnValueLpcRamStart(IspEnvironment);
    }
#line 1036
    if (IspEnvironment->BinaryOffset < tmp___40) {
#line 1036
      goto _L___0;
    } else {
      {
#line 1036
      tmp___41 = ReturnValueLpcRamStart(IspEnvironment);
      }
#line 1036
      if (IspEnvironment->BinaryOffset >= tmp___41 + (unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U)) {
        _L___0: /* CIL Label */ 
#line 1039
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
          {
#line 1043
          sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld 0\r\n",
                  Sector, Sector);
          }
        } else
#line 1039
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
          {
#line 1043
          sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld 0\r\n",
                  Sector, Sector);
          }
        } else {
          {
#line 1047
          sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld\r\n",
                  Sector, Sector);
          }
        }
        {
#line 1050
        tmp___37 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                                 (int )sizeof(Answer));
        }
#line 1050
        if (! tmp___37) {
          {
#line 1052
          DebugPrintf(1, "Wrong answer on Prepare-Command (1) (Sector %ld)\n", Sector);
#line 1053
          tmp___36 = GetAndReportErrorNumber((char const   *)(Answer));
          }
#line 1053
          return (4608 + (int )tmp___36);
        }
        {
#line 1056
        DebugPrintf(2, ".");
#line 1057
        fflush(stdout);
        }
#line 1058
        if ((int )IspEnvironment->WipeDevice == 0) {
#line 1058
          if (Sector != 0UL) {
#line 1060
            if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
              {
#line 1064
              sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %ld %ld 0\r\n",
                      Sector, Sector);
              }
            } else
#line 1060
            if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
              {
#line 1064
              sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %ld %ld 0\r\n",
                      Sector, Sector);
              }
            } else {
              {
#line 1068
              sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"E %ld %ld\r\n",
                      Sector, Sector);
              }
            }
            {
#line 1071
            tmp___39 = SendAndVerify(IspEnvironment, (char const   *)(tmpString),
                                     Answer, (int )sizeof(Answer));
            }
#line 1071
            if (! tmp___39) {
              {
#line 1073
              DebugPrintf(1, "Wrong answer on Erase-Command (Sector %ld)\n", Sector);
#line 1074
              tmp___38 = GetAndReportErrorNumber((char const   *)(Answer));
              }
#line 1074
              return (4864 + (int )tmp___38);
            }
            {
#line 1077
            DebugPrintf(2, ".");
#line 1078
            fflush(stdout);
            }
          }
        }
      }
    }
#line 1082
    SectorLength = (unsigned long )*(LPCtypes[IspEnvironment->DetectedDevice].SectorTable + Sector);
#line 1083
    if (SectorLength > IspEnvironment->BinaryLength - SectorStart) {
#line 1085
      SectorLength = IspEnvironment->BinaryLength - SectorStart;
    }
#line 1088
    SectorOffset = 0UL;
    {
#line 1088
    while (1) {
      while_continue___11: /* CIL Label */ ;
#line 1088
      if (! (SectorOffset < SectorLength)) {
#line 1088
        goto while_break___11;
      }
#line 1091
      if (SectorOffset == 0UL) {
#line 1092
        SectorOffset = 0UL;
        {
#line 1092
        while (1) {
          while_continue___12: /* CIL Label */ ;
#line 1092
          if (! (SectorOffset < SectorLength)) {
#line 1092
            goto while_break___12;
          }
#line 1094
          if ((int )*(IspEnvironment->BinaryContent + (SectorStart + SectorOffset)) != 255) {
#line 1095
            goto while_break___12;
          }
#line 1092
          SectorOffset ++;
        }
        while_break___12: /* CIL Label */ ;
        }
#line 1097
        if (SectorOffset == SectorLength) {
          {
#line 1099
          DebugPrintf(2, "Whole sector contents is 0xFFs, skipping programming.");
#line 1100
          fflush(stdout);
          }
#line 1101
          goto while_break___11;
        }
#line 1103
        SectorOffset = 0UL;
      }
#line 1106
      if (SectorOffset > 0UL) {
        {
#line 1109
        DebugPrintf(2, "|");
#line 1110
        fflush(stdout);
        }
      }
#line 1118
      SectorChunk = SectorLength - SectorOffset;
#line 1119
      if (SectorChunk > (unsigned long )LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize) {
#line 1121
        SectorChunk = (unsigned long )LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize;
      }
#line 1127
      CopyLength = SectorChunk;
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
#line 1129
        goto _L___1;
      } else
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
#line 1129
        goto _L___1;
      } else
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
#line 1129
        goto _L___1;
      } else
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
#line 1129
        goto _L___1;
      } else
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
#line 1129
        goto _L___1;
      } else
#line 1129
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
        _L___1: /* CIL Label */ 
#line 1136
        if (CopyLength % 180UL != 0UL) {
#line 1138
          CopyLength += 180UL - CopyLength % 180UL;
        }
      }
      {
#line 1142
      tmp___42 = ReturnValueLpcRamBase(IspEnvironment);
#line 1142
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"W %ld %ld\r\n",
              tmp___42, CopyLength);
#line 1144
      tmp___44 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                               (int )sizeof(Answer));
      }
#line 1144
      if (! tmp___44) {
        {
#line 1146
        DebugPrintf(1, "Wrong answer on Write-Command\n");
#line 1147
        tmp___43 = GetAndReportErrorNumber((char const   *)(Answer));
        }
#line 1147
        return (5120 + (int )tmp___43);
      }
      {
#line 1150
      DebugPrintf(2, ".");
#line 1151
      fflush(stdout);
      }
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
#line 1153
        goto _L___2;
      } else
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
#line 1153
        goto _L___2;
      } else
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
#line 1153
        goto _L___2;
      } else
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
#line 1153
        goto _L___2;
      } else
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
#line 1153
        goto _L___2;
      } else
#line 1153
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
        _L___2: /* CIL Label */ 
#line 1160
        block_CRC = 0UL;
#line 1161
        Line = 0;
#line 1164
        Pos = SectorStart + SectorOffset;
        {
#line 1164
        while (1) {
          while_continue___13: /* CIL Label */ ;
#line 1164
          if (Pos < (SectorStart + SectorOffset) + CopyLength) {
#line 1164
            if (! (Pos < IspEnvironment->BinaryLength)) {
#line 1164
              goto while_break___13;
            }
          } else {
#line 1164
            goto while_break___13;
          }
#line 1166
          Block = 0UL;
          {
#line 1166
          while (1) {
            while_continue___14: /* CIL Label */ ;
#line 1166
            if (! (Block < 4UL)) {
#line 1166
              goto while_break___14;
            }
            {
#line 1168
            DebugPrintf(2, ".");
#line 1169
            fflush(stdout);
#line 1177
            tmpStringPos = 0UL;
#line 1180
            tmp___45 = tmpStringPos;
#line 1180
            tmpStringPos ++;
#line 1180
            *(sendbuf[Line] + tmp___45) = (char)77;
#line 1185
            BlockOffset = 0UL;
            }
            {
#line 1185
            while (1) {
              while_continue___15: /* CIL Label */ ;
#line 1185
              if (! (BlockOffset < 45UL)) {
#line 1185
                goto while_break___15;
              }
              {
#line 1187
              tmp___46 = ReturnValueLpcRamStart(IspEnvironment);
              }
#line 1187
              if (IspEnvironment->BinaryOffset < tmp___46) {
#line 1190
                c = (int )*(IspEnvironment->BinaryContent + ((Pos + Block * 45UL) + BlockOffset));
              } else {
                {
#line 1187
                tmp___47 = ReturnValueLpcRamStart(IspEnvironment);
                }
#line 1187
                if (IspEnvironment->BinaryOffset >= tmp___47 + (unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U)) {
#line 1190
                  c = (int )*(IspEnvironment->BinaryContent + ((Pos + Block * 45UL) + BlockOffset));
                } else {
#line 1194
                  c = (int )*(IspEnvironment->BinaryContent + (((Pos + Block * 45UL) + BlockOffset) + 512UL));
                }
              }
#line 1197
              block_CRC += (unsigned long )c;
#line 1199
              k = (k << 8) + (c & 255);
#line 1201
              if (BlockOffset % 3UL == 2UL) {
#line 1204
                tmp___48 = tmpStringPos;
#line 1204
                tmpStringPos ++;
#line 1204
                *(sendbuf[Line] + tmp___48) = uuencode_table[(k >> 18) & 63];
#line 1205
                tmp___49 = tmpStringPos;
#line 1205
                tmpStringPos ++;
#line 1205
                *(sendbuf[Line] + tmp___49) = uuencode_table[(k >> 12) & 63];
#line 1206
                tmp___50 = tmpStringPos;
#line 1206
                tmpStringPos ++;
#line 1206
                *(sendbuf[Line] + tmp___50) = uuencode_table[(k >> 6) & 63];
#line 1207
                tmp___51 = tmpStringPos;
#line 1207
                tmpStringPos ++;
#line 1207
                *(sendbuf[Line] + tmp___51) = uuencode_table[k & 63];
              }
#line 1185
              BlockOffset ++;
            }
            while_break___15: /* CIL Label */ ;
            }
            {
#line 1219
            tmp___52 = tmpStringPos;
#line 1219
            tmpStringPos ++;
#line 1219
            *(sendbuf[Line] + tmp___52) = (char )'\r';
#line 1220
            tmp___53 = tmpStringPos;
#line 1220
            tmpStringPos ++;
#line 1220
            *(sendbuf[Line] + tmp___53) = (char )'\n';
#line 1221
            tmp___54 = tmpStringPos;
#line 1221
            tmpStringPos ++;
#line 1221
            *(sendbuf[Line] + tmp___54) = (char)0;
#line 1223
            SendComPort(IspEnvironment, (char const   *)sendbuf[Line]);
#line 1225
            ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                           & realsize, 1UL, 5000U);
#line 1226
            FormatCommand((char const   *)sendbuf[Line], tmpString);
#line 1227
            FormatCommand((char const   *)(Answer), Answer);
#line 1228
            tmp___55 = strlen((char const   *)(tmpString));
#line 1228
            tmp___56 = strncmp((char const   *)(Answer), (char const   *)(tmpString),
                               tmp___55);
            }
#line 1228
            if (tmp___56 != 0) {
              {
#line 1230
              DebugPrintf(1, "Error on writing data (1)\n");
              }
#line 1231
              return (4102);
            }
            {
#line 1249
            Line ++;
#line 1251
            DebugPrintf(3, "Line = %d\n", Line);
            }
#line 1253
            if (Line == 20) {
#line 1256
              repeat = 0;
              {
#line 1256
              while (1) {
                while_continue___16: /* CIL Label */ ;
#line 1256
                if (! (repeat < 3)) {
#line 1256
                  goto while_break___16;
                }
                {
#line 1261
                sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"%ld\r\n",
                        block_CRC);
#line 1263
                SendComPort(IspEnvironment, (char const   *)(tmpString));
#line 1265
                ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                               & realsize, 2UL, 5000U);
#line 1267
                sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"%ld\nOK\n",
                        block_CRC);
#line 1269
                FormatCommand((char const   *)(tmpString), tmpString);
#line 1270
                FormatCommand((char const   *)(Answer), Answer);
#line 1271
                tmp___57 = strcmp((char const   *)(Answer), (char const   *)(tmpString));
                }
#line 1271
                if (tmp___57 != 0) {
#line 1273
                  i = 0;
                  {
#line 1273
                  while (1) {
                    while_continue___17: /* CIL Label */ ;
#line 1273
                    if (! (i < Line)) {
#line 1273
                      goto while_break___17;
                    }
                    {
#line 1275
                    SendComPort(IspEnvironment, (char const   *)sendbuf[i]);
#line 1276
                    ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                                   & realsize, 1UL, 5000U);
#line 1273
                    i ++;
                    }
                  }
                  while_break___17: /* CIL Label */ ;
                  }
                } else {
#line 1280
                  goto while_break___16;
                }
#line 1256
                repeat ++;
              }
              while_break___16: /* CIL Label */ ;
              }
#line 1283
              if (repeat >= 3) {
                {
#line 1285
                DebugPrintf(1, "Error on writing block_CRC (1)\n");
                }
#line 1286
                return (4103);
              }
#line 1304
              Line = 0;
#line 1305
              block_CRC = 0UL;
            }
#line 1166
            Block ++;
          }
          while_break___14: /* CIL Label */ ;
          }
#line 1164
          Pos += 180UL;
        }
        while_break___13: /* CIL Label */ ;
        }
#line 1310
        if (Line != 0) {
#line 1313
          repeat = 0;
          {
#line 1313
          while (1) {
            while_continue___18: /* CIL Label */ ;
#line 1313
            if (! (repeat < 3)) {
#line 1313
              goto while_break___18;
            }
            {
#line 1315
            sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"%ld\r\n",
                    block_CRC);
#line 1317
            SendComPort(IspEnvironment, (char const   *)(tmpString));
#line 1319
            ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                           & realsize, 2UL, 5000U);
#line 1321
            sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"%ld\nOK\n",
                    block_CRC);
#line 1323
            FormatCommand((char const   *)(tmpString), tmpString);
#line 1324
            FormatCommand((char const   *)(Answer), Answer);
#line 1325
            tmp___58 = strcmp((char const   *)(Answer), (char const   *)(tmpString));
            }
#line 1325
            if (tmp___58 != 0) {
#line 1327
              i = 0;
              {
#line 1327
              while (1) {
                while_continue___19: /* CIL Label */ ;
#line 1327
                if (! (i < Line)) {
#line 1327
                  goto while_break___19;
                }
                {
#line 1329
                SendComPort(IspEnvironment, (char const   *)sendbuf[i]);
#line 1330
                ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                               & realsize, 1UL, 5000U);
#line 1327
                i ++;
                }
              }
              while_break___19: /* CIL Label */ ;
              }
            } else {
#line 1334
              goto while_break___18;
            }
#line 1313
            repeat ++;
          }
          while_break___18: /* CIL Label */ ;
          }
#line 1337
          if (repeat >= 3) {
            {
#line 1339
            DebugPrintf(1, "Error on writing block_CRC (3)\n");
            }
#line 1340
            return (4104);
          }
        }
      } else
#line 1359
      if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
#line 1362
        CopyLengthPartialOffset = 0UL;
        {
#line 1365
        while (1) {
          while_continue___20: /* CIL Label */ ;
#line 1365
          if (! (CopyLengthPartialOffset < CopyLength)) {
#line 1365
            goto while_break___20;
          }
#line 1367
          CopyLengthPartialRemainingBytes = CopyLength - CopyLengthPartialOffset;
#line 1368
          if (CopyLengthPartialRemainingBytes > 256UL) {
#line 1374
            CopyLengthPartialRemainingBytes = 256UL;
          }
          {
#line 1377
          SendComPortBlock(IspEnvironment, (void const   *)(IspEnvironment->BinaryContent + ((SectorStart + SectorOffset) + CopyLengthPartialOffset)),
                           CopyLengthPartialRemainingBytes);
#line 1379
          tmp___59 = ReceiveComPortBlockComplete(IspEnvironment, (void *)(& BigAnswer),
                                                 CopyLengthPartialRemainingBytes,
                                                 10000U);
          }
#line 1379
          if (tmp___59 != 0) {
#line 1381
            return (4102);
          }
          {
#line 1384
          tmp___60 = memcmp((void const   *)(IspEnvironment->BinaryContent + ((SectorStart + SectorOffset) + CopyLengthPartialOffset)),
                            (void const   *)(BigAnswer), CopyLengthPartialRemainingBytes);
          }
#line 1384
          if (tmp___60) {
#line 1386
            return (4102);
          }
#line 1389
          CopyLengthPartialOffset += CopyLengthPartialRemainingBytes;
        }
        while_break___20: /* CIL Label */ ;
        }
      }
      {
#line 1393
      tmp___70 = ReturnValueLpcRamStart(IspEnvironment);
      }
#line 1393
      if (IspEnvironment->BinaryOffset < tmp___70) {
#line 1393
        goto _L___3;
      } else {
        {
#line 1393
        tmp___71 = ReturnValueLpcRamStart(IspEnvironment);
        }
#line 1393
        if (IspEnvironment->BinaryOffset >= tmp___71 + (unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U)) {
          _L___3: /* CIL Label */ 
#line 1397
          if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
            {
#line 1401
            sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld 0\r\n",
                    Sector, Sector);
            }
          } else
#line 1397
          if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
            {
#line 1401
            sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld 0\r\n",
                    Sector, Sector);
            }
          } else {
            {
#line 1405
            sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"P %ld %ld\r\n",
                    Sector, Sector);
            }
          }
          {
#line 1408
          tmp___62 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                                   (int )sizeof(Answer));
          }
#line 1408
          if (! tmp___62) {
            {
#line 1410
            DebugPrintf(1, "Wrong answer on Prepare-Command (2) (Sector %ld)\n", Sector);
#line 1411
            tmp___61 = GetAndReportErrorNumber((char const   *)(Answer));
            }
#line 1411
            return (5376 + (int )tmp___61);
          }
#line 1417
          if (CopyLength < 512UL) {
#line 1419
            CopyLength = 512UL;
          } else
#line 1421
          if (SectorLength < 1024UL) {
#line 1423
            CopyLength = 1024UL;
          } else
#line 1425
          if (SectorLength < 4096UL) {
#line 1427
            CopyLength = 4096UL;
          } else {
#line 1431
            CopyLength = 8192UL;
          }
#line 1433
          if (CopyLength > (unsigned long )LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize) {
#line 1435
            CopyLength = (unsigned long )LPCtypes[IspEnvironment->DetectedDevice].MaxCopySize;
          }
          {
#line 1438
          tmp___63 = ReturnValueLpcRamBase(IspEnvironment);
#line 1438
          sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"C %ld %ld %ld\r\n",
                  (IspEnvironment->BinaryOffset + SectorStart) + SectorOffset, tmp___63,
                  CopyLength);
#line 1440
          tmp___65 = SendAndVerify(IspEnvironment, (char const   *)(tmpString), Answer,
                                   (int )sizeof(Answer));
          }
#line 1440
          if (! tmp___65) {
            {
#line 1442
            DebugPrintf(1, "Wrong answer on Copy-Command\n");
#line 1443
            tmp___64 = GetAndReportErrorNumber((char const   *)(Answer));
            }
#line 1443
            return (5632 + (int )tmp___64);
          }
#line 1446
          if (IspEnvironment->Verify) {
#line 1452
            if (SectorStart + SectorOffset < 64UL) {
              {
#line 1454
              tmp___66 = ReturnValueLpcRamBase(IspEnvironment);
#line 1454
              sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"M %d %ld %ld\r\n",
                      64, tmp___66 + ((64UL - SectorStart) - SectorOffset), CopyLength - ((64UL - SectorStart) - SectorOffset));
              }
            } else {
              {
#line 1458
              tmp___67 = ReturnValueLpcRamBase(IspEnvironment);
#line 1458
              sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"M %ld %ld %ld\r\n",
                      SectorStart + SectorOffset, tmp___67, CopyLength);
              }
            }
            {
#line 1461
            tmp___69 = SendAndVerify(IspEnvironment, (char const   *)(tmpString),
                                     Answer, (int )sizeof(Answer));
            }
#line 1461
            if (! tmp___69) {
              {
#line 1463
              DebugPrintf(1, "Wrong answer on Compare-Command\n");
#line 1464
              tmp___68 = GetAndReportErrorNumber((char const   *)(Answer));
              }
#line 1464
              return (5632 + (int )tmp___68);
            }
          }
        }
      }
#line 1088
      SectorOffset += SectorChunk;
    }
    while_break___11: /* CIL Label */ ;
    }
    {
#line 1470
    DebugPrintf(2, "\n");
#line 1471
    fflush(stdout);
    }
#line 1473
    if (SectorStart + SectorLength >= IspEnvironment->BinaryLength) {
#line 1473
      if (Sector != 0UL) {
#line 1475
        Sector = 0UL;
#line 1476
        SectorStart = 0UL;
      } else {
#line 1473
        goto _L___4;
      }
    } else
    _L___4: /* CIL Label */ 
#line 1478
    if (Sector == 0UL) {
#line 1479
      goto while_break___10;
    } else {
#line 1482
      SectorStart += (unsigned long )*(LPCtypes[IspEnvironment->DetectedDevice].SectorTable + Sector);
#line 1483
      Sector ++;
    }
  }
  while_break___10: /* CIL Label */ ;
  }
  {
#line 1487
  tDoneUpload = time((time_t *)((void *)0));
  }
#line 1488
  if (IspEnvironment->Verify) {
    {
#line 1489
    DebugPrintf(2, "Download Finished and Verified correct... taking %d seconds\n",
                tDoneUpload - tStartUpload);
    }
  } else {
    {
#line 1491
    DebugPrintf(2, "Download Finished... taking %d seconds\n", tDoneUpload - tStartUpload);
    }
  }
#line 1494
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
#line 1494
    goto _L___5;
  } else
#line 1494
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
    _L___5: /* CIL Label */ 
    {
#line 1497
    tmp___73 = SendAndVerify(IspEnvironment, "S 0\r\n", Answer, (int )sizeof(Answer));
    }
#line 1497
    if (! tmp___73) {
      {
#line 1499
      DebugPrintf(1, "Wrong answer on SetActiveBootFlashBank-Command\n");
#line 1500
      tmp___72 = GetAndReportErrorNumber((char const   *)(Answer));
      }
#line 1500
      return (6144 + (int )tmp___72);
    }
  }
#line 1504
  if (IspEnvironment->DoNotStart == 0) {
    {
#line 1506
    DebugPrintf(2, "Now launching the brand new code\n");
#line 1507
    fflush(stdout);
    }
#line 1509
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
      {
#line 1511
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld A\r\n",
              IspEnvironment->StartAddress);
      }
    } else
#line 1513
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
      {
#line 1519
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld T\r\n",
              IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
      }
    } else
#line 1513
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
      {
#line 1519
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld T\r\n",
              IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
      }
    } else
#line 1513
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
      {
#line 1519
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld T\r\n",
              IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
      }
    } else
#line 1513
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
      {
#line 1519
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld T\r\n",
              IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
      }
    } else
#line 1513
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
      {
#line 1519
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G %ld T\r\n",
              IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
      }
    } else
#line 1521
    if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
      {
#line 1523
      sprintf((char */* __restrict  */)(tmpString), (char const   */* __restrict  */)"G 0 T\r\n");
      }
    } else {
      {
#line 1527
      DebugPrintf(1, "Internal Error %s %d\n", "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c",
                  1527);
#line 1528
      exit(1);
      }
    }
    {
#line 1531
    SendComPort(IspEnvironment, (char const   *)(tmpString));
#line 1532
    tmp___77 = ReturnValueLpcRamStart(IspEnvironment);
    }
#line 1532
    if (IspEnvironment->BinaryOffset < tmp___77) {
#line 1532
      goto _L___6;
    } else {
      {
#line 1532
      tmp___78 = ReturnValueLpcRamStart(IspEnvironment);
      }
#line 1532
      if (IspEnvironment->BinaryOffset >= tmp___78 + (unsigned long )(LPCtypes[IspEnvironment->DetectedDevice].RAMSize * 1024U)) {
        _L___6: /* CIL Label */ 
        {
#line 1535
        ReceiveComPort(IspEnvironment, (char const   *)(Answer), sizeof(Answer) - 1UL,
                       & realsize, 2UL, 5000U);
        }
        {
#line 1539
        while (1) {
          while_continue___21: /* CIL Label */ ;
#line 1539
          if (realsize > 0UL) {
#line 1539
            if (! ((int )((signed char )Answer[(int )realsize - 1]) < 0)) {
#line 1539
              goto while_break___21;
            }
          } else {
#line 1539
            goto while_break___21;
          }
#line 1540
          realsize --;
        }
        while_break___21: /* CIL Label */ ;
        }
#line 1541
        Answer[(int )realsize] = (char )'\000';
#line 1545
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
          {
#line 1547
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld A\n0",
                  IspEnvironment->StartAddress);
          }
        } else
#line 1549
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
          {
#line 1555
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld T\n0",
                  IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
          }
        } else
#line 1549
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
          {
#line 1555
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld T\n0",
                  IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
          }
        } else
#line 1549
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
          {
#line 1555
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld T\n0",
                  IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
          }
        } else
#line 1549
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
          {
#line 1555
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld T\n0",
                  IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
          }
        } else
#line 1549
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
          {
#line 1555
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G %ld T\n0",
                  IspEnvironment->StartAddress & 0xfffffffffffffffeUL);
          }
        } else
#line 1557
        if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
          {
#line 1559
          sprintf((char */* __restrict  */)(ExpectedAnswer), (char const   */* __restrict  */)"G 0 T\n0");
          }
        } else {
          {
#line 1563
          DebugPrintf(1, "Internal Error %s %d\n", "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c",
                      1563);
#line 1564
          exit(1);
          }
        }
        {
#line 1567
        FormatCommand((char const   *)(Answer), Answer);
        }
#line 1568
        if (realsize == 0UL) {
          {
#line 1570
          DebugPrintf(2, "Failed to run the new downloaded code: ");
#line 1571
          tmp___74 = GetAndReportErrorNumber((char const   *)(Answer));
          }
#line 1571
          return (5888 + (int )tmp___74);
        } else {
          {
#line 1568
          tmp___75 = strlen((char const   *)(ExpectedAnswer));
#line 1568
          tmp___76 = strncmp((char const   *)(Answer), (char const   *)(ExpectedAnswer),
                             tmp___75);
          }
#line 1568
          if (tmp___76 != 0) {
            {
#line 1570
            DebugPrintf(2, "Failed to run the new downloaded code: ");
#line 1571
            tmp___74 = GetAndReportErrorNumber((char const   *)(Answer));
            }
#line 1571
            return (5888 + (int )tmp___74);
          }
        }
      }
    }
    {
#line 1575
    fflush(stdout);
    }
  }
#line 1577
  return (0);
}
}
#line 1582 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
unsigned long ReturnValueLpcRamStart(ISP_ENVIRONMENT *IspEnvironment ) 
{ 


  {
#line 1584
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
#line 1586
    return (268435456UL);
  } else
#line 1588
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
#line 1590
    return (1073741824UL);
  } else
#line 1592
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
#line 1594
    return (268435456UL);
  } else
#line 1596
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
#line 1598
    return (268435456UL);
  } else
#line 1600
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
#line 1602
    return (268435456UL);
  } else
#line 1604
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
#line 1606
    return (268435456UL);
  } else
#line 1608
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
#line 1610
    return (268435456UL);
  }
  {
#line 1612
  DebugPrintf(1, "Error in ReturnValueLpcRamStart (%d)\n", (unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant);
#line 1613
  exit(1);
  }
}
}
#line 1617 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcprog.c"
unsigned long ReturnValueLpcRamBase(ISP_ENVIRONMENT *IspEnvironment ) 
{ 


  {
#line 1619
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 1U) {
#line 1621
    return (268435968UL);
  } else
#line 1623
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 2U) {
#line 1625
    return (1073742336UL);
  } else
#line 1627
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 3U) {
#line 1629
    return (268435968UL);
  } else
#line 1631
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 4U) {
#line 1633
    return (268435968UL);
  } else
#line 1635
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 5U) {
#line 1637
    return (268436224UL);
  } else
#line 1639
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 6U) {
#line 1641
    return (268436224UL);
  } else
#line 1643
  if ((unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant == 7U) {
#line 1645
    return (268436080UL);
  }
  {
#line 1647
  DebugPrintf(1, "Error in ReturnValueLpcRamBase (%d)\n", (unsigned int const   )LPCtypes[IspEnvironment->DetectedDevice].ChipVariant);
#line 1648
  exit(1);
  }
}
}
#line 534 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcasecmp)(char const   *__s1 ,
                                                                                                   char const   *__s2 )  __attribute__((__pure__)) ;
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 366
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 42 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcterm.h"
void Terminal(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 43
BOOL CheckTerminalParameters(ISP_ENVIRONMENT *IspEnvironment , char *pstr ) ;
#line 45 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcterm.c"
BOOL CheckTerminalParameters(ISP_ENVIRONMENT *IspEnvironment , char *pstr ) 
{ 
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 47
  tmp = strcasecmp((char const   *)pstr, "-localecho");
  }
#line 47
  if (tmp == 0) {
    {
#line 49
    IspEnvironment->LocalEcho = (unsigned char)1;
#line 50
    DebugPrintf(3, "Local echo in terminal mode.\n");
    }
#line 51
    return (1);
  }
  {
#line 54
  tmp___0 = strcasecmp((char const   *)pstr, "-term");
  }
#line 54
  if (tmp___0 == 0) {
    {
#line 56
    IspEnvironment->TerminalAfterUpload = (unsigned char)1;
#line 57
    DebugPrintf(3, "Invoke terminal after upload.\n");
    }
#line 58
    return (1);
  }
  {
#line 61
  tmp___1 = strcasecmp((char const   *)pstr, "-termonly");
  }
#line 61
  if (tmp___1 == 0) {
    {
#line 63
    IspEnvironment->TerminalOnly = (unsigned char)1;
#line 64
    IspEnvironment->ProgramChip = (unsigned char)0;
#line 65
    DebugPrintf(3, "Only provide terminal.\n");
    }
#line 66
    return (1);
  }
#line 69
  return (0);
}
}
#line 72 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpcterm.c"
void Terminal(ISP_ENVIRONMENT *IspEnvironment ) 
{ 
  int ch ;
  char buffer[128] ;
  int fdlogfile ;
  unsigned long realsize ;
  int tmp ;

  {
#line 74
  if (IspEnvironment->TerminalAfterUpload) {
#line 74
    goto _L;
  } else
#line 74
  if (IspEnvironment->TerminalOnly) {
    _L: /* CIL Label */ 
#line 76
    ch = 0;
#line 78
    fdlogfile = -1;
#line 82
    if (IspEnvironment->LogFile) {
      {
#line 84
      fdlogfile = open("lpc21isp.log", 578, 511);
      }
    }
    {
#line 87
    PrepareKeyboardTtySettings();
#line 89
    DebugPrintf(1, "Terminal started (press Escape to abort)\n\n");
#line 90
    fflush(stdout);
    }
    {
#line 92
    while (1) {
      while_continue: /* CIL Label */ ;
      {
#line 94
      ReceiveComPort(IspEnvironment, (char const   *)(buffer), sizeof(buffer) - 1UL,
                     & realsize, 0UL, 200U);
      }
#line 96
      if (realsize) {
        {
#line 98
        write(1, (void const   *)(buffer), realsize);
#line 99
        fflush(stdout);
        }
#line 100
        if (IspEnvironment->LogFile) {
          {
#line 102
          write(fdlogfile, (void const   *)(buffer), realsize);
          }
        }
      }
      {
#line 107
      tmp = kbhit();
      }
#line 107
      if (tmp) {
        {
#line 109
        ch = getch();
        }
#line 110
        if (ch == 27) {
#line 112
          goto while_break;
        }
#line 114
        buffer[0] = (char )((unsigned char )ch);
#line 115
        buffer[1] = (char)0;
#line 117
        if (IspEnvironment->LocalEcho) {
          {
#line 119
          write(1, (void const   *)(buffer), (size_t )1);
          }
        }
        {
#line 122
        SendComPort(IspEnvironment, (char const   *)(buffer));
        }
      }
#line 92
      if (! (ch != 27)) {
#line 92
        goto while_break;
      }
    }
    while_break: /* CIL Label */ ;
    }
    {
#line 127
    DebugPrintf(1, "\n\nTerminal stopped\n\n");
#line 128
    fflush(stdout);
#line 130
    ResetKeyboardTtySettings();
    }
#line 132
    if (IspEnvironment->LogFile) {
      {
#line 134
      close(fdlogfile);
      }
    }
  }
#line 137
  return;
}
}
#line 258 "/home/wheatley/newnew/temp/lpc21isp-1.94/lpc21isp.h"
extern void ClearSerialPortBuffers(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 47 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.h"
int AnalogDevicesDownload(ISP_ENVIRONMENT *IspEnvironment ) ;
#line 49 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
static void AnalogDevicesSync(ISP_ENVIRONMENT *IspEnvironment ) 
{ 
  BINARY sync___0 ;
  AD_SYNC_RESPONSE response ;
  int sync_attempts ;
  size_t tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 57
  ClearSerialPortBuffers(IspEnvironment);
#line 59
  DebugPrintf(2, "Synchronizing\n");
#line 61
  sync___0 = (BINARY )8;
#line 70
  sync_attempts = 0;
  }
  {
#line 70
  while (1) {
    while_continue: /* CIL Label */ ;
#line 70
    if (! (sync_attempts < 5)) {
#line 70
      goto while_break;
    }
    {
#line 72
    SendComPortBlock(IspEnvironment, (void const   *)(& sync___0), (size_t )1);
#line 74
    tmp___1 = ReceiveComPortBlockComplete(IspEnvironment, (void *)(& response), sizeof(response),
                                          500U);
    }
#line 74
    if (tmp___1 == 0) {
      {
#line 78
      tmp = strlen("ADuC");
#line 78
      tmp___0 = memcmp((void const   *)(response.product_id), (void const   *)"ADuC",
                       tmp);
      }
#line 78
      if (tmp___0 == 0) {
#line 81
        return;
      } else {
        {
#line 85
        DumpString(3, (void const   *)(& response), sizeof(response), "Unexpected response to sync attempt ");
        }
      }
    } else {
      {
#line 91
      DebugPrintf(3, "No (or incomplete) answer on sync attempt\n");
      }
    }
    {
#line 94
    ClearSerialPortBuffers(IspEnvironment);
#line 70
    sync_attempts ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 97
  DebugPrintf(1, "No (or unacceptable) answer on sync attempt\n");
#line 98
  exit(4);
  }
}
}
#line 125 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
static void AnalogDevicesFormPacket(ISP_ENVIRONMENT *IspEnvironment , char cmd , int no_bytes ,
                                    unsigned int address , void const   *data , AD_PACKET *packet ) 
{ 
  BINARY checksum ;
  BINARY const   *data_in ;
  int i ;

  {
#line 142
  if (no_bytes < 0) {
    {
#line 144
    DebugPrintf(1, "The number of bytes (%d) passed to FormPacket is invalid.\n",
                no_bytes);
#line 147
    exit(-1);
    }
  } else
#line 142
  if (no_bytes > 250) {
    {
#line 144
    DebugPrintf(1, "The number of bytes (%d) passed to FormPacket is invalid.\n",
                no_bytes);
#line 147
    exit(-1);
    }
  }
#line 149
  if ((unsigned long )data == (unsigned long )((void const   *)0)) {
#line 149
    if (no_bytes != 0) {
      {
#line 151
      DebugPrintf(1, "A null pointer to data paased to FormPacket when data was expected.\n");
#line 153
      exit(-1);
      }
    }
  }
#line 155
  if ((unsigned long )packet == (unsigned long )((AD_PACKET *)0)) {
    {
#line 157
    DebugPrintf(1, "A null packet pointer was passed to FormPacket.\n");
#line 159
    exit(-1);
    }
  }
#line 162
  checksum = (BINARY )0;
#line 164
  data_in = (BINARY const   *)((BINARY *)data);
#line 167
  packet->start1 = (char)7;
#line 168
  packet->start2 = (char)14;
#line 175
  packet->bytes = (BINARY )(no_bytes + 5);
#line 177
  checksum = (BINARY )((int )checksum + (int )packet->bytes);
#line 181
  packet->cmd = cmd;
#line 183
  checksum = (BINARY )((int )checksum + (int )cmd);
#line 187
  packet->address_l = (BINARY )(address & 255U);
#line 188
  packet->address_m = (BINARY )((address >> 8) & 255U);
#line 189
  packet->address_u = (BINARY )((address >> 16) & 255U);
#line 190
  packet->address_h = (BINARY )((address >> 24) & 255U);
#line 192
  checksum = (BINARY )((int )checksum + (int )packet->address_l);
#line 193
  checksum = (BINARY )((int )checksum + (int )packet->address_m);
#line 194
  checksum = (BINARY )((int )checksum + (int )packet->address_u);
#line 195
  checksum = (BINARY )((int )checksum + (int )packet->address_h);
#line 199
  i = 0;
  {
#line 199
  while (1) {
    while_continue: /* CIL Label */ ;
#line 199
    if (! (i < no_bytes)) {
#line 199
      goto while_break;
    }
#line 201
    packet->data[i] = (BINARY )*(data_in + i);
#line 202
    checksum = (BINARY )((int )checksum + (int )*(data_in + i));
#line 199
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 206
  packet->data[i] = (BINARY )(- ((int )checksum));
#line 207
  return;
}
}
#line 215 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
static void AnalogDevicesSendPacket(ISP_ENVIRONMENT *IspEnvironment , AD_PACKET const   *packet ) 
{ 
  BINARY response ;
  int retry ;
  int tmp ;

  {
#line 219
  retry = 0;
  {
#line 221
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 222
    retry ++;
#line 226
    ClearSerialPortBuffers(IspEnvironment);
#line 231
    SendComPortBlock(IspEnvironment, (void const   *)packet, (size_t )((int const   )packet->bytes + 4));
#line 235
    tmp = ReceiveComPortBlockComplete(IspEnvironment, (void *)(& response), (size_t )1,
                                      5000U);
    }
#line 235
    if (tmp == 0) {
#line 237
      if ((int )response == 6) {
        {
#line 239
        DebugPrintf(3, "Packet Sent\n");
        }
#line 240
        return;
      }
#line 242
      if ((int )response != 7) {
        {
#line 244
        DebugPrintf(3, "Unexpected response to packet (%x)\n", (int )response);
        }
      }
      {
#line 246
      DebugPrintf(2, "*");
      }
    }
#line 221
    if (! (retry < 3)) {
#line 221
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 250
  DebugPrintf(1, "Send packet failed\n");
#line 251
  exit(-1);
  }
}
}
#line 258 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
static void AnalogDevicesErase(ISP_ENVIRONMENT *IspEnvironment ) 
{ 
  BINARY pages ;
  AD_PACKET packet ;

  {
  {
#line 263
  pages = (BINARY )0;
#line 264
  DebugPrintf(2, "Erasing .. ");
#line 265
  AnalogDevicesFormPacket(IspEnvironment, (char )'E', 1, 0U, (void const   *)(& pages),
                          & packet);
#line 266
  AnalogDevicesSendPacket(IspEnvironment, (AD_PACKET const   *)(& packet));
#line 267
  DebugPrintf(2, "Erased\n");
  }
#line 268
  return;
}
}
#line 278 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
static void AnalogDevicesWrite(ISP_ENVIRONMENT *IspEnvironment , void const   *data ,
                               long address , size_t bytes ) 
{ 
  AD_PACKET packet ;
  BINARY const   *prog_data ;

  {
  {
#line 284
  DebugPrintf(2, "Writing %d bytes ", bytes);
#line 285
  prog_data = (BINARY const   *)data;
  }
  {
#line 286
  while (1) {
    while_continue: /* CIL Label */ ;
#line 286
    if (! (bytes > 250UL)) {
#line 286
      goto while_break;
    }
    {
#line 288
    AnalogDevicesFormPacket(IspEnvironment, (char )'W', 250, (unsigned int )address,
                            (void const   *)prog_data, & packet);
#line 289
    AnalogDevicesSendPacket(IspEnvironment, (AD_PACKET const   *)(& packet));
#line 290
    address += 250L;
#line 291
    prog_data += 250;
#line 292
    bytes -= 250UL;
#line 293
    DebugPrintf(2, ".");
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 295
  if (bytes > 0UL) {
    {
#line 297
    AnalogDevicesFormPacket(IspEnvironment, (char )'W', (int )bytes, (unsigned int )address,
                            (void const   *)prog_data, & packet);
#line 298
    AnalogDevicesSendPacket(IspEnvironment, (AD_PACKET const   *)(& packet));
#line 299
    DebugPrintf(2, ".");
    }
  }
#line 301
  return;
}
}
#line 310 "/home/wheatley/newnew/temp/lpc21isp-1.94/adprog.c"
int AnalogDevicesDownload(ISP_ENVIRONMENT *IspEnvironment ) 
{ 


  {
  {
#line 312
  AnalogDevicesSync(IspEnvironment);
#line 313
  AnalogDevicesErase(IspEnvironment);
  }
#line 314
  if (IspEnvironment->BinaryLength > 524288UL) {
    {
#line 316
    DebugPrintf(2, "Note:  Flash remapped 0x80000 to 0.\n");
#line 317
    AnalogDevicesWrite(IspEnvironment, (void const   *)(IspEnvironment->BinaryContent + 524288),
                       0L, IspEnvironment->BinaryLength - 524288UL);
    }
  } else {
    {
#line 321
    AnalogDevicesWrite(IspEnvironment, (void const   *)IspEnvironment->BinaryContent,
                       0L, IspEnvironment->BinaryLength);
    }
  }
#line 323
  return (0);
}
}
