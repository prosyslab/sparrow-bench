/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 16 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
typedef int bool;
#line 32 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
typedef unsigned char zbyte;
#line 33 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
typedef unsigned short zword;
#line 35
enum story {
    BEYOND_ZORK = 0,
    SHERLOCK = 1,
    ZORK_ZERO = 2,
    SHOGUN = 3,
    ARTHUR = 4,
    JOURNEY = 5,
    LURKING_HORROR = 6,
    UNKNOWN = 7
} ;
#line 46 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
typedef unsigned char zchar;
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 6 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/setup.h"
struct frotz_setup_struct {
   int attribute_assignment ;
   int attribute_testing ;
   int context_lines ;
   int object_locating ;
   int object_movement ;
   int left_margin ;
   int right_margin ;
   int ignore_errors ;
   int interpreter_number ;
   int piracy ;
   int undo_slots ;
   int expand_abbreviations ;
   int script_cols ;
   int save_quetzal ;
   int sound ;
   int err_report_mode ;
};
#line 6 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/setup.h"
typedef struct frotz_setup_struct f_setup_t;
#line 87 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
struct undo_struct;
#line 87 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
typedef struct undo_struct undo_t;
#line 88 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
struct undo_struct {
   undo_t *next ;
   undo_t *prev ;
   long pc ;
   long diff_size ;
   zword frame_count ;
   zword stack_size ;
   zword frame_offset ;
};
#line 218 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
struct __anonstruct_records_49 {
   enum story story_id ;
   zword release ;
   zbyte serial[6] ;
};
#line 29 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
struct __anonstruct_redirect_41 {
   zword xsize ;
   zword table ;
   zword width ;
   zword total ;
};
#line 27 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
struct __anonstruct_mapper_41 {
   enum story story_id ;
   int pic ;
   int pic1 ;
   int pic2 ;
};
#line 52 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
struct __anonstruct_wp_42 {
   zword y_pos ;
   zword x_pos ;
   zword y_size ;
   zword x_size ;
   zword y_cursor ;
   zword x_cursor ;
   zword left ;
   zword right ;
   zword nl_routine ;
   zword nl_countdown ;
   zword style ;
   zword colour ;
   zword font ;
   zword font_size ;
   zword attribute ;
   zword line_count ;
};
#line 51 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
typedef unsigned long zlong;
#line 344 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
enum story story_id ;
#line 352
zword zargs[8] ;
#line 353
int zargc ;
#line 484
void z_sound_effect(void) ;
#line 585
extern void os_beep(int  ) ;
#line 592
extern void os_finish_with_sample(int  ) ;
#line 598
extern void os_prepare_sample(int  ) ;
#line 611
extern void os_start_sample(int  , int  , int  , zword  ) ;
#line 612
extern void os_stop_sample(int  ) ;
#line 32 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
int direct_call(zword addr ) ;
#line 34 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static zword routine  =    (zword )0;
#line 36 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static int next_sample  =    0;
#line 37 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static int next_volume  =    0;
#line 39 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static bool locked  =    0;
#line 40 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static bool playing  =    0;
#line 49 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
void init_sound(void) 
{ 


  {
#line 51
  locked = 0;
#line 52
  playing = 0;
#line 53
  return;
}
}
#line 66
static void start_sample(int number , int volume , int repeats , zword eos ) ;
#line 66 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static zbyte lh_repeats[20]  = 
#line 66
  {      (zbyte )0,      (zbyte )0,      (zbyte )0,      (zbyte )1, 
        (zbyte )255,      (zbyte )0,      (zbyte )1,      (zbyte )1, 
        (zbyte )1,      (zbyte )1,      (zbyte )255,      (zbyte )1, 
        (zbyte )1,      (zbyte )255,      (zbyte )0,      (zbyte )255, 
        (zbyte )255,      (zbyte )255,      (zbyte )255,      (zbyte )255};
#line 63 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static void start_sample(int number , int volume , int repeats , zword eos ) 
{ 


  {
#line 73
  if ((unsigned int )story_id == 6U) {
#line 74
    repeats = (int )lh_repeats[number];
  }
  {
#line 76
  os_start_sample(number, volume, repeats, eos);
#line 78
  routine = eos;
#line 79
  playing = 1;
  }
#line 81
  return;
}
}
#line 92 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
static void start_next_sample(void) 
{ 


  {
#line 95
  if (next_sample != 0) {
    {
#line 96
    start_sample(next_sample, next_volume, 0, (zword )0);
    }
  }
#line 98
  next_sample = 0;
#line 99
  next_volume = 0;
#line 101
  return;
}
}
#line 112 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
void end_of_sound(void) 
{ 


  {
#line 119
  playing = 0;
#line 121
  if (! locked) {
#line 123
    if ((unsigned int )story_id == 6U) {
      {
#line 124
      start_next_sample();
      }
    }
    {
#line 126
    direct_call(routine);
    }
  }
#line 130
  return;
}
}
#line 145 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/sound.c"
void z_sound_effect(void) 
{ 
  zword number ;
  zword effect ;
  zword volume ;
  int tmp ;

  {
#line 147
  number = zargs[0];
#line 148
  effect = zargs[1];
#line 149
  volume = zargs[2];
#line 152
  if (zargc < 1) {
#line 153
    number = (zword )1;
  }
#line 154
  if (zargc < 2) {
#line 155
    effect = (zword )2;
  }
#line 156
  if (zargc < 3) {
#line 157
    volume = (zword )8;
  }
#line 159
  if ((int )number >= 3) {
#line 159
    goto _L___0;
  } else
#line 159
  if ((int )number == 0) {
    _L___0: /* CIL Label */ 
#line 161
    locked = 1;
#line 163
    if ((unsigned int )story_id == 6U) {
#line 163
      if ((int )number == 9) {
#line 163
        goto _L;
      } else
#line 163
      if ((int )number == 16) {
        _L: /* CIL Label */ 
#line 165
        if ((int )effect == 2) {
#line 167
          next_sample = (int )number;
#line 168
          next_volume = (int )volume;
#line 170
          locked = 0;
#line 172
          if (! playing) {
            {
#line 173
            start_next_sample();
            }
          }
        } else {
#line 175
          locked = 0;
        }
#line 177
        return;
      }
    }
#line 181
    playing = 0;
    {
#line 185
    if ((int )effect == 1) {
#line 185
      goto case_1;
    }
#line 188
    if ((int )effect == 2) {
#line 188
      goto case_2;
    }
#line 191
    if ((int )effect == 3) {
#line 191
      goto case_3;
    }
#line 194
    if ((int )effect == 4) {
#line 194
      goto case_4;
    }
#line 183
    goto switch_break;
    case_1: /* CIL Label */ 
    {
#line 186
    os_prepare_sample((int )number);
    }
#line 187
    goto switch_break;
    case_2: /* CIL Label */ 
#line 189
    if (zargc == 4) {
#line 189
      tmp = (int )zargs[3];
    } else {
#line 189
      tmp = 0;
    }
    {
#line 189
    start_sample((int )number, (int )volume & 255, (int )volume >> 8, (zword )tmp);
    }
#line 190
    goto switch_break;
    case_3: /* CIL Label */ 
    {
#line 192
    os_stop_sample((int )number);
    }
#line 193
    goto switch_break;
    case_4: /* CIL Label */ 
    {
#line 195
    os_finish_with_sample((int )number);
    }
#line 196
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 200
    locked = 0;
  } else {
    {
#line 202
    os_beep((int )number);
    }
  }
#line 204
  return;
}
}
#line 301 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zbyte h_version ;
#line 355
bool ostream_screen ;
#line 356
bool ostream_script ;
#line 357
bool ostream_memory ;
#line 358
bool ostream_record ;
#line 359
bool istream_replay ;
#line 360
bool message ;
#line 369
bool enable_scripting ;
#line 417
void z_input_stream(void) ;
#line 438
void z_output_stream(void) ;
#line 566
void flush_buffer(void) ;
#line 573
void stream_mssg_on(void) ;
#line 574
void stream_mssg_off(void) ;
#line 23 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
bool handle_hot_key(zchar key ) ;
#line 25
bool validate_click(void) ;
#line 27
void replay_open(void) ;
#line 28
void replay_close(void) ;
#line 29
void memory_open(zword table , zword xsize , bool buffering ) ;
#line 30
void memory_close(void) ;
#line 31
void record_open(void) ;
#line 32
void record_close(void) ;
#line 33
void script_open(void) ;
#line 34
void script_close(void) ;
#line 36
void memory_word(zchar const   *s ) ;
#line 37
void memory_new_line(void) ;
#line 38
void record_write_key(zchar key ) ;
#line 39
void record_write_input(zchar const   *buf , zchar key ) ;
#line 40
void script_char(zchar c ) ;
#line 41
void script_word(zchar const   *s ) ;
#line 42
void script_new_line(void) ;
#line 43
void script_write_input(zchar const   *buf , zchar key ) ;
#line 44
void script_erase_input(zchar const   *buf ) ;
#line 45
void script_mssg_on(void) ;
#line 46
void script_mssg_off(void) ;
#line 47
void screen_char(zchar c ) ;
#line 48
void screen_word(zchar const   *s ) ;
#line 49
void screen_new_line(void) ;
#line 50
void screen_write_input(zchar const   *buf , zchar key ) ;
#line 51
void screen_erase_input(zchar const   *buf ) ;
#line 52
void screen_mssg_on(void) ;
#line 53
void screen_mssg_off(void) ;
#line 55
zchar replay_read_key(void) ;
#line 56
zchar replay_read_input(zchar *buf ) ;
#line 57
zchar console_read_key(zword timeout ) ;
#line 58
zchar console_read_input(int max , zchar *buf , zword timeout , bool continued ) ;
#line 69 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void stream_mssg_on(void) 
{ 


  {
  {
#line 72
  flush_buffer();
  }
#line 74
  if (ostream_screen) {
    {
#line 75
    screen_mssg_on();
    }
  }
#line 76
  if (ostream_script) {
#line 76
    if (enable_scripting) {
      {
#line 77
      script_mssg_on();
      }
    }
  }
#line 79
  message = 1;
#line 81
  return;
}
}
#line 90 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void stream_mssg_off(void) 
{ 


  {
  {
#line 93
  flush_buffer();
  }
#line 95
  if (ostream_screen) {
    {
#line 96
    screen_mssg_off();
    }
  }
#line 97
  if (ostream_script) {
#line 97
    if (enable_scripting) {
      {
#line 98
      script_mssg_off();
      }
    }
  }
#line 100
  message = 0;
#line 102
  return;
}
}
#line 113 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void z_output_stream(void) 
{ 


  {
  {
#line 116
  flush_buffer();
  }
  {
#line 120
  if ((int )((short )zargs[0]) == 1) {
#line 120
    goto case_1;
  }
#line 122
  if ((int )((short )zargs[0]) == -1) {
#line 122
    goto case_neg_1;
  }
#line 124
  if ((int )((short )zargs[0]) == 2) {
#line 124
    goto case_2;
  }
#line 126
  if ((int )((short )zargs[0]) == -2) {
#line 126
    goto case_neg_2;
  }
#line 128
  if ((int )((short )zargs[0]) == 3) {
#line 128
    goto case_3;
  }
#line 130
  if ((int )((short )zargs[0]) == -3) {
#line 130
    goto case_neg_3;
  }
#line 132
  if ((int )((short )zargs[0]) == 4) {
#line 132
    goto case_4;
  }
#line 134
  if ((int )((short )zargs[0]) == -4) {
#line 134
    goto case_neg_4;
  }
#line 118
  goto switch_break;
  case_1: /* CIL Label */ 
#line 120
  ostream_screen = 1;
#line 121
  goto switch_break;
  case_neg_1: /* CIL Label */ 
#line 122
  ostream_screen = 0;
#line 123
  goto switch_break;
  case_2: /* CIL Label */ 
#line 124
  if (! ostream_script) {
    {
#line 124
    script_open();
    }
  }
#line 125
  goto switch_break;
  case_neg_2: /* CIL Label */ 
#line 126
  if (ostream_script) {
    {
#line 126
    script_close();
    }
  }
#line 127
  goto switch_break;
  case_3: /* CIL Label */ 
  {
#line 128
  memory_open(zargs[1], zargs[2], zargc >= 3);
  }
#line 129
  goto switch_break;
  case_neg_3: /* CIL Label */ 
  {
#line 130
  memory_close();
  }
#line 131
  goto switch_break;
  case_4: /* CIL Label */ 
#line 132
  if (! ostream_record) {
    {
#line 132
    record_open();
    }
  }
#line 133
  goto switch_break;
  case_neg_4: /* CIL Label */ 
#line 134
  if (ostream_record) {
    {
#line 134
    record_close();
    }
  }
#line 135
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 139
  return;
}
}
#line 148 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void stream_char(zchar c ) 
{ 


  {
#line 151
  if (ostream_screen) {
    {
#line 152
    screen_char(c);
    }
  }
#line 153
  if (ostream_script) {
#line 153
    if (enable_scripting) {
      {
#line 154
      script_char(c);
      }
    }
  }
#line 156
  return;
}
}
#line 165 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void stream_word(zchar const   *s ) 
{ 


  {
#line 168
  if (ostream_memory) {
#line 168
    if (! message) {
      {
#line 170
      memory_word(s);
      }
    } else {
#line 168
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
#line 174
    if (ostream_screen) {
      {
#line 175
      screen_word(s);
      }
    }
#line 176
    if (ostream_script) {
#line 176
      if (enable_scripting) {
        {
#line 177
        script_word(s);
        }
      }
    }
  }
#line 181
  return;
}
}
#line 190 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void stream_new_line(void) 
{ 


  {
#line 193
  if (ostream_memory) {
#line 193
    if (! message) {
      {
#line 195
      memory_new_line();
      }
    } else {
#line 193
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
#line 199
    if (ostream_screen) {
      {
#line 200
      screen_new_line();
      }
    }
#line 201
    if (ostream_script) {
#line 201
      if (enable_scripting) {
        {
#line 202
        script_new_line();
        }
      }
    }
  }
#line 206
  return;
}
}
#line 215 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
void z_input_stream(void) 
{ 


  {
  {
#line 218
  flush_buffer();
  }
#line 220
  if ((int )zargs[0] == 0) {
#line 220
    if (istream_replay) {
      {
#line 221
      replay_close();
      }
    }
  }
#line 222
  if ((int )zargs[0] == 1) {
#line 222
    if (! istream_replay) {
      {
#line 223
      replay_open();
      }
    }
  }
#line 225
  return;
}
}
#line 234 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
zchar stream_read_key(zword timeout , zword routine___0 , bool hot_keys ) 
{ 
  zchar key ;
  bool tmp ;
  int tmp___0 ;
  bool tmp___1 ;

  {
  {
#line 237
  key = (zchar )127;
#line 239
  flush_buffer();
  }
  continue_input: 
  {
#line 245
  while (1) {
    while_continue: /* CIL Label */ ;
#line 247
    if (istream_replay) {
      {
#line 248
      key = replay_read_key();
      }
    } else {
      {
#line 250
      key = console_read_key(timeout);
      }
    }
#line 245
    if (! ((int )key == 127)) {
#line 245
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 256
  if ((int )key == 155) {
#line 256
    goto _L;
  } else
#line 256
  if ((int )key == 156) {
    _L: /* CIL Label */ 
    {
#line 257
    tmp = validate_click();
    }
#line 257
    if (! tmp) {
#line 258
      goto continue_input;
    }
  }
#line 262
  if (ostream_record) {
#line 262
    if (! istream_replay) {
      {
#line 263
      record_write_key(key);
      }
    }
  }
#line 267
  if ((int )key == 0) {
    {
#line 268
    tmp___0 = direct_call(routine___0);
    }
#line 268
    if (tmp___0 == 0) {
#line 269
      goto continue_input;
    }
  }
#line 273
  if (hot_keys) {
#line 273
    if ((int )key >= 14) {
#line 273
      if ((int )key <= 21) {
#line 275
        if ((int )h_version == 4) {
#line 275
          if ((int )key == 17) {
#line 276
            goto continue_input;
          }
        }
        {
#line 277
        tmp___1 = handle_hot_key(key);
        }
#line 277
        if (! tmp___1) {
#line 278
          goto continue_input;
        }
#line 280
        return ((zchar )127);
      }
    }
  }
#line 286
  return (key);
}
}
#line 297 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/stream.c"
zchar stream_read_input(int max , zchar *buf , zword timeout , zword routine___0 ,
                        bool hot_keys , bool no_scripting ) 
{ 
  zchar key ;
  bool tmp ;
  int tmp___0 ;
  bool tmp___1 ;

  {
  {
#line 302
  key = (zchar )127;
#line 304
  flush_buffer();
  }
#line 308
  if (ostream_script) {
#line 308
    if (enable_scripting) {
#line 308
      if (! no_scripting) {
        {
#line 309
        script_erase_input((zchar const   *)buf);
        }
      }
    }
  }
#line 310
  if (istream_replay) {
    {
#line 311
    screen_erase_input((zchar const   *)buf);
    }
  }
  continue_input: 
  {
#line 317
  while (1) {
    while_continue: /* CIL Label */ ;
#line 319
    if (istream_replay) {
      {
#line 320
      key = replay_read_input(buf);
      }
    } else {
      {
#line 322
      key = console_read_input(max, buf, timeout, (int )key != 127);
      }
    }
#line 317
    if (! ((int )key == 127)) {
#line 317
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 328
  if ((int )key == 155) {
#line 328
    goto _L;
  } else
#line 328
  if ((int )key == 156) {
    _L: /* CIL Label */ 
    {
#line 329
    tmp = validate_click();
    }
#line 329
    if (! tmp) {
#line 330
      goto continue_input;
    }
  }
#line 334
  if (ostream_record) {
#line 334
    if (! istream_replay) {
      {
#line 335
      record_write_input((zchar const   *)buf, key);
      }
    }
  }
#line 339
  if ((int )key == 0) {
    {
#line 340
    tmp___0 = direct_call(routine___0);
    }
#line 340
    if (tmp___0 == 0) {
#line 341
      goto continue_input;
    }
  }
#line 345
  if (hot_keys) {
#line 345
    if ((int )key >= 14) {
#line 345
      if ((int )key <= 21) {
        {
#line 347
        tmp___1 = handle_hot_key(key);
        }
#line 347
        if (! tmp___1) {
#line 348
          goto continue_input;
        }
#line 350
        return ((zchar )127);
      }
    }
  }
#line 356
  if (ostream_script) {
#line 356
    if (enable_scripting) {
#line 356
      if (! no_scripting) {
        {
#line 357
        script_write_input((zchar const   *)buf, key);
        }
      }
    }
  }
#line 358
  if (istream_replay) {
    {
#line 359
    screen_write_input((zchar const   *)buf, key);
    }
  }
#line 363
  return (key);
}
}
#line 237 "/usr/include/stdio.h"
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 531
extern int fgetc(FILE *__stream ) ;
#line 573
extern int fputc(int __c , FILE *__stream ) ;
#line 702
extern int ungetc(int __c , FILE *__stream ) ;
#line 749
extern int fseek(FILE *__stream , long __off , int __whence ) ;
#line 129 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 284 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zbyte *zmp ;
#line 310
zword h_flags ;
#line 365
int mouse_x ;
#line 366
int mouse_y ;
#line 563
extern zchar translate_from_zscii(zbyte  ) ;
#line 564
extern zbyte translate_to_zscii(zchar  ) ;
#line 571
extern void print_string(char const   * ) ;
#line 601
extern int os_read_file_name(char * , char const   * , int  ) ;
#line 25 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/setup.h"
extern f_setup_t f_setup ;
#line 31 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void set_more_prompts(bool flag___0 ) ;
#line 33
bool is_terminator(zchar key ) ;
#line 35
bool read_yes_or_no(char const   *s ) ;
#line 37 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
char script_name[81]  = 
#line 37
  {      (char )'s',      (char )'t',      (char )'o',      (char )'r', 
        (char )'y',      (char )'.',      (char )'s',      (char )'c', 
        (char )'r',      (char )'\000'};
#line 38 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
char command_name[81]  = 
#line 38
  {      (char )'s',      (char )'t',      (char )'o',      (char )'r', 
        (char )'y',      (char )'.',      (char )'r',      (char )'e', 
        (char )'c',      (char )'\000'};
#line 44 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static int script_width  =    0;
#line 46 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static FILE *sfp  =    (FILE *)((void *)0);
#line 47 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static FILE *rfp  =    (FILE *)((void *)0);
#line 48 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static FILE *pfp  =    (FILE *)((void *)0);
#line 66 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static bool script_valid  =    0;
#line 64 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_open(void) 
{ 
  char new_name[81] ;
  int tmp ;

  {
#line 70
  h_flags = (zword )((int )h_flags & -2);
#line 72
  if ((int )h_version >= 5) {
#line 72
    goto _L;
  } else
#line 72
  if (! script_valid) {
    _L: /* CIL Label */ 
    {
#line 74
    tmp = os_read_file_name(new_name, (char const   *)(script_name), 2);
    }
#line 74
    if (! tmp) {
#line 75
      goto done;
    }
    {
#line 77
    strcpy((char */* __restrict  */)(script_name), (char const   */* __restrict  */)(new_name));
    }
  }
  {
#line 83
  sfp = fopen((char const   */* __restrict  */)(script_name), (char const   */* __restrict  */)"r+t");
  }
#line 83
  if ((unsigned long )sfp != (unsigned long )((void *)0)) {
    {
#line 85
    fseek(sfp, 0L, 2);
#line 87
    h_flags = (zword )((int )h_flags | 1);
#line 89
    script_valid = 1;
#line 90
    ostream_script = 1;
#line 92
    script_width = 0;
    }
  } else {
    {
#line 83
    sfp = fopen((char const   */* __restrict  */)(script_name), (char const   */* __restrict  */)"w+t");
    }
#line 83
    if ((unsigned long )sfp != (unsigned long )((void *)0)) {
      {
#line 85
      fseek(sfp, 0L, 2);
#line 87
      h_flags = (zword )((int )h_flags | 1);
#line 89
      script_valid = 1;
#line 90
      ostream_script = 1;
#line 92
      script_width = 0;
      }
    } else {
      {
#line 94
      print_string("Cannot open file\n");
      }
    }
  }
  done: 
#line 98
  *(zmp + 16) = (zbyte )((int )h_flags >> 8);
#line 98
  *(zmp + 17) = (zbyte )((int )h_flags & 255);
#line 100
  return;
}
}
#line 109 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_close(void) 
{ 


  {
  {
#line 112
  h_flags = (zword )((int )h_flags & -2);
#line 113
  *(zmp + 16) = (zbyte )((int )h_flags >> 8);
#line 113
  *(zmp + 17) = (zbyte )((int )h_flags & 255);
#line 115
  fclose(sfp);
#line 115
  ostream_script = 0;
  }
#line 117
  return;
}
}
#line 126 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_new_line(void) 
{ 
  int tmp ;

  {
  {
#line 129
  tmp = fputc('\n', sfp);
  }
#line 129
  if (tmp == -1) {
    {
#line 130
    script_close();
    }
  }
#line 132
  script_width = 0;
#line 134
  return;
}
}
#line 143 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_char(zchar c ) 
{ 


  {
#line 146
  if ((int )c == 9) {
#line 146
    if (script_width != 0) {
#line 147
      c = (zchar )' ';
    }
  }
#line 149
  if ((int )c == 9) {
    {
#line 150
    script_char((zchar )' ');
#line 150
    script_char((zchar )' ');
#line 150
    script_char((zchar )' ');
    }
#line 150
    return;
  }
#line 151
  if ((int )c == 11) {
    {
#line 152
    script_char((zchar )' ');
#line 152
    script_char((zchar )' ');
    }
#line 152
    return;
  }
  {
#line 159
  fputc((int )c, sfp);
#line 159
  script_width ++;
  }
#line 161
  return;
}
}
#line 170 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_word(zchar const   *s ) 
{ 
  int width ;
  int i ;
  zchar const   *tmp ;

  {
#line 175
  if ((int const   )*s == 9) {
#line 175
    if (script_width != 0) {
      {
#line 176
      tmp = s;
#line 176
      s ++;
#line 176
      script_char((zchar )*tmp);
      }
    }
  }
#line 178
  i = 0;
#line 178
  width = 0;
  {
#line 178
  while (1) {
    while_continue: /* CIL Label */ ;
#line 178
    if (! ((int const   )*(s + i) != 0)) {
#line 178
      goto while_break;
    }
#line 180
    if ((int const   )*(s + i) == 1) {
#line 181
      i ++;
    } else
#line 180
    if ((int const   )*(s + i) == 2) {
#line 181
      i ++;
    } else
#line 182
    if ((int const   )*(s + i) == 11) {
#line 183
      width += 3;
    } else
#line 184
    if ((int const   )*(s + i) == 9) {
#line 185
      width += 2;
    } else {
#line 187
      width ++;
    }
#line 178
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 189
  if (f_setup.script_cols != 0) {
#line 189
    if (script_width + width > f_setup.script_cols) {
#line 191
      if ((int const   )*s == 32) {
#line 192
        s ++;
      } else
#line 191
      if ((int const   )*s == 9) {
#line 192
        s ++;
      } else
#line 191
      if ((int const   )*s == 11) {
#line 192
        s ++;
      }
      {
#line 194
      script_new_line();
      }
    }
  }
#line 198
  i = 0;
  {
#line 198
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 198
    if (! ((int const   )*(s + i) != 0)) {
#line 198
      goto while_break___0;
    }
#line 200
    if ((int const   )*(s + i) == 2) {
#line 201
      i ++;
    } else
#line 200
    if ((int const   )*(s + i) == 1) {
#line 201
      i ++;
    } else {
      {
#line 203
      script_char((zchar )*(s + i));
      }
    }
#line 198
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 205
  return;
}
}
#line 214 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_write_input(zchar const   *buf , zchar key ) 
{ 
  int width ;
  int i ;

  {
#line 219
  i = 0;
#line 219
  width = 0;
  {
#line 219
  while (1) {
    while_continue: /* CIL Label */ ;
#line 219
    if (! ((int const   )*(buf + i) != 0)) {
#line 219
      goto while_break;
    }
#line 220
    width ++;
#line 219
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 222
  if (f_setup.script_cols != 0) {
#line 222
    if (script_width + width > f_setup.script_cols) {
      {
#line 223
      script_new_line();
      }
    }
  }
#line 225
  i = 0;
  {
#line 225
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 225
    if (! ((int const   )*(buf + i) != 0)) {
#line 225
      goto while_break___0;
    }
    {
#line 226
    script_char((zchar )*(buf + i));
#line 225
    i ++;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 228
  if ((int )key == 13) {
    {
#line 229
    script_new_line();
    }
  }
#line 231
  return;
}
}
#line 240 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_erase_input(zchar const   *buf ) 
{ 
  int width ;
  int i ;

  {
#line 245
  i = 0;
#line 245
  width = 0;
  {
#line 245
  while (1) {
    while_continue: /* CIL Label */ ;
#line 245
    if (! ((int const   )*(buf + i) != 0)) {
#line 245
      goto while_break;
    }
#line 246
    width ++;
#line 245
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 248
  fseek(sfp, (long )(- width), 1);
#line 248
  script_width -= width;
  }
#line 250
  return;
}
}
#line 259 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_mssg_on(void) 
{ 


  {
#line 262
  if (script_width != 0) {
    {
#line 263
    script_new_line();
    }
  }
  {
#line 265
  script_char((zchar )9);
  }
#line 267
  return;
}
}
#line 276 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void script_mssg_off(void) 
{ 


  {
  {
#line 279
  script_new_line();
  }
#line 281
  return;
}
}
#line 290 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void record_open(void) 
{ 
  char new_name[81] ;
  int tmp ;

  {
  {
#line 294
  tmp = os_read_file_name(new_name, (char const   *)(command_name), 4);
  }
#line 294
  if (tmp) {
    {
#line 296
    strcpy((char */* __restrict  */)(command_name), (char const   */* __restrict  */)(new_name));
#line 298
    rfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"wt");
    }
#line 298
    if ((unsigned long )rfp != (unsigned long )((void *)0)) {
#line 299
      ostream_record = 1;
    } else {
      {
#line 301
      print_string("Cannot open file\n");
      }
    }
  }
#line 305
  return;
}
}
#line 314 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void record_close(void) 
{ 


  {
  {
#line 317
  fclose(rfp);
#line 317
  ostream_record = 0;
  }
#line 319
  return;
}
}
#line 328 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static void record_code(int c , bool force_encoding ) 
{ 
  int i ;

  {
#line 331
  if (force_encoding) {
#line 331
    goto _L;
  } else
#line 331
  if (c == 91) {
#line 331
    goto _L;
  } else
#line 331
  if (c < 32) {
#line 331
    goto _L;
  } else
#line 331
  if (c > 126) {
    _L: /* CIL Label */ 
    {
#line 335
    fputc('[', rfp);
#line 337
    i = 10000;
    }
    {
#line 337
    while (1) {
      while_continue: /* CIL Label */ ;
#line 337
      if (! (i != 0)) {
#line 337
        goto while_break;
      }
#line 338
      if (c >= i) {
        {
#line 339
        fputc(48 + (c / i) % 10, rfp);
        }
      } else
#line 338
      if (i == 1) {
        {
#line 339
        fputc(48 + (c / i) % 10, rfp);
        }
      }
#line 337
      i /= 10;
    }
    while_break: /* CIL Label */ ;
    }
    {
#line 341
    fputc(']', rfp);
    }
  } else {
    {
#line 343
    fputc(c, rfp);
    }
  }
#line 345
  return;
}
}
#line 354 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static void record_char(zchar c ) 
{ 
  zbyte tmp ;

  {
#line 357
  if ((int )c != 13) {
#line 358
    if ((int )c < 14) {
#line 358
      goto _L;
    } else
#line 358
    if ((int )c > 21) {
      _L: /* CIL Label */ 
      {
#line 359
      tmp = translate_to_zscii(c);
#line 359
      record_code((int )tmp, 0);
      }
#line 360
      if ((int )c == 155) {
        {
#line 361
        record_code(mouse_x, 1);
#line 362
        record_code(mouse_y, 1);
        }
      } else
#line 360
      if ((int )c == 156) {
        {
#line 361
        record_code(mouse_x, 1);
#line 362
        record_code(mouse_y, 1);
        }
      }
    } else {
      {
#line 364
      record_code((1000 + (int )c) - 14, 1);
      }
    }
  }
#line 367
  return;
}
}
#line 376 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void record_write_key(zchar key ) 
{ 
  int tmp ;

  {
  {
#line 379
  record_char(key);
#line 381
  tmp = fputc('\n', rfp);
  }
#line 381
  if (tmp == -1) {
    {
#line 382
    record_close();
    }
  }
#line 384
  return;
}
}
#line 393 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void record_write_input(zchar const   *buf , zchar key ) 
{ 
  zchar c ;
  zchar const   *tmp ;
  int tmp___0 ;

  {
  {
#line 397
  while (1) {
    while_continue: /* CIL Label */ ;
#line 397
    tmp = buf;
#line 397
    buf ++;
#line 397
    c = (zchar )*tmp;
#line 397
    if (! ((int )c != 0)) {
#line 397
      goto while_break;
    }
    {
#line 398
    record_char(c);
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 400
  record_char(key);
#line 402
  tmp___0 = fputc('\n', rfp);
  }
#line 402
  if (tmp___0 == -1) {
    {
#line 403
    record_close();
    }
  }
#line 405
  return;
}
}
#line 414 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void replay_open(void) 
{ 
  char new_name[81] ;
  bool tmp ;
  int tmp___0 ;

  {
  {
#line 418
  tmp___0 = os_read_file_name(new_name, (char const   *)(command_name), 3);
  }
#line 418
  if (tmp___0) {
    {
#line 420
    strcpy((char */* __restrict  */)(command_name), (char const   */* __restrict  */)(new_name));
#line 422
    pfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"rt");
    }
#line 422
    if ((unsigned long )pfp != (unsigned long )((void *)0)) {
      {
#line 424
      tmp = read_yes_or_no("Do you want MORE prompts");
#line 424
      set_more_prompts(tmp);
#line 426
      istream_replay = 1;
      }
    } else {
      {
#line 428
      print_string("Cannot open file\n");
      }
    }
  }
#line 432
  return;
}
}
#line 441 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
void replay_close(void) 
{ 


  {
  {
#line 444
  set_more_prompts(1);
#line 446
  fclose(pfp);
#line 446
  istream_replay = 0;
  }
#line 448
  return;
}
}
#line 457 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static int replay_code(void) 
{ 
  int c ;
  int c2 ;
  int tmp ;

  {
  {
#line 461
  c = fgetc(pfp);
  }
#line 461
  if (c == 91) {
#line 465
    c = 0;
    {
#line 467
    while (1) {
      while_continue: /* CIL Label */ ;
      {
#line 467
      c2 = fgetc(pfp);
      }
#line 467
      if (c2 != -1) {
#line 467
        if (c2 >= 48) {
#line 467
          if (! (c2 <= 57)) {
#line 467
            goto while_break;
          }
        } else {
#line 467
          goto while_break;
        }
      } else {
#line 467
        goto while_break;
      }
#line 468
      c = (10 * c + c2) - 48;
    }
    while_break: /* CIL Label */ ;
    }
#line 470
    if (c2 == 93) {
#line 470
      tmp = c;
    } else {
#line 470
      tmp = -1;
    }
#line 470
    return (tmp);
  } else {
#line 472
    return (c);
  }
}
}
#line 483 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
static zchar replay_char(void) 
{ 
  int c ;
  zchar tmp ;

  {
  {
#line 487
  c = replay_code();
  }
#line 487
  if (c != -1) {
#line 489
    if (c != 10) {
#line 491
      if (c < 1000) {
        {
#line 493
        tmp = translate_from_zscii((zbyte )c);
#line 493
        c = (int )tmp;
        }
#line 495
        if (c == 155) {
          {
#line 496
          mouse_x = replay_code();
#line 497
          mouse_y = replay_code();
          }
        } else
#line 495
        if (c == 156) {
          {
#line 496
          mouse_x = replay_code();
#line 497
          mouse_y = replay_code();
          }
        }
#line 500
        return ((zchar )c);
      } else {
#line 502
        return ((zchar )((14 + c) - 1000));
      }
    }
    {
#line 505
    ungetc('\n', pfp);
    }
#line 507
    return ((zchar )13);
  } else {
#line 509
    return ((zchar )127);
  }
}
}
#line 520 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
zchar replay_read_key(void) 
{ 
  zchar key ;
  int tmp ;

  {
  {
#line 524
  key = replay_char();
#line 526
  tmp = fgetc(pfp);
  }
#line 526
  if (tmp != 10) {
    {
#line 528
    replay_close();
    }
#line 529
    return ((zchar )127);
  } else {
#line 531
    return (key);
  }
}
}
#line 542 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/files.c"
zchar replay_read_input(zchar *buf ) 
{ 
  zchar c ;
  bool tmp ;
  zchar *tmp___0 ;
  int tmp___1 ;

  {
  {
#line 546
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 548
    c = replay_char();
    }
#line 550
    if ((int )c == 127) {
#line 551
      goto while_break;
    } else {
      {
#line 550
      tmp = is_terminator(c);
      }
#line 550
      if (tmp) {
#line 551
        goto while_break;
      }
    }
#line 553
    tmp___0 = buf;
#line 553
    buf ++;
#line 553
    *tmp___0 = c;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 557
  *buf = (zchar )0;
#line 559
  tmp___1 = fgetc(pfp);
  }
#line 559
  if (tmp___1 != 10) {
    {
#line 561
    replay_close();
    }
#line 562
    return ((zchar )127);
  } else {
#line 564
    return (c);
  }
}
}
#line 283 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zbyte *pcp ;
#line 308
zword h_globals ;
#line 323
zword h_functions_offset ;
#line 345
long story_size ;
#line 347
zword stack[1024] ;
#line 348
zword *sp ;
#line 349
zword *fp ;
#line 350
zword frame_count ;
#line 352 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zword zargs[8]  ;
#line 353 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
int zargc  ;
#line 387
void z_add(void) ;
#line 388
void z_and(void) ;
#line 389
void z_art_shift(void) ;
#line 390
void z_buffer_mode(void) ;
#line 391
void z_call_n(void) ;
#line 392
void z_call_s(void) ;
#line 393
void z_catch(void) ;
#line 394
void z_check_arg_count(void) ;
#line 395
extern void z_check_unicode(void) ;
#line 396
void z_clear_attr(void) ;
#line 397
void z_copy_table(void) ;
#line 398
extern void z_dec(void) ;
#line 399
extern void z_dec_chk(void) ;
#line 400
void z_div(void) ;
#line 401
void z_draw_picture(void) ;
#line 402
extern void z_encode_text(void) ;
#line 403
void z_erase_line(void) ;
#line 404
void z_erase_picture(void) ;
#line 405
void z_erase_window(void) ;
#line 406
void z_get_child(void) ;
#line 407
void z_get_cursor(void) ;
#line 408
void z_get_next_prop(void) ;
#line 409
void z_get_parent(void) ;
#line 410
void z_get_prop(void) ;
#line 411
void z_get_prop_addr(void) ;
#line 412
void z_get_prop_len(void) ;
#line 413
void z_get_sibling(void) ;
#line 414
void z_get_wind_prop(void) ;
#line 415
extern void z_inc(void) ;
#line 416
extern void z_inc_chk(void) ;
#line 418
void z_insert_obj(void) ;
#line 419
void z_je(void) ;
#line 420
void z_jg(void) ;
#line 421
void z_jin(void) ;
#line 422
void z_jl(void) ;
#line 423
void z_jump(void) ;
#line 424
void z_jz(void) ;
#line 425
extern void z_load(void) ;
#line 426
void z_loadb(void) ;
#line 427
void z_loadw(void) ;
#line 428
void z_log_shift(void) ;
#line 429
void z_make_menu(void) ;
#line 430
void z_mod(void) ;
#line 431
void z_mouse_window(void) ;
#line 432
void z_move_window(void) ;
#line 433
void z_mul(void) ;
#line 434
extern void z_new_line(void) ;
#line 435
void z_nop(void) ;
#line 436
void z_not(void) ;
#line 437
void z_or(void) ;
#line 439
void z_picture_data(void) ;
#line 440
void z_picture_table(void) ;
#line 441
void z_piracy(void) ;
#line 443
extern void z_pop_stack(void) ;
#line 444
extern void z_print(void) ;
#line 445
extern void z_print_addr(void) ;
#line 446
extern void z_print_char(void) ;
#line 447
extern void z_print_form(void) ;
#line 448
extern void z_print_num(void) ;
#line 449
extern void z_print_obj(void) ;
#line 450
extern void z_print_paddr(void) ;
#line 451
extern void z_print_ret(void) ;
#line 452
void z_print_table(void) ;
#line 453
extern void z_print_unicode(void) ;
#line 454
extern void z_pull(void) ;
#line 455
extern void z_push(void) ;
#line 456
extern void z_push_stack(void) ;
#line 457
void z_put_prop(void) ;
#line 458
void z_put_wind_prop(void) ;
#line 459
void z_quit(void) ;
#line 460
void z_random(void) ;
#line 461
void z_read(void) ;
#line 462
void z_read_char(void) ;
#line 463
void z_read_mouse(void) ;
#line 464
void z_remove_obj(void) ;
#line 465
void z_restart(void) ;
#line 466
void z_restore(void) ;
#line 467
void z_restore_undo(void) ;
#line 468
void z_ret(void) ;
#line 469
void z_ret_popped(void) ;
#line 470
void z_rfalse(void) ;
#line 471
void z_rtrue(void) ;
#line 472
void z_save(void) ;
#line 473
void z_save_undo(void) ;
#line 474
void z_scan_table(void) ;
#line 475
void z_scroll_window(void) ;
#line 476
void z_set_attr(void) ;
#line 477
void z_set_font(void) ;
#line 478
void z_set_colour(void) ;
#line 479
void z_set_cursor(void) ;
#line 480
void z_set_margins(void) ;
#line 481
void z_set_window(void) ;
#line 482
void z_set_text_style(void) ;
#line 483
void z_show_status(void) ;
#line 485
void z_split_window(void) ;
#line 486
extern void z_store(void) ;
#line 487
void z_storeb(void) ;
#line 488
void z_storew(void) ;
#line 489
void z_sub(void) ;
#line 490
void z_test(void) ;
#line 491
void z_test_attr(void) ;
#line 492
void z_throw(void) ;
#line 493
extern void z_tokenise(void) ;
#line 494
void z_verify(void) ;
#line 495
void z_window_size(void) ;
#line 496
void z_window_style(void) ;
#line 503
void runtime_error(int errnum ) ;
#line 576
void ret(zword value ) ;
#line 577
void store(zword value ) ;
#line 578
void branch(bool flag___0 ) ;
#line 31 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
static int finished  =    0;
#line 33
static void __extended__(void) ;
#line 34
static void __illegal__(void) ;
#line 36 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void (*op0_opcodes[16])(void)  = 
#line 36
  {      & z_rtrue,      & z_rfalse,      & z_print,      & z_print_ret, 
        & z_nop,      & z_save,      & z_restore,      & z_restart, 
        & z_ret_popped,      & z_catch,      & z_quit,      & z_new_line, 
        & z_show_status,      & z_verify,      & __extended__,      & z_piracy};
#line 55 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void (*op1_opcodes[16])(void)  = 
#line 55
  {      & z_jz,      & z_get_sibling,      & z_get_child,      & z_get_parent, 
        & z_get_prop_len,      & z_inc,      & z_dec,      & z_print_addr, 
        & z_call_s,      & z_remove_obj,      & z_print_obj,      & z_ret, 
        & z_jump,      & z_print_paddr,      & z_load,      & z_call_n};
#line 74 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void (*var_opcodes[64])(void)  = 
#line 74
  {      & __illegal__,      & z_je,      & z_jl,      & z_jg, 
        & z_dec_chk,      & z_inc_chk,      & z_jin,      & z_test, 
        & z_or,      & z_and,      & z_test_attr,      & z_set_attr, 
        & z_clear_attr,      & z_store,      & z_insert_obj,      & z_loadw, 
        & z_loadb,      & z_get_prop,      & z_get_prop_addr,      & z_get_next_prop, 
        & z_add,      & z_sub,      & z_mul,      & z_div, 
        & z_mod,      & z_call_s,      & z_call_n,      & z_set_colour, 
        & z_throw,      & __illegal__,      & __illegal__,      & __illegal__, 
        & z_call_s,      & z_storew,      & z_storeb,      & z_put_prop, 
        & z_read,      & z_print_char,      & z_print_num,      & z_random, 
        & z_push,      & z_pull,      & z_split_window,      & z_set_window, 
        & z_call_s,      & z_erase_window,      & z_erase_line,      & z_set_cursor, 
        & z_get_cursor,      & z_set_text_style,      & z_buffer_mode,      & z_output_stream, 
        & z_input_stream,      & z_sound_effect,      & z_read_char,      & z_scan_table, 
        & z_not,      & z_call_n,      & z_call_n,      & z_tokenise, 
        & z_encode_text,      & z_copy_table,      & z_print_table,      & z_check_arg_count};
#line 141 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void (*ext_opcodes[29])(void)  = 
#line 141
  {      & z_save,      & z_restore,      & z_log_shift,      & z_art_shift, 
        & z_set_font,      & z_draw_picture,      & z_picture_data,      & z_erase_picture, 
        & z_set_margins,      & z_save_undo,      & z_restore_undo,      & z_print_unicode, 
        & z_check_unicode,      & __illegal__,      & __illegal__,      & __illegal__, 
        & z_move_window,      & z_window_size,      & z_window_style,      & z_get_wind_prop, 
        & z_scroll_window,      & z_pop_stack,      & z_read_mouse,      & z_mouse_window, 
        & z_push_stack,      & z_put_wind_prop,      & z_print_form,      & z_make_menu, 
        & z_picture_table};
#line 181 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void init_process(void) 
{ 


  {
#line 183
  finished = 0;
#line 184
  return;
}
}
#line 194 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
static void load_operand(zbyte type ) 
{ 
  zword value ;
  zbyte variable ;
  zbyte *tmp ;
  zword *tmp___0 ;
  zword addr ;
  zbyte bvalue ;
  zbyte *tmp___1 ;
  int tmp___2 ;

  {
#line 198
  if ((int )type & 2) {
#line 202
    tmp = pcp;
#line 202
    pcp ++;
#line 202
    variable = *tmp;
#line 204
    if ((int )variable == 0) {
#line 205
      tmp___0 = sp;
#line 205
      sp ++;
#line 205
      value = *tmp___0;
    } else
#line 206
    if ((int )variable < 16) {
#line 207
      value = *(fp - (int )variable);
    } else {
#line 209
      addr = (zword )((int )h_globals + 2 * ((int )variable - 16));
#line 210
      value = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
    }
  } else
#line 213
  if ((int )type & 1) {
#line 217
    tmp___1 = pcp;
#line 217
    pcp ++;
#line 217
    bvalue = *tmp___1;
#line 218
    value = (zword )bvalue;
  } else {
#line 220
    value = (zword )(((int )((zword )*(pcp + 0)) << 8) | (int )*(pcp + 1));
#line 220
    pcp += 2;
  }
#line 222
  tmp___2 = zargc;
#line 222
  zargc ++;
#line 222
  zargs[tmp___2] = value;
#line 224
  return;
}
}
#line 234 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
static void load_all_operands(zbyte specifier ) 
{ 
  int i ;
  zbyte type ;

  {
#line 238
  i = 6;
  {
#line 238
  while (1) {
    while_continue: /* CIL Label */ ;
#line 238
    if (! (i >= 0)) {
#line 238
      goto while_break;
    }
#line 240
    type = (zbyte )(((int )specifier >> i) & 3);
#line 242
    if ((int )type == 3) {
#line 243
      goto while_break;
    }
    {
#line 245
    load_operand(type);
#line 238
    i -= 2;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 249
  return;
}
}
#line 258 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void interpret(void) 
{ 
  zbyte opcode ;
  zbyte *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  zbyte specifier1 ;
  zbyte specifier2 ;
  zbyte *tmp___2 ;
  zbyte *tmp___3 ;
  zbyte *tmp___4 ;

  {
  {
#line 261
  while (1) {
    while_continue: /* CIL Label */ ;
#line 265
    tmp = pcp;
#line 265
    pcp ++;
#line 265
    opcode = *tmp;
#line 267
    zargc = 0;
#line 269
    if ((int )opcode < 128) {
#line 271
      if ((zbyte )((int )opcode & 64)) {
#line 271
        tmp___0 = 2;
      } else {
#line 271
        tmp___0 = 1;
      }
      {
#line 271
      load_operand((zbyte )tmp___0);
      }
#line 272
      if ((zbyte )((int )opcode & 32)) {
#line 272
        tmp___1 = 2;
      } else {
#line 272
        tmp___1 = 1;
      }
      {
#line 272
      load_operand((zbyte )tmp___1);
#line 274
      (*(var_opcodes[(int )opcode & 31]))();
      }
    } else
#line 276
    if ((int )opcode < 176) {
      {
#line 278
      load_operand((zbyte )((int )opcode >> 4));
#line 280
      (*(op1_opcodes[(int )opcode & 15]))();
      }
    } else
#line 282
    if ((int )opcode < 192) {
      {
#line 284
      (*(op0_opcodes[(int )opcode - 176]))();
      }
    } else {
#line 291
      if ((int )opcode == 236) {
#line 291
        goto _L;
      } else
#line 291
      if ((int )opcode == 250) {
        _L: /* CIL Label */ 
        {
#line 292
        tmp___2 = pcp;
#line 292
        pcp ++;
#line 292
        specifier1 = *tmp___2;
#line 293
        tmp___3 = pcp;
#line 293
        pcp ++;
#line 293
        specifier2 = *tmp___3;
#line 294
        load_all_operands(specifier1);
#line 295
        load_all_operands(specifier2);
        }
      } else {
        {
#line 297
        tmp___4 = pcp;
#line 297
        pcp ++;
#line 297
        specifier1 = *tmp___4;
#line 298
        load_all_operands(specifier1);
        }
      }
      {
#line 301
      (*(var_opcodes[(int )opcode - 192]))();
      }
    }
#line 261
    if (! (finished == 0)) {
#line 261
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 312
  finished --;
#line 314
  return;
}
}
#line 326 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void call(zword routine___0 , int argc , zword *args , int ct ) 
{ 
  long pc ;
  zword value ;
  zbyte count ;
  int i ;
  int tmp ;
  zbyte *tmp___0 ;
  int tmp___2 ;
  int tmp___3 ;

  {
#line 333
  if (sp - stack < 4L) {
    {
#line 334
    runtime_error(7);
    }
  }
#line 336
  pc = pcp - zmp;
#line 338
  sp --;
#line 338
  *sp = (zword )(pc >> 9);
#line 339
  sp --;
#line 339
  *sp = (zword )(pc & 511L);
#line 340
  sp --;
#line 340
  *sp = (zword )((fp - stack) - 1L);
#line 341
  sp --;
#line 341
  if (f_setup.save_quetzal) {
#line 341
    tmp = 12;
  } else {
#line 341
    tmp = 8;
  }
#line 341
  *sp = (zword )(argc | (ct << tmp));
#line 343
  fp = sp;
#line 344
  frame_count = (zword )((int )frame_count + 1);
#line 348
  if ((int )h_version <= 3) {
#line 349
    pc = (long )routine___0 << 1;
  } else
#line 350
  if ((int )h_version <= 5) {
#line 351
    pc = (long )routine___0 << 2;
  } else
#line 352
  if ((int )h_version <= 7) {
#line 353
    pc = ((long )routine___0 << 2) + ((long )h_functions_offset << 3);
  } else {
#line 355
    pc = (long )routine___0 << 3;
  }
#line 357
  if (pc >= story_size) {
    {
#line 358
    runtime_error(8);
    }
  }
#line 360
  pcp = zmp + pc;
#line 364
  tmp___0 = pcp;
#line 364
  pcp ++;
#line 364
  count = *tmp___0;
#line 366
  if ((int )count > 15) {
    {
#line 367
    runtime_error(9);
    }
  }
#line 368
  if (sp - stack < (long )count) {
    {
#line 369
    runtime_error(7);
    }
  }
#line 371
  if (f_setup.save_quetzal) {
#line 372
    *(fp + 0) = (zword )((int )*(fp + 0) | ((int )((zword )count) << 8));
  }
#line 374
  value = (zword )0;
#line 376
  i = 0;
  {
#line 376
  while (1) {
    while_continue: /* CIL Label */ ;
#line 376
    if (! (i < (int )count)) {
#line 376
      goto while_break;
    }
#line 378
    if ((int )h_version <= 4) {
#line 379
      value = (zword )(((int )((zword )*(pcp + 0)) << 8) | (int )*(pcp + 1));
#line 379
      pcp += 2;
    }
#line 381
    sp --;
#line 381
    tmp___3 = argc;
#line 381
    argc --;
#line 381
    if (tmp___3 > 0) {
#line 381
      tmp___2 = (int )*(args + i);
    } else {
#line 381
      tmp___2 = (int )value;
    }
#line 381
    *sp = (zword )tmp___2;
#line 376
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 387
  if (ct == 2) {
    {
#line 388
    interpret();
    }
  }
#line 390
  return;
}
}
#line 402 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void ret(zword value ) 
{ 
  long pc ;
  int ct ;
  zword *tmp ;
  int tmp___0 ;
  zword *tmp___1 ;
  zword *tmp___2 ;
  zword *tmp___3 ;

  {
#line 407
  if ((unsigned long )sp > (unsigned long )fp) {
    {
#line 408
    runtime_error(10);
    }
  }
#line 410
  sp = fp;
#line 412
  tmp = sp;
#line 412
  sp ++;
#line 412
  if (f_setup.save_quetzal) {
#line 412
    tmp___0 = 12;
  } else {
#line 412
    tmp___0 = 8;
  }
#line 412
  ct = (int )*tmp >> tmp___0;
#line 413
  frame_count = (zword )((int )frame_count - 1);
#line 414
  tmp___1 = sp;
#line 414
  sp ++;
#line 414
  fp = (stack + 1) + (int )*tmp___1;
#line 415
  tmp___2 = sp;
#line 415
  sp ++;
#line 415
  pc = (long )*tmp___2;
#line 416
  tmp___3 = sp;
#line 416
  sp ++;
#line 416
  pc = ((long )*tmp___3 << 9) | pc;
#line 418
  pcp = zmp + pc;
#line 422
  if (ct == 0) {
    {
#line 423
    store(value);
    }
  }
#line 424
  if (ct == 2) {
#line 425
    sp --;
#line 425
    *sp = value;
  }
#line 429
  if (ct == 2) {
#line 430
    finished ++;
  }
#line 432
  return;
}
}
#line 449 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void branch(bool flag___0 ) 
{ 
  long pc ;
  zword offset ;
  zbyte specifier ;
  zbyte off1 ;
  zbyte off2 ;
  zbyte *tmp ;
  zbyte *tmp___0 ;

  {
#line 457
  tmp = pcp;
#line 457
  pcp ++;
#line 457
  specifier = *tmp;
#line 459
  off1 = (zbyte )((int )specifier & 63);
#line 461
  if (! flag___0) {
#line 462
    specifier = (zbyte )((int )specifier ^ 128);
  }
#line 464
  if (! ((int )specifier & 64)) {
#line 466
    if ((int )off1 & 32) {
#line 467
      off1 = (zbyte )((int )off1 | 192);
    }
#line 469
    tmp___0 = pcp;
#line 469
    pcp ++;
#line 469
    off2 = *tmp___0;
#line 471
    offset = (zword )(((int )off1 << 8) | (int )off2);
  } else {
#line 473
    offset = (zword )off1;
  }
#line 475
  if ((int )specifier & 128) {
#line 477
    if ((int )offset > 1) {
#line 479
      pc = pcp - zmp;
#line 480
      pc += (long )((int )((short )offset) - 2);
#line 481
      pcp = zmp + pc;
    } else {
      {
#line 483
      ret(offset);
      }
    }
  }
#line 486
  return;
}
}
#line 495 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void store(zword value ) 
{ 
  zbyte variable ;
  zbyte *tmp ;
  zword addr ;

  {
#line 499
  tmp = pcp;
#line 499
  pcp ++;
#line 499
  variable = *tmp;
#line 501
  if ((int )variable == 0) {
#line 502
    sp --;
#line 502
    *sp = value;
  } else
#line 503
  if ((int )variable < 16) {
#line 504
    *(fp - (int )variable) = value;
  } else {
#line 506
    addr = (zword )((int )h_globals + 2 * ((int )variable - 16));
#line 507
    *(zmp + addr) = (zbyte )((int )value >> 8);
#line 507
    *(zmp + ((int )addr + 1)) = (zbyte )((int )value & 255);
  }
#line 510
  return;
}
}
#line 525 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
int direct_call(zword addr ) 
{ 
  zword saved_zargs[8] ;
  int saved_zargc ;
  int i ;
  zword *tmp ;

  {
#line 533
  if ((int )addr == 0) {
#line 534
    return (0);
  }
#line 538
  i = 0;
  {
#line 538
  while (1) {
    while_continue: /* CIL Label */ ;
#line 538
    if (! (i < 8)) {
#line 538
      goto while_break;
    }
#line 539
    saved_zargs[i] = zargs[i];
#line 538
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 541
  saved_zargc = zargc;
#line 545
  call(addr, 0, (zword *)0, 2);
#line 549
  i = 0;
  }
  {
#line 549
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 549
    if (! (i < 8)) {
#line 549
      goto while_break___0;
    }
#line 550
    zargs[i] = saved_zargs[i];
#line 549
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 552
  zargc = saved_zargc;
#line 556
  tmp = sp;
#line 556
  sp ++;
#line 556
  return ((int )((short )*tmp));
}
}
#line 567 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
static void __extended__(void) 
{ 
  zbyte opcode ;
  zbyte specifier ;
  zbyte *tmp ;
  zbyte *tmp___0 ;

  {
  {
#line 572
  tmp = pcp;
#line 572
  pcp ++;
#line 572
  opcode = *tmp;
#line 573
  tmp___0 = pcp;
#line 573
  pcp ++;
#line 573
  specifier = *tmp___0;
#line 575
  load_all_operands(specifier);
  }
#line 577
  if ((int )opcode < 29) {
    {
#line 578
    (*(ext_opcodes[opcode]))();
    }
  }
#line 580
  return;
}
}
#line 589 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
static void __illegal__(void) 
{ 


  {
  {
#line 592
  runtime_error(11);
  }
#line 594
  return;
}
}
#line 603 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_catch(void) 
{ 
  int tmp ;

  {
#line 606
  if (f_setup.save_quetzal) {
#line 606
    tmp = (int )frame_count;
  } else {
#line 606
    tmp = (int )((zword )(fp - stack));
  }
  {
#line 606
  store((zword )tmp);
  }
#line 608
  return;
}
}
#line 618 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_throw(void) 
{ 


  {
#line 621
  if (f_setup.save_quetzal) {
#line 622
    if ((int )zargs[1] > (int )frame_count) {
      {
#line 623
      runtime_error(12);
      }
    }
    {
#line 626
    while (1) {
      while_continue: /* CIL Label */ ;
#line 626
      if (! ((int )frame_count > (int )zargs[1])) {
#line 626
        goto while_break;
      }
#line 627
      fp = (stack + 1) + (int )*(fp + 1);
#line 626
      frame_count = (zword )((int )frame_count - 1);
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 629
    if ((int )zargs[1] > 1024) {
      {
#line 630
      runtime_error(12);
      }
    }
#line 632
    fp = stack + (int )zargs[1];
  }
  {
#line 635
  ret(zargs[0]);
  }
#line 637
  return;
}
}
#line 649 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_call_n(void) 
{ 


  {
#line 652
  if ((int )zargs[0] != 0) {
    {
#line 653
    call(zargs[0], zargc - 1, zargs + 1, 1);
    }
  }
#line 655
  return;
}
}
#line 667 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_call_s(void) 
{ 


  {
#line 670
  if ((int )zargs[0] != 0) {
    {
#line 671
    call(zargs[0], zargc - 1, zargs + 1, 0);
    }
  } else {
    {
#line 673
    store((zword )0);
    }
  }
#line 675
  return;
}
}
#line 684 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_check_arg_count(void) 
{ 


  {
#line 687
  if ((unsigned long )fp == (unsigned long )(stack + 1024)) {
    {
#line 688
    branch((int )zargs[0] == 0);
    }
  } else {
    {
#line 690
    branch((int )zargs[0] <= ((int )*fp & 255));
    }
  }
#line 692
  return;
}
}
#line 701 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_jump(void) 
{ 
  long pc ;

  {
#line 705
  pc = pcp - zmp;
#line 707
  pc += (long )((int )((short )zargs[0]) - 2);
#line 709
  if (pc >= story_size) {
    {
#line 710
    runtime_error(13);
    }
  }
#line 712
  pcp = zmp + pc;
#line 714
  return;
}
}
#line 723 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_nop(void) 
{ 


  {
#line 728
  return;
}
}
#line 737 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_quit(void) 
{ 


  {
#line 740
  finished = 9999;
#line 742
  return;
}
}
#line 751 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_ret(void) 
{ 


  {
  {
#line 754
  ret(zargs[0]);
  }
#line 756
  return;
}
}
#line 765 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_ret_popped(void) 
{ 
  zword *tmp ;

  {
  {
#line 768
  tmp = sp;
#line 768
  sp ++;
#line 768
  ret(*tmp);
  }
#line 770
  return;
}
}
#line 779 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_rfalse(void) 
{ 


  {
  {
#line 782
  ret((zword )0);
  }
#line 784
  return;
}
}
#line 793 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/process.c"
void z_rtrue(void) 
{ 


  {
  {
#line 796
  ret((zword )1);
  }
#line 798
  return;
}
}
#line 600 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
extern int os_random_seed(void) ;
#line 23 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/random.c"
static long A  =    1L;
#line 25 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/random.c"
static int interval  =    0;
#line 26 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/random.c"
static int counter  =    0;
#line 35 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/random.c"
void seed_random(int value ) 
{ 
  int tmp ;

  {
#line 38
  if (value == 0) {
    {
#line 39
    tmp = os_random_seed();
#line 39
    A = (long )tmp;
#line 40
    interval = 0;
    }
  } else
#line 41
  if (value < 1000) {
#line 42
    counter = 0;
#line 43
    interval = value;
  } else {
#line 45
    A = (long )value;
#line 46
    interval = 0;
  }
#line 49
  return;
}
}
#line 58 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/random.c"
void z_random(void) 
{ 
  zword result ;
  int tmp ;

  {
#line 61
  if ((int )((short )zargs[0]) <= 0) {
    {
#line 63
    seed_random(- ((int )((short )zargs[0])));
#line 64
    store((zword )0);
    }
  } else {
#line 70
    if (interval != 0) {
#line 71
      tmp = counter;
#line 71
      counter ++;
#line 71
      result = (zword )tmp;
#line 72
      if (counter == interval) {
#line 72
        counter = 0;
      }
    } else {
#line 74
      A = 22695477L * A + 1L;
#line 75
      result = (zword )((A >> 16) & 32767L);
    }
    {
#line 78
    store((zword )((int )result % (int )zargs[0] + 1));
    }
  }
#line 82
  return;
}
}
#line 580 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
void storeb(zword addr , zbyte value ) ;
#line 581
void storew(zword addr , zword value ) ;
#line 35 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_copy_table(void) 
{ 
  zword addr ;
  zword size ;
  zbyte value ;
  int i ;
  int tmp ;

  {
#line 38
  size = zargs[2];
#line 42
  if ((int )zargs[1] == 0) {
#line 44
    i = 0;
    {
#line 44
    while (1) {
      while_continue: /* CIL Label */ ;
#line 44
      if (! (i < (int )size)) {
#line 44
        goto while_break;
      }
      {
#line 45
      storeb((zword )((int )zargs[0] + i), (zbyte )0);
#line 44
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  } else
#line 47
  if ((int )((short )size) < 0) {
#line 47
    goto _L;
  } else
#line 47
  if ((int )zargs[0] > (int )zargs[1]) {
    _L: /* CIL Label */ 
#line 49
    i = 0;
    {
#line 49
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 49
      if ((int )((short )size) < 0) {
#line 49
        tmp = - ((int )((short )size));
      } else {
#line 49
        tmp = (int )size;
      }
#line 49
      if (! (i < tmp)) {
#line 49
        goto while_break___0;
      }
      {
#line 50
      addr = (zword )((int )zargs[0] + i);
#line 51
      value = *(zmp + addr);
#line 52
      storeb((zword )((int )zargs[1] + i), value);
#line 49
      i ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
  } else {
#line 57
    i = (int )size - 1;
    {
#line 57
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 57
      if (! (i >= 0)) {
#line 57
        goto while_break___1;
      }
      {
#line 58
      addr = (zword )((int )zargs[0] + i);
#line 59
      value = *(zmp + addr);
#line 60
      storeb((zword )((int )zargs[1] + i), value);
#line 57
      i --;
      }
    }
    while_break___1: /* CIL Label */ ;
    }
  }
#line 63
  return;
}
}
#line 73 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_loadb(void) 
{ 
  zword addr ;
  zbyte value ;

  {
  {
#line 75
  addr = (zword )((int )zargs[0] + (int )zargs[1]);
#line 78
  value = *(zmp + addr);
#line 80
  store((zword )value);
  }
#line 82
  return;
}
}
#line 92 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_loadw(void) 
{ 
  zword addr ;
  zword value ;

  {
  {
#line 94
  addr = (zword )((int )zargs[0] + 2 * (int )zargs[1]);
#line 97
  value = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 99
  store(value);
  }
#line 101
  return;
}
}
#line 116 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_scan_table(void) 
{ 
  zword addr ;
  int i ;
  zword wvalue ;
  zbyte bvalue ;

  {
#line 118
  addr = zargs[1];
#line 123
  if (zargc < 4) {
#line 124
    zargs[3] = (zword )130;
  }
#line 128
  i = 0;
  {
#line 128
  while (1) {
    while_continue: /* CIL Label */ ;
#line 128
    if (! (i < (int )zargs[2])) {
#line 128
      goto while_break;
    }
#line 130
    if ((int )zargs[3] & 128) {
#line 134
      wvalue = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 136
      if ((int )wvalue == (int )zargs[0]) {
#line 137
        goto finished;
      }
    } else {
#line 143
      bvalue = *(zmp + addr);
#line 145
      if ((int )bvalue == (int )zargs[0]) {
#line 146
        goto finished;
      }
    }
#line 150
    addr = (zword )((int )addr + ((int )zargs[3] & 127));
#line 128
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 154
  addr = (zword )0;
  finished: 
  {
#line 158
  store(addr);
#line 159
  branch((bool )addr);
  }
#line 161
  return;
}
}
#line 172 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_storeb(void) 
{ 


  {
  {
#line 175
  storeb((zword )((int )zargs[0] + (int )zargs[1]), (zbyte )zargs[2]);
  }
#line 177
  return;
}
}
#line 188 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/table.c"
void z_storew(void) 
{ 


  {
  {
#line 191
  storew((zword )((int )zargs[0] + 2 * (int )zargs[1]), zargs[2]);
  }
#line 193
  return;
}
}
#line 327 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zword h_terminating_keys ;
#line 336
zword hx_mouse_x ;
#line 337
zword hx_mouse_y ;
#line 23 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
int save_undo(void) ;
#line 28
extern void tokenise_line(zword  , zword  , zword  , bool  ) ;
#line 37 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
bool is_terminator(zchar key ) 
{ 
  zword addr ;
  zbyte c ;
  zchar tmp ;

  {
#line 40
  if ((int )key == 0) {
#line 41
    return (1);
  }
#line 42
  if ((int )key == 13) {
#line 43
    return (1);
  }
#line 44
  if ((int )key >= 14) {
#line 44
    if ((int )key <= 21) {
#line 45
      return (1);
    }
  }
#line 47
  if ((int )h_terminating_keys != 0) {
#line 49
    if ((int )key >= 129) {
#line 49
      if ((int )key <= 157) {
#line 51
        addr = h_terminating_keys;
        {
#line 54
        while (1) {
          while_continue: /* CIL Label */ ;
#line 55
          c = *(zmp + addr);
#line 56
          if ((int )c == 255) {
#line 57
            return (1);
          } else {
            {
#line 56
            tmp = translate_from_zscii(c);
            }
#line 56
            if ((int )key == (int )tmp) {
#line 57
              return (1);
            }
          }
#line 58
          addr = (zword )((int )addr + 1);
#line 54
          if (! ((int )c != 0)) {
#line 54
            goto while_break;
          }
        }
        while_break: /* CIL Label */ ;
        }
      }
    }
  }
#line 63
  return (0);
}
}
#line 75 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
void z_make_menu(void) 
{ 


  {
  {
#line 82
  branch(0);
  }
#line 84
  return;
}
}
#line 93 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
bool read_yes_or_no(char const   *s ) 
{ 
  zchar key ;

  {
  {
#line 97
  print_string(s);
#line 98
  print_string("? (y/n) >");
#line 100
  key = stream_read_key((zword )0, (zword )0, 0);
  }
#line 102
  if ((int )key == 121) {
    {
#line 103
    print_string("y\n");
    }
#line 104
    return (1);
  } else
#line 102
  if ((int )key == 89) {
    {
#line 103
    print_string("y\n");
    }
#line 104
    return (1);
  } else {
    {
#line 106
    print_string("n\n");
    }
#line 107
    return (0);
  }
}
}
#line 119 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
void read_string(int max , zchar *buffer___0 ) 
{ 
  zchar key ;

  {
#line 123
  *(buffer___0 + 0) = (zchar )0;
  {
#line 125
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 127
    key = stream_read_input(max, buffer___0, (zword )0, (zword )0, 0, 0);
    }
#line 125
    if (! ((int )key != 13)) {
#line 125
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 131
  return;
}
}
#line 140 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
int read_number(void) 
{ 
  zchar buffer___0[6] ;
  int value ;
  int i ;

  {
  {
#line 143
  value = 0;
#line 146
  read_string(5, buffer___0);
#line 148
  i = 0;
  }
  {
#line 148
  while (1) {
    while_continue: /* CIL Label */ ;
#line 148
    if (! ((int )buffer___0[i] != 0)) {
#line 148
      goto while_break;
    }
#line 149
    if ((int )buffer___0[i] >= 48) {
#line 149
      if ((int )buffer___0[i] <= 57) {
#line 150
        value = (10 * value + (int )buffer___0[i]) - 48;
      }
    }
#line 148
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 152
  return (value);
}
}
#line 166 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
void z_read(void) 
{ 
  zchar buffer___0[200] ;
  zword addr ;
  zchar key ;
  zbyte max ;
  zbyte size ;
  zbyte c ;
  int i ;
  zbyte tmp ;
  int tmp___0 ;
  zbyte tmp___1 ;

  {
#line 177
  if (zargc < 3) {
#line 178
    zargs[2] = (zword )0;
  }
#line 182
  addr = zargs[0];
#line 184
  max = *(zmp + addr);
#line 186
  if ((int )h_version <= 4) {
#line 187
    max = (zbyte )((int )max - 1);
  }
#line 189
  if ((int )max >= 200) {
#line 190
    max = (zbyte )199;
  }
#line 194
  if ((int )h_version >= 5) {
#line 195
    addr = (zword )((int )addr + 1);
#line 196
    size = *(zmp + addr);
  } else {
#line 197
    size = (zbyte )0;
  }
#line 201
  i = 0;
  {
#line 201
  while (1) {
    while_continue: /* CIL Label */ ;
#line 201
    if (! (i < (int )size)) {
#line 201
      goto while_break;
    }
    {
#line 202
    addr = (zword )((int )addr + 1);
#line 203
    c = *(zmp + addr);
#line 204
    buffer___0[i] = translate_from_zscii(c);
#line 201
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 207
  buffer___0[i] = (zchar )0;
#line 211
  if ((int )h_version <= 3) {
    {
#line 212
    z_show_status();
    }
  }
  {
#line 216
  key = stream_read_input((int )max, buffer___0, zargs[2], zargs[3], 1, (int )h_version == 6);
  }
#line 223
  if ((int )key == 127) {
#line 224
    return;
  }
#line 228
  if ((int )h_version <= 4) {
    {
#line 229
    save_undo();
    }
  }
#line 233
  i = 0;
  {
#line 233
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 233
    if (! ((int )buffer___0[i] != 0)) {
#line 233
      goto while_break___0;
    }
#line 235
    if ((int )key == 13) {
#line 237
      if ((int )buffer___0[i] >= 65) {
#line 237
        if ((int )buffer___0[i] <= 90) {
#line 238
          buffer___0[i] = (zchar )((int )buffer___0[i] + 32);
        }
      }
#line 239
      if ((int )buffer___0[i] >= 192) {
#line 239
        if ((int )buffer___0[i] <= 222) {
#line 239
          if ((int )buffer___0[i] != 215) {
#line 240
            buffer___0[i] = (zchar )((int )buffer___0[i] + 32);
          }
        }
      }
    }
    {
#line 244
    tmp = translate_to_zscii(buffer___0[i]);
    }
#line 244
    if ((int )h_version <= 4) {
#line 244
      tmp___0 = 1;
    } else {
#line 244
      tmp___0 = 2;
    }
    {
#line 244
    storeb((zword )(((int )zargs[0] + tmp___0) + i), tmp);
#line 233
    i ++;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 250
  if ((int )h_version <= 4) {
    {
#line 251
    storeb((zword )(((int )zargs[0] + 1) + i), (zbyte )0);
    }
  } else {
    {
#line 253
    storeb((zword )((int )zargs[0] + 1), (zbyte )i);
    }
  }
#line 257
  if ((int )key == 13) {
#line 257
    if ((int )zargs[1] != 0) {
      {
#line 258
      tokenise_line(zargs[0], zargs[1], (zword )0, 0);
      }
    }
  }
#line 262
  if ((int )h_version >= 5) {
    {
#line 263
    tmp___1 = translate_to_zscii(key);
#line 263
    store((zword )tmp___1);
    }
  }
#line 265
  return;
}
}
#line 276 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
void z_read_char(void) 
{ 
  zchar key ;
  zbyte tmp ;

  {
#line 282
  if (zargc < 2) {
#line 283
    zargs[1] = (zword )0;
  }
  {
#line 287
  key = stream_read_key(zargs[1], zargs[2], 1);
  }
#line 292
  if ((int )key == 127) {
#line 293
    return;
  }
  {
#line 297
  tmp = translate_to_zscii(key);
#line 297
  store((zword )tmp);
  }
#line 299
  return;
}
}
#line 314
extern int ( /* missing proto */  os_read_mouse)() ;
#line 308 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/input.c"
void z_read_mouse(void) 
{ 
  zword btn ;
  int tmp ;

  {
  {
#line 314
  tmp = os_read_mouse();
#line 314
  btn = (zword )tmp;
#line 315
  hx_mouse_y = (zword )mouse_y;
#line 316
  hx_mouse_x = (zword )mouse_x;
#line 318
  storew((zword )((int )zargs[0]), hx_mouse_y);
#line 319
  storew((zword )((int )zargs[0] + 2), hx_mouse_x);
#line 320
  storew((zword )((int )zargs[0] + 4), btn);
#line 321
  storew((zword )((int )zargs[0] + 6), (zword )0);
  }
#line 323
  return;
}
}
#line 371 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
bool enable_buffering ;
#line 567
void new_line(void) ;
#line 568
void print_char(zchar c ) ;
#line 27 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
static zchar buffer[200]  ;
#line 28 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
static int bufpos  =    0;
#line 30 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
static zchar prev_c  =    (zchar )0;
#line 41 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
static bool locked___0  =    0;
#line 39 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
void flush_buffer(void) 
{ 


  {
#line 48
  if (locked___0) {
#line 49
    return;
  } else
#line 48
  if (bufpos == 0) {
#line 49
    return;
  }
  {
#line 53
  buffer[bufpos] = (zchar )0;
#line 56
  locked___0 = 1;
#line 58
  stream_word((zchar const   *)(buffer));
#line 64
  locked___0 = 0;
#line 68
  bufpos = 0;
#line 69
  prev_c = (zchar )0;
  }
#line 71
  return;
}
}
#line 82 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
static bool flag  =    0;
#line 80 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
void print_char(zchar c ) 
{ 
  int tmp ;

  {
#line 84
  if (message) {
#line 84
    goto _L;
  } else
#line 84
  if (ostream_memory) {
#line 84
    goto _L;
  } else
#line 84
  if (enable_buffering) {
    _L: /* CIL Label */ 
#line 86
    if (! flag) {
#line 90
      if ((int )c == 13) {
        {
#line 91
        new_line();
        }
#line 91
        return;
      }
#line 92
      if ((int )c == 0) {
#line 93
        return;
      }
#line 97
      if ((int )c == 32) {
        {
#line 100
        flush_buffer();
        }
      } else
#line 97
      if ((int )c == 9) {
        {
#line 100
        flush_buffer();
        }
      } else
#line 97
      if ((int )c == 11) {
        {
#line 100
        flush_buffer();
        }
      } else
#line 97
      if ((int )prev_c == 45) {
#line 97
        if ((int )c != 45) {
          {
#line 100
          flush_buffer();
          }
        }
      }
#line 104
      if ((int )c == 2) {
#line 105
        flag = 1;
      } else
#line 104
      if ((int )c == 1) {
#line 105
        flag = 1;
      }
#line 109
      prev_c = c;
    } else {
#line 111
      flag = 0;
    }
#line 115
    tmp = bufpos;
#line 115
    bufpos ++;
#line 115
    buffer[tmp] = c;
#line 117
    if (bufpos == 200) {
      {
#line 118
      runtime_error(1);
      }
    }
  } else {
    {
#line 120
    stream_char(c);
    }
  }
#line 122
  return;
}
}
#line 131 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
void new_line(void) 
{ 


  {
  {
#line 134
  flush_buffer();
#line 134
  stream_new_line();
  }
#line 136
  return;
}
}
#line 148
extern int ( /* missing proto */  memset)() ;
#line 146 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/buffer.c"
void init_buffer(void) 
{ 


  {
  {
#line 148
  memset(buffer, 0, sizeof(zchar ) * 200UL);
#line 149
  bufpos = 0;
#line 150
  prev_c = (zchar )0;
  }
#line 151
  return;
}
}
#line 709 "/usr/include/stdio.h"
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
#line 715
extern size_t fwrite(void const   * __restrict  __ptr , size_t __size , size_t __n ,
                     FILE * __restrict  __s ) ;
#line 754
extern long ftell(FILE *__stream ) ;
#line 830
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) ferror)(FILE *__stream ) ;
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 236
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strchr)(char const   *__s ,
                                                                                               int __c )  __attribute__((__pure__)) ;
#line 302 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zbyte h_config ;
#line 303
zword h_release ;
#line 304
zword h_resident_size ;
#line 305
zword h_start_pc ;
#line 306
zword h_dictionary ;
#line 307
zword h_objects ;
#line 309
zword h_dynamic_size ;
#line 311
zbyte h_serial[6] ;
#line 312
zword h_abbreviations ;
#line 313
zword h_file_size ;
#line 314
zword h_checksum ;
#line 315
zbyte h_interpreter_number ;
#line 316
zbyte h_interpreter_version ;
#line 317
zbyte h_screen_rows ;
#line 318
zbyte h_screen_cols ;
#line 319
zword h_screen_width ;
#line 320
zword h_screen_height ;
#line 321
zbyte h_font_height ;
#line 322
zbyte h_font_width ;
#line 324
zword h_strings_offset ;
#line 325
zbyte h_default_background ;
#line 326
zbyte h_default_foreground ;
#line 329
zbyte h_standard_high ;
#line 330
zbyte h_standard_low ;
#line 331
zword h_alphabet ;
#line 332
zword h_extension_table ;
#line 333
zbyte h_user_name[8] ;
#line 335
zword hx_table_size ;
#line 338
zword hx_unicode_table ;
#line 342
char *story_name ;
#line 376
long reserve_mem ;
#line 442
extern void z_pop(void) ;
#line 591
extern void os_fatal(char const   * ) ;
#line 605
extern void os_restart_game(int  ) ;
#line 466 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 480
extern  __attribute__((__nothrow__)) void *( __attribute__((__warn_unused_result__,
__leaf__)) realloc)(void *__ptr , size_t __size ) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 53 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void restart_screen(void) ;
#line 54
void refresh_text_style(void) ;
#line 56
void split_window(zword height ) ;
#line 60
extern FILE *os_path_open(char const   * , char const   * ) ;
#line 62
zword save_quetzal(FILE *svf , FILE *stf ) ;
#line 63
zword restore_quetzal(FILE *svf , FILE *stf ) ;
#line 65
void erase_window(zword win ) ;
#line 72 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
char save_name[81]  = 
#line 72
  {      (char )'s',      (char )'t',      (char )'o',      (char )'r', 
        (char )'y',      (char )'.',      (char )'s',      (char )'a', 
        (char )'v',      (char )'\000'};
#line 73 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
char auxilary_name[81]  = 
#line 73
  {      (char )'s',      (char )'t',      (char )'o',      (char )'r', 
        (char )'y',      (char )'.',      (char )'a',      (char )'u', 
        (char )'x',      (char )'\000'};
#line 75 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
zbyte *zmp  =    (zbyte *)((void *)0);
#line 76 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
zbyte *pcp  =    (zbyte *)((void *)0);
#line 78 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static FILE *story_fp  =    (FILE *)((void *)0);
#line 99 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static undo_t *first_undo  =    (undo_t *)((void *)0);
#line 99 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static undo_t *last_undo  =    (undo_t *)((void *)0);
#line 99 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static undo_t *curr_undo  =    (undo_t *)((void *)0);
#line 100 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static zbyte *undo_mem  =    (zbyte *)((void *)0);
#line 100 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static zbyte *prev_zmp  ;
#line 100 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static zbyte *undo_diff  ;
#line 102 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static int undo_count  =    0;
#line 111 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
zword get_header_extension(int entry ) 
{ 
  zword addr ;
  zword val ;

  {
#line 116
  if ((int )h_extension_table == 0) {
#line 117
    return ((zword )0);
  } else
#line 116
  if (entry > (int )hx_table_size) {
#line 117
    return ((zword )0);
  }
#line 119
  addr = (zword )((int )h_extension_table + 2 * entry);
#line 120
  val = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 122
  return (val);
}
}
#line 133 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void set_header_extension(int entry , zword val ) 
{ 
  zword addr ;

  {
#line 137
  if ((int )h_extension_table == 0) {
#line 138
    return;
  } else
#line 137
  if (entry > (int )hx_table_size) {
#line 138
    return;
  }
#line 140
  addr = (zword )((int )h_extension_table + 2 * entry);
#line 141
  *(zmp + addr) = (zbyte )((int )val >> 8);
#line 141
  *(zmp + ((int )addr + 1)) = (zbyte )((int )val & 255);
#line 143
  return;
}
}
#line 152 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void restart_header(void) 
{ 
  zword screen_x_size ;
  zword screen_y_size ;
  zbyte font_x_size ;
  zbyte font_y_size ;
  int i ;

  {
#line 161
  *(zmp + 1) = h_config;
#line 162
  *(zmp + 16) = (zbyte )((int )h_flags >> 8);
#line 162
  *(zmp + 17) = (zbyte )((int )h_flags & 255);
#line 164
  if ((int )h_version >= 4) {
#line 165
    *(zmp + 30) = h_interpreter_number;
#line 166
    *(zmp + 31) = h_interpreter_version;
#line 167
    *(zmp + 32) = h_screen_rows;
#line 168
    *(zmp + 33) = h_screen_cols;
  }
#line 174
  if ((int )h_version != 6) {
#line 175
    screen_x_size = (zword )h_screen_cols;
#line 176
    screen_y_size = (zword )h_screen_rows;
#line 177
    font_x_size = (zbyte )1;
#line 178
    font_y_size = (zbyte )1;
  } else {
#line 180
    screen_x_size = h_screen_width;
#line 181
    screen_y_size = h_screen_height;
#line 182
    font_x_size = h_font_width;
#line 183
    font_y_size = h_font_height;
  }
#line 186
  if ((int )h_version >= 5) {
#line 187
    *(zmp + 34) = (zbyte )((int )screen_x_size >> 8);
#line 187
    *(zmp + 35) = (zbyte )((int )screen_x_size & 255);
#line 188
    *(zmp + 36) = (zbyte )((int )screen_y_size >> 8);
#line 188
    *(zmp + 37) = (zbyte )((int )screen_y_size & 255);
#line 189
    *(zmp + 38) = font_y_size;
#line 190
    *(zmp + 39) = font_x_size;
#line 191
    *(zmp + 44) = h_default_background;
#line 192
    *(zmp + 45) = h_default_foreground;
  }
#line 195
  if ((int )h_version == 6) {
#line 196
    i = 0;
    {
#line 196
    while (1) {
      while_continue: /* CIL Label */ ;
#line 196
      if (! (i < 8)) {
#line 196
        goto while_break;
      }
      {
#line 197
      storeb((zword )(56 + i), h_user_name[i]);
#line 196
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 199
  *(zmp + 50) = h_standard_high;
#line 200
  *(zmp + 51) = h_standard_low;
#line 202
  return;
}
}
#line 218
void init_memory(void) ;
#line 218 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static struct __anonstruct_records_49 records[25]  = 
#line 218
  {      {(enum story )1, (zword )21, {(zbyte )'8', (zbyte )'7', (zbyte )'1', (zbyte )'2',
                                   (zbyte )'1', (zbyte )'4'}}, 
        {(enum story )1, (zword )26, {(zbyte )'8', (zbyte )'8', (zbyte )'0', (zbyte )'1',
                                   (zbyte )'2', (zbyte )'7'}}, 
        {(enum story )0, (zword )47, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'9',
                                   (zbyte )'1', (zbyte )'5'}}, 
        {(enum story )0, (zword )49, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'9',
                                   (zbyte )'1', (zbyte )'7'}}, 
        {(enum story )0, (zword )51, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'9',
                                   (zbyte )'2', (zbyte )'3'}}, 
        {(enum story )0, (zword )57, {(zbyte )'8', (zbyte )'7', (zbyte )'1', (zbyte )'2',
                                   (zbyte )'2', (zbyte )'1'}}, 
        {(enum story )2, (zword )296, {(zbyte )'8', (zbyte )'8', (zbyte )'1', (zbyte )'0',
                                    (zbyte )'1', (zbyte )'9'}}, 
        {(enum story )2, (zword )366, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'3',
                                    (zbyte )'2', (zbyte )'3'}}, 
        {(enum story )2, (zword )383, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'6',
                                    (zbyte )'0', (zbyte )'2'}}, 
        {(enum story )2, (zword )393, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'7',
                                    (zbyte )'1', (zbyte )'4'}}, 
        {(enum story )3, (zword )292, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'3',
                                    (zbyte )'1', (zbyte )'4'}}, 
        {(enum story )3, (zword )295, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'3',
                                    (zbyte )'2', (zbyte )'1'}}, 
        {(enum story )3, (zword )311, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'5',
                                    (zbyte )'1', (zbyte )'0'}}, 
        {(enum story )3, (zword )322, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'7',
                                    (zbyte )'0', (zbyte )'6'}}, 
        {(enum story )4, (zword )54, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'6',
                                   (zbyte )'0', (zbyte )'6'}}, 
        {(enum story )4, (zword )63, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'6',
                                   (zbyte )'2', (zbyte )'2'}}, 
        {(enum story )4, (zword )74, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'7',
                                   (zbyte )'1', (zbyte )'4'}}, 
        {(enum story )5, (zword )26, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'3',
                                   (zbyte )'1', (zbyte )'6'}}, 
        {(enum story )5, (zword )30, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'3',
                                   (zbyte )'2', (zbyte )'2'}}, 
        {(enum story )5, (zword )77, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'6',
                                   (zbyte )'1', (zbyte )'6'}}, 
        {(enum story )5, (zword )83, {(zbyte )'8', (zbyte )'9', (zbyte )'0', (zbyte )'7',
                                   (zbyte )'0', (zbyte )'6'}}, 
        {(enum story )6, (zword )203, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'5',
                                    (zbyte )'0', (zbyte )'6'}}, 
        {(enum story )6, (zword )219, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'9',
                                    (zbyte )'1', (zbyte )'2'}}, 
        {(enum story )6, (zword )221, {(zbyte )'8', (zbyte )'7', (zbyte )'0', (zbyte )'9',
                                    (zbyte )'1', (zbyte )'8'}}, 
        {(enum story )7, (zword )0, {(zbyte )'-', (zbyte )'-', (zbyte )'-', (zbyte )'-',
                                  (zbyte )'-', (zbyte )'-'}}};
#line 211 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void init_memory(void) 
{ 
  long size ;
  zword addr ;
  unsigned int n ;
  int i ;
  int j ;
  void *tmp ;
  size_t tmp___0 ;
  void *tmp___1 ;
  size_t tmp___2 ;

  {
  {
#line 252
  story_fp = os_path_open((char const   *)story_name, "rb");
  }
#line 252
  if ((unsigned long )story_fp == (unsigned long )((void *)0)) {
    {
#line 253
    os_fatal("Cannot open story file");
    }
  }
  {
#line 257
  tmp = malloc((size_t )64);
#line 257
  zmp = (zbyte *)tmp;
  }
#line 257
  if ((unsigned long )zmp == (unsigned long )((void *)0)) {
    {
#line 258
    os_fatal("Out of memory");
    }
  }
  {
#line 262
  tmp___0 = fread((void */* __restrict  */)zmp, (size_t )1, (size_t )64, (FILE */* __restrict  */)story_fp);
  }
#line 262
  if (tmp___0 != 64UL) {
    {
#line 263
    os_fatal("Story file read error");
    }
  }
#line 267
  h_version = *(zmp + 0);
#line 269
  if ((int )h_version < 1) {
    {
#line 270
    os_fatal("Unknown Z-code version");
    }
  } else
#line 269
  if ((int )h_version > 8) {
    {
#line 270
    os_fatal("Unknown Z-code version");
    }
  }
#line 272
  h_config = *(zmp + 1);
#line 274
  if ((int )h_version == 3) {
#line 274
    if ((int )h_config & 1) {
      {
#line 275
      os_fatal("Byte swapped story file");
      }
    }
  }
#line 277
  h_release = (zword )(((int )((zword )*(zmp + 2)) << 8) | (int )*(zmp + 3));
#line 278
  h_resident_size = (zword )(((int )((zword )*(zmp + 4)) << 8) | (int )*(zmp + 5));
#line 279
  h_start_pc = (zword )(((int )((zword )*(zmp + 6)) << 8) | (int )*(zmp + 7));
#line 280
  h_dictionary = (zword )(((int )((zword )*(zmp + 8)) << 8) | (int )*(zmp + 9));
#line 281
  h_objects = (zword )(((int )((zword )*(zmp + 10)) << 8) | (int )*(zmp + 11));
#line 282
  h_globals = (zword )(((int )((zword )*(zmp + 12)) << 8) | (int )*(zmp + 13));
#line 283
  h_dynamic_size = (zword )(((int )((zword )*(zmp + 14)) << 8) | (int )*(zmp + 15));
#line 284
  h_flags = (zword )(((int )((zword )*(zmp + 16)) << 8) | (int )*(zmp + 17));
#line 286
  i = 0;
#line 286
  addr = (zword )18;
  {
#line 286
  while (1) {
    while_continue: /* CIL Label */ ;
#line 286
    if (! (i < 6)) {
#line 286
      goto while_break;
    }
#line 287
    h_serial[i] = *(zmp + addr);
#line 286
    i ++;
#line 286
    addr = (zword )((int )addr + 1);
  }
  while_break: /* CIL Label */ ;
  }
#line 291
  story_id = (enum story )7;
#line 293
  i = 0;
  {
#line 293
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 293
    if (! ((unsigned int )records[i].story_id != 7U)) {
#line 293
      goto while_break___0;
    }
#line 295
    if ((int )h_release == (int )records[i].release) {
#line 297
      j = 0;
      {
#line 297
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 297
        if (! (j < 6)) {
#line 297
          goto while_break___1;
        }
#line 298
        if ((int )h_serial[j] != (int )records[i].serial[j]) {
#line 299
          goto no_match;
        }
#line 297
        j ++;
      }
      while_break___1: /* CIL Label */ ;
      }
#line 301
      story_id = records[i].story_id;
    }
    no_match: 
#line 293
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 309
  h_abbreviations = (zword )(((int )((zword )*(zmp + 24)) << 8) | (int )*(zmp + 25));
#line 310
  h_file_size = (zword )(((int )((zword )*(zmp + 26)) << 8) | (int )*(zmp + 27));
#line 314
  if ((int )h_file_size != 0) {
#line 316
    story_size = 2L * (long )h_file_size;
#line 318
    if ((int )h_version >= 4) {
#line 319
      story_size *= 2L;
    }
#line 320
    if ((int )h_version >= 6) {
#line 321
      story_size *= 2L;
    }
  } else {
    {
#line 325
    fseek(story_fp, 0L, 2);
#line 326
    story_size = ftell(story_fp);
#line 327
    fseek(story_fp, 64L, 0);
    }
  }
#line 331
  h_checksum = (zword )(((int )((zword )*(zmp + 28)) << 8) | (int )*(zmp + 29));
#line 332
  h_alphabet = (zword )(((int )((zword )*(zmp + 52)) << 8) | (int )*(zmp + 53));
#line 333
  h_functions_offset = (zword )(((int )((zword )*(zmp + 40)) << 8) | (int )*(zmp + 41));
#line 334
  h_strings_offset = (zword )(((int )((zword )*(zmp + 42)) << 8) | (int )*(zmp + 43));
#line 335
  h_terminating_keys = (zword )(((int )((zword )*(zmp + 46)) << 8) | (int )*(zmp + 47));
#line 336
  h_extension_table = (zword )(((int )((zword )*(zmp + 54)) << 8) | (int )*(zmp + 55));
#line 340
  if ((unsigned int )story_id == 2U) {
#line 340
    if ((int )h_release == 296) {
#line 341
      h_flags = (zword )((int )h_flags | 8);
    }
  }
#line 345
  if ((int )h_version <= 4) {
#line 346
    op0_opcodes[9] = & z_pop;
#line 347
    op1_opcodes[15] = & z_not;
  } else {
#line 349
    op0_opcodes[9] = & z_catch;
#line 350
    op1_opcodes[15] = & z_call_n;
  }
  {
#line 355
  tmp___1 = realloc((void *)zmp, (size_t )story_size);
#line 355
  zmp = (zbyte *)tmp___1;
  }
#line 355
  if ((unsigned long )zmp == (unsigned long )((void *)0)) {
    {
#line 356
    os_fatal("Out of memory");
    }
  }
#line 360
  n = 32768U;
#line 362
  size = 64L;
  {
#line 362
  while (1) {
    while_continue___2: /* CIL Label */ ;
#line 362
    if (! (size < story_size)) {
#line 362
      goto while_break___2;
    }
#line 364
    if (story_size - size < 32768L) {
#line 365
      n = (unsigned int )(story_size - size);
    }
    {
#line 367
    pcp = zmp + size;
#line 369
    tmp___2 = fread((void */* __restrict  */)pcp, (size_t )1, (size_t )n, (FILE */* __restrict  */)story_fp);
    }
#line 369
    if (tmp___2 != (size_t )n) {
      {
#line 370
      os_fatal("Story file read error");
      }
    }
#line 362
    size += (long )n;
  }
  while_break___2: /* CIL Label */ ;
  }
  {
#line 376
  hx_table_size = get_header_extension(0);
#line 377
  hx_unicode_table = get_header_extension(3);
  }
#line 379
  return;
}
}
#line 390 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void init_undo(void) 
{ 
  void *reserved ;
  void *tmp ;

  {
#line 394
  reserved = (void *)0;
#line 396
  if (reserve_mem != 0L) {
    {
#line 397
    reserved = malloc((size_t )reserve_mem);
    }
#line 397
    if ((unsigned long )reserved == (unsigned long )((void *)0)) {
#line 398
      return;
    }
  }
  {
#line 403
  tmp = malloc((size_t )(((int )h_dynamic_size * 5) / 2 + 2));
#line 403
  undo_mem = (zbyte *)tmp;
  }
#line 404
  if ((unsigned long )undo_mem != (unsigned long )((void *)0)) {
    {
#line 405
    prev_zmp = undo_mem;
#line 406
    undo_diff = undo_mem + (int )h_dynamic_size;
#line 407
    memcpy((void */* __restrict  */)prev_zmp, (void const   */* __restrict  */)zmp,
           (size_t )h_dynamic_size);
    }
  } else {
#line 409
    f_setup.undo_slots = 0;
  }
#line 411
  if (reserve_mem != 0L) {
    {
#line 412
    free(reserved);
    }
  }
#line 414
  return;
}
}
#line 423 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static void free_undo(int count ) 
{ 
  undo_t *p ;
  int tmp ;

  {
#line 427
  if (count > undo_count) {
#line 428
    count = undo_count;
  }
  {
#line 429
  while (1) {
    while_continue: /* CIL Label */ ;
#line 429
    tmp = count;
#line 429
    count --;
#line 429
    if (! tmp) {
#line 429
      goto while_break;
    }
#line 430
    p = first_undo;
#line 431
    if ((unsigned long )curr_undo == (unsigned long )first_undo) {
#line 432
      curr_undo = curr_undo->next;
    }
    {
#line 433
    first_undo = first_undo->next;
#line 434
    free((void *)p);
#line 435
    undo_count --;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 437
  if (first_undo) {
#line 438
    first_undo->prev = (undo_t *)((void *)0);
  } else {
#line 440
    last_undo = (undo_t *)((void *)0);
  }
#line 441
  return;
}
}
#line 450 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void reset_memory(void) 
{ 


  {
#line 452
  if (story_fp) {
    {
#line 453
    fclose(story_fp);
    }
  }
#line 454
  story_fp = (FILE *)((void *)0);
#line 456
  if (undo_mem) {
    {
#line 457
    free_undo(undo_count);
#line 458
    free((void *)undo_mem);
    }
  }
#line 461
  undo_mem = (zbyte *)((void *)0);
#line 462
  undo_count = 0;
#line 464
  if (zmp) {
    {
#line 465
    free((void *)zmp);
    }
  }
#line 466
  zmp = (zbyte *)((void *)0);
#line 467
  return;
}
}
#line 476 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void storeb(zword addr , zbyte value ) 
{ 


  {
#line 479
  if ((int )addr >= (int )h_dynamic_size) {
    {
#line 480
    runtime_error(2);
    }
  }
#line 482
  if ((int )addr == 17) {
#line 484
    h_flags = (zword )((int )h_flags & -4);
#line 485
    h_flags = (zword )((int )h_flags | ((int )value & 3));
#line 487
    if ((int )value & 1) {
#line 488
      if (! ostream_script) {
        {
#line 489
        script_open();
        }
      }
    } else
#line 491
    if (ostream_script) {
      {
#line 492
      script_close();
      }
    }
    {
#line 495
    refresh_text_style();
    }
  }
#line 499
  *(zmp + addr) = value;
#line 501
  return;
}
}
#line 510 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void storew(zword addr , zword value ) 
{ 


  {
  {
#line 513
  storeb((zword )((int )addr), (zbyte )((int )value >> 8));
#line 514
  storeb((zword )((int )addr + 1), (zbyte )((int )value & 255));
  }
#line 516
  return;
}
}
#line 527 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static bool first_restart  =    1;
#line 525 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_restart(void) 
{ 
  size_t tmp ;
  long pc ;

  {
  {
#line 529
  flush_buffer();
#line 531
  os_restart_game(0);
#line 533
  seed_random(0);
  }
#line 535
  if (! first_restart) {
    {
#line 537
    fseek(story_fp, 0L, 0);
#line 539
    tmp = fread((void */* __restrict  */)zmp, (size_t )1, (size_t )h_dynamic_size,
                (FILE */* __restrict  */)story_fp);
    }
#line 539
    if (tmp != (size_t )h_dynamic_size) {
      {
#line 540
      os_fatal("Story file read error");
      }
    }
  } else {
#line 542
    first_restart = 0;
  }
  {
#line 544
  restart_header();
#line 545
  restart_screen();
#line 547
  fp = stack + 1024;
#line 547
  sp = fp;
#line 548
  frame_count = (zword )0;
  }
#line 550
  if ((int )h_version != 6) {
#line 552
    pc = (long )h_start_pc;
#line 553
    pcp = zmp + pc;
  } else {
    {
#line 555
    call(h_start_pc, 0, (zword *)((void *)0), 0);
    }
  }
  {
#line 557
  os_restart_game(2);
  }
#line 559
  return;
}
}
#line 569 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static void get_default_name(char *default_name , zword addr ) 
{ 
  zbyte len ;
  int i ;
  zbyte c ;
  char *tmp ;

  {
#line 572
  if ((int )addr != 0) {
#line 577
    len = *(zmp + addr);
#line 578
    addr = (zword )((int )addr + 1);
#line 580
    i = 0;
    {
#line 580
    while (1) {
      while_continue: /* CIL Label */ ;
#line 580
      if (! (i < (int )len)) {
#line 580
        goto while_break;
      }
#line 584
      c = *(zmp + addr);
#line 585
      addr = (zword )((int )addr + 1);
#line 587
      if ((int )c >= 65) {
#line 587
        if ((int )c <= 90) {
#line 588
          c = (zbyte )((int )c + 32);
        }
      }
#line 590
      *(default_name + i) = (char )c;
#line 580
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
    {
#line 594
    *(default_name + i) = (char)0;
#line 596
    tmp = strchr((char const   *)default_name, '.');
    }
#line 596
    if ((unsigned long )tmp == (unsigned long )((void *)0)) {
      {
#line 597
      strcpy((char */* __restrict  */)(default_name + i), (char const   */* __restrict  */)".AUX");
      }
    }
  } else {
    {
#line 599
    strcpy((char */* __restrict  */)default_name, (char const   */* __restrict  */)(auxilary_name));
    }
  }
#line 601
  return;
}
}
#line 612 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_restore(void) 
{ 
  char new_name[81] ;
  char default_name[81] ;
  FILE *gfp ;
  zword success ;
  int tmp ;
  int tmp___0 ;
  size_t tmp___1 ;
  long pc ;
  zword release ;
  zword addr ;
  int i ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  int skip ;
  int tmp___14 ;
  zword tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  zbyte old_screen_rows ;
  zbyte old_screen_cols ;

  {
#line 618
  success = (zword )0;
#line 620
  if (zargc != 0) {
#line 624
    if (zargc >= 3) {
#line 624
      tmp = (int )zargs[2];
    } else {
#line 624
      tmp = 0;
    }
    {
#line 624
    get_default_name(default_name, (zword )tmp);
#line 626
    tmp___0 = os_read_file_name(new_name, (char const   *)(default_name), 5);
    }
#line 626
    if (tmp___0 == 0) {
#line 627
      goto finished;
    }
    {
#line 629
    strcpy((char */* __restrict  */)(auxilary_name), (char const   */* __restrict  */)(default_name));
#line 633
    gfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"rb");
    }
#line 633
    if ((unsigned long )gfp == (unsigned long )((void *)0)) {
#line 634
      goto finished;
    }
    {
#line 638
    tmp___1 = fread((void */* __restrict  */)(zmp + (int )zargs[0]), (size_t )1, (size_t )zargs[1],
                    (FILE */* __restrict  */)gfp);
#line 638
    success = (zword )tmp___1;
#line 642
    fclose(gfp);
    }
  } else {
    {
#line 653
    tmp___2 = os_read_file_name(new_name, (char const   *)(save_name), 0);
    }
#line 653
    if (tmp___2 == 0) {
#line 654
      goto finished;
    }
    {
#line 656
    strcpy((char */* __restrict  */)(save_name), (char const   */* __restrict  */)(new_name));
#line 660
    gfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"rb");
    }
#line 660
    if ((unsigned long )gfp == (unsigned long )((void *)0)) {
#line 661
      goto finished;
    }
#line 663
    if (f_setup.save_quetzal) {
      {
#line 664
      success = restore_quetzal(gfp, story_fp);
      }
    } else {
      {
#line 669
      tmp___3 = fgetc(gfp);
#line 669
      release = (zword )((unsigned int )tmp___3 << 8);
#line 670
      tmp___4 = fgetc(gfp);
#line 670
      release = (zword )((int )release | tmp___4);
#line 672
      fgetc(gfp);
#line 673
      fgetc(gfp);
      }
#line 677
      if ((int )release == (int )h_release) {
        {
#line 679
        tmp___5 = fgetc(gfp);
#line 679
        pc = (long )tmp___5 << 16;
#line 680
        tmp___6 = fgetc(gfp);
#line 680
        pc |= (long )((unsigned int )tmp___6 << 8);
#line 681
        tmp___7 = fgetc(gfp);
#line 681
        pc |= (long )tmp___7;
#line 683
        pcp = zmp + pc;
#line 685
        tmp___8 = fgetc(gfp);
#line 685
        sp = stack + (tmp___8 << 8);
#line 686
        tmp___9 = fgetc(gfp);
#line 686
        sp += tmp___9;
#line 687
        tmp___10 = fgetc(gfp);
#line 687
        fp = stack + (tmp___10 << 8);
#line 688
        tmp___11 = fgetc(gfp);
#line 688
        fp += tmp___11;
#line 690
        i = (int )(sp - stack);
        }
        {
#line 690
        while (1) {
          while_continue: /* CIL Label */ ;
#line 690
          if (! (i < 1024)) {
#line 690
            goto while_break;
          }
          {
#line 691
          tmp___12 = fgetc(gfp);
#line 691
          stack[i] = (zword )((unsigned int )tmp___12 << 8);
#line 692
          tmp___13 = fgetc(gfp);
#line 692
          stack[i] = (zword )((int )stack[i] | tmp___13);
#line 690
          i ++;
          }
        }
        while_break: /* CIL Label */ ;
        }
        {
#line 695
        fseek(story_fp, 0L, 0);
#line 697
        addr = (zword )0;
        }
        {
#line 697
        while (1) {
          while_continue___0: /* CIL Label */ ;
#line 697
          if (! ((int )addr < (int )h_dynamic_size)) {
#line 697
            goto while_break___0;
          }
          {
#line 698
          tmp___14 = fgetc(gfp);
#line 698
          skip = tmp___14;
#line 699
          i = 0;
          }
          {
#line 699
          while (1) {
            while_continue___1: /* CIL Label */ ;
#line 699
            if (! (i < skip)) {
#line 699
              goto while_break___1;
            }
            {
#line 700
            tmp___15 = addr;
#line 700
            addr = (zword )((int )addr + 1);
#line 700
            tmp___16 = fgetc(story_fp);
#line 700
            *(zmp + tmp___15) = (zbyte )tmp___16;
#line 699
            i ++;
            }
          }
          while_break___1: /* CIL Label */ ;
          }
          {
#line 701
          tmp___17 = fgetc(gfp);
#line 701
          *(zmp + addr) = (zbyte )tmp___17;
#line 702
          fgetc(story_fp);
#line 697
          addr = (zword )((int )addr + 1);
          }
        }
        while_break___0: /* CIL Label */ ;
        }
        {
#line 707
        tmp___18 = ferror(gfp);
        }
#line 707
        if (tmp___18) {
#line 708
          success = (zword )-1;
        } else {
          {
#line 707
          tmp___19 = ferror(story_fp);
          }
#line 707
          if (tmp___19) {
#line 708
            success = (zword )-1;
          } else
#line 707
          if ((int )addr != (int )h_dynamic_size) {
#line 708
            success = (zword )-1;
          } else {
#line 713
            success = (zword )2;
          }
        }
      } else {
        {
#line 715
        print_string("Invalid save file\n");
        }
      }
    }
#line 718
    if ((int )((short )success) >= 0) {
      {
#line 722
      fclose(gfp);
      }
#line 724
      if ((int )((short )success) > 0) {
#line 729
        if ((int )h_version == 3) {
          {
#line 730
          split_window((zword )0);
          }
        }
        {
#line 732
        old_screen_rows = *(zmp + 32);
#line 733
        old_screen_cols = *(zmp + 33);
#line 736
        restart_header();
        }
#line 743
        if ((int )h_version > 3) {
#line 743
          if ((int )h_version != 6) {
#line 743
            if ((int )h_screen_rows != (int )old_screen_rows) {
              {
#line 746
              erase_window((zword )1);
              }
            } else
#line 743
            if ((int )h_screen_cols != (int )old_screen_cols) {
              {
#line 746
              erase_window((zword )1);
              }
            }
          }
        }
      }
    } else {
      {
#line 749
      os_fatal("Error reading save file");
      }
    }
  }
  finished: 
#line 754
  if ((int )h_version <= 3) {
    {
#line 755
    branch((bool )success);
    }
  } else {
    {
#line 757
    store(success);
    }
  }
#line 759
  return;
}
}
#line 772 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static long mem_diff(zbyte *a , zbyte *b , zword mem_size , zbyte *diff ) 
{ 
  unsigned int size ;
  zbyte *p ;
  unsigned int j ;
  zbyte c ;
  zbyte *tmp ;
  zbyte *tmp___0 ;
  zbyte *tmp___1 ;
  zbyte *tmp___2 ;
  zbyte *tmp___3 ;
  zbyte *tmp___4 ;
  zbyte *tmp___5 ;
  zbyte *tmp___6 ;
  zbyte *tmp___7 ;
  zbyte *tmp___8 ;

  {
#line 774
  size = (unsigned int )mem_size;
#line 775
  p = diff;
  {
#line 779
  while (1) {
    while_continue: /* CIL Label */ ;
#line 780
    j = 0U;
    {
#line 780
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 780
      if (size > 0U) {
#line 780
        tmp = a;
#line 780
        a ++;
#line 780
        tmp___0 = b;
#line 780
        b ++;
#line 780
        c = (zbyte )((int )*tmp ^ (int )*tmp___0);
#line 780
        if (! ((int )c == 0)) {
#line 780
          goto while_break___0;
        }
      } else {
#line 780
        goto while_break___0;
      }
#line 781
      size --;
#line 780
      j ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 782
    if (size == 0U) {
#line 782
      goto while_break;
    }
#line 783
    size --;
#line 784
    if (j > 32768U) {
#line 785
      tmp___1 = p;
#line 785
      p ++;
#line 785
      *tmp___1 = (zbyte )0;
#line 786
      tmp___2 = p;
#line 786
      p ++;
#line 786
      *tmp___2 = (zbyte )255;
#line 787
      tmp___3 = p;
#line 787
      p ++;
#line 787
      *tmp___3 = (zbyte )255;
#line 788
      j -= 32768U;
    }
#line 790
    if (j > 0U) {
#line 791
      tmp___4 = p;
#line 791
      p ++;
#line 791
      *tmp___4 = (zbyte )0;
#line 792
      j --;
#line 793
      if (j <= 127U) {
#line 794
        tmp___5 = p;
#line 794
        p ++;
#line 794
        *tmp___5 = (zbyte )j;
      } else {
#line 796
        tmp___6 = p;
#line 796
        p ++;
#line 796
        *tmp___6 = (zbyte )((j & 127U) | 128U);
#line 797
        tmp___7 = p;
#line 797
        p ++;
#line 797
        *tmp___7 = (zbyte )((j & 32640U) >> 7);
      }
    }
#line 800
    tmp___8 = p;
#line 800
    p ++;
#line 800
    *tmp___8 = c;
#line 801
    *(b - 1) = (zbyte )((int )*(b - 1) ^ (int )c);
  }
  while_break: /* CIL Label */ ;
  }
#line 803
  return (p - diff);
}
}
#line 813 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
static void mem_undiff(zbyte *diff , long diff_length , zbyte *dest ) 
{ 
  zbyte c ;
  zbyte *tmp ;
  unsigned int runlen ;
  zbyte *tmp___0 ;
  zbyte *tmp___1 ;
  zbyte *tmp___2 ;

  {
  {
#line 817
  while (1) {
    while_continue: /* CIL Label */ ;
#line 817
    if (! diff_length) {
#line 817
      goto while_break;
    }
#line 818
    tmp = diff;
#line 818
    diff ++;
#line 818
    c = *tmp;
#line 819
    diff_length --;
#line 820
    if ((int )c == 0) {
#line 823
      if (! diff_length) {
#line 824
        return;
      }
#line 825
      tmp___0 = diff;
#line 825
      diff ++;
#line 825
      runlen = (unsigned int )*tmp___0;
#line 826
      diff_length --;
#line 827
      if (runlen & 128U) {
#line 828
        if (! diff_length) {
#line 829
          return;
        }
#line 830
        tmp___1 = diff;
#line 830
        diff ++;
#line 830
        c = *tmp___1;
#line 831
        diff_length --;
#line 832
        runlen = (runlen & 127U) | ((unsigned int )c << 7);
      }
#line 835
      dest += runlen + 1U;
    } else {
#line 837
      tmp___2 = dest;
#line 837
      dest ++;
#line 837
      *tmp___2 = (zbyte )((int )*tmp___2 ^ (int )c);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 840
  return;
}
}
#line 849 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
int restore_undo(void) 
{ 


  {
#line 852
  if (f_setup.undo_slots == 0) {
#line 854
    return (-1);
  }
#line 856
  if ((unsigned long )curr_undo == (unsigned long )((void *)0)) {
#line 858
    return (0);
  }
  {
#line 862
  memcpy((void */* __restrict  */)zmp, (void const   */* __restrict  */)prev_zmp,
         (size_t )h_dynamic_size);
#line 863
  pcp = zmp + curr_undo->pc;
#line 864
  sp = (stack + 1024) - (int )curr_undo->stack_size;
#line 865
  fp = stack + (int )curr_undo->frame_offset;
#line 866
  frame_count = curr_undo->frame_count;
#line 867
  mem_undiff((zbyte *)(curr_undo + 1), curr_undo->diff_size, prev_zmp);
#line 868
  memcpy((void */* __restrict  */)sp, (void const   */* __restrict  */)((zbyte *)(curr_undo + 1) + curr_undo->diff_size),
         (unsigned long )curr_undo->stack_size * sizeof(*sp));
#line 871
  curr_undo = curr_undo->prev;
#line 873
  restart_header();
  }
#line 875
  return (2);
}
}
#line 886 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_restore_undo(void) 
{ 
  int tmp ;

  {
  {
#line 889
  tmp = restore_undo();
#line 889
  store((zword )tmp);
  }
#line 891
  return;
}
}
#line 902 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_save(void) 
{ 
  char new_name[81] ;
  char default_name[81] ;
  FILE *gfp ;
  zword success ;
  int tmp ;
  int tmp___0 ;
  size_t tmp___1 ;
  long pc ;
  zword addr ;
  zword nsp ;
  zword nfp ;
  int skip ;
  int i ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;

  {
#line 908
  success = (zword )0;
#line 910
  if (zargc != 0) {
#line 914
    if (zargc >= 3) {
#line 914
      tmp = (int )zargs[2];
    } else {
#line 914
      tmp = 0;
    }
    {
#line 914
    get_default_name(default_name, (zword )tmp);
#line 916
    tmp___0 = os_read_file_name(new_name, (char const   *)(default_name), 6);
    }
#line 916
    if (tmp___0 == 0) {
#line 917
      goto finished;
    }
    {
#line 919
    strcpy((char */* __restrict  */)(auxilary_name), (char const   */* __restrict  */)(default_name));
#line 923
    gfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"wb");
    }
#line 923
    if ((unsigned long )gfp == (unsigned long )((void *)0)) {
#line 924
      goto finished;
    }
    {
#line 928
    tmp___1 = fwrite((void const   */* __restrict  */)(zmp + (int )zargs[0]), (size_t )zargs[1],
                     (size_t )1, (FILE */* __restrict  */)gfp);
#line 928
    success = (zword )tmp___1;
#line 932
    fclose(gfp);
    }
  } else {
    {
#line 944
    tmp___2 = os_read_file_name(new_name, (char const   *)(save_name), 1);
    }
#line 944
    if (tmp___2 == 0) {
#line 945
      goto finished;
    }
    {
#line 947
    strcpy((char */* __restrict  */)(save_name), (char const   */* __restrict  */)(new_name));
#line 951
    gfp = fopen((char const   */* __restrict  */)(new_name), (char const   */* __restrict  */)"wb");
    }
#line 951
    if ((unsigned long )gfp == (unsigned long )((void *)0)) {
#line 952
      goto finished;
    }
#line 954
    if (f_setup.save_quetzal) {
      {
#line 955
      success = save_quetzal(gfp, story_fp);
      }
    } else {
      {
#line 959
      fputc((int )h_release >> 8, gfp);
#line 960
      fputc((int )h_release & 255, gfp);
#line 961
      fputc((int )h_checksum >> 8, gfp);
#line 962
      fputc((int )h_checksum & 255, gfp);
#line 964
      pc = pcp - zmp;
#line 966
      fputc((int )(pc >> 16) & 255, gfp);
#line 967
      fputc((int )(pc >> 8) & 255, gfp);
#line 968
      fputc((int )pc & 255, gfp);
#line 970
      nsp = (zword )((int )(sp - stack));
#line 971
      nfp = (zword )((int )(fp - stack));
#line 973
      fputc((int )nsp >> 8, gfp);
#line 974
      fputc((int )nsp & 255, gfp);
#line 975
      fputc((int )nfp >> 8, gfp);
#line 976
      fputc((int )nfp & 255, gfp);
#line 978
      i = (int )nsp;
      }
      {
#line 978
      while (1) {
        while_continue: /* CIL Label */ ;
#line 978
        if (! (i < 1024)) {
#line 978
          goto while_break;
        }
        {
#line 979
        fputc((int )stack[i] >> 8, gfp);
#line 980
        fputc((int )stack[i] & 255, gfp);
#line 978
        i ++;
        }
      }
      while_break: /* CIL Label */ ;
      }
      {
#line 983
      fseek(story_fp, 0L, 0);
#line 985
      addr = (zword )0;
#line 985
      skip = 0;
      }
      {
#line 985
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 985
        if (! ((int )addr < (int )h_dynamic_size)) {
#line 985
          goto while_break___0;
        }
        {
#line 986
        tmp___3 = fgetc(story_fp);
        }
#line 986
        if ((int )*(zmp + addr) != tmp___3) {
          {
#line 987
          fputc(skip, gfp);
#line 988
          fputc((int )*(zmp + addr), gfp);
#line 989
          skip = 0;
          }
        } else
#line 986
        if (skip == 255) {
          {
#line 987
          fputc(skip, gfp);
#line 988
          fputc((int )*(zmp + addr), gfp);
#line 989
          skip = 0;
          }
        } else
#line 986
        if ((int )addr + 1 == (int )h_dynamic_size) {
          {
#line 987
          fputc(skip, gfp);
#line 988
          fputc((int )*(zmp + addr), gfp);
#line 989
          skip = 0;
          }
        } else {
#line 990
          skip ++;
        }
#line 985
        addr = (zword )((int )addr + 1);
      }
      while_break___0: /* CIL Label */ ;
      }
    }
    {
#line 995
    tmp___4 = fclose(gfp);
    }
#line 995
    if (tmp___4 == -1) {
      {
#line 996
      print_string("Error writing save file\n");
      }
#line 997
      goto finished;
    } else {
      {
#line 995
      tmp___5 = ferror(story_fp);
      }
#line 995
      if (tmp___5) {
        {
#line 996
        print_string("Error writing save file\n");
        }
#line 997
        goto finished;
      }
    }
#line 1002
    success = (zword )1;
  }
  finished: 
#line 1008
  if ((int )h_version <= 3) {
    {
#line 1009
    branch((bool )success);
    }
  } else {
    {
#line 1011
    store(success);
    }
  }
#line 1013
  return;
}
}
#line 1022 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
int save_undo(void) 
{ 
  long diff_size ;
  zword stack_size ;
  undo_t *p ;
  void *tmp ;

  {
#line 1028
  if (f_setup.undo_slots == 0) {
#line 1029
    return (-1);
  }
  {
#line 1033
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1033
    if (! ((unsigned long )last_undo != (unsigned long )curr_undo)) {
#line 1033
      goto while_break;
    }
    {
#line 1034
    p = last_undo;
#line 1035
    last_undo = last_undo->prev;
#line 1036
    free((void *)p);
#line 1037
    undo_count --;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1039
  if (last_undo) {
#line 1040
    last_undo->next = (undo_t *)((void *)0);
  } else {
#line 1042
    first_undo = (undo_t *)((void *)0);
  }
#line 1044
  if (undo_count == f_setup.undo_slots) {
    {
#line 1045
    free_undo(1);
    }
  }
  {
#line 1047
  diff_size = mem_diff(zmp, prev_zmp, h_dynamic_size, undo_diff);
#line 1048
  stack_size = (zword )((stack + 1024) - sp);
  }
  {
#line 1049
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 1050
    tmp = malloc((sizeof(undo_t ) + (unsigned long )diff_size) + (unsigned long )stack_size * sizeof(*sp));
#line 1050
    p = (undo_t *)tmp;
    }
#line 1051
    if ((unsigned long )p == (unsigned long )((void *)0)) {
      {
#line 1052
      free_undo(1);
      }
    }
#line 1049
    if (! p) {
#line 1049
      if (! undo_count) {
#line 1049
        goto while_break___0;
      }
    } else {
#line 1049
      goto while_break___0;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 1054
  if ((unsigned long )p == (unsigned long )((void *)0)) {
#line 1055
    return (-1);
  }
  {
#line 1056
  p->pc = pcp - zmp;
#line 1057
  p->frame_count = frame_count;
#line 1058
  p->diff_size = diff_size;
#line 1059
  p->stack_size = stack_size;
#line 1060
  p->frame_offset = (zword )(fp - stack);
#line 1061
  memcpy((void */* __restrict  */)(p + 1), (void const   */* __restrict  */)undo_diff,
         (size_t )diff_size);
#line 1062
  memcpy((void */* __restrict  */)((zbyte *)(p + 1) + diff_size), (void const   */* __restrict  */)sp,
         (unsigned long )stack_size * sizeof(*sp));
  }
#line 1064
  if (! first_undo) {
#line 1065
    p->prev = (undo_t *)((void *)0);
#line 1066
    first_undo = p;
  } else {
#line 1068
    last_undo->next = p;
#line 1069
    p->prev = last_undo;
  }
#line 1071
  p->next = (undo_t *)((void *)0);
#line 1072
  last_undo = p;
#line 1072
  curr_undo = last_undo;
#line 1073
  undo_count ++;
#line 1074
  return (1);
}
}
#line 1085 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_save_undo(void) 
{ 
  int tmp ;

  {
  {
#line 1088
  tmp = save_undo();
#line 1088
  store((zword )tmp);
  }
#line 1090
  return;
}
}
#line 1099 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/fastmem.c"
void z_verify(void) 
{ 
  zword checksum ;
  long i ;
  int tmp ;

  {
  {
#line 1101
  checksum = (zword )0;
#line 1106
  fseek(story_fp, 64L, 0);
#line 1108
  i = 64L;
  }
  {
#line 1108
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1108
    if (! (i < story_size)) {
#line 1108
      goto while_break;
    }
    {
#line 1109
    tmp = fgetc(story_fp);
#line 1109
    checksum = (zword )((int )checksum + tmp);
#line 1108
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1113
  branch((int )checksum == (int )h_checksum);
  }
#line 1115
  return;
}
}
#line 328 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zword h_line_width ;
#line 613
extern int os_string_width(zchar const   * ) ;
#line 25 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
zword get_max_width(zword win ) ;
#line 27 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
static int depth  =    -1;
#line 29 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
static struct __anonstruct_redirect_41 redirect[16]  ;
#line 43 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
void memory_open(zword table , zword xsize , bool buffering ) 
{ 


  {
#line 46
  depth ++;
#line 46
  if (depth < 16) {
#line 48
    if (! buffering) {
#line 49
      xsize = (zword )65535;
    }
#line 50
    if (buffering) {
#line 50
      if ((int )((short )xsize) <= 0) {
        {
#line 51
        xsize = get_max_width((zword )(- ((int )((short )xsize))));
        }
      }
    }
    {
#line 53
    storew(table, (zword )0);
#line 55
    redirect[depth].table = table;
#line 56
    redirect[depth].width = (zword )0;
#line 57
    redirect[depth].total = (zword )0;
#line 58
    redirect[depth].xsize = xsize;
#line 60
    ostream_memory = 1;
    }
  } else {
    {
#line 62
    runtime_error(15);
    }
  }
#line 64
  return;
}
}
#line 73 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
void memory_new_line(void) 
{ 
  zword size ;
  zword addr ;
  zword tmp ;

  {
#line 78
  redirect[depth].total = (zword )((int )redirect[depth].total + (int )redirect[depth].width);
#line 79
  redirect[depth].width = (zword )0;
#line 81
  addr = redirect[depth].table;
#line 83
  size = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 84
  addr = (zword )((int )addr + 2);
#line 86
  if ((int )redirect[depth].xsize != 65535) {
#line 88
    redirect[depth].table = (zword )((int )addr + (int )size);
#line 89
    size = (zword )0;
  } else {
    {
#line 91
    tmp = size;
#line 91
    size = (zword )((int )size + 1);
#line 91
    storeb((zword )((int )addr + (int )tmp), (zbyte )13);
    }
  }
  {
#line 93
  storew(redirect[depth].table, size);
  }
#line 95
  return;
}
}
#line 104 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
void memory_word(zchar const   *s ) 
{ 
  zword size ;
  zword addr ;
  zchar c ;
  int width ;
  int tmp ;
  zbyte tmp___0 ;
  zword tmp___1 ;
  zchar const   *tmp___2 ;

  {
#line 110
  if ((int )h_version == 6) {
    {
#line 112
    tmp = os_string_width(s);
#line 112
    width = tmp;
    }
#line 114
    if ((int )redirect[depth].xsize != 65535) {
#line 116
      if ((int )redirect[depth].width + width > (int )redirect[depth].xsize) {
#line 118
        if ((int const   )*s == 32) {
          {
#line 119
          s ++;
#line 119
          width = os_string_width(s);
          }
        } else
#line 118
        if ((int const   )*s == 9) {
          {
#line 119
          s ++;
#line 119
          width = os_string_width(s);
          }
        } else
#line 118
        if ((int const   )*s == 11) {
          {
#line 119
          s ++;
#line 119
          width = os_string_width(s);
          }
        }
        {
#line 121
        memory_new_line();
        }
      }
    }
#line 125
    redirect[depth].width = (zword )((int )redirect[depth].width + width);
  }
#line 129
  addr = redirect[depth].table;
#line 131
  size = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 132
  addr = (zword )((int )addr + 2);
  {
#line 134
  while (1) {
    while_continue: /* CIL Label */ ;
#line 134
    tmp___2 = s;
#line 134
    s ++;
#line 134
    c = (zchar )*tmp___2;
#line 134
    if (! ((int )c != 0)) {
#line 134
      goto while_break;
    }
    {
#line 135
    tmp___0 = translate_to_zscii(c);
#line 135
    tmp___1 = size;
#line 135
    size = (zword )((int )size + 1);
#line 135
    storeb((zword )((int )addr + (int )tmp___1), tmp___0);
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 137
  storew(redirect[depth].table, size);
  }
#line 139
  return;
}
}
#line 148 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/redirect.c"
void memory_close(void) 
{ 


  {
#line 151
  if (depth >= 0) {
#line 153
    if ((int )redirect[depth].xsize != 65535) {
      {
#line 154
      memory_new_line();
      }
    }
#line 156
    if ((int )h_version == 6) {
#line 158
      if ((int )redirect[depth].xsize != 65535) {
#line 158
        h_line_width = redirect[depth].total;
      } else {
#line 158
        h_line_width = redirect[depth].width;
      }
#line 161
      *(zmp + 48) = (zbyte )((int )h_line_width >> 8);
#line 161
      *(zmp + 49) = (zbyte )((int )h_line_width & 255);
    }
#line 165
    if (depth == 0) {
#line 166
      ostream_memory = 0;
    }
#line 168
    depth --;
  }
#line 172
  return;
}
}
#line 362 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
int cwin ;
#line 363
int mwin ;
#line 368
bool enable_wrapping ;
#line 370
bool enable_scrolling ;
#line 569
extern void print_num(zword  ) ;
#line 570
extern void print_object(zword  ) ;
#line 586
extern int os_char_width(zchar  ) ;
#line 587
extern void os_display_char(zchar  ) ;
#line 588
extern void os_display_string(zchar const   * ) ;
#line 589
extern void os_draw_picture(int  , int  , int  ) ;
#line 590
extern void os_erase_area(int  , int  , int  , int  ) ;
#line 593
extern int os_font_data(int  , int * , int * ) ;
#line 595
extern void os_more_prompt(void) ;
#line 596
extern int os_peek_colour(void) ;
#line 597
extern int os_picture_data(int  , int * , int * ) ;
#line 602
extern zchar os_read_key(int  , int  ) ;
#line 603
extern zchar os_read_line(int  , zchar * , int  , int  , int  ) ;
#line 606
extern void os_scroll_area(int  , int  , int  , int  , int  ) ;
#line 607
extern void os_set_colour(int  , int  ) ;
#line 608
extern void os_set_cursor(int  , int  ) ;
#line 609
extern void os_set_font(int  ) ;
#line 610
extern void os_set_text_style(int  ) ;
#line 27 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static struct __anonstruct_mapper_41 mapper[7]  = {      {(enum story )2, 5, 497, 498}, 
        {(enum story )2, 6, 501, 502}, 
        {(enum story )2, 7, 499, 500}, 
        {(enum story )2, 8, 503, 504}, 
        {(enum story )4, 54, 170, 171}, 
        {(enum story )3, 50, 61, 62}, 
        {(enum story )7, 0, 0, 0}};
#line 42 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static int font_height  =    1;
#line 43 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static int font_width  =    1;
#line 45 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static bool input_redraw  =    0;
#line 46 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static bool more_prompts  =    1;
#line 47 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static bool discarding  =    0;
#line 48 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static bool cursor  =    1;
#line 50 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static int input_window  =    0;
#line 52 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static struct __anonstruct_wp_42 wp[8]  ;
#line 52 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static struct __anonstruct_wp_42 *cwp  ;
#line 80 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static zword winarg0(void) 
{ 
  int tmp ;

  {
#line 83
  if ((int )h_version == 6) {
#line 83
    if ((int )((short )zargs[0]) == -3) {
#line 84
      return ((zword )cwin);
    }
  }
#line 86
  if ((int )h_version == 6) {
#line 86
    tmp = 8;
  } else {
#line 86
    tmp = 2;
  }
#line 86
  if ((int )zargs[0] >= tmp) {
    {
#line 87
    runtime_error(16);
    }
  }
#line 89
  return (zargs[0]);
}
}
#line 102 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static zword winarg2(void) 
{ 


  {
#line 105
  if (zargc < 3) {
#line 106
    return ((zword )cwin);
  } else
#line 105
  if ((int )((short )zargs[2]) == -3) {
#line 106
    return ((zword )cwin);
  }
#line 108
  if ((int )zargs[2] >= 8) {
    {
#line 109
    runtime_error(16);
    }
  }
#line 111
  return (zargs[2]);
}
}
#line 122 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void update_cursor(void) 
{ 


  {
  {
#line 125
  os_set_cursor(((int )cwp->y_pos + (int )cwp->y_cursor) - 1, ((int )cwp->x_pos + (int )cwp->x_cursor) - 1);
  }
#line 129
  return;
}
}
#line 138 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void reset_cursor(zword win ) 
{ 
  int lines ;

  {
#line 140
  lines = 0;
#line 142
  if ((int )h_version <= 4) {
#line 142
    if ((int )win == 0) {
#line 143
      lines = (int )wp[0].y_size / ((int )wp[0].font_size >> 8) - 1;
    }
  }
#line 145
  wp[win].y_cursor = (zword )(((int )wp[0].font_size >> 8) * lines + 1);
#line 146
  wp[win].x_cursor = (zword )((int )wp[win].left + 1);
#line 148
  if ((int )win == cwin) {
    {
#line 149
    update_cursor();
    }
  }
#line 151
  return;
}
}
#line 160 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void set_more_prompts(bool flag___0 ) 
{ 


  {
#line 163
  if (flag___0) {
#line 163
    if (! more_prompts) {
#line 164
      cwp->line_count = (zword )0;
    }
  }
#line 166
  more_prompts = flag___0;
#line 168
  return;
}
}
#line 177 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static int units_left(void) 
{ 


  {
#line 180
  return ((((int )cwp->x_size - (int )cwp->right) - (int )cwp->x_cursor) + 1);
}
}
#line 192 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
zword get_max_width(zword win ) 
{ 


  {
#line 195
  if ((int )h_version == 6) {
#line 197
    if ((int )win >= 8) {
      {
#line 198
      runtime_error(16);
      }
    }
#line 200
    return ((zword )(((int )wp[win].x_size - (int )wp[win].left) - (int )wp[win].right));
  } else {
#line 202
    return ((zword )65535);
  }
}
}
#line 214 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void countdown(void) 
{ 


  {
#line 217
  if ((int )cwp->nl_countdown != 0) {
#line 218
    cwp->nl_countdown = (zword )((int )cwp->nl_countdown - 1);
#line 218
    if ((int )cwp->nl_countdown == 0) {
      {
#line 219
      direct_call(cwp->nl_routine);
      }
    }
  }
#line 221
  return;
}
}
#line 230 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_new_line(void) 
{ 
  zword y ;
  zword x ;
  zword above ;
  zword below ;

  {
#line 233
  if (discarding) {
#line 233
    return;
  }
#line 237
  if ((int )h_interpreter_number != 6) {
    {
#line 238
    countdown();
    }
  } else
#line 237
  if ((unsigned int )story_id != 2U) {
    {
#line 238
    countdown();
    }
  } else
#line 237
  if ((int )h_release != 393) {
    {
#line 238
    countdown();
    }
  }
#line 242
  if (input_window == cwin) {
#line 243
    input_redraw = 1;
  }
#line 249
  cwp->x_cursor = (zword )((int )cwp->left + 1);
#line 251
  if (((int )cwp->y_cursor + 2 * font_height) - 1 > (int )cwp->y_size) {
#line 253
    if (enable_scrolling) {
      {
#line 255
      y = cwp->y_pos;
#line 256
      x = cwp->x_pos;
#line 258
      os_scroll_area((int )y, (int )x, ((int )y + (int )cwp->y_size) - 1, ((int )x + (int )cwp->x_size) - 1,
                     font_height);
      }
    } else {
#line 264
      cwp->y_cursor = (zword )1;
    }
  } else {
#line 266
    cwp->y_cursor = (zword )((int )cwp->y_cursor + font_height);
  }
  {
#line 268
  update_cursor();
  }
#line 273
  if (enable_scrolling) {
#line 273
    if ((int )((short )cwp->line_count) != -999) {
#line 275
      above = (zword )(((int )cwp->y_cursor - 1) / font_height);
#line 276
      below = (zword )((((int )cwp->y_size - (int )cwp->y_cursor) + 1) / font_height);
#line 278
      cwp->line_count = (zword )((int )cwp->line_count + 1);
#line 280
      if ((int )((short )cwp->line_count) >= ((int )((short )above) + (int )below) - 1) {
#line 282
        if (more_prompts) {
          {
#line 283
          os_more_prompt();
          }
        }
#line 285
        cwp->line_count = (zword )f_setup.context_lines;
      }
    }
  }
#line 293
  if ((int )h_interpreter_number == 6) {
#line 293
    if ((unsigned int )story_id == 2U) {
#line 293
      if ((int )h_release == 393) {
        {
#line 294
        countdown();
        }
      }
    }
  }
#line 296
  return;
}
}
#line 305 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_char(zchar c ) 
{ 
  int width ;
  int tmp ;

  {
#line 309
  if (discarding) {
#line 309
    return;
  }
#line 311
  if ((int )c == 9) {
#line 311
    if ((int )cwp->x_cursor != (int )cwp->left + 1) {
#line 312
      c = (zchar )' ';
    }
  }
  {
#line 314
  tmp = units_left();
#line 314
  width = os_char_width(c);
  }
#line 314
  if (tmp < width) {
#line 316
    if (! enable_wrapping) {
#line 317
      cwp->x_cursor = (zword )((int )cwp->x_size - (int )cwp->right);
#line 317
      return;
    }
    {
#line 319
    screen_new_line();
    }
  }
  {
#line 323
  os_display_char(c);
#line 323
  cwp->x_cursor = (zword )((int )cwp->x_cursor + width);
  }
#line 325
  return;
}
}
#line 336 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_word(zchar const   *s ) 
{ 
  int width ;
  zchar const   *tmp ;
  zchar c ;
  int arg ;
  zchar const   *tmp___0 ;
  zchar const   *tmp___1 ;
  int tmp___2 ;

  {
#line 340
  if (discarding) {
#line 340
    return;
  }
#line 342
  if ((int const   )*s == 9) {
#line 342
    if ((int )cwp->x_cursor != (int )cwp->left + 1) {
      {
#line 343
      tmp = s;
#line 343
      s ++;
#line 343
      screen_char((zchar )*tmp);
      }
    }
  }
  {
#line 345
  tmp___2 = units_left();
#line 345
  width = os_string_width(s);
  }
#line 345
  if (tmp___2 < width) {
#line 347
    if (! enable_wrapping) {
      {
#line 351
      while (1) {
        while_continue: /* CIL Label */ ;
#line 351
        tmp___1 = s;
#line 351
        s ++;
#line 351
        c = (zchar )*tmp___1;
#line 351
        if (! ((int )c != 0)) {
#line 351
          goto while_break;
        }
#line 353
        if ((int )c == 2) {
#line 353
          goto _L;
        } else
#line 353
        if ((int )c == 1) {
          _L: /* CIL Label */ 
#line 355
          tmp___0 = s;
#line 355
          s ++;
#line 355
          arg = (int )*tmp___0;
#line 357
          if ((int )c == 2) {
            {
#line 358
            os_set_font(arg);
            }
          }
#line 359
          if ((int )c == 1) {
            {
#line 360
            os_set_text_style(arg);
            }
          }
        } else {
          {
#line 362
          screen_char(c);
          }
        }
      }
      while_break: /* CIL Label */ ;
      }
#line 364
      return;
    }
#line 368
    if ((int const   )*s == 32) {
      {
#line 369
      s ++;
#line 369
      width = os_string_width(s);
      }
    } else
#line 368
    if ((int const   )*s == 9) {
      {
#line 369
      s ++;
#line 369
      width = os_string_width(s);
      }
    } else
#line 368
    if ((int const   )*s == 11) {
      {
#line 369
      s ++;
#line 369
      width = os_string_width(s);
      }
    }
    {
#line 375
    screen_new_line();
    }
  }
  {
#line 379
  os_display_string(s);
#line 379
  cwp->x_cursor = (zword )((int )cwp->x_cursor + width);
  }
#line 381
  return;
}
}
#line 390 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_write_input(zchar const   *buf , zchar key ) 
{ 
  int width ;
  int tmp ;

  {
  {
#line 394
  tmp = units_left();
#line 394
  width = os_string_width(buf);
  }
#line 394
  if (tmp < width) {
    {
#line 395
    screen_new_line();
    }
  }
  {
#line 397
  os_display_string(buf);
#line 397
  cwp->x_cursor = (zword )((int )cwp->x_cursor + width);
  }
#line 399
  if ((int )key == 13) {
    {
#line 400
    screen_new_line();
    }
  }
#line 402
  return;
}
}
#line 413 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_erase_input(zchar const   *buf ) 
{ 
  int width ;
  int tmp ;
  zword y ;
  zword x ;

  {
#line 416
  if ((int const   )*(buf + 0) != 0) {
    {
#line 418
    tmp = os_string_width(buf);
#line 418
    width = tmp;
#line 423
    cwp->x_cursor = (zword )((int )cwp->x_cursor - width);
#line 425
    y = (zword )(((int )cwp->y_pos + (int )cwp->y_cursor) - 1);
#line 426
    x = (zword )(((int )cwp->x_pos + (int )cwp->x_cursor) - 1);
#line 428
    os_erase_area((int )y, (int )x, ((int )y + font_height) - 1, ((int )x + width) - 1);
#line 429
    os_set_cursor((int )y, (int )x);
    }
  }
#line 433
  return;
}
}
#line 442 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
zchar console_read_input(int max , zchar *buf , zword timeout , bool continued ) 
{ 
  zchar key ;
  int i ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
#line 449
  if (cwin == 0) {
    {
#line 449
    tmp = units_left();
#line 449
    tmp___0 = os_string_width((zchar const   *)buf);
    }
#line 449
    if (tmp + tmp___0 < 10 * font_width) {
      {
#line 450
      screen_new_line();
      }
    }
  }
#line 454
  if (continued) {
#line 454
    if (input_redraw) {
      {
#line 455
      screen_write_input((zchar const   *)buf, (zchar )-1);
      }
    }
  }
  {
#line 457
  input_window = cwin;
#line 458
  input_redraw = 0;
#line 462
  tmp___1 = os_string_width((zchar const   *)buf);
#line 462
  cwp->x_cursor = (zword )((int )cwp->x_cursor - tmp___1);
#line 463
  tmp___2 = units_left();
#line 463
  key = os_read_line(max, buf, (int )timeout, tmp___2, continued);
#line 464
  tmp___3 = os_string_width((zchar const   *)buf);
#line 464
  cwp->x_cursor = (zword )((int )cwp->x_cursor + tmp___3);
  }
#line 466
  if ((int )key != 0) {
#line 467
    i = 0;
    {
#line 467
    while (1) {
      while_continue: /* CIL Label */ ;
#line 467
      if (! (i < 8)) {
#line 467
        goto while_break;
      }
#line 468
      wp[i].line_count = (zword )0;
#line 467
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 472
  if ((int )key == 13) {
    {
#line 473
    screen_new_line();
    }
  }
#line 475
  return (key);
}
}
#line 486 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
zchar console_read_key(zword timeout ) 
{ 
  zchar key ;
  int i ;

  {
  {
#line 491
  key = os_read_key((int )timeout, cursor);
  }
#line 493
  if ((int )key != 0) {
#line 494
    i = 0;
    {
#line 494
    while (1) {
      while_continue: /* CIL Label */ ;
#line 494
      if (! (i < 8)) {
#line 494
        goto while_break;
      }
#line 495
      wp[i].line_count = (zword )0;
#line 494
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 497
  return (key);
}
}
#line 509 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void update_attributes(void) 
{ 
  zword attr ;

  {
#line 511
  attr = cwp->attribute;
#line 513
  enable_wrapping = (int )attr & 1;
#line 514
  enable_scrolling = (int )attr & 2;
#line 515
  enable_scripting = (int )attr & 4;
#line 516
  enable_buffering = (int )attr & 8;
#line 520
  if ((unsigned int )story_id == 2U) {
#line 520
    if ((int )h_release == 366) {
#line 521
      if (cwin == 0) {
#line 522
        enable_wrapping = 1;
      }
    }
  }
#line 523
  if ((unsigned int )story_id == 3U) {
#line 523
    if ((int )h_release <= 295) {
#line 524
      if (cwin == 0) {
#line 525
        enable_wrapping = 1;
      }
    }
  }
#line 527
  return;
}
}
#line 538 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void refresh_text_style(void) 
{ 
  zword style ;

  {
#line 542
  if ((int )h_version != 6) {
#line 544
    style = wp[0].style;
#line 546
    if (cwin != 0) {
#line 547
      style = (zword )((int )style | 8);
    } else
#line 546
    if ((int )h_flags & 2) {
#line 547
      style = (zword )((int )style | 8);
    }
  } else {
#line 549
    style = cwp->style;
  }
#line 551
  if (! ostream_memory) {
#line 551
    if (ostream_screen) {
#line 551
      if (enable_buffering) {
        {
#line 553
        print_char((zchar )1);
#line 554
        print_char((zchar )style);
        }
      } else {
        {
#line 556
        os_set_text_style((int )style);
        }
      }
    } else {
      {
#line 556
      os_set_text_style((int )style);
      }
    }
  } else {
    {
#line 556
    os_set_text_style((int )style);
    }
  }
#line 558
  return;
}
}
#line 568 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void set_window(zword win ) 
{ 
  int tmp ;

  {
  {
#line 571
  flush_buffer();
#line 573
  cwin = (int )win;
#line 573
  cwp = wp + (int )win;
#line 575
  update_attributes();
  }
#line 577
  if ((int )h_version == 6) {
    {
#line 579
    os_set_colour((int )cwp->colour & 255, (int )cwp->colour >> 8);
#line 581
    tmp = os_font_data((int )cwp->font, & font_height, & font_width);
    }
#line 581
    if (tmp) {
      {
#line 582
      os_set_font((int )cwp->font);
      }
    }
    {
#line 584
    os_set_text_style((int )cwp->style);
    }
  } else {
    {
#line 586
    refresh_text_style();
    }
  }
#line 588
  if ((int )h_version != 6) {
#line 588
    if ((int )win != 0) {
#line 589
      wp[win].y_cursor = (zword )1;
#line 590
      wp[win].x_cursor = (zword )1;
    }
  }
  {
#line 593
  update_cursor();
  }
#line 595
  return;
}
}
#line 604 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void erase_window(zword win ) 
{ 
  zword y ;
  zword x ;

  {
#line 606
  y = wp[win].y_pos;
#line 607
  x = wp[win].x_pos;
#line 609
  if ((int )h_version == 6) {
#line 609
    if ((int )win != cwin) {
#line 609
      if ((int )h_interpreter_number != 4) {
        {
#line 610
        os_set_colour((int )wp[win].colour & 255, (int )wp[win].colour >> 8);
        }
      }
    }
  }
  {
#line 612
  os_erase_area((int )y, (int )x, ((int )y + (int )wp[win].y_size) - 1, ((int )x + (int )wp[win].x_size) - 1);
  }
#line 617
  if ((int )h_version == 6) {
#line 617
    if ((int )win != cwin) {
#line 617
      if ((int )h_interpreter_number != 4) {
        {
#line 618
        os_set_colour((int )cwp->colour & 255, (int )cwp->colour >> 8);
        }
      }
    }
  }
  {
#line 620
  reset_cursor(win);
#line 622
  wp[win].line_count = (zword )0;
  }
#line 624
  return;
}
}
#line 634 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void split_window(zword height ) 
{ 
  zword stat_height ;

  {
  {
#line 636
  stat_height = (zword )0;
#line 638
  flush_buffer();
  }
#line 642
  if ((int )h_version != 6) {
#line 643
    height = (zword )((int )height * ((int )wp[1].font_size >> 8));
  }
#line 645
  if ((int )h_version <= 3) {
#line 646
    stat_height = (zword )((int )wp[7].font_size >> 8);
  }
#line 650
  wp[1].y_cursor = (zword )((int )wp[1].y_cursor + (((int )wp[1].y_pos - 1) - (int )stat_height));
#line 652
  wp[1].y_pos = (zword )(1 + (int )stat_height);
#line 653
  wp[1].y_size = height;
#line 655
  if ((int )((short )wp[1].y_cursor) > (int )((short )wp[1].y_size)) {
    {
#line 656
    reset_cursor((zword )1);
    }
  }
#line 660
  wp[0].y_cursor = (zword )((int )wp[0].y_cursor + ((((int )wp[0].y_pos - 1) - (int )stat_height) - (int )height));
#line 662
  wp[0].y_pos = (zword )((1 + (int )stat_height) + (int )height);
#line 663
  wp[0].y_size = (zword )(((int )h_screen_height - (int )stat_height) - (int )height);
#line 665
  if ((int )((short )wp[0].y_cursor) < 1) {
    {
#line 666
    reset_cursor((zword )0);
    }
  }
#line 670
  if ((int )h_version == 3) {
#line 670
    if ((int )height != 0) {
      {
#line 671
      erase_window((zword )1);
      }
    }
  }
#line 673
  return;
}
}
#line 682 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void erase_screen(zword win ) 
{ 
  int i ;

  {
  {
#line 686
  os_erase_area(1, 1, (int )h_screen_height, (int )h_screen_width);
  }
#line 688
  if ((int )((short )win) == -1) {
    {
#line 689
    split_window((zword )0);
#line 690
    set_window((zword )0);
#line 691
    reset_cursor((zword )0);
    }
  }
#line 694
  i = 0;
  {
#line 694
  while (1) {
    while_continue: /* CIL Label */ ;
#line 694
    if (! (i < 8)) {
#line 694
      goto while_break;
    }
#line 695
    wp[i].line_count = (zword )0;
#line 694
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 697
  return;
}
}
#line 708 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void resize_screen(void) 
{ 


  {
#line 711
  if ((int )h_version != 6) {
#line 713
    wp[0].x_size = h_screen_width;
#line 714
    wp[1].x_size = h_screen_width;
#line 715
    wp[7].x_size = h_screen_width;
#line 717
    wp[0].y_size = (zword )(((int )h_screen_height - (int )wp[1].y_size) - (int )wp[7].y_size);
  }
#line 721
  return;
}
}
#line 732 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void restart_screen(void) 
{ 
  int tmp ;

  {
  {
#line 737
  os_set_colour((int )h_default_foreground, (int )h_default_background);
#line 739
  tmp = os_font_data(1, & font_height, & font_width);
  }
#line 739
  if (tmp) {
    {
#line 740
    os_set_font(1);
    }
  }
  {
#line 742
  os_set_text_style(0);
#line 744
  cursor = 1;
#line 748
  mwin = 1;
#line 750
  cwp = wp;
  }
  {
#line 750
  while (1) {
    while_continue: /* CIL Label */ ;
#line 750
    if (! ((unsigned long )cwp < (unsigned long )(wp + 8))) {
#line 750
      goto while_break;
    }
#line 751
    cwp->y_pos = (zword )1;
#line 752
    cwp->x_pos = (zword )1;
#line 753
    cwp->y_size = (zword )0;
#line 754
    cwp->x_size = (zword )0;
#line 755
    cwp->y_cursor = (zword )1;
#line 756
    cwp->x_cursor = (zword )1;
#line 757
    cwp->left = (zword )0;
#line 758
    cwp->right = (zword )0;
#line 759
    cwp->nl_routine = (zword )0;
#line 760
    cwp->nl_countdown = (zword )0;
#line 761
    cwp->style = (zword )0;
#line 762
    cwp->colour = (zword )(((int )h_default_background << 8) | (int )h_default_foreground);
#line 763
    cwp->font = (zword )1;
#line 764
    cwp->font_size = (zword )((font_height << 8) | font_width);
#line 765
    cwp->attribute = (zword )8;
#line 750
    cwp ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 770
  wp[0].attribute = (zword )15;
#line 772
  wp[0].left = (zword )f_setup.left_margin;
#line 773
  wp[0].right = (zword )f_setup.right_margin;
#line 775
  wp[0].x_size = h_screen_width;
#line 776
  wp[1].x_size = h_screen_width;
#line 778
  if ((int )h_version <= 3) {
#line 779
    wp[7].x_size = h_screen_width;
  }
  {
#line 781
  os_restart_game(1);
#line 785
  erase_screen((zword )-1);
  }
#line 787
  return;
}
}
#line 798 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
bool validate_click(void) 
{ 


  {
#line 801
  if (mwin >= 0) {
#line 803
    if (mouse_y < (int )wp[mwin].y_pos) {
#line 804
      return (0);
    } else
#line 803
    if (mouse_y >= (int )wp[mwin].y_pos + (int )wp[mwin].y_size) {
#line 804
      return (0);
    }
#line 805
    if (mouse_x < (int )wp[mwin].x_pos) {
#line 806
      return (0);
    } else
#line 805
    if (mouse_x >= (int )wp[mwin].x_pos + (int )wp[mwin].x_size) {
#line 806
      return (0);
    }
#line 808
    hx_mouse_y = (zword )((mouse_y - (int )wp[mwin].y_pos) + 1);
#line 809
    hx_mouse_x = (zword )((mouse_x - (int )wp[mwin].x_pos) + 1);
  } else {
#line 813
    if (mouse_y < 1) {
#line 814
      return (0);
    } else
#line 813
    if (mouse_y > (int )h_screen_height) {
#line 814
      return (0);
    }
#line 815
    if (mouse_x < 1) {
#line 816
      return (0);
    } else
#line 815
    if (mouse_x > (int )h_screen_width) {
#line 816
      return (0);
    }
#line 818
    hx_mouse_y = (zword )mouse_y;
#line 819
    hx_mouse_x = (zword )mouse_x;
  }
#line 823
  if ((int )h_version != 6) {
#line 824
    hx_mouse_y = (zword )(((int )hx_mouse_y - 1) / (int )h_font_height + 1);
#line 825
    hx_mouse_x = (zword )(((int )hx_mouse_x - 1) / (int )h_font_width + 1);
  }
  {
#line 828
  set_header_extension(2, hx_mouse_y);
#line 829
  set_header_extension(1, hx_mouse_x);
  }
#line 831
  return (1);
}
}
#line 844 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_mssg_on(void) 
{ 


  {
#line 847
  if (cwin == 0) {
    {
#line 849
    os_set_text_style(0);
    }
#line 851
    if ((int )cwp->x_cursor != (int )cwp->left + 1) {
      {
#line 852
      screen_new_line();
      }
    }
    {
#line 854
    screen_char((zchar )9);
    }
  } else {
#line 856
    discarding = 1;
  }
#line 858
  return;
}
}
#line 867 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void screen_mssg_off(void) 
{ 


  {
#line 870
  if (cwin == 0) {
    {
#line 872
    screen_new_line();
#line 874
    refresh_text_style();
    }
  } else {
#line 876
    discarding = 0;
  }
#line 878
  return;
}
}
#line 887 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_buffer_mode(void) 
{ 


  {
#line 897
  if ((int )h_version != 6) {
    {
#line 899
    flush_buffer();
#line 901
    wp[0].attribute = (zword )((int )wp[0].attribute & -9);
    }
#line 903
    if ((int )zargs[0] != 0) {
#line 904
      wp[0].attribute = (zword )((int )wp[0].attribute | 8);
    }
    {
#line 906
    update_attributes();
    }
  }
#line 910
  return;
}
}
#line 921 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_draw_picture(void) 
{ 
  zword pic ;
  zword y ;
  zword x ;
  int i ;
  int height1 ;
  int width1 ;
  int height2 ;
  int width2 ;
  int delta ;
  int height ;
  int width ;

  {
  {
#line 923
  pic = zargs[0];
#line 925
  y = zargs[1];
#line 926
  x = zargs[2];
#line 930
  flush_buffer();
  }
#line 932
  if ((int )y == 0) {
#line 933
    y = cwp->y_cursor;
  }
#line 934
  if ((int )x == 0) {
#line 935
    x = cwp->x_cursor;
  }
#line 937
  y = (zword )((int )y + ((int )cwp->y_pos - 1));
#line 938
  x = (zword )((int )x + ((int )cwp->x_pos - 1));
#line 946
  i = 0;
  {
#line 946
  while (1) {
    while_continue: /* CIL Label */ ;
#line 946
    if (! ((unsigned int )mapper[i].story_id != 7U)) {
#line 946
      goto while_break;
    }
#line 948
    if ((unsigned int )story_id == (unsigned int )mapper[i].story_id) {
#line 948
      if ((int )pic == mapper[i].pic) {
        {
#line 953
        delta = 0;
#line 955
        os_picture_data((int )pic, & height1, & width1);
#line 956
        os_picture_data(mapper[i].pic2, & height2, & width2);
        }
#line 958
        if ((unsigned int )story_id == 4U) {
#line 958
          if ((int )pic == 54) {
#line 959
            delta = (int )h_screen_width / 160;
          }
        }
        {
#line 961
        os_draw_picture(mapper[i].pic1, (int )y + height1, (int )x + delta);
#line 962
        os_draw_picture(mapper[i].pic2, (int )y + height1, (((int )x + width1) - width2) - delta);
        }
      }
    }
#line 946
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 966
  os_draw_picture((int )pic, (int )y, (int )x);
  }
#line 968
  if ((unsigned int )story_id == 3U) {
#line 970
    if ((int )pic == 3) {
      {
#line 974
      os_picture_data(59, & height, & width);
#line 975
      os_draw_picture(59, (int )y, ((int )h_screen_width - width) + 1);
      }
    }
  }
#line 979
  return;
}
}
#line 988 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_erase_line(void) 
{ 
  zword pixels ;
  zword y ;
  zword x ;
  int tmp ;
  int tmp___0 ;

  {
  {
#line 990
  pixels = zargs[0];
#line 993
  flush_buffer();
#line 997
  pixels = (zword )((int )pixels - 1);
  }
#line 997
  if ((int )pixels == 0) {
    {
#line 998
    tmp = units_left();
#line 998
    pixels = (zword )tmp;
    }
  } else {
    {
#line 997
    tmp___0 = units_left();
    }
#line 997
    if ((int )pixels > tmp___0) {
      {
#line 998
      tmp = units_left();
#line 998
      pixels = (zword )tmp;
      }
    }
  }
  {
#line 1002
  y = (zword )(((int )cwp->y_pos + (int )cwp->y_cursor) - 1);
#line 1003
  x = (zword )(((int )cwp->x_pos + (int )cwp->x_cursor) - 1);
#line 1005
  os_erase_area((int )y, (int )x, ((int )y + font_height) - 1, ((int )x + (int )pixels) - 1);
  }
#line 1007
  return;
}
}
#line 1018 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_erase_picture(void) 
{ 
  int height ;
  int width ;
  zword y ;
  zword x ;

  {
  {
#line 1022
  y = zargs[1];
#line 1023
  x = zargs[2];
#line 1025
  flush_buffer();
  }
#line 1027
  if ((int )y == 0) {
#line 1028
    y = cwp->y_cursor;
  }
#line 1029
  if ((int )x == 0) {
#line 1030
    x = cwp->x_cursor;
  }
  {
#line 1032
  os_picture_data((int )zargs[0], & height, & width);
#line 1034
  y = (zword )((int )y + ((int )cwp->y_pos - 1));
#line 1035
  x = (zword )((int )x + ((int )cwp->x_pos - 1));
#line 1037
  os_erase_area((int )y, (int )x, ((int )y + height) - 1, ((int )x + width) - 1);
  }
#line 1039
  return;
}
}
#line 1048 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_erase_window(void) 
{ 
  zword tmp ;

  {
  {
#line 1051
  flush_buffer();
  }
#line 1053
  if ((int )((short )zargs[0]) == -1) {
    {
#line 1054
    erase_screen(zargs[0]);
    }
  } else
#line 1053
  if ((int )((short )zargs[0]) == -2) {
    {
#line 1054
    erase_screen(zargs[0]);
    }
  } else {
    {
#line 1056
    tmp = winarg0();
#line 1056
    erase_window(tmp);
    }
  }
#line 1058
  return;
}
}
#line 1067 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_get_cursor(void) 
{ 
  zword y ;
  zword x ;

  {
  {
#line 1071
  flush_buffer();
#line 1073
  y = cwp->y_cursor;
#line 1074
  x = cwp->x_cursor;
  }
#line 1076
  if ((int )h_version != 6) {
#line 1077
    y = (zword )(((int )y - 1) / (int )h_font_height + 1);
#line 1078
    x = (zword )(((int )x - 1) / (int )h_font_width + 1);
  }
  {
#line 1081
  storew((zword )((int )zargs[0]), y);
#line 1082
  storew((zword )((int )zargs[0] + 2), x);
  }
#line 1084
  return;
}
}
#line 1094 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_get_wind_prop(void) 
{ 
  zword tmp ;

  {
  {
#line 1097
  flush_buffer();
  }
#line 1099
  if ((int )zargs[1] >= 16) {
    {
#line 1100
    runtime_error(17);
    }
  }
  {
#line 1102
  tmp = winarg0();
#line 1102
  store(*((zword *)(wp + (int )tmp) + zargs[1]));
  }
#line 1104
  return;
}
}
#line 1113 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_mouse_window(void) 
{ 
  zword tmp ;

  {
#line 1116
  if ((int )((short )zargs[0]) == -1) {
#line 1116
    mwin = -1;
  } else {
    {
#line 1116
    tmp = winarg0();
#line 1116
    mwin = (int )tmp;
    }
  }
#line 1118
  return;
}
}
#line 1129 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_move_window(void) 
{ 
  zword win ;
  zword tmp ;

  {
  {
#line 1131
  tmp = winarg0();
#line 1131
  win = tmp;
#line 1133
  flush_buffer();
#line 1135
  wp[win].y_pos = zargs[1];
#line 1136
  wp[win].x_pos = zargs[2];
  }
#line 1138
  if ((int )win == cwin) {
    {
#line 1139
    update_cursor();
    }
  }
#line 1141
  return;
}
}
#line 1151 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_picture_data(void) 
{ 
  zword pic ;
  zword table ;
  int height ;
  int width ;
  int i ;
  bool avail ;
  int tmp ;
  int height2 ;
  int width2 ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 1153
  pic = zargs[0];
#line 1154
  table = zargs[1];
#line 1159
  tmp = os_picture_data((int )pic, & height, & width);
#line 1159
  avail = tmp;
#line 1161
  i = 0;
  }
  {
#line 1161
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1161
    if (! ((unsigned int )mapper[i].story_id != 7U)) {
#line 1161
      goto while_break;
    }
#line 1163
    if ((unsigned int )story_id == (unsigned int )mapper[i].story_id) {
#line 1165
      if ((int )pic == mapper[i].pic) {
        {
#line 1169
        tmp___0 = os_picture_data(mapper[i].pic1, & height2, & width2);
#line 1169
        avail &= tmp___0;
#line 1170
        tmp___1 = os_picture_data(mapper[i].pic2, & height2, & width2);
#line 1170
        avail &= tmp___1;
#line 1172
        height += height2;
        }
      } else
#line 1174
      if ((int )pic == mapper[i].pic1) {
#line 1176
        avail = 0;
      } else
#line 1174
      if ((int )pic == mapper[i].pic2) {
#line 1176
        avail = 0;
      }
    }
#line 1161
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1179
  storew((zword )((int )table), (zword )height);
#line 1180
  storew((zword )((int )table + 2), (zword )width);
#line 1182
  branch(avail);
  }
#line 1184
  return;
}
}
#line 1193 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_picture_table(void) 
{ 


  {
#line 1201
  return;
}
}
#line 1213 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_print_table(void) 
{ 
  zword addr ;
  zword x ;
  int i ;
  int j ;
  zbyte c ;

  {
  {
#line 1215
  addr = zargs[0];
#line 1219
  flush_buffer();
  }
#line 1223
  if (zargc < 3) {
#line 1224
    zargs[2] = (zword )1;
  }
#line 1225
  if (zargc < 4) {
#line 1226
    zargs[3] = (zword )0;
  }
#line 1230
  x = cwp->x_cursor;
#line 1232
  i = 0;
  {
#line 1232
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1232
    if (! (i < (int )zargs[2])) {
#line 1232
      goto while_break;
    }
#line 1234
    if (i != 0) {
      {
#line 1236
      flush_buffer();
#line 1238
      cwp->y_cursor = (zword )((int )cwp->y_cursor + font_height);
#line 1239
      cwp->x_cursor = x;
#line 1241
      update_cursor();
      }
    }
#line 1245
    j = 0;
    {
#line 1245
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 1245
      if (! (j < (int )zargs[1])) {
#line 1245
        goto while_break___0;
      }
      {
#line 1249
      c = *(zmp + addr);
#line 1250
      addr = (zword )((int )addr + 1);
#line 1252
      print_char(c);
#line 1245
      j ++;
      }
    }
    while_break___0: /* CIL Label */ ;
    }
#line 1256
    addr = (zword )((int )addr + (int )zargs[3]);
#line 1232
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1260
  return;
}
}
#line 1271 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_put_wind_prop(void) 
{ 
  zword tmp ;

  {
  {
#line 1274
  flush_buffer();
  }
#line 1276
  if ((int )zargs[1] >= 16) {
    {
#line 1277
    runtime_error(17);
    }
  }
  {
#line 1279
  tmp = winarg0();
#line 1279
  *((zword *)(wp + (int )tmp) + zargs[1]) = zargs[2];
  }
#line 1281
  return;
}
}
#line 1291 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_scroll_window(void) 
{ 
  zword win ;
  zword tmp ;
  zword y ;
  zword x ;

  {
  {
#line 1293
  tmp = winarg0();
#line 1293
  win = tmp;
#line 1296
  flush_buffer();
  }
#line 1300
  if ((int )win != cwin) {
#line 1300
    if ((int )h_interpreter_number != 4) {
      {
#line 1301
      os_set_colour((int )wp[win].colour & 255, (int )wp[win].colour >> 8);
      }
    }
  }
  {
#line 1303
  y = wp[win].y_pos;
#line 1304
  x = wp[win].x_pos;
#line 1306
  os_scroll_area((int )y, (int )x, ((int )y + (int )wp[win].y_size) - 1, ((int )x + (int )wp[win].x_size) - 1,
                 (int )((short )zargs[1]));
  }
#line 1312
  if ((int )win != cwin) {
#line 1312
    if ((int )h_interpreter_number != 4) {
      {
#line 1313
      os_set_colour((int )cwp->colour & 255, (int )cwp->colour >> 8);
      }
    }
  }
#line 1315
  return;
}
}
#line 1326 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_colour(void) 
{ 
  zword win ;
  zword tmp ;
  int tmp___0 ;
  zword fg ;
  zword bg ;
  int tmp___1 ;
  int tmp___2 ;
  int i ;
  zword bg2 ;
  zword fg2 ;

  {
#line 1328
  if ((int )h_version == 6) {
    {
#line 1328
    tmp = winarg2();
#line 1328
    tmp___0 = (int )tmp;
    }
  } else {
#line 1328
    tmp___0 = 0;
  }
  {
#line 1328
  win = (zword )tmp___0;
#line 1330
  fg = zargs[0];
#line 1331
  bg = zargs[1];
#line 1333
  flush_buffer();
  }
#line 1335
  if ((int )((short )fg) == -1) {
    {
#line 1336
    tmp___1 = os_peek_colour();
#line 1336
    fg = (zword )tmp___1;
    }
  }
#line 1337
  if ((int )((short )bg) == -1) {
    {
#line 1338
    tmp___2 = os_peek_colour();
#line 1338
    bg = (zword )tmp___2;
    }
  }
#line 1340
  if ((int )fg == 0) {
#line 1341
    fg = (zword )((int )wp[win].colour & 255);
  }
#line 1342
  if ((int )bg == 0) {
#line 1343
    bg = (zword )((int )wp[win].colour >> 8);
  }
#line 1345
  if ((int )fg == 1) {
#line 1346
    fg = (zword )h_default_foreground;
  }
#line 1347
  if ((int )bg == 1) {
#line 1348
    bg = (zword )h_default_background;
  }
#line 1350
  if ((int )h_version == 6) {
#line 1350
    if ((int )h_interpreter_number == 4) {
#line 1354
      if ((int )win == 0) {
#line 1358
        i = 1;
        {
#line 1358
        while (1) {
          while_continue: /* CIL Label */ ;
#line 1358
          if (! (i < 8)) {
#line 1358
            goto while_break;
          }
#line 1360
          bg2 = (zword )((int )wp[i].colour >> 8);
#line 1361
          fg2 = (zword )((int )wp[i].colour & 255);
#line 1363
          if ((int )bg2 < 16) {
#line 1364
            if ((int )bg2 == ((int )wp[0].colour & 255)) {
#line 1364
              bg2 = fg;
            } else {
#line 1364
              bg2 = bg;
            }
          }
#line 1365
          if ((int )fg2 < 16) {
#line 1366
            if ((int )fg2 == ((int )wp[0].colour & 255)) {
#line 1366
              fg2 = fg;
            } else {
#line 1366
              fg2 = bg;
            }
          }
#line 1368
          wp[i].colour = (zword )(((int )bg2 << 8) | (int )fg2);
#line 1358
          i ++;
        }
        while_break: /* CIL Label */ ;
        }
      }
    }
  }
#line 1374
  wp[win].colour = (zword )(((int )bg << 8) | (int )fg);
#line 1376
  if ((int )win == cwin) {
    {
#line 1377
    os_set_colour((int )fg, (int )bg);
    }
  } else
#line 1376
  if ((int )h_version != 6) {
    {
#line 1377
    os_set_colour((int )fg, (int )bg);
    }
  }
#line 1379
  return;
}
}
#line 1388 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_font(void) 
{ 
  zword win ;
  int tmp ;
  zword font ;
  int tmp___0 ;

  {
#line 1390
  if ((int )h_version == 6) {
#line 1390
    tmp = cwin;
  } else {
#line 1390
    tmp = 0;
  }
#line 1390
  win = (zword )tmp;
#line 1391
  font = zargs[0];
#line 1393
  if ((int )font != 0) {
    {
#line 1395
    tmp___0 = os_font_data((int )font, & font_height, & font_width);
    }
#line 1395
    if (tmp___0) {
      {
#line 1397
      store(wp[win].font);
#line 1399
      wp[win].font = font;
#line 1400
      wp[win].font_size = (zword )((font_height << 8) | font_width);
      }
#line 1402
      if (! ostream_memory) {
#line 1402
        if (ostream_screen) {
#line 1402
          if (enable_buffering) {
            {
#line 1404
            print_char((zchar )2);
#line 1405
            print_char((zchar )font);
            }
          } else {
            {
#line 1407
            os_set_font((int )font);
            }
          }
        } else {
          {
#line 1407
          os_set_font((int )font);
          }
        }
      } else {
        {
#line 1407
        os_set_font((int )font);
        }
      }
    } else {
      {
#line 1409
      store((zword )0);
      }
    }
  } else {
    {
#line 1411
    store(wp[win].font);
    }
  }
#line 1413
  return;
}
}
#line 1424 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_cursor(void) 
{ 
  zword win ;
  zword tmp ;
  int tmp___0 ;
  zword y ;
  zword x ;

  {
#line 1426
  if ((int )h_version == 6) {
    {
#line 1426
    tmp = winarg2();
#line 1426
    tmp___0 = (int )tmp;
    }
  } else {
#line 1426
    tmp___0 = 1;
  }
  {
#line 1426
  win = (zword )tmp___0;
#line 1428
  y = zargs[0];
#line 1429
  x = zargs[1];
#line 1431
  flush_buffer();
  }
#line 1435
  if (zargc < 3) {
#line 1436
    zargs[2] = (zword )-3;
  }
#line 1440
  if ((int )((short )y) < 0) {
#line 1442
    if ((int )((short )y) == -2) {
#line 1443
      cursor = 1;
    }
#line 1444
    if ((int )((short )y) == -1) {
#line 1445
      cursor = 0;
    }
#line 1447
    return;
  }
#line 1453
  if ((int )h_version != 6) {
#line 1455
    if (cwin == 0) {
#line 1456
      return;
    }
#line 1458
    y = (zword )(((int )y - 1) * (int )h_font_height + 1);
#line 1459
    x = (zword )(((int )x - 1) * (int )h_font_width + 1);
  }
#line 1465
  if ((int )y == 0) {
#line 1466
    y = wp[win].y_cursor;
  }
#line 1467
  if ((int )x == 0) {
#line 1468
    x = wp[win].x_cursor;
  }
#line 1469
  if ((int )x <= (int )wp[win].left) {
#line 1470
    x = (zword )((int )wp[win].left + 1);
  } else
#line 1469
  if ((int )x > (int )wp[win].x_size - (int )wp[win].right) {
#line 1470
    x = (zword )((int )wp[win].left + 1);
  }
#line 1474
  wp[win].y_cursor = y;
#line 1475
  wp[win].x_cursor = x;
#line 1477
  if ((int )win == cwin) {
    {
#line 1478
    update_cursor();
    }
  }
#line 1480
  return;
}
}
#line 1491 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_margins(void) 
{ 
  zword win ;
  zword tmp ;

  {
  {
#line 1493
  tmp = winarg2();
#line 1493
  win = tmp;
#line 1495
  flush_buffer();
#line 1497
  wp[win].left = zargs[0];
#line 1498
  wp[win].right = zargs[1];
  }
#line 1502
  if ((int )wp[win].x_cursor <= (int )zargs[0]) {
#line 1502
    goto _L;
  } else
#line 1502
  if ((int )wp[win].x_cursor > (int )wp[win].x_size - (int )zargs[1]) {
    _L: /* CIL Label */ 
#line 1504
    wp[win].x_cursor = (zword )((int )zargs[0] + 1);
#line 1506
    if ((int )win == cwin) {
      {
#line 1507
      update_cursor();
      }
    }
  }
#line 1511
  return;
}
}
#line 1520 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_text_style(void) 
{ 
  zword win ;
  int tmp ;
  zword style ;

  {
#line 1522
  if ((int )h_version == 6) {
#line 1522
    tmp = cwin;
  } else {
#line 1522
    tmp = 0;
  }
#line 1522
  win = (zword )tmp;
#line 1523
  style = zargs[0];
#line 1525
  wp[win].style = (zword )((int )wp[win].style | (int )style);
#line 1527
  if ((int )style == 0) {
#line 1528
    wp[win].style = (zword )0;
  }
  {
#line 1530
  refresh_text_style();
  }
#line 1532
  return;
}
}
#line 1541 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_set_window(void) 
{ 
  zword tmp ;

  {
  {
#line 1544
  tmp = winarg0();
#line 1544
  set_window(tmp);
  }
#line 1546
  return;
}
}
#line 1555 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
static void pad_status_line(int column ) 
{ 
  int spaces ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
  {
#line 1559
  flush_buffer();
#line 1561
  tmp = units_left();
#line 1561
  tmp___0 = os_char_width((zchar )' ');
#line 1561
  spaces = tmp / tmp___0 - column;
  }
  {
#line 1565
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1565
    tmp___1 = spaces;
#line 1565
    spaces --;
#line 1565
    if (! (tmp___1 > 0)) {
#line 1565
      goto while_break;
    }
    {
#line 1566
    screen_char((zchar )' ');
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 1568
  return;
}
}
#line 1577 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_show_status(void) 
{ 
  zword global0 ;
  zword global1 ;
  zword global2 ;
  zword addr ;
  bool brief ;
  zword hours ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  char const   *tmp___2 ;
  int tmp___3 ;
  char const   *tmp___4 ;

  {
#line 1584
  brief = 0;
#line 1589
  if ((int )h_version >= 4) {
#line 1590
    return;
  }
  {
#line 1595
  addr = h_globals;
#line 1596
  global0 = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 1597
  addr = (zword )((int )addr + 2);
#line 1598
  global1 = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 1599
  addr = (zword )((int )addr + 2);
#line 1600
  global2 = (zword )(((int )((zword )*(zmp + addr)) << 8) | (int )*(zmp + ((int )addr + 1)));
#line 1605
  set_window((zword )7);
#line 1607
  print_char((zchar )1);
#line 1608
  print_char((zchar )9);
  }
#line 1613
  if ((int )h_screen_cols < 55) {
#line 1614
    brief = 1;
  }
  {
#line 1618
  print_char((zchar )' ');
#line 1619
  print_object(global0);
  }
#line 1624
  if ((int )h_config & 2) {
#line 1626
    hours = (zword )(((int )global1 + 11) % 12 + 1);
#line 1628
    if (brief) {
#line 1628
      tmp = 15;
    } else {
#line 1628
      tmp = 20;
    }
    {
#line 1628
    pad_status_line(tmp);
#line 1630
    print_string("Time: ");
    }
#line 1632
    if ((int )hours < 10) {
      {
#line 1633
      print_char((zchar )' ');
      }
    }
    {
#line 1634
    print_num(hours);
#line 1636
    print_char((zchar )':');
    }
#line 1638
    if ((int )global2 < 10) {
      {
#line 1639
      print_char((zchar )'0');
      }
    }
    {
#line 1640
    print_num(global2);
#line 1642
    print_char((zchar )' ');
    }
#line 1644
    if ((int )global1 >= 12) {
#line 1644
      tmp___0 = 'p';
    } else {
#line 1644
      tmp___0 = 'a';
    }
    {
#line 1644
    print_char((zchar )tmp___0);
#line 1645
    print_char((zchar )'m');
    }
  } else {
#line 1649
    if (brief) {
#line 1649
      tmp___1 = 15;
    } else {
#line 1649
      tmp___1 = 30;
    }
    {
#line 1649
    pad_status_line(tmp___1);
    }
#line 1651
    if (brief) {
#line 1651
      tmp___2 = "S: ";
    } else {
#line 1651
      tmp___2 = "Score: ";
    }
    {
#line 1651
    print_string(tmp___2);
#line 1652
    print_num(global1);
    }
#line 1654
    if (brief) {
#line 1654
      tmp___3 = 8;
    } else {
#line 1654
      tmp___3 = 14;
    }
    {
#line 1654
    pad_status_line(tmp___3);
    }
#line 1656
    if (brief) {
#line 1656
      tmp___4 = "M: ";
    } else {
#line 1656
      tmp___4 = "Moves: ";
    }
    {
#line 1656
    print_string(tmp___4);
#line 1657
    print_num(global2);
    }
  }
  {
#line 1663
  pad_status_line(0);
#line 1667
  set_window((zword )0);
  }
#line 1669
  return;
}
}
#line 1678 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_split_window(void) 
{ 


  {
  {
#line 1681
  split_window(zargs[0]);
  }
#line 1683
  return;
}
}
#line 1694 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_window_size(void) 
{ 
  zword win ;
  zword tmp ;

  {
  {
#line 1696
  tmp = winarg0();
#line 1696
  win = tmp;
#line 1698
  flush_buffer();
#line 1700
  wp[win].y_size = zargs[1];
#line 1701
  wp[win].x_size = zargs[2];
  }
#line 1705
  if ((int )wp[win].y_cursor > (int )zargs[1]) {
    {
#line 1706
    reset_cursor(win);
    }
  } else
#line 1705
  if ((int )wp[win].x_cursor > (int )zargs[2]) {
    {
#line 1706
    reset_cursor(win);
    }
  }
#line 1708
  return;
}
}
#line 1719 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/screen.c"
void z_window_style(void) 
{ 
  zword win ;
  zword tmp ;
  zword flags ;

  {
  {
#line 1721
  tmp = winarg0();
#line 1721
  win = tmp;
#line 1722
  flags = zargs[1];
#line 1724
  flush_buffer();
  }
#line 1728
  if (zargc < 3) {
#line 1729
    zargs[2] = (zword )0;
  }
  {
#line 1734
  if ((int )zargs[2] == 0) {
#line 1734
    goto case_0;
  }
#line 1735
  if ((int )zargs[2] == 1) {
#line 1735
    goto case_1;
  }
#line 1736
  if ((int )zargs[2] == 2) {
#line 1736
    goto case_2;
  }
#line 1737
  if ((int )zargs[2] == 3) {
#line 1737
    goto case_3;
  }
#line 1733
  goto switch_break;
  case_0: /* CIL Label */ 
#line 1734
  wp[win].attribute = flags;
#line 1734
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1735
  wp[win].attribute = (zword )((int )wp[win].attribute | (int )flags);
#line 1735
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1736
  wp[win].attribute = (zword )((int )wp[win].attribute & ~ ((int )flags));
#line 1736
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1737
  wp[win].attribute = (zword )((int )wp[win].attribute ^ (int )flags);
#line 1737
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 1740
  if (cwin == (int )win) {
    {
#line 1741
    update_attributes();
    }
  }
#line 1743
  return;
}
}
#line 44 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
static zword object_address(zword obj ) 
{ 
  int tmp ;

  {
#line 50
  if ((int )h_version <= 3) {
#line 50
    tmp = 255;
  } else {
#line 50
    tmp = 2000;
  }
#line 50
  if ((int )obj > tmp) {
    {
#line 51
    print_string("@Attempt to address illegal object ");
#line 52
    print_num(obj);
#line 53
    print_string(".  This is normally fatal.");
#line 54
    new_line();
#line 55
    runtime_error(4);
    }
  }
#line 60
  if ((int )h_version <= 3) {
#line 61
    return ((zword )((int )h_objects + (((int )obj - 1) * 9 + 62)));
  } else {
#line 63
    return ((zword )((int )h_objects + (((int )obj - 1) * 14 + 126)));
  }
}
}
#line 74 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
zword object_name(zword object ) 
{ 
  zword obj_addr ;
  zword name_addr ;

  {
  {
#line 79
  obj_addr = object_address(object);
  }
#line 83
  if ((int )h_version <= 3) {
#line 84
    obj_addr = (zword )((int )obj_addr + 7);
  } else {
#line 86
    obj_addr = (zword )((int )obj_addr + 12);
  }
#line 88
  name_addr = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 90
  return (name_addr);
}
}
#line 102 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
static zword first_property(zword obj ) 
{ 
  zword prop_addr ;
  zbyte size ;

  {
  {
#line 109
  prop_addr = object_name(obj);
#line 113
  size = *(zmp + prop_addr);
  }
#line 117
  return ((zword )(((int )prop_addr + 1) + 2 * (int )size));
}
}
#line 128 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
static zword next_property(zword prop_addr ) 
{ 
  zbyte value ;

  {
#line 134
  value = *(zmp + prop_addr);
#line 135
  prop_addr = (zword )((int )prop_addr + 1);
#line 139
  if ((int )h_version <= 3) {
#line 140
    value = (zbyte )((int )value >> 5);
  } else
#line 141
  if (! ((int )value & 128)) {
#line 142
    value = (zbyte )((int )value >> 6);
  } else {
#line 145
    value = *(zmp + prop_addr);
#line 146
    value = (zbyte )((int )value & 63);
#line 148
    if ((int )value == 0) {
#line 148
      value = (zbyte )64;
    }
  }
#line 154
  return ((zword )(((int )prop_addr + (int )value) + 1));
}
}
#line 165 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
static void unlink_object(zword object ) 
{ 
  zword obj_addr ;
  zword parent_addr ;
  zword sibling_addr ;
  zbyte parent ;
  zbyte younger_sibling ;
  zbyte older_sibling ;
  zbyte zero ;
  zword tmp ;
  zword tmp___0 ;
  zword parent___0 ;
  zword younger_sibling___0 ;
  zword older_sibling___0 ;
  zword zero___0 ;
  zword tmp___1 ;
  zword tmp___2 ;

  {
#line 171
  if ((int )object == 0) {
    {
#line 172
    runtime_error(31);
    }
#line 173
    return;
  }
  {
#line 176
  obj_addr = object_address(object);
  }
#line 178
  if ((int )h_version <= 3) {
#line 183
    zero = (zbyte )0;
#line 187
    obj_addr = (zword )((int )obj_addr + 4);
#line 188
    parent = *(zmp + obj_addr);
#line 189
    if (! parent) {
#line 190
      return;
    }
    {
#line 195
    *(zmp + obj_addr) = zero;
#line 196
    obj_addr = (zword )((int )obj_addr + 1);
#line 197
    older_sibling = *(zmp + obj_addr);
#line 198
    *(zmp + obj_addr) = zero;
#line 202
    tmp = object_address((zword )parent);
#line 202
    parent_addr = (zword )((int )tmp + 6);
#line 203
    younger_sibling = *(zmp + parent_addr);
    }
#line 207
    if ((int )younger_sibling == (int )object) {
#line 208
      *(zmp + parent_addr) = older_sibling;
    } else {
      {
#line 210
      while (1) {
        while_continue: /* CIL Label */ ;
        {
#line 211
        tmp___0 = object_address((zword )younger_sibling);
#line 211
        sibling_addr = (zword )((int )tmp___0 + 5);
#line 212
        younger_sibling = *(zmp + sibling_addr);
        }
#line 210
        if (! ((int )younger_sibling != (int )object)) {
#line 210
          goto while_break;
        }
      }
      while_break: /* CIL Label */ ;
      }
#line 214
      *(zmp + sibling_addr) = older_sibling;
    }
  } else {
#line 222
    zero___0 = (zword )0;
#line 226
    obj_addr = (zword )((int )obj_addr + 6);
#line 227
    parent___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 228
    if (! parent___0) {
#line 229
      return;
    }
    {
#line 234
    *(zmp + obj_addr) = (zbyte )((int )zero___0 >> 8);
#line 234
    *(zmp + ((int )obj_addr + 1)) = (zbyte )((int )zero___0 & 255);
#line 235
    obj_addr = (zword )((int )obj_addr + 2);
#line 236
    older_sibling___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 237
    *(zmp + obj_addr) = (zbyte )((int )zero___0 >> 8);
#line 237
    *(zmp + ((int )obj_addr + 1)) = (zbyte )((int )zero___0 & 255);
#line 241
    tmp___1 = object_address(parent___0);
#line 241
    parent_addr = (zword )((int )tmp___1 + 10);
#line 242
    younger_sibling___0 = (zword )(((int )((zword )*(zmp + parent_addr)) << 8) | (int )*(zmp + ((int )parent_addr + 1)));
    }
#line 246
    if ((int )younger_sibling___0 == (int )object) {
#line 247
      *(zmp + parent_addr) = (zbyte )((int )older_sibling___0 >> 8);
#line 247
      *(zmp + ((int )parent_addr + 1)) = (zbyte )((int )older_sibling___0 & 255);
    } else {
      {
#line 249
      while (1) {
        while_continue___0: /* CIL Label */ ;
        {
#line 250
        tmp___2 = object_address(younger_sibling___0);
#line 250
        sibling_addr = (zword )((int )tmp___2 + 8);
#line 251
        younger_sibling___0 = (zword )(((int )((zword )*(zmp + sibling_addr)) << 8) | (int )*(zmp + ((int )sibling_addr + 1)));
        }
#line 249
        if (! ((int )younger_sibling___0 != (int )object)) {
#line 249
          goto while_break___0;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
#line 253
      *(zmp + sibling_addr) = (zbyte )((int )older_sibling___0 >> 8);
#line 253
      *(zmp + ((int )sibling_addr + 1)) = (zbyte )((int )older_sibling___0 & 255);
    }
  }
#line 258
  return;
}
}
#line 268 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_clear_attr(void) 
{ 
  zword obj_addr ;
  zbyte value ;
  int tmp ;
  zword tmp___0 ;

  {
#line 273
  if ((unsigned int )story_id == 1U) {
#line 274
    if ((int )zargs[1] == 48) {
#line 275
      return;
    }
  }
#line 277
  if ((int )h_version <= 3) {
#line 277
    tmp = 31;
  } else {
#line 277
    tmp = 47;
  }
#line 277
  if ((int )zargs[1] > tmp) {
    {
#line 278
    runtime_error(5);
    }
  }
#line 282
  if (f_setup.attribute_assignment) {
    {
#line 283
    stream_mssg_on();
#line 284
    print_string("@clear_attr ");
#line 285
    print_object(zargs[0]);
#line 286
    print_string(" ");
#line 287
    print_num(zargs[1]);
#line 288
    stream_mssg_off();
    }
  }
#line 291
  if ((int )zargs[0] == 0) {
    {
#line 292
    runtime_error(26);
    }
#line 293
    return;
  }
  {
#line 298
  tmp___0 = object_address(zargs[0]);
#line 298
  obj_addr = (zword )((int )tmp___0 + (int )zargs[1] / 8);
#line 302
  value = *(zmp + obj_addr);
#line 303
  value = (zbyte )((int )value & ~ (128 >> ((int )zargs[1] & 7)));
#line 304
  *(zmp + obj_addr) = value;
  }
#line 306
  return;
}
}
#line 316 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_jin(void) 
{ 
  zword obj_addr ;
  zbyte parent ;
  zword parent___0 ;

  {
#line 322
  if (f_setup.object_locating) {
    {
#line 323
    stream_mssg_on();
#line 324
    print_string("@jin ");
#line 325
    print_object(zargs[0]);
#line 326
    print_string(" ");
#line 327
    print_object(zargs[1]);
#line 328
    stream_mssg_off();
    }
  }
#line 331
  if ((int )zargs[0] == 0) {
    {
#line 332
    runtime_error(19);
#line 333
    branch(0 == (int )zargs[1]);
    }
#line 334
    return;
  }
  {
#line 337
  obj_addr = object_address(zargs[0]);
  }
#line 339
  if ((int )h_version <= 3) {
    {
#line 345
    obj_addr = (zword )((int )obj_addr + 4);
#line 346
    parent = *(zmp + obj_addr);
#line 350
    branch((int )parent == (int )zargs[1]);
    }
  } else {
    {
#line 358
    obj_addr = (zword )((int )obj_addr + 6);
#line 359
    parent___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 363
    branch((int )parent___0 == (int )zargs[1]);
    }
  }
#line 367
  return;
}
}
#line 376 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_child(void) 
{ 
  zword obj_addr ;
  zbyte child ;
  zword child___0 ;

  {
#line 382
  if (f_setup.object_locating) {
    {
#line 383
    stream_mssg_on();
#line 384
    print_string("@get_child ");
#line 385
    print_object(zargs[0]);
#line 386
    stream_mssg_off();
    }
  }
#line 389
  if ((int )zargs[0] == 0) {
    {
#line 390
    runtime_error(20);
#line 391
    store((zword )0);
#line 392
    branch(0);
    }
#line 393
    return;
  }
  {
#line 396
  obj_addr = object_address(zargs[0]);
  }
#line 398
  if ((int )h_version <= 3) {
    {
#line 404
    obj_addr = (zword )((int )obj_addr + 6);
#line 405
    child = *(zmp + obj_addr);
#line 409
    store((zword )child);
#line 410
    branch((bool )child);
    }
  } else {
    {
#line 418
    obj_addr = (zword )((int )obj_addr + 10);
#line 419
    child___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 423
    store(child___0);
#line 424
    branch((bool )child___0);
    }
  }
#line 428
  return;
}
}
#line 438 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_next_prop(void) 
{ 
  zword prop_addr ;
  zbyte value ;
  zbyte mask ;

  {
#line 444
  if ((int )zargs[0] == 0) {
    {
#line 445
    runtime_error(32);
#line 446
    store((zword )0);
    }
#line 447
    return;
  }
#line 452
  if ((int )h_version <= 3) {
#line 452
    mask = (zbyte )31;
  } else {
#line 452
    mask = (zbyte )63;
  }
  {
#line 456
  prop_addr = first_property(zargs[0]);
  }
#line 458
  if ((int )zargs[1] != 0) {
    {
#line 462
    while (1) {
      while_continue: /* CIL Label */ ;
      {
#line 463
      value = *(zmp + prop_addr);
#line 464
      prop_addr = next_property(prop_addr);
      }
#line 462
      if (! (((int )value & (int )mask) > (int )zargs[1])) {
#line 462
        goto while_break;
      }
    }
    while_break: /* CIL Label */ ;
    }
#line 469
    if (((int )value & (int )mask) != (int )zargs[1]) {
      {
#line 470
      runtime_error(6);
      }
    }
  }
  {
#line 476
  value = *(zmp + prop_addr);
#line 477
  store((zword )((int )value & (int )mask));
  }
#line 479
  return;
}
}
#line 488 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_parent(void) 
{ 
  zword obj_addr ;
  zbyte parent ;
  zword parent___0 ;

  {
#line 494
  if (f_setup.object_locating) {
    {
#line 495
    stream_mssg_on();
#line 496
    print_string("@get_parent ");
#line 497
    print_object(zargs[0]);
#line 498
    stream_mssg_off();
    }
  }
#line 501
  if ((int )zargs[0] == 0) {
    {
#line 502
    runtime_error(21);
#line 503
    store((zword )0);
    }
#line 504
    return;
  }
  {
#line 507
  obj_addr = object_address(zargs[0]);
  }
#line 509
  if ((int )h_version <= 3) {
    {
#line 515
    obj_addr = (zword )((int )obj_addr + 4);
#line 516
    parent = *(zmp + obj_addr);
#line 520
    store((zword )parent);
    }
  } else {
    {
#line 528
    obj_addr = (zword )((int )obj_addr + 6);
#line 529
    parent___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 533
    store(parent___0);
    }
  }
#line 537
  return;
}
}
#line 547 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_prop(void) 
{ 
  zword prop_addr ;
  zword wprop_val ;
  zbyte bprop_val ;
  zbyte value ;
  zbyte mask ;

  {
#line 555
  if ((int )zargs[0] == 0) {
    {
#line 556
    runtime_error(24);
#line 557
    store((zword )0);
    }
#line 558
    return;
  }
#line 563
  if ((int )h_version <= 3) {
#line 563
    mask = (zbyte )31;
  } else {
#line 563
    mask = (zbyte )63;
  }
  {
#line 567
  prop_addr = first_property(zargs[0]);
  }
  {
#line 571
  while (1) {
    while_continue: /* CIL Label */ ;
#line 572
    value = *(zmp + prop_addr);
#line 573
    if (((int )value & (int )mask) <= (int )zargs[1]) {
#line 574
      goto while_break;
    }
    {
#line 575
    prop_addr = next_property(prop_addr);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 578
  if (((int )value & (int )mask) == (int )zargs[1]) {
#line 582
    prop_addr = (zword )((int )prop_addr + 1);
#line 584
    if ((int )h_version <= 3) {
#line 584
      if (! ((int )value & 224)) {
#line 586
        bprop_val = *(zmp + prop_addr);
#line 587
        wprop_val = (zword )bprop_val;
      } else {
#line 584
        goto _L;
      }
    } else
    _L: /* CIL Label */ 
#line 584
    if ((int )h_version >= 4) {
#line 584
      if (! ((int )value & 192)) {
#line 586
        bprop_val = *(zmp + prop_addr);
#line 587
        wprop_val = (zword )bprop_val;
      } else {
#line 589
        wprop_val = (zword )(((int )((zword )*(zmp + prop_addr)) << 8) | (int )*(zmp + ((int )prop_addr + 1)));
      }
    } else {
#line 589
      wprop_val = (zword )(((int )((zword )*(zmp + prop_addr)) << 8) | (int )*(zmp + ((int )prop_addr + 1)));
    }
  } else {
#line 595
    prop_addr = (zword )((int )h_objects + 2 * ((int )zargs[1] - 1));
#line 596
    wprop_val = (zword )(((int )((zword )*(zmp + prop_addr)) << 8) | (int )*(zmp + ((int )prop_addr + 1)));
  }
  {
#line 602
  store(wprop_val);
  }
#line 604
  return;
}
}
#line 614 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_prop_addr(void) 
{ 
  zword prop_addr ;
  zbyte value ;
  zbyte mask ;

  {
#line 620
  if ((int )zargs[0] == 0) {
    {
#line 621
    runtime_error(23);
#line 622
    store((zword )0);
    }
#line 623
    return;
  }
#line 626
  if ((unsigned int )story_id == 0U) {
#line 627
    if ((int )zargs[0] > 2000) {
      {
#line 628
      store((zword )0);
      }
#line 628
      return;
    }
  }
#line 632
  if ((int )h_version <= 3) {
#line 632
    mask = (zbyte )31;
  } else {
#line 632
    mask = (zbyte )63;
  }
  {
#line 636
  prop_addr = first_property(zargs[0]);
  }
  {
#line 640
  while (1) {
    while_continue: /* CIL Label */ ;
#line 641
    value = *(zmp + prop_addr);
#line 642
    if (((int )value & (int )mask) <= (int )zargs[1]) {
#line 643
      goto while_break;
    }
    {
#line 644
    prop_addr = next_property(prop_addr);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 649
  if (((int )value & (int )mask) == (int )zargs[1]) {
#line 651
    if ((int )h_version >= 4) {
#line 651
      if ((int )value & 128) {
#line 652
        prop_addr = (zword )((int )prop_addr + 1);
      }
    }
    {
#line 653
    store((zword )((int )prop_addr + 1));
    }
  } else {
    {
#line 655
    store((zword )0);
    }
  }
#line 657
  return;
}
}
#line 666 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_prop_len(void) 
{ 
  zword addr ;
  zbyte value ;

  {
#line 673
  addr = (zword )((int )zargs[0] - 1);
#line 674
  value = *(zmp + addr);
#line 678
  if ((int )h_version <= 3) {
#line 679
    value = (zbyte )(((int )value >> 5) + 1);
  } else
#line 680
  if (! ((int )value & 128)) {
#line 681
    value = (zbyte )(((int )value >> 6) + 1);
  } else {
#line 684
    value = (zbyte )((int )value & 63);
#line 686
    if ((int )value == 0) {
#line 686
      value = (zbyte )64;
    }
  }
  {
#line 692
  store((zword )value);
  }
#line 694
  return;
}
}
#line 703 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_get_sibling(void) 
{ 
  zword obj_addr ;
  zbyte sibling ;
  zword sibling___0 ;

  {
#line 707
  if ((int )zargs[0] == 0) {
    {
#line 708
    runtime_error(22);
#line 709
    store((zword )0);
#line 710
    branch(0);
    }
#line 711
    return;
  }
  {
#line 714
  obj_addr = object_address(zargs[0]);
  }
#line 716
  if ((int )h_version <= 3) {
    {
#line 722
    obj_addr = (zword )((int )obj_addr + 5);
#line 723
    sibling = *(zmp + obj_addr);
#line 727
    store((zword )sibling);
#line 728
    branch((bool )sibling);
    }
  } else {
    {
#line 736
    obj_addr = (zword )((int )obj_addr + 8);
#line 737
    sibling___0 = (zword )(((int )((zword )*(zmp + obj_addr)) << 8) | (int )*(zmp + ((int )obj_addr + 1)));
#line 741
    store(sibling___0);
#line 742
    branch((bool )sibling___0);
    }
  }
#line 746
  return;
}
}
#line 756 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_insert_obj(void) 
{ 
  zword obj1 ;
  zword obj2 ;
  zword obj1_addr ;
  zword obj2_addr ;
  zbyte child ;
  zword child___0 ;

  {
#line 758
  obj1 = zargs[0];
#line 759
  obj2 = zargs[1];
#line 765
  if (f_setup.object_movement) {
    {
#line 766
    stream_mssg_on();
#line 767
    print_string("@move_obj ");
#line 768
    print_object(obj1);
#line 769
    print_string(" ");
#line 770
    print_object(obj2);
#line 771
    stream_mssg_off();
    }
  }
#line 774
  if ((int )obj1 == 0) {
    {
#line 775
    runtime_error(29);
    }
#line 776
    return;
  }
#line 779
  if ((int )obj2 == 0) {
    {
#line 780
    runtime_error(30);
    }
#line 781
    return;
  }
  {
#line 786
  obj1_addr = object_address(obj1);
#line 787
  obj2_addr = object_address(obj2);
#line 791
  unlink_object(obj1);
  }
#line 795
  if ((int )h_version <= 3) {
#line 799
    obj1_addr = (zword )((int )obj1_addr + 4);
#line 800
    *(zmp + obj1_addr) = (zbyte )obj2;
#line 801
    obj2_addr = (zword )((int )obj2_addr + 6);
#line 802
    child = *(zmp + obj2_addr);
#line 803
    *(zmp + obj2_addr) = (zbyte )obj1;
#line 804
    obj1_addr = (zword )((int )obj1_addr + 1);
#line 805
    *(zmp + obj1_addr) = child;
  } else {
#line 811
    obj1_addr = (zword )((int )obj1_addr + 6);
#line 812
    *(zmp + obj1_addr) = (zbyte )((int )obj2 >> 8);
#line 812
    *(zmp + ((int )obj1_addr + 1)) = (zbyte )((int )obj2 & 255);
#line 813
    obj2_addr = (zword )((int )obj2_addr + 10);
#line 814
    child___0 = (zword )(((int )((zword )*(zmp + obj2_addr)) << 8) | (int )*(zmp + ((int )obj2_addr + 1)));
#line 815
    *(zmp + obj2_addr) = (zbyte )((int )obj1 >> 8);
#line 815
    *(zmp + ((int )obj2_addr + 1)) = (zbyte )((int )obj1 & 255);
#line 816
    obj1_addr = (zword )((int )obj1_addr + 2);
#line 817
    *(zmp + obj1_addr) = (zbyte )((int )child___0 >> 8);
#line 817
    *(zmp + ((int )obj1_addr + 1)) = (zbyte )((int )child___0 & 255);
  }
#line 821
  return;
}
}
#line 832 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_put_prop(void) 
{ 
  zword prop_addr ;
  zword value ;
  zbyte mask ;
  zbyte v ;
  zword v___0 ;

  {
#line 838
  if ((int )zargs[0] == 0) {
    {
#line 839
    runtime_error(25);
    }
#line 840
    return;
  }
#line 845
  if ((int )h_version <= 3) {
#line 845
    mask = (zbyte )31;
  } else {
#line 845
    mask = (zbyte )63;
  }
  {
#line 849
  prop_addr = first_property(zargs[0]);
  }
  {
#line 853
  while (1) {
    while_continue: /* CIL Label */ ;
#line 854
    value = (zword )*(zmp + prop_addr);
#line 855
    if (((int )value & (int )mask) <= (int )zargs[1]) {
#line 856
      goto while_break;
    }
    {
#line 857
    prop_addr = next_property(prop_addr);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 862
  if (((int )value & (int )mask) != (int )zargs[1]) {
    {
#line 863
    runtime_error(6);
    }
  }
#line 867
  prop_addr = (zword )((int )prop_addr + 1);
#line 869
  if ((int )h_version <= 3) {
#line 869
    if (! ((int )value & 224)) {
#line 870
      v = (zbyte )zargs[2];
#line 871
      *(zmp + prop_addr) = v;
    } else {
#line 869
      goto _L;
    }
  } else
  _L: /* CIL Label */ 
#line 869
  if ((int )h_version >= 4) {
#line 869
    if (! ((int )value & 192)) {
#line 870
      v = (zbyte )zargs[2];
#line 871
      *(zmp + prop_addr) = v;
    } else {
#line 873
      v___0 = zargs[2];
#line 874
      *(zmp + prop_addr) = (zbyte )((int )v___0 >> 8);
#line 874
      *(zmp + ((int )prop_addr + 1)) = (zbyte )((int )v___0 & 255);
    }
  } else {
#line 873
    v___0 = zargs[2];
#line 874
    *(zmp + prop_addr) = (zbyte )((int )v___0 >> 8);
#line 874
    *(zmp + ((int )prop_addr + 1)) = (zbyte )((int )v___0 & 255);
  }
#line 877
  return;
}
}
#line 886 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_remove_obj(void) 
{ 


  {
#line 891
  if (f_setup.object_movement) {
    {
#line 892
    stream_mssg_on();
#line 893
    print_string("@remove_obj ");
#line 894
    print_object(zargs[0]);
#line 895
    stream_mssg_off();
    }
  }
  {
#line 900
  unlink_object(zargs[0]);
  }
#line 902
  return;
}
}
#line 912 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_set_attr(void) 
{ 
  zword obj_addr ;
  zbyte value ;
  int tmp ;
  zword tmp___0 ;

  {
#line 917
  if ((unsigned int )story_id == 1U) {
#line 918
    if ((int )zargs[1] == 48) {
#line 919
      return;
    }
  }
#line 921
  if ((int )h_version <= 3) {
#line 921
    tmp = 31;
  } else {
#line 921
    tmp = 47;
  }
#line 921
  if ((int )zargs[1] > tmp) {
    {
#line 922
    runtime_error(5);
    }
  }
#line 926
  if (f_setup.attribute_assignment) {
    {
#line 927
    stream_mssg_on();
#line 928
    print_string("@set_attr ");
#line 929
    print_object(zargs[0]);
#line 930
    print_string(" ");
#line 931
    print_num(zargs[1]);
#line 932
    stream_mssg_off();
    }
  }
#line 935
  if ((int )zargs[0] == 0) {
    {
#line 936
    runtime_error(27);
    }
#line 937
    return;
  }
  {
#line 942
  tmp___0 = object_address(zargs[0]);
#line 942
  obj_addr = (zword )((int )tmp___0 + (int )zargs[1] / 8);
#line 946
  value = *(zmp + obj_addr);
#line 950
  value = (zbyte )((int )value | (128 >> ((int )zargs[1] & 7)));
#line 954
  *(zmp + obj_addr) = value;
  }
#line 956
  return;
}
}
#line 966 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/object.c"
void z_test_attr(void) 
{ 
  zword obj_addr ;
  zbyte value ;
  int tmp ;
  zword tmp___0 ;

  {
#line 971
  if ((int )h_version <= 3) {
#line 971
    tmp = 31;
  } else {
#line 971
    tmp = 47;
  }
#line 971
  if ((int )zargs[1] > tmp) {
    {
#line 972
    runtime_error(5);
    }
  }
#line 976
  if (f_setup.attribute_testing) {
    {
#line 977
    stream_mssg_on();
#line 978
    print_string("@test_attr ");
#line 979
    print_object(zargs[0]);
#line 980
    print_string(" ");
#line 981
    print_num(zargs[1]);
#line 982
    stream_mssg_off();
    }
  }
#line 985
  if ((int )zargs[0] == 0) {
    {
#line 986
    runtime_error(28);
#line 987
    branch(0);
    }
#line 988
    return;
  }
  {
#line 993
  tmp___0 = object_address(zargs[0]);
#line 993
  obj_addr = (zword )((int )tmp___0 + (int )zargs[1] / 8);
#line 997
  value = *(zmp + obj_addr);
#line 1001
  branch((int )value & (128 >> ((int )zargs[1] & 7)));
  }
#line 1003
  return;
}
}
#line 58 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
static zword frames[257]  ;
#line 102 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
static bool read_word(FILE *f , zword *result ) 
{ 
  int a ;
  int b ;

  {
  {
#line 106
  a = fgetc(f);
  }
#line 106
  if (a == -1) {
#line 106
    return (0);
  }
  {
#line 107
  b = fgetc(f);
  }
#line 107
  if (b == -1) {
#line 107
    return (0);
  }
#line 109
  *result = (zword )(((int )((zword )a) << 8) | (int )((zword )b));
#line 110
  return (1);
}
}
#line 114 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
static bool read_long(FILE *f , zlong *result ) 
{ 
  int a ;
  int b ;
  int c ;
  int d ;

  {
  {
#line 118
  a = fgetc(f);
  }
#line 118
  if (a == -1) {
#line 118
    return (0);
  }
  {
#line 119
  b = fgetc(f);
  }
#line 119
  if (b == -1) {
#line 119
    return (0);
  }
  {
#line 120
  c = fgetc(f);
  }
#line 120
  if (c == -1) {
#line 120
    return (0);
  }
  {
#line 121
  d = fgetc(f);
  }
#line 121
  if (d == -1) {
#line 121
    return (0);
  }
#line 123
  *result = ((((zlong )a << 24) | ((zlong )b << 16)) | ((zlong )c << 8)) | (zlong )d;
#line 125
  return (1);
}
}
#line 133 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
zword restore_quetzal(FILE *svf , FILE *stf ) 
{ 
  zlong ifzslen ;
  zlong currlen ;
  zlong tmpl ;
  zlong pc ;
  zword i ;
  zword tmpw ;
  zword fatal ;
  zbyte skip ;
  zbyte progress ;
  int x ;
  int y ;
  bool tmp ;
  bool tmp___0 ;
  bool tmp___1 ;
  bool tmp___2 ;
  bool tmp___3 ;
  bool tmp___4 ;
  bool tmp___5 ;
  int tmp___6 ;
  bool tmp___7 ;
  bool tmp___8 ;
  bool tmp___9 ;
  bool tmp___10 ;
  bool tmp___11 ;
  size_t tmp___12 ;
  int tmp___13 ;

  {
  {
#line 138
  fatal = (zword )0;
#line 139
  progress = (zbyte )0;
#line 143
  tmp = read_long(svf, & tmpl);
  }
#line 143
  if (tmp) {
    {
#line 143
    tmp___0 = read_long(svf, & ifzslen);
    }
#line 143
    if (tmp___0) {
      {
#line 143
      tmp___1 = read_long(svf, & currlen);
      }
#line 143
      if (! tmp___1) {
#line 145
        return ((zword )0);
      }
    } else {
#line 145
      return ((zword )0);
    }
  } else {
#line 145
    return ((zword )0);
  }
#line 146
  if (tmpl != (zlong )((((70 << 24) | (79 << 16)) | (82 << 8)) | 77)) {
    {
#line 148
    print_string("This is not a saved game file!\n");
    }
#line 149
    return ((zword )0);
  } else
#line 146
  if (currlen != (zlong )((((73 << 24) | (70 << 16)) | (90 << 8)) | 83)) {
    {
#line 148
    print_string("This is not a saved game file!\n");
    }
#line 149
    return ((zword )0);
  }
#line 151
  if (ifzslen & 1UL) {
#line 151
    return ((zword )0);
  } else
#line 151
  if (ifzslen < 4UL) {
#line 151
    return ((zword )0);
  }
#line 152
  ifzslen -= 4UL;
  {
#line 155
  while (1) {
    while_continue: /* CIL Label */ ;
#line 155
    if (! (ifzslen > 0UL)) {
#line 155
      goto while_break;
    }
#line 158
    if (ifzslen < 8UL) {
#line 158
      return ((zword )0);
    }
    {
#line 159
    tmp___2 = read_long(svf, & tmpl);
    }
#line 159
    if (tmp___2) {
      {
#line 159
      tmp___3 = read_long(svf, & currlen);
      }
#line 159
      if (! tmp___3) {
#line 160
        return ((zword )0);
      }
    } else {
#line 160
      return ((zword )0);
    }
#line 161
    ifzslen -= 8UL;
#line 164
    if (ifzslen < currlen) {
#line 164
      return ((zword )0);
    }
#line 165
    skip = (zbyte )(currlen & 1UL);
#line 166
    ifzslen -= currlen + (zlong )skip;
    {
#line 171
    if (tmpl == (zlong )((((73 << 24) | (70 << 16)) | (104 << 8)) | 100)) {
#line 171
      goto case_exp;
    }
#line 212
    if (tmpl == (zlong )((((83 << 24) | (116 << 16)) | (107 << 8)) | 115)) {
#line 212
      goto case_exp___0;
    }
#line 321
    if (tmpl == (zlong )((((67 << 24) | (77 << 16)) | (101 << 8)) | 109)) {
#line 321
      goto case_exp___1;
    }
#line 375
    if (tmpl == (zlong )((((85 << 24) | (77 << 16)) | (101 << 8)) | 109)) {
#line 375
      goto case_exp___2;
    }
#line 393
    goto switch_default;
    case_exp: /* CIL Label */ 
#line 172
    if ((int )progress & 1) {
      {
#line 174
      print_string("Save file has two IFZS chunks!\n");
      }
#line 175
      return (fatal);
    }
#line 177
    progress = (zbyte )((int )progress | 1);
#line 178
    if (currlen < 13UL) {
#line 179
      return (fatal);
    } else {
      {
#line 178
      tmp___4 = read_word(svf, & tmpw);
      }
#line 178
      if (! tmp___4) {
#line 179
        return (fatal);
      }
    }
#line 180
    if ((int )tmpw != (int )h_release) {
#line 181
      progress = (zbyte )128;
    }
#line 183
    i = (zword )18;
    {
#line 183
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 183
      if (! ((int )i < 24)) {
#line 183
        goto while_break___0;
      }
      {
#line 185
      x = fgetc(svf);
      }
#line 185
      if (x == -1) {
#line 185
        return (fatal);
      }
#line 186
      if (x != (int )*(zmp + i)) {
#line 187
        progress = (zbyte )128;
      }
#line 183
      i = (zword )((int )i + 1);
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 190
    tmp___5 = read_word(svf, & tmpw);
    }
#line 190
    if (! tmp___5) {
#line 190
      return (fatal);
    }
#line 191
    if ((int )tmpw != (int )h_checksum) {
#line 192
      progress = (zbyte )128;
    }
#line 194
    if ((int )progress & 128) {
      {
#line 196
      print_string("File was not saved from this story!\n");
      }
#line 197
      return (fatal);
    }
    {
#line 199
    x = fgetc(svf);
    }
#line 199
    if (x == -1) {
#line 199
      return (fatal);
    }
    {
#line 200
    pc = (zlong )x << 16;
#line 201
    x = fgetc(svf);
    }
#line 201
    if (x == -1) {
#line 201
      return (fatal);
    }
    {
#line 202
    pc |= (zlong )x << 8;
#line 203
    x = fgetc(svf);
    }
#line 203
    if (x == -1) {
#line 203
      return (fatal);
    }
#line 204
    pc |= (zlong )x;
#line 205
    fatal = (zword )-1;
#line 206
    pcp = zmp + pc;
#line 208
    i = (zword )13;
    {
#line 208
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 208
      if (! ((zlong )i < currlen)) {
#line 208
        goto while_break___1;
      }
      {
#line 209
      fgetc(svf);
#line 208
      i = (zword )((int )i + 1);
      }
    }
    while_break___1: /* CIL Label */ ;
    }
#line 210
    goto switch_break;
    case_exp___0: /* CIL Label */ 
#line 213
    if ((int )progress & 2) {
      {
#line 215
      print_string("File contains two stack chunks!\n");
      }
#line 216
      goto switch_break;
    }
#line 218
    progress = (zbyte )((int )progress | 2);
#line 220
    fatal = (zword )-1;
#line 221
    sp = stack + 1024;
#line 229
    if ((int )h_version != 6) {
#line 231
      if (currlen < 8UL) {
#line 231
        return (fatal);
      }
#line 232
      i = (zword )0;
      {
#line 232
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 232
        if (! ((int )i < 6)) {
#line 232
          goto while_break___2;
        }
        {
#line 233
        tmp___6 = fgetc(svf);
        }
#line 233
        if (tmp___6 != 0) {
#line 233
          return (fatal);
        }
#line 232
        i = (zword )((int )i + 1);
      }
      while_break___2: /* CIL Label */ ;
      }
      {
#line 234
      tmp___7 = read_word(svf, & tmpw);
      }
#line 234
      if (! tmp___7) {
#line 234
        return (fatal);
      }
#line 235
      if ((int )tmpw > 1024) {
        {
#line 237
        print_string("Save-file has too much stack (and I can\'t cope).\n");
        }
#line 238
        return (fatal);
      }
#line 240
      currlen -= 8UL;
#line 241
      if (currlen < (zlong )((int )tmpw * 2)) {
#line 241
        return (fatal);
      }
#line 242
      i = (zword )0;
      {
#line 242
      while (1) {
        while_continue___3: /* CIL Label */ ;
#line 242
        if (! ((int )i < (int )tmpw)) {
#line 242
          goto while_break___3;
        }
        {
#line 243
        sp --;
#line 243
        tmp___8 = read_word(svf, sp);
        }
#line 243
        if (! tmp___8) {
#line 243
          return (fatal);
        }
#line 242
        i = (zword )((int )i + 1);
      }
      while_break___3: /* CIL Label */ ;
      }
#line 244
      currlen -= (zlong )((int )tmpw * 2);
    }
#line 248
    fp = stack + 1024;
#line 248
    frame_count = (zword )0;
    {
#line 248
    while (1) {
      while_continue___4: /* CIL Label */ ;
#line 248
      if (! (currlen > 0UL)) {
#line 248
        goto while_break___4;
      }
#line 252
      if (currlen < 8UL) {
#line 252
        return (fatal);
      }
#line 253
      if (sp - stack < 4L) {
        {
#line 255
        print_string("Save-file has too much stack (and I can\'t cope).\n");
        }
#line 256
        return (fatal);
      }
      {
#line 260
      tmp___9 = read_long(svf, & tmpl);
      }
#line 260
      if (! tmp___9) {
#line 260
        return (fatal);
      }
      {
#line 261
      y = (int )(tmpl & 15UL);
#line 262
      tmpw = (zword )(y << 8);
#line 265
      x = fgetc(svf);
      }
#line 265
      if (x == -1) {
#line 265
        return (fatal);
      }
#line 268
      if (tmpl & 16UL) {
#line 270
        tmpw = (zword )((int )tmpw | 4096);
#line 271
        tmpl >>= 8;
      } else {
#line 276
        tmpl >>= 8;
#line 277
        tmpl --;
#line 279
        if ((int )*(zmp + tmpl) != (int )((zbyte )x)) {
          {
#line 281
          print_string("Save-file has wrong variable number on stack (possibly wrong game version?)\n");
          }
#line 282
          return (fatal);
        }
      }
      {
#line 285
      sp --;
#line 285
      *sp = (zword )(tmpl >> 9);
#line 286
      sp --;
#line 286
      *sp = (zword )(tmpl & 511UL);
#line 287
      sp --;
#line 287
      *sp = (zword )((fp - stack) - 1L);
#line 290
      x = fgetc(svf);
      }
#line 290
      if (x == -1) {
#line 290
        return (fatal);
      }
#line 291
      x ++;
#line 292
      i = (zword )0;
      {
#line 292
      while (1) {
        while_continue___5: /* CIL Label */ ;
#line 292
        if (! ((int )i < 8)) {
#line 292
          goto while_break___5;
        }
#line 293
        if (x & (1 << (int )i)) {
#line 294
          goto while_break___5;
        }
#line 292
        i = (zword )((int )i + 1);
      }
      while_break___5: /* CIL Label */ ;
      }
#line 295
      if (x ^ (1 << (int )i)) {
        {
#line 297
        print_string("Save-file uses incomplete argument lists (which I can\'t handle)\n");
        }
#line 298
        return (fatal);
      }
      {
#line 300
      sp --;
#line 300
      *sp = (zword )((int )tmpw | (int )i);
#line 301
      fp = sp;
#line 304
      tmp___10 = read_word(svf, & tmpw);
      }
#line 304
      if (! tmp___10) {
#line 304
        return (fatal);
      }
#line 306
      tmpw = (zword )((int )tmpw + y);
#line 307
      if (sp - stack <= (long )tmpw) {
        {
#line 309
        print_string("Save-file has too much stack (and I can\'t cope).\n");
        }
#line 310
        return (fatal);
      }
#line 312
      if (currlen < (zlong )((int )tmpw * 2)) {
#line 312
        return (fatal);
      }
#line 313
      i = (zword )0;
      {
#line 313
      while (1) {
        while_continue___6: /* CIL Label */ ;
#line 313
        if (! ((int )i < (int )tmpw)) {
#line 313
          goto while_break___6;
        }
        {
#line 314
        sp --;
#line 314
        tmp___11 = read_word(svf, sp);
        }
#line 314
        if (! tmp___11) {
#line 314
          return (fatal);
        }
#line 313
        i = (zword )((int )i + 1);
      }
      while_break___6: /* CIL Label */ ;
      }
#line 315
      currlen -= (zlong )((int )tmpw * 2);
#line 248
      currlen -= 8UL;
#line 248
      frame_count = (zword )((int )frame_count + 1);
    }
    while_break___4: /* CIL Label */ ;
    }
#line 318
    goto switch_break;
    case_exp___1: /* CIL Label */ 
#line 322
    if (! ((int )progress & 4)) {
      {
#line 324
      fseek(stf, 0L, 0);
#line 325
      i = (zword )0;
      }
      {
#line 326
      while (1) {
        while_continue___7: /* CIL Label */ ;
#line 326
        if (! (currlen > 0UL)) {
#line 326
          goto while_break___7;
        }
        {
#line 328
        x = fgetc(svf);
        }
#line 328
        if (x == -1) {
#line 328
          return (fatal);
        }
#line 329
        if (x == 0) {
#line 332
          if (currlen < 2UL) {
            {
#line 334
            print_string("File contains bogus `CMem\' chunk.\n");
            }
            {
#line 335
            while (1) {
              while_continue___8: /* CIL Label */ ;
#line 335
              if (! (currlen > 0UL)) {
#line 335
                goto while_break___8;
              }
              {
#line 336
              fgetc(svf);
#line 335
              currlen --;
              }
            }
            while_break___8: /* CIL Label */ ;
            }
#line 337
            currlen = (zlong )1;
#line 338
            i = (zword )65535;
#line 339
            goto while_break___7;
          }
          {
#line 342
          currlen --;
#line 343
          x = fgetc(svf);
          }
#line 343
          if (x == -1) {
#line 343
            return (fatal);
          }
          {
#line 344
          while (1) {
            while_continue___9: /* CIL Label */ ;
#line 344
            if (x >= 0) {
#line 344
              if (! ((int )i < (int )h_dynamic_size)) {
#line 344
                goto while_break___9;
              }
            } else {
#line 344
              goto while_break___9;
            }
            {
#line 345
            y = fgetc(stf);
            }
#line 345
            if (y == -1) {
#line 345
              return (fatal);
            } else {
#line 347
              *(zmp + i) = (zbyte )y;
            }
#line 344
            x --;
#line 344
            i = (zword )((int )i + 1);
          }
          while_break___9: /* CIL Label */ ;
          }
        } else {
          {
#line 351
          y = fgetc(stf);
          }
#line 351
          if (y == -1) {
#line 351
            return (fatal);
          }
#line 352
          *(zmp + i) = (zbyte )(x ^ y);
#line 353
          i = (zword )((int )i + 1);
        }
#line 356
        if ((int )i > (int )h_dynamic_size) {
          {
#line 358
          print_string("warning: `CMem\' chunk too long!\n");
          }
          {
#line 359
          while (1) {
            while_continue___10: /* CIL Label */ ;
#line 359
            if (! (currlen > 1UL)) {
#line 359
              goto while_break___10;
            }
            {
#line 360
            fgetc(svf);
#line 359
            currlen --;
            }
          }
          while_break___10: /* CIL Label */ ;
          }
#line 361
          goto while_break___7;
        }
#line 326
        currlen --;
      }
      while_break___7: /* CIL Label */ ;
      }
      {
#line 365
      while (1) {
        while_continue___11: /* CIL Label */ ;
#line 365
        if (! ((int )i < (int )h_dynamic_size)) {
#line 365
          goto while_break___11;
        }
        {
#line 366
        y = fgetc(stf);
        }
#line 366
        if (y == -1) {
#line 366
          return (fatal);
        } else {
#line 368
          *(zmp + i) = (zbyte )y;
        }
#line 365
        i = (zword )((int )i + 1);
      }
      while_break___11: /* CIL Label */ ;
      }
#line 369
      if (currlen == 0UL) {
#line 370
        progress = (zbyte )((int )progress | 4);
      }
#line 371
      goto switch_break;
    }
    case_exp___2: /* CIL Label */ 
#line 376
    if (! ((int )progress & 4)) {
#line 379
      if (currlen == (zlong )h_dynamic_size) {
        {
#line 381
        tmp___12 = fread((void */* __restrict  */)zmp, currlen, (size_t )1, (FILE */* __restrict  */)svf);
        }
#line 381
        if (tmp___12 == 1UL) {
#line 383
          progress = (zbyte )((int )progress | 4);
#line 384
          goto switch_break;
        }
      } else {
        {
#line 388
        print_string("`UMem\' chunk wrong size!\n");
        }
      }
    }
    switch_default: /* CIL Label */ 
    {
#line 394
    fseek(svf, (long )currlen, 1);
    }
#line 395
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 397
    if (skip) {
      {
#line 398
      fgetc(svf);
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 405
  if (! ((int )progress & 1)) {
    {
#line 406
    print_string("error: no valid header (`IFhd\') chunk in file.\n");
    }
  }
#line 407
  if (! ((int )progress & 2)) {
    {
#line 408
    print_string("error: no valid stack (`Stks\') chunk in file.\n");
    }
  }
#line 409
  if (! ((int )progress & 4)) {
    {
#line 410
    print_string("error: no valid memory (`CMem\' or `UMem\') chunk in file.\n");
    }
  }
#line 412
  if ((int )progress == 7) {
#line 412
    tmp___13 = 2;
  } else {
#line 412
    tmp___13 = (int )fatal;
  }
#line 412
  return ((zword )tmp___13);
}
}
#line 419 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/quetzal.c"
zword save_quetzal(FILE *svf , FILE *stf ) 
{ 
  zlong ifzslen ;
  zlong cmemlen ;
  zlong stkslen ;
  zlong pc ;
  zword i ;
  zword j ;
  zword n ;
  zword nvars ;
  zword nargs ;
  zword nstk ;
  zword *p ;
  zbyte var ;
  long cmempos ;
  long stkspos ;
  int c ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  int tmp___23 ;
  int tmp___24 ;
  int tmp___25 ;
  int tmp___26 ;
  int tmp___27 ;
  int tmp___28 ;
  int tmp___29 ;
  int tmp___30 ;
  int tmp___31 ;
  int tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  int tmp___35 ;
  int tmp___36 ;
  int tmp___37 ;
  int tmp___38 ;
  int tmp___39 ;
  int tmp___40 ;
  int tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  int tmp___44 ;
  int tmp___45 ;
  int tmp___46 ;
  int tmp___47 ;
  int tmp___48 ;
  int tmp___49 ;
  int tmp___50 ;
  int tmp___51 ;
  int tmp___52 ;
  int tmp___53 ;
  int tmp___54 ;
  int tmp___55 ;
  int tmp___56 ;
  int tmp___57 ;
  int tmp___58 ;
  int tmp___59 ;
  int tmp___60 ;
  int tmp___61 ;
  int tmp___62 ;
  int tmp___63 ;
  int tmp___64 ;
  int tmp___65 ;
  int tmp___66 ;
  int tmp___67 ;
  int tmp___68 ;
  int tmp___69 ;
  int tmp___70 ;
  int tmp___71 ;
  int tmp___72 ;
  int tmp___73 ;
  int tmp___74 ;
  int tmp___75 ;
  int tmp___76 ;

  {
  {
#line 421
  ifzslen = (zlong )0;
#line 421
  cmemlen = (zlong )0;
#line 421
  stkslen = (zlong )0;
#line 430
  tmp = fputc((int )(((zlong )((((70 << 24) | (79 << 16)) | (82 << 8)) | 77) >> 24) & 255UL),
              svf);
  }
#line 430
  if (tmp != -1) {
    {
#line 430
    tmp___0 = fputc((int )(((zlong )((((70 << 24) | (79 << 16)) | (82 << 8)) | 77) >> 16) & 255UL),
                    svf);
    }
#line 430
    if (tmp___0 != -1) {
      {
#line 430
      tmp___1 = fputc((int )(((zlong )((((70 << 24) | (79 << 16)) | (82 << 8)) | 77) >> 8) & 255UL),
                      svf);
      }
#line 430
      if (tmp___1 != -1) {
        {
#line 430
        tmp___2 = fputc((int )((zlong )((((70 << 24) | (79 << 16)) | (82 << 8)) | 77) & 255UL),
                        svf);
        }
#line 430
        if (tmp___2 != -1) {
          {
#line 430
          tmp___3 = fputc(0, svf);
          }
#line 430
          if (tmp___3 != -1) {
            {
#line 430
            tmp___4 = fputc(0, svf);
            }
#line 430
            if (tmp___4 != -1) {
              {
#line 430
              tmp___5 = fputc(0, svf);
              }
#line 430
              if (tmp___5 != -1) {
                {
#line 430
                tmp___6 = fputc(0, svf);
                }
#line 430
                if (! (tmp___6 != -1)) {
#line 430
                  return ((zword )0);
                }
              } else {
#line 430
                return ((zword )0);
              }
            } else {
#line 430
              return ((zword )0);
            }
          } else {
#line 430
            return ((zword )0);
          }
        } else {
#line 430
          return ((zword )0);
        }
      } else {
#line 430
        return ((zword )0);
      }
    } else {
#line 430
      return ((zword )0);
    }
  } else {
#line 430
    return ((zword )0);
  }
  {
#line 431
  tmp___7 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (90 << 8)) | 83) >> 24) & 255UL),
                  svf);
  }
#line 431
  if (tmp___7 != -1) {
    {
#line 431
    tmp___8 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (90 << 8)) | 83) >> 16) & 255UL),
                    svf);
    }
#line 431
    if (tmp___8 != -1) {
      {
#line 431
      tmp___9 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (90 << 8)) | 83) >> 8) & 255UL),
                      svf);
      }
#line 431
      if (tmp___9 != -1) {
        {
#line 431
        tmp___10 = fputc((int )((zlong )((((73 << 24) | (70 << 16)) | (90 << 8)) | 83) & 255UL),
                         svf);
        }
#line 431
        if (! (tmp___10 != -1)) {
#line 431
          return ((zword )0);
        }
      } else {
#line 431
        return ((zword )0);
      }
    } else {
#line 431
      return ((zword )0);
    }
  } else {
#line 431
    return ((zword )0);
  }
  {
#line 434
  pc = (zlong )(pcp - zmp);
#line 435
  tmp___11 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (104 << 8)) | 100) >> 24) & 255UL),
                   svf);
  }
#line 435
  if (tmp___11 != -1) {
    {
#line 435
    tmp___12 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (104 << 8)) | 100) >> 16) & 255UL),
                     svf);
    }
#line 435
    if (tmp___12 != -1) {
      {
#line 435
      tmp___13 = fputc((int )(((zlong )((((73 << 24) | (70 << 16)) | (104 << 8)) | 100) >> 8) & 255UL),
                       svf);
      }
#line 435
      if (tmp___13 != -1) {
        {
#line 435
        tmp___14 = fputc((int )((zlong )((((73 << 24) | (70 << 16)) | (104 << 8)) | 100) & 255UL),
                         svf);
        }
#line 435
        if (tmp___14 != -1) {
          {
#line 435
          tmp___15 = fputc((13 >> 24) & 255, svf);
          }
#line 435
          if (tmp___15 != -1) {
            {
#line 435
            tmp___16 = fputc((13 >> 16) & 255, svf);
            }
#line 435
            if (tmp___16 != -1) {
              {
#line 435
              tmp___17 = fputc((13 >> 8) & 255, svf);
              }
#line 435
              if (tmp___17 != -1) {
                {
#line 435
                tmp___18 = fputc(13, svf);
                }
#line 435
                if (! (tmp___18 != -1)) {
#line 435
                  return ((zword )0);
                }
              } else {
#line 435
                return ((zword )0);
              }
            } else {
#line 435
              return ((zword )0);
            }
          } else {
#line 435
            return ((zword )0);
          }
        } else {
#line 435
          return ((zword )0);
        }
      } else {
#line 435
        return ((zword )0);
      }
    } else {
#line 435
      return ((zword )0);
    }
  } else {
#line 435
    return ((zword )0);
  }
  {
#line 436
  tmp___19 = fputc(((int )h_release >> 8) & 255, svf);
  }
#line 436
  if (tmp___19 != -1) {
    {
#line 436
    tmp___20 = fputc((int )h_release & 255, svf);
    }
#line 436
    if (! (tmp___20 != -1)) {
#line 436
      return ((zword )0);
    }
  } else {
#line 436
    return ((zword )0);
  }
#line 437
  i = (zword )18;
  {
#line 437
  while (1) {
    while_continue: /* CIL Label */ ;
#line 437
    if (! ((int )i < 24)) {
#line 437
      goto while_break;
    }
    {
#line 438
    tmp___21 = fputc((int )*(zmp + i), svf);
    }
#line 438
    if (! (tmp___21 != -1)) {
#line 438
      return ((zword )0);
    }
#line 437
    i = (zword )((int )i + 1);
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 439
  tmp___22 = fputc(((int )h_checksum >> 8) & 255, svf);
  }
#line 439
  if (tmp___22 != -1) {
    {
#line 439
    tmp___23 = fputc((int )h_checksum & 255, svf);
    }
#line 439
    if (! (tmp___23 != -1)) {
#line 439
      return ((zword )0);
    }
  } else {
#line 439
    return ((zword )0);
  }
  {
#line 440
  tmp___24 = fputc((int )(((pc << 8) >> 24) & 255UL), svf);
  }
#line 440
  if (tmp___24 != -1) {
    {
#line 440
    tmp___25 = fputc((int )(((pc << 8) >> 16) & 255UL), svf);
    }
#line 440
    if (tmp___25 != -1) {
      {
#line 440
      tmp___26 = fputc((int )(((pc << 8) >> 8) & 255UL), svf);
      }
#line 440
      if (tmp___26 != -1) {
        {
#line 440
        tmp___27 = fputc((int )((pc << 8) & 255UL), svf);
        }
#line 440
        if (! (tmp___27 != -1)) {
#line 440
          return ((zword )0);
        }
      } else {
#line 440
        return ((zword )0);
      }
    } else {
#line 440
      return ((zword )0);
    }
  } else {
#line 440
    return ((zword )0);
  }
  {
#line 443
  cmempos = ftell(svf);
  }
#line 443
  if (cmempos < 0L) {
#line 443
    return ((zword )0);
  }
  {
#line 444
  tmp___28 = fputc((int )(((zlong )((((67 << 24) | (77 << 16)) | (101 << 8)) | 109) >> 24) & 255UL),
                   svf);
  }
#line 444
  if (tmp___28 != -1) {
    {
#line 444
    tmp___29 = fputc((int )(((zlong )((((67 << 24) | (77 << 16)) | (101 << 8)) | 109) >> 16) & 255UL),
                     svf);
    }
#line 444
    if (tmp___29 != -1) {
      {
#line 444
      tmp___30 = fputc((int )(((zlong )((((67 << 24) | (77 << 16)) | (101 << 8)) | 109) >> 8) & 255UL),
                       svf);
      }
#line 444
      if (tmp___30 != -1) {
        {
#line 444
        tmp___31 = fputc((int )((zlong )((((67 << 24) | (77 << 16)) | (101 << 8)) | 109) & 255UL),
                         svf);
        }
#line 444
        if (tmp___31 != -1) {
          {
#line 444
          tmp___32 = fputc(0, svf);
          }
#line 444
          if (tmp___32 != -1) {
            {
#line 444
            tmp___33 = fputc(0, svf);
            }
#line 444
            if (tmp___33 != -1) {
              {
#line 444
              tmp___34 = fputc(0, svf);
              }
#line 444
              if (tmp___34 != -1) {
                {
#line 444
                tmp___35 = fputc(0, svf);
                }
#line 444
                if (! (tmp___35 != -1)) {
#line 444
                  return ((zword )0);
                }
              } else {
#line 444
                return ((zword )0);
              }
            } else {
#line 444
              return ((zword )0);
            }
          } else {
#line 444
            return ((zword )0);
          }
        } else {
#line 444
          return ((zword )0);
        }
      } else {
#line 444
        return ((zword )0);
      }
    } else {
#line 444
      return ((zword )0);
    }
  } else {
#line 444
    return ((zword )0);
  }
  {
#line 445
  fseek(stf, 0L, 0);
#line 447
  i = (zword )0;
#line 447
  j = (zword )0;
#line 447
  cmemlen = (zlong )0;
  }
  {
#line 447
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 447
    if (! ((int )i < (int )h_dynamic_size)) {
#line 447
      goto while_break___0;
    }
    {
#line 449
    c = fgetc(stf);
    }
#line 449
    if (c == -1) {
#line 449
      return ((zword )0);
    }
#line 450
    c ^= (int )*(zmp + i);
#line 451
    if (c == 0) {
#line 452
      j = (zword )((int )j + 1);
    } else {
#line 456
      if ((int )j > 0) {
        {
#line 458
        while (1) {
          while_continue___1: /* CIL Label */ ;
#line 458
          if (! ((int )j > 256)) {
#line 458
            goto while_break___1;
          }
          {
#line 460
          tmp___36 = fputc(0, svf);
          }
#line 460
          if (tmp___36 != -1) {
            {
#line 460
            tmp___37 = fputc(255, svf);
            }
#line 460
            if (! (tmp___37 != -1)) {
#line 460
              return ((zword )0);
            }
          } else {
#line 460
            return ((zword )0);
          }
#line 461
          cmemlen += 2UL;
#line 458
          j = (zword )((int )j - 256);
        }
        while_break___1: /* CIL Label */ ;
        }
        {
#line 463
        tmp___38 = fputc(0, svf);
        }
#line 463
        if (tmp___38 != -1) {
          {
#line 463
          tmp___39 = fputc((int )j - 1, svf);
          }
#line 463
          if (! (tmp___39 != -1)) {
#line 463
            return ((zword )0);
          }
        } else {
#line 463
          return ((zword )0);
        }
#line 464
        cmemlen += 2UL;
#line 465
        j = (zword )0;
      }
      {
#line 468
      tmp___40 = fputc((int )((zbyte )c), svf);
      }
#line 468
      if (! (tmp___40 != -1)) {
#line 468
        return ((zword )0);
      }
#line 469
      cmemlen ++;
    }
#line 447
    i = (zword )((int )i + 1);
  }
  while_break___0: /* CIL Label */ ;
  }
#line 476
  if (cmemlen & 1UL) {
    {
#line 477
    tmp___41 = fputc(0, svf);
    }
#line 477
    if (! (tmp___41 != -1)) {
#line 477
      return ((zword )0);
    }
  }
  {
#line 480
  stkspos = ftell(svf);
  }
#line 480
  if (stkspos < 0L) {
#line 480
    return ((zword )0);
  }
  {
#line 481
  tmp___42 = fputc((int )(((zlong )((((83 << 24) | (116 << 16)) | (107 << 8)) | 115) >> 24) & 255UL),
                   svf);
  }
#line 481
  if (tmp___42 != -1) {
    {
#line 481
    tmp___43 = fputc((int )(((zlong )((((83 << 24) | (116 << 16)) | (107 << 8)) | 115) >> 16) & 255UL),
                     svf);
    }
#line 481
    if (tmp___43 != -1) {
      {
#line 481
      tmp___44 = fputc((int )(((zlong )((((83 << 24) | (116 << 16)) | (107 << 8)) | 115) >> 8) & 255UL),
                       svf);
      }
#line 481
      if (tmp___44 != -1) {
        {
#line 481
        tmp___45 = fputc((int )((zlong )((((83 << 24) | (116 << 16)) | (107 << 8)) | 115) & 255UL),
                         svf);
        }
#line 481
        if (tmp___45 != -1) {
          {
#line 481
          tmp___46 = fputc(0, svf);
          }
#line 481
          if (tmp___46 != -1) {
            {
#line 481
            tmp___47 = fputc(0, svf);
            }
#line 481
            if (tmp___47 != -1) {
              {
#line 481
              tmp___48 = fputc(0, svf);
              }
#line 481
              if (tmp___48 != -1) {
                {
#line 481
                tmp___49 = fputc(0, svf);
                }
#line 481
                if (! (tmp___49 != -1)) {
#line 481
                  return ((zword )0);
                }
              } else {
#line 481
                return ((zword )0);
              }
            } else {
#line 481
              return ((zword )0);
            }
          } else {
#line 481
            return ((zword )0);
          }
        } else {
#line 481
          return ((zword )0);
        }
      } else {
#line 481
        return ((zword )0);
      }
    } else {
#line 481
      return ((zword )0);
    }
  } else {
#line 481
    return ((zword )0);
  }
#line 488
  frames[0] = (zword )(sp - stack);
#line 489
  i = (zword )((fp - stack) + 4L);
#line 489
  n = (zword )0;
  {
#line 489
  while (1) {
    while_continue___2: /* CIL Label */ ;
#line 489
    if (! ((int )i < 1028)) {
#line 489
      goto while_break___2;
    }
#line 490
    n = (zword )((int )n + 1);
#line 490
    frames[n] = i;
#line 489
    i = (zword )((int )stack[(int )i - 3] + 5);
  }
  while_break___2: /* CIL Label */ ;
  }
#line 497
  if ((int )h_version != 6) {
#line 499
    i = (zword )0;
    {
#line 499
    while (1) {
      while_continue___3: /* CIL Label */ ;
#line 499
      if (! ((int )i < 6)) {
#line 499
        goto while_break___3;
      }
      {
#line 500
      tmp___50 = fputc(0, svf);
      }
#line 500
      if (! (tmp___50 != -1)) {
#line 500
        return ((zword )0);
      }
#line 499
      i = (zword )((int )i + 1);
    }
    while_break___3: /* CIL Label */ ;
    }
    {
#line 501
    nstk = (zword )(1024 - (int )frames[n]);
#line 502
    tmp___51 = fputc(((int )nstk >> 8) & 255, svf);
    }
#line 502
    if (tmp___51 != -1) {
      {
#line 502
      tmp___52 = fputc((int )nstk & 255, svf);
      }
#line 502
      if (! (tmp___52 != -1)) {
#line 502
        return ((zword )0);
      }
    } else {
#line 502
      return ((zword )0);
    }
#line 503
    j = (zword )1023;
    {
#line 503
    while (1) {
      while_continue___4: /* CIL Label */ ;
#line 503
      if (! ((int )j >= (int )frames[n])) {
#line 503
        goto while_break___4;
      }
      {
#line 504
      tmp___53 = fputc(((int )stack[j] >> 8) & 255, svf);
      }
#line 504
      if (tmp___53 != -1) {
        {
#line 504
        tmp___54 = fputc((int )stack[j] & 255, svf);
        }
#line 504
        if (! (tmp___54 != -1)) {
#line 504
          return ((zword )0);
        }
      } else {
#line 504
        return ((zword )0);
      }
#line 503
      j = (zword )((int )j - 1);
    }
    while_break___4: /* CIL Label */ ;
    }
#line 505
    stkslen = (zlong )(8 + 2 * (int )nstk);
  }
#line 509
  i = n;
  {
#line 509
  while (1) {
    while_continue___5: /* CIL Label */ ;
#line 509
    if (! ((int )i > 0)) {
#line 509
      goto while_break___5;
    }
#line 511
    p = (stack + (int )frames[i]) - 4;
#line 512
    nvars = (zword )(((int )*(p + 0) & 3840) >> 8);
#line 513
    nargs = (zword )((int )*(p + 0) & 255);
#line 514
    nstk = (zword )((((int )frames[i] - (int )frames[(int )i - 1]) - (int )nvars) - 4);
#line 515
    pc = ((zlong )*(p + 3) << 9) | (unsigned long )*(p + 2);
    {
#line 519
    if (((int )*(p + 0) & 61440) == 0) {
#line 519
      goto case_0;
    }
#line 523
    if (((int )*(p + 0) & 61440) == 4096) {
#line 523
      goto case_4096;
    }
#line 528
    goto switch_default;
    case_0: /* CIL Label */ 
#line 520
    var = *(zmp + pc);
#line 521
    pc = ((pc + 1UL) << 8) | (unsigned long )nvars;
#line 522
    goto switch_break;
    case_4096: /* CIL Label */ 
#line 524
    var = (zbyte )0;
#line 525
    pc = ((pc << 8) | 16UL) | (unsigned long )nvars;
#line 526
    goto switch_break;
    switch_default: /* CIL Label */ 
    {
#line 529
    runtime_error(14);
    }
#line 530
    return ((zword )0);
    switch_break: /* CIL Label */ ;
    }
#line 532
    if ((int )nargs != 0) {
#line 533
      nargs = (zword )((1 << (int )nargs) - 1);
    }
    {
#line 536
    tmp___55 = fputc((int )((pc >> 24) & 255UL), svf);
    }
#line 536
    if (tmp___55 != -1) {
      {
#line 536
      tmp___56 = fputc((int )((pc >> 16) & 255UL), svf);
      }
#line 536
      if (tmp___56 != -1) {
        {
#line 536
        tmp___57 = fputc((int )((pc >> 8) & 255UL), svf);
        }
#line 536
        if (tmp___57 != -1) {
          {
#line 536
          tmp___58 = fputc((int )(pc & 255UL), svf);
          }
#line 536
          if (tmp___58 != -1) {
            {
#line 536
            tmp___59 = fputc((int )var, svf);
            }
#line 536
            if (tmp___59 != -1) {
              {
#line 536
              tmp___60 = fputc((int )nargs, svf);
              }
#line 536
              if (tmp___60 != -1) {
                {
#line 536
                tmp___61 = fputc(((int )nstk >> 8) & 255, svf);
                }
#line 536
                if (tmp___61 != -1) {
                  {
#line 536
                  tmp___62 = fputc((int )nstk & 255, svf);
                  }
#line 536
                  if (! (tmp___62 != -1)) {
#line 539
                    return ((zword )0);
                  }
                } else {
#line 539
                  return ((zword )0);
                }
              } else {
#line 539
                return ((zword )0);
              }
            } else {
#line 539
              return ((zword )0);
            }
          } else {
#line 539
            return ((zword )0);
          }
        } else {
#line 539
          return ((zword )0);
        }
      } else {
#line 539
        return ((zword )0);
      }
    } else {
#line 539
      return ((zword )0);
    }
#line 542
    j = (zword )0;
#line 542
    p ++;
    {
#line 542
    while (1) {
      while_continue___6: /* CIL Label */ ;
#line 542
      if (! ((int )j < (int )nvars + (int )nstk)) {
#line 542
        goto while_break___6;
      }
      {
#line 543
      tmp___63 = fputc(((int )*p >> 8) & 255, svf);
      }
#line 543
      if (tmp___63 != -1) {
        {
#line 543
        tmp___64 = fputc((int )*p & 255, svf);
        }
#line 543
        if (! (tmp___64 != -1)) {
#line 543
          return ((zword )0);
        }
      } else {
#line 543
        return ((zword )0);
      }
#line 542
      j = (zword )((int )j + 1);
#line 542
      p --;
    }
    while_break___6: /* CIL Label */ ;
    }
#line 546
    stkslen += (zlong )(8 + 2 * ((int )nvars + (int )nstk));
#line 509
    i = (zword )((int )i - 1);
  }
  while_break___5: /* CIL Label */ ;
  }
#line 550
  ifzslen = (42UL + cmemlen) + stkslen;
#line 551
  if (cmemlen & 1UL) {
#line 552
    ifzslen ++;
  }
  {
#line 553
  fseek(svf, 4L, 0);
#line 554
  tmp___65 = fputc((int )((ifzslen >> 24) & 255UL), svf);
  }
#line 554
  if (tmp___65 != -1) {
    {
#line 554
    tmp___66 = fputc((int )((ifzslen >> 16) & 255UL), svf);
    }
#line 554
    if (tmp___66 != -1) {
      {
#line 554
      tmp___67 = fputc((int )((ifzslen >> 8) & 255UL), svf);
      }
#line 554
      if (tmp___67 != -1) {
        {
#line 554
        tmp___68 = fputc((int )(ifzslen & 255UL), svf);
        }
#line 554
        if (! (tmp___68 != -1)) {
#line 554
          return ((zword )0);
        }
      } else {
#line 554
        return ((zword )0);
      }
    } else {
#line 554
      return ((zword )0);
    }
  } else {
#line 554
    return ((zword )0);
  }
  {
#line 555
  fseek(svf, cmempos + 4L, 0);
#line 556
  tmp___69 = fputc((int )((cmemlen >> 24) & 255UL), svf);
  }
#line 556
  if (tmp___69 != -1) {
    {
#line 556
    tmp___70 = fputc((int )((cmemlen >> 16) & 255UL), svf);
    }
#line 556
    if (tmp___70 != -1) {
      {
#line 556
      tmp___71 = fputc((int )((cmemlen >> 8) & 255UL), svf);
      }
#line 556
      if (tmp___71 != -1) {
        {
#line 556
        tmp___72 = fputc((int )(cmemlen & 255UL), svf);
        }
#line 556
        if (! (tmp___72 != -1)) {
#line 556
          return ((zword )0);
        }
      } else {
#line 556
        return ((zword )0);
      }
    } else {
#line 556
      return ((zword )0);
    }
  } else {
#line 556
    return ((zword )0);
  }
  {
#line 557
  fseek(svf, stkspos + 4L, 0);
#line 558
  tmp___73 = fputc((int )((stkslen >> 24) & 255UL), svf);
  }
#line 558
  if (tmp___73 != -1) {
    {
#line 558
    tmp___74 = fputc((int )((stkslen >> 16) & 255UL), svf);
    }
#line 558
    if (tmp___74 != -1) {
      {
#line 558
      tmp___75 = fputc((int )((stkslen >> 8) & 255UL), svf);
      }
#line 558
      if (tmp___75 != -1) {
        {
#line 558
        tmp___76 = fputc((int )(stkslen & 255UL), svf);
        }
#line 558
        if (! (tmp___76 != -1)) {
#line 558
          return ((zword )0);
        }
      } else {
#line 558
        return ((zword )0);
      }
    } else {
#line 558
      return ((zword )0);
    }
  } else {
#line 558
    return ((zword )0);
  }
#line 561
  return ((zword )1);
}
}
#line 31 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_add(void) 
{ 


  {
  {
#line 34
  store((zword )((int )((short )zargs[0]) + (int )((short )zargs[1])));
  }
#line 36
  return;
}
}
#line 46 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_and(void) 
{ 


  {
  {
#line 49
  store((zword )((int )zargs[0] & (int )zargs[1]));
  }
#line 51
  return;
}
}
#line 61 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_art_shift(void) 
{ 


  {
#line 64
  if ((int )((short )zargs[1]) > 0) {
    {
#line 65
    store((zword )((int )((short )zargs[0]) << (int )((short )zargs[1])));
    }
  } else {
    {
#line 67
    store((zword )((int )((short )zargs[0]) >> - ((int )((short )zargs[1]))));
    }
  }
#line 69
  return;
}
}
#line 79 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_div(void) 
{ 


  {
#line 82
  if ((int )zargs[1] == 0) {
    {
#line 83
    runtime_error(3);
    }
  }
  {
#line 85
  store((zword )((int )((short )zargs[0]) / (int )((short )zargs[1])));
  }
#line 87
  return;
}
}
#line 99 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_je(void) 
{ 
  int tmp ;

  {
#line 102
  if (zargc > 1) {
#line 102
    if ((int )zargs[0] == (int )zargs[1]) {
#line 102
      tmp = 1;
    } else
#line 102
    if (zargc > 2) {
#line 102
      if ((int )zargs[0] == (int )zargs[2]) {
#line 102
        tmp = 1;
      } else
#line 102
      if (zargc > 3) {
#line 102
        if ((int )zargs[0] == (int )zargs[3]) {
#line 102
          tmp = 1;
        } else {
#line 102
          tmp = 0;
        }
      } else {
#line 102
        tmp = 0;
      }
    } else {
#line 102
      tmp = 0;
    }
  } else {
#line 102
    tmp = 0;
  }
  {
#line 102
  branch(tmp);
  }
#line 107
  return;
}
}
#line 117 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_jg(void) 
{ 


  {
  {
#line 120
  branch((int )((short )zargs[0]) > (int )((short )zargs[1]));
  }
#line 122
  return;
}
}
#line 132 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_jl(void) 
{ 


  {
  {
#line 135
  branch((int )((short )zargs[0]) < (int )((short )zargs[1]));
  }
#line 137
  return;
}
}
#line 146 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_jz(void) 
{ 


  {
  {
#line 149
  branch((int )((short )zargs[0]) == 0);
  }
#line 151
  return;
}
}
#line 161 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_log_shift(void) 
{ 


  {
#line 164
  if ((int )((short )zargs[1]) > 0) {
    {
#line 165
    store((zword )((int )zargs[0] << (int )((short )zargs[1])));
    }
  } else {
    {
#line 167
    store((zword )((int )zargs[0] >> - ((int )((short )zargs[1]))));
    }
  }
#line 169
  return;
}
}
#line 179 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_mod(void) 
{ 


  {
#line 182
  if ((int )zargs[1] == 0) {
    {
#line 183
    runtime_error(3);
    }
  }
  {
#line 185
  store((zword )((int )((short )zargs[0]) % (int )((short )zargs[1])));
  }
#line 187
  return;
}
}
#line 197 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_mul(void) 
{ 


  {
  {
#line 200
  store((zword )((int )((short )zargs[0]) * (int )((short )zargs[1])));
  }
#line 202
  return;
}
}
#line 211 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_not(void) 
{ 


  {
  {
#line 214
  store((zword )(~ ((int )zargs[0])));
  }
#line 216
  return;
}
}
#line 226 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_or(void) 
{ 


  {
  {
#line 229
  store((zword )((int )zargs[0] | (int )zargs[1]));
  }
#line 231
  return;
}
}
#line 241 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_sub(void) 
{ 


  {
  {
#line 244
  store((zword )((int )((short )zargs[0]) - (int )((short )zargs[1])));
  }
#line 246
  return;
}
}
#line 256 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/math.c"
void z_test(void) 
{ 


  {
  {
#line 259
  branch(((int )zargs[0] & (int )zargs[1]) == (int )zargs[1]);
  }
#line 261
  return;
}
}
#line 502 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
void init_err(void) ;
#line 30 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/err.c"
static int error_count[32]  ;
#line 32 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/err.c"
static char *err_messages[32]  = 
#line 32
  {      (char *)"Text buffer overflow",      (char *)"Store out of dynamic memory",      (char *)"Division by zero",      (char *)"Illegal object", 
        (char *)"Illegal attribute",      (char *)"No such property",      (char *)"Stack overflow",      (char *)"Call to illegal address", 
        (char *)"Call to non-routine",      (char *)"Stack underflow",      (char *)"Illegal opcode",      (char *)"Bad stack frame", 
        (char *)"Jump to illegal address",      (char *)"Can\'t save while in interrupt",      (char *)"Nesting stream #3 too deep",      (char *)"Illegal window", 
        (char *)"Illegal window property",      (char *)"Print at illegal address",      (char *)"@jin called with object 0",      (char *)"@get_child called with object 0", 
        (char *)"@get_parent called with object 0",      (char *)"@get_sibling called with object 0",      (char *)"@get_prop_addr called with object 0",      (char *)"@get_prop called with object 0", 
        (char *)"@put_prop called with object 0",      (char *)"@clear_attr called with object 0",      (char *)"@set_attr called with object 0",      (char *)"@test_attr called with object 0", 
        (char *)"@move_object called moving object 0",      (char *)"@move_object called moving into object 0",      (char *)"@remove_object called with object 0",      (char *)"@get_next_prop called with object 0"};
#line 67
static void print_long(unsigned long value , int base ) ;
#line 76 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/err.c"
void init_err(void) 
{ 
  int i ;

  {
#line 82
  i = 0;
  {
#line 82
  while (1) {
    while_continue: /* CIL Label */ ;
#line 82
    if (! (i < 32)) {
#line 82
      goto while_break;
    }
#line 83
    error_count[i] = 0;
#line 82
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 84
  return;
}
}
#line 96 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/err.c"
void runtime_error(int errnum ) 
{ 
  int wasfirst ;
  long pc ;

  {
#line 100
  if (errnum <= 0) {
#line 101
    return;
  } else
#line 100
  if (errnum > 32) {
#line 101
    return;
  }
#line 103
  if (f_setup.err_report_mode == 3) {
    {
#line 105
    flush_buffer();
#line 106
    os_fatal((char const   *)err_messages[errnum - 1]);
    }
#line 107
    return;
  } else
#line 103
  if (! f_setup.ignore_errors) {
#line 103
    if (errnum <= 18) {
      {
#line 105
      flush_buffer();
#line 106
      os_fatal((char const   *)err_messages[errnum - 1]);
      }
#line 107
      return;
    }
  }
#line 110
  wasfirst = error_count[errnum - 1] == 0;
#line 111
  (error_count[errnum - 1]) ++;
#line 113
  if (f_setup.err_report_mode == 2) {
#line 113
    goto _L;
  } else
#line 113
  if (f_setup.err_report_mode == 1) {
#line 113
    if (wasfirst) {
      _L: /* CIL Label */ 
      {
#line 117
      pc = pcp - zmp;
#line 118
      print_string("Warning: ");
#line 119
      print_string((char const   *)err_messages[errnum - 1]);
#line 120
      print_string(" (PC = ");
#line 121
      print_long((unsigned long )pc, 16);
#line 122
      print_char((zchar )')');
      }
#line 124
      if (f_setup.err_report_mode == 1) {
        {
#line 125
        print_string(" (will ignore further occurrences)");
        }
      } else {
        {
#line 127
        print_string(" (occurence ");
#line 128
        print_long((unsigned long )error_count[errnum - 1], 10);
#line 129
        print_char((zchar )')');
        }
      }
      {
#line 131
      new_line();
      }
    }
  }
#line 134
  return;
}
}
#line 143 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/err.c"
static void print_long(unsigned long value , int base ) 
{ 
  unsigned long i ;
  char c ;
  int tmp ;

  {
#line 148
  if (base == 10) {
#line 148
    i = 1000000000UL;
  } else {
#line 148
    i = 268435456UL;
  }
  {
#line 148
  while (1) {
    while_continue: /* CIL Label */ ;
#line 148
    if (! (i != 0UL)) {
#line 148
      goto while_break;
    }
#line 149
    if (value >= i) {
#line 149
      goto _L;
    } else
#line 149
    if (i == 1UL) {
      _L: /* CIL Label */ 
#line 150
      c = (char )((value / i) % (unsigned long )base);
#line 151
      if ((int )c <= 9) {
#line 151
        tmp = '0';
      } else {
#line 151
        tmp = 87;
      }
      {
#line 151
      print_char((zchar )((int )c + tmp));
      }
    }
#line 148
    i /= (unsigned long )base;
  }
  while_break: /* CIL Label */ ;
  }
#line 154
  return;
}
}
#line 347 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
zword stack[1024]  ;
#line 374 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/frotz.h"
char *option_zcode_path  ;
#line 594
extern void os_init_screen(void) ;
#line 599
extern void os_process_arguments(int  , char ** ) ;
#line 604
extern void os_reset_screen(void) ;
#line 614
extern void os_init_setup(void) ;
#line 42 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
char *story_name  =    (char *)0;
#line 44 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
enum story story_id  =    (enum story )7;
#line 45 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
long story_size  =    0L;
#line 49 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_version  =    (zbyte )0;
#line 50 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_config  =    (zbyte )0;
#line 51 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_release  =    (zword )0;
#line 52 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_resident_size  =    (zword )0;
#line 53 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_start_pc  =    (zword )0;
#line 54 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_dictionary  =    (zword )0;
#line 55 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_objects  =    (zword )0;
#line 56 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_globals  =    (zword )0;
#line 57 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_dynamic_size  =    (zword )0;
#line 58 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_flags  =    (zword )0;
#line 59 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_serial[6]  = {      (zbyte )0,      (zbyte )0,      (zbyte )0,      (zbyte )0, 
        (zbyte )0,      (zbyte )0};
#line 60 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_abbreviations  =    (zword )0;
#line 61 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_file_size  =    (zword )0;
#line 62 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_checksum  =    (zword )0;
#line 63 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_interpreter_number  =    (zbyte )0;
#line 64 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_interpreter_version  =    (zbyte )0;
#line 65 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_screen_rows  =    (zbyte )0;
#line 66 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_screen_cols  =    (zbyte )0;
#line 67 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_screen_width  =    (zword )0;
#line 68 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_screen_height  =    (zword )0;
#line 69 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_font_height  =    (zbyte )1;
#line 70 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_font_width  =    (zbyte )1;
#line 71 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_functions_offset  =    (zword )0;
#line 72 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_strings_offset  =    (zword )0;
#line 73 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_default_background  =    (zbyte )0;
#line 74 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_default_foreground  =    (zbyte )0;
#line 75 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_terminating_keys  =    (zword )0;
#line 76 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_line_width  =    (zword )0;
#line 77 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_standard_high  =    (zbyte )1;
#line 78 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_standard_low  =    (zbyte )0;
#line 79 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_alphabet  =    (zword )0;
#line 80 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword h_extension_table  =    (zword )0;
#line 81 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zbyte h_user_name[8]  = 
#line 81
  {      (zbyte )0,      (zbyte )0,      (zbyte )0,      (zbyte )0, 
        (zbyte )0,      (zbyte )0,      (zbyte )0,      (zbyte )0};
#line 83 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword hx_table_size  =    (zword )0;
#line 84 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword hx_mouse_x  =    (zword )0;
#line 85 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword hx_mouse_y  =    (zword )0;
#line 86 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword hx_unicode_table  =    (zword )0;
#line 91 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword *sp  =    (zword *)0;
#line 92 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword *fp  =    (zword *)0;
#line 93 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
zword frame_count  =    (zword )0;
#line 97 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool ostream_screen  =    1;
#line 98 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool ostream_script  =    0;
#line 99 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool ostream_memory  =    0;
#line 100 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool ostream_record  =    0;
#line 101 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool istream_replay  =    0;
#line 102 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool message  =    0;
#line 106 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int cwin  =    0;
#line 107 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int mwin  =    0;
#line 109 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int mouse_y  =    0;
#line 110 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int mouse_x  =    0;
#line 114 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool enable_wrapping  =    0;
#line 115 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool enable_scripting  =    0;
#line 116 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool enable_scrolling  =    0;
#line 117 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
bool enable_buffering  =    0;
#line 137 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int option_sound  =    1;
#line 143 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
long reserve_mem  =    0L;
#line 152 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
void z_piracy(void) 
{ 


  {
  {
#line 155
  branch(! f_setup.piracy);
  }
#line 157
  return;
}
}
#line 166 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/main.c"
int main(int argc , char **argv ) 
{ 


  {
  {
#line 169
  os_init_setup();
#line 171
  os_process_arguments(argc, argv);
#line 173
  init_buffer();
#line 175
  init_err();
#line 177
  init_memory();
#line 179
  init_process();
#line 181
  init_sound();
#line 183
  os_init_screen();
#line 185
  init_undo();
#line 187
  z_restart();
#line 189
  interpret();
#line 191
  reset_memory();
#line 193
  os_reset_screen();
  }
#line 195
  return (0);
}
}
#line 43 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_debugging(void) 
{ 


  {
  {
#line 46
  print_string("Debugging options\n");
#line 48
  f_setup.attribute_assignment = read_yes_or_no("Watch attribute assignment");
#line 49
  f_setup.attribute_testing = read_yes_or_no("Watch attribute testing");
#line 51
  f_setup.object_movement = read_yes_or_no("Watch object movement");
#line 52
  f_setup.object_locating = read_yes_or_no("Watch object locating");
  }
#line 54
  return (0);
}
}
#line 65 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_help(void) 
{ 


  {
  {
#line 67
  print_string("Help\n");
#line 69
  print_string("\nAlt-D  debugging options\nAlt-H  help\nAlt-N  new game\nAlt-P  playback on\nAlt-R  recording on/off\nAlt-S  seed random numbers\nAlt-U  undo one turn\nAlt-X  exit game\n");
  }
#line 80
  return (0);
}
}
#line 91 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_playback(void) 
{ 


  {
  {
#line 94
  print_string("Playback on\n");
  }
#line 96
  if (! istream_replay) {
    {
#line 97
    replay_open();
    }
  }
#line 99
  return (0);
}
}
#line 110 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_recording(void) 
{ 


  {
#line 113
  if (istream_replay) {
    {
#line 114
    print_string("Playback off\n");
#line 115
    replay_close();
    }
  } else
#line 116
  if (ostream_record) {
    {
#line 117
    print_string("Recording off\n");
#line 118
    record_close();
    }
  } else {
    {
#line 120
    print_string("Recording on\n");
#line 121
    record_open();
    }
  }
#line 124
  return (0);
}
}
#line 135 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_seed(void) 
{ 
  int tmp ;

  {
  {
#line 138
  print_string("Seed random numbers\n");
#line 140
  print_string("Enter seed value (or return to randomize): ");
#line 141
  tmp = read_number();
#line 141
  seed_random(tmp);
  }
#line 143
  return (0);
}
}
#line 154 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_undo(void) 
{ 
  int tmp ;

  {
  {
#line 157
  print_string("Undo one turn\n");
#line 159
  tmp = restore_undo();
  }
#line 159
  if (tmp) {
#line 161
    if ((int )h_version >= 5) {
      {
#line 162
      store((zword )2);
      }
#line 163
      return (1);
    }
#line 166
    if ((int )h_version <= 3) {
      {
#line 167
      z_show_status();
      }
#line 168
      return (0);
    }
  } else {
    {
#line 171
    print_string("No more undo information available.\n");
    }
  }
#line 173
  return (0);
}
}
#line 184 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_restart(void) 
{ 
  bool tmp ;

  {
  {
#line 187
  print_string("New game\n");
#line 189
  tmp = read_yes_or_no("Do you wish to restart");
  }
#line 189
  if (tmp) {
    {
#line 191
    z_restart();
    }
#line 192
    return (1);
  } else {
#line 194
    return (0);
  }
}
}
#line 205 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
static bool hot_key_quit(void) 
{ 
  bool tmp ;

  {
  {
#line 208
  print_string("Exit game\n");
#line 210
  tmp = read_yes_or_no("Do you wish to quit");
  }
#line 210
  if (tmp) {
    {
#line 212
    z_quit();
    }
#line 213
    return (1);
  } else {
#line 215
    return (0);
  }
}
}
#line 227 "/home/june/repo/benchmarks/collector/temp/frotz-2.43/src/common/hotkey.c"
bool handle_hot_key(zchar key ) 
{ 
  bool aborting ;

  {
#line 230
  if (cwin == 0) {
    {
#line 234
    aborting = 0;
#line 236
    print_string("\nHot key -- ");
    }
    {
#line 239
    if ((int )key == 14) {
#line 239
      goto case_14;
    }
#line 240
    if ((int )key == 15) {
#line 240
      goto case_15;
    }
#line 241
    if ((int )key == 16) {
#line 241
      goto case_16;
    }
#line 242
    if ((int )key == 17) {
#line 242
      goto case_17;
    }
#line 243
    if ((int )key == 18) {
#line 243
      goto case_18;
    }
#line 244
    if ((int )key == 19) {
#line 244
      goto case_19;
    }
#line 245
    if ((int )key == 20) {
#line 245
      goto case_20;
    }
#line 246
    if ((int )key == 21) {
#line 246
      goto case_21;
    }
#line 238
    goto switch_break;
    case_14: /* CIL Label */ 
    {
#line 239
    aborting = hot_key_recording();
    }
#line 239
    goto switch_break;
    case_15: /* CIL Label */ 
    {
#line 240
    aborting = hot_key_playback();
    }
#line 240
    goto switch_break;
    case_16: /* CIL Label */ 
    {
#line 241
    aborting = hot_key_seed();
    }
#line 241
    goto switch_break;
    case_17: /* CIL Label */ 
    {
#line 242
    aborting = hot_key_undo();
    }
#line 242
    goto switch_break;
    case_18: /* CIL Label */ 
    {
#line 243
    aborting = hot_key_restart();
    }
#line 243
    goto switch_break;
    case_19: /* CIL Label */ 
    {
#line 244
    aborting = hot_key_quit();
    }
#line 244
    goto switch_break;
    case_20: /* CIL Label */ 
    {
#line 245
    aborting = hot_key_debugging();
    }
#line 245
    goto switch_break;
    case_21: /* CIL Label */ 
    {
#line 246
    aborting = hot_key_help();
    }
#line 246
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 249
    if (aborting) {
#line 250
      return (1);
    }
    {
#line 252
    print_string("\nContinue input...\n");
    }
  }
#line 256
  return (0);
}
}
