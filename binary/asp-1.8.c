/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 125 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __uid_t;
#line 126 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __gid_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 49 "/usr/include/pwd.h"
struct passwd {
   char *pw_name ;
   char *pw_passwd ;
   __uid_t pw_uid ;
   __gid_t pw_gid ;
   char *pw_gecos ;
   char *pw_dir ;
   char *pw_shell ;
};
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 49 "/usr/include/stdint.h"
typedef unsigned short uint16_t;
#line 51 "/usr/include/stdint.h"
typedef unsigned int uint32_t;
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 141 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __suseconds_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 189 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __socklen_t;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 30 "/usr/include/x86_64-linux-gnu/bits/time.h"
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
#line 54 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef long __fd_mask;
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
struct __anonstruct_fd_set_3 {
   __fd_mask __fds_bits[1024 / (8 * (int )sizeof(__fd_mask ))] ;
};
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef struct __anonstruct_fd_set_3 fd_set;
#line 33 "/usr/include/x86_64-linux-gnu/bits/socket.h"
typedef __socklen_t socklen_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/sockaddr.h"
typedef unsigned short sa_family_t;
#line 149 "/usr/include/x86_64-linux-gnu/bits/socket.h"
struct sockaddr {
   sa_family_t sa_family ;
   char sa_data[14] ;
};
#line 30 "/usr/include/netinet/in.h"
typedef uint32_t in_addr_t;
#line 31 "/usr/include/netinet/in.h"
struct in_addr {
   in_addr_t s_addr ;
};
#line 117 "/usr/include/netinet/in.h"
typedef uint16_t in_port_t;
#line 237 "/usr/include/netinet/in.h"
struct sockaddr_in {
   sa_family_t sin_family ;
   in_port_t sin_port ;
   struct in_addr sin_addr ;
   unsigned char sin_zero[((sizeof(struct sockaddr ) - sizeof(unsigned short )) - sizeof(in_port_t )) - sizeof(struct in_addr )] ;
};
#line 133 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef int __pid_t;
#line 183 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef char *__caddr_t;
#line 98 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __pid_t pid_t;
#line 257 "/usr/include/netdb.h"
struct servent {
   char *s_name ;
   char **s_aliases ;
   int s_port ;
   char *s_proto ;
};
#line 85 "/usr/include/signal.h"
typedef void (*__sighandler_t)(int  );
#line 111 "/usr/include/net/if.h"
struct ifmap {
   unsigned long mem_start ;
   unsigned long mem_end ;
   unsigned short base_addr ;
   unsigned char irq ;
   unsigned char dma ;
   unsigned char port ;
};
#line 126 "/usr/include/net/if.h"
union __anonunion_ifr_ifrn_62 {
   char ifrn_name[16] ;
};
#line 126 "/usr/include/net/if.h"
union __anonunion_ifr_ifru_63 {
   struct sockaddr ifru_addr ;
   struct sockaddr ifru_dstaddr ;
   struct sockaddr ifru_broadaddr ;
   struct sockaddr ifru_netmask ;
   struct sockaddr ifru_hwaddr ;
   short ifru_flags ;
   int ifru_ivalue ;
   int ifru_mtu ;
   struct ifmap ifru_map ;
   char ifru_slave[16] ;
   char ifru_newname[16] ;
   __caddr_t ifru_data ;
};
#line 126 "/usr/include/net/if.h"
struct ifreq {
   union __anonunion_ifr_ifrn_62 ifr_ifrn ;
   union __anonunion_ifr_ifru_63 ifr_ifru ;
};
#line 20 "/home/june/collector/temp/asp-1.8/asplib.c"
static char rcsid[51]  = 
#line 20 "/home/june/collector/temp/asp-1.8/asplib.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'a',      (char )'s',      (char )'p', 
        (char )'l',      (char )'i',      (char )'b',      (char )'.', 
        (char )'c',      (char )',',      (char )'v',      (char )' ', 
        (char )'1',      (char )'.',      (char )'1',      (char )'6', 
        (char )' ',      (char )'2',      (char )'0',      (char )'0', 
        (char )'1',      (char )'/',      (char )'0',      (char )'1', 
        (char )'/',      (char )'2',      (char )'3',      (char )' ', 
        (char )'1',      (char )'1',      (char )':',      (char )'2', 
        (char )'0',      (char )':',      (char )'0',      (char )'1', 
        (char )' ',      (char )'s',      (char )'t',      (char )'e', 
        (char )' ',      (char )'E',      (char )'x',      (char )'p', 
        (char )' ',      (char )'$',      (char )'\000'};
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 116 "/usr/include/pwd.h"
extern struct passwd *getpwnam(char const   *__name ) ;
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 846
extern void perror(char const   *__s ) ;
#line 183 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) long ( __attribute__((__nonnull__(1), __leaf__)) strtol)(char const   * __restrict  __nptr ,
                                                                                              char ** __restrict  __endptr ,
                                                                                              int __base ) ;
#line 466
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 564
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) getenv)(char const   *__name ) ;
#line 129 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 132
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strncpy)(char * __restrict  __dest ,
                                                                                                  char const   * __restrict  __src ,
                                                                                                  size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 236
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strchr)(char const   *__s ,
                                                                                               int __c )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 139 "/home/june/collector/temp/asp-1.8/asp.h"
char *prog_name ;
#line 145
void *emalloc(int size , char *s ) ;
#line 147
char *tilde_expand(char *sz ) ;
#line 149
int bound_check(char *sz , int min , int max , int *dest ) ;
#line 154
void asp_perror(char *s ) ;
#line 24 "/home/june/collector/temp/asp-1.8/asplib.c"
void avoid_asplib_rcsid_warning(void) 
{ 


  {
#line 25
  rcsid[0] = (char)0;
#line 26
  return;
}
}
#line 104 "/home/june/collector/temp/asp-1.8/asplib.c"
void *emalloc(int size , char *s ) 
{ 
  void *p ;

  {
  {
#line 107
  p = malloc((unsigned long )size * sizeof(char ));
  }
#line 107
  if ((unsigned long )p == (unsigned long )((void *)0)) {
    {
#line 108
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: %s: virtual memory exausted\n",
            prog_name, s);
#line 109
    exit(1);
    }
  }
#line 111
  return (p);
}
}
#line 118 "/home/june/collector/temp/asp-1.8/asplib.c"
int bound_check(char *sz , int min , int max , int *dest ) 
{ 
  char *endp ;
  long l ;
  int *tmp ;
  int *tmp___0 ;
  int tmp___1 ;

  {
  {
#line 122
  tmp = __errno_location();
#line 122
  *tmp = 0;
#line 123
  l = strtol((char const   */* __restrict  */)sz, (char **/* __restrict  */)(& endp),
             10);
#line 125
  tmp___0 = __errno_location();
  }
#line 125
  if (*tmp___0 == 34) {
#line 127
    return (-1);
  } else {
    {
#line 125
    tmp___1 = strcmp((char const   *)endp, "");
    }
#line 125
    if (tmp___1 != 0) {
#line 127
      return (-1);
    } else
#line 125
    if (l < (long )min) {
#line 127
      return (-1);
    } else
#line 125
    if (l > (long )max) {
#line 127
      return (-1);
    }
  }
#line 129
  *dest = (int )l;
#line 131
  return (0);
}
}
#line 137 "/home/june/collector/temp/asp-1.8/asplib.c"
char *combine(char *l , char *r ) 
{ 
  char *res ;
  int len_l ;
  int len_r ;
  size_t tmp ;
  size_t tmp___0 ;
  void *tmp___1 ;
  void *tmp___2 ;
  void *tmp___3 ;
  void *tmp___4 ;

  {
  {
#line 141
  tmp = strlen((char const   *)l);
#line 141
  len_l = (int )tmp;
#line 142
  tmp___0 = strlen((char const   *)r);
#line 142
  len_r = (int )tmp___0;
  }
#line 143
  if ((int )*((l + len_l) - 1) == 47) {
#line 144
    if ((int )*r == 47) {
      {
#line 145
      tmp___1 = emalloc(len_l + len_r, (char *)"combine");
#line 145
      res = (char *)tmp___1;
#line 146
      strcpy((char */* __restrict  */)res, (char const   */* __restrict  */)l);
#line 147
      strcpy((char */* __restrict  */)(res + len_l), (char const   */* __restrict  */)(r + 1));
      }
    } else {
      {
#line 149
      tmp___2 = emalloc((len_l + len_r) + 1, (char *)"combine");
#line 149
      res = (char *)tmp___2;
#line 150
      strcpy((char */* __restrict  */)res, (char const   */* __restrict  */)l);
#line 151
      strcpy((char */* __restrict  */)(res + len_l), (char const   */* __restrict  */)r);
      }
    }
  } else
#line 154
  if ((int )*r == 47) {
    {
#line 155
    tmp___3 = emalloc((len_l + len_r) + 1, (char *)"combine");
#line 155
    res = (char *)tmp___3;
#line 156
    strcpy((char */* __restrict  */)res, (char const   */* __restrict  */)l);
#line 157
    strcpy((char */* __restrict  */)(res + len_l), (char const   */* __restrict  */)r);
    }
  } else {
    {
#line 159
    tmp___4 = emalloc((len_l + len_r) + 2, (char *)"combine");
#line 159
    res = (char *)tmp___4;
#line 160
    strcpy((char */* __restrict  */)res, (char const   */* __restrict  */)l);
#line 161
    *(res + len_l) = (char )'/';
#line 162
    strcpy((char */* __restrict  */)((res + len_l) + 1), (char const   */* __restrict  */)r);
    }
  }
#line 165
  return (res);
}
}
#line 171 "/home/june/collector/temp/asp-1.8/asplib.c"
char *tilde_expand(char *sz ) 
{ 
  char *home ;
  struct passwd *entry ;
  char *tmp ;
  int tmp___0 ;
  int tmp___1 ;
  char *tmp___2 ;
  char *p ;
  char *p1 ;
  void *tmp___3 ;
  char *tmp___4 ;
  size_t tmp___5 ;
  void *tmp___6 ;
  size_t tmp___7 ;
  void *tmp___8 ;
  char *tmp___9 ;

  {
#line 175
  if ((int )*sz == 126) {
#line 176
    if ((int )*(sz + 1) == 0) {
      {
#line 177
      home = getenv("HOME");
      }
#line 177
      if ((unsigned long )home == (unsigned long )((void *)0)) {
        {
#line 178
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
                prog_name);
#line 179
        exit(1);
        }
      } else {
        {
#line 177
        tmp___0 = strcmp((char const   *)home, "");
        }
#line 177
        if (tmp___0 == 0) {
          {
#line 178
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
                  prog_name);
#line 179
          exit(1);
          }
        } else {
          {
#line 180
          tmp = getenv("HOME");
          }
#line 180
          return (tmp);
        }
      }
    }
#line 181
    if ((int )*(sz + 1) == 47) {
      {
#line 182
      home = getenv("HOME");
      }
#line 182
      if ((unsigned long )home == (unsigned long )((void *)0)) {
        {
#line 183
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
                prog_name);
#line 184
        exit(1);
        }
      } else {
        {
#line 182
        tmp___1 = strcmp((char const   *)home, "");
        }
#line 182
        if (tmp___1 == 0) {
          {
#line 183
          fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
                  prog_name);
#line 184
          exit(1);
          }
        }
      }
      {
#line 186
      tmp___2 = combine(home, sz + 1);
      }
#line 186
      return (tmp___2);
    } else {
      {
#line 189
      p = strchr((char const   *)sz, '/');
      }
#line 190
      if ((unsigned long )p != (unsigned long )((void *)0)) {
        {
#line 191
        tmp___3 = emalloc((int )(p - sz), (char *)"tilde_expand");
#line 191
        p1 = (char *)tmp___3;
#line 192
        strncpy((char */* __restrict  */)p1, (char const   */* __restrict  */)(sz + 1),
                (size_t )((p - sz) - 1L));
#line 193
        *(p1 + ((p - sz) - 1L)) = (char )'\000';
#line 194
        entry = getpwnam((char const   *)p1);
#line 195
        free((void *)p1);
#line 196
        tmp___4 = combine(entry->pw_dir, p + 1);
        }
#line 196
        return (tmp___4);
      } else {
        {
#line 198
        tmp___5 = strlen((char const   *)sz);
#line 198
        tmp___6 = emalloc((int )tmp___5, (char *)"tilde_expand");
#line 198
        p1 = (char *)tmp___6;
#line 199
        strcpy((char */* __restrict  */)p1, (char const   */* __restrict  */)(sz + 1));
#line 200
        entry = getpwnam((char const   *)p1);
#line 201
        free((void *)p1);
        }
#line 202
        return (entry->pw_dir);
      }
    }
  } else {
    {
#line 206
    tmp___7 = strlen((char const   *)sz);
#line 206
    tmp___8 = emalloc((int )(tmp___7 + 1UL), (char *)"tilde_expand");
#line 206
    tmp___9 = strcpy((char */* __restrict  */)tmp___8, (char const   */* __restrict  */)sz);
    }
#line 206
    return (tmp___9);
  }
}
}
#line 210 "/home/june/collector/temp/asp-1.8/asplib.c"
void asp_perror(char *s ) 
{ 


  {
  {
#line 211
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: ",
          prog_name);
#line 212
  perror((char const   *)s);
#line 213
  exit(1);
  }
}
}
#line 20 "/home/june/collector/temp/asp-1.8/comm.c"
static char rcsid___0[49]  = 
#line 20 "/home/june/collector/temp/asp-1.8/comm.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'c',      (char )'o',      (char )'m', 
        (char )'m',      (char )'.',      (char )'c',      (char )',', 
        (char )'v',      (char )' ',      (char )'1',      (char )'.', 
        (char )'1',      (char )'6',      (char )' ',      (char )'2', 
        (char )'0',      (char )'0',      (char )'1',      (char )'/', 
        (char )'0',      (char )'1',      (char )'/',      (char )'2', 
        (char )'3',      (char )' ',      (char )'1',      (char )'1', 
        (char )':',      (char )'2',      (char )'0',      (char )':', 
        (char )'0',      (char )'1',      (char )' ',      (char )'s', 
        (char )'t',      (char )'e',      (char )' ',      (char )'E', 
        (char )'x',      (char )'p',      (char )' ',      (char )'$', 
        (char )'\000'};
#line 106 "/usr/include/x86_64-linux-gnu/sys/select.h"
extern int select(int __nfds , fd_set * __restrict  __readfds , fd_set * __restrict  __writefds ,
                  fd_set * __restrict  __exceptfds , struct timeval * __restrict  __timeout ) ;
#line 163 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern ssize_t sendto(int __fd , void const   *__buf , size_t __n , int __flags ,
                      struct sockaddr  const  *__addr , socklen_t __addr_len ) ;
#line 174
extern ssize_t recvfrom(int __fd , void * __restrict  __buf , size_t __n , int __flags ,
                        struct sockaddr * __restrict  __addr , socklen_t * __restrict  __addr_len ) ;
#line 219
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getsockopt)(int __fd ,
                                                                                 int __level ,
                                                                                 int __optname ,
                                                                                 void * __restrict  __optval ,
                                                                                 socklen_t * __restrict  __optlen ) ;
#line 53 "/usr/include/arpa/inet.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) inet_ntoa)(struct in_addr __in ) ;
#line 459 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void ( __attribute__((__nonnull__(1), __leaf__)) bzero)(void *__s ,
                                                                                             size_t __n ) ;
#line 138 "/home/june/collector/temp/asp-1.8/asp.h"
int verbose ;
#line 150
int asp_send(int s , int len , char *msg , struct sockaddr *to ) ;
#line 151
int asp_recv(int s , int len , char *buf , char *host2find___0 , struct sockaddr *from ,
             int delay ) ;
#line 153
int input_timeout(int filedes , unsigned int seconds , unsigned int micros ) ;
#line 24 "/home/june/collector/temp/asp-1.8/comm.c"
void avoid_comm_rcsid_warning(void) 
{ 


  {
#line 25
  rcsid___0[0] = (char)0;
#line 26
  return;
}
}
#line 32 "/home/june/collector/temp/asp-1.8/comm.c"
int input_timeout(int filedes , unsigned int seconds , unsigned int micros ) 
{ 
  fd_set set ;
  struct timeval timeout ;
  int __d0 ;
  int __d1 ;
  int tmp ;

  {
  {
#line 37
  while (1) {
    while_continue: /* CIL Label */ ;
#line 37
    __asm__  volatile   ("cld; rep; "
                         "stosq": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) / sizeof(__fd_mask )),
                         "1" (& set.__fds_bits[0]): "memory");
#line 37
    goto while_break;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 38
  set.__fds_bits[filedes / (8 * (int )sizeof(__fd_mask ))] |= 1L << filedes % (8 * (int )sizeof(__fd_mask ));
#line 41
  timeout.tv_sec = (__time_t )seconds;
#line 42
  timeout.tv_usec = (__suseconds_t )micros;
#line 45
  tmp = select(1024, (fd_set */* __restrict  */)(& set), (fd_set */* __restrict  */)((void *)0),
               (fd_set */* __restrict  */)((void *)0), (struct timeval */* __restrict  */)(& timeout));
  }
#line 45
  return (tmp);
}
}
#line 49 "/home/june/collector/temp/asp-1.8/comm.c"
int verbose  =    0;
#line 51 "/home/june/collector/temp/asp-1.8/comm.c"
int asp_send(int s , int len , char *msg , struct sockaddr *to ) 
{ 
  int out_stat ;
  int err ;
  int err_size ;
  int *tmp ;
  ssize_t tmp___0 ;
  char *tmp___1 ;

  {
  {
#line 52
  err_size = (int )sizeof(int );
#line 54
  tmp___0 = sendto(s, (void const   *)msg, (size_t )len, 0, (struct sockaddr  const  *)to,
                   (socklen_t )sizeof(struct sockaddr ));
#line 54
  out_stat = (int )tmp___0;
  }
#line 54
  if (out_stat == -1) {
    {
#line 57
    tmp = __errno_location();
    }
#line 57
    if (*tmp != 111) {
      {
#line 57
      asp_perror((char *)"sendto");
      }
    }
  }
#line 62
  if (verbose == 1) {
    {
#line 62
    tmp___1 = inet_ntoa(((struct sockaddr_in *)to)->sin_addr);
#line 62
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"sent %s to: %s\n",
            msg, tmp___1);
    }
  }
  {
#line 77
  out_stat = getsockopt(s, 1, 4, (void */* __restrict  */)(& err), (socklen_t */* __restrict  */)(& err_size));
  }
#line 77
  if (out_stat == -1) {
    {
#line 79
    asp_perror((char *)"getsockopt");
    }
  }
#line 89
  if (err != 0) {
#line 89
    return (1);
  } else {
#line 90
    return (0);
  }
}
}
#line 98 "/home/june/collector/temp/asp-1.8/comm.c"
int asp_recv(int s , int len , char *buf , char *host2find___0 , struct sockaddr *from ,
             int delay ) 
{ 
  int in_stat ;
  int size_from ;
  ssize_t tmp ;
  int tmp___0 ;

  {
#line 101
  size_from = (int )sizeof(struct sockaddr );
  {
#line 105
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 105
    in_stat = input_timeout(s, (unsigned int )delay, 0U);
    }
#line 105
    if (! (in_stat == 1)) {
#line 105
      goto while_break;
    }
    {
#line 108
    bzero((void *)buf, (size_t )64);
#line 111
    tmp = recvfrom(s, (void */* __restrict  */)buf, (size_t )len, 0, (struct sockaddr */* __restrict  */)from,
                   (socklen_t */* __restrict  */)(& size_from));
#line 111
    in_stat = (int )tmp;
    }
#line 111
    if (in_stat == -1) {
#line 121
      goto while_continue;
    }
    {
#line 135
    tmp___0 = strcmp((char const   *)host2find___0, (char const   *)buf);
    }
#line 135
    if (tmp___0 != 0) {
#line 135
      goto while_continue;
    } else {
#line 136
      return (1);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 139
  return (in_stat);
}
}
#line 20 "/home/june/collector/temp/asp-1.8/aspd.c"
static char rcsid___1[49]  = 
#line 20 "/home/june/collector/temp/asp-1.8/aspd.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'a',      (char )'s',      (char )'p', 
        (char )'d',      (char )'.',      (char )'c',      (char )',', 
        (char )'v',      (char )' ',      (char )'1',      (char )'.', 
        (char )'3',      (char )'9',      (char )' ',      (char )'2', 
        (char )'0',      (char )'0',      (char )'1',      (char )'/', 
        (char )'0',      (char )'2',      (char )'/',      (char )'0', 
        (char )'1',      (char )' ',      (char )'1',      (char )'9', 
        (char )':',      (char )'2',      (char )'7',      (char )':', 
        (char )'2',      (char )'6',      (char )' ',      (char )'s', 
        (char )'t',      (char )'e',      (char )' ',      (char )'E', 
        (char )'x',      (char )'p',      (char )' ',      (char )'$', 
        (char )'\000'};
#line 113 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) socket)(int __domain ,
                                                                             int __type ,
                                                                             int __protocol ) ;
#line 123
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) bind)(int __fd ,
                                                                           struct sockaddr  const  *__addr ,
                                                                           socklen_t __len ) ;
#line 375 "/usr/include/netinet/in.h"
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) ntohs)(uint16_t __netshort )  __attribute__((__const__)) ;
#line 377
extern  __attribute__((__nothrow__)) uint32_t ( __attribute__((__leaf__)) htonl)(uint32_t __hostlong )  __attribute__((__const__)) ;
#line 379
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) htons)(uint16_t __hostshort )  __attribute__((__const__)) ;
#line 290 "/usr/include/netdb.h"
extern struct servent *getservbyname(char const   *__name , char const   *__proto ) ;
#line 102 "/usr/include/signal.h"
extern  __attribute__((__nothrow__)) __sighandler_t ( __attribute__((__leaf__)) signal)(int __sig ,
                                                                                        void (*__handler)(int  ) ) ;
#line 139
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) raise)(int __sig ) ;
#line 66 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 263
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strrchr)(char const   *__s ,
                                                                                                int __c )  __attribute__((__pure__)) ;
#line 564
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) strsignal)(int __sig ) ;
#line 175 "/usr/include/x86_64-linux-gnu/sys/syslog.h"
extern void closelog(void) ;
#line 181
extern void openlog(char const   *__ident , int __option , int __facility ) ;
#line 190
extern void ( /* format attribute */  syslog)(int __pri , char const   *__fmt  , ...) ;
#line 756 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) __pid_t fork(void) ;
#line 57 "/usr/include/getopt.h"
extern char *optarg ;
#line 71
extern int optind ;
#line 76
extern int opterr ;
#line 150
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) getopt)(int ___argc ,
                                                                             char * const  *___argv ,
                                                                             char const   *__shortopts ) ;
#line 879 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) gethostname)(char *__name ,
                                                                                                  size_t __len ) ;
#line 41 "/usr/include/x86_64-linux-gnu/sys/ioctl.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) ioctl)(int __fd ,
                                                                            unsigned long __request 
                                                                            , ...) ;
#line 139 "/home/june/collector/temp/asp-1.8/asp.h"
char *prog_name  ;
#line 25 "/home/june/collector/temp/asp-1.8/aspd.c"
static int rep  =    5;
#line 26 "/home/june/collector/temp/asp-1.8/aspd.c"
static int hname_len  ;
#line 27 "/home/june/collector/temp/asp-1.8/aspd.c"
static char hname[64]  = {      (char )'\000'};
#line 28 "/home/june/collector/temp/asp-1.8/aspd.c"
static char *interface  =    (char *)((void *)0);
#line 33
int asp_server(void) ;
#line 34
int asp_daemon(void) ;
#line 35
void parse_cmdline(int argc , char **argv ) ;
#line 32 "/home/june/collector/temp/asp-1.8/aspd.c"
int main(int argc , char **argv ) 
{ 
  char *p ;
  int tmp ;
  int tmp___0 ;
  size_t tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  {
#line 38
  prog_name = *argv;
#line 40
  parse_cmdline(argc, argv);
#line 42
  tmp___0 = strcmp((char const   *)(hname), "");
  }
#line 42
  if (! tmp___0) {
    {
#line 45
    tmp = gethostname(hname, (size_t )64);
    }
#line 45
    if (tmp == -1) {
      {
#line 46
      asp_perror((char *)"gethostname");
      }
    }
    {
#line 50
    p = strchr((char const   *)(hname), '.');
    }
#line 50
    if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 51
      *p = (char )'\000';
    }
  }
  {
#line 55
  tmp___1 = strlen((char const   *)(hname));
#line 55
  hname_len = (int )tmp___1;
#line 58
  p = strrchr((char const   *)*(argv + 0), '/');
  }
#line 60
  if ((unsigned long )p == (unsigned long )((void *)0)) {
#line 60
    p = *(argv + 0);
  } else {
#line 61
    p ++;
  }
  {
#line 63
  tmp___4 = strcmp((char const   *)p, "in.aspd");
  }
#line 63
  if (tmp___4 == 0) {
    {
#line 63
    tmp___2 = asp_server();
    }
#line 63
    return (tmp___2);
  } else {
    {
#line 64
    tmp___3 = asp_daemon();
    }
#line 64
    return (tmp___3);
  }
}
}
#line 68 "/home/june/collector/temp/asp-1.8/aspd.c"
int asp_server(void) 
{ 
  char rmesg[64] ;
  char last_mesg[64] ;
  struct sockaddr_in from ;
  struct in_addr last_addr ;
  int i ;
  int size ;
  ssize_t tmp ;
  char *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
  {
#line 72
  size = (int )sizeof(from);
#line 74
  bzero((void *)(rmesg), (size_t )64);
#line 75
  memset((void *)(& from.sin_addr), 0, sizeof(struct in_addr ));
#line 77
  openlog((char const   *)prog_name, 1, 3 << 3);
  }
  {
#line 79
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 79
    tmp___3 = input_timeout(0, 60U, 0U);
    }
#line 79
    if (! (tmp___3 == 1)) {
#line 79
      goto while_break;
    }
    {
#line 81
    last_addr.s_addr = from.sin_addr.s_addr;
#line 82
    strcpy((char */* __restrict  */)(last_mesg), (char const   */* __restrict  */)(rmesg));
#line 83
    bzero((void *)(rmesg), (size_t )64);
#line 86
    tmp = recvfrom(0, (void */* __restrict  */)(rmesg), (size_t )63, 0, (struct sockaddr */* __restrict  */)((struct sockaddr *)(& from)),
                   (socklen_t */* __restrict  */)(& size));
    }
#line 86
    if (tmp == -1L) {
#line 92
      goto while_continue;
    }
#line 96
    if (from.sin_addr.s_addr != last_addr.s_addr) {
      {
#line 97
      tmp___0 = inet_ntoa(from.sin_addr);
#line 97
      syslog(5, "%s searching for %s", tmp___0, rmesg);
      }
    } else {
      {
#line 96
      tmp___1 = strcmp((char const   *)(rmesg), (char const   *)(last_mesg));
      }
#line 96
      if (tmp___1) {
        {
#line 97
        tmp___0 = inet_ntoa(from.sin_addr);
#line 97
        syslog(5, "%s searching for %s", tmp___0, rmesg);
        }
      }
    }
    {
#line 100
    tmp___2 = strcmp((char const   *)(hname), (char const   *)(rmesg));
    }
#line 100
    if (! tmp___2) {
#line 101
      i = 0;
      {
#line 101
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 101
        if (! (i < rep)) {
#line 101
          goto while_break___0;
        }
        {
#line 108
        sendto(1, (void const   *)(hname), (size_t )hname_len, 0, (struct sockaddr  const  *)((struct sockaddr *)(& from)),
               (socklen_t )sizeof(struct sockaddr ));
#line 101
        i ++;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 113
  closelog();
  }
#line 114
  return (0);
}
}
#line 118
int make_dsocket(int port___0 ) ;
#line 120
void handler(int sig ) ;
#line 117 "/home/june/collector/temp/asp-1.8/aspd.c"
int asp_daemon(void) 
{ 
  int sock ;
  int i ;
  int from_size ;
  struct sockaddr_in from ;
  struct servent *psServent ;
  char rmesg[64] ;
  pid_t cpid ;
  uint16_t tmp ;
  ssize_t tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;

  {
  {
#line 126
  psServent = getservbyname("asp", "udp");
  }
#line 126
  if ((unsigned long )psServent == (unsigned long )((void *)0)) {
    {
#line 127
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getservbyname: Protocol not found\n",
            prog_name);
#line 128
    exit(1);
    }
  }
  {
#line 131
  tmp = ntohs((uint16_t )psServent->s_port);
#line 131
  sock = make_dsocket((int )tmp);
#line 133
  cpid = fork();
  }
#line 133
  if (cpid != 0) {
#line 134
    if (cpid == -1) {
      {
#line 135
      asp_perror((char *)"fork");
      }
    } else {
      {
#line 137
      exit(0);
      }
    }
  }
  {
#line 140
  signal(15, & handler);
#line 141
  signal(1, & handler);
#line 142
  signal(2, & handler);
#line 144
  openlog((char const   *)prog_name, 1, 3 << 3);
#line 145
  syslog(6, "Started");
#line 147
  from_size = (int )sizeof(from);
  }
  {
#line 149
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 151
    bzero((void *)(rmesg), (size_t )64);
#line 154
    tmp___0 = recvfrom(sock, (void */* __restrict  */)(rmesg), (size_t )63, 0, (struct sockaddr */* __restrict  */)((struct sockaddr *)(& from)),
                       (socklen_t */* __restrict  */)(& from_size));
    }
#line 154
    if (tmp___0 == -1L) {
#line 160
      goto while_continue;
    }
    {
#line 163
    tmp___1 = inet_ntoa(from.sin_addr);
#line 163
    syslog(5, "%s searching for %s", tmp___1, rmesg);
#line 166
    tmp___2 = strcmp((char const   *)(hname), (char const   *)(rmesg));
    }
#line 166
    if (! tmp___2) {
#line 167
      i = 0;
      {
#line 167
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 167
        if (! (i < rep)) {
#line 167
          goto while_break___0;
        }
        {
#line 174
        sendto(sock, (void const   *)(hname), (size_t )hname_len, 0, (struct sockaddr  const  *)((struct sockaddr *)(& from)),
               (socklen_t )sizeof(struct sockaddr ));
#line 167
        i ++;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
}
}
#line 180 "/home/june/collector/temp/asp-1.8/aspd.c"
void handler(int sig ) 
{ 
  char *tmp ;

  {
  {
#line 181
  tmp = strsignal(sig);
#line 181
  syslog(6, "%s", tmp);
#line 183
  raise(sig);
  }
#line 184
  return;
}
}
#line 186 "/home/june/collector/temp/asp-1.8/aspd.c"
int make_dsocket(int port___0 ) 
{ 
  int sock ;
  struct sockaddr_in *name ;
  struct ifreq ifr ;
  int tmp ;
  int tmp___0 ;

  {
  {
#line 192
  sock = socket(2, 2, 0);
  }
#line 194
  if (sock < 0) {
    {
#line 194
    asp_perror((char *)"socket");
    }
  }
#line 197
  name = (struct sockaddr_in *)(& ifr.ifr_ifru.ifru_addr);
#line 198
  name->sin_family = (sa_family_t )2;
#line 203
  if ((unsigned long )interface != (unsigned long )((void *)0)) {
    {
#line 205
    bzero((void *)(& ifr), sizeof(ifr));
#line 206
    strcpy((char */* __restrict  */)(ifr.ifr_ifrn.ifrn_name), (char const   */* __restrict  */)interface);
#line 208
    tmp = ioctl(sock, 35093UL, & ifr);
    }
#line 208
    if (tmp < 0) {
      {
#line 208
      asp_perror((char *)"ioctl");
      }
    }
  } else {
    {
#line 210
    name->sin_addr.s_addr = htonl((in_addr_t )0);
    }
  }
  {
#line 212
  name->sin_port = htons((uint16_t )port___0);
#line 214
  tmp___0 = bind(sock, (struct sockaddr  const  *)((struct sockaddr *)name), (socklen_t )sizeof(*name));
  }
#line 214
  if (tmp___0 < 0) {
    {
#line 215
    asp_perror((char *)"bind");
    }
  }
#line 217
  return (sock);
}
}
#line 220 "/home/june/collector/temp/asp-1.8/aspd.c"
void about(void) 
{ 


  {
  {
#line 221
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Copyright (C) 1996-2001 Stenio Brunetta\n%s\n",
          rcsid___1);
#line 223
  exit(0);
  }
}
}
#line 226 "/home/june/collector/temp/asp-1.8/aspd.c"
void use(void) 
{ 


  {
  {
#line 227
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"Usage: %s [-r repetitions] [-i interface] [hostname]\n%s -V\n",
          prog_name, prog_name);
#line 229
  exit(1);
  }
}
}
#line 232 "/home/june/collector/temp/asp-1.8/aspd.c"
void parse_cmdline(int argc , char **argv ) 
{ 
  int c ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
#line 236
  opterr = 0;
  {
#line 237
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 237
    c = getopt(argc, (char * const  *)argv, "i:r:V");
    }
#line 237
    if (! (c != -1)) {
#line 237
      goto while_break;
    }
    {
#line 239
    if (c == 86) {
#line 239
      goto case_86;
    }
#line 244
    if (c == 114) {
#line 244
      goto case_114;
    }
#line 249
    if (c == 105) {
#line 249
      goto case_105;
    }
#line 252
    goto switch_default;
    case_86: /* CIL Label */ 
#line 240
    if (argc > 2) {
      {
#line 241
      use();
      }
    } else {
      {
#line 240
      tmp = strcmp((char const   *)*(argv + (argc - 1)), "-V");
      }
#line 240
      if (tmp) {
        {
#line 241
        use();
        }
      } else {
        {
#line 242
        about();
        }
      }
    }
#line 243
    goto switch_break;
    case_114: /* CIL Label */ 
    {
#line 245
    tmp___0 = bound_check(optarg, 1, 65535, & rep);
    }
#line 245
    if (tmp___0 != 0) {
      {
#line 246
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad repetition number\n",
              *(argv + 0));
#line 247
      exit(1);
      }
    }
    case_105: /* CIL Label */ 
#line 250
    interface = optarg;
#line 251
    goto switch_break;
    switch_default: /* CIL Label */ 
    {
#line 253
    use();
    }
#line 254
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 257
  if (optind == argc - 1) {
    {
#line 258
    bzero((void *)(hname), (size_t )64);
#line 260
    tmp___1 = optind;
#line 260
    optind ++;
#line 260
    strncpy((char */* __restrict  */)(hname), (char const   */* __restrict  */)*(argv + tmp___1),
            (size_t )63);
    }
  }
#line 262
  if (optind != argc) {
    {
#line 262
    use();
    }
  }
#line 263
  return;
}
}
#line 20 "/home/june/collector/temp/asp-1.8/addr.c"
static char rcsid___2[49]  = 
#line 20 "/home/june/collector/temp/asp-1.8/addr.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'a',      (char )'d',      (char )'d', 
        (char )'r',      (char )'.',      (char )'c',      (char )',', 
        (char )'v',      (char )' ',      (char )'1',      (char )'.', 
        (char )'1',      (char )'4',      (char )' ',      (char )'2', 
        (char )'0',      (char )'0',      (char )'1',      (char )'/', 
        (char )'0',      (char )'1',      (char )'/',      (char )'2', 
        (char )'3',      (char )' ',      (char )'1',      (char )'1', 
        (char )':',      (char )'2',      (char )'0',      (char )':', 
        (char )'0',      (char )'1',      (char )' ',      (char )'s', 
        (char )'t',      (char )'e',      (char )' ',      (char )'E', 
        (char )'x',      (char )'p',      (char )' ',      (char )'$', 
        (char )'\000'};
#line 79 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) unsigned short const   **( __attribute__((__leaf__)) __ctype_b_loc)(void)  __attribute__((__const__)) ;
#line 168 "/usr/include/stdio.h"
extern struct _IO_FILE *stdin ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 538
extern int getchar(void) ;
#line 702
extern int ungetc(int __c , FILE *__stream ) ;
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 468
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) calloc)(size_t __nmemb ,
                                                                               size_t __size )  __attribute__((__malloc__)) ;
#line 137 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcat)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 348
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(2), __leaf__)) strtok)(char * __restrict  __s ,
                                                                                               char const   * __restrict  __delim ) ;
#line 148 "/home/june/collector/temp/asp-1.8/asp.h"
char **get_token(int *i , char *s ) ;
#line 152
int get_ip(char *buffer ) ;
#line 25 "/home/june/collector/temp/asp-1.8/addr.c"
void avoid_addr_rcsid_warning(void) 
{ 


  {
#line 26
  rcsid___2[0] = (char)0;
#line 27
  return;
}
}
#line 29 "/home/june/collector/temp/asp-1.8/addr.c"
char **get_token(int *i , char *s ) 
{ 
  char **pp ;
  char *aux ;
  int c ;
  int n ;
  size_t tmp ;
  void *tmp___0 ;
  char *tmp___1 ;
  void *tmp___2 ;
  char *tmp___3 ;

  {
#line 30
  pp = (char **)((void *)0);
#line 30
  aux = (char *)((void *)0);
#line 31
  c = 0;
#line 33
  if ((unsigned long )s != (unsigned long )((void *)0)) {
    {
#line 34
    tmp = strlen((char const   *)s);
#line 34
    tmp___0 = calloc(tmp + 1UL, sizeof(char ));
#line 34
    aux = (char *)tmp___0;
#line 35
    strcpy((char */* __restrict  */)aux, (char const   */* __restrict  */)s);
#line 37
    tmp___3 = strtok((char */* __restrict  */)aux, (char const   */* __restrict  */)" \t");
    }
#line 37
    if ((unsigned long )tmp___3 != (unsigned long )((void *)0)) {
#line 38
      c ++;
      {
#line 39
      while (1) {
        while_continue: /* CIL Label */ ;
        {
#line 39
        tmp___1 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)" \t");
        }
#line 39
        if (! ((unsigned long )tmp___1 != (unsigned long )((void *)0))) {
#line 39
          goto while_break;
        }
#line 40
        c ++;
      }
      while_break: /* CIL Label */ ;
      }
      {
#line 42
      free((void *)aux);
#line 46
      tmp___2 = calloc((size_t )c + 1UL, sizeof(char *));
#line 46
      pp = (char **)tmp___2;
#line 47
      *pp = (char *)((void *)0);
#line 48
      *(pp + 1) = strtok((char */* __restrict  */)s, (char const   */* __restrict  */)" \t");
#line 50
      n = 2;
      }
      {
#line 50
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 50
        if (! (n <= c)) {
#line 50
          goto while_break___0;
        }
        {
#line 51
        *(pp + n) = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)" \t");
#line 50
        n ++;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
    }
  } else {
#line 54
    i = (int *)0;
#line 55
    return ((char **)((void *)0));
  }
#line 57
  *i = c;
#line 58
  return (pp);
}
}
#line 61 "/home/june/collector/temp/asp-1.8/addr.c"
int next_ip(char *buffer ) 
{ 
  int c ;
  int i ;
  int i1 ;
  int star ;
  int minus ;
  int index___0 ;
  int cPoint ;
  int cDigit ;
  char buffer1[20] ;
  char *p ;
  unsigned short const   **tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  unsigned short const   **tmp___3 ;
  unsigned short const   **tmp___4 ;
  char *tmp___5 ;
  int tmp___6 ;
  char *tmp___7 ;
  int tmp___8 ;
  char *tmp___9 ;
  int tmp___10 ;
  char *tmp___11 ;
  int tmp___12 ;
  char *tmp___13 ;
  char *tmp___14 ;

  {
#line 62
  star = 0;
#line 62
  minus = 0;
#line 62
  index___0 = 0;
#line 62
  cPoint = 0;
#line 62
  cDigit = 0;
  {
#line 66
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 66
    tmp = __ctype_b_loc();
#line 66
    c = getchar();
    }
#line 66
    if (! ((int const   )*(*tmp + c) & 8192)) {
#line 66
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 70
  if (c == -1) {
#line 70
    return (0);
  }
  {
#line 73
  ungetc(c, stdin);
#line 76
  bzero((void *)buffer, (size_t )20);
  }
  {
#line 78
  while (1) {
    while_continue___0: /* CIL Label */ ;
    {
#line 78
    c = getchar();
    }
#line 78
    if (c != -1) {
      {
#line 78
      tmp___3 = __ctype_b_loc();
      }
#line 78
      if ((int const   )*(*tmp___3 + c) & 8192) {
#line 78
        goto while_break___0;
      } else
#line 78
      if (! (index___0 < 19)) {
#line 78
        goto while_break___0;
      }
    } else {
#line 78
      goto while_break___0;
    }
    {
#line 89
    if (c == 57) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 56) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 55) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 54) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 53) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 52) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 51) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 50) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 49) {
#line 89
      goto case_57;
    }
#line 89
    if (c == 48) {
#line 89
      goto case_57;
    }
#line 96
    if (c == 46) {
#line 96
      goto case_46;
    }
#line 103
    if (c == 42) {
#line 103
      goto case_42;
    }
#line 109
    if (c == 45) {
#line 109
      goto case_45;
    }
#line 116
    goto switch_default;
    case_57: /* CIL Label */ 
    case_56: /* CIL Label */ 
    case_55: /* CIL Label */ 
    case_54: /* CIL Label */ 
    case_53: /* CIL Label */ 
    case_52: /* CIL Label */ 
    case_51: /* CIL Label */ 
    case_50: /* CIL Label */ 
    case_49: /* CIL Label */ 
    case_48: /* CIL Label */ 
#line 90
    if (cDigit < 3) {
#line 91
      tmp___0 = index___0;
#line 91
      index___0 ++;
#line 91
      *(buffer + tmp___0) = (char )c;
#line 92
      cDigit ++;
    } else {
#line 94
      return (-1);
    }
#line 95
    goto switch_break;
    case_46: /* CIL Label */ 
#line 97
    if (cDigit != 0) {
#line 97
      if (cPoint < 3) {
#line 98
        tmp___1 = index___0;
#line 98
        index___0 ++;
#line 98
        *(buffer + tmp___1) = (char )c;
#line 99
        cDigit = 0;
#line 100
        cPoint ++;
      } else {
#line 101
        return (-1);
      }
    } else {
#line 101
      return (-1);
    }
#line 102
    goto switch_break;
    case_42: /* CIL Label */ 
#line 104
    if (cPoint == 3) {
#line 104
      if (cDigit == 0) {
        {
#line 105
        strcat((char */* __restrict  */)buffer, (char const   */* __restrict  */)"1-254");
#line 106
        star = 1;
        }
      } else {
#line 107
        return (-1);
      }
    } else {
#line 107
      return (-1);
    }
#line 108
    goto switch_break;
    case_45: /* CIL Label */ 
#line 110
    if (cPoint == 3) {
#line 110
      if (cDigit != 0) {
#line 111
        tmp___2 = index___0;
#line 111
        index___0 ++;
#line 111
        *(buffer + tmp___2) = (char )c;
#line 112
        minus = 1;
#line 113
        cDigit = 0;
      } else {
#line 114
        return (-1);
      }
    } else {
#line 114
      return (-1);
    }
#line 115
    goto switch_break;
    switch_default: /* CIL Label */ 
#line 117
    return (-1);
#line 118
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 122
  if (cPoint != 3) {
#line 122
    return (-1);
  }
#line 125
  if (cDigit == 0) {
#line 125
    if (star != 1) {
#line 125
      return (-1);
    }
  }
#line 128
  if (index___0 == 19) {
    {
#line 128
    tmp___4 = __ctype_b_loc();
    }
#line 128
    if (! ((int const   )*(*tmp___4 + c) & 8192)) {
#line 128
      return (-1);
    }
  }
  {
#line 130
  ungetc(c, stdin);
#line 133
  strcpy((char */* __restrict  */)(buffer1), (char const   */* __restrict  */)buffer);
#line 136
  tmp___5 = strtok((char */* __restrict  */)(buffer1), (char const   */* __restrict  */)".");
#line 136
  tmp___6 = atoi((char const   *)tmp___5);
  }
#line 136
  if (tmp___6 > 255) {
#line 137
    return (-1);
  }
  {
#line 138
  tmp___7 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 138
  tmp___8 = atoi((char const   *)tmp___7);
  }
#line 138
  if (tmp___8 > 255) {
#line 139
    return (-1);
  }
  {
#line 140
  tmp___9 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 140
  tmp___10 = atoi((char const   *)tmp___9);
  }
#line 140
  if (tmp___10 > 255) {
#line 141
    return (-1);
  }
#line 143
  if (star == 0) {
#line 143
    if (minus == 0) {
      {
#line 144
      tmp___11 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 144
      tmp___12 = atoi((char const   *)tmp___11);
      }
#line 144
      if (tmp___12 > 255) {
#line 145
        return (-1);
      }
    } else {
#line 143
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
    {
#line 147
    p = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 148
    strcpy((char */* __restrict  */)(buffer1), (char const   */* __restrict  */)p);
#line 149
    tmp___13 = strtok((char */* __restrict  */)(buffer1), (char const   */* __restrict  */)"-");
#line 149
    i = atoi((char const   *)tmp___13);
#line 150
    tmp___14 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)"-");
#line 150
    i1 = atoi((char const   *)tmp___14);
    }
#line 151
    if (i > 255) {
#line 152
      return (-1);
    } else
#line 151
    if (i1 > 255) {
#line 152
      return (-1);
    } else
#line 151
    if (i > i1) {
#line 152
      return (-1);
    }
  }
#line 155
  return (1);
}
}
#line 158 "/home/june/collector/temp/asp-1.8/addr.c"
int meta(char *buffer ) 
{ 
  char *p ;
  char *tmp ;

  {
  {
#line 159
  tmp = strchr((char const   *)buffer, '*');
#line 159
  p = tmp;
  }
#line 160
  if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 160
    return (1);
  }
  {
#line 161
  p = strchr((char const   *)buffer, '-');
  }
#line 162
  if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 162
    return (1);
  }
#line 163
  return (0);
}
}
#line 167
int expand_ip(char *buffer ) ;
#line 167 "/home/june/collector/temp/asp-1.8/addr.c"
static int start  =    0;
#line 167 "/home/june/collector/temp/asp-1.8/addr.c"
static int stop  =    0;
#line 166 "/home/june/collector/temp/asp-1.8/addr.c"
int expand_ip(char *buffer ) 
{ 
  char *p ;
  char buffer1[20] ;
  char *tmp ;
  char *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;

  {
#line 169
  if (start == 0) {
#line 169
    if (stop == 0) {
      {
#line 170
      p = strchr((char const   *)buffer, '*');
      }
#line 170
      if ((unsigned long )p != (unsigned long )((void *)0)) {
#line 171
        start = 1;
#line 172
        stop = 254;
      } else {
        {
#line 174
        strcpy((char */* __restrict  */)(buffer1), (char const   */* __restrict  */)buffer);
#line 175
        p = strrchr((char const   *)(buffer1), '.');
#line 176
        tmp = strtok((char */* __restrict  */)(p + 1), (char const   */* __restrict  */)"-");
#line 176
        start = atoi((char const   *)tmp);
#line 177
        tmp___0 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)"-");
#line 177
        stop = atoi((char const   *)tmp___0);
#line 178
        p = strrchr((char const   *)buffer, '.');
        }
      }
      {
#line 180
      tmp___1 = start;
#line 180
      start ++;
#line 180
      sprintf((char */* __restrict  */)(p + 1), (char const   */* __restrict  */)"%d",
              tmp___1);
      }
#line 181
      return (1);
    } else {
#line 169
      goto _L;
    }
  } else {
    _L: /* CIL Label */ 
#line 184
    if (start > stop) {
#line 185
      stop = 0;
#line 185
      start = stop;
#line 186
      return (0);
    }
    {
#line 188
    p = strrchr((char const   *)buffer, '.');
#line 189
    tmp___2 = start;
#line 189
    start ++;
#line 189
    sprintf((char */* __restrict  */)(p + 1), (char const   */* __restrict  */)"%d",
            tmp___2);
    }
#line 190
    return (1);
  }
}
}
#line 195 "/home/june/collector/temp/asp-1.8/addr.c"
static int m  =    0;
#line 194 "/home/june/collector/temp/asp-1.8/addr.c"
int get_ip(char *buffer ) 
{ 
  int stat ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
#line 197
  if (m == 0) {
    {
#line 198
    stat = next_ip(buffer);
    }
#line 199
    if (stat < 1) {
#line 199
      return (stat);
    }
    {
#line 200
    tmp = meta(buffer);
    }
#line 200
    if (tmp) {
      {
#line 201
      m = 1;
#line 202
      expand_ip(buffer);
      }
#line 203
      return (1);
    }
  } else {
    {
#line 206
    tmp___1 = expand_ip(buffer);
    }
#line 206
    if (tmp___1 == 0) {
      {
#line 207
      m = 0;
#line 208
      tmp___0 = get_ip(buffer);
      }
#line 208
      return (tmp___0);
    }
  }
#line 210
  return (1);
}
}
#line 20 "/home/june/collector/temp/asp-1.8/asplib.c"
static char rcsid___3[51]  = 
#line 20 "/home/june/collector/temp/asp-1.8/asplib.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'a',      (char )'s',      (char )'p', 
        (char )'l',      (char )'i',      (char )'b',      (char )'.', 
        (char )'c',      (char )',',      (char )'v',      (char )' ', 
        (char )'1',      (char )'.',      (char )'1',      (char )'6', 
        (char )' ',      (char )'2',      (char )'0',      (char )'0', 
        (char )'1',      (char )'/',      (char )'0',      (char )'1', 
        (char )'/',      (char )'2',      (char )'3',      (char )' ', 
        (char )'1',      (char )'1',      (char )':',      (char )'2', 
        (char )'0',      (char )':',      (char )'0',      (char )'1', 
        (char )' ',      (char )'s',      (char )'t',      (char )'e', 
        (char )' ',      (char )'E',      (char )'x',      (char )'p', 
        (char )' ',      (char )'$',      (char )'\000'};
#line 20 "/home/june/collector/temp/asp-1.8/comm.c"
static char rcsid___4[49]  = 
#line 20 "/home/june/collector/temp/asp-1.8/comm.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'c',      (char )'o',      (char )'m', 
        (char )'m',      (char )'.',      (char )'c',      (char )',', 
        (char )'v',      (char )' ',      (char )'1',      (char )'.', 
        (char )'1',      (char )'6',      (char )' ',      (char )'2', 
        (char )'0',      (char )'0',      (char )'1',      (char )'/', 
        (char )'0',      (char )'1',      (char )'/',      (char )'2', 
        (char )'3',      (char )' ',      (char )'1',      (char )'1', 
        (char )':',      (char )'2',      (char )'0',      (char )':', 
        (char )'0',      (char )'1',      (char )' ',      (char )'s', 
        (char )'t',      (char )'e',      (char )' ',      (char )'E', 
        (char )'x',      (char )'p',      (char )' ',      (char )'$', 
        (char )'\000'};
#line 20 "/home/june/collector/temp/asp-1.8/asp.c"
static char rcsid___5[48]  = 
#line 20 "/home/june/collector/temp/asp-1.8/asp.c"
  {      (char )'$',      (char )'I',      (char )'d',      (char )':', 
        (char )' ',      (char )'a',      (char )'s',      (char )'p', 
        (char )'.',      (char )'c',      (char )',',      (char )'v', 
        (char )' ',      (char )'1',      (char )'.',      (char )'5', 
        (char )'1',      (char )' ',      (char )'2',      (char )'0', 
        (char )'0',      (char )'1',      (char )'/',      (char )'0', 
        (char )'1',      (char )'/',      (char )'2',      (char )'3', 
        (char )' ',      (char )'1',      (char )'1',      (char )':', 
        (char )'2',      (char )'0',      (char )':',      (char )'0', 
        (char )'1',      (char )' ',      (char )'s',      (char )'t', 
        (char )'e',      (char )' ',      (char )'E',      (char )'x', 
        (char )'p',      (char )' ',      (char )'$',      (char )'\000'};
#line 73 "/usr/include/arpa/inet.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) inet_aton)(char const   *__cp ,
                                                                                struct in_addr *__inp ) ;
#line 178 "/usr/include/stdio.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) remove)(char const   *__filename ) ;
#line 180
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) rename)(char const   *__old ,
                                                                             char const   *__new ) ;
#line 237
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 278
extern FILE *freopen(char const   * __restrict  __filename , char const   * __restrict  __modes ,
                     FILE * __restrict  __stream ) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 531
extern int fgetc(FILE *__stream ) ;
#line 573
extern int fputc(int __c , FILE *__stream ) ;
#line 622
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 828
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) feof)(FILE *__stream ) ;
#line 176 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strdup)(char const   *__s )  __attribute__((__malloc__)) ;
#line 315
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strpbrk)(char const   *__s ,
                                                                                                  char const   *__accept )  __attribute__((__pure__)) ;
#line 342
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strstr)(char const   *__haystack ,
                                                                                                 char const   *__needle )  __attribute__((__pure__)) ;
#line 413
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) strerror)(int __errnum ) ;
#line 534
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcasecmp)(char const   *__s1 ,
                                                                                                   char const   *__s2 )  __attribute__((__pure__)) ;
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 27 "/home/june/collector/temp/asp-1.8/asp.c"
int recv_delay  =    5;
#line 30 "/home/june/collector/temp/asp-1.8/asp.c"
static int send_delay  =    2;
#line 31 "/home/june/collector/temp/asp-1.8/asp.c"
static int addresses  =    12;
#line 32 "/home/june/collector/temp/asp-1.8/asp.c"
static int rip  =    3;
#line 33 "/home/june/collector/temp/asp-1.8/asp.c"
static int port  ;
#line 34 "/home/june/collector/temp/asp-1.8/asp.c"
static int force  ;
#line 35 "/home/june/collector/temp/asp-1.8/asp.c"
static int update  ;
#line 36 "/home/june/collector/temp/asp-1.8/asp.c"
static char *path  =    (char *)((void *)0);
#line 37 "/home/june/collector/temp/asp-1.8/asp.c"
static char *ext  =    (char *)((void *)0);
#line 38 "/home/june/collector/temp/asp-1.8/asp.c"
static char host2find[64]  ;
#line 43
void parse_envar(int argc , char **argv ) ;
#line 45
void update_hosts(char *host , char *addr ) ;
#line 47
void redirect(char *host ) ;
#line 182 "/home/june/collector/temp/asp-1.8/asp.c"
int match(char *buf , char *host ) 
{ 
  char *s1 ;
  char *s2 ;
  char *s3 ;
  int i ;
  char *tmp ;
  int tmp___0 ;

  {
  {
#line 186
  s1 = strdup((char const   *)buf);
  }
#line 186
  if ((unsigned long )s1 == (unsigned long )((void *)0)) {
    {
#line 186
    asp_perror((char *)"strdup");
    }
  }
  {
#line 189
  s2 = strpbrk((char const   *)s1, "#\n");
  }
#line 189
  if ((unsigned long )s2 != (unsigned long )((void *)0)) {
#line 189
    *s2 = (char )'\000';
  }
  {
#line 192
  s2 = strstr((char const   *)s1, (char const   *)host);
  }
#line 192
  if ((unsigned long )s2 == (unsigned long )((void *)0)) {
    {
#line 193
    free((void *)s1);
    }
#line 194
    return (0);
  }
  {
#line 198
  s2 = strtok((char */* __restrict  */)s1, (char const   */* __restrict  */)" \t");
  }
#line 198
  if ((unsigned long )s2 == (unsigned long )((void *)0)) {
    {
#line 201
    free((void *)s1);
    }
#line 202
    return (0);
  } else {
    {
#line 198
    s3 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)" \t");
    }
#line 198
    if ((unsigned long )s3 == (unsigned long )((void *)0)) {
      {
#line 201
      free((void *)s1);
      }
#line 202
      return (0);
    } else {
      {
#line 198
      tmp = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)" \t");
      }
#line 198
      if ((unsigned long )tmp != (unsigned long )((void *)0)) {
        {
#line 201
        free((void *)s1);
        }
#line 202
        return (0);
      }
    }
  }
  {
#line 206
  tmp___0 = strcasecmp((char const   *)s3, (char const   *)host);
  }
#line 206
  if (tmp___0 != 0) {
    {
#line 207
    free((void *)s1);
    }
#line 208
    return (0);
  }
  {
#line 212
  s3 = strtok((char */* __restrict  */)s2, (char const   */* __restrict  */)".");
#line 212
  i = atoi((char const   *)s3);
  }
#line 212
  if (i > 255) {
    {
#line 216
    free((void *)s1);
    }
#line 217
    return (0);
  } else
#line 212
  if (i < 0) {
    {
#line 216
    free((void *)s1);
    }
#line 217
    return (0);
  } else {
    {
#line 212
    s3 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 212
    i = atoi((char const   *)s3);
    }
#line 212
    if (i > 255) {
      {
#line 216
      free((void *)s1);
      }
#line 217
      return (0);
    } else
#line 212
    if (i < 0) {
      {
#line 216
      free((void *)s1);
      }
#line 217
      return (0);
    } else {
      {
#line 212
      s3 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 212
      i = atoi((char const   *)s3);
      }
#line 212
      if (i > 255) {
        {
#line 216
        free((void *)s1);
        }
#line 217
        return (0);
      } else
#line 212
      if (i < 0) {
        {
#line 216
        free((void *)s1);
        }
#line 217
        return (0);
      } else {
        {
#line 212
        s3 = strtok((char */* __restrict  */)((void *)0), (char const   */* __restrict  */)".");
#line 212
        i = atoi((char const   *)s3);
        }
#line 212
        if (i > 255) {
          {
#line 216
          free((void *)s1);
          }
#line 217
          return (0);
        } else
#line 212
        if (i < 0) {
          {
#line 216
          free((void *)s1);
          }
#line 217
          return (0);
        }
      }
    }
  }
  {
#line 221
  free((void *)s1);
  }
#line 222
  return (1);
}
}
#line 228 "/home/june/collector/temp/asp-1.8/asp.c"
void update_hosts(char *host , char *addr ) 
{ 
  char buf[8193] ;
  char *name ;
  FILE *fp1 ;
  FILE *fp2 ;
  int c ;
  int m___0 ;
  int tmp ;
  int tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;

  {
  {
#line 229
  name = (char *)"/etc/hosts.asp";
#line 233
  fp1 = fopen((char const   */* __restrict  */)"/etc/hosts", (char const   */* __restrict  */)"r+");
  }
#line 233
  if ((unsigned long )fp1 == (unsigned long )((void *)0)) {
    {
#line 233
    asp_perror((char *)"fopen");
    }
  }
  {
#line 240
  fp2 = fopen((char const   */* __restrict  */)name, (char const   */* __restrict  */)"w");
  }
#line 240
  if ((unsigned long )fp2 == (unsigned long )((void *)0)) {
    {
#line 240
    asp_perror((char *)"fopen");
    }
  }
  {
#line 242
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 243
    fgets((char */* __restrict  */)(buf), 8192, (FILE */* __restrict  */)fp1);
#line 244
    m___0 = match(buf, host);
    }
#line 244
    if (m___0) {
#line 244
      goto while_break;
    }
    {
#line 245
    fputs((char const   */* __restrict  */)(buf), (FILE */* __restrict  */)fp2);
#line 242
    tmp = feof(fp1);
    }
#line 242
    if (tmp) {
#line 242
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 248
  if (m___0) {
#line 249
    if ((unsigned long )addr != (unsigned long )((void *)0)) {
      {
#line 249
      fprintf((FILE */* __restrict  */)fp2, (char const   */* __restrict  */)"%s\t%s\n",
              addr, host);
      }
    }
    {
#line 250
    while (1) {
      while_continue___0: /* CIL Label */ ;
      {
#line 250
      c = fgetc(fp1);
      }
#line 250
      if (! (c != -1)) {
#line 250
        goto while_break___0;
      }
      {
#line 251
      fputc(c, fp2);
      }
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 265
    tmp___0 = rename((char const   *)name, "/etc/hosts");
    }
#line 265
    if (tmp___0 == -1) {
      {
#line 265
      asp_perror((char *)"rename");
      }
    }
  } else {
#line 267
    if ((unsigned long )addr != (unsigned long )((void *)0)) {
      {
#line 268
      tmp___1 = strchr((char const   *)(buf), '\n');
      }
#line 268
      if (tmp___1) {
        {
#line 268
        fprintf((FILE */* __restrict  */)fp1, (char const   */* __restrict  */)"%s\t%s\n",
                addr, host);
        }
      } else {
        {
#line 269
        fprintf((FILE */* __restrict  */)fp1, (char const   */* __restrict  */)"\n%s\t%s\n",
                addr, host);
        }
      }
    }
    {
#line 271
    tmp___2 = remove((char const   *)name);
    }
#line 271
    if (tmp___2 == -1) {
      {
#line 271
      asp_perror((char *)"remove");
      }
    }
  }
  {
#line 274
  fclose(fp1);
#line 275
  fclose(fp2);
  }
#line 276
  return;
}
}
#line 291 "/home/june/collector/temp/asp-1.8/asp.c"
void envar_use(char *s ) 
{ 


  {
  {
#line 292
  fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s variable usage: [-u] [-f | [-d dir] [-e ext]] [-a addresses] [-r repetitions] [-s send_delay] [-w wait_time] [-p port]\n",
          s);
#line 295
  exit(1);
  }
}
}
#line 298 "/home/june/collector/temp/asp-1.8/asp.c"
void parse_envar(int argc , char **argv ) 
{ 
  int c ;
  int prev_optind ;
  int d ;
  int e ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
#line 299
  d = 0;
#line 299
  e = 0;
#line 302
  opterr = 0;
#line 306
  prev_optind = optind;
  {
#line 308
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 308
    c = getopt(argc, (char * const  *)argv, "vfuw:p:d:e:a:r:s:");
    }
#line 308
    if (! (c != -1)) {
#line 308
      goto while_break;
    }
    {
#line 310
    if (c == 118) {
#line 310
      goto case_118;
    }
#line 313
    if (c == 102) {
#line 313
      goto case_102;
    }
#line 317
    if (c == 117) {
#line 317
      goto case_117;
    }
#line 320
    if (c == 119) {
#line 320
      goto case_119;
    }
#line 326
    if (c == 112) {
#line 326
      goto case_112;
    }
#line 332
    if (c == 100) {
#line 332
      goto case_100;
    }
#line 337
    if (c == 101) {
#line 337
      goto case_101;
    }
#line 342
    if (c == 97) {
#line 342
      goto case_97;
    }
#line 348
    if (c == 114) {
#line 348
      goto case_114;
    }
#line 354
    if (c == 115) {
#line 354
      goto case_115;
    }
#line 360
    goto switch_default;
    case_118: /* CIL Label */ 
#line 311
    verbose = ! verbose;
#line 312
    goto switch_break;
    case_102: /* CIL Label */ 
#line 314
    if (d == 1) {
      {
#line 314
      envar_use((char *)"ASPCMD");
      }
    } else
#line 314
    if (e == 1) {
      {
#line 314
      envar_use((char *)"ASPCMD");
      }
    }
#line 315
    force = ! force;
#line 316
    goto switch_break;
    case_117: /* CIL Label */ 
#line 318
    update = ! update;
#line 319
    goto switch_break;
    case_119: /* CIL Label */ 
    {
#line 321
    tmp = bound_check(optarg, 0, 2147483647, & recv_delay);
    }
#line 321
    if (tmp != 0) {
      {
#line 322
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad wait_time number\n",
              prog_name);
#line 323
      exit(1);
      }
    }
#line 325
    goto switch_break;
    case_112: /* CIL Label */ 
    {
#line 327
    tmp___0 = bound_check(optarg, 0, 65535, & port);
    }
#line 327
    if (tmp___0 != 0) {
      {
#line 328
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad port number\n",
              prog_name);
#line 329
      exit(1);
      }
    }
#line 331
    goto switch_break;
    case_100: /* CIL Label */ 
#line 333
    if (force == 1) {
      {
#line 333
      envar_use((char *)"ASPCMD");
      }
    }
#line 334
    path = optarg;
#line 335
    d = 1;
#line 336
    goto switch_break;
    case_101: /* CIL Label */ 
#line 338
    if (force == 1) {
      {
#line 338
      envar_use((char *)"ASPCMD");
      }
    }
#line 339
    ext = optarg;
#line 340
    e = 1;
#line 341
    goto switch_break;
    case_97: /* CIL Label */ 
    {
#line 343
    tmp___1 = bound_check(optarg, 0, 65535, & addresses);
    }
#line 343
    if (tmp___1 != 0) {
      {
#line 344
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad addresses number\n",
              prog_name);
#line 345
      exit(1);
      }
    }
#line 347
    goto switch_break;
    case_114: /* CIL Label */ 
    {
#line 349
    tmp___2 = bound_check(optarg, 1, 65535, & rip);
    }
#line 349
    if (tmp___2 != 0) {
      {
#line 350
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad repetition number\n",
              prog_name);
#line 351
      exit(1);
      }
    }
#line 353
    goto switch_break;
    case_115: /* CIL Label */ 
    {
#line 355
    tmp___3 = bound_check(optarg, 0, 65535, & send_delay);
    }
#line 355
    if (tmp___3 != 0) {
      {
#line 356
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: bad send delay number\n",
              prog_name);
#line 357
      exit(1);
      }
    }
#line 359
    goto switch_break;
    switch_default: /* CIL Label */ 
    {
#line 361
    envar_use((char *)"ASPCMD");
    }
#line 362
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 365
  if (optind != argc) {
    {
#line 365
    envar_use((char *)"ASPCMD");
    }
  }
#line 366
  optind = prev_optind;
#line 367
  return;
}
}
#line 443 "/home/june/collector/temp/asp-1.8/asp.c"
void redirect(char *host ) 
{ 
  char *in_file ;
  char *path1 ;
  char *ext1 ;
  char *home ;
  char *exp_in_file ;
  int path_len ;
  int ext_len ;
  int home_len ;
  size_t tmp ;
  size_t tmp___0 ;
  void *tmp___1 ;
  char *tmp___2 ;
  int tmp___3 ;
  size_t tmp___4 ;
  void *tmp___5 ;
  size_t tmp___6 ;
  void *tmp___7 ;
  size_t tmp___8 ;
  void *tmp___9 ;
  size_t tmp___10 ;
  void *tmp___11 ;
  char *tmp___12 ;
  char *tmp___13 ;
  char *tmp___14 ;
  int *tmp___15 ;
  char *tmp___16 ;
  FILE *tmp___17 ;

  {
#line 445
  ext_len = 0;
#line 447
  if ((unsigned long )path == (unsigned long )((void *)0)) {
    {
#line 448
    home = getenv("HOME");
    }
#line 448
    if ((unsigned long )home == (unsigned long )((void *)0)) {
      {
#line 449
      fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
              prog_name);
#line 450
      exit(1);
      }
    } else {
      {
#line 448
      tmp___3 = strcmp((char const   *)home, "");
      }
#line 448
      if (tmp___3 == 0) {
        {
#line 449
        fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: getenv: No home dir set",
                prog_name);
#line 450
        exit(1);
        }
      } else {
        {
#line 452
        tmp = strlen((char const   *)home);
#line 452
        home_len = (int )tmp;
        }
#line 453
        if ((int )*((home + home_len) - 1) == 47) {
#line 454
          *((home + home_len) - 1) = (char )'\000';
#line 455
          home_len --;
        }
        {
#line 458
        tmp___0 = strlen("/.asp/");
#line 458
        tmp___1 = emalloc((int )(((size_t )home_len + tmp___0) + 1UL), (char *)"redirect");
#line 458
        path = (char *)tmp___1;
#line 460
        *path = (char )'\000';
#line 461
        tmp___2 = strcat((char */* __restrict  */)path, (char const   */* __restrict  */)home);
#line 461
        strcat((char */* __restrict  */)tmp___2, (char const   */* __restrict  */)"/.asp/");
        }
      }
    }
  }
  {
#line 464
  tmp___4 = strlen((char const   *)path);
#line 464
  path_len = (int )tmp___4;
  }
#line 466
  if ((int )*((path + path_len) - 1) != 47) {
    {
#line 467
    tmp___5 = emalloc(path_len + 2, (char *)"redirect");
#line 467
    path1 = (char *)tmp___5;
#line 468
    strcpy((char */* __restrict  */)path1, (char const   */* __restrict  */)path);
#line 469
    *(path1 + path_len) = (char )'/';
#line 470
    *((path1 + path_len) + 1) = (char )'\000';
#line 471
    path = path1;
#line 472
    path_len ++;
    }
  }
#line 475
  if ((unsigned long )ext != (unsigned long )((void *)0)) {
    {
#line 476
    tmp___6 = strlen((char const   *)ext);
#line 476
    ext_len = (int )tmp___6;
    }
#line 477
    if ((int )*ext != 46) {
      {
#line 478
      tmp___7 = emalloc(ext_len + 2, (char *)"redirect");
#line 478
      ext1 = (char *)tmp___7;
#line 479
      strcpy((char */* __restrict  */)(ext1 + 1), (char const   */* __restrict  */)ext);
#line 480
      *ext1 = (char )'.';
#line 481
      ext = ext1;
#line 482
      ext_len ++;
      }
    }
  }
#line 486
  if (ext_len == 0) {
    {
#line 487
    tmp___8 = strlen((char const   *)host);
#line 487
    tmp___9 = emalloc((int )(((size_t )path_len + tmp___8) + 1UL), (char *)"redirect");
#line 487
    in_file = (char *)tmp___9;
    }
  } else {
    {
#line 488
    tmp___10 = strlen((char const   *)host);
#line 488
    tmp___11 = emalloc((int )((((size_t )path_len + tmp___10) + (size_t )ext_len) + 1UL),
                       (char *)"redirect");
#line 488
    in_file = (char *)tmp___11;
    }
  }
#line 491
  *in_file = (char )'\000';
#line 493
  if (ext_len == 0) {
    {
#line 494
    tmp___12 = strcat((char */* __restrict  */)in_file, (char const   */* __restrict  */)path);
#line 494
    strcat((char */* __restrict  */)tmp___12, (char const   */* __restrict  */)host);
    }
  } else {
    {
#line 495
    tmp___13 = strcat((char */* __restrict  */)in_file, (char const   */* __restrict  */)path);
#line 495
    tmp___14 = strcat((char */* __restrict  */)tmp___13, (char const   */* __restrict  */)host);
#line 495
    strcat((char */* __restrict  */)tmp___14, (char const   */* __restrict  */)ext);
    }
  }
  {
#line 497
  exp_in_file = tilde_expand(in_file);
#line 498
  free((void *)in_file);
#line 500
  tmp___17 = freopen((char const   */* __restrict  */)exp_in_file, (char const   */* __restrict  */)"r",
                     (FILE */* __restrict  */)stdin);
  }
#line 500
  if ((unsigned long )tmp___17 == (unsigned long )((void *)0)) {
    {
#line 501
    tmp___15 = __errno_location();
#line 501
    tmp___16 = strerror(*tmp___15);
#line 501
    fprintf((FILE */* __restrict  */)stderr, (char const   */* __restrict  */)"%s: fopen %s: %s\n",
            prog_name, exp_in_file, tmp___16);
#line 503
    exit(1);
    }
  }
  {
#line 506
  free((void *)exp_in_file);
  }
#line 507
  return;
}
}
