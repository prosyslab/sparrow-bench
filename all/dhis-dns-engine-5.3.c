/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 75 "/usr/include/time.h"
typedef __time_t time_t;
#line 81 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
struct db_t {
   int id ;
   char fqdn[64] ;
   struct db_t *next ;
};
#line 81 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
typedef struct db_t db_t;
#line 133 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef int __pid_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 168 "/usr/include/stdio.h"
extern struct _IO_FILE *stdin ;
#line 237
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 622
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 147 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) atoi)(char const   *__nptr )  __attribute__((__pure__)) ;
#line 466
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 129 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 137
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcat)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 236
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strchr)(char const   *__s ,
                                                                                               int __c )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 124 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tolower)(int __c ) ;
#line 192 "/usr/include/time.h"
extern  __attribute__((__nothrow__)) time_t ( __attribute__((__leaf__)) time)(time_t *__timer ) ;
#line 264
extern  __attribute__((__nothrow__)) char *( __attribute__((__leaf__)) ctime)(time_t const   *__timer ) ;
#line 444 "/usr/include/unistd.h"
extern unsigned int sleep(unsigned int __seconds ) ;
#line 89 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int db_reload(void) ;
#line 90
int db_free(void) ;
#line 91
int db_add(db_t *rec ) ;
#line 92
char *db_hostname(int id ) ;
#line 93
void strtolower(char *s ) ;
#line 94
void off_nl(char *s ) ;
#line 95
char *line_entry(int idx , char *buff ) ;
#line 96
int msg_log(char *msg ) ;
#line 97
int dns_update(char *r_dname , int r_opcode , short r_type , unsigned int r_ttl ,
               int r_size , char *r_data ) ;
#line 98
int mark_online(char *host___0 , char *addr ) ;
#line 99
int mark_offline(char *host___0 ) ;
#line 102 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
db_t *dbase  =    (db_t *)((void *)0);
#line 105 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int msg_log(char *msg ) 
{ 
  FILE *fp ;
  time_t tt ;
  char buff[256] ;
  char *tmp ;

  {
  {
#line 112
  fp = fopen((char const   */* __restrict  */)"/var/log/dhis-dns-engine.log", (char const   */* __restrict  */)"a");
  }
  {
#line 113
  while (1) {
    while_continue: /* CIL Label */ ;
#line 113
    if (! ((unsigned long )fp == (unsigned long )((void *)0))) {
#line 113
      goto while_break;
    }
    {
#line 113
    sleep(1U);
#line 113
    fp = fopen((char const   */* __restrict  */)"/var/log/dhis-dns-engine.log", (char const   */* __restrict  */)"a");
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 114
  tt = time((time_t *)((void *)0));
#line 115
  tmp = ctime((time_t const   *)(& tt));
#line 115
  strcpy((char */* __restrict  */)(buff), (char const   */* __restrict  */)tmp);
#line 116
  off_nl(buff);
#line 117
  strcat((char */* __restrict  */)(buff), (char const   */* __restrict  */)" : ");
#line 118
  strcat((char */* __restrict  */)(buff), (char const   */* __restrict  */)msg);
#line 119
  strcat((char */* __restrict  */)(buff), (char const   */* __restrict  */)"\n");
#line 120
  fputs((char const   */* __restrict  */)(buff), (FILE */* __restrict  */)fp);
#line 121
  fclose(fp);
  }
#line 122
  return (1);
}
}
#line 126 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
void strtolower(char *s ) 
{ 
  int tmp ;

  {
  {
#line 126
  while (1) {
    while_continue: /* CIL Label */ ;
#line 126
    if (! ((int )*s != 0)) {
#line 126
      goto while_break;
    }
    {
#line 126
    tmp = tolower((int )*s);
#line 126
    *s = (char )tmp;
#line 126
    s ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 126
  return;
}
}
#line 127 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
void off_nl(char *s ) 
{ 


  {
  {
#line 129
  while (1) {
    while_continue: /* CIL Label */ ;
#line 129
    if ((int )*s != 0) {
#line 129
      if ((int )*s != 10) {
#line 129
        if (! ((int )*s != 13)) {
#line 129
          goto while_break;
        }
      } else {
#line 129
        goto while_break;
      }
    } else {
#line 129
      goto while_break;
    }
#line 129
    s ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 130
  *s = (char )'\000';
#line 131
  return;
}
}
#line 136 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
static char b2[1024]  ;
#line 136 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
static char *pb2  ;
#line 134 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
char *line_entry(int idx , char *buff ) 
{ 
  int i ;

  {
#line 139
  idx --;
#line 140
  b2[0] = (char )'\000';
#line 141
  pb2 = b2;
  {
#line 143
  while (1) {
    while_continue: /* CIL Label */ ;
#line 143
    if ((int )*buff == 32) {
#line 143
      goto _L;
    } else
#line 143
    if ((int )*buff == 9) {
      _L: /* CIL Label */ 
#line 143
      if ((int )*buff != 0) {
#line 143
        if (! ((int )*buff != 10)) {
#line 143
          goto while_break;
        }
      } else {
#line 143
        goto while_break;
      }
    } else {
#line 143
      goto while_break;
    }
#line 144
    buff ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 145
  if ((int )*buff == 0) {
#line 145
    return (b2);
  } else
#line 145
  if ((int )*buff == 10) {
#line 145
    return (b2);
  }
#line 147
  i = 0;
  {
#line 147
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 147
    if (! (i < idx)) {
#line 147
      goto while_break___0;
    }
    {
#line 148
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 148
      if ((int )*buff != 32) {
#line 148
        if ((int )*buff != 9) {
#line 148
          if ((int )*buff != 0) {
#line 148
            if (! ((int )*buff != 10)) {
#line 148
              goto while_break___1;
            }
          } else {
#line 148
            goto while_break___1;
          }
        } else {
#line 148
          goto while_break___1;
        }
      } else {
#line 148
        goto while_break___1;
      }
#line 149
      buff ++;
    }
    while_break___1: /* CIL Label */ ;
    }
#line 150
    if ((int )*buff == 0) {
#line 150
      return (b2);
    } else
#line 150
    if ((int )*buff == 10) {
#line 150
      return (b2);
    }
    {
#line 151
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 151
      if ((int )*buff == 32) {
#line 151
        goto _L___0;
      } else
#line 151
      if ((int )*buff == 9) {
        _L___0: /* CIL Label */ 
#line 151
        if ((int )*buff != 0) {
#line 151
          if (! ((int )*buff != 10)) {
#line 151
            goto while_break___2;
          }
        } else {
#line 151
          goto while_break___2;
        }
      } else {
#line 151
        goto while_break___2;
      }
#line 152
      buff ++;
    }
    while_break___2: /* CIL Label */ ;
    }
#line 153
    if ((int )*buff == 0) {
#line 153
      return (b2);
    } else
#line 153
    if ((int )*buff == 10) {
#line 153
      return (b2);
    }
#line 147
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
  {
#line 155
  while (1) {
    while_continue___3: /* CIL Label */ ;
#line 155
    if ((int )*buff != 32) {
#line 155
      if ((int )*buff != 9) {
#line 155
        if ((int )*buff != 0) {
#line 155
          if (! ((int )*buff != 10)) {
#line 155
            goto while_break___3;
          }
        } else {
#line 155
          goto while_break___3;
        }
      } else {
#line 155
        goto while_break___3;
      }
    } else {
#line 155
      goto while_break___3;
    }
#line 156
    *pb2 = *buff;
#line 157
    buff ++;
#line 158
    pb2 ++;
  }
  while_break___3: /* CIL Label */ ;
  }
#line 160
  *pb2 = (char )'\000';
#line 161
  return (b2);
}
}
#line 164 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int db_reload(void) 
{ 
  FILE *fp ;
  char str[1024] ;
  db_t *rec ;
  char keyword[256] ;
  char *cp ;
  void *tmp ;
  char *tmp___0 ;
  char *tmp___1 ;
  char *tmp___2 ;
  char *tmp___3 ;
  int tmp___4 ;
  char *tmp___5 ;
  int tmp___6 ;
  char *tmp___7 ;
  int tmp___8 ;
  char *tmp___9 ;
  char *tmp___10 ;
  char *tmp___11 ;

  {
#line 170
  if ((unsigned long )dbase != (unsigned long )((void *)0)) {
    {
#line 170
    db_free();
    }
  }
  {
#line 172
  fp = fopen((char const   */* __restrict  */)"/etc/dhis-server/dhis.db", (char const   */* __restrict  */)"r");
  }
#line 173
  if ((unsigned long )fp == (unsigned long )((void *)0)) {
#line 173
    return (0);
  }
  {
#line 174
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 174
    tmp___11 = fgets((char */* __restrict  */)(str), 1024, (FILE */* __restrict  */)fp);
    }
#line 174
    if (! ((unsigned long )tmp___11 != (unsigned long )((void *)0))) {
#line 174
      goto while_break;
    }
    {
#line 175
    off_nl(str);
#line 177
    tmp___9 = line_entry(1, str);
#line 177
    tmp___10 = strchr((char const   *)tmp___9, ';');
    }
#line 177
    if ((unsigned long )tmp___10 == (unsigned long )((void *)0)) {
      {
#line 178
      tmp___7 = line_entry(2, str);
#line 178
      tmp___8 = strcmp((char const   *)tmp___7, "{");
      }
#line 178
      if (! tmp___8) {
        {
#line 183
        tmp = malloc(sizeof(db_t ));
#line 183
        rec = (db_t *)tmp;
        }
#line 184
        if ((unsigned long )rec == (unsigned long )((void *)0)) {
          {
#line 184
          fclose(fp);
          }
#line 184
          return (0);
        }
        {
#line 185
        tmp___0 = line_entry(1, str);
#line 185
        rec->id = atoi((char const   *)tmp___0);
#line 186
        rec->fqdn[0] = (char )'\000';
        }
        {
#line 187
        while (1) {
          while_continue___0: /* CIL Label */ ;
          {
#line 188
          tmp___1 = fgets((char */* __restrict  */)(str), 1024, (FILE */* __restrict  */)fp);
          }
#line 188
          if ((unsigned long )tmp___1 == (unsigned long )((void *)0)) {
            {
#line 188
            fclose(fp);
#line 188
            free((void *)rec);
            }
#line 188
            return (0);
          }
          {
#line 189
          off_nl(str);
#line 190
          tmp___2 = line_entry(1, str);
#line 190
          strcpy((char */* __restrict  */)(keyword), (char const   */* __restrict  */)tmp___2);
#line 191
          strtolower(keyword);
#line 193
          tmp___4 = strcmp((char const   *)(keyword), "hostname");
          }
#line 193
          if (! tmp___4) {
            {
#line 194
            tmp___3 = line_entry(2, str);
#line 194
            strcpy((char */* __restrict  */)(rec->fqdn), (char const   */* __restrict  */)tmp___3);
#line 197
            cp = strchr((char const   *)(rec->fqdn), ';');
            }
#line 197
            if ((unsigned long )cp != (unsigned long )((void *)0)) {
#line 198
              *cp = (char )'\000';
            }
          }
          {
#line 187
          tmp___5 = line_entry(1, str);
#line 187
          tmp___6 = strcmp((char const   *)tmp___5, "}");
          }
#line 187
          if (! tmp___6) {
#line 187
            goto while_break___0;
          }
        }
        while_break___0: /* CIL Label */ ;
        }
#line 204
        if ((int )rec->fqdn[0] == 0) {
#line 204
          goto while_continue;
        }
        {
#line 205
        db_add(rec);
        }
      }
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 208
  fclose(fp);
  }
#line 209
  return (1);
}
}
#line 212 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int db_free(void) 
{ 
  db_t *p1 ;
  db_t *p2 ;

  {
#line 216
  if ((unsigned long )dbase == (unsigned long )((void *)0)) {
#line 216
    return (1);
  }
#line 217
  p1 = dbase;
  {
#line 218
  while (1) {
    while_continue: /* CIL Label */ ;
#line 218
    if (! ((unsigned long )p1 != (unsigned long )((void *)0))) {
#line 218
      goto while_break;
    }
    {
#line 219
    p2 = p1;
#line 220
    p1 = p1->next;
#line 221
    free((void *)p2);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 223
  dbase = (db_t *)((void *)0);
#line 224
  return (1);
}
}
#line 230 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
static char host[64]  ;
#line 231 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
static int lastid  =    0;
#line 227 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
char *db_hostname(int id ) 
{ 
  db_t *p1 ;

  {
#line 233
  if (lastid == id) {
#line 233
    return (host);
  }
#line 235
  p1 = dbase;
  {
#line 236
  while (1) {
    while_continue: /* CIL Label */ ;
#line 236
    if (! ((unsigned long )p1 != (unsigned long )((void *)0))) {
#line 236
      goto while_break;
    }
#line 237
    if (p1->id == id) {
      {
#line 238
      strcpy((char */* __restrict  */)(host), (char const   */* __restrict  */)(p1->fqdn));
#line 239
      lastid = id;
      }
#line 240
      return (host);
    }
#line 242
    p1 = p1->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 244
  return ((char *)((void *)0));
}
}
#line 247 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int db_add(db_t *rec ) 
{ 
  db_t *p ;

  {
#line 250
  p = dbase;
#line 251
  if ((unsigned long )dbase == (unsigned long )((void *)0)) {
#line 252
    dbase = rec;
#line 253
    dbase->next = (struct db_t *)((void *)0);
#line 254
    return (1);
  }
  {
#line 257
  while (1) {
    while_continue: /* CIL Label */ ;
#line 257
    if (! ((unsigned long )p->next != (unsigned long )((void *)0))) {
#line 257
      goto while_break;
    }
#line 257
    p = p->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 258
  p->next = rec;
#line 259
  (p->next)->next = (struct db_t *)((void *)0);
#line 260
  return (1);
}
}
#line 267 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int mark_online(char *host___0 , char *addr ) 
{ 
  char str[128] ;
  size_t tmp ;

  {
#line 271
  if ((unsigned long )host___0 == (unsigned long )((void *)0)) {
#line 271
    return (0);
  }
#line 272
  if ((int )*(host___0 + 0) == 0) {
#line 272
    return (0);
  }
#line 273
  if ((unsigned long )addr == (unsigned long )((void *)0)) {
#line 273
    return (0);
  }
#line 274
  if ((int )*(addr + 0) == 0) {
#line 274
    return (0);
  }
  {
#line 276
  sprintf((char */* __restrict  */)(str), (char const   */* __restrict  */)"%s.",
          host___0);
#line 277
  dns_update(str, 0, (short)1, 0U, 0, (char *)"");
#line 278
  tmp = strlen((char const   *)addr);
#line 278
  dns_update(str, 1, (short)1, 60U, (int )tmp, addr);
  }
#line 279
  return (0);
}
}
#line 282 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int mark_offline(char *host___0 ) 
{ 
  char str[128] ;
  char str2[16] ;
  size_t tmp ;

  {
#line 286
  if ((unsigned long )host___0 == (unsigned long )((void *)0)) {
#line 286
    return (0);
  }
#line 287
  if ((int )*(host___0 + 0) == 0) {
#line 287
    return (0);
  }
  {
#line 289
  strcpy((char */* __restrict  */)(str2), (char const   */* __restrict  */)"192.168.255.0");
#line 290
  sprintf((char */* __restrict  */)(str), (char const   */* __restrict  */)"%s.",
          host___0);
#line 291
  dns_update(str, 0, (short)1, 0U, 0, (char *)"");
#line 292
  tmp = strlen((char const   *)(str2));
#line 292
  dns_update(str, 1, (short)1, 60U, (int )tmp, str2);
  }
#line 293
  return (0);
}
}
#line 297 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/dhis-dns-engine.c"
int main(void) 
{ 
  char line[1024] ;
  char *tmp ;
  int tmp___0 ;
  char *tmp___1 ;
  int tmp___2 ;
  int id ;
  char addr[128] ;
  char logstr[128] ;
  char *tmp___3 ;
  char *tmp___4 ;
  char *tmp___5 ;
  char *tmp___6 ;
  char *tmp___7 ;
  int tmp___8 ;
  int id___0 ;
  char addr___0[128] ;
  char logstr___0[128] ;
  char *tmp___9 ;
  char *tmp___10 ;
  char *tmp___11 ;
  char *tmp___12 ;
  char *tmp___13 ;
  char *tmp___14 ;
  int tmp___15 ;
  int id___1 ;
  char addr___1[128] ;
  char logstr___1[128] ;
  char *tmp___16 ;
  char *tmp___17 ;
  char *tmp___18 ;
  char *tmp___19 ;
  char *tmp___20 ;
  int tmp___21 ;
  char *tmp___22 ;

  {
  {
#line 301
  db_reload();
#line 302
  sprintf((char */* __restrict  */)(line), (char const   */* __restrict  */)"DHIS DNS Engine Starting");
#line 303
  msg_log(line);
  }
  {
#line 305
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 305
    tmp___22 = fgets((char */* __restrict  */)(line), 1024, (FILE */* __restrict  */)stdin);
    }
#line 305
    if (! ((unsigned long )tmp___22 != (unsigned long )((void *)0))) {
#line 305
      goto while_break;
    }
    {
#line 306
    off_nl(line);
#line 307
    tmp = line_entry(1, line);
#line 307
    tmp___0 = strcmp((char const   *)tmp, "exit");
    }
#line 307
    if (! tmp___0) {
      {
#line 308
      db_free();
#line 309
      exit(0);
      }
    }
    {
#line 311
    tmp___1 = line_entry(1, line);
#line 311
    tmp___2 = strcmp((char const   *)tmp___1, "reload");
    }
#line 311
    if (! tmp___2) {
      {
#line 312
      db_reload();
      }
#line 313
      goto while_continue;
    }
    {
#line 315
    tmp___7 = line_entry(1, line);
#line 315
    tmp___8 = strcmp((char const   *)tmp___7, "add");
    }
#line 315
    if (! tmp___8) {
      {
#line 319
      tmp___3 = line_entry(3, line);
#line 319
      id = atoi((char const   *)tmp___3);
#line 320
      tmp___4 = line_entry(4, line);
#line 320
      strcpy((char */* __restrict  */)(addr), (char const   */* __restrict  */)tmp___4);
#line 321
      tmp___5 = db_hostname(id);
#line 321
      mark_online(tmp___5, addr);
#line 322
      tmp___6 = db_hostname(id);
#line 322
      sprintf((char */* __restrict  */)(logstr), (char const   */* __restrict  */)"-> online %s [%s]",
              tmp___6, addr);
#line 324
      msg_log(logstr);
      }
#line 325
      goto while_continue;
    }
    {
#line 327
    tmp___14 = line_entry(1, line);
#line 327
    tmp___15 = strcmp((char const   *)tmp___14, "update");
    }
#line 327
    if (! tmp___15) {
      {
#line 331
      tmp___9 = line_entry(3, line);
#line 331
      id___0 = atoi((char const   *)tmp___9);
#line 332
      tmp___10 = line_entry(4, line);
#line 332
      strcpy((char */* __restrict  */)(addr___0), (char const   */* __restrict  */)tmp___10);
#line 333
      tmp___11 = db_hostname(id___0);
#line 333
      mark_offline(tmp___11);
#line 334
      tmp___12 = db_hostname(id___0);
#line 334
      mark_online(tmp___12, addr___0);
#line 335
      tmp___13 = db_hostname(id___0);
#line 335
      sprintf((char */* __restrict  */)(logstr___0), (char const   */* __restrict  */)"-> update %s [%s]",
              tmp___13, addr___0);
#line 337
      msg_log(logstr___0);
      }
#line 338
      goto while_continue;
    }
    {
#line 340
    tmp___20 = line_entry(1, line);
#line 340
    tmp___21 = strcmp((char const   *)tmp___20, "delete");
    }
#line 340
    if (! tmp___21) {
      {
#line 344
      tmp___16 = line_entry(3, line);
#line 344
      id___1 = atoi((char const   *)tmp___16);
#line 345
      tmp___17 = line_entry(4, line);
#line 345
      strcpy((char */* __restrict  */)(addr___1), (char const   */* __restrict  */)tmp___17);
#line 346
      tmp___18 = db_hostname(id___1);
#line 346
      mark_offline(tmp___18);
#line 347
      tmp___19 = db_hostname(id___1);
#line 347
      sprintf((char */* __restrict  */)(logstr___1), (char const   */* __restrict  */)"-> offline %s [%s]",
              tmp___19, addr___1);
#line 349
      msg_log(logstr___1);
      }
#line 350
      goto while_continue;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 353
  return (0);
}
}
#line 353 "/usr/include/unistd.h"
extern int close(int __fd ) ;
#line 366
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 417
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) pipe)(int *__pipedes ) ;
#line 534
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) dup2)(int __fd ,
                                                                           int __fd2 ) ;
#line 584
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) execlp)(char const   *__file ,
                                                                                               char const   *__arg 
                                                                                               , ...) ;
#line 756
extern  __attribute__((__nothrow__)) __pid_t fork(void) ;
#line 125 "/usr/include/x86_64-linux-gnu/sys/wait.h"
extern __pid_t waitpid(__pid_t __pid , int *__stat_loc , int __options ) ;
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 44 "/home/june/repo/benchmarks/collector/temp/dhis-dns-engine-5.3/nsupdate.c"
int dns_update(char *r_dname , int r_opcode , short r_type , unsigned int r_ttl ,
               int r_size , char *r_data ) 
{ 
  char str[1024] ;
  int fildes[2] ;
  int childpid ;
  int r ;
  int tmp ;
  size_t tmp___0 ;
  int ret ;
  __pid_t tmp___1 ;

  {
#line 50
  if (r_opcode == 1) {
    {
#line 51
    sprintf((char */* __restrict  */)(str), (char const   */* __restrict  */)"update add %s %d IN ",
            r_dname, r_ttl);
    }
  } else
#line 52
  if (r_opcode == 0) {
    {
#line 53
    sprintf((char */* __restrict  */)(str), (char const   */* __restrict  */)"update delete %s IN ",
            r_dname);
    }
  } else {
#line 54
    return (0);
  }
#line 56
  if ((int )r_type == 1) {
    {
#line 56
    strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)"A ");
    }
  } else
#line 57
  if ((int )r_type == 15) {
    {
#line 57
    strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)"MX ");
    }
  } else
#line 58
  if ((int )r_type == 5) {
    {
#line 58
    strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)"CNAME ");
    }
  } else {
#line 59
    return (0);
  }
  {
#line 61
  strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)r_data);
#line 62
  strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)"\n");
#line 63
  strcat((char */* __restrict  */)(str), (char const   */* __restrict  */)"\n");
#line 68
  r = 0;
#line 70
  tmp = pipe((int *)(fildes));
  }
#line 70
  if (tmp) {
#line 70
    return (0);
  }
  {
#line 72
  tmp___0 = strlen((char const   *)(str));
#line 72
  write(fildes[1], (void const   *)(str), tmp___0 + 1UL);
#line 74
  childpid = fork();
  }
#line 75
  if (! childpid) {
#line 78
    if (fildes[0] != 0) {
      {
#line 78
      close(0);
      }
    }
#line 79
    if (fildes[0] != 0) {
      {
#line 79
      dup2(fildes[0], 0);
      }
    }
    {
#line 80
    close(fildes[1]);
#line 83
    close(1);
#line 84
    close(2);
#line 85
    open("/dev/null", 1, 438);
#line 86
    open("/dev/null", 1, 438);
#line 88
    r = execlp("/usr/bin/nsupdate", "/usr/bin/nsupdate", "-d", (void *)0);
    }
#line 89
    if (r) {
      {
#line 89
      exit(1);
      }
    } else {
      {
#line 89
      exit(0);
      }
    }
  } else {
    {
#line 92
    close(fildes[0]);
#line 93
    close(fildes[1]);
#line 94
    tmp___1 = waitpid(childpid, & ret, 0);
    }
#line 94
    if (tmp___1 == -1) {
#line 94
      return (0);
    }
#line 95
    return (1);
  }
}
}
