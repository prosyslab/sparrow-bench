/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 44
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 144 "/usr/include/libio.h"
struct _IO_FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 368 "/usr/include/x86_64-linux-gnu/zconf.h"
typedef unsigned char Byte;
#line 370 "/usr/include/x86_64-linux-gnu/zconf.h"
typedef unsigned int uInt;
#line 371 "/usr/include/x86_64-linux-gnu/zconf.h"
typedef unsigned long uLong;
#line 377 "/usr/include/x86_64-linux-gnu/zconf.h"
typedef Byte Bytef;
#line 386 "/usr/include/x86_64-linux-gnu/zconf.h"
typedef void *voidpf;
#line 83 "/usr/include/zlib.h"
struct internal_state;
#line 83
struct internal_state;
#line 85 "/usr/include/zlib.h"
struct z_stream_s {
   Bytef *next_in ;
   uInt avail_in ;
   uLong total_in ;
   Bytef *next_out ;
   uInt avail_out ;
   uLong total_out ;
   char *msg ;
   struct internal_state *state ;
   voidpf (*zalloc)(voidpf opaque , uInt items , uInt size ) ;
   void (*zfree)(voidpf opaque , voidpf address ) ;
   voidpf opaque ;
   int data_type ;
   uLong adler ;
   uLong reserved ;
};
#line 85 "/usr/include/zlib.h"
typedef struct z_stream_s z_stream;
#line 106 "/usr/include/zlib.h"
typedef z_stream *z_streamp;
#line 1742 "/usr/include/zlib.h"
struct internal_state {
   int dummy ;
};
#line 952 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
struct IHDR {
   unsigned int mWidth ;
   unsigned int mHeight ;
   unsigned char mDepth ;
   unsigned char mColorType ;
   unsigned char mCompression ;
   unsigned char mFilterMethod ;
   unsigned char mInterlaceMethod ;
};
/* compiler builtin: 
   int __builtin_bswap32(int  ) ;  */
#line 237 "/usr/include/stdio.h"
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 364
extern  __attribute__((__nothrow__)) int sprintf(char * __restrict  __s , char const   * __restrict  __format 
                                                 , ...) ;
#line 709
extern size_t fread(void * __restrict  __ptr , size_t __size , size_t __n , FILE * __restrict  __stream ) ;
#line 715
extern size_t fwrite(void const   * __restrict  __ptr , size_t __size , size_t __n ,
                     FILE * __restrict  __s ) ;
#line 749
extern int fseek(FILE *__stream , long __off , int __whence ) ;
#line 828
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) feof)(FILE *__stream ) ;
#line 466 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) malloc)(size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 775
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) abs)(int __x )  __attribute__((__const__)) ;
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 66
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 69
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) memcmp)(void const   *__s1 ,
                                                                                               void const   *__s2 ,
                                                                                               size_t __n )  __attribute__((__pure__)) ;
#line 129
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcpy)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 137
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strcat)(char * __restrict  __dest ,
                                                                                                 char const   * __restrict  __src ) ;
#line 246 "/usr/include/zlib.h"
extern int deflate(z_streamp strm , int flush ) ;
#line 353
extern int deflateEnd(z_streamp strm ) ;
#line 392
extern int inflate(z_streamp strm , int flush ) ;
#line 508
extern int inflateEnd(z_streamp strm ) ;
#line 649
extern int deflateReset(z_streamp strm ) ;
#line 892
extern int inflateReset(z_streamp strm ) ;
#line 1600
extern uLong crc32(uLong crc , Bytef const   *buf , uInt len ) ;
#line 1635
extern int inflateInit_(z_streamp strm , char const   *version , int stream_size ) ;
#line 1637
extern int deflateInit2_(z_streamp strm , int level , int method , int windowBits ,
                         int memLevel , int strategy , char const   *version , int stream_size ) ;
#line 44 "/usr/include/x86_64-linux-gnu/bits/byteswap.h"
__inline static unsigned int __bswap_32(unsigned int __bsx ) 
{ 
  int tmp ;

  {
  {
#line 47
  tmp = __builtin_bswap32((int )__bsx);
  }
#line 47
  return ((unsigned int )tmp);
}
}
#line 71 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned char png_sign[8]  = 
#line 71 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
  {      (unsigned char)137,      (unsigned char)80,      (unsigned char)78,      (unsigned char)71, 
        (unsigned char)13,      (unsigned char)10,      (unsigned char)26,      (unsigned char)10};
#line 72 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int mask4[2]  = {      240,      15};
#line 73 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int shift4[2]  = {      4,      0};
#line 74 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int mask2[4]  = {      192,      48,      12,      3};
#line 75 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int shift2[4]  = {      6,      4,      2,      0};
#line 76 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int mask1[8]  = 
#line 76
  {      128,      64,      32,      16, 
        8,      4,      2,      1};
#line 77 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int shift1[8]  = 
#line 77
  {      7,      6,      5,      4, 
        3,      2,      1,      0};
#line 78 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned int keep_original  =    1U;
#line 79 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned char pal[256][3]  ;
#line 80 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned char trns[256]  ;
#line 81 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned int palsize  ;
#line 81 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned int trnssize  ;
#line 82 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned short trns1  ;
#line 82 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned short trns2  ;
#line 82 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned short trns3  ;
#line 83 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int trns_idx  ;
#line 85 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int read32(unsigned int *val , FILE *f1 ) 
{ 
  unsigned int res ;
  size_t tmp ;

  {
  {
#line 88
  tmp = fread((void */* __restrict  */)(& res), (size_t )1, (size_t )4, (FILE */* __restrict  */)f1);
  }
#line 88
  if (tmp != 4UL) {
#line 88
    return (1);
  }
  {
#line 89
  *val = __bswap_32(res);
  }
#line 90
  return (0);
}
}
#line 93 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int read16(unsigned short *val , FILE *f1 ) 
{ 
  unsigned short res ;
  size_t tmp ;
  unsigned short __v ;
  unsigned short __x ;

  {
  {
#line 96
  tmp = fread((void */* __restrict  */)(& res), (size_t )1, (size_t )2, (FILE */* __restrict  */)f1);
  }
#line 96
  if (tmp != 2UL) {
#line 96
    return (1);
  }
#line 97
  __x = res;
#line 97
  __asm__  ("rorw $8, %w0": "=r" (__v): "0" (__x): "cc");
#line 97
  *val = __v;
#line 98
  return (0);
}
}
#line 101 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
unsigned short readshort(unsigned char *p ) 
{ 


  {
#line 103
  return ((unsigned short )(((int )((unsigned short )*p) << 8) + (int )((unsigned short )*(p + 1))));
}
}
#line 106 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void read_sub_row(unsigned char *row , unsigned int rowbytes , unsigned int bpp ) 
{ 
  unsigned int i ;

  {
#line 110
  i = bpp;
  {
#line 110
  while (1) {
    while_continue: /* CIL Label */ ;
#line 110
    if (! (i < rowbytes)) {
#line 110
      goto while_break;
    }
#line 111
    *(row + i) = (unsigned char )((int )*(row + i) + (int )*(row + (i - bpp)));
#line 110
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 112
  return;
}
}
#line 114 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void read_up_row(unsigned char *row , unsigned char *prev_row , unsigned int rowbytes ,
                 unsigned int bpp ) 
{ 
  unsigned int i ;

  {
#line 118
  if (prev_row) {
#line 119
    i = 0U;
    {
#line 119
    while (1) {
      while_continue: /* CIL Label */ ;
#line 119
      if (! (i < rowbytes)) {
#line 119
        goto while_break;
      }
#line 120
      *(row + i) = (unsigned char )((int )*(row + i) + (int )*(prev_row + i));
#line 119
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  }
#line 121
  return;
}
}
#line 123 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void read_average_row(unsigned char *row , unsigned char *prev_row , unsigned int rowbytes ,
                      unsigned int bpp ) 
{ 
  unsigned int i ;

  {
#line 127
  if (prev_row) {
#line 129
    i = 0U;
    {
#line 129
    while (1) {
      while_continue: /* CIL Label */ ;
#line 129
      if (! (i < bpp)) {
#line 129
        goto while_break;
      }
#line 130
      *(row + i) = (unsigned char )((int )*(row + i) + ((int )*(prev_row + i) >> 1));
#line 129
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
#line 131
    i = bpp;
    {
#line 131
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 131
      if (! (i < rowbytes)) {
#line 131
        goto while_break___0;
      }
#line 132
      *(row + i) = (unsigned char )((int )*(row + i) + (((int )*(prev_row + i) + (int )*(row + (i - bpp))) >> 1));
#line 131
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  } else {
#line 136
    i = bpp;
    {
#line 136
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 136
      if (! (i < rowbytes)) {
#line 136
        goto while_break___1;
      }
#line 137
      *(row + i) = (unsigned char )((int )*(row + i) + ((int )*(row + (i - bpp)) >> 1));
#line 136
      i ++;
    }
    while_break___1: /* CIL Label */ ;
    }
  }
#line 139
  return;
}
}
#line 141 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void read_paeth_row(unsigned char *row , unsigned char *prev_row , unsigned int rowbytes ,
                    unsigned int bpp ) 
{ 
  unsigned int i ;
  int a ;
  int b ;
  int c ;
  int pa ;
  int pb ;
  int pc ;
  int p ;
  int tmp ;
  int tmp___0 ;

  {
#line 146
  if (prev_row) {
#line 148
    i = 0U;
    {
#line 148
    while (1) {
      while_continue: /* CIL Label */ ;
#line 148
      if (! (i < bpp)) {
#line 148
        goto while_break;
      }
#line 149
      *(row + i) = (unsigned char )((int )*(row + i) + (int )*(prev_row + i));
#line 148
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
#line 150
    i = bpp;
    {
#line 150
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 150
      if (! (i < rowbytes)) {
#line 150
        goto while_break___0;
      }
      {
#line 152
      a = (int )*(row + (i - bpp));
#line 153
      b = (int )*(prev_row + i);
#line 154
      c = (int )*(prev_row + (i - bpp));
#line 155
      p = b - c;
#line 156
      pc = a - c;
#line 157
      pa = abs(p);
#line 158
      pb = abs(pc);
#line 159
      pc = abs(p + pc);
      }
#line 160
      if (pa <= pb) {
#line 160
        if (pa <= pc) {
#line 160
          tmp___0 = a;
        } else {
#line 160
          goto _L;
        }
      } else {
        _L: /* CIL Label */ 
#line 160
        if (pb <= pc) {
#line 160
          tmp = b;
        } else {
#line 160
          tmp = c;
        }
#line 160
        tmp___0 = tmp;
      }
#line 160
      *(row + i) = (unsigned char )((int )*(row + i) + tmp___0);
#line 150
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  } else {
#line 165
    i = bpp;
    {
#line 165
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 165
      if (! (i < rowbytes)) {
#line 165
        goto while_break___1;
      }
#line 166
      *(row + i) = (unsigned char )((int )*(row + i) + (int )*(row + (i - bpp)));
#line 165
      i ++;
    }
    while_break___1: /* CIL Label */ ;
    }
  }
#line 168
  return;
}
}
#line 170 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void unpack(z_stream zstream , unsigned char *dst , unsigned int dst_size , unsigned char *src ,
            unsigned int src_size , unsigned int h , unsigned int rowbytes , unsigned char bpp ) 
{ 
  unsigned int j ;
  unsigned char *row ;
  unsigned char *prev_row ;
  unsigned char *tmp ;

  {
  {
#line 173
  row = dst;
#line 174
  prev_row = (unsigned char *)((void *)0);
#line 176
  zstream.next_out = dst;
#line 177
  zstream.avail_out = dst_size;
#line 178
  zstream.next_in = src;
#line 179
  zstream.avail_in = src_size;
#line 180
  inflate(& zstream, 4);
#line 181
  inflateReset(& zstream);
#line 183
  j = 0U;
  }
  {
#line 183
  while (1) {
    while_continue: /* CIL Label */ ;
#line 183
    if (! (j < h)) {
#line 183
      goto while_break;
    }
#line 185
    tmp = row;
#line 185
    row ++;
    {
#line 187
    if ((int )*tmp == 0) {
#line 187
      goto case_0;
    }
#line 188
    if ((int )*tmp == 1) {
#line 188
      goto case_1;
    }
#line 189
    if ((int )*tmp == 2) {
#line 189
      goto case_2;
    }
#line 190
    if ((int )*tmp == 3) {
#line 190
      goto case_3;
    }
#line 191
    if ((int )*tmp == 4) {
#line 191
      goto case_4;
    }
#line 185
    goto switch_break;
    case_0: /* CIL Label */ 
#line 187
    goto switch_break;
    case_1: /* CIL Label */ 
    {
#line 188
    read_sub_row(row, rowbytes, (unsigned int )bpp);
    }
#line 188
    goto switch_break;
    case_2: /* CIL Label */ 
    {
#line 189
    read_up_row(row, prev_row, rowbytes, (unsigned int )bpp);
    }
#line 189
    goto switch_break;
    case_3: /* CIL Label */ 
    {
#line 190
    read_average_row(row, prev_row, rowbytes, (unsigned int )bpp);
    }
#line 190
    goto switch_break;
    case_4: /* CIL Label */ 
    {
#line 191
    read_paeth_row(row, prev_row, rowbytes, (unsigned int )bpp);
    }
#line 191
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 193
    prev_row = row;
#line 194
    row += rowbytes;
#line 183
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 196
  return;
}
}
#line 198 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void compose0(unsigned char *dst1 , unsigned int dstbytes1 , unsigned char *dst2 ,
              unsigned int dstbytes2 , unsigned char *src , unsigned int srcbytes ,
              unsigned int w , unsigned int h , unsigned int bop , unsigned char depth ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int g ;
  unsigned int a ;
  unsigned char *sp ;
  unsigned char *dp1 ;
  unsigned int *dp2 ;
  unsigned short tmp ;
  unsigned char *tmp___0 ;
  unsigned int *tmp___1 ;
  unsigned char *tmp___2 ;
  unsigned int *tmp___3 ;
  unsigned char *tmp___4 ;
  unsigned int *tmp___5 ;
  unsigned char *tmp___6 ;
  unsigned int *tmp___7 ;
  unsigned char *tmp___8 ;
  unsigned int *tmp___9 ;
  unsigned short tmp___10 ;

  {
#line 205
  j = 0U;
  {
#line 205
  while (1) {
    while_continue: /* CIL Label */ ;
#line 205
    if (! (j < h)) {
#line 205
      goto while_break;
    }
#line 207
    sp = src + 1;
#line 208
    dp1 = dst1;
#line 209
    dp2 = (unsigned int *)dst2;
#line 211
    if (bop == 0U) {
      {
#line 215
      if ((int )depth == 16) {
#line 215
        goto case_16;
      }
#line 216
      if ((int )depth == 8) {
#line 216
        goto case_8;
      }
#line 217
      if ((int )depth == 4) {
#line 217
        goto case_4;
      }
#line 218
      if ((int )depth == 2) {
#line 218
        goto case_2;
      }
#line 219
      if ((int )depth == 1) {
#line 219
        goto case_1;
      }
#line 213
      goto switch_break;
      case_16: /* CIL Label */ 
#line 215
      i = 0U;
      {
#line 215
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 215
        if (! (i < w)) {
#line 215
          goto while_break___0;
        }
#line 215
        a = 255U;
#line 215
        if (trnssize) {
          {
#line 215
          tmp = readshort(sp);
          }
#line 215
          if ((int )tmp == (int )trns1) {
#line 215
            a = 0U;
          }
        }
#line 215
        tmp___0 = dp1;
#line 215
        dp1 ++;
#line 215
        *tmp___0 = *sp;
#line 215
        tmp___1 = dp2;
#line 215
        dp2 ++;
#line 215
        *tmp___1 = (((a << 24) + (unsigned int )((int )*sp << 16)) + (unsigned int )((int )*sp << 8)) + (unsigned int )*sp;
#line 215
        sp += 2;
#line 215
        i ++;
      }
      while_break___0: /* CIL Label */ ;
      }
#line 215
      goto switch_break;
      case_8: /* CIL Label */ 
#line 216
      i = 0U;
      {
#line 216
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 216
        if (! (i < w)) {
#line 216
          goto while_break___1;
        }
#line 216
        a = 255U;
#line 216
        if (trnssize) {
#line 216
          if ((int )*sp == (int )trns1) {
#line 216
            a = 0U;
          }
        }
#line 216
        tmp___2 = dp1;
#line 216
        dp1 ++;
#line 216
        *tmp___2 = *sp;
#line 216
        tmp___3 = dp2;
#line 216
        dp2 ++;
#line 216
        *tmp___3 = (((a << 24) + (unsigned int )((int )*sp << 16)) + (unsigned int )((int )*sp << 8)) + (unsigned int )*sp;
#line 216
        sp ++;
#line 216
        i ++;
      }
      while_break___1: /* CIL Label */ ;
      }
#line 216
      goto switch_break;
      case_4: /* CIL Label */ 
#line 217
      i = 0U;
      {
#line 217
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 217
        if (! (i < w)) {
#line 217
          goto while_break___2;
        }
#line 217
        g = (unsigned int )(((int )*(sp + (i >> 1)) & mask4[i & 1U]) >> shift4[i & 1U]);
#line 217
        a = 255U;
#line 217
        if (trnssize) {
#line 217
          if (g == (unsigned int )trns1) {
#line 217
            a = 0U;
          }
        }
#line 217
        tmp___4 = dp1;
#line 217
        dp1 ++;
#line 217
        *tmp___4 = (unsigned char )(g * 17U);
#line 217
        tmp___5 = dp2;
#line 217
        dp2 ++;
#line 217
        *tmp___5 = (a << 24) + g * 1118481U;
#line 217
        i ++;
      }
      while_break___2: /* CIL Label */ ;
      }
#line 217
      goto switch_break;
      case_2: /* CIL Label */ 
#line 218
      i = 0U;
      {
#line 218
      while (1) {
        while_continue___3: /* CIL Label */ ;
#line 218
        if (! (i < w)) {
#line 218
          goto while_break___3;
        }
#line 218
        g = (unsigned int )(((int )*(sp + (i >> 2)) & mask2[i & 3U]) >> shift2[i & 3U]);
#line 218
        a = 255U;
#line 218
        if (trnssize) {
#line 218
          if (g == (unsigned int )trns1) {
#line 218
            a = 0U;
          }
        }
#line 218
        tmp___6 = dp1;
#line 218
        dp1 ++;
#line 218
        *tmp___6 = (unsigned char )(g * 85U);
#line 218
        tmp___7 = dp2;
#line 218
        dp2 ++;
#line 218
        *tmp___7 = (a << 24) + g * 5592405U;
#line 218
        i ++;
      }
      while_break___3: /* CIL Label */ ;
      }
#line 218
      goto switch_break;
      case_1: /* CIL Label */ 
#line 219
      i = 0U;
      {
#line 219
      while (1) {
        while_continue___4: /* CIL Label */ ;
#line 219
        if (! (i < w)) {
#line 219
          goto while_break___4;
        }
#line 219
        g = (unsigned int )(((int )*(sp + (i >> 3)) & mask1[i & 7U]) >> shift1[i & 7U]);
#line 219
        a = 255U;
#line 219
        if (trnssize) {
#line 219
          if (g == (unsigned int )trns1) {
#line 219
            a = 0U;
          }
        }
#line 219
        tmp___8 = dp1;
#line 219
        dp1 ++;
#line 219
        *tmp___8 = (unsigned char )(g * 255U);
#line 219
        tmp___9 = dp2;
#line 219
        dp2 ++;
#line 219
        *tmp___9 = (a << 24) + g * 16777215U;
#line 219
        i ++;
      }
      while_break___4: /* CIL Label */ ;
      }
#line 219
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
    } else {
      {
#line 226
      if ((int )depth == 16) {
#line 226
        goto case_16___0;
      }
#line 227
      if ((int )depth == 8) {
#line 227
        goto case_8___0;
      }
#line 228
      if ((int )depth == 4) {
#line 228
        goto case_4___0;
      }
#line 229
      if ((int )depth == 2) {
#line 229
        goto case_2___0;
      }
#line 230
      if ((int )depth == 1) {
#line 230
        goto case_1___0;
      }
#line 224
      goto switch_break___0;
      case_16___0: /* CIL Label */ 
#line 226
      i = 0U;
      {
#line 226
      while (1) {
        while_continue___5: /* CIL Label */ ;
#line 226
        if (! (i < w)) {
#line 226
          goto while_break___5;
        }
        {
#line 226
        tmp___10 = readshort(sp);
        }
#line 226
        if ((int )tmp___10 != (int )trns1) {
#line 226
          *dp1 = *sp;
#line 226
          *dp2 = ((4278190080U + (unsigned int )((int )*sp << 16)) + (unsigned int )((int )*sp << 8)) + (unsigned int )*sp;
        }
#line 226
        sp += 2;
#line 226
        i ++;
#line 226
        dp1 ++;
#line 226
        dp2 ++;
      }
      while_break___5: /* CIL Label */ ;
      }
#line 226
      goto switch_break___0;
      case_8___0: /* CIL Label */ 
#line 227
      i = 0U;
      {
#line 227
      while (1) {
        while_continue___6: /* CIL Label */ ;
#line 227
        if (! (i < w)) {
#line 227
          goto while_break___6;
        }
#line 227
        if ((int )*sp != (int )trns1) {
#line 227
          *dp1 = *sp;
#line 227
          *dp2 = ((4278190080U + (unsigned int )((int )*sp << 16)) + (unsigned int )((int )*sp << 8)) + (unsigned int )*sp;
        }
#line 227
        sp ++;
#line 227
        i ++;
#line 227
        dp1 ++;
#line 227
        dp2 ++;
      }
      while_break___6: /* CIL Label */ ;
      }
#line 227
      goto switch_break___0;
      case_4___0: /* CIL Label */ 
#line 228
      i = 0U;
      {
#line 228
      while (1) {
        while_continue___7: /* CIL Label */ ;
#line 228
        if (! (i < w)) {
#line 228
          goto while_break___7;
        }
#line 228
        g = (unsigned int )(((int )*(sp + (i >> 1)) & mask4[i & 1U]) >> shift4[i & 1U]);
#line 228
        if (g != (unsigned int )trns1) {
#line 228
          *dp1 = (unsigned char )(g * 17U);
#line 228
          *dp2 = 4278190080U + g * 1118481U;
        }
#line 228
        i ++;
#line 228
        dp1 ++;
#line 228
        dp2 ++;
      }
      while_break___7: /* CIL Label */ ;
      }
#line 228
      goto switch_break___0;
      case_2___0: /* CIL Label */ 
#line 229
      i = 0U;
      {
#line 229
      while (1) {
        while_continue___8: /* CIL Label */ ;
#line 229
        if (! (i < w)) {
#line 229
          goto while_break___8;
        }
#line 229
        g = (unsigned int )(((int )*(sp + (i >> 2)) & mask2[i & 3U]) >> shift2[i & 3U]);
#line 229
        if (g != (unsigned int )trns1) {
#line 229
          *dp1 = (unsigned char )(g * 85U);
#line 229
          *dp2 = 4278190080U + g * 5592405U;
        }
#line 229
        i ++;
#line 229
        dp1 ++;
#line 229
        dp2 ++;
      }
      while_break___8: /* CIL Label */ ;
      }
#line 229
      goto switch_break___0;
      case_1___0: /* CIL Label */ 
#line 230
      i = 0U;
      {
#line 230
      while (1) {
        while_continue___9: /* CIL Label */ ;
#line 230
        if (! (i < w)) {
#line 230
          goto while_break___9;
        }
#line 230
        g = (unsigned int )(((int )*(sp + (i >> 3)) & mask1[i & 7U]) >> shift1[i & 7U]);
#line 230
        if (g != (unsigned int )trns1) {
#line 230
          *dp1 = (unsigned char )(g * 255U);
#line 230
          *dp2 = 4278190080U + g * 16777215U;
        }
#line 230
        i ++;
#line 230
        dp1 ++;
#line 230
        dp2 ++;
      }
      while_break___9: /* CIL Label */ ;
      }
#line 230
      goto switch_break___0;
      switch_break___0: /* CIL Label */ ;
      }
    }
#line 234
    src += srcbytes;
#line 235
    dst1 += dstbytes1;
#line 236
    dst2 += dstbytes2;
#line 205
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 238
  return;
}
}
#line 240 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void compose2(unsigned char *dst1 , unsigned int dstbytes1 , unsigned char *dst2 ,
              unsigned int dstbytes2 , unsigned char *src , unsigned int srcbytes ,
              unsigned int w , unsigned int h , unsigned int bop , unsigned char depth ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int r ;
  unsigned int g ;
  unsigned int b ;
  unsigned int a ;
  unsigned char *sp ;
  unsigned char *dp1 ;
  unsigned int *dp2 ;
  unsigned char *tmp ;
  unsigned char *tmp___0 ;
  unsigned char *tmp___1 ;
  unsigned char *tmp___2 ;
  unsigned char *tmp___3 ;
  unsigned char *tmp___4 ;
  unsigned int *tmp___5 ;
  unsigned short tmp___6 ;
  unsigned short tmp___7 ;
  unsigned short tmp___8 ;
  unsigned char *tmp___9 ;
  unsigned char *tmp___10 ;
  unsigned char *tmp___11 ;
  unsigned int *tmp___12 ;
  unsigned short tmp___13 ;
  unsigned short tmp___14 ;
  unsigned short tmp___15 ;

  {
#line 248
  j = 0U;
  {
#line 248
  while (1) {
    while_continue: /* CIL Label */ ;
#line 248
    if (! (j < h)) {
#line 248
      goto while_break;
    }
#line 250
    sp = src + 1;
#line 251
    dp1 = dst1;
#line 252
    dp2 = (unsigned int *)dst2;
#line 254
    if (bop == 0U) {
#line 256
      if ((int )depth == 8) {
#line 258
        i = 0U;
        {
#line 258
        while (1) {
          while_continue___0: /* CIL Label */ ;
#line 258
          if (! (i < w)) {
#line 258
            goto while_break___0;
          }
#line 260
          tmp = sp;
#line 260
          sp ++;
#line 260
          r = (unsigned int )*tmp;
#line 261
          tmp___0 = sp;
#line 261
          sp ++;
#line 261
          g = (unsigned int )*tmp___0;
#line 262
          tmp___1 = sp;
#line 262
          sp ++;
#line 262
          b = (unsigned int )*tmp___1;
#line 263
          a = 255U;
#line 264
          if (trnssize) {
#line 264
            if (r == (unsigned int )trns1) {
#line 264
              if (g == (unsigned int )trns2) {
#line 264
                if (b == (unsigned int )trns3) {
#line 265
                  a = 0U;
                }
              }
            }
          }
#line 266
          tmp___2 = dp1;
#line 266
          dp1 ++;
#line 266
          *tmp___2 = (unsigned char )r;
#line 266
          tmp___3 = dp1;
#line 266
          dp1 ++;
#line 266
          *tmp___3 = (unsigned char )g;
#line 266
          tmp___4 = dp1;
#line 266
          dp1 ++;
#line 266
          *tmp___4 = (unsigned char )b;
#line 267
          tmp___5 = dp2;
#line 267
          dp2 ++;
#line 267
          *tmp___5 = (((a << 24) + (b << 16)) + (g << 8)) + r;
#line 258
          i ++;
        }
        while_break___0: /* CIL Label */ ;
        }
      } else {
#line 272
        i = 0U;
        {
#line 272
        while (1) {
          while_continue___1: /* CIL Label */ ;
#line 272
          if (! (i < w)) {
#line 272
            goto while_break___1;
          }
#line 274
          r = (unsigned int )*sp;
#line 275
          g = (unsigned int )*(sp + 2);
#line 276
          b = (unsigned int )*(sp + 4);
#line 277
          a = 255U;
#line 278
          if (trnssize) {
            {
#line 278
            tmp___6 = readshort(sp);
            }
#line 278
            if ((int )tmp___6 == (int )trns1) {
              {
#line 278
              tmp___7 = readshort(sp + 2);
              }
#line 278
              if ((int )tmp___7 == (int )trns2) {
                {
#line 278
                tmp___8 = readshort(sp + 4);
                }
#line 278
                if ((int )tmp___8 == (int )trns3) {
#line 279
                  a = 0U;
                }
              }
            }
          }
#line 280
          tmp___9 = dp1;
#line 280
          dp1 ++;
#line 280
          *tmp___9 = (unsigned char )r;
#line 280
          tmp___10 = dp1;
#line 280
          dp1 ++;
#line 280
          *tmp___10 = (unsigned char )g;
#line 280
          tmp___11 = dp1;
#line 280
          dp1 ++;
#line 280
          *tmp___11 = (unsigned char )b;
#line 281
          tmp___12 = dp2;
#line 281
          dp2 ++;
#line 281
          *tmp___12 = (((a << 24) + (b << 16)) + (g << 8)) + r;
#line 272
          i ++;
#line 272
          sp += 6;
        }
        while_break___1: /* CIL Label */ ;
        }
      }
    } else
#line 287
    if ((int )depth == 8) {
#line 289
      i = 0U;
      {
#line 289
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 289
        if (! (i < w)) {
#line 289
          goto while_break___2;
        }
#line 290
        if ((int )*sp != (int )trns1) {
#line 292
          *dp1 = *sp;
#line 292
          *(dp1 + 1) = *(sp + 1);
#line 292
          *(dp1 + 2) = *(sp + 2);
#line 293
          *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 2) << 16)) + (unsigned int )((int )*(sp + 1) << 8)) + (unsigned int )*sp;
        } else
#line 290
        if ((int )*(sp + 1) != (int )trns2) {
#line 292
          *dp1 = *sp;
#line 292
          *(dp1 + 1) = *(sp + 1);
#line 292
          *(dp1 + 2) = *(sp + 2);
#line 293
          *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 2) << 16)) + (unsigned int )((int )*(sp + 1) << 8)) + (unsigned int )*sp;
        } else
#line 290
        if ((int )*(sp + 2) != (int )trns3) {
#line 292
          *dp1 = *sp;
#line 292
          *(dp1 + 1) = *(sp + 1);
#line 292
          *(dp1 + 2) = *(sp + 2);
#line 293
          *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 2) << 16)) + (unsigned int )((int )*(sp + 1) << 8)) + (unsigned int )*sp;
        }
#line 289
        i ++;
#line 289
        sp += 3;
#line 289
        dp1 += 3;
#line 289
        dp2 ++;
      }
      while_break___2: /* CIL Label */ ;
      }
    } else {
#line 298
      i = 0U;
      {
#line 298
      while (1) {
        while_continue___3: /* CIL Label */ ;
#line 298
        if (! (i < w)) {
#line 298
          goto while_break___3;
        }
        {
#line 299
        tmp___13 = readshort(sp);
        }
#line 299
        if ((int )tmp___13 != (int )trns1) {
#line 301
          *dp1 = *sp;
#line 301
          *(dp1 + 1) = *(sp + 2);
#line 301
          *(dp1 + 2) = *(sp + 4);
#line 302
          *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 4) << 16)) + (unsigned int )((int )*(sp + 2) << 8)) + (unsigned int )*sp;
        } else {
          {
#line 299
          tmp___14 = readshort(sp + 2);
          }
#line 299
          if ((int )tmp___14 != (int )trns2) {
#line 301
            *dp1 = *sp;
#line 301
            *(dp1 + 1) = *(sp + 2);
#line 301
            *(dp1 + 2) = *(sp + 4);
#line 302
            *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 4) << 16)) + (unsigned int )((int )*(sp + 2) << 8)) + (unsigned int )*sp;
          } else {
            {
#line 299
            tmp___15 = readshort(sp + 4);
            }
#line 299
            if ((int )tmp___15 != (int )trns3) {
#line 301
              *dp1 = *sp;
#line 301
              *(dp1 + 1) = *(sp + 2);
#line 301
              *(dp1 + 2) = *(sp + 4);
#line 302
              *dp2 = ((4278190080U + (unsigned int )((int )*(sp + 4) << 16)) + (unsigned int )((int )*(sp + 2) << 8)) + (unsigned int )*sp;
            }
          }
        }
#line 298
        i ++;
#line 298
        sp += 6;
#line 298
        dp1 += 3;
#line 298
        dp2 ++;
      }
      while_break___3: /* CIL Label */ ;
      }
    }
#line 306
    src += srcbytes;
#line 307
    dst1 += dstbytes1;
#line 308
    dst2 += dstbytes2;
#line 248
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 310
  return;
}
}
#line 312 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void compose3(unsigned char *dst1 , unsigned int dstbytes1 , unsigned char *dst2 ,
              unsigned int dstbytes2 , unsigned char *src , unsigned int srcbytes ,
              unsigned int w , unsigned int h , unsigned int bop , unsigned char depth ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int r ;
  unsigned int g ;
  unsigned int b ;
  unsigned int a ;
  unsigned int r2 ;
  unsigned int g2 ;
  unsigned int b2 ;
  unsigned int a2 ;
  int u ;
  int v ;
  int al ;
  unsigned char col ;
  unsigned char *sp ;
  unsigned char *dp1 ;
  unsigned int *dp2 ;
  unsigned char *tmp ;
  unsigned int *tmp___0 ;
  unsigned char *tmp___1 ;
  unsigned int *tmp___2 ;
  unsigned char *tmp___3 ;
  unsigned int *tmp___4 ;

  {
#line 323
  j = 0U;
  {
#line 323
  while (1) {
    while_continue: /* CIL Label */ ;
#line 323
    if (! (j < h)) {
#line 323
      goto while_break;
    }
#line 325
    sp = src + 1;
#line 326
    dp1 = dst1;
#line 327
    dp2 = (unsigned int *)dst2;
#line 329
    i = 0U;
    {
#line 329
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 329
      if (! (i < w)) {
#line 329
        goto while_break___0;
      }
      {
#line 333
      if ((int )depth == 1) {
#line 333
        goto case_1;
      }
#line 334
      if ((int )depth == 2) {
#line 334
        goto case_2;
      }
#line 335
      if ((int )depth == 4) {
#line 335
        goto case_4;
      }
#line 336
      goto switch_default;
      case_1: /* CIL Label */ 
#line 333
      col = (unsigned char )(((int )*(sp + (i >> 3)) & mask1[i & 7U]) >> shift1[i & 7U]);
#line 333
      goto switch_break;
      case_2: /* CIL Label */ 
#line 334
      col = (unsigned char )(((int )*(sp + (i >> 2)) & mask2[i & 3U]) >> shift2[i & 3U]);
#line 334
      goto switch_break;
      case_4: /* CIL Label */ 
#line 335
      col = (unsigned char )(((int )*(sp + (i >> 1)) & mask4[i & 1U]) >> shift4[i & 1U]);
#line 335
      goto switch_break;
      switch_default: /* CIL Label */ 
#line 336
      col = *(sp + i);
      switch_break: /* CIL Label */ ;
      }
#line 339
      r = (unsigned int )pal[col][0];
#line 340
      g = (unsigned int )pal[col][1];
#line 341
      b = (unsigned int )pal[col][2];
#line 342
      a = (unsigned int )trns[col];
#line 344
      if (bop == 0U) {
#line 346
        tmp = dp1;
#line 346
        dp1 ++;
#line 346
        *tmp = col;
#line 347
        tmp___0 = dp2;
#line 347
        dp2 ++;
#line 347
        *tmp___0 = (((a << 24) + (b << 16)) + (g << 8)) + r;
      } else
#line 351
      if (a == 255U) {
#line 353
        tmp___1 = dp1;
#line 353
        dp1 ++;
#line 353
        *tmp___1 = col;
#line 354
        tmp___2 = dp2;
#line 354
        dp2 ++;
#line 354
        *tmp___2 = (((a << 24) + (b << 16)) + (g << 8)) + r;
      } else
#line 357
      if (a != 0U) {
#line 359
        a2 = *dp2 >> 24;
#line 359
        if (a2 != 0U) {
#line 361
          keep_original = 0U;
#line 362
          u = (int )(a * 255U);
#line 363
          v = (int )((255U - a) * a2);
#line 364
          al = (int )(65025U - (255U - a) * (255U - a2));
#line 365
          r2 = *dp2 & 255U;
#line 366
          g2 = (*dp2 >> 8) & 255U;
#line 367
          b2 = (*dp2 >> 16) & 255U;
#line 368
          r = (r * (unsigned int )u + r2 * (unsigned int )v) / (unsigned int )al;
#line 369
          g = (g * (unsigned int )u + g2 * (unsigned int )v) / (unsigned int )al;
#line 370
          b = (b * (unsigned int )u + b2 * (unsigned int )v) / (unsigned int )al;
#line 371
          a = (unsigned int )(al / 255);
        }
#line 373
        tmp___3 = dp1;
#line 373
        dp1 ++;
#line 373
        *tmp___3 = col;
#line 374
        tmp___4 = dp2;
#line 374
        dp2 ++;
#line 374
        *tmp___4 = (((a << 24) + (b << 16)) + (g << 8)) + r;
      } else {
#line 378
        dp1 ++;
#line 379
        dp2 ++;
      }
#line 329
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 383
    src += srcbytes;
#line 384
    dst1 += dstbytes1;
#line 385
    dst2 += dstbytes2;
#line 323
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 387
  return;
}
}
#line 389 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void compose4(unsigned char *dst , unsigned int dstbytes , unsigned char *src , unsigned int srcbytes ,
              unsigned int w , unsigned int h , unsigned int bop , unsigned char depth ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int step ;
  unsigned int g ;
  unsigned int a ;
  unsigned int g2 ;
  unsigned int a2 ;
  int u ;
  int v ;
  int al ;
  unsigned char *sp ;
  unsigned char *dp ;
  unsigned char *tmp ;
  unsigned char *tmp___0 ;
  unsigned char *tmp___1 ;
  unsigned char *tmp___2 ;
  unsigned char *tmp___3 ;
  unsigned char *tmp___4 ;

  {
#line 397
  step = (unsigned int )(((int )depth + 7) / 8);
#line 399
  j = 0U;
  {
#line 399
  while (1) {
    while_continue: /* CIL Label */ ;
#line 399
    if (! (j < h)) {
#line 399
      goto while_break;
    }
#line 401
    sp = src + 1;
#line 402
    dp = dst;
#line 404
    if (bop == 0U) {
#line 406
      i = 0U;
      {
#line 406
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 406
        if (! (i < w)) {
#line 406
          goto while_break___0;
        }
#line 408
        g = (unsigned int )*sp;
#line 408
        sp += step;
#line 409
        a = (unsigned int )*sp;
#line 409
        sp += step;
#line 410
        tmp = dp;
#line 410
        dp ++;
#line 410
        *tmp = (unsigned char )g;
#line 411
        tmp___0 = dp;
#line 411
        dp ++;
#line 411
        *tmp___0 = (unsigned char )a;
#line 406
        i ++;
      }
      while_break___0: /* CIL Label */ ;
      }
    } else {
#line 416
      i = 0U;
      {
#line 416
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 416
        if (! (i < w)) {
#line 416
          goto while_break___1;
        }
#line 418
        g = (unsigned int )*sp;
#line 418
        sp += step;
#line 419
        a = (unsigned int )*sp;
#line 419
        sp += step;
#line 420
        if (a == 255U) {
#line 422
          tmp___1 = dp;
#line 422
          dp ++;
#line 422
          *tmp___1 = (unsigned char )g;
#line 423
          tmp___2 = dp;
#line 423
          dp ++;
#line 423
          *tmp___2 = (unsigned char )a;
        } else
#line 426
        if (a != 0U) {
#line 428
          a2 = (unsigned int )*(dp + 1);
#line 428
          if (a2 != 0U) {
#line 430
            u = (int )(a * 255U);
#line 431
            v = (int )((255U - a) * a2);
#line 432
            al = (int )(65025U - (255U - a) * (255U - a2));
#line 433
            g2 = (unsigned int )((int )*dp & 255);
#line 434
            g = (g * (unsigned int )u + g2 * (unsigned int )v) / (unsigned int )al;
#line 435
            a = (unsigned int )(al / 255);
          }
#line 437
          tmp___3 = dp;
#line 437
          dp ++;
#line 437
          *tmp___3 = (unsigned char )g;
#line 438
          tmp___4 = dp;
#line 438
          dp ++;
#line 438
          *tmp___4 = (unsigned char )a;
        } else {
#line 441
          dp += 2;
        }
#line 416
        i ++;
      }
      while_break___1: /* CIL Label */ ;
      }
    }
#line 444
    src += srcbytes;
#line 445
    dst += dstbytes;
#line 399
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 447
  return;
}
}
#line 449 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void compose6(unsigned char *dst , unsigned int dstbytes , unsigned char *src , unsigned int srcbytes ,
              unsigned int w , unsigned int h , unsigned int bop , unsigned char depth ) 
{ 
  unsigned int i ;
  unsigned int j ;
  unsigned int step ;
  unsigned int r ;
  unsigned int g ;
  unsigned int b ;
  unsigned int a ;
  unsigned int r2 ;
  unsigned int g2 ;
  unsigned int b2 ;
  unsigned int a2 ;
  int u ;
  int v ;
  int al ;
  unsigned char *sp ;
  unsigned int *dp ;
  unsigned int *tmp ;
  unsigned int *tmp___0 ;
  unsigned int *tmp___1 ;

  {
#line 458
  step = (unsigned int )(((int )depth + 7) / 8);
#line 460
  j = 0U;
  {
#line 460
  while (1) {
    while_continue: /* CIL Label */ ;
#line 460
    if (! (j < h)) {
#line 460
      goto while_break;
    }
#line 462
    sp = src + 1;
#line 463
    dp = (unsigned int *)dst;
#line 465
    if (bop == 0U) {
#line 467
      i = 0U;
      {
#line 467
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 467
        if (! (i < w)) {
#line 467
          goto while_break___0;
        }
#line 469
        r = (unsigned int )*sp;
#line 469
        sp += step;
#line 470
        g = (unsigned int )*sp;
#line 470
        sp += step;
#line 471
        b = (unsigned int )*sp;
#line 471
        sp += step;
#line 472
        a = (unsigned int )*sp;
#line 472
        sp += step;
#line 473
        tmp = dp;
#line 473
        dp ++;
#line 473
        *tmp = (((a << 24) + (b << 16)) + (g << 8)) + r;
#line 467
        i ++;
      }
      while_break___0: /* CIL Label */ ;
      }
    } else {
#line 478
      i = 0U;
      {
#line 478
      while (1) {
        while_continue___1: /* CIL Label */ ;
#line 478
        if (! (i < w)) {
#line 478
          goto while_break___1;
        }
#line 480
        r = (unsigned int )*sp;
#line 480
        sp += step;
#line 481
        g = (unsigned int )*sp;
#line 481
        sp += step;
#line 482
        b = (unsigned int )*sp;
#line 482
        sp += step;
#line 483
        a = (unsigned int )*sp;
#line 483
        sp += step;
#line 484
        if (a == 255U) {
#line 485
          tmp___0 = dp;
#line 485
          dp ++;
#line 485
          *tmp___0 = (((a << 24) + (b << 16)) + (g << 8)) + r;
        } else
#line 487
        if (a != 0U) {
#line 489
          a2 = *dp >> 24;
#line 489
          if (a2 != 0U) {
#line 491
            u = (int )(a * 255U);
#line 492
            v = (int )((255U - a) * a2);
#line 493
            al = (int )(65025U - (255U - a) * (255U - a2));
#line 494
            r2 = *dp & 255U;
#line 495
            g2 = (*dp >> 8) & 255U;
#line 496
            b2 = (*dp >> 16) & 255U;
#line 497
            r = (r * (unsigned int )u + r2 * (unsigned int )v) / (unsigned int )al;
#line 498
            g = (g * (unsigned int )u + g2 * (unsigned int )v) / (unsigned int )al;
#line 499
            b = (b * (unsigned int )u + b2 * (unsigned int )v) / (unsigned int )al;
#line 500
            a = (unsigned int )(al / 255);
          }
#line 502
          tmp___1 = dp;
#line 502
          dp ++;
#line 502
          *tmp___1 = (((a << 24) + (b << 16)) + (g << 8)) + r;
        } else {
#line 505
          dp ++;
        }
#line 478
        i ++;
      }
      while_break___1: /* CIL Label */ ;
      }
    }
#line 508
    src += srcbytes;
#line 509
    dst += dstbytes;
#line 460
    j ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 511
  return;
}
}
#line 513 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int LoadAPNG(char *szIn , unsigned int *pWidth , unsigned int *pHeight , unsigned int *pChannels ,
             unsigned char *pColType , unsigned int *pFirst , unsigned int *pLast ,
             unsigned char **ppOut1 , unsigned char **ppOut2 , unsigned short **ppDelays ) 
{ 
  unsigned char sig[8] ;
  unsigned int i ;
  unsigned int j ;
  unsigned int len ;
  unsigned int chunk ;
  unsigned int seq ;
  unsigned int crc ;
  unsigned int w ;
  unsigned int h ;
  unsigned int w0 ;
  unsigned int h0 ;
  unsigned int x0 ;
  unsigned int y0 ;
  unsigned char depth ;
  unsigned char coltype ;
  unsigned char compr ;
  unsigned char filter ;
  unsigned char interl ;
  unsigned char pixeldepth ;
  unsigned char bpp ;
  unsigned int rowbytes ;
  unsigned int frames ;
  unsigned int loops ;
  unsigned int first_visible ;
  unsigned int cur_frame ;
  unsigned int channels ;
  unsigned int outrow1 ;
  unsigned int outrow2 ;
  unsigned int outimg1 ;
  unsigned int outimg2 ;
  unsigned short d1 ;
  unsigned short d2 ;
  unsigned char c ;
  unsigned char dop ;
  unsigned char bop ;
  int imagesize ;
  int zbuf_size ;
  int zsize ;
  z_stream zstream ;
  unsigned char *pOut1 ;
  unsigned char *pOut2 ;
  unsigned char *pTemp ;
  unsigned char *pData ;
  unsigned char *pImg1 ;
  unsigned char *pImg2 ;
  unsigned char *pDst1 ;
  unsigned char *pDst2 ;
  unsigned short *pDelays ;
  FILE *f1 ;
  int res ;
  size_t tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  size_t tmp___5 ;
  size_t tmp___6 ;
  size_t tmp___7 ;
  size_t tmp___8 ;
  size_t tmp___9 ;
  int tmp___10 ;
  void *tmp___11 ;
  void *tmp___12 ;
  void *tmp___13 ;
  void *tmp___14 ;
  void *tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  unsigned int col ;
  size_t tmp___18 ;
  int tmp___19 ;
  size_t tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  int tmp___23 ;
  int tmp___24 ;
  void *tmp___25 ;
  void *tmp___26 ;
  void *tmp___27 ;
  int tmp___28 ;
  int tmp___29 ;
  int tmp___30 ;
  int tmp___31 ;
  int tmp___32 ;
  int tmp___33 ;
  int tmp___34 ;
  size_t tmp___35 ;
  size_t tmp___36 ;
  int tmp___37 ;
  size_t tmp___38 ;
  int tmp___39 ;
  int tmp___40 ;
  size_t tmp___41 ;
  int tmp___42 ;
  int tmp___43 ;
  int tmp___44 ;

  {
  {
#line 537
  res = 1;
#line 539
  f1 = fopen((char const   */* __restrict  */)szIn, (char const   */* __restrict  */)"rb");
  }
#line 539
  if ((unsigned long )f1 == (unsigned long )((FILE *)0)) {
    {
#line 541
    printf((char const   */* __restrict  */)"Error: can\'t open \'%s\'\n", szIn);
    }
#line 542
    return (res);
  }
  {
#line 545
  printf((char const   */* __restrict  */)"Reading \'%s\'...\n", szIn);
#line 547
  frames = 0U;
#line 548
  loops = 0U;
#line 549
  first_visible = 0U;
#line 550
  cur_frame = 0U;
#line 551
  zsize = 0;
#line 552
  x0 = 0U;
#line 553
  y0 = 0U;
#line 554
  bop = (unsigned char)0;
#line 555
  palsize = 0U;
#line 556
  trnssize = 0U;
#line 557
  trns_idx = -1;
#line 559
  memset((void *)(trns), 255, (size_t )256);
#line 561
  zstream.zalloc = (voidpf (*)(voidpf opaque , uInt items , uInt size ))0;
#line 562
  zstream.zfree = (void (*)(voidpf opaque , voidpf address ))0;
#line 563
  zstream.opaque = (voidpf )0;
#line 564
  inflateInit_(& zstream, "1.2.8", (int )sizeof(z_stream ));
  }
  {
#line 566
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 568
    tmp = fread((void */* __restrict  */)(sig), (size_t )1, (size_t )8, (FILE */* __restrict  */)f1);
    }
#line 568
    if (tmp != 8UL) {
      {
#line 570
      printf((char const   */* __restrict  */)"Error: can\'t read the sig\n");
      }
#line 571
      goto while_break;
    }
    {
#line 573
    tmp___0 = memcmp((void const   *)(sig), (void const   *)(png_sign), (size_t )8);
    }
#line 573
    if (tmp___0 != 0) {
      {
#line 575
      printf((char const   */* __restrict  */)"Error: wrong PNG sig\n");
      }
#line 576
      goto while_break;
    }
    {
#line 579
    tmp___1 = read32(& len, f1);
    }
#line 579
    if (tmp___1) {
#line 579
      goto while_break;
    }
    {
#line 580
    tmp___2 = read32(& chunk, f1);
    }
#line 580
    if (tmp___2) {
#line 580
      goto while_break;
    }
#line 582
    if (len != 13U) {
      {
#line 584
      printf((char const   */* __restrict  */)"Error: missing IHDR\n");
      }
#line 585
      goto while_break;
    } else
#line 582
    if (chunk != 1229472850U) {
      {
#line 584
      printf((char const   */* __restrict  */)"Error: missing IHDR\n");
      }
#line 585
      goto while_break;
    }
    {
#line 588
    tmp___3 = read32(& w, f1);
    }
#line 588
    if (tmp___3) {
#line 588
      goto while_break;
    }
    {
#line 589
    tmp___4 = read32(& h, f1);
    }
#line 589
    if (tmp___4) {
#line 589
      goto while_break;
    }
    {
#line 590
    w0 = w;
#line 591
    h0 = h;
#line 592
    tmp___5 = fread((void */* __restrict  */)(& depth), (size_t )1, (size_t )1, (FILE */* __restrict  */)f1);
    }
#line 592
    if (tmp___5 != 1UL) {
#line 592
      goto while_break;
    }
    {
#line 593
    tmp___6 = fread((void */* __restrict  */)(& coltype), (size_t )1, (size_t )1,
                    (FILE */* __restrict  */)f1);
    }
#line 593
    if (tmp___6 != 1UL) {
#line 593
      goto while_break;
    }
    {
#line 594
    tmp___7 = fread((void */* __restrict  */)(& compr), (size_t )1, (size_t )1, (FILE */* __restrict  */)f1);
    }
#line 594
    if (tmp___7 != 1UL) {
#line 594
      goto while_break;
    }
    {
#line 595
    tmp___8 = fread((void */* __restrict  */)(& filter), (size_t )1, (size_t )1, (FILE */* __restrict  */)f1);
    }
#line 595
    if (tmp___8 != 1UL) {
#line 595
      goto while_break;
    }
    {
#line 596
    tmp___9 = fread((void */* __restrict  */)(& interl), (size_t )1, (size_t )1, (FILE */* __restrict  */)f1);
    }
#line 596
    if (tmp___9 != 1UL) {
#line 596
      goto while_break;
    }
    {
#line 597
    tmp___10 = read32(& crc, f1);
    }
#line 597
    if (tmp___10) {
#line 597
      goto while_break;
    }
#line 599
    channels = 1U;
#line 600
    if ((int )coltype == 2) {
#line 601
      channels = 3U;
    } else
#line 603
    if ((int )coltype == 4) {
#line 604
      channels = 2U;
    } else
#line 606
    if ((int )coltype == 6) {
#line 607
      channels = 4U;
    }
#line 609
    pixeldepth = (unsigned char )((unsigned int )depth * channels);
#line 610
    bpp = (unsigned char )(((int )pixeldepth + 7) >> 3);
#line 611
    if ((int )pixeldepth >= 8) {
#line 611
      rowbytes = w * ((unsigned int )pixeldepth >> 3);
    } else {
#line 611
      rowbytes = (w * (unsigned int )pixeldepth + 7U) >> 3;
    }
    {
#line 613
    imagesize = (int )((rowbytes + 1U) * h);
#line 614
    zbuf_size = ((imagesize + ((imagesize + 7) >> 3)) + ((imagesize + 63) >> 6)) + 11;
#line 624
    outrow1 = w * channels;
#line 625
    outrow2 = w * 4U;
#line 626
    outimg1 = h * outrow1;
#line 627
    outimg2 = h * outrow2;
#line 629
    tmp___11 = malloc((size_t )((frames + 1U) * outimg1));
#line 629
    pOut1 = (unsigned char *)tmp___11;
#line 630
    tmp___12 = malloc((size_t )((frames + 1U) * outimg2));
#line 630
    pOut2 = (unsigned char *)tmp___12;
#line 631
    tmp___13 = malloc((size_t )((frames + 1U) * 4U));
#line 631
    pDelays = (unsigned short *)tmp___13;
#line 632
    tmp___14 = malloc((size_t )imagesize);
#line 632
    pTemp = (unsigned char *)tmp___14;
#line 633
    tmp___15 = malloc((size_t )zbuf_size);
#line 633
    pData = (unsigned char *)tmp___15;
    }
#line 634
    if (! pOut1) {
      {
#line 636
      printf((char const   */* __restrict  */)"Error: not enough memory\n");
      }
#line 637
      goto while_break;
    } else
#line 634
    if (! pOut2) {
      {
#line 636
      printf((char const   */* __restrict  */)"Error: not enough memory\n");
      }
#line 637
      goto while_break;
    } else
#line 634
    if (! pDelays) {
      {
#line 636
      printf((char const   */* __restrict  */)"Error: not enough memory\n");
      }
#line 637
      goto while_break;
    } else
#line 634
    if (! pTemp) {
      {
#line 636
      printf((char const   */* __restrict  */)"Error: not enough memory\n");
      }
#line 637
      goto while_break;
    } else
#line 634
    if (! pData) {
      {
#line 636
      printf((char const   */* __restrict  */)"Error: not enough memory\n");
      }
#line 637
      goto while_break;
    }
    {
#line 640
    pImg1 = pOut1;
#line 641
    pImg2 = pOut2;
#line 642
    memset((void *)pOut1, 0, (size_t )outimg1);
#line 643
    memset((void *)pOut2, 0, (size_t )outimg2);
#line 644
    *(pDelays + 0) = (unsigned short)0;
#line 645
    *(pDelays + 1) = (unsigned short)0;
    }
    {
#line 647
    while (1) {
      while_continue___0: /* CIL Label */ ;
      {
#line 647
      tmp___44 = feof(f1);
      }
#line 647
      if (tmp___44) {
#line 647
        goto while_break___0;
      }
      {
#line 649
      tmp___16 = read32(& len, f1);
      }
#line 649
      if (tmp___16) {
#line 649
        goto while_break___0;
      }
      {
#line 650
      tmp___17 = read32(& chunk, f1);
      }
#line 650
      if (tmp___17) {
#line 650
        goto while_break___0;
      }
#line 652
      if (chunk == 1347179589U) {
#line 655
        i = 0U;
        {
#line 655
        while (1) {
          while_continue___1: /* CIL Label */ ;
#line 655
          if (! (i < len)) {
#line 655
            goto while_break___1;
          }
          {
#line 657
          tmp___18 = fread((void */* __restrict  */)(& c), (size_t )1, (size_t )1,
                           (FILE */* __restrict  */)f1);
          }
#line 657
          if (tmp___18 != 1UL) {
#line 657
            goto while_break___1;
          }
#line 658
          col = i / 3U;
#line 659
          if (col < 256U) {
#line 661
            pal[col][i % 3U] = c;
#line 662
            palsize = col + 1U;
          }
#line 655
          i ++;
        }
        while_break___1: /* CIL Label */ ;
        }
        {
#line 665
        tmp___19 = read32(& crc, f1);
        }
#line 665
        if (tmp___19) {
#line 665
          goto while_break___0;
        }
      } else
#line 668
      if (chunk == 1951551059U) {
#line 670
        i = 0U;
        {
#line 670
        while (1) {
          while_continue___2: /* CIL Label */ ;
#line 670
          if (! (i < len)) {
#line 670
            goto while_break___2;
          }
          {
#line 672
          tmp___20 = fread((void */* __restrict  */)(& c), (size_t )1, (size_t )1,
                           (FILE */* __restrict  */)f1);
          }
#line 672
          if (tmp___20 != 1UL) {
#line 672
            goto while_break___2;
          }
#line 673
          if (i < 256U) {
#line 675
            trns[i] = c;
#line 676
            trnssize = i + 1U;
#line 677
            if ((int )c == 0) {
#line 677
              if ((int )coltype == 3) {
#line 677
                if (trns_idx == -1) {
#line 678
                  trns_idx = (int )i;
                }
              }
            }
          }
#line 670
          i ++;
        }
        while_break___2: /* CIL Label */ ;
        }
#line 681
        if ((int )coltype == 0) {
#line 683
          if (trnssize == 2U) {
            {
#line 685
            trns1 = readshort(& trns[0]);
            }
            {
#line 688
            if ((int )depth == 16) {
#line 688
              goto case_16;
            }
#line 689
            if ((int )depth == 4) {
#line 689
              goto case_4;
            }
#line 690
            if ((int )depth == 2) {
#line 690
              goto case_2;
            }
#line 691
            if ((int )depth == 1) {
#line 691
              goto case_1;
            }
#line 686
            goto switch_break;
            case_16: /* CIL Label */ 
#line 688
            trns[1] = trns[0];
#line 688
            trns[0] = (unsigned char)0;
#line 688
            goto switch_break;
            case_4: /* CIL Label */ 
#line 689
            trns[1] = (unsigned char )((int )trns[1] * 17);
#line 689
            goto switch_break;
            case_2: /* CIL Label */ 
#line 690
            trns[1] = (unsigned char )((int )trns[1] * 85);
#line 690
            goto switch_break;
            case_1: /* CIL Label */ 
#line 691
            trns[1] = (unsigned char )((int )trns[1] * 255);
#line 691
            goto switch_break;
            switch_break: /* CIL Label */ ;
            }
#line 693
            trns_idx = (int )trns[1];
          } else {
#line 696
            trnssize = 0U;
          }
        } else
#line 699
        if ((int )coltype == 2) {
#line 701
          if (trnssize == 6U) {
            {
#line 703
            trns1 = readshort(& trns[0]);
#line 704
            trns2 = readshort(& trns[2]);
#line 705
            trns3 = readshort(& trns[4]);
            }
#line 706
            if ((int )depth == 16) {
#line 708
              trns[1] = trns[0];
#line 708
              trns[0] = (unsigned char)0;
#line 709
              trns[3] = trns[2];
#line 709
              trns[2] = (unsigned char)0;
#line 710
              trns[5] = trns[4];
#line 710
              trns[4] = (unsigned char)0;
            }
          } else {
#line 714
            trnssize = 0U;
          }
        }
        {
#line 716
        tmp___21 = read32(& crc, f1);
        }
#line 716
        if (tmp___21) {
#line 716
          goto while_break___0;
        }
      } else
#line 719
      if (chunk == 1633899596U) {
        {
#line 721
        tmp___22 = read32(& frames, f1);
        }
#line 721
        if (tmp___22) {
#line 721
          goto while_break___0;
        }
        {
#line 722
        tmp___23 = read32(& loops, f1);
        }
#line 722
        if (tmp___23) {
#line 722
          goto while_break___0;
        }
        {
#line 723
        tmp___24 = read32(& crc, f1);
        }
#line 723
        if (tmp___24) {
#line 723
          goto while_break___0;
        }
        {
#line 724
        free((void *)pOut1);
#line 725
        free((void *)pOut2);
#line 726
        free((void *)pDelays);
#line 727
        tmp___25 = malloc((size_t )((frames + 1U) * outimg1));
#line 727
        pOut1 = (unsigned char *)tmp___25;
#line 728
        tmp___26 = malloc((size_t )((frames + 1U) * outimg2));
#line 728
        pOut2 = (unsigned char *)tmp___26;
#line 729
        tmp___27 = malloc((size_t )((frames + 1U) * 4U));
#line 729
        pDelays = (unsigned short *)tmp___27;
#line 730
        pImg1 = pOut1;
#line 731
        pImg2 = pOut2;
#line 732
        memset((void *)pOut1, 0, (size_t )outimg1);
#line 733
        memset((void *)pOut2, 0, (size_t )outimg2);
        }
      } else
#line 736
      if (chunk == 1717785676U) {
#line 738
        if (zsize == 0) {
#line 739
          first_visible = 1U;
        } else {
#line 742
          if ((int )dop == 2) {
#line 744
            if ((int )coltype != 6) {
              {
#line 745
              memcpy((void */* __restrict  */)(pImg1 + outimg1), (void const   */* __restrict  */)pImg1,
                     (size_t )outimg1);
              }
            }
#line 746
            if ((int )coltype != 4) {
              {
#line 747
              memcpy((void */* __restrict  */)(pImg2 + outimg2), (void const   */* __restrict  */)pImg2,
                     (size_t )outimg2);
              }
            }
          }
          {
#line 750
          pDst1 = (pImg1 + y0 * outrow1) + x0 * channels;
#line 751
          pDst2 = (pImg2 + y0 * outrow2) + x0 * 4U;
#line 752
          unpack(zstream, pTemp, (unsigned int )imagesize, pData, (unsigned int )zsize,
                 h0, rowbytes, bpp);
          }
          {
#line 755
          if ((int )coltype == 0) {
#line 755
            goto case_0;
          }
#line 756
          if ((int )coltype == 2) {
#line 756
            goto case_2___0;
          }
#line 757
          if ((int )coltype == 3) {
#line 757
            goto case_3;
          }
#line 758
          if ((int )coltype == 4) {
#line 758
            goto case_4___0;
          }
#line 759
          if ((int )coltype == 6) {
#line 759
            goto case_6;
          }
#line 753
          goto switch_break___0;
          case_0: /* CIL Label */ 
          {
#line 755
          compose0(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                   depth);
          }
#line 755
          goto switch_break___0;
          case_2___0: /* CIL Label */ 
          {
#line 756
          compose2(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                   depth);
          }
#line 756
          goto switch_break___0;
          case_3: /* CIL Label */ 
          {
#line 757
          compose3(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                   depth);
          }
#line 757
          goto switch_break___0;
          case_4___0: /* CIL Label */ 
          {
#line 758
          compose4(pDst1, outrow1, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                   depth);
          }
#line 758
          goto switch_break___0;
          case_6: /* CIL Label */ 
          {
#line 759
          compose6(pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                   depth);
          }
#line 759
          goto switch_break___0;
          switch_break___0: /* CIL Label */ ;
          }
#line 761
          zsize = 0;
#line 763
          if ((int )dop != 2) {
#line 765
            if ((int )coltype != 6) {
              {
#line 766
              memcpy((void */* __restrict  */)(pImg1 + outimg1), (void const   */* __restrict  */)pImg1,
                     (size_t )outimg1);
              }
            }
#line 767
            if ((int )coltype != 4) {
              {
#line 768
              memcpy((void */* __restrict  */)(pImg2 + outimg2), (void const   */* __restrict  */)pImg2,
                     (size_t )outimg2);
              }
            }
#line 770
            if ((int )dop == 1) {
#line 772
              pDst1 += outimg1;
#line 773
              pDst2 += outimg2;
#line 775
              j = 0U;
              {
#line 775
              while (1) {
                while_continue___3: /* CIL Label */ ;
#line 775
                if (! (j < h0)) {
#line 775
                  goto while_break___3;
                }
                {
#line 779
                if ((int )coltype == 0) {
#line 779
                  goto case_0___0;
                }
#line 780
                if ((int )coltype == 2) {
#line 780
                  goto case_2___1;
                }
#line 781
                if ((int )coltype == 3) {
#line 781
                  goto case_3___0;
                }
#line 782
                if ((int )coltype == 4) {
#line 782
                  goto case_4___1;
                }
#line 783
                if ((int )coltype == 6) {
#line 783
                  goto case_6___0;
                }
#line 777
                goto switch_break___1;
                case_0___0: /* CIL Label */ 
                {
#line 779
                memset((void *)pDst2, 0, (size_t )(w0 * 4U));
                }
#line 779
                if (trnssize) {
                  {
#line 779
                  memset((void *)pDst1, trns_idx, (size_t )w0);
                  }
                } else {
#line 779
                  keep_original = 0U;
                }
#line 779
                goto switch_break___1;
                case_2___1: /* CIL Label */ 
                {
#line 780
                memset((void *)pDst2, 0, (size_t )(w0 * 4U));
                }
#line 780
                if (trnssize) {
#line 780
                  i = 0U;
                  {
#line 780
                  while (1) {
                    while_continue___4: /* CIL Label */ ;
#line 780
                    if (! (i < w0)) {
#line 780
                      goto while_break___4;
                    }
#line 780
                    *(pDst1 + i * 3U) = trns[1];
#line 780
                    *(pDst1 + (i * 3U + 1U)) = trns[3];
#line 780
                    *(pDst1 + (i * 3U + 2U)) = trns[5];
#line 780
                    i ++;
                  }
                  while_break___4: /* CIL Label */ ;
                  }
                } else {
#line 780
                  keep_original = 0U;
                }
#line 780
                goto switch_break___1;
                case_3___0: /* CIL Label */ 
                {
#line 781
                memset((void *)pDst2, 0, (size_t )(w0 * 4U));
                }
#line 781
                if (trns_idx >= 0) {
                  {
#line 781
                  memset((void *)pDst1, trns_idx, (size_t )w0);
                  }
                } else {
#line 781
                  keep_original = 0U;
                }
#line 781
                goto switch_break___1;
                case_4___1: /* CIL Label */ 
                {
#line 782
                memset((void *)pDst1, 0, (size_t )(w0 * 2U));
                }
#line 782
                goto switch_break___1;
                case_6___0: /* CIL Label */ 
                {
#line 783
                memset((void *)pDst2, 0, (size_t )(w0 * 4U));
                }
#line 783
                goto switch_break___1;
                switch_break___1: /* CIL Label */ ;
                }
#line 785
                pDst1 += outrow1;
#line 786
                pDst2 += outrow2;
#line 775
                j ++;
              }
              while_break___3: /* CIL Label */ ;
              }
            }
          }
        }
        {
#line 792
        pImg1 += outimg1;
#line 793
        pImg2 += outimg2;
#line 795
        tmp___28 = read32(& seq, f1);
        }
#line 795
        if (tmp___28) {
#line 795
          goto while_break___0;
        }
        {
#line 796
        tmp___29 = read32(& w0, f1);
        }
#line 796
        if (tmp___29) {
#line 796
          goto while_break___0;
        }
        {
#line 797
        tmp___30 = read32(& h0, f1);
        }
#line 797
        if (tmp___30) {
#line 797
          goto while_break___0;
        }
        {
#line 798
        tmp___31 = read32(& x0, f1);
        }
#line 798
        if (tmp___31) {
#line 798
          goto while_break___0;
        }
        {
#line 799
        tmp___32 = read32(& y0, f1);
        }
#line 799
        if (tmp___32) {
#line 799
          goto while_break___0;
        }
        {
#line 800
        tmp___33 = read16(& d1, f1);
        }
#line 800
        if (tmp___33) {
#line 800
          goto while_break___0;
        }
        {
#line 801
        tmp___34 = read16(& d2, f1);
        }
#line 801
        if (tmp___34) {
#line 801
          goto while_break___0;
        }
        {
#line 802
        tmp___35 = fread((void */* __restrict  */)(& dop), (size_t )1, (size_t )1,
                         (FILE */* __restrict  */)f1);
        }
#line 802
        if (tmp___35 != 1UL) {
#line 802
          goto while_break___0;
        }
        {
#line 803
        tmp___36 = fread((void */* __restrict  */)(& bop), (size_t )1, (size_t )1,
                         (FILE */* __restrict  */)f1);
        }
#line 803
        if (tmp___36 != 1UL) {
#line 803
          goto while_break___0;
        }
        {
#line 804
        tmp___37 = read32(& crc, f1);
        }
#line 804
        if (tmp___37) {
#line 804
          goto while_break___0;
        }
#line 806
        if (cur_frame == 0U) {
#line 808
          bop = (unsigned char)0;
#line 809
          if ((int )dop == 2) {
#line 810
            dop = (unsigned char)1;
          }
        }
#line 813
        if ((int )coltype <= 3) {
#line 813
          if (trnssize == 0U) {
#line 814
            bop = (unsigned char)0;
          }
        }
#line 816
        if ((int )pixeldepth >= 8) {
#line 816
          rowbytes = w0 * ((unsigned int )pixeldepth >> 3);
        } else {
#line 816
          rowbytes = (w0 * (unsigned int )pixeldepth + 7U) >> 3;
        }
#line 818
        cur_frame ++;
#line 819
        *(pDelays + cur_frame * 2U) = d1;
#line 820
        *(pDelays + (cur_frame * 2U + 1U)) = d2;
      } else
#line 823
      if (chunk == 1229209940U) {
        {
#line 825
        tmp___38 = fread((void */* __restrict  */)(pData + zsize), (size_t )1, (size_t )len,
                         (FILE */* __restrict  */)f1);
        }
#line 825
        if (tmp___38 != (size_t )len) {
#line 825
          goto while_break___0;
        }
        {
#line 826
        zsize = (int )((unsigned int )zsize + len);
#line 827
        tmp___39 = read32(& crc, f1);
        }
#line 827
        if (tmp___39) {
#line 827
          goto while_break___0;
        }
      } else
#line 830
      if (chunk == 1717846356U) {
        {
#line 832
        tmp___40 = read32(& seq, f1);
        }
#line 832
        if (tmp___40) {
#line 832
          goto while_break___0;
        }
        {
#line 833
        len -= 4U;
#line 834
        tmp___41 = fread((void */* __restrict  */)(pData + zsize), (size_t )1, (size_t )len,
                         (FILE */* __restrict  */)f1);
        }
#line 834
        if (tmp___41 != (size_t )len) {
#line 834
          goto while_break___0;
        }
        {
#line 835
        zsize = (int )((unsigned int )zsize + len);
#line 836
        tmp___42 = read32(& crc, f1);
        }
#line 836
        if (tmp___42) {
#line 836
          goto while_break___0;
        }
      } else
#line 839
      if (chunk == 1229278788U) {
        {
#line 841
        pDst1 = (pImg1 + y0 * outrow1) + x0 * channels;
#line 842
        pDst2 = (pImg2 + y0 * outrow2) + x0 * 4U;
#line 843
        unpack(zstream, pTemp, (unsigned int )imagesize, pData, (unsigned int )zsize,
               h0, rowbytes, bpp);
        }
        {
#line 846
        if ((int )coltype == 0) {
#line 846
          goto case_0___1;
        }
#line 847
        if ((int )coltype == 2) {
#line 847
          goto case_2___2;
        }
#line 848
        if ((int )coltype == 3) {
#line 848
          goto case_3___1;
        }
#line 849
        if ((int )coltype == 4) {
#line 849
          goto case_4___2;
        }
#line 850
        if ((int )coltype == 6) {
#line 850
          goto case_6___1;
        }
#line 844
        goto switch_break___2;
        case_0___1: /* CIL Label */ 
        {
#line 846
        compose0(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                 depth);
        }
#line 846
        goto switch_break___2;
        case_2___2: /* CIL Label */ 
        {
#line 847
        compose2(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                 depth);
        }
#line 847
        goto switch_break___2;
        case_3___1: /* CIL Label */ 
        {
#line 848
        compose3(pDst1, outrow1, pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                 depth);
        }
#line 848
        goto switch_break___2;
        case_4___2: /* CIL Label */ 
        {
#line 849
        compose4(pDst1, outrow1, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                 depth);
        }
#line 849
        goto switch_break___2;
        case_6___1: /* CIL Label */ 
        {
#line 850
        compose6(pDst2, outrow2, pTemp, rowbytes + 1U, w0, h0, (unsigned int )bop,
                 depth);
        }
#line 850
        goto switch_break___2;
        switch_break___2: /* CIL Label */ ;
        }
#line 853
        if (cur_frame == frames) {
#line 854
          res = 0;
        }
#line 856
        goto while_break___0;
      } else {
#line 860
        c = (unsigned char )(chunk >> 24);
#line 861
        if ((int )c < 65) {
#line 861
          goto while_break___0;
        } else
#line 861
        if ((int )c > 122) {
#line 861
          goto while_break___0;
        } else
#line 861
        if ((int )c > 90) {
#line 861
          if ((int )c < 97) {
#line 861
            goto while_break___0;
          }
        }
#line 862
        c = (unsigned char )((chunk >> 16) & 255U);
#line 863
        if ((int )c < 65) {
#line 863
          goto while_break___0;
        } else
#line 863
        if ((int )c > 122) {
#line 863
          goto while_break___0;
        } else
#line 863
        if ((int )c > 90) {
#line 863
          if ((int )c < 97) {
#line 863
            goto while_break___0;
          }
        }
#line 864
        c = (unsigned char )((chunk >> 8) & 255U);
#line 865
        if ((int )c < 65) {
#line 865
          goto while_break___0;
        } else
#line 865
        if ((int )c > 122) {
#line 865
          goto while_break___0;
        } else
#line 865
        if ((int )c > 90) {
#line 865
          if ((int )c < 97) {
#line 865
            goto while_break___0;
          }
        }
#line 866
        c = (unsigned char )(chunk & 255U);
#line 867
        if ((int )c < 65) {
#line 867
          goto while_break___0;
        } else
#line 867
        if ((int )c > 122) {
#line 867
          goto while_break___0;
        } else
#line 867
        if ((int )c > 90) {
#line 867
          if ((int )c < 97) {
#line 867
            goto while_break___0;
          }
        }
        {
#line 869
        fseek(f1, (long )len, 1);
#line 870
        tmp___43 = read32(& crc, f1);
        }
#line 870
        if (tmp___43) {
#line 870
          goto while_break___0;
        }
      }
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 874
    *pWidth = w;
#line 875
    *pHeight = h;
#line 876
    *pChannels = channels;
#line 877
    *pColType = coltype;
#line 878
    *pFirst = first_visible;
#line 879
    *pLast = cur_frame;
#line 880
    *ppOut1 = pOut1;
#line 881
    *ppOut2 = pOut2;
#line 882
    *ppDelays = pDelays;
#line 884
    free((void *)pData);
#line 885
    free((void *)pTemp);
    }
#line 566
    goto while_break;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 889
  inflateEnd(& zstream);
#line 890
  fclose(f1);
  }
#line 891
  return (res);
}
}
#line 894 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void write_chunk(FILE *f , char const   *name , unsigned char *data , unsigned int length ) 
{ 
  unsigned int crc ;
  uLong tmp ;
  unsigned int len ;
  unsigned int tmp___0 ;
  uLong tmp___1 ;
  uLong tmp___2 ;

  {
  {
#line 896
  tmp = crc32((uLong )0, (Bytef const   *)0, (uInt )0);
#line 896
  crc = (unsigned int )tmp;
#line 897
  tmp___0 = __bswap_32(length);
#line 897
  len = tmp___0;
#line 899
  fwrite((void const   */* __restrict  */)(& len), (size_t )1, (size_t )4, (FILE */* __restrict  */)f);
#line 900
  fwrite((void const   */* __restrict  */)name, (size_t )1, (size_t )4, (FILE */* __restrict  */)f);
#line 901
  tmp___1 = crc32((uLong )crc, (Bytef const   *)name, (uInt )4);
#line 901
  crc = (unsigned int )tmp___1;
  }
#line 903
  if ((unsigned long )data != (unsigned long )((void *)0)) {
#line 903
    if (length > 0U) {
      {
#line 905
      fwrite((void const   */* __restrict  */)data, (size_t )1, (size_t )length, (FILE */* __restrict  */)f);
#line 906
      tmp___2 = crc32((uLong )crc, (Bytef const   *)data, length);
#line 906
      crc = (unsigned int )tmp___2;
      }
    }
  }
  {
#line 909
  crc = __bswap_32(crc);
#line 910
  fwrite((void const   */* __restrict  */)(& crc), (size_t )1, (size_t )4, (FILE */* __restrict  */)f);
  }
#line 911
  return;
}
}
#line 913 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void write_IDATs(FILE *f , unsigned char *data , unsigned int length , unsigned int idat_size ) 
{ 
  unsigned int z_cmf ;
  unsigned int z_cinfo ;
  unsigned int half_z_window_size ;
  unsigned int ds ;

  {
#line 915
  z_cmf = (unsigned int )*(data + 0);
#line 916
  if ((z_cmf & 15U) == 8U) {
#line 916
    if ((z_cmf & 240U) <= 112U) {
#line 918
      if (length >= 2U) {
#line 920
        z_cinfo = z_cmf >> 4;
#line 921
        half_z_window_size = (unsigned int )(1 << (z_cinfo + 7U));
        {
#line 922
        while (1) {
          while_continue: /* CIL Label */ ;
#line 922
          if (idat_size <= half_z_window_size) {
#line 922
            if (! (half_z_window_size >= 256U)) {
#line 922
              goto while_break;
            }
          } else {
#line 922
            goto while_break;
          }
#line 924
          z_cinfo --;
#line 925
          half_z_window_size >>= 1;
        }
        while_break: /* CIL Label */ ;
        }
#line 927
        z_cmf = (z_cmf & 15U) | (z_cinfo << 4);
#line 928
        if ((int )*(data + 0) != (int )((unsigned char )z_cmf)) {
#line 930
          *(data + 0) = (unsigned char )z_cmf;
#line 931
          *(data + 1) = (unsigned char )((int )*(data + 1) & 224);
#line 932
          *(data + 1) = (unsigned char )((int )*(data + 1) + (int )((unsigned char )(31U - ((z_cmf << 8) + (unsigned int )*(data + 1)) % 31U)));
        }
      }
    }
  }
  {
#line 937
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 937
    if (! (length > 0U)) {
#line 937
      goto while_break___0;
    }
#line 939
    ds = length;
#line 940
    if (ds > 32768U) {
#line 941
      ds = 32768U;
    }
    {
#line 943
    write_chunk(f, "IDAT", data, ds);
#line 945
    data += ds;
#line 946
    length -= ds;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 948
  return;
}
}
#line 950 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
void SavePNG(char *szPath , unsigned char *pdata , unsigned short *delays , unsigned int w ,
             unsigned int h , unsigned int first , unsigned int last , unsigned int bpp ,
             unsigned char coltype ) 
{ 
  struct IHDR ihdr ;
  unsigned int tmp ;
  unsigned int tmp___0 ;
  char szOut[256] ;
  z_stream zstream1 ;
  z_stream zstream2 ;
  FILE *f ;
  unsigned int i ;
  unsigned int j ;
  unsigned int n ;
  unsigned int len ;
  unsigned int rowbytes ;
  unsigned int idat_size ;
  unsigned int zbuf_size ;
  unsigned char *row_buf ;
  void *tmp___1 ;
  unsigned char *sub_row ;
  void *tmp___2 ;
  unsigned char *up_row ;
  void *tmp___3 ;
  unsigned char *avg_row ;
  void *tmp___4 ;
  unsigned char *paeth_row ;
  void *tmp___5 ;
  unsigned char *zbuf1 ;
  void *tmp___6 ;
  unsigned char *zbuf2 ;
  void *tmp___7 ;
  int tmp___8 ;
  int a ;
  int b ;
  int c ;
  int pa ;
  int pb ;
  int pc ;
  int p ;
  int v ;
  unsigned char *prev ;
  unsigned char *row ;
  unsigned char *out ;
  unsigned int sum ;
  unsigned char *best_row ;
  unsigned int mins ;
  unsigned char tmp___9 ;
  int tmp___10 ;
  unsigned char tmp___11 ;
  int tmp___12 ;
  unsigned char tmp___13 ;
  int tmp___14 ;
  unsigned char tmp___15 ;
  int tmp___16 ;
  unsigned char tmp___17 ;
  int tmp___18 ;
  unsigned char tmp___19 ;
  int tmp___20 ;
  unsigned char tmp___21 ;
  int tmp___22 ;
  int tmp___23 ;
  unsigned char tmp___24 ;
  int tmp___25 ;

  {
  {
#line 952
  tmp = __bswap_32(w);
#line 952
  tmp___0 = __bswap_32(h);
#line 952
  ihdr.mWidth = tmp;
#line 952
  ihdr.mHeight = tmp___0;
#line 952
  ihdr.mDepth = (unsigned char)8;
#line 952
  ihdr.mColorType = coltype;
#line 952
  ihdr.mCompression = (unsigned char)0;
#line 952
  ihdr.mFilterMethod = (unsigned char)0;
#line 952
  ihdr.mInterlaceMethod = (unsigned char)0;
#line 970
  rowbytes = w * bpp;
#line 971
  idat_size = (rowbytes + 1U) * h;
#line 972
  zbuf_size = ((idat_size + ((idat_size + 7U) >> 3)) + ((idat_size + 63U) >> 6)) + 11U;
#line 974
  tmp___1 = malloc((size_t )(rowbytes + 1U));
#line 974
  row_buf = (unsigned char *)tmp___1;
#line 975
  tmp___2 = malloc((size_t )(rowbytes + 1U));
#line 975
  sub_row = (unsigned char *)tmp___2;
#line 976
  tmp___3 = malloc((size_t )(rowbytes + 1U));
#line 976
  up_row = (unsigned char *)tmp___3;
#line 977
  tmp___4 = malloc((size_t )(rowbytes + 1U));
#line 977
  avg_row = (unsigned char *)tmp___4;
#line 978
  tmp___5 = malloc((size_t )(rowbytes + 1U));
#line 978
  paeth_row = (unsigned char *)tmp___5;
#line 979
  tmp___6 = malloc((size_t )zbuf_size);
#line 979
  zbuf1 = (unsigned char *)tmp___6;
#line 980
  tmp___7 = malloc((size_t )zbuf_size);
#line 980
  zbuf2 = (unsigned char *)tmp___7;
  }
#line 982
  if (! row_buf) {
#line 983
    return;
  } else
#line 982
  if (! sub_row) {
#line 983
    return;
  } else
#line 982
  if (! up_row) {
#line 983
    return;
  } else
#line 982
  if (! avg_row) {
#line 983
    return;
  } else
#line 982
  if (! paeth_row) {
#line 983
    return;
  } else
#line 982
  if (! zbuf1) {
#line 983
    return;
  } else
#line 982
  if (! zbuf2) {
#line 983
    return;
  }
  {
#line 985
  *(row_buf + 0) = (unsigned char)0;
#line 986
  *(sub_row + 0) = (unsigned char)1;
#line 987
  *(up_row + 0) = (unsigned char)2;
#line 988
  *(avg_row + 0) = (unsigned char)3;
#line 989
  *(paeth_row + 0) = (unsigned char)4;
#line 991
  zstream1.data_type = 0;
#line 992
  zstream1.zalloc = (voidpf (*)(voidpf opaque , uInt items , uInt size ))0;
#line 993
  zstream1.zfree = (void (*)(voidpf opaque , voidpf address ))0;
#line 994
  zstream1.opaque = (voidpf )0;
#line 995
  deflateInit2_(& zstream1, 9, 8, 15, 8, 0, "1.2.8", (int )sizeof(z_stream ));
#line 997
  zstream2.data_type = 0;
#line 998
  zstream2.zalloc = (voidpf (*)(voidpf opaque , uInt items , uInt size ))0;
#line 999
  zstream2.zfree = (void (*)(voidpf opaque , voidpf address ))0;
#line 1000
  zstream2.opaque = (voidpf )0;
#line 1001
  deflateInit2_(& zstream2, 9, 8, 15, 8, 1, "1.2.8", (int )sizeof(z_stream ));
#line 1003
  tmp___8 = sprintf((char */* __restrict  */)(szOut), (char const   */* __restrict  */)"%d",
                    last);
#line 1003
  len = (unsigned int )tmp___8;
#line 1005
  n = first;
  }
  {
#line 1005
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1005
    if (! (n <= last)) {
#line 1005
      goto while_break;
    }
    {
#line 1007
    printf((char const   */* __restrict  */)"extracting frame %d of %d\n", n, last);
    }
#line 1009
    if (n > 0U) {
      {
#line 1011
      sprintf((char */* __restrict  */)(szOut), (char const   */* __restrict  */)"%s%.*d.txt",
              szPath, len, n);
#line 1012
      f = fopen((char const   */* __restrict  */)(szOut), (char const   */* __restrict  */)"wt");
      }
#line 1012
      if ((unsigned long )f != (unsigned long )((FILE *)0)) {
        {
#line 1014
        fprintf((FILE */* __restrict  */)f, (char const   */* __restrict  */)"delay=%d/%d\n",
                (int )*(delays + n * 2U), (int )*(delays + (n * 2U + 1U)));
#line 1015
        fclose(f);
        }
      }
    }
    {
#line 1019
    sprintf((char */* __restrict  */)(szOut), (char const   */* __restrict  */)"%s%.*d.png",
            szPath, len, n);
#line 1020
    f = fopen((char const   */* __restrict  */)(szOut), (char const   */* __restrict  */)"wb");
    }
#line 1020
    if ((unsigned long )f != (unsigned long )((FILE *)0)) {
      {
#line 1026
      fwrite((void const   */* __restrict  */)(png_sign), (size_t )1, (size_t )8,
             (FILE */* __restrict  */)f);
#line 1027
      write_chunk(f, "IHDR", (unsigned char *)(& ihdr), 13U);
      }
#line 1029
      if (palsize > 0U) {
        {
#line 1030
        write_chunk(f, "PLTE", (unsigned char *)(& pal), palsize * 3U);
        }
      }
#line 1032
      if (trnssize > 0U) {
        {
#line 1033
        write_chunk(f, "tRNS", trns, trnssize);
        }
      }
#line 1035
      zstream1.next_out = zbuf1;
#line 1036
      zstream1.avail_out = zbuf_size;
#line 1037
      zstream2.next_out = zbuf2;
#line 1038
      zstream2.avail_out = zbuf_size;
#line 1040
      prev = (unsigned char *)((void *)0);
#line 1041
      row = pdata + (n * h) * rowbytes;
#line 1043
      j = 0U;
      {
#line 1043
      while (1) {
        while_continue___0: /* CIL Label */ ;
#line 1043
        if (! (j < h)) {
#line 1043
          goto while_break___0;
        }
#line 1046
        sum = 0U;
#line 1047
        best_row = row_buf;
#line 1048
        mins = 4294967295U >> 1;
#line 1050
        out = row_buf + 1;
#line 1051
        i = 0U;
        {
#line 1051
        while (1) {
          while_continue___1: /* CIL Label */ ;
#line 1051
          if (! (i < rowbytes)) {
#line 1051
            goto while_break___1;
          }
#line 1053
          tmp___9 = *(row + i);
#line 1053
          *(out + i) = tmp___9;
#line 1053
          v = (int )tmp___9;
#line 1054
          if (v < 128) {
#line 1054
            tmp___10 = v;
          } else {
#line 1054
            tmp___10 = 256 - v;
          }
#line 1054
          sum += (unsigned int )tmp___10;
#line 1051
          i ++;
        }
        while_break___1: /* CIL Label */ ;
        }
#line 1056
        mins = sum;
#line 1058
        sum = 0U;
#line 1059
        out = sub_row + 1;
#line 1060
        i = 0U;
        {
#line 1060
        while (1) {
          while_continue___2: /* CIL Label */ ;
#line 1060
          if (! (i < bpp)) {
#line 1060
            goto while_break___2;
          }
#line 1062
          tmp___11 = *(row + i);
#line 1062
          *(out + i) = tmp___11;
#line 1062
          v = (int )tmp___11;
#line 1063
          if (v < 128) {
#line 1063
            tmp___12 = v;
          } else {
#line 1063
            tmp___12 = 256 - v;
          }
#line 1063
          sum += (unsigned int )tmp___12;
#line 1060
          i ++;
        }
        while_break___2: /* CIL Label */ ;
        }
#line 1065
        i = bpp;
        {
#line 1065
        while (1) {
          while_continue___3: /* CIL Label */ ;
#line 1065
          if (! (i < rowbytes)) {
#line 1065
            goto while_break___3;
          }
#line 1067
          tmp___13 = (unsigned char )((int )*(row + i) - (int )*(row + (i - bpp)));
#line 1067
          *(out + i) = tmp___13;
#line 1067
          v = (int )tmp___13;
#line 1068
          if (v < 128) {
#line 1068
            tmp___14 = v;
          } else {
#line 1068
            tmp___14 = 256 - v;
          }
#line 1068
          sum += (unsigned int )tmp___14;
#line 1069
          if (sum > mins) {
#line 1069
            goto while_break___3;
          }
#line 1065
          i ++;
        }
        while_break___3: /* CIL Label */ ;
        }
#line 1071
        if (sum < mins) {
#line 1073
          mins = sum;
#line 1074
          best_row = sub_row;
        }
#line 1077
        if (prev) {
#line 1079
          sum = 0U;
#line 1080
          out = up_row + 1;
#line 1081
          i = 0U;
          {
#line 1081
          while (1) {
            while_continue___4: /* CIL Label */ ;
#line 1081
            if (! (i < rowbytes)) {
#line 1081
              goto while_break___4;
            }
#line 1083
            tmp___15 = (unsigned char )((int )*(row + i) - (int )*(prev + i));
#line 1083
            *(out + i) = tmp___15;
#line 1083
            v = (int )tmp___15;
#line 1084
            if (v < 128) {
#line 1084
              tmp___16 = v;
            } else {
#line 1084
              tmp___16 = 256 - v;
            }
#line 1084
            sum += (unsigned int )tmp___16;
#line 1085
            if (sum > mins) {
#line 1085
              goto while_break___4;
            }
#line 1081
            i ++;
          }
          while_break___4: /* CIL Label */ ;
          }
#line 1087
          if (sum < mins) {
#line 1089
            mins = sum;
#line 1090
            best_row = up_row;
          }
#line 1093
          sum = 0U;
#line 1094
          out = avg_row + 1;
#line 1095
          i = 0U;
          {
#line 1095
          while (1) {
            while_continue___5: /* CIL Label */ ;
#line 1095
            if (! (i < bpp)) {
#line 1095
              goto while_break___5;
            }
#line 1097
            tmp___17 = (unsigned char )((int )*(row + i) - (int )*(prev + i) / 2);
#line 1097
            *(out + i) = tmp___17;
#line 1097
            v = (int )tmp___17;
#line 1098
            if (v < 128) {
#line 1098
              tmp___18 = v;
            } else {
#line 1098
              tmp___18 = 256 - v;
            }
#line 1098
            sum += (unsigned int )tmp___18;
#line 1095
            i ++;
          }
          while_break___5: /* CIL Label */ ;
          }
#line 1100
          i = bpp;
          {
#line 1100
          while (1) {
            while_continue___6: /* CIL Label */ ;
#line 1100
            if (! (i < rowbytes)) {
#line 1100
              goto while_break___6;
            }
#line 1102
            tmp___19 = (unsigned char )((int )*(row + i) - ((int )*(prev + i) + (int )*(row + (i - bpp))) / 2);
#line 1102
            *(out + i) = tmp___19;
#line 1102
            v = (int )tmp___19;
#line 1103
            if (v < 128) {
#line 1103
              tmp___20 = v;
            } else {
#line 1103
              tmp___20 = 256 - v;
            }
#line 1103
            sum += (unsigned int )tmp___20;
#line 1104
            if (sum > mins) {
#line 1104
              goto while_break___6;
            }
#line 1100
            i ++;
          }
          while_break___6: /* CIL Label */ ;
          }
#line 1106
          if (sum < mins) {
#line 1108
            mins = sum;
#line 1109
            best_row = avg_row;
          }
#line 1112
          sum = 0U;
#line 1113
          out = paeth_row + 1;
#line 1114
          i = 0U;
          {
#line 1114
          while (1) {
            while_continue___7: /* CIL Label */ ;
#line 1114
            if (! (i < bpp)) {
#line 1114
              goto while_break___7;
            }
#line 1116
            tmp___21 = (unsigned char )((int )*(row + i) - (int )*(prev + i));
#line 1116
            *(out + i) = tmp___21;
#line 1116
            v = (int )tmp___21;
#line 1117
            if (v < 128) {
#line 1117
              tmp___22 = v;
            } else {
#line 1117
              tmp___22 = 256 - v;
            }
#line 1117
            sum += (unsigned int )tmp___22;
#line 1114
            i ++;
          }
          while_break___7: /* CIL Label */ ;
          }
#line 1119
          i = bpp;
          {
#line 1119
          while (1) {
            while_continue___8: /* CIL Label */ ;
#line 1119
            if (! (i < rowbytes)) {
#line 1119
              goto while_break___8;
            }
            {
#line 1121
            a = (int )*(row + (i - bpp));
#line 1122
            b = (int )*(prev + i);
#line 1123
            c = (int )*(prev + (i - bpp));
#line 1124
            p = b - c;
#line 1125
            pc = a - c;
#line 1126
            pa = abs(p);
#line 1127
            pb = abs(pc);
#line 1128
            pc = abs(p + pc);
            }
#line 1129
            if (pa <= pb) {
#line 1129
              if (pa <= pc) {
#line 1129
                p = a;
              } else {
#line 1129
                goto _L;
              }
            } else {
              _L: /* CIL Label */ 
#line 1129
              if (pb <= pc) {
#line 1129
                tmp___23 = b;
              } else {
#line 1129
                tmp___23 = c;
              }
#line 1129
              p = tmp___23;
            }
#line 1130
            tmp___24 = (unsigned char )((int )*(row + i) - p);
#line 1130
            *(out + i) = tmp___24;
#line 1130
            v = (int )tmp___24;
#line 1131
            if (v < 128) {
#line 1131
              tmp___25 = v;
            } else {
#line 1131
              tmp___25 = 256 - v;
            }
#line 1131
            sum += (unsigned int )tmp___25;
#line 1132
            if (sum > mins) {
#line 1132
              goto while_break___8;
            }
#line 1119
            i ++;
          }
          while_break___8: /* CIL Label */ ;
          }
#line 1134
          if (sum < mins) {
#line 1136
            best_row = paeth_row;
          }
        }
        {
#line 1139
        zstream1.next_in = row_buf;
#line 1140
        zstream1.avail_in = rowbytes + 1U;
#line 1141
        deflate(& zstream1, 0);
#line 1143
        zstream2.next_in = best_row;
#line 1144
        zstream2.avail_in = rowbytes + 1U;
#line 1145
        deflate(& zstream2, 0);
#line 1147
        prev = row;
#line 1148
        row += rowbytes;
#line 1043
        j ++;
        }
      }
      while_break___0: /* CIL Label */ ;
      }
      {
#line 1150
      deflate(& zstream1, 4);
#line 1151
      deflate(& zstream2, 4);
      }
#line 1153
      if (zstream1.total_out <= zstream2.total_out) {
        {
#line 1154
        write_IDATs(f, zbuf1, (unsigned int )zstream1.total_out, idat_size);
        }
      } else {
        {
#line 1156
        write_IDATs(f, zbuf2, (unsigned int )zstream2.total_out, idat_size);
        }
      }
      {
#line 1158
      deflateReset(& zstream1);
#line 1159
      zstream1.data_type = 0;
#line 1160
      deflateReset(& zstream2);
#line 1161
      zstream2.data_type = 0;
#line 1163
      write_chunk(f, "IEND", (unsigned char *)0, 0U);
#line 1164
      fclose(f);
      }
    } else {
      {
#line 1167
      printf((char const   */* __restrict  */)"Error: can\'t open the file \'%s\'\n",
             szOut);
      }
    }
#line 1005
    n ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1170
  deflateEnd(& zstream1);
#line 1171
  deflateEnd(& zstream2);
#line 1172
  free((void *)zbuf1);
#line 1173
  free((void *)zbuf2);
#line 1174
  free((void *)row_buf);
#line 1175
  free((void *)sub_row);
#line 1176
  free((void *)up_row);
#line 1177
  free((void *)avg_row);
#line 1178
  free((void *)paeth_row);
  }
#line 1179
  return;
}
}
#line 1181 "/home/june/collector/temp/apngdis-2.5/apngdis.c"
int main(int argc , char **argv ) 
{ 
  char *szIn ;
  char *szImg ;
  char szOut[256] ;
  unsigned int w ;
  unsigned int h ;
  unsigned int first ;
  unsigned int last ;
  unsigned int channels ;
  unsigned int i ;
  unsigned int j ;
  unsigned char coltype ;
  unsigned char *pOut1 ;
  unsigned char *pOut2 ;
  unsigned short *pDelays ;
  int tmp ;

  {
  {
#line 1188
  pOut1 = (unsigned char *)((void *)0);
#line 1189
  pOut2 = (unsigned char *)((void *)0);
#line 1190
  pDelays = (unsigned short *)((void *)0);
#line 1192
  printf((char const   */* __restrict  */)"\nAPNG Disassembler 2.5\n\n");
  }
#line 1194
  if (argc > 1) {
#line 1195
    szIn = *(argv + 1);
  } else {
    {
#line 1198
    printf((char const   */* __restrict  */)"Usage: apngdis apng.png [name]\n");
    }
#line 1199
    return (1);
  }
  {
#line 1202
  tmp = LoadAPNG(szIn, & w, & h, & channels, & coltype, & first, & last, & pOut1,
                 & pOut2, & pDelays);
  }
#line 1202
  if (tmp != 0) {
    {
#line 1204
    printf((char const   */* __restrict  */)"Error: can\'t load \'%s\'\n", szIn);
    }
#line 1205
    return (1);
  }
  {
#line 1208
  strcpy((char */* __restrict  */)(szOut), (char const   */* __restrict  */)szIn);
#line 1209
  j = 0U;
#line 1209
  i = j;
  }
  {
#line 1209
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1209
    if (! ((int )szOut[i] != 0)) {
#line 1209
      goto while_break;
    }
#line 1211
    if ((int )szOut[i] == 92) {
#line 1212
      j = i + 1U;
    } else
#line 1211
    if ((int )szOut[i] == 47) {
#line 1212
      j = i + 1U;
    } else
#line 1211
    if ((int )szOut[i] == 58) {
#line 1212
      j = i + 1U;
    }
#line 1209
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1214
  szOut[j] = (char)0;
#line 1216
  if (argc > 2) {
#line 1218
    szImg = *(argv + 2);
#line 1220
    j = 0U;
#line 1220
    i = j;
    {
#line 1220
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 1220
      if (! ((int )*(szImg + i) != 0)) {
#line 1220
        goto while_break___0;
      }
#line 1222
      if ((int )*(szImg + i) == 92) {
#line 1223
        j = i + 1U;
      } else
#line 1222
      if ((int )*(szImg + i) == 47) {
#line 1223
        j = i + 1U;
      } else
#line 1222
      if ((int )*(szImg + i) == 58) {
#line 1223
        j = i + 1U;
      }
#line 1224
      if ((int )*(szImg + i) == 46) {
#line 1225
        *(szImg + i) = (char)0;
      }
#line 1220
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 1227
    strcat((char */* __restrict  */)(szOut), (char const   */* __restrict  */)(szImg + j));
    }
  } else {
    {
#line 1230
    strcat((char */* __restrict  */)(szOut), (char const   */* __restrict  */)"apngframe");
    }
  }
#line 1232
  if ((int )coltype == 6) {
    {
#line 1233
    SavePNG(szOut, pOut2, pDelays, w, h, first, last, 4U, (unsigned char)6);
    }
  } else
#line 1235
  if ((int )coltype == 4) {
    {
#line 1236
    SavePNG(szOut, pOut1, pDelays, w, h, first, last, channels, coltype);
    }
  } else
#line 1238
  if (keep_original) {
    {
#line 1239
    SavePNG(szOut, pOut1, pDelays, w, h, first, last, channels, coltype);
    }
  } else {
    {
#line 1241
    SavePNG(szOut, pOut2, pDelays, w, h, first, last, 4U, (unsigned char)6);
    }
  }
  {
#line 1243
  free((void *)pOut1);
#line 1244
  free((void *)pOut2);
#line 1245
  free((void *)pDelays);
#line 1247
  printf((char const   */* __restrict  */)"all done\n");
  }
#line 1249
  return (0);
}
}
