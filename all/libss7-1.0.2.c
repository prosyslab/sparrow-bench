/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 141 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __suseconds_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 30 "/usr/include/x86_64-linux-gnu/bits/time.h"
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 102 "/usr/include/stdio.h"
typedef __ssize_t ssize_t;
#line 122 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct ss7;
#line 123
struct isup_call;
#line 125 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_iam_8 {
   int e ;
   int cic ;
   int transcap ;
   int cot_check_required ;
   char called_party_num[50] ;
   unsigned char called_nai ;
   char calling_party_num[50] ;
   unsigned char calling_party_cat ;
   unsigned char calling_nai ;
   unsigned char presentation_ind ;
   unsigned char screening_ind ;
   char charge_number[50] ;
   unsigned char charge_nai ;
   unsigned char charge_num_plan ;
   unsigned char gen_add_num_plan ;
   unsigned char gen_add_nai ;
   char gen_add_number[50] ;
   unsigned char gen_add_pres_ind ;
   unsigned char gen_add_type ;
   char gen_dig_number[50] ;
   unsigned char gen_dig_type ;
   unsigned char gen_dig_scheme ;
   char jip_number[50] ;
   unsigned char lspi_type ;
   unsigned char lspi_scheme ;
   unsigned char lspi_context ;
   unsigned char lspi_spare ;
   char lspi_ident[50] ;
   char orig_called_num[50] ;
   unsigned char orig_called_nai ;
   unsigned char orig_called_pres_ind ;
   unsigned char orig_called_screening_ind ;
   char redirecting_num[50] ;
   unsigned char redirecting_num_nai ;
   unsigned char redirecting_num_presentation_ind ;
   unsigned char redirecting_num_screening_ind ;
   unsigned char generic_name_typeofname ;
   unsigned char generic_name_avail ;
   unsigned char generic_name_presentation ;
   char generic_name[50] ;
   int oli_ani2 ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 125 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_iam_8 ss7_event_iam;
#line 173 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_rel_9 {
   int e ;
   int cic ;
   int cause ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 173 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_rel_9 ss7_event_rel;
#line 181 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_ciconly_10 {
   int e ;
   int cic ;
   unsigned int opc ;
};
#line 181 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_ciconly_10 ss7_event_ciconly;
#line 187 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_con_11 {
   int e ;
   int cic ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 187 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_con_11 ss7_event_con;
#line 194 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_rsc_12 {
   int e ;
   int cic ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 194 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_rsc_12 ss7_event_rsc;
#line 201 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_anm_13 {
   int e ;
   int cic ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 201 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_anm_13 ss7_event_anm;
#line 208 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_acm_14 {
   int e ;
   int cic ;
   unsigned int call_ref_ident ;
   unsigned int call_ref_pc ;
   unsigned int opc ;
   struct isup_call *call ;
   unsigned char called_party_status_ind ;
};
#line 208 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_acm_14 ss7_event_acm;
#line 219 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_cicrange_15 {
   int e ;
   int startcic ;
   int endcic ;
   int type ;
   unsigned int opc ;
   unsigned char status[255] ;
};
#line 219 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_cicrange_15 ss7_event_cicrange;
#line 228 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_cot_16 {
   int e ;
   int cic ;
   int passed ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 228 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_cot_16 ss7_event_cot;
#line 236 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_generic_17 {
   int e ;
   unsigned int data ;
};
#line 236 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_generic_17 ss7_event_generic;
#line 241 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_cpg_18 {
   int e ;
   int cic ;
   unsigned int opc ;
   unsigned char event ;
};
#line 241 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_cpg_18 ss7_event_cpg;
#line 248 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_faa_19 {
   int e ;
   int cic ;
   unsigned int call_ref_ident ;
   unsigned int call_ref_pc ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 248 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_faa_19 ss7_event_faa;
#line 257 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
struct __anonstruct_ss7_event_far_20 {
   int e ;
   int cic ;
   unsigned int call_ref_ident ;
   unsigned int call_ref_pc ;
   unsigned int opc ;
   struct isup_call *call ;
};
#line 257 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef struct __anonstruct_ss7_event_far_20 ss7_event_far;
#line 267 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
union __anonunion_ss7_event_21 {
   int e ;
   ss7_event_generic gen ;
   ss7_event_iam iam ;
   ss7_event_cicrange grs ;
   ss7_event_cicrange cqm ;
   ss7_event_cicrange gra ;
   ss7_event_cicrange cgb ;
   ss7_event_cicrange cgu ;
   ss7_event_cicrange cgba ;
   ss7_event_cicrange cgua ;
   ss7_event_rel rel ;
   ss7_event_ciconly rlc ;
   ss7_event_anm anm ;
   ss7_event_acm acm ;
   ss7_event_faa faa ;
   ss7_event_far far ;
   ss7_event_con con ;
   ss7_event_cot cot ;
   ss7_event_ciconly ccr ;
   ss7_event_ciconly cvt ;
   ss7_event_ciconly blo ;
   ss7_event_ciconly ubl ;
   ss7_event_ciconly bla ;
   ss7_event_ciconly uba ;
   ss7_event_ciconly ucic ;
   ss7_event_rsc rsc ;
   ss7_event_cpg cpg ;
   ss7_event_ciconly lpa ;
};
#line 267 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
typedef union __anonunion_ss7_event_21 ss7_event;
#line 60 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
typedef unsigned int point_code;
#line 69 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
struct ss7_msg {
   unsigned char buf[512] ;
   unsigned int size ;
   struct ss7_msg *next ;
};
#line 75 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
struct ss7_sched {
   struct timeval when ;
   void (*callback)(void *data ) ;
   void *data ;
};
#line 81
struct mtp2;
#line 81 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
struct ss7 {
   unsigned int switchtype ;
   unsigned int numlinks ;
   point_code pc ;
   unsigned char ni ;
   unsigned char sls ;
   int state ;
   unsigned int debug ;
   int ev_h ;
   int ev_t ;
   int ev_len ;
   ss7_event ev_q[16] ;
   struct ss7_sched ss7_sched[64] ;
   struct isup_call *calls ;
   unsigned int mtp2_linkstate[4] ;
   struct mtp2 *links[4] ;
};
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.h"
struct mtp_su_head {
   unsigned char bsn : 7 ;
   unsigned char bib : 1 ;
   unsigned char fsn : 7 ;
   unsigned char fib : 1 ;
   unsigned char li : 6 ;
   unsigned char spare : 2 ;
   unsigned char data[0] ;
} __attribute__((__packed__)) ;
#line 97 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.h"
struct mtp2_timers {
   int t1 ;
   int t2 ;
   int t3 ;
   int t4 ;
   int t4e ;
};
#line 105 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.h"
struct mtp2 {
   int state ;
   unsigned char curfsn : 7 ;
   unsigned char curfib : 1 ;
   unsigned char lastfsnacked : 7 ;
   unsigned char curbib : 1 ;
   int fd ;
   int flags ;
   int t1 ;
   int t2 ;
   int t3 ;
   int t4 ;
   struct mtp2_timers timers ;
   int slc ;
   int emergency ;
   int provingperiod ;
   unsigned int dpc ;
   int autotxsutype ;
   int lastsurxd ;
   int lastsutxd ;
   int sent_tra ;
   unsigned int retransmissioncount ;
   struct ss7_msg *tx_buf ;
   struct ss7_msg *tx_q ;
   struct ss7_msg *retransmit_pos ;
   struct ss7 *master ;
};
#line 62 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
struct routing_label {
   unsigned int type ;
   point_code dpc ;
   point_code opc ;
   unsigned char sls ;
};
#line 138 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.h"
struct isup_parm_opt {
   unsigned char type ;
   unsigned char len ;
   unsigned char data[0] ;
};
#line 144 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.h"
struct isup_h {
   unsigned char cic[2] ;
   unsigned char type ;
   unsigned char data[0] ;
};
#line 157 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.h"
struct isup_call {
   char called_party_num[64] ;
   unsigned char called_nai ;
   char calling_party_num[64] ;
   unsigned char calling_party_cat ;
   unsigned char calling_nai ;
   unsigned char presentation_ind ;
   unsigned char screening_ind ;
   char charge_number[64] ;
   unsigned char charge_nai ;
   unsigned char charge_num_plan ;
   unsigned char gen_add_num_plan ;
   unsigned char gen_add_nai ;
   char gen_add_number[64] ;
   unsigned char gen_add_pres_ind ;
   unsigned char gen_add_type ;
   char gen_dig_number[64] ;
   unsigned char gen_dig_type ;
   unsigned char gen_dig_scheme ;
   char jip_number[64] ;
   unsigned char lspi_type ;
   unsigned char lspi_scheme ;
   unsigned char lspi_context ;
   unsigned char lspi_spare ;
   char lspi_ident[64] ;
   int oli_ani2 ;
   unsigned int call_ref_ident ;
   unsigned int call_ref_pc ;
   char orig_called_num[64] ;
   unsigned char orig_called_nai ;
   unsigned char orig_called_pres_ind ;
   unsigned char orig_called_screening_ind ;
   char redirecting_num[64] ;
   unsigned char redirecting_num_nai ;
   unsigned char redirecting_num_presentation_ind ;
   unsigned char redirecting_num_screening_ind ;
   unsigned char generic_name_typeofname ;
   unsigned char generic_name_avail ;
   unsigned char generic_name_presentation ;
   char generic_name[16] ;
   int range ;
   unsigned char status[255] ;
   int transcap ;
   int l1prot ;
   int cause ;
   int causecode ;
   int causeloc ;
   int cot_check_passed ;
   int cot_check_required ;
   int cicgroupsupervisiontype ;
   unsigned char event_info ;
   unsigned short cic ;
   unsigned char sls ;
   struct isup_call *next ;
   unsigned int dpc ;
   unsigned char called_party_status_ind ;
};
#line 53 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
struct parm_func {
   int parm ;
   char *name ;
   int (*dump)(struct ss7 *ss7 , int messagetype , unsigned char *parm , int len ) ;
   int (*receive)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
                  int len ) ;
   int (*transmit)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
                   int len ) ;
};
#line 94 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
struct message_data {
   int messagetype ;
   int mand_fixed_params ;
   int mand_var_params ;
   int opt_params ;
   int *param_list ;
};
#line 55 "/usr/include/x86_64-linux-gnu/sys/time.h"
struct timezone {
   int tz_minuteswest ;
   int tz_dsttime ;
};
#line 61 "/usr/include/x86_64-linux-gnu/sys/time.h"
typedef struct timezone * __restrict  __timezone_ptr_t;
#line 57 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.h"
struct net_mng_message {
   int h0 ;
   int h1 ;
   char *name ;
};
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 40 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h"
typedef __builtin_va_list __gnuc_va_list;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 79 "/usr/include/stdio.h"
typedef __gnuc_va_list va_list;
#line 112 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
int ss7_schedule_event(struct ss7 *ss7 , int ms , void (*function)(void *data ) ,
                       void *data ) ;
#line 114
ss7_event *ss7_next_empty_event(struct ss7 *ss7 ) ;
#line 116
void ss7_schedule_del(struct ss7 *ss7 , int *id ) ;
#line 122
void ss7_message(struct ss7 *ss7 , char *fmt  , ...) ;
#line 124
void ss7_error(struct ss7 *ss7 , char *fmt  , ...) ;
#line 126
void ss7_dump_buf(struct ss7 *ss7 , int tabs , unsigned char *buf , int len ) ;
#line 128
void ss7_dump_msg(struct ss7 *ss7 , unsigned char *buf , int len ) ;
#line 67 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.h"
int mtp3_receive(struct ss7 *ss7 , struct mtp2 *link , void *msg , int len ) ;
#line 69
int mtp3_dump(struct ss7 *ss7 , struct mtp2 *link , void *msg , int len ) ;
#line 66 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 366 "/usr/include/unistd.h"
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 468 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) calloc)(size_t __nmemb ,
                                                                               size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 146 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.h"
int mtp2_start(struct mtp2 *link___0 , int emergency ) ;
#line 147
int mtp2_stop(struct mtp2 *link___0 ) ;
#line 148
int mtp2_setstate(struct mtp2 *link___0 , int newstate ) ;
#line 149
struct mtp2 *mtp2_new(int fd , unsigned int switchtype ) ;
#line 150
int mtp2_transmit(struct mtp2 *link___0 ) ;
#line 151
int mtp2_receive(struct mtp2 *link___0 , unsigned char *buf , int len ) ;
#line 152
int mtp2_msu(struct mtp2 *link___0 , struct ss7_msg *m ) ;
#line 153
void mtp2_dump(struct mtp2 *link___0 , char prefix , unsigned char *buf , int len ) ;
#line 44 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
__inline static int len_txbuf(struct mtp2 *link___0 ) 
{ 
  int res ;
  struct ss7_msg *cur ;

  {
#line 46
  res = 0;
#line 47
  cur = link___0->tx_buf;
  {
#line 49
  while (1) {
    while_continue: /* CIL Label */ ;
#line 49
    if (! cur) {
#line 49
      goto while_break;
    }
#line 50
    res ++;
#line 51
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 53
  return (res);
}
}
#line 56 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
__inline static char *linkstate2str(int linkstate ) 
{ 
  char *statestr ;

  {
#line 58
  statestr = (char *)((void *)0);
  {
#line 61
  if (linkstate == 0) {
#line 61
    goto case_0;
  }
#line 64
  if (linkstate == 1) {
#line 64
    goto case_1;
  }
#line 67
  if (linkstate == 2) {
#line 67
    goto case_2;
  }
#line 70
  if (linkstate == 3) {
#line 70
    goto case_3;
  }
#line 73
  if (linkstate == 4) {
#line 73
    goto case_4;
  }
#line 76
  if (linkstate == 5) {
#line 76
    goto case_5;
  }
#line 60
  goto switch_break;
  case_0: /* CIL Label */ 
#line 62
  statestr = (char *)"IDLE";
#line 63
  goto switch_break;
  case_1: /* CIL Label */ 
#line 65
  statestr = (char *)"NOTALIGNED";
#line 66
  goto switch_break;
  case_2: /* CIL Label */ 
#line 68
  statestr = (char *)"ALIGNED";
#line 69
  goto switch_break;
  case_3: /* CIL Label */ 
#line 71
  statestr = (char *)"PROVING";
#line 72
  goto switch_break;
  case_4: /* CIL Label */ 
#line 74
  statestr = (char *)"ALIGNEDREADY";
#line 75
  goto switch_break;
  case_5: /* CIL Label */ 
#line 77
  statestr = (char *)"INSERVICE";
#line 78
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 81
  return (statestr);
}
}
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
__inline static void init_mtp2_header(struct mtp2 *link___0 , struct mtp_su_head *h ,
                                      int new , int nack ) 
{ 


  {
#line 86
  if (new) {
#line 87
    link___0->curfsn = (unsigned char )((int )link___0->curfsn + 1);
#line 88
    link___0->flags |= 1 << 1;
  }
#line 91
  h->fib = link___0->curfib;
#line 92
  h->fsn = link___0->curfsn;
#line 94
  if (nack) {
#line 95
    link___0->curbib = (unsigned char )(! link___0->curbib);
#line 96
    link___0->flags |= 1 << 1;
  }
#line 99
  h->bib = link___0->curbib;
#line 100
  h->bsn = link___0->lastfsnacked;
#line 101
  return;
}
}
#line 103 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
__inline static int lssu_type(struct mtp_su_head *h ) 
{ 


  {
#line 105
  return ((int )h->data[0]);
}
}
#line 108 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void flush_bufs(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *list ;
  struct ss7_msg *cur ;

  {
#line 112
  list = link___0->tx_buf;
#line 114
  link___0->tx_buf = (struct ss7_msg *)((void *)0);
  {
#line 116
  while (1) {
    while_continue: /* CIL Label */ ;
#line 116
    if (! list) {
#line 116
      goto while_break;
    }
    {
#line 117
    cur = list;
#line 118
    list = list->next;
#line 119
    free((void *)cur);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 122
  list = link___0->tx_q;
#line 124
  link___0->tx_q = (struct ss7_msg *)((void *)0);
  {
#line 126
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 126
    if (! list) {
#line 126
      goto while_break___0;
    }
    {
#line 127
    cur = list;
#line 128
    list = list->next;
#line 129
    free((void *)cur);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 132
  link___0->retransmit_pos = (struct ss7_msg *)((void *)0);
#line 133
  return;
}
}
#line 135 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void reset_mtp(struct mtp2 *link___0 ) 
{ 


  {
  {
#line 137
  link___0->curfsn = (unsigned char)127;
#line 138
  link___0->curfib = (unsigned char)1;
#line 139
  link___0->curbib = (unsigned char)1;
#line 140
  link___0->lastfsnacked = (unsigned char)127;
#line 141
  link___0->retransmissioncount = 0U;
#line 142
  link___0->flags |= 1 << 1;
#line 144
  flush_bufs(link___0);
  }
#line 145
  return;
}
}
#line 148 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void mtp2_request_retransmission(struct mtp2 *link___0 ) 
{ 


  {
#line 150
  (link___0->retransmissioncount) ++;
#line 151
  link___0->curbib = (unsigned char )(! link___0->curbib);
#line 152
  link___0->flags |= 1 << 1;
#line 153
  return;
}
}
#line 155 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_queue_su(struct mtp2 *link___0 , struct ss7_msg *m ) 
{ 
  struct ss7_msg *cur ;

  {
#line 159
  if (! link___0->tx_q) {
#line 160
    link___0->tx_q = m;
#line 161
    m->next = (struct ss7_msg *)((void *)0);
#line 162
    return (0);
  }
#line 165
  cur = link___0->tx_q;
#line 167
  cur = link___0->tx_q;
  {
#line 167
  while (1) {
    while_continue: /* CIL Label */ ;
#line 167
    if (! cur->next) {
#line 167
      goto while_break;
    }
#line 167
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 169
  cur->next = m;
#line 170
  m->next = (struct ss7_msg *)((void *)0);
#line 172
  return (0);
}
}
#line 175 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void make_lssu(struct mtp2 *link___0 , unsigned char *buf , unsigned int *size ,
                      int lssu_status ) 
{ 
  struct mtp_su_head *head ;

  {
  {
#line 179
  *size = 6U;
#line 181
  memset((void *)buf, 0, (size_t )6);
#line 183
  head = (struct mtp_su_head *)buf;
#line 184
  head->li = (unsigned char)1;
  }
  {
#line 187
  if (lssu_status == 0) {
#line 187
    goto case_0;
  }
#line 187
  if (lssu_status == 3) {
#line 187
    goto case_0;
  }
#line 192
  if (lssu_status == 5) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 4) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 2) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 1) {
#line 192
    goto case_5;
  }
#line 185
  goto switch_break;
  case_0: /* CIL Label */ 
  case_3: /* CIL Label */ 
  {
#line 188
  reset_mtp(link___0);
  }
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
#line 193
  head->bib = link___0->curbib;
#line 194
  head->bsn = link___0->lastfsnacked;
#line 195
  head->fib = link___0->curfib;
#line 196
  head->fsn = link___0->curfsn;
#line 197
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 200
  head->data[0] = (unsigned char )lssu_status;
#line 201
  return;
}
}
#line 203 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void make_fisu(struct mtp2 *link___0 , unsigned char *buf , unsigned int *size ,
                      int nack ) 
{ 
  struct mtp_su_head *h ;

  {
  {
#line 207
  *size = 5U;
#line 209
  h = (struct mtp_su_head *)buf;
#line 211
  memset((void *)buf, 0, (size_t )*size);
#line 213
  init_mtp2_header(link___0, h, 0, nack);
#line 215
  h->li = (unsigned char)0;
  }
#line 216
  return;
}
}
#line 218 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void add_txbuf(struct mtp2 *link___0 , struct ss7_msg *m ) 
{ 


  {
#line 220
  m->next = link___0->tx_buf;
#line 221
  link___0->tx_buf = m;
#line 225
  return;
}
}
#line 227 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void update_retransmit_pos(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *cur ;
  struct ss7_msg *prev ;

  {
#line 229
  prev = (struct ss7_msg *)((void *)0);
#line 232
  cur = link___0->tx_buf;
  {
#line 234
  while (1) {
    while_continue: /* CIL Label */ ;
#line 234
    if (! cur) {
#line 234
      goto while_break;
    }
#line 235
    if ((unsigned long )cur == (unsigned long )link___0->retransmit_pos) {
#line 236
      goto while_break;
    }
#line 237
    prev = cur;
#line 238
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 241
  link___0->retransmit_pos = prev;
#line 243
  return;
}
}
#line 245 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void mtp2_retransmit(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *m ;

  {
#line 249
  link___0->flags |= 1 << 1;
#line 251
  link___0->curfib = (unsigned char )(! link___0->curfib);
#line 253
  m = link___0->tx_buf;
#line 254
  if (! m) {
    {
#line 255
    ss7_error(link___0->master, (char *)"Huh!? Asked to retransmit but we don\'t have anything in the tx buffer\n");
    }
#line 256
    return;
  }
  {
#line 259
  while (1) {
    while_continue: /* CIL Label */ ;
#line 259
    if (! m->next) {
#line 259
      goto while_break;
    }
#line 260
    m = m->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 262
  link___0->retransmit_pos = m;
#line 263
  return;
}
}
#line 265 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_transmit(struct mtp2 *link___0 ) 
{ 
  int res ;
  unsigned char *h ;
  unsigned char buf[64] ;
  unsigned int size ;
  struct ss7_msg *m ;
  int retransmit ;
  struct mtp_su_head *h1 ;
  ssize_t tmp ;

  {
#line 267
  res = 0;
#line 271
  m = (struct ss7_msg *)((void *)0);
#line 272
  retransmit = 0;
#line 274
  if (link___0->retransmit_pos) {
#line 276
    m = link___0->retransmit_pos;
#line 277
    retransmit = 1;
#line 279
    if (! m) {
      {
#line 280
      ss7_error(link___0->master, (char *)"Huh, requested to retransmit, but nothing in retransmit buffer?!!\n");
      }
#line 281
      return (-1);
    }
#line 284
    h = m->buf;
#line 285
    size = m->size;
#line 287
    h1 = (struct mtp_su_head *)h;
#line 289
    h1->fib = link___0->curfib;
#line 290
    h1->bsn = link___0->lastfsnacked;
  } else {
#line 293
    if (link___0->tx_q) {
#line 294
      m = link___0->tx_q;
    }
#line 296
    if (m) {
#line 297
      h = m->buf;
#line 298
      size = m->size;
    } else {
#line 300
      size = (unsigned int )sizeof(buf);
#line 301
      if (link___0->autotxsutype == 6) {
        {
#line 302
        make_fisu(link___0, buf, & size, 0);
        }
      } else {
        {
#line 304
        make_lssu(link___0, buf, & size, link___0->autotxsutype);
        }
      }
#line 305
      h = buf;
    }
  }
  {
#line 309
  tmp = write(link___0->fd, (void const   *)h, (size_t )size);
#line 309
  res = (int )tmp;
  }
#line 311
  if (res > 0) {
    {
#line 312
    mtp2_dump(link___0, (char )'>', h, (int )(size - 2U));
    }
#line 313
    if (retransmit) {
      {
#line 315
      update_retransmit_pos(link___0);
      }
    } else
#line 317
    if (m) {
      {
#line 319
      link___0->tx_q = m->next;
#line 321
      add_txbuf(link___0, m);
      }
    }
#line 325
    if ((unsigned long )h == (unsigned long )(buf)) {
#line 326
      link___0->flags &= ~ (1 << 1);
    }
  }
#line 330
  return (res);
}
}
#line 333 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_msu(struct mtp2 *link___0 , struct ss7_msg *m ) 
{ 
  int len ;
  struct mtp_su_head *h ;

  {
  {
#line 335
  len = (int )(m->size - 3U);
#line 336
  h = (struct mtp_su_head *)(m->buf);
#line 338
  link___0->flags |= 1 << 1;
#line 340
  init_mtp2_header(link___0, h, 1, 0);
  }
#line 342
  if (len > 63) {
#line 343
    h->li = (unsigned char)63;
  } else {
#line 345
    h->li = (unsigned char )len;
  }
  {
#line 347
  m->size += 2U;
#line 348
  mtp2_queue_su(link___0, m);
#line 350
  m->next = (struct ss7_msg *)((void *)0);
  }
#line 352
  return (0);
}
}
#line 355 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_lssu(struct mtp2 *link___0 , int lssu_status ) 
{ 


  {
#line 357
  link___0->flags |= 1 << 1;
#line 358
  link___0->autotxsutype = lssu_status;
#line 359
  return (0);
}
}
#line 362 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_fisu(struct mtp2 *link___0 , int nack ) 
{ 


  {
#line 364
  link___0->flags |= 1 << 1;
#line 365
  link___0->autotxsutype = 6;
#line 366
  return (0);
}
}
#line 369 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void update_txbuf(struct mtp2 *link___0 , unsigned char upto ) 
{ 
  struct mtp_su_head *h ;
  struct ss7_msg *prev ;
  struct ss7_msg *cur ;
  struct ss7_msg *frlist ;

  {
#line 372
  prev = (struct ss7_msg *)((void *)0);
#line 373
  frlist = (struct ss7_msg *)((void *)0);
#line 377
  if (! link___0->tx_buf) {
#line 378
    return;
  }
#line 381
  cur = link___0->tx_buf;
  {
#line 383
  while (1) {
    while_continue: /* CIL Label */ ;
#line 383
    if (! cur) {
#line 383
      goto while_break;
    }
#line 384
    h = (struct mtp_su_head *)(cur->buf);
#line 385
    if ((int )h->fsn == (int )upto) {
#line 386
      frlist = cur;
#line 387
      if (! prev) {
#line 388
        link___0->tx_buf = (struct ss7_msg *)((void *)0);
      } else {
#line 390
        prev->next = (struct ss7_msg *)((void *)0);
      }
#line 391
      frlist = cur;
#line 392
      goto while_break;
    }
#line 394
    prev = cur;
#line 395
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 398
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 398
    if (! frlist) {
#line 398
      goto while_break___0;
    }
    {
#line 399
    cur = frlist;
#line 400
    frlist = frlist->next;
#line 401
    free((void *)cur);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 404
  return;
}
}
#line 407 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int fisu_rx(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  int tmp ;

  {
#line 409
  if (link___0->lastsurxd == 6) {
#line 410
    return (0);
  } else {
#line 412
    link___0->lastsurxd = 6;
  }
  {
#line 415
  if (link___0->state == 3) {
#line 415
    goto case_3;
  }
#line 418
  if (link___0->state == 4) {
#line 418
    goto case_4;
  }
#line 420
  if (link___0->state == 5) {
#line 420
    goto case_5;
  }
#line 426
  goto switch_default;
  case_3: /* CIL Label */ 
  {
#line 416
  tmp = mtp2_setstate(link___0, 4);
  }
#line 416
  return (tmp);
  case_4: /* CIL Label */ 
  {
#line 419
  mtp2_setstate(link___0, 5);
  }
  case_5: /* CIL Label */ 
#line 421
  if ((int )h->fsn != (int )link___0->lastfsnacked) {
    {
#line 422
    ss7_message(link___0->master, (char *)"Received out of sequence FISU w/ fsn of %d, lastfsnacked = %d, requesting retransmission\n",
                (int )h->fsn, (int )link___0->lastfsnacked);
#line 423
    mtp2_request_retransmission(link___0);
    }
  }
#line 425
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 427
  ss7_message(link___0->master, (char *)"Huh?! Got FISU in link state %d\n", link___0->state);
  }
#line 428
  return (-1);
  switch_break: /* CIL Label */ ;
  }
#line 431
  return (0);
}
}
#line 434 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t1_expiry(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 436
  link___0 = (struct mtp2 *)data;
#line 438
  mtp2_setstate(link___0, 0);
  }
#line 440
  return;
}
}
#line 443 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t2_expiry(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 445
  link___0 = (struct mtp2 *)data;
#line 447
  mtp2_setstate(link___0, 0);
  }
#line 449
  return;
}
}
#line 452 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t3_expiry(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 454
  link___0 = (struct mtp2 *)data;
#line 456
  mtp2_setstate(link___0, 0);
  }
#line 458
  return;
}
}
#line 461 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t4_expiry(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
#line 463
  link___0 = (struct mtp2 *)data;
#line 465
  if ((link___0->master)->debug & 1U) {
    {
#line 466
    ss7_message(link___0->master, (char *)"T4 expired!\n");
    }
  }
  {
#line 468
  mtp2_setstate(link___0, 4);
  }
#line 470
  return;
}
}
#line 473 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int to_idle(struct mtp2 *link___0 ) 
{ 
  int tmp ;

  {
  {
#line 475
  link___0->state = 0;
#line 476
  tmp = mtp2_lssu(link___0, 3);
  }
#line 476
  if (tmp) {
    {
#line 477
    ss7_error(link___0->master, (char *)"Could not transmit LSSU\n");
    }
#line 478
    return (-1);
  }
  {
#line 481
  mtp2_setstate(link___0, 1);
  }
#line 483
  return (0);
}
}
#line 486 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_setstate(struct mtp2 *link___0 , int newstate ) 
{ 
  ss7_event *e ;
  char *tmp ;
  char *tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;
  int tmp___8 ;
  int tmp___9 ;
  int tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;

  {
#line 490
  if ((link___0->master)->debug & 1U) {
    {
#line 491
    tmp = linkstate2str(newstate);
#line 491
    tmp___0 = linkstate2str(link___0->state);
#line 491
    ss7_message(link___0->master, (char *)"Link state change: %s -> %s\n", tmp___0,
                tmp);
    }
  }
  {
#line 494
  if (link___0->state == 0) {
#line 494
    goto case_0;
  }
#line 502
  if (link___0->state == 1) {
#line 502
    goto case_1;
  }
#line 528
  if (link___0->state == 2) {
#line 528
    goto case_2___0;
  }
#line 539
  if (link___0->state == 3) {
#line 539
    goto case_3___1;
  }
#line 571
  if (link___0->state == 4) {
#line 571
    goto case_4___0;
  }
#line 600
  if (link___0->state == 5) {
#line 600
    goto case_5___0;
  }
#line 493
  goto switch_break;
  case_0: /* CIL Label */ 
  {
#line 495
  link___0->t2 = ss7_schedule_event(link___0->master, link___0->timers.t2, & t2_expiry,
                                    (void *)link___0);
#line 496
  tmp___1 = mtp2_lssu(link___0, 0);
  }
#line 496
  if (tmp___1) {
    {
#line 497
    ss7_error(link___0->master, (char *)"Unable to transmit initial LSSU\n");
    }
#line 498
    return (-1);
  }
#line 500
  link___0->state = 1;
#line 501
  return (0);
  case_1: /* CIL Label */ 
  {
#line 503
  ss7_schedule_del(link___0->master, & link___0->t2);
  }
  {
#line 505
  if (newstate == 0) {
#line 505
    goto case_0___0;
  }
#line 508
  if (newstate == 3) {
#line 508
    goto case_3;
  }
#line 508
  if (newstate == 2) {
#line 508
    goto case_3;
  }
#line 504
  goto switch_break___0;
  case_0___0: /* CIL Label */ 
  {
#line 506
  tmp___2 = to_idle(link___0);
  }
#line 506
  return (tmp___2);
  case_3: /* CIL Label */ 
  case_2: /* CIL Label */ 
#line 509
  if (newstate == 2) {
    {
#line 510
    link___0->t3 = ss7_schedule_event(link___0->master, link___0->timers.t3, & t3_expiry,
                                      (void *)link___0);
    }
  } else {
    {
#line 512
    link___0->t4 = ss7_schedule_event(link___0->master, link___0->provingperiod, & t4_expiry,
                                      (void *)link___0);
    }
  }
#line 513
  if (link___0->emergency) {
    {
#line 514
    tmp___3 = mtp2_lssu(link___0, 2);
    }
#line 514
    if (tmp___3) {
      {
#line 515
      ss7_error(link___0->master, (char *)"Couldn\'t tx LSSU_SIE\n");
      }
#line 516
      return (-1);
    }
  } else {
    {
#line 519
    tmp___4 = mtp2_lssu(link___0, 1);
    }
#line 519
    if (tmp___4) {
      {
#line 520
      ss7_error(link___0->master, (char *)"Couldn\'t tx LSSU_SIE\n");
      }
#line 521
      return (-1);
    }
  }
#line 524
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
#line 526
  link___0->state = newstate;
#line 527
  return (0);
  case_2___0: /* CIL Label */ 
  {
#line 529
  ss7_schedule_del(link___0->master, & link___0->t3);
  }
  {
#line 532
  if (newstate == 0) {
#line 532
    goto case_0___1;
  }
#line 534
  if (newstate == 3) {
#line 534
    goto case_3___0;
  }
#line 531
  goto switch_break___1;
  case_0___1: /* CIL Label */ 
  {
#line 533
  tmp___5 = to_idle(link___0);
  }
#line 533
  return (tmp___5);
  case_3___0: /* CIL Label */ 
  {
#line 535
  link___0->t4 = ss7_schedule_event(link___0->master, link___0->provingperiod, & t4_expiry,
                                    (void *)link___0);
  }
  switch_break___1: /* CIL Label */ ;
  }
#line 537
  link___0->state = newstate;
#line 538
  return (0);
  case_3___1: /* CIL Label */ 
  {
#line 540
  ss7_schedule_del(link___0->master, & link___0->t4);
  }
  {
#line 543
  if (newstate == 0) {
#line 543
    goto case_0___2;
  }
#line 545
  if (newstate == 3) {
#line 545
    goto case_3___2;
  }
#line 548
  if (newstate == 2) {
#line 548
    goto case_2___1;
  }
#line 561
  if (newstate == 4) {
#line 561
    goto case_4;
  }
#line 542
  goto switch_break___2;
  case_0___2: /* CIL Label */ 
  {
#line 544
  tmp___6 = to_idle(link___0);
  }
#line 544
  return (tmp___6);
  case_3___2: /* CIL Label */ 
  {
#line 546
  link___0->t4 = ss7_schedule_event(link___0->master, link___0->provingperiod, & t4_expiry,
                                    (void *)link___0);
  }
#line 547
  goto switch_break___2;
  case_2___1: /* CIL Label */ 
#line 549
  if (link___0->emergency) {
    {
#line 550
    tmp___7 = mtp2_lssu(link___0, 2);
    }
#line 550
    if (tmp___7) {
      {
#line 551
      ss7_error(link___0->master, (char *)"Could not transmit LSSU\n");
      }
#line 552
      return (-1);
    }
  } else {
    {
#line 555
    tmp___8 = mtp2_lssu(link___0, 1);
    }
#line 555
    if (tmp___8) {
      {
#line 556
      ss7_error(link___0->master, (char *)"Could not transmit LSSU\n");
      }
#line 557
      return (-1);
    }
  }
#line 560
  goto switch_break___2;
  case_4: /* CIL Label */ 
  {
#line 562
  link___0->t1 = ss7_schedule_event(link___0->master, link___0->timers.t1, & t1_expiry,
                                    (void *)link___0);
#line 563
  tmp___9 = mtp2_fisu(link___0, 0);
  }
#line 563
  if (tmp___9) {
    {
#line 564
    ss7_error(link___0->master, (char *)"Could not transmit FISU\n");
    }
#line 565
    return (-1);
  }
#line 567
  goto switch_break___2;
  switch_break___2: /* CIL Label */ ;
  }
#line 569
  link___0->state = newstate;
#line 570
  return (0);
  case_4___0: /* CIL Label */ 
  {
#line 572
  ss7_schedule_del(link___0->master, & link___0->t1);
  }
  {
#line 575
  if (newstate == 0) {
#line 575
    goto case_0___3;
  }
#line 577
  if (newstate == 4) {
#line 577
    goto case_4___1;
  }
#line 584
  if (newstate == 5) {
#line 584
    goto case_5;
  }
#line 594
  goto switch_default;
  case_0___3: /* CIL Label */ 
  {
#line 576
  tmp___10 = to_idle(link___0);
  }
#line 576
  return (tmp___10);
  case_4___1: /* CIL Label */ 
  {
#line 578
  link___0->t1 = ss7_schedule_event(link___0->master, link___0->timers.t1, & t1_expiry,
                                    (void *)link___0);
#line 579
  tmp___11 = mtp2_fisu(link___0, 0);
  }
#line 579
  if (tmp___11) {
    {
#line 580
    ss7_error(link___0->master, (char *)"Could not transmit FISU\n");
    }
#line 581
    return (-1);
  }
#line 583
  goto switch_break___3;
  case_5: /* CIL Label */ 
  {
#line 585
  ss7_schedule_del(link___0->master, & link___0->t1);
#line 586
  e = ss7_next_empty_event(link___0->master);
  }
#line 587
  if (! e) {
    {
#line 588
    ss7_error(link___0->master, (char *)"Could not queue event\n");
    }
#line 589
    return (-1);
  }
#line 591
  e->gen.e = 3;
#line 592
  e->gen.data = (unsigned int )link___0->slc;
#line 593
  goto switch_break___3;
  switch_default: /* CIL Label */ 
  {
#line 595
  ss7_error(link___0->master, (char *)"Don\'t know how to handle state change from %d to %d\n",
            link___0->state, newstate);
  }
#line 596
  goto switch_break___3;
  switch_break___3: /* CIL Label */ ;
  }
#line 598
  link___0->state = newstate;
#line 599
  return (0);
  case_5___0: /* CIL Label */ 
#line 601
  if (newstate != 5) {
    {
#line 602
    e = ss7_next_empty_event(link___0->master);
    }
#line 603
    if (! e) {
      {
#line 604
      ss7_error(link___0->master, (char *)"Could not queue event\n");
      }
#line 605
      return (-1);
    }
    {
#line 607
    e->gen.e = 4;
#line 608
    e->gen.data = (unsigned int )link___0->slc;
#line 609
    tmp___12 = to_idle(link___0);
    }
#line 609
    return (tmp___12);
  }
#line 611
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 613
  return (0);
}
}
#line 616 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int lssu_rx(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  unsigned char lssutype ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;

  {
  {
#line 618
  tmp = lssu_type(h);
#line 618
  lssutype = (unsigned char )tmp;
  }
#line 620
  if (len > 8) {
    {
#line 621
    ss7_error(link___0->master, (char *)"Received LSSU with length %d longer than expected\n",
              len);
    }
  }
#line 623
  if (link___0->lastsurxd == (int )lssutype) {
#line 624
    return (0);
  } else {
#line 626
    link___0->lastsurxd = (int )lssutype;
  }
#line 628
  if ((int )lssutype == 2) {
#line 629
    link___0->emergency = 1;
  }
  {
#line 633
  if (link___0->state == 1) {
#line 633
    goto case_1;
  }
#line 633
  if (link___0->state == 0) {
#line 633
    goto case_1;
  }
#line 646
  if (link___0->state == 2) {
#line 646
    goto case_2;
  }
#line 659
  if (link___0->state == 3) {
#line 659
    goto case_3;
  }
#line 669
  if (link___0->state == 5) {
#line 669
    goto case_5;
  }
#line 669
  if (link___0->state == 4) {
#line 669
    goto case_5;
  }
#line 631
  goto switch_break;
  case_1: /* CIL Label */ 
  case_0: /* CIL Label */ 
#line 634
  if ((int )lssutype != 2) {
#line 634
    if ((int )lssutype != 1) {
#line 634
      if ((int )lssutype != 0) {
        {
#line 635
        tmp___0 = mtp2_setstate(link___0, 1);
        }
#line 635
        return (tmp___0);
      }
    }
  }
#line 637
  if (link___0->emergency) {
#line 638
    link___0->provingperiod = link___0->timers.t4e;
  } else
#line 637
  if ((int )lssutype == 2) {
#line 638
    link___0->provingperiod = link___0->timers.t4e;
  } else {
#line 640
    link___0->provingperiod = link___0->timers.t4;
  }
#line 642
  if ((int )lssutype == 2) {
    {
#line 643
    tmp___1 = mtp2_setstate(link___0, 3);
    }
#line 643
    return (tmp___1);
  } else
#line 642
  if ((int )lssutype == 1) {
    {
#line 643
    tmp___1 = mtp2_setstate(link___0, 3);
    }
#line 643
    return (tmp___1);
  } else {
    {
#line 645
    tmp___2 = mtp2_setstate(link___0, 2);
    }
#line 645
    return (tmp___2);
  }
  case_2: /* CIL Label */ 
#line 647
  if ((int )lssutype == 3) {
    {
#line 648
    tmp___3 = mtp2_setstate(link___0, 0);
    }
#line 648
    return (tmp___3);
  }
#line 650
  if (link___0->emergency) {
#line 651
    link___0->provingperiod = link___0->timers.t4e;
  } else
#line 650
  if ((int )lssutype == 2) {
#line 651
    link___0->provingperiod = link___0->timers.t4e;
  } else {
#line 653
    link___0->provingperiod = link___0->timers.t4;
  }
#line 655
  if (link___0->provingperiod == link___0->timers.t4) {
#line 655
    if (link___0->emergency) {
#line 656
      link___0->provingperiod = link___0->timers.t4e;
    } else
#line 655
    if ((int )lssutype == 2) {
#line 656
      link___0->provingperiod = link___0->timers.t4e;
    }
  }
  {
#line 658
  tmp___4 = mtp2_setstate(link___0, 3);
  }
#line 658
  return (tmp___4);
  case_3: /* CIL Label */ 
#line 660
  if ((int )lssutype == 3) {
    {
#line 661
    tmp___5 = mtp2_setstate(link___0, 0);
    }
#line 661
    return (tmp___5);
  }
#line 663
  if ((int )lssutype == 0) {
    {
#line 664
    tmp___6 = mtp2_setstate(link___0, 2);
    }
#line 664
    return (tmp___6);
  }
  {
#line 666
  ss7_message(link___0->master, (char *)"Don\'t handle any other conditions in state %d\n",
              link___0->state);
  }
#line 667
  goto switch_break;
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
#line 670
  if ((int )lssutype != 3) {
#line 670
    if ((int )lssutype != 0) {
      {
#line 671
      ss7_message(link___0->master, (char *)"Got LSSU of type %d while link is in state %d.  Re-Aligning\n",
                  (int )lssutype, link___0->state);
      }
    }
  }
  {
#line 672
  tmp___7 = mtp2_setstate(link___0, 0);
  }
#line 672
  return (tmp___7);
  switch_break: /* CIL Label */ ;
  }
#line 676
  return (0);
}
}
#line 679 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int msu_rx(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  int res ;

  {
#line 681
  res = 0;
  {
#line 684
  if (link___0->state == 4) {
#line 684
    goto case_4;
  }
#line 687
  if (link___0->state == 5) {
#line 687
    goto case_5;
  }
#line 689
  goto switch_default;
  case_4: /* CIL Label */ 
  {
#line 685
  mtp2_setstate(link___0, 5);
  }
#line 686
  goto switch_break;
  case_5: /* CIL Label */ 
#line 688
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 690
  ss7_error(link___0->master, (char *)"Received MSU in invalid state %d\n", link___0->state);
  }
#line 691
  return (-1);
  switch_break: /* CIL Label */ ;
  }
#line 695
  if ((int )h->fib != (int )link___0->curbib) {
    {
#line 696
    ss7_message(link___0->master, (char *)"MSU received, though still waiting for retransmission start.  Dropping.\n");
    }
#line 697
    return (0);
  }
#line 700
  if ((int )h->fsn == (int )link___0->lastfsnacked) {
    {
#line 702
    ss7_message(link___0->master, (char *)"Received double MSU, dropping\n");
    }
#line 703
    return (0);
  }
#line 706
  if ((int )h->fsn != ((int )link___0->lastfsnacked + 1) % 128) {
    {
#line 707
    ss7_message(link___0->master, (char *)"Received out of sequence MSU w/ fsn of %d, lastfsnacked = %d, requesting retransmission\n",
                (int )h->fsn, (int )link___0->lastfsnacked);
#line 708
    mtp2_request_retransmission(link___0);
    }
#line 709
    return (0);
  }
  {
#line 713
  link___0->lastfsnacked = h->fsn;
#line 715
  link___0->flags |= 1 << 1;
#line 717
  res = mtp3_receive(link___0->master, link___0, (void *)(h->data), len - 3);
  }
#line 719
  return (res);
}
}
#line 722 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_start(struct mtp2 *link___0 , int emergency ) 
{ 
  int tmp ;

  {
#line 724
  link___0->emergency = emergency;
#line 725
  if (link___0->state == 0) {
    {
#line 726
    tmp = mtp2_setstate(link___0, 1);
    }
#line 726
    return (tmp);
  } else {
#line 728
    return (0);
  }
}
}
#line 731 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_stop(struct mtp2 *link___0 ) 
{ 
  int tmp ;

  {
  {
#line 733
  tmp = mtp2_setstate(link___0, 0);
  }
#line 733
  return (tmp);
}
}
#line 736 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
struct mtp2 *mtp2_new(int fd , unsigned int switchtype ) 
{ 
  struct mtp2 *new ;
  void *tmp ;

  {
  {
#line 738
  tmp = calloc((size_t )1, sizeof(struct mtp2 ));
#line 738
  new = (struct mtp2 *)tmp;
  }
#line 740
  if (! new) {
#line 741
    return ((struct mtp2 *)((void *)0));
  }
  {
#line 743
  reset_mtp(new);
#line 745
  new->fd = fd;
#line 746
  new->autotxsutype = 3;
#line 747
  new->lastsurxd = -1;
#line 748
  new->lastsutxd = -1;
  }
#line 750
  if (switchtype == 1U) {
#line 751
    new->timers.t1 = 45000;
#line 752
    new->timers.t2 = 50000;
#line 753
    new->timers.t3 = 1500;
#line 754
    new->timers.t4 = 8500;
#line 755
    new->timers.t4e = 500;
  } else
#line 756
  if (switchtype == (unsigned int )(1 << 1)) {
#line 757
    new->timers.t1 = 16000;
#line 758
    new->timers.t2 = 11500;
#line 759
    new->timers.t3 = 11500;
#line 760
    new->timers.t4 = 2300;
#line 761
    new->timers.t4e = 600;
  }
#line 764
  return (new);
}
}
#line 768 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
void mtp2_dump(struct mtp2 *link___0 , char prefix , unsigned char *buf , int len ) 
{ 
  struct mtp_su_head *h ;
  unsigned char mtype ;
  char *mtypech ;

  {
#line 770
  h = (struct mtp_su_head *)buf;
#line 772
  mtypech = (char *)((void *)0);
#line 774
  if (! ((link___0->master)->debug & 1U)) {
#line 775
    return;
  }
  {
#line 778
  if ((int )h->li == 0) {
#line 778
    goto case_0;
  }
#line 782
  if ((int )h->li == 2) {
#line 782
    goto case_2;
  }
#line 782
  if ((int )h->li == 1) {
#line 782
    goto case_2;
  }
#line 785
  goto switch_default;
  case_0: /* CIL Label */ 
#line 779
  mtype = (unsigned char)0;
#line 780
  goto switch_break;
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
#line 783
  mtype = (unsigned char)1;
#line 784
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 786
  mtype = (unsigned char)2;
#line 787
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 792
  if ((int )mtype == 0) {
#line 792
    goto case_0___0;
  }
#line 805
  if ((int )mtype == 1) {
#line 805
    goto case_1___0;
  }
#line 837
  if ((int )mtype == 2) {
#line 837
    goto case_2___1;
  }
#line 791
  goto switch_break___0;
  case_0___0: /* CIL Label */ 
#line 793
  if ((int )prefix == 60) {
#line 793
    if (link___0->lastsurxd == 6) {
#line 794
      return;
    }
  }
#line 795
  if ((int )prefix == 62) {
#line 795
    if (link___0->lastsutxd == 6) {
#line 796
      return;
    } else {
#line 798
      link___0->lastsutxd = 6;
    }
  } else {
#line 798
    link___0->lastsutxd = 6;
  }
  {
#line 799
  ss7_dump_msg(link___0->master, buf, len);
#line 800
  ss7_message(link___0->master, (char *)"FSN: %d FIB %d\n", (int )h->fsn, (int )h->fib);
#line 801
  ss7_message(link___0->master, (char *)"BSN: %d BIB %d\n", (int )h->bsn, (int )h->bib);
#line 803
  ss7_message(link___0->master, (char *)"%c[%d] FISU\n", (int )prefix, link___0->slc);
  }
#line 804
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 806
  if ((int )prefix == 60) {
#line 806
    if (link___0->lastsurxd == (int )h->data[0]) {
#line 807
      return;
    }
  }
#line 808
  if ((int )prefix == 62) {
#line 808
    if (link___0->lastsutxd == (int )h->data[0]) {
#line 809
      return;
    } else {
#line 811
      link___0->lastsutxd = (int )h->data[0];
    }
  } else {
#line 811
    link___0->lastsutxd = (int )h->data[0];
  }
  {
#line 813
  if ((int )h->data[0] == 3) {
#line 813
    goto case_3;
  }
#line 816
  if ((int )h->data[0] == 0) {
#line 816
    goto case_0___1;
  }
#line 819
  if ((int )h->data[0] == 1) {
#line 819
    goto case_1___1;
  }
#line 822
  if ((int )h->data[0] == 2) {
#line 822
    goto case_2___0;
  }
#line 825
  if ((int )h->data[0] == 4) {
#line 825
    goto case_4;
  }
#line 828
  if ((int )h->data[0] == 5) {
#line 828
    goto case_5;
  }
#line 812
  goto switch_break___1;
  case_3: /* CIL Label */ 
#line 814
  mtypech = (char *)"SIOS";
#line 815
  goto switch_break___1;
  case_0___1: /* CIL Label */ 
#line 817
  mtypech = (char *)"SIO";
#line 818
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 820
  mtypech = (char *)"SIN";
#line 821
  goto switch_break___1;
  case_2___0: /* CIL Label */ 
#line 823
  mtypech = (char *)"SIE";
#line 824
  goto switch_break___1;
  case_4: /* CIL Label */ 
#line 826
  mtypech = (char *)"SIPO";
#line 827
  goto switch_break___1;
  case_5: /* CIL Label */ 
#line 829
  mtypech = (char *)"SIB";
#line 830
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  {
#line 832
  ss7_dump_msg(link___0->master, buf, len);
#line 833
  ss7_message(link___0->master, (char *)"FSN: %d FIB %d\n", (int )h->fsn, (int )h->fib);
#line 834
  ss7_message(link___0->master, (char *)"BSN: %d BIB %d\n", (int )h->bsn, (int )h->bib);
#line 835
  ss7_message(link___0->master, (char *)"%c[%d] LSSU %s\n", (int )prefix, link___0->slc,
              mtypech);
  }
#line 836
  goto switch_break___0;
  case_2___1: /* CIL Label */ 
  {
#line 838
  ss7_dump_msg(link___0->master, buf, len);
#line 839
  ss7_message(link___0->master, (char *)"FSN: %d FIB %d\n", (int )h->fsn, (int )h->fib);
#line 840
  ss7_message(link___0->master, (char *)"BSN: %d BIB %d\n", (int )h->bsn, (int )h->bib);
#line 841
  ss7_message(link___0->master, (char *)"%c[%d] MSU\n", (int )prefix, link___0->slc);
#line 842
  ss7_dump_buf(link___0->master, 0, buf, 3);
#line 843
  mtp3_dump(link___0->master, link___0, (void *)(h->data), len - 3);
  }
#line 844
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 847
  ss7_message(link___0->master, (char *)"\n");
  }
#line 848
  return;
}
}
#line 851 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
int mtp2_receive(struct mtp2 *link___0 , unsigned char *buf , int len ) 
{ 
  struct mtp_su_head *h ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;

  {
#line 853
  h = (struct mtp_su_head *)buf;
#line 854
  len -= 2;
#line 856
  if (len < 3) {
    {
#line 857
    ss7_message(link___0->master, (char *)"Got message smaller than the minimum SS7 SU length.  Dropping\n");
    }
#line 858
    return (0);
  }
  {
#line 862
  mtp2_dump(link___0, (char )'<', buf, len);
#line 864
  update_txbuf(link___0, h->bsn);
  }
#line 867
  if (link___0->state == 5) {
#line 867
    if ((int )h->bib != (int )link___0->curfib) {
      {
#line 869
      tmp = len_txbuf(link___0);
#line 869
      ss7_message(link___0->master, (char *)"Got retransmission request sequence numbers greater than %d. Retransmitting %d message(s).\n",
                  (int )h->bsn, tmp);
#line 870
      mtp2_retransmit(link___0);
      }
    }
  }
  {
#line 874
  if ((int )h->li == 0) {
#line 874
    goto case_0;
  }
#line 878
  if ((int )h->li == 2) {
#line 878
    goto case_2;
  }
#line 878
  if ((int )h->li == 1) {
#line 878
    goto case_2;
  }
#line 881
  goto switch_default;
  case_0: /* CIL Label */ 
  {
#line 876
  tmp___0 = fisu_rx(link___0, h, len);
  }
#line 876
  return (tmp___0);
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
  {
#line 880
  tmp___1 = lssu_rx(link___0, h, len);
  }
#line 880
  return (tmp___1);
  switch_default: /* CIL Label */ 
  {
#line 883
  tmp___2 = msu_rx(link___0, h, len);
  }
#line 883
  return (tmp___2);
  switch_break: /* CIL Label */ ;
  }
#line 886
  return (0);
}
}
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 132
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strncpy)(char * __restrict  __dest ,
                                                                                                  char const   * __restrict  __src ,
                                                                                                  size_t __n ) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 342 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
int isup_iam(struct ss7 *ss7 , struct isup_call *c ) ;
#line 344
int isup_anm(struct ss7 *ss7 , struct isup_call *c ) ;
#line 346
int isup_con(struct ss7 *ss7 , struct isup_call *c ) ;
#line 348
struct isup_call *isup_new_call(struct ss7 *ss7 ) ;
#line 350
int isup_acm(struct ss7 *ss7 , struct isup_call *c ) ;
#line 352
int isup_faa(struct ss7 *ss7 , struct isup_call *c ) ;
#line 354
int isup_far(struct ss7 *ss7 , struct isup_call *c ) ;
#line 356
int isup_rel(struct ss7 *ss7 , struct isup_call *c , int cause ) ;
#line 358
int isup_rlc(struct ss7 *ss7 , struct isup_call *c ) ;
#line 360
int isup_cpg(struct ss7 *ss7 , struct isup_call *c , int event ) ;
#line 362
int isup_lpa(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 364
int isup_gra(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc ) ;
#line 366
int isup_grs(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc ) ;
#line 368
int isup_cgb(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
             int type ) ;
#line 370
int isup_cgu(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
             int type ) ;
#line 372
int isup_cgba(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
              int type ) ;
#line 374
int isup_cgua(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
              int type ) ;
#line 376
int isup_blo(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 378
int isup_ubl(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 382
int isup_bla(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 384
int isup_ucic(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 386
int isup_uba(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 388
int isup_rsc(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 390
int isup_cvr(struct ss7 *ss7 , int cic , unsigned int dpc ) ;
#line 392
int isup_cqr(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *status ) ;
#line 395
void isup_init_call(struct ss7 *ss7 , struct isup_call *c , int cic , unsigned int dpc ) ;
#line 397
void isup_set_call_dpc(struct isup_call *c , unsigned int dpc ) ;
#line 399
void isup_set_called(struct isup_call *c , char const   *called , unsigned char called_nai ,
                     struct ss7  const  *ss7 ) ;
#line 401
void isup_set_calling(struct isup_call *c , char const   *calling , unsigned char calling_nai ,
                      unsigned char presentation_ind , unsigned char screening_ind ) ;
#line 403
void isup_set_charge(struct isup_call *c , char const   *charge , unsigned char charge_nai ,
                     unsigned char charge_num_plan ) ;
#line 405
void isup_set_oli(struct isup_call *c , int oli_ani2 ) ;
#line 407
void isup_set_gen_address(struct isup_call *c , char const   *gen_number , unsigned char gen_add_nai ,
                          unsigned char gen_pres_ind , unsigned char gen_num_plan ,
                          unsigned char gen_add_type ) ;
#line 409
void isup_set_gen_digits(struct isup_call *c , char const   *gen_number , unsigned char gen_dig_type ,
                         unsigned char gen_dig_scheme ) ;
#line 430
void isup_set_generic_name(struct isup_call *c , char const   *generic_name , unsigned int typeofname ,
                           unsigned int availability , unsigned int presentation ) ;
#line 432
void isup_set_jip_digits(struct isup_call *c , char const   *jip_number ) ;
#line 434
void isup_set_lspi(struct isup_call *c , char const   *lspi_ident , unsigned char lspi_type ,
                   unsigned char lspi_scheme , unsigned char lspi_context ) ;
#line 436
void isup_set_callref(struct isup_call *c , unsigned int call_ref_ident , unsigned int call_ref_pc ) ;
#line 386 "/usr/include/stdio.h"
extern  __attribute__((__nothrow__)) int ( /* format attribute */  snprintf)(char * __restrict  __s ,
                                                                             size_t __maxlen ,
                                                                             char const   * __restrict  __format 
                                                                             , ...) ;
#line 107 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
struct ss7_msg *ss7_msg_new(void) ;
#line 118
unsigned char *ss7_msg_userpart(struct ss7_msg *msg ) ;
#line 120
void ss7_msg_userpart_len(struct ss7_msg *msg , int len ) ;
#line 217 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.h"
int isup_receive(struct ss7 *ss7 , struct mtp2 *link , struct routing_label *rl ,
                 unsigned char *buf , int len ) ;
#line 219
int isup_dump(struct ss7 *ss7 , struct mtp2 *link , unsigned char *buf , int len ) ;
#line 72 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.h"
int mtp3_transmit(struct ss7 *ss7 , unsigned char userpart , unsigned char sls , struct ss7_msg *m ) ;
#line 80
unsigned char ansi_sls_next(struct ss7 *ss7 ) ;
#line 82
int set_routinglabel(unsigned char *sif , struct routing_label *rl ) ;
#line 61 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int iam_params[7]  = {      6,      7,      9,      2, 
        4,      10,      -1};
#line 64 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int ansi_iam_params[14]  = 
#line 64
  {      6,      7,      9,      29, 
        4,      10,      235,      234, 
        192,      193,      199,      196, 
        228,      -1};
#line 70 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int acm_params[2]  = {      17,      -1};
#line 72 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int faa_params[3]  = {      24,      1,      -1};
#line 74 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int far_params[3]  = {      24,      1,      -1};
#line 76 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int anm_params[1]  = {      -1};
#line 78 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int con_params[2]  = {      17,      -1};
#line 80 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int rel_params[2]  = {      18,      -1};
#line 82 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int greset_params[2]  = {      22,      -1};
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cot_params[2]  = {      16,      -1};
#line 86 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cpg_params[2]  = {      36,      -1};
#line 88 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cicgroup_params[3]  = {      21,      22,      -1};
#line 90 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cqr_params[3]  = {      22,      38,      -1};
#line 92 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int empty_params[1]  = {      -1};
#line 94 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct message_data messages[29]  = 
#line 94
  {      {1, 4, 1, 1, iam_params}, 
        {6, 1, 0, 1, acm_params}, 
        {9, 0, 0, 1, anm_params}, 
        {7, 1, 0, 1, con_params}, 
        {12, 0, 1, 1, rel_params}, 
        {16, 0, 0, 1, empty_params}, 
        {23, 0, 1, 0, greset_params}, 
        {41, 0, 1, 0, greset_params}, 
        {24, 1, 1, 0, cicgroup_params}, 
        {25, 1, 1, 0, cicgroup_params}, 
        {26, 1, 1, 0, cicgroup_params}, 
        {27, 1, 1, 0, cicgroup_params}, 
        {5, 1, 0, 0, cot_params}, 
        {17, 0, 0, 0, empty_params}, 
        {19, 0, 0, 0, empty_params}, 
        {36, 0, 0, 0, empty_params}, 
        {20, 0, 0, 0, empty_params}, 
        {21, 0, 0, 0, empty_params}, 
        {22, 0, 0, 0, empty_params}, 
        {18, 0, 0, 0, empty_params}, 
        {235, 0, 0, 0, empty_params}, 
        {236, 0, 0, 0, empty_params}, 
        {44, 1, 0, 1, cpg_params}, 
        {46, 0, 0, 0, empty_params}, 
        {42, 0, 1, 0, greset_params}, 
        {43, 0, 2, 0, cqr_params}, 
        {32, 1, 0, 1, faa_params}, 
        {31, 1, 0, 1, far_params}, 
        {47, 0, 1, 0, rel_params}};
#line 132
static int isup_send_message(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                             int *parms___1 ) ;
#line 134 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char *message2str(unsigned char message ) 
{ 


  {
  {
#line 137
  if ((int )message == 1) {
#line 137
    goto case_1;
  }
#line 139
  if ((int )message == 6) {
#line 139
    goto case_6;
  }
#line 141
  if ((int )message == 9) {
#line 141
    goto case_9;
  }
#line 143
  if ((int )message == 12) {
#line 143
    goto case_12;
  }
#line 145
  if ((int )message == 16) {
#line 145
    goto case_16;
  }
#line 147
  if ((int )message == 23) {
#line 147
    goto case_23;
  }
#line 149
  if ((int )message == 41) {
#line 149
    goto case_41;
  }
#line 151
  if ((int )message == 5) {
#line 151
    goto case_5;
  }
#line 153
  if ((int )message == 17) {
#line 153
    goto case_17;
  }
#line 155
  if ((int )message == 19) {
#line 155
    goto case_19;
  }
#line 157
  if ((int )message == 20) {
#line 157
    goto case_20;
  }
#line 159
  if ((int )message == 21) {
#line 159
    goto case_21;
  }
#line 161
  if ((int )message == 22) {
#line 161
    goto case_22;
  }
#line 163
  if ((int )message == 24) {
#line 163
    goto case_24;
  }
#line 165
  if ((int )message == 25) {
#line 165
    goto case_25;
  }
#line 167
  if ((int )message == 26) {
#line 167
    goto case_26;
  }
#line 169
  if ((int )message == 27) {
#line 169
    goto case_27;
  }
#line 171
  if ((int )message == 18) {
#line 171
    goto case_18;
  }
#line 173
  if ((int )message == 44) {
#line 173
    goto case_44;
  }
#line 175
  if ((int )message == 46) {
#line 175
    goto case_46;
  }
#line 177
  if ((int )message == 36) {
#line 177
    goto case_36;
  }
#line 179
  if ((int )message == 32) {
#line 179
    goto case_32;
  }
#line 181
  if ((int )message == 31) {
#line 181
    goto case_31;
  }
#line 183
  if ((int )message == 33) {
#line 183
    goto case_33;
  }
#line 185
  if ((int )message == 236) {
#line 185
    goto case_236;
  }
#line 187
  if ((int )message == 235) {
#line 187
    goto case_235;
  }
#line 189
  if ((int )message == 47) {
#line 189
    goto case_47;
  }
#line 191
  goto switch_default;
  case_1: /* CIL Label */ 
#line 138
  return ((char *)"IAM");
  case_6: /* CIL Label */ 
#line 140
  return ((char *)"ACM");
  case_9: /* CIL Label */ 
#line 142
  return ((char *)"ANM");
  case_12: /* CIL Label */ 
#line 144
  return ((char *)"REL");
  case_16: /* CIL Label */ 
#line 146
  return ((char *)"RLC");
  case_23: /* CIL Label */ 
#line 148
  return ((char *)"GRS");
  case_41: /* CIL Label */ 
#line 150
  return ((char *)"GRA");
  case_5: /* CIL Label */ 
#line 152
  return ((char *)"COT");
  case_17: /* CIL Label */ 
#line 154
  return ((char *)"CCR");
  case_19: /* CIL Label */ 
#line 156
  return ((char *)"BLO");
  case_20: /* CIL Label */ 
#line 158
  return ((char *)"UBL");
  case_21: /* CIL Label */ 
#line 160
  return ((char *)"BLA");
  case_22: /* CIL Label */ 
#line 162
  return ((char *)"UBA");
  case_24: /* CIL Label */ 
#line 164
  return ((char *)"CGB");
  case_25: /* CIL Label */ 
#line 166
  return ((char *)"CGU");
  case_26: /* CIL Label */ 
#line 168
  return ((char *)"CGBA");
  case_27: /* CIL Label */ 
#line 170
  return ((char *)"CGUA");
  case_18: /* CIL Label */ 
#line 172
  return ((char *)"RSC");
  case_44: /* CIL Label */ 
#line 174
  return ((char *)"CPG");
  case_46: /* CIL Label */ 
#line 176
  return ((char *)"UCIC");
  case_36: /* CIL Label */ 
#line 178
  return ((char *)"LPA");
  case_32: /* CIL Label */ 
#line 180
  return ((char *)"FAA");
  case_31: /* CIL Label */ 
#line 182
  return ((char *)"FAR");
  case_33: /* CIL Label */ 
#line 184
  return ((char *)"FRJ");
  case_236: /* CIL Label */ 
#line 186
  return ((char *)"CVT");
  case_235: /* CIL Label */ 
#line 188
  return ((char *)"CVR");
  case_47: /* CIL Label */ 
#line 190
  return ((char *)"CFN");
  switch_default: /* CIL Label */ 
#line 192
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 196 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char char2digit(char localchar ) 
{ 


  {
  {
#line 199
  if ((int )localchar == 48) {
#line 199
    goto case_48;
  }
#line 201
  if ((int )localchar == 49) {
#line 201
    goto case_49;
  }
#line 203
  if ((int )localchar == 50) {
#line 203
    goto case_50;
  }
#line 205
  if ((int )localchar == 51) {
#line 205
    goto case_51;
  }
#line 207
  if ((int )localchar == 52) {
#line 207
    goto case_52;
  }
#line 209
  if ((int )localchar == 53) {
#line 209
    goto case_53;
  }
#line 211
  if ((int )localchar == 54) {
#line 211
    goto case_54;
  }
#line 213
  if ((int )localchar == 55) {
#line 213
    goto case_55;
  }
#line 215
  if ((int )localchar == 56) {
#line 215
    goto case_56;
  }
#line 217
  if ((int )localchar == 57) {
#line 217
    goto case_57;
  }
#line 219
  if ((int )localchar == 35) {
#line 219
    goto case_35;
  }
#line 221
  goto switch_default;
  case_48: /* CIL Label */ 
#line 200
  return ((char)0);
  case_49: /* CIL Label */ 
#line 202
  return ((char)1);
  case_50: /* CIL Label */ 
#line 204
  return ((char)2);
  case_51: /* CIL Label */ 
#line 206
  return ((char)3);
  case_52: /* CIL Label */ 
#line 208
  return ((char)4);
  case_53: /* CIL Label */ 
#line 210
  return ((char)5);
  case_54: /* CIL Label */ 
#line 212
  return ((char)6);
  case_55: /* CIL Label */ 
#line 214
  return ((char)7);
  case_56: /* CIL Label */ 
#line 216
  return ((char)8);
  case_57: /* CIL Label */ 
#line 218
  return ((char)9);
  case_35: /* CIL Label */ 
#line 220
  return ((char)15);
  switch_default: /* CIL Label */ 
#line 222
  return ((char)0);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 226 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char digit2char(unsigned char digit ) 
{ 


  {
  {
#line 229
  if (((int )digit & 15) == 0) {
#line 229
    goto case_0;
  }
#line 231
  if (((int )digit & 15) == 1) {
#line 231
    goto case_1;
  }
#line 233
  if (((int )digit & 15) == 2) {
#line 233
    goto case_2;
  }
#line 235
  if (((int )digit & 15) == 3) {
#line 235
    goto case_3;
  }
#line 237
  if (((int )digit & 15) == 4) {
#line 237
    goto case_4;
  }
#line 239
  if (((int )digit & 15) == 5) {
#line 239
    goto case_5;
  }
#line 241
  if (((int )digit & 15) == 6) {
#line 241
    goto case_6;
  }
#line 243
  if (((int )digit & 15) == 7) {
#line 243
    goto case_7;
  }
#line 245
  if (((int )digit & 15) == 8) {
#line 245
    goto case_8;
  }
#line 247
  if (((int )digit & 15) == 9) {
#line 247
    goto case_9;
  }
#line 249
  if (((int )digit & 15) == 15) {
#line 249
    goto case_15;
  }
#line 251
  goto switch_default;
  case_0: /* CIL Label */ 
#line 230
  return ((char )'0');
  case_1: /* CIL Label */ 
#line 232
  return ((char )'1');
  case_2: /* CIL Label */ 
#line 234
  return ((char )'2');
  case_3: /* CIL Label */ 
#line 236
  return ((char )'3');
  case_4: /* CIL Label */ 
#line 238
  return ((char )'4');
  case_5: /* CIL Label */ 
#line 240
  return ((char )'5');
  case_6: /* CIL Label */ 
#line 242
  return ((char )'6');
  case_7: /* CIL Label */ 
#line 244
  return ((char )'7');
  case_8: /* CIL Label */ 
#line 246
  return ((char )'8');
  case_9: /* CIL Label */ 
#line 248
  return ((char )'9');
  case_15: /* CIL Label */ 
#line 250
  return ((char )'#');
  switch_default: /* CIL Label */ 
#line 252
  return ((char)0);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 256 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_dump_buffer(struct ss7 *ss7 , unsigned char *data , int len ) 
{ 
  int i ;

  {
  {
#line 260
  ss7_message(ss7, (char *)"[");
#line 261
  i = 0;
  }
  {
#line 261
  while (1) {
    while_continue: /* CIL Label */ ;
#line 261
    if (! (i < len)) {
#line 261
      goto while_break;
    }
    {
#line 262
    ss7_message(ss7, (char *)"0x%x ", (int )*(data + i));
#line 261
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 264
  ss7_message(ss7, (char *)"]\n");
  }
#line 265
  return;
}
}
#line 267 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_get_number(char *dest , unsigned char *src , int srclen , int oddeven ) 
{ 
  int i ;
  int tmp ;

  {
#line 271
  if (oddeven < 2) {
#line 273
    i = 0;
    {
#line 273
    while (1) {
      while_continue: /* CIL Label */ ;
#line 273
      if (! (i < srclen * 2 - oddeven)) {
#line 273
        goto while_break;
      }
#line 274
      if (i % 2) {
#line 274
        tmp = 4;
      } else {
#line 274
        tmp = 0;
      }
      {
#line 274
      *(dest + i) = digit2char((unsigned char )((int )*(src + i / 2) >> tmp));
#line 273
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 277
    i = 0;
    {
#line 277
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 277
      if (! (i < srclen)) {
#line 277
        goto while_break___0;
      }
#line 278
      *(dest + i) = (char )*(src + i);
#line 277
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 280
  *(dest + i) = (char )'\000';
#line 281
  return;
}
}
#line 284 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_put_generic(unsigned char *dest , char *src , int *len ) 
{ 
  int i ;
  int numlen ;
  size_t tmp ;

  {
  {
#line 286
  i = 0;
#line 287
  tmp = strlen((char const   *)src);
#line 287
  numlen = (int )tmp;
#line 289
  *len = numlen;
  }
  {
#line 291
  while (1) {
    while_continue: /* CIL Label */ ;
#line 291
    if (! (i < numlen)) {
#line 291
      goto while_break;
    }
#line 292
    *(dest + i) = (unsigned char )*(src + i);
#line 293
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 295
  return;
}
}
#line 297 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_put_number(unsigned char *dest , char *src , int *len , int *oddeven ) 
{ 
  int i ;
  int numlen ;
  size_t tmp ;
  char tmp___0 ;
  char tmp___1 ;

  {
  {
#line 299
  i = 0;
#line 300
  tmp = strlen((char const   *)src);
#line 300
  numlen = (int )tmp;
  }
#line 302
  if (numlen % 2) {
#line 303
    *oddeven = 1;
#line 304
    *len = numlen / 2 + 1;
  } else {
#line 306
    *oddeven = 0;
#line 307
    *len = numlen / 2;
  }
  {
#line 310
  while (1) {
    while_continue: /* CIL Label */ ;
#line 310
    if (! (i < numlen)) {
#line 310
      goto while_break;
    }
#line 311
    if (! (i % 2)) {
      {
#line 312
      tmp___0 = char2digit(*(src + i));
#line 312
      *(dest + i / 2) = (unsigned char )((int )*(dest + i / 2) | ((int )tmp___0 & 15));
      }
    } else {
      {
#line 314
      tmp___1 = char2digit(*(src + i));
#line 314
      *(dest + i / 2) = (unsigned char )((int )*(dest + i / 2) | (((int )tmp___1 << 4) & 240));
      }
    }
#line 315
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 317
  return;
}
}
#line 319 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_transmit(struct ss7 *ss7 , struct isup_call *c ,
                                             int messagetype , unsigned char *parm ,
                                             int len ) 
{ 


  {
#line 321
  *(parm + 0) = (unsigned char)0;
#line 323
  if (c->cot_check_required) {
#line 324
    *(parm + 0) = (unsigned char )((int )*(parm + 0) | 4);
  }
#line 326
  return (1);
}
}
#line 329 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_receive(struct ss7 *ss7 , struct isup_call *c ,
                                            int messagetype , unsigned char *parm ,
                                            int len ) 
{ 
  unsigned char cci ;

  {
#line 331
  cci = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 333
  if ((int )cci == 1) {
#line 334
    c->cot_check_required = 1;
  } else {
#line 336
    c->cot_check_required = 0;
  }
#line 338
  return (1);
}
}
#line 341 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                         int len ) 
{ 
  unsigned char con ;
  char *continuity ;
  char const   *tmp ;

  {
  {
#line 343
  con = *(parm + 0);
#line 346
  ss7_message(ss7, (char *)"\t\t\tSatellites in connection: %d\n", (int )con & 3);
#line 347
  con = (unsigned char )((int )con >> 2);
  }
  {
#line 349
  if (((int )con & 3) == 0) {
#line 349
    goto case_0;
  }
#line 352
  if (((int )con & 3) == 1) {
#line 352
    goto case_1;
  }
#line 355
  if (((int )con & 3) == 2) {
#line 355
    goto case_2;
  }
#line 358
  if (((int )con & 3) == 3) {
#line 358
    goto case_3;
  }
#line 348
  goto switch_break;
  case_0: /* CIL Label */ 
#line 350
  continuity = (char *)"Check not required";
#line 351
  goto switch_break;
  case_1: /* CIL Label */ 
#line 353
  continuity = (char *)"Check required on this circuit";
#line 354
  goto switch_break;
  case_2: /* CIL Label */ 
#line 356
  continuity = (char *)"Check performed on a previous circuit";
#line 357
  goto switch_break;
  case_3: /* CIL Label */ 
#line 359
  continuity = (char *)"spare";
#line 360
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 362
  ss7_message(ss7, (char *)"\t\t\tContinuity Check: %s (%d)\n", continuity, (int )con & 3);
#line 363
  con = (unsigned char )((int )con >> 2);
#line 364
  con = (unsigned char )((int )con & 1);
  }
#line 366
  if (con) {
#line 366
    tmp = "included";
  } else {
#line 366
    tmp = "not included";
  }
  {
#line 366
  ss7_message(ss7, (char *)"\t\t\tOutgoing half echo control device: %s (%d)\n", tmp,
              (int )con);
  }
#line 368
  return (1);
}
}
#line 372 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 374
  *(parm + 0) = (unsigned char)96;
#line 375
  *(parm + 1) = (unsigned char)1;
#line 376
  return (2);
}
}
#line 379 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
#line 381
  return (2);
}
}
#line 384 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 
  char *cb_str ;
  char *hg_str ;
  char *kj_str ;
  char const   *tmp ;
  char const   *tmp___0 ;
  char const   *tmp___1 ;
  char const   *tmp___2 ;
  char const   *tmp___3 ;

  {
  {
#line 388
  if ((((int )*(parm + 0) >> 1) & 3) == 0) {
#line 388
    goto case_0;
  }
#line 391
  if ((((int )*(parm + 0) >> 1) & 3) == 1) {
#line 391
    goto case_1;
  }
#line 394
  if ((((int )*(parm + 0) >> 1) & 3) == 2) {
#line 394
    goto case_2;
  }
#line 397
  if ((((int )*(parm + 0) >> 1) & 3) == 3) {
#line 397
    goto case_3;
  }
#line 387
  goto switch_break;
  case_0: /* CIL Label */ 
#line 389
  cb_str = (char *)"no end-to-end";
#line 390
  goto switch_break;
  case_1: /* CIL Label */ 
#line 392
  cb_str = (char *)"pass-along";
#line 393
  goto switch_break;
  case_2: /* CIL Label */ 
#line 395
  cb_str = (char *)"SCCP";
#line 396
  goto switch_break;
  case_3: /* CIL Label */ 
#line 398
  cb_str = (char *)"pass-along and SCCP";
#line 399
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 403
  if ((((int )*(parm + 0) >> 6) & 3) == 0) {
#line 403
    goto case_0___0;
  }
#line 406
  if ((((int )*(parm + 0) >> 6) & 3) == 1) {
#line 406
    goto case_1___0;
  }
#line 409
  if ((((int )*(parm + 0) >> 6) & 3) == 2) {
#line 409
    goto case_2___0;
  }
#line 412
  if ((((int )*(parm + 0) >> 6) & 3) == 3) {
#line 412
    goto case_3___0;
  }
#line 402
  goto switch_break___0;
  case_0___0: /* CIL Label */ 
#line 404
  hg_str = (char *)"ISDN user part preferred all the way";
#line 405
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 407
  hg_str = (char *)"ISDN user part not preferred all the way";
#line 408
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 410
  hg_str = (char *)"ISDN user part required all the way";
#line 411
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 413
  hg_str = (char *)"spare";
#line 414
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 418
  if ((((int )*(parm + 1) >> 1) & 3) == 0) {
#line 418
    goto case_0___1;
  }
#line 421
  if ((((int )*(parm + 1) >> 1) & 3) == 1) {
#line 421
    goto case_1___1;
  }
#line 424
  if ((((int )*(parm + 1) >> 1) & 3) == 2) {
#line 424
    goto case_2___1;
  }
#line 427
  if ((((int )*(parm + 1) >> 1) & 3) == 3) {
#line 427
    goto case_3___1;
  }
#line 417
  goto switch_break___1;
  case_0___1: /* CIL Label */ 
#line 419
  kj_str = (char *)"no indication";
#line 420
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 422
  kj_str = (char *)"connectionless method available";
#line 423
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 425
  kj_str = (char *)"connection oriented method available";
#line 426
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 428
  kj_str = (char *)"connectionless and connection oriented method available";
#line 429
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
#line 432
  if ((int )*(parm + 0) & 1) {
#line 432
    tmp = "international";
  } else {
#line 432
    tmp = "national";
  }
  {
#line 432
  ss7_message(ss7, (char *)"\t\t\tNat/Intl Call Ind: call to be treated as a %s call (%d)\n",
              tmp, (int )*(parm + 0) & 1);
#line 433
  ss7_message(ss7, (char *)"\t\t\tEnd to End Method Ind: %s method(s) available (%d)\n",
              cb_str, ((int )*(parm + 0) >> 1) & 3);
  }
#line 434
  if (((int )*(parm + 0) >> 3) & 1) {
#line 434
    tmp___0 = "";
  } else {
#line 434
    tmp___0 = "no ";
  }
  {
#line 434
  ss7_message(ss7, (char *)"\t\t\tInterworking Ind: %sinterworking encountered (%d)\n",
              tmp___0, ((int )*(parm + 0) >> 3) & 1);
  }
#line 435
  if (((int )*(parm + 0) >> 4) & 1) {
#line 435
    tmp___1 = "";
  } else {
#line 435
    tmp___1 = "no ";
  }
  {
#line 435
  ss7_message(ss7, (char *)"\t\t\tEnd to End Info Ind: %send-to-end information available (%d)\n",
              tmp___1, ((int )*(parm + 0) >> 4) & 1);
  }
#line 436
  if (((int )*(parm + 0) >> 5) & 1) {
#line 436
    tmp___2 = "";
  } else {
#line 436
    tmp___2 = "not ";
  }
  {
#line 436
  ss7_message(ss7, (char *)"\t\t\tISDN User Part Ind: ISDN user part %sused all the way (%d)\n",
              tmp___2, ((int )*(parm + 0) >> 5) & 1);
#line 437
  ss7_message(ss7, (char *)"\t\t\tISDN User Part Pref Ind: %s (%d)\n", hg_str, ((int )*(parm + 0) >> 6) & 3);
  }
#line 438
  if ((int )*(parm + 1) & 1) {
#line 438
    tmp___3 = "ISDN";
  } else {
#line 438
    tmp___3 = "non-ISDN";
  }
  {
#line 438
  ss7_message(ss7, (char *)"\t\t\tISDN Access Ind: originating access %s (%d)\n",
              tmp___3, (int )*(parm + 1) & 1);
#line 439
  ss7_message(ss7, (char *)"\t\t\tSCCP Method Ind: %s (%d)\n", kj_str, ((int )*(parm + 1) >> 1) & 3);
  }
#line 440
  return (2);
}
}
#line 443 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 445
  c->calling_party_cat = *(parm + 0);
#line 446
  return (1);
}
}
#line 449 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 


  {
#line 451
  *(parm + 0) = (unsigned char)10;
#line 452
  return (1);
}
}
#line 455 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  char *cattype ;

  {
  {
#line 460
  if ((int )*(parm + 0) == 1) {
#line 460
    goto case_1;
  }
#line 463
  if ((int )*(parm + 0) == 2) {
#line 463
    goto case_2;
  }
#line 466
  if ((int )*(parm + 0) == 3) {
#line 466
    goto case_3;
  }
#line 469
  if ((int )*(parm + 0) == 4) {
#line 469
    goto case_4;
  }
#line 472
  if ((int )*(parm + 0) == 5) {
#line 472
    goto case_5;
  }
#line 475
  if ((int )*(parm + 0) == 9) {
#line 475
    goto case_9;
  }
#line 478
  if ((int )*(parm + 0) == 10) {
#line 478
    goto case_10;
  }
#line 481
  if ((int )*(parm + 0) == 11) {
#line 481
    goto case_11;
  }
#line 484
  if ((int )*(parm + 0) == 12) {
#line 484
    goto case_12;
  }
#line 487
  if ((int )*(parm + 0) == 13) {
#line 487
    goto case_13;
  }
#line 490
  if ((int )*(parm + 0) == 15) {
#line 490
    goto case_15;
  }
#line 493
  goto switch_default;
  case_1: /* CIL Label */ 
#line 461
  cattype = (char *)"Operator, French";
#line 462
  goto switch_break;
  case_2: /* CIL Label */ 
#line 464
  cattype = (char *)"Operator, English";
#line 465
  goto switch_break;
  case_3: /* CIL Label */ 
#line 467
  cattype = (char *)"Operator, German";
#line 468
  goto switch_break;
  case_4: /* CIL Label */ 
#line 470
  cattype = (char *)"Operator, Russian";
#line 471
  goto switch_break;
  case_5: /* CIL Label */ 
#line 473
  cattype = (char *)"Operator, Spanish";
#line 474
  goto switch_break;
  case_9: /* CIL Label */ 
#line 476
  cattype = (char *)"Reserved";
#line 477
  goto switch_break;
  case_10: /* CIL Label */ 
#line 479
  cattype = (char *)"Ordinary calling subscriber";
#line 480
  goto switch_break;
  case_11: /* CIL Label */ 
#line 482
  cattype = (char *)"Calling subscriber with priority";
#line 483
  goto switch_break;
  case_12: /* CIL Label */ 
#line 485
  cattype = (char *)"Data Call (voice band data)";
#line 486
  goto switch_break;
  case_13: /* CIL Label */ 
#line 488
  cattype = (char *)"Test Call";
#line 489
  goto switch_break;
  case_15: /* CIL Label */ 
#line 491
  cattype = (char *)"Payphone";
#line 492
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 494
  cattype = (char *)"Unknown";
#line 495
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 498
  ss7_message(ss7, (char *)"\t\t\tCategory: %s (%d)\n", cattype, (int )*(parm + 0));
  }
#line 499
  return (1);
}
}
#line 502 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int user_service_info_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 505
  return (len);
}
}
#line 508 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int user_service_info_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 


  {
#line 511
  *(parm + 0) = (unsigned char)144;
#line 513
  *(parm + 1) = (unsigned char)144;
#line 515
  *(parm + 2) = (unsigned char)162;
#line 517
  return (3);
}
}
#line 520 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_transmit(struct ss7 *ss7 , struct isup_call *c ,
                                             int messagetype , unsigned char *parm ,
                                             int len ) 
{ 


  {
#line 522
  if (ss7->switchtype != 1U) {
#line 523
    return (0);
  }
#line 525
  *(parm + 0) = (unsigned char)0;
#line 526
  return (1);
}
}
#line 529 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_receive(struct ss7 *ss7 , struct isup_call *c ,
                                            int messagetype , unsigned char *parm ,
                                            int len ) 
{ 


  {
#line 531
  c->transcap = (int )*(parm + 0) & 127;
#line 532
  return (1);
}
}
#line 535 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                         int len ) 
{ 
  char *type ;

  {
  {
#line 540
  if ((int )*(parm + 0) == 0) {
#line 540
    goto case_0;
  }
#line 543
  if ((int )*(parm + 0) == 1) {
#line 543
    goto case_1;
  }
#line 546
  if ((int )*(parm + 0) == 2) {
#line 546
    goto case_2;
  }
#line 549
  if ((int )*(parm + 0) == 4) {
#line 549
    goto case_4;
  }
#line 552
  if ((int )*(parm + 0) == 6) {
#line 552
    goto case_6;
  }
#line 555
  if ((int )*(parm + 0) == 7) {
#line 555
    goto case_7;
  }
#line 558
  if ((int )*(parm + 0) == 8) {
#line 558
    goto case_8;
  }
#line 561
  if ((int )*(parm + 0) == 9) {
#line 561
    goto case_9;
  }
#line 564
  if ((int )*(parm + 0) == 10) {
#line 564
    goto case_10;
  }
#line 567
  goto switch_default;
  case_0: /* CIL Label */ 
#line 541
  type = (char *)"Speech";
#line 542
  goto switch_break;
  case_1: /* CIL Label */ 
#line 544
  type = (char *)"Spare";
#line 545
  goto switch_break;
  case_2: /* CIL Label */ 
#line 547
  type = (char *)"64 kbit/s unrestricted";
#line 548
  goto switch_break;
  case_4: /* CIL Label */ 
#line 550
  type = (char *)"3.1 khz audio";
#line 551
  goto switch_break;
  case_6: /* CIL Label */ 
#line 553
  type = (char *)"64 kbit/s preferred";
#line 554
  goto switch_break;
  case_7: /* CIL Label */ 
#line 556
  type = (char *)"2 x 64 kbit/s unrestricted";
#line 557
  goto switch_break;
  case_8: /* CIL Label */ 
#line 559
  type = (char *)"384 kbit/s unrestricted";
#line 560
  goto switch_break;
  case_9: /* CIL Label */ 
#line 562
  type = (char *)"1536 kbit/s unrestricted";
#line 563
  goto switch_break;
  case_10: /* CIL Label */ 
#line 565
  type = (char *)"1920 kbit/s unrestricted";
#line 566
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 568
  type = (char *)"N x 64kbit/s unrestricted or possibly spare";
#line 569
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 571
  ss7_message(ss7, (char *)"\t\t\t%s (%d)\n", type, (int )*(parm + 0));
  }
#line 572
  return (1);
}
}
#line 575 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 577
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 578
  numbuf[0] = (char )'\000';
#line 578
  tmp = 1U;
  {
#line 578
  while (1) {
    while_continue: /* CIL Label */ ;
#line 578
    if (tmp >= 64U) {
#line 578
      goto while_break;
    }
#line 578
    numbuf[tmp] = (char)0;
#line 578
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 580
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 581
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 582
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 584
  isup_get_number(numbuf, parm + 2, len - 2, oddeven);
#line 586
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 588
  return (len);
}
}
#line 592 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 
  int odd ;

  {
#line 594
  odd = 0;
#line 596
  if ((int )*(parm + 0) & 128) {
#line 597
    odd = 1;
  }
  {
#line 599
  isup_get_number(c->called_party_num, parm + 2, len - 2, odd);
#line 601
  c->called_nai = (unsigned char )((int )*(parm + 0) & 127);
  }
#line 603
  return (len);
}
}
#line 606 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 
  int numlen ;
  int oddeven ;

  {
  {
#line 610
  isup_put_number(parm + 2, c->called_party_num, & numlen, & oddeven);
#line 612
  *(parm + 0) = (unsigned char )((int )c->called_nai & 127);
  }
#line 614
  if (oddeven) {
#line 615
    *(parm + 0) = (unsigned char )((int )*(parm + 0) | 128);
  }
#line 617
  *(parm + 1) = (unsigned char )(1 << 4);
#line 619
  return (numlen + 2);
}
}
#line 622 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 624
  c->called_party_status_ind = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 625
  return (2);
}
}
#line 628 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 


  {
#line 630
  *(parm + 0) = (unsigned char)64;
#line 631
  *(parm + 1) = (unsigned char)20;
#line 632
  return (2);
}
}
#line 635 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  unsigned char ba ;
  unsigned char dc ;
  unsigned char fe ;
  unsigned char hg ;
  unsigned char i ;
  unsigned char j ;
  unsigned char k ;
  unsigned char l ;
  unsigned char m ;
  unsigned char n ;
  unsigned char pq ;

  {
  {
#line 637
  ba = (unsigned char )((int )*(parm + 0) & 3);
#line 638
  dc = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 639
  fe = (unsigned char )(((int )*(parm + 0) >> 4) & 3);
#line 640
  hg = (unsigned char )(((int )*(parm + 0) >> 6) & 3);
#line 641
  i = (unsigned char )((int )*(parm + 1) & 1);
#line 642
  j = (unsigned char )(((int )*(parm + 1) >> 1) & 1);
#line 643
  k = (unsigned char )(((int )*(parm + 1) >> 2) & 1);
#line 644
  l = (unsigned char )(((int )*(parm + 1) >> 3) & 1);
#line 645
  m = (unsigned char )(((int )*(parm + 1) >> 4) & 1);
#line 646
  n = (unsigned char )(((int )*(parm + 1) >> 5) & 1);
#line 647
  pq = (unsigned char )(((int )*(parm + 1) >> 7) & 3);
#line 649
  ss7_message(ss7, (char *)"\t\t\tCharge indicator: %d\n", (int )ba);
#line 650
  ss7_message(ss7, (char *)"\t\t\tCalled party\'s status indicator: %d\n", (int )dc);
#line 651
  ss7_message(ss7, (char *)"\t\t\tCalled party\'s category indicator: %d\n", (int )fe);
#line 652
  ss7_message(ss7, (char *)"\t\t\tEnd to End method indicator: %d\n", (int )hg);
#line 653
  ss7_message(ss7, (char *)"\t\t\tInterworking indicator: %d\n", (int )i);
#line 654
  ss7_message(ss7, (char *)"\t\t\tEnd to End information indicator: %d\n", (int )j);
#line 655
  ss7_message(ss7, (char *)"\t\t\tISDN user part indicator: %d\n", (int )k);
#line 656
  ss7_message(ss7, (char *)"\t\t\tHolding indicator: %d\n", (int )l);
#line 657
  ss7_message(ss7, (char *)"\t\t\tISDN access indicator: %d\n", (int )m);
#line 658
  ss7_message(ss7, (char *)"\t\t\tEcho control device indicator: %d\n", (int )n);
#line 659
  ss7_message(ss7, (char *)"\t\t\tSCCP method indicator: %d\n", (int )pq);
  }
#line 661
  return (2);
}
}
#line 664 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int opt_backward_call_ind_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 666
  return (1);
}
}
#line 669 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int opt_backward_call_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  unsigned char a ;
  unsigned char b ;
  unsigned char c ;
  unsigned char d ;

  {
  {
#line 672
  a = (unsigned char )((int )*(parm + 0) & 1);
#line 673
  b = (unsigned char )(((int )*(parm + 0) >> 1) & 1);
#line 674
  c = (unsigned char )(((int )*(parm + 0) >> 2) & 1);
#line 675
  d = (unsigned char )(((int )*(parm + 0) >> 3) & 1);
#line 677
  ss7_message(ss7, (char *)"\t\t\tIn-band information indicator: %d\n", (int )a);
#line 678
  ss7_message(ss7, (char *)"\t\t\tCall diversion may occur indicator: %d\n", (int )b);
#line 679
  ss7_message(ss7, (char *)"\t\t\tSimple segmentation indicator: %d\n", (int )c);
#line 680
  ss7_message(ss7, (char *)"\t\t\tMLPP user indicator: %d\n", (int )d);
  }
#line 681
  return (1);
}
}
#line 684 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                         unsigned char *parm , int len ) 
{ 


  {
#line 686
  c->causeloc = (int )*(parm + 0) & 15;
#line 687
  c->causecode = ((int )*(parm + 0) & 96) >> 5;
#line 688
  c->cause = (int )*(parm + 1) & 127;
#line 690
  return (len);
}
}
#line 693 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                          unsigned char *parm , int len ) 
{ 


  {
#line 695
  *(parm + 0) = (unsigned char )((128 | (c->causecode << 5)) | c->causeloc);
#line 696
  *(parm + 1) = (unsigned char )(128 | c->cause);
#line 697
  return (2);
}
}
#line 700 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm , int len ) 
{ 
  char *cause ;

  {
  {
#line 704
  if (((int )*(parm + 1) & 127) == 1) {
#line 704
    goto case_1;
  }
#line 707
  if (((int )*(parm + 1) & 127) == 2) {
#line 707
    goto case_2;
  }
#line 710
  if (((int )*(parm + 1) & 127) == 3) {
#line 710
    goto case_3;
  }
#line 713
  if (((int )*(parm + 1) & 127) == 4) {
#line 713
    goto case_4;
  }
#line 716
  if (((int )*(parm + 1) & 127) == 5) {
#line 716
    goto case_5;
  }
#line 719
  if (((int )*(parm + 1) & 127) == 6) {
#line 719
    goto case_6;
  }
#line 722
  if (((int )*(parm + 1) & 127) == 7) {
#line 722
    goto case_7;
  }
#line 725
  if (((int )*(parm + 1) & 127) == 8) {
#line 725
    goto case_8;
  }
#line 728
  if (((int )*(parm + 1) & 127) == 9) {
#line 728
    goto case_9;
  }
#line 731
  if (((int )*(parm + 1) & 127) == 16) {
#line 731
    goto case_16;
  }
#line 734
  if (((int )*(parm + 1) & 127) == 17) {
#line 734
    goto case_17;
  }
#line 737
  if (((int )*(parm + 1) & 127) == 18) {
#line 737
    goto case_18;
  }
#line 740
  if (((int )*(parm + 1) & 127) == 19) {
#line 740
    goto case_19;
  }
#line 743
  if (((int )*(parm + 1) & 127) == 20) {
#line 743
    goto case_20;
  }
#line 746
  if (((int )*(parm + 1) & 127) == 21) {
#line 746
    goto case_21;
  }
#line 749
  if (((int )*(parm + 1) & 127) == 22) {
#line 749
    goto case_22;
  }
#line 752
  if (((int )*(parm + 1) & 127) == 23) {
#line 752
    goto case_23;
  }
#line 755
  if (((int )*(parm + 1) & 127) == 25) {
#line 755
    goto case_25;
  }
#line 758
  if (((int )*(parm + 1) & 127) == 26) {
#line 758
    goto case_26;
  }
#line 761
  if (((int )*(parm + 1) & 127) == 27) {
#line 761
    goto case_27;
  }
#line 764
  if (((int )*(parm + 1) & 127) == 28) {
#line 764
    goto case_28;
  }
#line 767
  if (((int )*(parm + 1) & 127) == 29) {
#line 767
    goto case_29;
  }
#line 770
  if (((int )*(parm + 1) & 127) == 30) {
#line 770
    goto case_30;
  }
#line 773
  if (((int )*(parm + 1) & 127) == 31) {
#line 773
    goto case_31;
  }
#line 776
  if (((int )*(parm + 1) & 127) == 34) {
#line 776
    goto case_34;
  }
#line 779
  if (((int )*(parm + 1) & 127) == 38) {
#line 779
    goto case_38;
  }
#line 782
  if (((int )*(parm + 1) & 127) == 39) {
#line 782
    goto case_39;
  }
#line 785
  if (((int )*(parm + 1) & 127) == 40) {
#line 785
    goto case_40;
  }
#line 788
  if (((int )*(parm + 1) & 127) == 41) {
#line 788
    goto case_41;
  }
#line 791
  if (((int )*(parm + 1) & 127) == 42) {
#line 791
    goto case_42;
  }
#line 795
  goto switch_default;
  case_1: /* CIL Label */ 
#line 705
  cause = (char *)"Unallocated (unassigned) number";
#line 706
  goto switch_break;
  case_2: /* CIL Label */ 
#line 708
  cause = (char *)"No route to specified transit network";
#line 709
  goto switch_break;
  case_3: /* CIL Label */ 
#line 711
  cause = (char *)"No route to destination";
#line 712
  goto switch_break;
  case_4: /* CIL Label */ 
#line 714
  cause = (char *)"Send special information tone";
#line 715
  goto switch_break;
  case_5: /* CIL Label */ 
#line 717
  cause = (char *)"Misdialled trunk prefix";
#line 718
  goto switch_break;
  case_6: /* CIL Label */ 
#line 720
  cause = (char *)"Channel unacceptable";
#line 721
  goto switch_break;
  case_7: /* CIL Label */ 
#line 723
  cause = (char *)"Call awarded and being delivered in an established channel";
#line 724
  goto switch_break;
  case_8: /* CIL Label */ 
#line 726
  cause = (char *)"Preemption";
#line 727
  goto switch_break;
  case_9: /* CIL Label */ 
#line 729
  cause = (char *)"Preemption - circuit reserved for reuse";
#line 730
  goto switch_break;
  case_16: /* CIL Label */ 
#line 732
  cause = (char *)"Normal call clearing";
#line 733
  goto switch_break;
  case_17: /* CIL Label */ 
#line 735
  cause = (char *)"User busy";
#line 736
  goto switch_break;
  case_18: /* CIL Label */ 
#line 738
  cause = (char *)"No user responding";
#line 739
  goto switch_break;
  case_19: /* CIL Label */ 
#line 741
  cause = (char *)"No answer from user (user alerted)";
#line 742
  goto switch_break;
  case_20: /* CIL Label */ 
#line 744
  cause = (char *)"Subscriber absent";
#line 745
  goto switch_break;
  case_21: /* CIL Label */ 
#line 747
  cause = (char *)"Call rejected";
#line 748
  goto switch_break;
  case_22: /* CIL Label */ 
#line 750
  cause = (char *)"Number changed";
#line 751
  goto switch_break;
  case_23: /* CIL Label */ 
#line 753
  cause = (char *)"Redirection to new destination";
#line 754
  goto switch_break;
  case_25: /* CIL Label */ 
#line 756
  cause = (char *)"Exchange routing error";
#line 757
  goto switch_break;
  case_26: /* CIL Label */ 
#line 759
  cause = (char *)"Non-selected user clearing";
#line 760
  goto switch_break;
  case_27: /* CIL Label */ 
#line 762
  cause = (char *)"Destination out of order";
#line 763
  goto switch_break;
  case_28: /* CIL Label */ 
#line 765
  cause = (char *)"Invalid number format (address incomplete)";
#line 766
  goto switch_break;
  case_29: /* CIL Label */ 
#line 768
  cause = (char *)"Facility rejected";
#line 769
  goto switch_break;
  case_30: /* CIL Label */ 
#line 771
  cause = (char *)"Response to STATUS ENQUIRY";
#line 772
  goto switch_break;
  case_31: /* CIL Label */ 
#line 774
  cause = (char *)"Normal, unspecified";
#line 775
  goto switch_break;
  case_34: /* CIL Label */ 
#line 777
  cause = (char *)"No circuit/channel available";
#line 778
  goto switch_break;
  case_38: /* CIL Label */ 
#line 780
  cause = (char *)"Network out of order";
#line 781
  goto switch_break;
  case_39: /* CIL Label */ 
#line 783
  cause = (char *)"Permanent frame mode connection out of service";
#line 784
  goto switch_break;
  case_40: /* CIL Label */ 
#line 786
  cause = (char *)"Permanent frame mode connection operational";
#line 787
  goto switch_break;
  case_41: /* CIL Label */ 
#line 789
  cause = (char *)"Temporary failure";
#line 790
  goto switch_break;
  case_42: /* CIL Label */ 
#line 792
  cause = (char *)"Switching equipment congestion";
#line 793
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 796
  cause = (char *)"Unknown";
  switch_break: /* CIL Label */ ;
  }
  {
#line 798
  ss7_message(ss7, (char *)"\t\t\tCoding Standard: %d\n", ((int )*(parm + 0) >> 5) & 3);
#line 799
  ss7_message(ss7, (char *)"\t\t\tLocation: %d\n", (int )*(parm + 0) & 15);
#line 800
  ss7_message(ss7, (char *)"\t\t\tCause Class: %d\n", ((int )*(parm + 1) >> 4) & 7);
#line 801
  ss7_message(ss7, (char *)"\t\t\tCause Subclass: %d\n", (int )*(parm + 1) & 15);
#line 802
  ss7_message(ss7, (char *)"\t\t\tCause: %s (%d)\n", cause, (int )*(parm + 1) & 127);
  }
#line 804
  return (len);
}
}
#line 808 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 


  {
  {
#line 810
  ss7_message(ss7, (char *)"\t\t\tRange: %d\n", (int )*(parm + 0) & 255);
  }
#line 811
  return (len);
}
}
#line 814 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 
  int i ;
  int numcics ;

  {
#line 819
  c->range = (int )*(parm + 0);
#line 820
  numcics = c->range + 1;
#line 823
  if (messagetype == 43) {
#line 824
    return (len);
  } else
#line 823
  if (messagetype == 42) {
#line 824
    return (len);
  } else
#line 823
  if (messagetype == 23) {
#line 824
    return (len);
  }
#line 826
  i = 0;
  {
#line 826
  while (1) {
    while_continue: /* CIL Label */ ;
#line 826
    if (! (i < numcics)) {
#line 826
      goto while_break;
    }
#line 827
    if ((int )*(parm + (1 + i / 8)) & (1 << i % 8)) {
#line 828
      c->status[i] = (unsigned char)1;
    } else {
#line 830
      c->status[i] = (unsigned char)0;
    }
#line 826
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 833
  return (len);
}
}
#line 836 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 
  int i ;
  int statuslen ;
  int numcics ;

  {
#line 838
  statuslen = 0;
#line 839
  numcics = c->range + 1;
#line 841
  *(parm + 0) = (unsigned char )(c->range & 255);
#line 844
  if (messagetype == 43) {
#line 845
    return (1);
  } else
#line 844
  if (messagetype == 42) {
#line 845
    return (1);
  } else
#line 844
  if (messagetype == 23) {
#line 845
    return (1);
  }
#line 847
  statuslen = numcics / 8 + ! (! (numcics % 8));
#line 849
  if (messagetype == 41) {
#line 850
    i = 0;
    {
#line 850
    while (1) {
      while_continue: /* CIL Label */ ;
#line 850
      if (! (i < statuslen)) {
#line 850
        goto while_break;
      }
#line 851
      *(parm + (1 + i)) = (unsigned char)0;
#line 850
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 854
    i = 0;
    {
#line 854
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 854
      if (! (i < numcics)) {
#line 854
        goto while_break___0;
      }
#line 855
      if (c->status[i]) {
#line 856
        *(parm + (1 + i / 8)) = (unsigned char )((int )*(parm + (1 + i / 8)) | (1 << i % 8));
      }
#line 854
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 860
  return (statuslen + 1);
}
}
#line 863 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 865
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 866
  numbuf[0] = (char )'\000';
#line 866
  tmp = 1U;
  {
#line 866
  while (1) {
    while_continue: /* CIL Label */ ;
#line 866
    if (tmp >= 64U) {
#line 866
      goto while_break;
    }
#line 866
    numbuf[tmp] = (char)0;
#line 866
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 868
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 869
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 870
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 871
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 872
  ss7_message(ss7, (char *)"\t\t\tScreening: %x\n", (int )*(parm + 1) & 3);
#line 874
  isup_get_number(numbuf, parm + 2, len - 2, oddeven);
#line 876
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 878
  return (len);
}
}
#line 881 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 883
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 885
  isup_get_number(c->calling_party_num, parm + 2, len - 2, oddeven);
#line 887
  c->calling_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 888
  c->presentation_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 889
  c->screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 891
  return (len);
}
}
#line 895 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 899
  if (! c->calling_party_num[0]) {
#line 900
    return (0);
  }
  {
#line 902
  isup_put_number(parm + 2, c->calling_party_num, & datalen, & oddeven);
#line 904
  *(parm + 0) = (unsigned char )((oddeven << 7) | (int )c->calling_nai);
#line 905
  *(parm + 1) = (unsigned char )(((1 << 4) | (((int )c->presentation_ind & 3) << 2)) | ((int )c->screening_ind & 3));
  }
#line 909
  return (datalen + 2);
}
}
#line 912 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                             int len ) 
{ 
  char *name ;

  {
  {
#line 917
  if ((int )*(parm + 0) == 0) {
#line 917
    goto case_0;
  }
#line 920
  if ((int )*(parm + 0) == 1) {
#line 920
    goto case_1;
  }
#line 923
  if ((int )*(parm + 0) == 2) {
#line 923
    goto case_2;
  }
#line 928
  if ((int )*(parm + 0) == 5) {
#line 928
    goto case_5;
  }
#line 928
  if ((int )*(parm + 0) == 4) {
#line 928
    goto case_5;
  }
#line 928
  if ((int )*(parm + 0) == 3) {
#line 928
    goto case_5;
  }
#line 931
  if ((int )*(parm + 0) == 6) {
#line 931
    goto case_6;
  }
#line 934
  if ((int )*(parm + 0) == 7) {
#line 934
    goto case_7;
  }
#line 938
  if ((int )*(parm + 0) == 9) {
#line 938
    goto case_9;
  }
#line 938
  if ((int )*(parm + 0) == 8) {
#line 938
    goto case_9;
  }
#line 941
  if ((int )*(parm + 0) == 10) {
#line 941
    goto case_10;
  }
#line 944
  if ((int )*(parm + 0) == 11) {
#line 944
    goto case_11;
  }
#line 954
  if ((int )*(parm + 0) == 19) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 18) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 17) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 16) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 15) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 14) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 13) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 12) {
#line 954
    goto case_19;
  }
#line 957
  if ((int )*(parm + 0) == 20) {
#line 957
    goto case_20;
  }
#line 961
  if ((int )*(parm + 0) == 22) {
#line 961
    goto case_22;
  }
#line 961
  if ((int )*(parm + 0) == 21) {
#line 961
    goto case_22;
  }
#line 964
  if ((int )*(parm + 0) == 23) {
#line 964
    goto case_23;
  }
#line 968
  if ((int )*(parm + 0) == 25) {
#line 968
    goto case_25;
  }
#line 968
  if ((int )*(parm + 0) == 24) {
#line 968
    goto case_25;
  }
#line 971
  if ((int )*(parm + 0) == 26) {
#line 971
    goto case_26;
  }
#line 974
  if ((int )*(parm + 0) == 27) {
#line 974
    goto case_27;
  }
#line 977
  if ((int )*(parm + 0) == 28) {
#line 977
    goto case_28;
  }
#line 980
  if ((int )*(parm + 0) == 29) {
#line 980
    goto case_29;
  }
#line 985
  if ((int )*(parm + 0) == 32) {
#line 985
    goto case_32;
  }
#line 985
  if ((int )*(parm + 0) == 31) {
#line 985
    goto case_32;
  }
#line 985
  if ((int )*(parm + 0) == 30) {
#line 985
    goto case_32;
  }
#line 988
  if ((int )*(parm + 0) == 33) {
#line 988
    goto case_33;
  }
#line 991
  if ((int )*(parm + 0) == 34) {
#line 991
    goto case_34;
  }
#line 998
  if ((int )*(parm + 0) == 39) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 38) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 37) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 36) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 35) {
#line 998
    goto case_39;
  }
#line 1010
  if ((int )*(parm + 0) == 49) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 48) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 47) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 46) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 45) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 44) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 43) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 42) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 41) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 40) {
#line 1010
    goto case_49;
  }
#line 1014
  if ((int )*(parm + 0) == 51) {
#line 1014
    goto case_51;
  }
#line 1014
  if ((int )*(parm + 0) == 50) {
#line 1014
    goto case_51;
  }
#line 1017
  if ((int )*(parm + 0) == 52) {
#line 1017
    goto case_52;
  }
#line 1026
  if ((int )*(parm + 0) == 59) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 58) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 57) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 56) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 55) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 54) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 53) {
#line 1026
    goto case_59;
  }
#line 1029
  if ((int )*(parm + 0) == 60) {
#line 1029
    goto case_60;
  }
#line 1032
  if ((int )*(parm + 0) == 61) {
#line 1032
    goto case_61;
  }
#line 1035
  if ((int )*(parm + 0) == 62) {
#line 1035
    goto case_62;
  }
#line 1038
  if ((int )*(parm + 0) == 63) {
#line 1038
    goto case_63;
  }
#line 1042
  if ((int )*(parm + 0) == 65) {
#line 1042
    goto case_65;
  }
#line 1042
  if ((int )*(parm + 0) == 64) {
#line 1042
    goto case_65;
  }
#line 1045
  if ((int )*(parm + 0) == 66) {
#line 1045
    goto case_66;
  }
#line 1048
  if ((int )*(parm + 0) == 67) {
#line 1048
    goto case_67;
  }
#line 1052
  if ((int )*(parm + 0) == 69) {
#line 1052
    goto case_69;
  }
#line 1052
  if ((int )*(parm + 0) == 68) {
#line 1052
    goto case_69;
  }
#line 1055
  if ((int )*(parm + 0) == 70) {
#line 1055
    goto case_70;
  }
#line 1066
  if ((int )*(parm + 0) == 79) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 78) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 77) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 76) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 75) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 74) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 73) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 72) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 71) {
#line 1066
    goto case_79;
  }
#line 1078
  if ((int )*(parm + 0) == 89) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 88) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 87) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 86) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 85) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 84) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 83) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 82) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 81) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 80) {
#line 1078
    goto case_89;
  }
#line 1083
  if ((int )*(parm + 0) == 92) {
#line 1083
    goto case_92;
  }
#line 1083
  if ((int )*(parm + 0) == 91) {
#line 1083
    goto case_92;
  }
#line 1083
  if ((int )*(parm + 0) == 90) {
#line 1083
    goto case_92;
  }
#line 1086
  if ((int )*(parm + 0) == 93) {
#line 1086
    goto case_93;
  }
#line 1094
  if ((int )*(parm + 0) == 99) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 98) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 97) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 96) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 95) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 94) {
#line 1094
    goto case_99;
  }
#line 1098
  goto switch_default;
  case_0: /* CIL Label */ 
#line 918
  name = (char *)" Plain Old Telephone Service POTS";
#line 919
  goto switch_break;
  case_1: /* CIL Label */ 
#line 921
  name = (char *)" Multiparty line";
#line 922
  goto switch_break;
  case_2: /* CIL Label */ 
#line 924
  name = (char *)" ANI Failure";
#line 925
  goto switch_break;
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
  case_3: /* CIL Label */ 
#line 929
  name = (char *)" Unassigned";
#line 930
  goto switch_break;
  case_6: /* CIL Label */ 
#line 932
  name = (char *)" Station Level Rating";
#line 933
  goto switch_break;
  case_7: /* CIL Label */ 
#line 935
  name = (char *)" Special Operator Handling Required";
#line 936
  goto switch_break;
  case_9: /* CIL Label */ 
  case_8: /* CIL Label */ 
#line 939
  name = (char *)"Unassigned";
#line 940
  goto switch_break;
  case_10: /* CIL Label */ 
#line 942
  name = (char *)"Not assignable";
#line 943
  goto switch_break;
  case_11: /* CIL Label */ 
#line 945
  name = (char *)"Unassigned";
#line 946
  goto switch_break;
  case_19: /* CIL Label */ 
  case_18: /* CIL Label */ 
  case_17: /* CIL Label */ 
  case_16: /* CIL Label */ 
  case_15: /* CIL Label */ 
  case_14: /* CIL Label */ 
  case_13: /* CIL Label */ 
  case_12: /* CIL Label */ 
#line 955
  name = (char *)"Not assignable";
#line 956
  goto switch_break;
  case_20: /* CIL Label */ 
#line 958
  name = (char *)"Automatic Identified Outward Dialing";
#line 959
  goto switch_break;
  case_22: /* CIL Label */ 
  case_21: /* CIL Label */ 
#line 962
  name = (char *)"Unassigned";
#line 963
  goto switch_break;
  case_23: /* CIL Label */ 
#line 965
  name = (char *)"Coin or Non-Coin";
#line 966
  goto switch_break;
  case_25: /* CIL Label */ 
  case_24: /* CIL Label */ 
#line 969
  name = (char *)"Toll Free Service translated to POTS";
#line 970
  goto switch_break;
  case_26: /* CIL Label */ 
#line 972
  name = (char *)"Unassigned";
#line 973
  goto switch_break;
  case_27: /* CIL Label */ 
#line 975
  name = (char *)"Pay Station using Coin Control Signalling";
#line 976
  goto switch_break;
  case_28: /* CIL Label */ 
#line 978
  name = (char *)"Unassigned";
#line 979
  goto switch_break;
  case_29: /* CIL Label */ 
#line 981
  name = (char *)"Prison/Inmate Service";
#line 982
  goto switch_break;
  case_32: /* CIL Label */ 
  case_31: /* CIL Label */ 
  case_30: /* CIL Label */ 
#line 986
  name = (char *)"Intercept";
#line 987
  goto switch_break;
  case_33: /* CIL Label */ 
#line 989
  name = (char *)"Unassigned";
#line 990
  goto switch_break;
  case_34: /* CIL Label */ 
#line 992
  name = (char *)"Telco Operator Handled Call";
#line 993
  goto switch_break;
  case_39: /* CIL Label */ 
  case_38: /* CIL Label */ 
  case_37: /* CIL Label */ 
  case_36: /* CIL Label */ 
  case_35: /* CIL Label */ 
#line 999
  name = (char *)"Unassigned";
#line 1000
  goto switch_break;
  case_49: /* CIL Label */ 
  case_48: /* CIL Label */ 
  case_47: /* CIL Label */ 
  case_46: /* CIL Label */ 
  case_45: /* CIL Label */ 
  case_44: /* CIL Label */ 
  case_43: /* CIL Label */ 
  case_42: /* CIL Label */ 
  case_41: /* CIL Label */ 
  case_40: /* CIL Label */ 
#line 1011
  name = (char *)"Unrestricted Use - locally determined by carrier";
#line 1012
  goto switch_break;
  case_51: /* CIL Label */ 
  case_50: /* CIL Label */ 
#line 1015
  name = (char *)"Unassigned";
#line 1016
  goto switch_break;
  case_52: /* CIL Label */ 
#line 1018
  name = (char *)"OUTWATS";
#line 1019
  goto switch_break;
  case_59: /* CIL Label */ 
  case_58: /* CIL Label */ 
  case_57: /* CIL Label */ 
  case_56: /* CIL Label */ 
  case_55: /* CIL Label */ 
  case_54: /* CIL Label */ 
  case_53: /* CIL Label */ 
#line 1027
  name = (char *)"Unassigned";
#line 1028
  goto switch_break;
  case_60: /* CIL Label */ 
#line 1030
  name = (char *)"TRS Unrestricted Line";
#line 1031
  goto switch_break;
  case_61: /* CIL Label */ 
#line 1033
  name = (char *)"Cellular Wireless PCS Type 1";
#line 1034
  goto switch_break;
  case_62: /* CIL Label */ 
#line 1036
  name = (char *)"Cellular Wireless PCS Type 2";
#line 1037
  goto switch_break;
  case_63: /* CIL Label */ 
#line 1039
  name = (char *)"Cellular Wireless PCS Roaming";
#line 1040
  goto switch_break;
  case_65: /* CIL Label */ 
  case_64: /* CIL Label */ 
#line 1043
  name = (char *)"Unassigned";
#line 1044
  goto switch_break;
  case_66: /* CIL Label */ 
#line 1046
  name = (char *)"TRS Hotel Motel";
#line 1047
  goto switch_break;
  case_67: /* CIL Label */ 
#line 1049
  name = (char *)"TRS Restricted Line";
#line 1050
  goto switch_break;
  case_69: /* CIL Label */ 
  case_68: /* CIL Label */ 
#line 1053
  name = (char *)"Unassigned";
#line 1054
  goto switch_break;
  case_70: /* CIL Label */ 
#line 1056
  name = (char *)"Pay Station No network Coin Control Signalling";
#line 1057
  goto switch_break;
  case_79: /* CIL Label */ 
  case_78: /* CIL Label */ 
  case_77: /* CIL Label */ 
  case_76: /* CIL Label */ 
  case_75: /* CIL Label */ 
  case_74: /* CIL Label */ 
  case_73: /* CIL Label */ 
  case_72: /* CIL Label */ 
  case_71: /* CIL Label */ 
#line 1067
  name = (char *)"Unassigned";
#line 1068
  goto switch_break;
  case_89: /* CIL Label */ 
  case_88: /* CIL Label */ 
  case_87: /* CIL Label */ 
  case_86: /* CIL Label */ 
  case_85: /* CIL Label */ 
  case_84: /* CIL Label */ 
  case_83: /* CIL Label */ 
  case_82: /* CIL Label */ 
  case_81: /* CIL Label */ 
  case_80: /* CIL Label */ 
#line 1079
  name = (char *)"Reserved";
#line 1080
  goto switch_break;
  case_92: /* CIL Label */ 
  case_91: /* CIL Label */ 
  case_90: /* CIL Label */ 
#line 1084
  name = (char *)"Unassigned";
#line 1085
  goto switch_break;
  case_93: /* CIL Label */ 
#line 1087
  name = (char *)"Private Virtual Network Type of service call";
#line 1088
  goto switch_break;
  case_99: /* CIL Label */ 
  case_98: /* CIL Label */ 
  case_97: /* CIL Label */ 
  case_96: /* CIL Label */ 
  case_95: /* CIL Label */ 
  case_94: /* CIL Label */ 
#line 1095
  name = (char *)"Unassigned";
#line 1096
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1099
  name = (char *)"Unknown to Asterisk ";
  switch_break: /* CIL Label */ ;
  }
  {
#line 1101
  ss7_message(ss7, (char *)"\t\t\tLine info code: %s (%d)\n", name, (int )*(parm + 0));
  }
#line 1103
  return (1);
}
}
#line 1106 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_receive(struct ss7 *ss7 , struct isup_call *c ,
                                                int messagetype , unsigned char *parm ,
                                                int len ) 
{ 


  {
#line 1108
  c->oli_ani2 = (int )*(parm + 0);
#line 1110
  return (1);
}
}
#line 1113 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_transmit(struct ss7 *ss7 , struct isup_call *c ,
                                                 int messagetype , unsigned char *parm ,
                                                 int len ) 
{ 


  {
#line 1115
  if (c->oli_ani2 < 0) {
#line 1116
    return (0);
  } else
#line 1117
  if (c->oli_ani2 < 99) {
#line 1118
    *(parm + 0) = (unsigned char )c->oli_ani2;
#line 1119
    return (1);
  } else {
#line 1121
    *(parm + 0) = (unsigned char)0;
#line 1122
    return (1);
  }
}
}
#line 1126 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                       int len ) 
{ 


  {
#line 1128
  return (len);
}
}
#line 1131 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_receive(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 


  {
#line 1133
  return (len);
}
}
#line 1136 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_transmit(struct ss7 *ss7 , struct isup_call *c ,
                                           int messagetype , unsigned char *parm ,
                                           int len ) 
{ 


  {
#line 1138
  *(parm + 0) = (unsigned char)34;
#line 1139
  *(parm + 1) = (unsigned char)0;
#line 1140
  *(parm + 2) = (unsigned char)0;
#line 1142
  return (3);
}
}
#line 1144 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm , int len ) 
{ 
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1146
  numbuf[0] = (char )'\000';
#line 1146
  tmp = 1U;
  {
#line 1146
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1146
    if (tmp >= 64U) {
#line 1146
      goto while_break;
    }
#line 1146
    numbuf[tmp] = (char)0;
#line 1146
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1148
  isup_get_number(numbuf, parm + 0, len, 0);
#line 1149
  ss7_message(ss7, (char *)"\t\t\tJIP: %s\n", numbuf);
  }
#line 1150
  return (len);
}
}
#line 1153 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
                       int len ) 
{ 


  {
  {
#line 1155
  isup_get_number(c->jip_number, parm + 0, len, 0);
  }
#line 1156
  return (len);
}
}
#line 1159 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                        unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1163
  if (c->jip_number[0]) {
    {
#line 1164
    isup_put_number(parm + 0, c->jip_number, & datalen, & oddeven);
    }
#line 1165
    return (datalen);
  }
#line 1167
  return (0);
}
}
#line 1170 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                            int len ) 
{ 


  {
#line 1172
  return (1);
}
}
#line 1175 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                               unsigned char *parm , int len ) 
{ 


  {
#line 1177
  return (1);
}
}
#line 1180 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                unsigned char *parm , int len ) 
{ 


  {
#line 1182
  *(parm + 0) = (unsigned char)1;
#line 1183
  return (1);
}
}
#line 1186 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1188
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1190
  isup_get_number(c->charge_number, parm + 2, len - 2, oddeven);
#line 1192
  c->charge_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1193
  c->charge_num_plan = (unsigned char )(((int )*(parm + 1) >> 4) & 7);
  }
#line 1195
  return (len);
}
}
#line 1198 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                              int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1200
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1201
  numbuf[0] = (char )'\000';
#line 1201
  tmp = 1U;
  {
#line 1201
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1201
    if (tmp >= 64U) {
#line 1201
      goto while_break;
    }
#line 1201
    numbuf[tmp] = (char)0;
#line 1201
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1203
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1204
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1206
  isup_get_number(numbuf, parm + 2, len - 2, oddeven);
#line 1208
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1210
  return (len);
}
}
#line 1213 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                  unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1217
  if (! c->charge_number[0]) {
#line 1218
    return (0);
  }
  {
#line 1220
  isup_put_number(parm + 2, c->charge_number, & datalen, & oddeven);
#line 1222
  *(parm + 0) = (unsigned char )((oddeven << 7) | (int )c->charge_nai);
#line 1223
  *(parm + 1) = (unsigned char )(1 << 4);
  }
#line 1225
  return (datalen + 2);
}
}
#line 1229 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                   unsigned char *parm , int len ) 
{ 


  {
#line 1231
  if (c->cot_check_passed) {
#line 1232
    *(parm + 0) = (unsigned char)1;
  } else {
#line 1234
    *(parm + 0) = (unsigned char)0;
  }
#line 1236
  return (1);
}
}
#line 1239 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                  unsigned char *parm , int len ) 
{ 


  {
#line 1241
  if (1 & (int )*(parm + 0)) {
#line 1242
    c->cot_check_passed = 1;
  } else {
#line 1244
    c->cot_check_passed = 0;
  }
#line 1245
  return (1);
}
}
#line 1248 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                               int len ) 
{ 
  char const   *tmp ;

  {
#line 1250
  if (1 & (int )*(parm + 0)) {
#line 1250
    tmp = "successful";
  } else {
#line 1250
    tmp = "failed";
  }
  {
#line 1250
  ss7_message(ss7, (char *)"\t\t\tContinuity Check: %s\n", tmp);
  }
#line 1252
  return (1);
}
}
#line 1255 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                          int len ) 
{ 
  char *name ;

  {
  {
#line 1260
  if (((int )*(parm + 0) & 3) == 0) {
#line 1260
    goto case_0;
  }
#line 1263
  if (((int )*(parm + 0) & 3) == 1) {
#line 1263
    goto case_1;
  }
#line 1266
  if (((int )*(parm + 0) & 3) == 2) {
#line 1266
    goto case_2;
  }
#line 1269
  if (((int )*(parm + 0) & 3) == 3) {
#line 1269
    goto case_3;
  }
#line 1272
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1261
  name = (char *)"Maintenance oriented";
#line 1262
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1264
  name = (char *)"Hardware Failure oriented";
#line 1265
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1267
  name = (char *)"Reserved for national use";
#line 1268
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1270
  name = (char *)"Spare";
#line 1271
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1273
  name = (char *)"Huh?!";
  switch_break: /* CIL Label */ ;
  }
  {
#line 1275
  ss7_message(ss7, (char *)"\t\t\tType indicator: %s\n", name);
  }
#line 1277
  return (1);
}
}
#line 1280 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_receive(struct ss7 *ss7 , struct isup_call *c ,
                                             int messagetype , unsigned char *parm ,
                                             int len ) 
{ 


  {
#line 1282
  c->cicgroupsupervisiontype = 3 & (int )*(parm + 0);
#line 1283
  return (1);
}
}
#line 1286 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_transmit(struct ss7 *ss7 , struct isup_call *c ,
                                              int messagetype , unsigned char *parm ,
                                              int len ) 
{ 


  {
#line 1288
  *(parm + 0) = (unsigned char )(c->cicgroupsupervisiontype & 3);
#line 1289
  return (1);
}
}
#line 1292 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                           int len ) 
{ 
  char *name ;

  {
  {
#line 1297
  if ((int )*(parm + 0) == 0) {
#line 1297
    goto case_0;
  }
#line 1300
  if ((int )*(parm + 0) == 1) {
#line 1300
    goto case_1;
  }
#line 1303
  if ((int )*(parm + 0) == 2) {
#line 1303
    goto case_2;
  }
#line 1306
  if ((int )*(parm + 0) == 3) {
#line 1306
    goto case_3;
  }
#line 1309
  if ((int )*(parm + 0) == 4) {
#line 1309
    goto case_4;
  }
#line 1312
  if ((int )*(parm + 0) == 5) {
#line 1312
    goto case_5;
  }
#line 1315
  if ((int )*(parm + 0) == 6) {
#line 1315
    goto case_6;
  }
#line 1318
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1298
  name = (char *)"spare";
#line 1299
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1301
  name = (char *)"ALERTING";
#line 1302
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1304
  name = (char *)"PROGRESS";
#line 1305
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1307
  name = (char *)"In-band information or an appropriate pattern is now available";
#line 1308
  goto switch_break;
  case_4: /* CIL Label */ 
#line 1310
  name = (char *)"Call forward on busy";
#line 1311
  goto switch_break;
  case_5: /* CIL Label */ 
#line 1313
  name = (char *)"Call forward on no reply";
#line 1314
  goto switch_break;
  case_6: /* CIL Label */ 
#line 1316
  name = (char *)"Call forward unconditional";
#line 1317
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1319
  name = (char *)"Spare";
#line 1320
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1322
  ss7_message(ss7, (char *)"\t\t\t%s\n", name);
  }
#line 1323
  return (1);
}
}
#line 1326 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                              unsigned char *parm , int len ) 
{ 


  {
#line 1328
  c->event_info = *(parm + 0);
#line 1329
  return (1);
}
}
#line 1332 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                               unsigned char *parm , int len ) 
{ 


  {
#line 1334
  *(parm + 0) = c->event_info;
#line 1335
  return (1);
}
}
#line 1338 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 
  char *redirect_ind ;
  char *orig_redir_reas ;
  char *redir_reas ;

  {
  {
#line 1343
  if (((int )*(parm + 0) & 7) == 0) {
#line 1343
    goto case_0;
  }
#line 1346
  if (((int )*(parm + 0) & 7) == 1) {
#line 1346
    goto case_1;
  }
#line 1349
  if (((int )*(parm + 0) & 7) == 2) {
#line 1349
    goto case_2;
  }
#line 1352
  if (((int )*(parm + 0) & 7) == 3) {
#line 1352
    goto case_3;
  }
#line 1355
  if (((int )*(parm + 0) & 7) == 4) {
#line 1355
    goto case_4;
  }
#line 1358
  if (((int )*(parm + 0) & 7) == 5) {
#line 1358
    goto case_5;
  }
#line 1361
  if (((int )*(parm + 0) & 7) == 6) {
#line 1361
    goto case_6;
  }
#line 1364
  if (((int )*(parm + 0) & 7) == 7) {
#line 1364
    goto case_7;
  }
#line 1367
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1344
  redirect_ind = (char *)"No Redirection (national use)";
#line 1345
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1347
  redirect_ind = (char *)"Call rerouted (national use)";
#line 1348
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1350
  redirect_ind = (char *)"Call rerouted, all rediection information presentation restricted (national use)";
#line 1351
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1353
  redirect_ind = (char *)"Call diverted";
#line 1354
  goto switch_break;
  case_4: /* CIL Label */ 
#line 1356
  redirect_ind = (char *)"Call diverted, all redirection information presentation restricted";
#line 1357
  goto switch_break;
  case_5: /* CIL Label */ 
#line 1359
  redirect_ind = (char *)"Call rerouted, redirection number presentation restricted (national use)";
#line 1360
  goto switch_break;
  case_6: /* CIL Label */ 
#line 1362
  redirect_ind = (char *)"Call diversion, redirection number presentation restricted (national use)";
#line 1363
  goto switch_break;
  case_7: /* CIL Label */ 
#line 1365
  redirect_ind = (char *)"spare";
#line 1366
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1368
  redirect_ind = (char *)"Unknown";
#line 1369
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1372
  ss7_message(ss7, (char *)"\t\t\tRedirecting indicator: %s (%d)\n", redirect_ind,
              (int )*(parm + 0) & 7);
  }
  {
#line 1375
  if ((((int )*(parm + 0) >> 4) & 15) == 0) {
#line 1375
    goto case_0___0;
  }
#line 1378
  if ((((int )*(parm + 0) >> 4) & 15) == 1) {
#line 1378
    goto case_1___0;
  }
#line 1381
  if ((((int )*(parm + 0) >> 4) & 15) == 2) {
#line 1381
    goto case_2___0;
  }
#line 1384
  if ((((int )*(parm + 0) >> 4) & 15) == 3) {
#line 1384
    goto case_3___0;
  }
#line 1387
  goto switch_default___0;
  case_0___0: /* CIL Label */ 
#line 1376
  orig_redir_reas = (char *)"Unknown/not available";
#line 1377
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 1379
  orig_redir_reas = (char *)"User busy (national use)";
#line 1380
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 1382
  orig_redir_reas = (char *)"No reply (national use)";
#line 1383
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 1385
  orig_redir_reas = (char *)"Unconditional (national use)";
#line 1386
  goto switch_break___0;
  switch_default___0: /* CIL Label */ 
#line 1388
  orig_redir_reas = (char *)"spare";
#line 1389
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 1392
  ss7_message(ss7, (char *)"\t\t\tOriginal redirection reason: %s (%d)\n", orig_redir_reas,
              ((int )*(parm + 0) >> 4) & 15);
#line 1393
  ss7_message(ss7, (char *)"\t\t\tRedirection counter: %d\n", (int )*(parm + 1) & 7);
  }
  {
#line 1396
  if ((((int )*(parm + 1) >> 4) & 15) == 0) {
#line 1396
    goto case_0___1;
  }
#line 1399
  if ((((int )*(parm + 1) >> 4) & 15) == 1) {
#line 1399
    goto case_1___1;
  }
#line 1402
  if ((((int )*(parm + 1) >> 4) & 15) == 2) {
#line 1402
    goto case_2___1;
  }
#line 1405
  if ((((int )*(parm + 1) >> 4) & 15) == 3) {
#line 1405
    goto case_3___1;
  }
#line 1408
  if ((((int )*(parm + 1) >> 4) & 15) == 4) {
#line 1408
    goto case_4___0;
  }
#line 1411
  if ((((int )*(parm + 1) >> 4) & 15) == 5) {
#line 1411
    goto case_5___0;
  }
#line 1414
  if ((((int )*(parm + 1) >> 4) & 15) == 6) {
#line 1414
    goto case_6___0;
  }
#line 1417
  goto switch_default___1;
  case_0___1: /* CIL Label */ 
#line 1397
  redir_reas = (char *)"Unknown/not available";
#line 1398
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 1400
  redir_reas = (char *)"User busy";
#line 1401
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 1403
  redir_reas = (char *)"No reply";
#line 1404
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 1406
  redir_reas = (char *)"Unconditional";
#line 1407
  goto switch_break___1;
  case_4___0: /* CIL Label */ 
#line 1409
  redir_reas = (char *)"Deflection during alerting";
#line 1410
  goto switch_break___1;
  case_5___0: /* CIL Label */ 
#line 1412
  redir_reas = (char *)"Deflection immediate response";
#line 1413
  goto switch_break___1;
  case_6___0: /* CIL Label */ 
#line 1415
  redir_reas = (char *)"Mobile subscriber not reachable";
#line 1416
  goto switch_break___1;
  switch_default___1: /* CIL Label */ 
#line 1418
  redir_reas = (char *)"spare";
#line 1419
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  {
#line 1422
  ss7_message(ss7, (char *)"\t\t\tRedirecting reason: %s (%d)\n", redir_reas, ((int )*(parm + 1) >> 4) & 15);
  }
#line 1424
  return (2);
}
}
#line 1427 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
#line 1429
  return (2);
}
}
#line 1432 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 1434
  return (2);
}
}
#line 1437 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                unsigned char *parm , int len ) 
{ 


  {
  {
#line 1439
  c->generic_name_typeofname = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1440
  c->generic_name_avail = (unsigned char )(((int )*(parm + 0) >> 4) & 1);
#line 1441
  c->generic_name_presentation = (unsigned char )((int )*(parm + 0) & 3);
#line 1442
  memcpy((void */* __restrict  */)(c->generic_name), (void const   */* __restrict  */)(parm + 1),
         (size_t )(len - 1));
  }
#line 1443
  return (len);
}
}
#line 1446 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                             int len ) 
{ 
  unsigned int typeofname ;
  unsigned int avail ;
  unsigned int presentation ;
  char name[17] ;
  char const   *tmp ;
  char const   *tmp___0 ;

  {
  {
#line 1448
  typeofname = (unsigned int )(((int )*(parm + 0) >> 5) & 7);
#line 1449
  avail = (unsigned int )(((int )*(parm + 0) >> 4) & 1);
#line 1450
  presentation = (unsigned int )((int )*(parm + 0) & 3);
#line 1453
  memcpy((void */* __restrict  */)(name), (void const   */* __restrict  */)(parm + 1),
         (size_t )(len - 1));
  }
#line 1455
  if (typeofname == 1U) {
#line 1455
    tmp = "Calling Name";
  } else {
#line 1455
    tmp = "Unknown";
  }
  {
#line 1455
  ss7_message(ss7, (char *)"\t\t\tType of Name: %s (%d)\n", tmp, typeofname);
  }
#line 1456
  if (avail == 1U) {
#line 1456
    tmp___0 = "Name not available";
  } else {
#line 1456
    tmp___0 = "Name available, or availability unknown";
  }
  {
#line 1456
  ss7_message(ss7, (char *)"\t\t\tAvail: %s (%d)\n", tmp___0, avail);
#line 1457
  ss7_message(ss7, (char *)"\t\t\tPresentation: %d\n", presentation);
#line 1458
  ss7_message(ss7, (char *)"\t\t\tName: %s\n", name);
  }
#line 1460
  return (len);
}
}
#line 1463 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 unsigned char *parm , int len ) 
{ 
  int namelen ;
  size_t tmp ;

  {
  {
#line 1465
  tmp = strlen((char const   *)(c->generic_name));
#line 1465
  namelen = (int )tmp;
  }
#line 1468
  if (! c->generic_name[0]) {
#line 1469
    return (0);
  }
  {
#line 1471
  *(parm + 0) = (unsigned char )((((int )c->generic_name_typeofname << 5) | (((int )c->generic_name_avail & 1) << 4)) | ((int )c->generic_name_presentation & 3));
#line 1472
  memcpy((void */* __restrict  */)(parm + 1), (void const   */* __restrict  */)(c->generic_name),
         (size_t )namelen);
  }
#line 1474
  return (namelen + 1);
}
}
#line 1477 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1479
  oddeven = ((int )*(parm + 1) >> 7) & 1;
#line 1480
  numbuf[0] = (char )'\000';
#line 1480
  tmp = 1U;
  {
#line 1480
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1480
    if (tmp >= 64U) {
#line 1480
      goto while_break;
    }
#line 1480
    numbuf[tmp] = (char)0;
#line 1480
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1482
  ss7_message(ss7, (char *)"\t\t\tType of address: %x\n", (int )*(parm + 0));
#line 1483
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 1) & 127);
#line 1484
  ss7_message(ss7, (char *)"\t\t\tOddEven: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 1485
  ss7_message(ss7, (char *)"\t\t\tReserved: %x\n", (int )*(parm + 2) & 3);
#line 1486
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 2) >> 2) & 3);
#line 1487
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 2) >> 4) & 7);
#line 1489
  isup_get_number(numbuf, parm + 3, len - 3, oddeven);
#line 1491
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1493
  return (len);
}
}
#line 1496 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                   unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1498
  oddeven = ((int )*(parm + 1) >> 7) & 1;
#line 1500
  c->gen_add_type = *(parm + 0);
#line 1501
  c->gen_add_nai = (unsigned char )((int )*(parm + 1) & 127);
#line 1502
  c->gen_add_pres_ind = (unsigned char )(((int )*(parm + 2) >> 2) & 3);
#line 1503
  c->gen_add_num_plan = (unsigned char )(((int )*(parm + 2) >> 4) & 7);
#line 1505
  isup_get_number(c->gen_add_number, parm + 3, len - 3, oddeven);
  }
#line 1507
  return (len);
}
}
#line 1510 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1515
  if (! c->gen_add_number[0]) {
#line 1516
    return (0);
  }
  {
#line 1518
  isup_put_number(parm + 3, c->gen_add_number, & datalen, & oddeven);
#line 1520
  *(parm + 0) = c->gen_add_type;
#line 1521
  *(parm + 1) = (unsigned char )((oddeven << 7) | (int )c->gen_add_nai);
#line 1522
  *(parm + 2) = (unsigned char )(((int )c->gen_add_num_plan << 4) | (((int )c->gen_add_pres_ind & 3) << 2));
  }
#line 1526
  return (datalen + 3);
}
}
#line 1530 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                               int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1532
  oddeven = ((int )*(parm + 0) >> 5) & 7;
#line 1533
  numbuf[0] = (char )'\000';
#line 1533
  tmp = 1U;
  {
#line 1533
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1533
    if (tmp >= 64U) {
#line 1533
      goto while_break;
    }
#line 1533
    numbuf[tmp] = (char)0;
#line 1533
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1535
  ss7_message(ss7, (char *)"\t\t\tType of digits: %x\n", (int )*(parm + 0) & 31);
#line 1536
  ss7_message(ss7, (char *)"\t\t\tEncoding Scheme: %x\n", ((int )*(parm + 0) >> 5) & 7);
#line 1537
  isup_get_number(numbuf, parm + 1, len - 1, oddeven);
#line 1538
  ss7_message(ss7, (char *)"\t\t\tAddress digits: %s\n", numbuf);
  }
#line 1540
  return (len);
}
}
#line 1544 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                  unsigned char *parm , int len ) 
{ 


  {
  {
#line 1546
  c->gen_dig_scheme = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1547
  c->gen_dig_type = (unsigned char )((int )*(parm + 0) & 31);
#line 1549
  isup_get_number(c->gen_dig_number, parm + 1, len - 1, (int )c->gen_dig_scheme);
  }
#line 1550
  return (len);
}
}
#line 1553 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                   unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1557
  if (! c->gen_dig_number[0]) {
#line 1558
    return (0);
  }
  {
#line 1563
  if ((int )c->gen_dig_type == 2) {
#line 1563
    goto case_2;
  }
#line 1563
  if ((int )c->gen_dig_type == 1) {
#line 1563
    goto case_2;
  }
#line 1563
  if ((int )c->gen_dig_type == 0) {
#line 1563
    goto case_2;
  }
#line 1567
  if ((int )c->gen_dig_type == 3) {
#line 1567
    goto case_3;
  }
#line 1571
  goto switch_default;
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
  case_0: /* CIL Label */ 
  {
#line 1564
  isup_put_number(parm + 1, c->gen_dig_number, & datalen, & oddeven);
#line 1565
  *(parm + 0) = (unsigned char )((oddeven << 5) | (int )c->gen_dig_type);
  }
#line 1566
  goto switch_break;
  case_3: /* CIL Label */ 
  {
#line 1568
  isup_put_generic(parm + 1, c->gen_dig_number, & datalen);
#line 1569
  *(parm + 0) = (unsigned char )(((int )c->gen_dig_scheme << 5) | (int )c->gen_dig_type);
  }
#line 1570
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 1572
  isup_put_number(parm + 1, c->gen_dig_number, & datalen, & oddeven);
#line 1573
  *(parm + 0) = (unsigned char )((oddeven << 5) | (int )c->gen_dig_type);
  }
#line 1574
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 1576
  return (datalen + 1);
}
}
#line 1579 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                    int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1581
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1582
  numbuf[0] = (char )'\000';
#line 1582
  tmp = 1U;
  {
#line 1582
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1582
    if (tmp >= 64U) {
#line 1582
      goto while_break;
    }
#line 1582
    numbuf[tmp] = (char)0;
#line 1582
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1584
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1585
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1586
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 1588
  isup_get_number(numbuf, parm + 2, len - 2, oddeven);
#line 1590
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1592
  return (len);
}
}
#line 1595 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                       unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1597
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1599
  isup_get_number(c->orig_called_num, parm + 2, len - 2, oddeven);
#line 1601
  c->orig_called_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1602
  c->orig_called_pres_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 1603
  c->orig_called_screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 1605
  return (len);
}
}
#line 1608 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 


  {
#line 1610
  return (len);
}
}
#line 1613 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int echo_control_info_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  unsigned char ba ;
  unsigned char dc ;
  unsigned char fe ;
  unsigned char hg ;
  char *ba_str ;
  char *dc_str ;
  char *fe_str ;
  char *hg_str ;

  {
#line 1615
  ba = (unsigned char )((int )*(parm + 0) & 3);
#line 1616
  dc = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 1617
  fe = (unsigned char )(((int )*(parm + 0) >> 4) & 3);
#line 1618
  hg = (unsigned char )(((int )*(parm + 0) >> 6) & 3);
  {
#line 1622
  if ((int )ba == 0) {
#line 1622
    goto case_0;
  }
#line 1625
  if ((int )ba == 1) {
#line 1625
    goto case_1;
  }
#line 1628
  if ((int )ba == 2) {
#line 1628
    goto case_2;
  }
#line 1631
  if ((int )ba == 3) {
#line 1631
    goto case_3;
  }
#line 1634
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1623
  ba_str = (char *)"no information";
#line 1624
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1626
  ba_str = (char *)"outgoing echo control device not included and not available";
#line 1627
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1629
  ba_str = (char *)"outgoing echo control device included";
#line 1630
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1632
  ba_str = (char *)"outgoing echo control device not included but available";
#line 1633
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1635
  ba_str = (char *)"unknown";
#line 1636
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1640
  if ((int )dc == 0) {
#line 1640
    goto case_0___0;
  }
#line 1643
  if ((int )dc == 1) {
#line 1643
    goto case_1___0;
  }
#line 1646
  if ((int )dc == 2) {
#line 1646
    goto case_2___0;
  }
#line 1649
  if ((int )dc == 3) {
#line 1649
    goto case_3___0;
  }
#line 1652
  goto switch_default___0;
  case_0___0: /* CIL Label */ 
#line 1641
  dc_str = (char *)"no information";
#line 1642
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 1644
  dc_str = (char *)"incoming echo control device not included and not available";
#line 1645
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 1647
  dc_str = (char *)"incoming echo control device included";
#line 1648
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 1650
  dc_str = (char *)"incoming echo control device not included but available";
#line 1651
  goto switch_break___0;
  switch_default___0: /* CIL Label */ 
#line 1653
  dc_str = (char *)"unknown";
#line 1654
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 1658
  if ((int )fe == 0) {
#line 1658
    goto case_0___1;
  }
#line 1661
  if ((int )fe == 1) {
#line 1661
    goto case_1___1;
  }
#line 1664
  if ((int )fe == 2) {
#line 1664
    goto case_2___1;
  }
#line 1667
  if ((int )fe == 3) {
#line 1667
    goto case_3___1;
  }
#line 1670
  goto switch_default___1;
  case_0___1: /* CIL Label */ 
#line 1659
  fe_str = (char *)"no information";
#line 1660
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 1662
  fe_str = (char *)"outgoing echo control device activation request";
#line 1663
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 1665
  fe_str = (char *)"outgoing echo control device deactivation request";
#line 1666
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 1668
  fe_str = (char *)"spare";
#line 1669
  goto switch_break___1;
  switch_default___1: /* CIL Label */ 
#line 1671
  fe_str = (char *)"unknown";
#line 1672
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  {
#line 1676
  if ((int )hg == 0) {
#line 1676
    goto case_0___2;
  }
#line 1679
  if ((int )hg == 1) {
#line 1679
    goto case_1___2;
  }
#line 1682
  if ((int )hg == 2) {
#line 1682
    goto case_2___2;
  }
#line 1685
  if ((int )hg == 3) {
#line 1685
    goto case_3___2;
  }
#line 1688
  goto switch_default___2;
  case_0___2: /* CIL Label */ 
#line 1677
  hg_str = (char *)"no information";
#line 1678
  goto switch_break___2;
  case_1___2: /* CIL Label */ 
#line 1680
  hg_str = (char *)"incoming echo control device activation request";
#line 1681
  goto switch_break___2;
  case_2___2: /* CIL Label */ 
#line 1683
  hg_str = (char *)"incoming echo control device deactivation request";
#line 1684
  goto switch_break___2;
  case_3___2: /* CIL Label */ 
#line 1686
  hg_str = (char *)"spare";
#line 1687
  goto switch_break___2;
  switch_default___2: /* CIL Label */ 
#line 1689
  hg_str = (char *)"unknown";
#line 1690
  goto switch_break___2;
  switch_break___2: /* CIL Label */ ;
  }
  {
#line 1693
  ss7_message(ss7, (char *)"\t\t\tOutgoing echo control device information: %s (%d)\n",
              ba_str, (int )ba);
#line 1694
  ss7_message(ss7, (char *)"\t\t\tIncoming echo control device information: %s (%d)\n",
              dc_str, (int )dc);
#line 1695
  ss7_message(ss7, (char *)"\t\t\tOutgoing echo control device request: %s (%d)\n",
              fe_str, (int )fe);
#line 1696
  ss7_message(ss7, (char *)"\t\t\tIncoming echo control device request: %s (%d)\n",
              hg_str, (int )hg);
  }
#line 1698
  return (len);
}
}
#line 1701 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int parameter_compat_info_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 


  {
#line 1703
  return (len);
}
}
#line 1706 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int propagation_delay_cntr_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                       int len ) 
{ 


  {
  {
#line 1708
  ss7_message(ss7, (char *)"\t\t\tDelay: %dms\n", (int )((unsigned short )((((int )*(parm + 0) & 255) << 8) | ((int )*(parm + 0) & 255))));
  }
#line 1709
  return (len);
}
}
#line 1712 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_state_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  unsigned char dcbits ;
  unsigned char babits ;
  unsigned char febits ;
  char *ba_str ;
  char *dc_str ;
  char *fe_str ;
  int i ;

  {
#line 1718
  i = 0;
  {
#line 1718
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1718
    if (! (i < len)) {
#line 1718
      goto while_break;
    }
#line 1719
    babits = (unsigned char )((int )*(parm + i) & 3);
#line 1720
    dcbits = (unsigned char )(((int )*(parm + i) >> 2) & 3);
#line 1721
    febits = (unsigned char )(((int )*(parm + i) >> 4) & 3);
#line 1723
    if ((int )dcbits == 0) {
      {
#line 1725
      if ((int )babits == 0) {
#line 1725
        goto case_0;
      }
#line 1729
      if ((int )babits == 2) {
#line 1729
        goto case_2;
      }
#line 1729
      if ((int )babits == 1) {
#line 1729
        goto case_2;
      }
#line 1732
      if ((int )babits == 3) {
#line 1732
        goto case_3;
      }
#line 1724
      goto switch_break;
      case_0: /* CIL Label */ 
#line 1726
      ba_str = (char *)"transient";
#line 1727
      goto switch_break;
      case_2: /* CIL Label */ 
      case_1: /* CIL Label */ 
#line 1730
      ba_str = (char *)"spare";
#line 1731
      goto switch_break;
      case_3: /* CIL Label */ 
#line 1733
      ba_str = (char *)"unequipped";
#line 1734
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
    } else {
      {
#line 1738
      if ((int )babits == 0) {
#line 1738
        goto case_0___0;
      }
#line 1741
      if ((int )babits == 1) {
#line 1741
        goto case_1___0;
      }
#line 1744
      if ((int )babits == 2) {
#line 1744
        goto case_2___0;
      }
#line 1747
      if ((int )babits == 3) {
#line 1747
        goto case_3___0;
      }
#line 1737
      goto switch_break___0;
      case_0___0: /* CIL Label */ 
#line 1739
      ba_str = (char *)"no blocking (active)";
#line 1740
      goto switch_break___0;
      case_1___0: /* CIL Label */ 
#line 1742
      ba_str = (char *)"locally blocked";
#line 1743
      goto switch_break___0;
      case_2___0: /* CIL Label */ 
#line 1745
      ba_str = (char *)"remotely blocked";
#line 1746
      goto switch_break___0;
      case_3___0: /* CIL Label */ 
#line 1748
      ba_str = (char *)"locally and remotely blocked";
#line 1749
      goto switch_break___0;
      switch_break___0: /* CIL Label */ ;
      }
      {
#line 1753
      if ((int )dcbits == 1) {
#line 1753
        goto case_1___1;
      }
#line 1756
      if ((int )dcbits == 2) {
#line 1756
        goto case_2___1;
      }
#line 1759
      if ((int )dcbits == 3) {
#line 1759
        goto case_3___1;
      }
#line 1752
      goto switch_break___1;
      case_1___1: /* CIL Label */ 
#line 1754
      dc_str = (char *)"circuit incoming busy";
#line 1755
      goto switch_break___1;
      case_2___1: /* CIL Label */ 
#line 1757
      dc_str = (char *)"circuit outgoing busy";
#line 1758
      goto switch_break___1;
      case_3___1: /* CIL Label */ 
#line 1760
      dc_str = (char *)"idle";
#line 1761
      goto switch_break___1;
      switch_break___1: /* CIL Label */ ;
      }
      {
#line 1765
      if ((int )febits == 0) {
#line 1765
        goto case_0___1;
      }
#line 1768
      if ((int )febits == 1) {
#line 1768
        goto case_1___2;
      }
#line 1771
      if ((int )febits == 2) {
#line 1771
        goto case_2___2;
      }
#line 1774
      if ((int )febits == 3) {
#line 1774
        goto case_3___2;
      }
#line 1764
      goto switch_break___2;
      case_0___1: /* CIL Label */ 
#line 1766
      fe_str = (char *)"no blocking (active)";
#line 1767
      goto switch_break___2;
      case_1___2: /* CIL Label */ 
#line 1769
      fe_str = (char *)"locally blocked";
#line 1770
      goto switch_break___2;
      case_2___2: /* CIL Label */ 
#line 1772
      fe_str = (char *)"remotely blocked";
#line 1773
      goto switch_break___2;
      case_3___2: /* CIL Label */ 
#line 1775
      fe_str = (char *)"locally and remotely blocked";
#line 1776
      goto switch_break___2;
      switch_break___2: /* CIL Label */ ;
      }
    }
    {
#line 1781
    ss7_message(ss7, (char *)"\t\t\tMaintenance blocking state: %s (%d)\n", ba_str,
                (int )babits);
    }
#line 1782
    if (! dcbits) {
#line 1783
      goto __Cont;
    }
    {
#line 1784
    ss7_message(ss7, (char *)"\t\t\tCall processing state: %s (%d)\n", dc_str, (int )dcbits);
#line 1785
    ss7_message(ss7, (char *)"\t\t\tHardware blocking state: %s (%d)\n", fe_str, (int )febits);
    }
    __Cont: /* CIL Label */ 
#line 1718
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1787
  return (len);
}
}
#line 1790 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_state_ind_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 
  int numcics ;
  int i ;

  {
#line 1792
  numcics = c->range + 1;
#line 1794
  i = 0;
  {
#line 1794
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1794
    if (! (i < numcics)) {
#line 1794
      goto while_break;
    }
#line 1795
    *(parm + i) = c->status[i];
#line 1794
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1797
  return (numcics);
}
}
#line 1800 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm , int len ) 
{ 


  {
  {
#line 1802
  ss7_message(ss7, (char *)"\t\t\tType of Network: %x\n", ((int )*(parm + 0) >> 4) & 7);
#line 1803
  ss7_message(ss7, (char *)"\t\t\tNetwork ID plan: %x\n", (int )*(parm + 0) & 15);
#line 1804
  ss7_message(ss7, (char *)"\t\t\tNetwork ID: %x %x\n", (int )*(parm + 1), (int )*(parm + 2));
#line 1805
  ss7_message(ss7, (char *)"\t\t\tCircuit Code: %x\n", ((int )*(parm + 3) >> 4) & 15);
  }
#line 1807
  return (len);
}
}
#line 1810 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                        unsigned char *parm , int len ) 
{ 


  {
#line 1812
  return (0);
}
}
#line 1815 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
                       int len ) 
{ 


  {
#line 1817
  return (len);
}
}
#line 1820 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                         unsigned char *parm , int len ) 
{ 


  {
#line 1825
  if (c->lspi_scheme) {
#line 1826
    *(parm + 0) = (unsigned char )(((int )c->lspi_scheme << 5) | (int )c->lspi_type);
#line 1827
    return (1);
  }
#line 1829
  return (0);
}
}
#line 1832 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                        unsigned char *parm , int len ) 
{ 


  {
  {
#line 1834
  c->lspi_type = (unsigned char )((int )*(parm + 0) & 31);
#line 1835
  c->lspi_scheme = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1836
  c->lspi_context = (unsigned char )((int )*(parm + 1) & 15);
#line 1837
  isup_get_number(c->lspi_ident, parm + 2, len - 2, (int )c->lspi_scheme);
  }
#line 1839
  return (len);
}
}
#line 1842 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm , int len ) 
{ 


  {
  {
#line 1844
  ss7_message(ss7, (char *)"\t\t\tLSPI Type: %x\n", (int )*(parm + 0) & 31);
#line 1845
  ss7_message(ss7, (char *)"\t\t\tEncoding Scheme: %x\n", ((int )*(parm + 0) >> 5) & 7);
#line 1846
  ss7_message(ss7, (char *)"\t\t\tContext ID: %x\n", (int )*(parm + 1) & 15);
#line 1847
  ss7_message(ss7, (char *)"\t\t\tSpare: %x\n", ((int )*(parm + 1) >> 4) & 15);
#line 1848
  ss7_message(ss7, (char *)"\t\t\tLSP Identity: %x\n", (int )*(parm + 2));
  }
#line 1850
  return (len);
}
}
#line 1853 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                         int len ) 
{ 
  unsigned int ptc ;
  unsigned int callr ;

  {
#line 1857
  callr = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1858
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1859
    ptc = (unsigned int )(((int )*(parm + 3) | ((int )*(parm + 4) << 8)) | ((int )*(parm + 5) << 16));
  } else {
#line 1861
    ptc = (unsigned int )((int )*(parm + 3) | ((int )*(parm + 4) << 8));
  }
  {
#line 1863
  ss7_message(ss7, (char *)"\t\t\tCall identity: %d\n", callr);
  }
#line 1864
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
    {
#line 1865
    ss7_message(ss7, (char *)"\t\t\tPC: Net-CLstr-Mbr: %d-%d-%d\n", (ptc >> 16) & 255U,
                (ptc >> 8) & 255U, ptc & 255U);
    }
  } else {
    {
#line 1867
    ss7_message(ss7, (char *)"\t\t\tPC: 0x%x\n", ptc);
    }
  }
#line 1869
  return (len);
}
}
#line 1872 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                             unsigned char *parm , int len ) 
{ 


  {
#line 1874
  if (c->call_ref_ident) {
#line 1875
    if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1876
      *(parm + 0) = (unsigned char )(c->call_ref_ident & 255U);
#line 1877
      *(parm + 1) = (unsigned char )((c->call_ref_ident >> 8) & 255U);
#line 1878
      *(parm + 2) = (unsigned char )((c->call_ref_ident >> 16) & 255U);
#line 1879
      *(parm + 3) = (unsigned char )(c->call_ref_pc & 255U);
#line 1880
      *(parm + 4) = (unsigned char )((c->call_ref_pc >> 8) & 255U);
#line 1881
      *(parm + 5) = (unsigned char )((c->call_ref_pc >> 16) & 255U);
#line 1882
      return (6);
    } else {
#line 1884
      *(parm + 0) = (unsigned char )(c->call_ref_ident & 255U);
#line 1885
      *(parm + 1) = (unsigned char )((c->call_ref_ident >> 8) & 255U);
#line 1886
      *(parm + 2) = (unsigned char )((c->call_ref_ident >> 16) & 255U);
#line 1887
      *(parm + 3) = (unsigned char )(c->call_ref_pc & 255U);
#line 1888
      *(parm + 4) = (unsigned char )((c->call_ref_pc >> 8) & 63U);
#line 1889
      return (5);
    }
  }
#line 1892
  return (0);
}
}
#line 1895 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                            unsigned char *parm , int len ) 
{ 


  {
#line 1897
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1898
    c->call_ref_ident = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1899
    c->call_ref_pc = (unsigned int )(((int )*(parm + 3) | ((int )*(parm + 4) << 8)) | ((int )*(parm + 5) << 16));
  } else {
#line 1901
    c->call_ref_ident = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1902
    c->call_ref_pc = (unsigned int )((int )*(parm + 3) | (((int )*(parm + 4) & 63) << 8));
  }
#line 1904
  return (len);
}
}
#line 1907 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                             int len ) 
{ 


  {
  {
#line 1909
  ss7_message(ss7, (char *)"\t\t\tFacility Indicator: %x\n", (int )*(parm + 0));
  }
#line 1910
  return (1);
}
}
#line 1913 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                unsigned char *parm , int len ) 
{ 


  {
#line 1915
  return (1);
}
}
#line 1918 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 unsigned char *parm , int len ) 
{ 


  {
#line 1920
  *(parm + 0) = (unsigned char)16;
#line 1921
  return (1);
}
}
#line 1924 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                   int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1926
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1927
  numbuf[0] = (char )'\000';
#line 1927
  tmp = 1U;
  {
#line 1927
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1927
    if (tmp >= 64U) {
#line 1927
      goto while_break;
    }
#line 1927
    numbuf[tmp] = (char)0;
#line 1927
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1929
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1930
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 1931
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1932
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 1933
  ss7_message(ss7, (char *)"\t\t\tScreening: %x\n", (int )*(parm + 1) & 3);
#line 1935
  isup_get_number(numbuf, parm + 2, len - 2, oddeven);
#line 1937
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1939
  return (len);
}
}
#line 1942 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1944
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1946
  isup_get_number(c->redirecting_num, parm + 2, len - 2, oddeven);
#line 1948
  c->redirecting_num_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1949
  c->redirecting_num_presentation_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 1950
  c->redirecting_num_screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 1952
  return (len);
}
}
#line 1956 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                       unsigned char *parm , int len ) 
{ 


  {
#line 1958
  return (0);
}
}
#line 1961 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_dump(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 


  {
#line 1963
  return (len);
}
}
#line 1965 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_receive(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
#line 1967
  return (len);
}
}
#line 1970 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_transmit(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 1972
  return (len);
}
}
#line 1976 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct parm_func parms[44]  = 
#line 1976
  {      {6, (char *)"Nature of Connection Indicator", & nature_of_connection_ind_dump,
      & nature_of_connection_ind_receive, & nature_of_connection_ind_transmit}, 
        {7, (char *)"Forward Call Indicators", & forward_call_ind_dump, & forward_call_ind_receive,
      & forward_call_ind_transmit}, 
        {9, (char *)"Calling Party\'s Category", & calling_party_cat_dump, & calling_party_cat_receive,
      & calling_party_cat_transmit}, 
        {2, (char *)"Transmission Medium Requirements", & transmission_medium_reqs_dump,
      & transmission_medium_reqs_receive, & transmission_medium_reqs_transmit}, 
        {29, (char *)"User Service Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                       unsigned char *parm , int len ))((void *)0),
      & user_service_info_receive, & user_service_info_transmit}, 
        {4, (char *)"Called Party Number", & called_party_num_dump, & called_party_num_receive,
      & called_party_num_transmit}, 
        {18, (char *)"Cause Indicator", & cause_dump, & cause_receive, & cause_transmit}, 
        {16,
      (char *)"Continuity Indicator", & continuity_ind_dump, & continuity_ind_receive,
      & continuity_ind_transmit}, 
        {3, (char *)"Access Transport", & access_transport_dump, & access_transport_receive,
      & access_transport_transmit}, 
        {198, (char *)"Business Group", (int (*)(struct ss7 *ss7 , int messagetype ,
                                              unsigned char *parm , int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                          struct isup_call *c ,
                                                                                          int messagetype ,
                                                                                          unsigned char *parm ,
                                                                                          int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {1, (char *)"Call Reference", & call_ref_dump, & call_ref_receive, & call_ref_transmit}, 
        {10,
      (char *)"Calling Party Number", & calling_party_num_dump, & calling_party_num_receive,
      & calling_party_num_transmit}, 
        {197, (char *)"Carrier Identification", & carrier_identification_dump, & carrier_identification_receive,
      & carrier_identification_transmit}, 
        {238, (char *)"Selection Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                     unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {235, (char *)"Charge Number", & charge_number_dump, & charge_number_receive,
      & charge_number_transmit}, 
        {37, (char *)"Circuit Assignment Map", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                     unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {13, (char *)"Connection Request", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                 unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {28, (char *)"Interlock Code", (int (*)(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                             int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                   struct isup_call *c ,
                                                                   int messagetype ,
                                                                   unsigned char *parm ,
                                                                   int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                         struct isup_call *c ,
                                                                                         int messagetype ,
                                                                                         unsigned char *parm ,
                                                                                         int len ))0}, 
        {195,
      (char *)"Egress Service", (int (*)(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                         int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                                               int messagetype , unsigned char *parm ,
                                                               int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                     struct isup_call *c ,
                                                                                     int messagetype ,
                                                                                     unsigned char *parm ,
                                                                                     int len ))0}, 
        {192,
      (char *)"Generic Address", & generic_address_dump, & generic_address_receive,
      & generic_address_transmit}, 
        {193, (char *)"Generic Digits", & generic_digits_dump, & generic_digits_receive,
      & generic_digits_transmit}, 
        {199, (char *)"Generic Name", & generic_name_dump, & generic_name_receive, & generic_name_transmit}, 
        {35,
      (char *)"Transit Network Selection", & tns_dump, & tns_receive, & tns_transmit}, 
        {44,
      (char *)"Generic Notification Indication", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                          unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {49, (char *)"Propagation Delay Counter", & propagation_delay_cntr_dump, (int (*)(struct ss7 *ss7 ,
                                                                                       struct isup_call *c ,
                                                                                       int messagetype ,
                                                                                       unsigned char *parm ,
                                                                                       int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {61, (char *)"Hop Counter", & hop_counter_dump, & hop_counter_receive, & hop_counter_transmit}, 
        {17,
      (char *)"Backward Call Indicator", & backward_call_ind_dump, & backward_call_ind_receive,
      & backward_call_ind_transmit}, 
        {41, (char *)"Optional Backward Call Indicator", & opt_backward_call_ind_dump,
      & opt_backward_call_ind_receive, (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                                int messagetype , unsigned char *parm ,
                                                int len ))((void *)0)}, 
        {21, (char *)"Circuit Group Supervision Indicator", & circuit_group_supervision_dump,
      & circuit_group_supervision_receive, & circuit_group_supervision_transmit}, 
        {22, (char *)"Range and status", & range_and_status_dump, & range_and_status_receive,
      & range_and_status_transmit}, 
        {36, (char *)"Event Information", & event_info_dump, & event_info_receive, & event_info_transmit}, 
        {8,
      (char *)"Optional forward call indicator", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                          unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {63, (char *)"Location Number", (int (*)(struct ss7 *ss7 , int messagetype ,
                                              unsigned char *parm , int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                          struct isup_call *c ,
                                                                                          int messagetype ,
                                                                                          unsigned char *parm ,
                                                                                          int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {234, (char *)"Originating line information", & originating_line_information_dump,
      & originating_line_information_receive, & originating_line_information_transmit}, 
        {19,
      (char *)"Redirection Information", & redirection_info_dump, & redirection_info_receive,
      & redirection_info_transmit}, 
        {40, (char *)"Original called number", & original_called_num_dump, & original_called_num_receive,
      & original_called_num_transmit}, 
        {196, (char *)"Jurisdiction Information Parameter", & jip_dump, & jip_receive,
      & jip_transmit}, 
        {55, (char *)"Echo Control Information", & echo_control_info_dump, (int (*)(struct ss7 *ss7 ,
                                                                                 struct isup_call *c ,
                                                                                 int messagetype ,
                                                                                 unsigned char *parm ,
                                                                                 int len ))((void *)0),
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))((void *)0)}, 
        {57, (char *)"Parameter Compatibility Information", & parameter_compat_info_dump,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))((void *)0), (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                               int messagetype , unsigned char *parm ,
                                               int len ))((void *)0)}, 
        {38, (char *)"Circuit State Indicator", & circuit_state_ind_dump, (int (*)(struct ss7 *ss7 ,
                                                                                struct isup_call *c ,
                                                                                int messagetype ,
                                                                                unsigned char *parm ,
                                                                                int len ))((void *)0),
      & circuit_state_ind_transmit}, 
        {228, (char *)"Local Service Provider ID", & lspi_dump, & lspi_receive, & lspi_transmit}, 
        {24,
      (char *)"Facility Indicator", & facility_ind_dump, & facility_ind_receive, & facility_ind_transmit}, 
        {11,
      (char *)"Redirecting Number", & redirecting_number_dump, & redirecting_number_receive,
      & redirecting_number_transmit}, 
        {46, (char *)"Access Delivery Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                          unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}};
#line 2023 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char *param2str(int parm ) 
{ 
  int x ;
  int totalparms ;

  {
#line 2026
  totalparms = (int )(sizeof(parms) / sizeof(struct parm_func ));
#line 2027
  x = 0;
  {
#line 2027
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2027
    if (! (x < totalparms)) {
#line 2027
      goto while_break;
    }
#line 2028
    if (parms[x].parm == parm) {
#line 2029
      return (parms[x].name);
    }
#line 2027
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2031
  return ((char *)"Unknown");
}
}
#line 2034 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void init_isup_call(struct isup_call *c ) 
{ 


  {
#line 2036
  c->oli_ani2 = -1;
#line 2037
  return;
}
}
#line 2039 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct isup_call *__isup_new_call(struct ss7 *ss7 , int nolink ) 
{ 
  struct isup_call *c ;
  struct isup_call *cur ;
  void *tmp ;

  {
  {
#line 2042
  tmp = calloc((size_t )1, sizeof(struct isup_call ));
#line 2042
  c = (struct isup_call *)tmp;
  }
#line 2043
  if (! c) {
#line 2044
    return ((struct isup_call *)((void *)0));
  }
  {
#line 2046
  init_isup_call(c);
  }
#line 2048
  if (nolink) {
#line 2049
    return (c);
  } else {
#line 2051
    cur = ss7->calls;
#line 2052
    if (cur) {
      {
#line 2053
      while (1) {
        while_continue: /* CIL Label */ ;
#line 2053
        if (! cur->next) {
#line 2053
          goto while_break;
        }
#line 2054
        cur = cur->next;
      }
      while_break: /* CIL Label */ ;
      }
#line 2055
      cur->next = c;
    } else {
#line 2057
      ss7->calls = c;
    }
#line 2059
    return (c);
  }
}
}
#line 2063 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
struct isup_call *isup_new_call(struct ss7 *ss7 ) 
{ 
  struct isup_call *tmp ;

  {
  {
#line 2065
  tmp = __isup_new_call(ss7, 0);
  }
#line 2065
  return (tmp);
}
}
#line 2068 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_call_dpc(struct isup_call *c , unsigned int dpc ) 
{ 


  {
#line 2070
  c->dpc = dpc;
#line 2071
  return;
}
}
#line 2073 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_called(struct isup_call *c , char const   *called , unsigned char called_nai ,
                     struct ss7  const  *ss7 ) 
{ 


  {
#line 2075
  if (called) {
#line 2075
    if (*(called + 0)) {
#line 2076
      if (ss7->switchtype == 1U) {
        {
#line 2077
        snprintf((char */* __restrict  */)(c->called_party_num), sizeof(c->called_party_num),
                 (char const   */* __restrict  */)"%s#", called);
        }
      } else {
        {
#line 2079
        snprintf((char */* __restrict  */)(c->called_party_num), sizeof(c->called_party_num),
                 (char const   */* __restrict  */)"%s", called);
        }
      }
#line 2080
      c->called_nai = called_nai;
    }
  }
#line 2083
  return;
}
}
#line 2085 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_oli(struct isup_call *c , int oli_ani2 ) 
{ 


  {
#line 2087
  c->oli_ani2 = oli_ani2;
#line 2088
  return;
}
}
#line 2090 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_calling(struct isup_call *c , char const   *calling , unsigned char calling_nai ,
                      unsigned char presentation_ind , unsigned char screening_ind ) 
{ 


  {
#line 2092
  if (calling) {
#line 2092
    if (*(calling + 0)) {
      {
#line 2093
      strncpy((char */* __restrict  */)(c->calling_party_num), (char const   */* __restrict  */)calling,
              sizeof(c->calling_party_num));
#line 2094
      c->calling_nai = calling_nai;
#line 2095
      c->presentation_ind = presentation_ind;
#line 2096
      c->screening_ind = screening_ind;
      }
    }
  }
#line 2098
  return;
}
}
#line 2100 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_charge(struct isup_call *c , char const   *charge , unsigned char charge_nai ,
                     unsigned char charge_num_plan ) 
{ 


  {
#line 2102
  if (charge) {
#line 2102
    if (*(charge + 0)) {
      {
#line 2103
      strncpy((char */* __restrict  */)(c->charge_number), (char const   */* __restrict  */)charge,
              sizeof(c->charge_number));
#line 2104
      c->charge_nai = charge_nai;
#line 2105
      c->charge_num_plan = charge_num_plan;
      }
    }
  }
#line 2107
  return;
}
}
#line 2109 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_gen_address(struct isup_call *c , char const   *gen_number , unsigned char gen_add_nai ,
                          unsigned char gen_pres_ind , unsigned char gen_num_plan ,
                          unsigned char gen_add_type ) 
{ 


  {
#line 2111
  if (gen_number) {
#line 2111
    if (*(gen_number + 0)) {
      {
#line 2112
      strncpy((char */* __restrict  */)(c->gen_add_number), (char const   */* __restrict  */)gen_number,
              sizeof(c->gen_add_number));
#line 2113
      c->gen_add_nai = gen_add_nai;
#line 2114
      c->gen_add_pres_ind = gen_pres_ind;
#line 2115
      c->gen_add_num_plan = gen_num_plan;
#line 2116
      c->gen_add_type = gen_add_type;
      }
    }
  }
#line 2118
  return;
}
}
#line 2120 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_gen_digits(struct isup_call *c , char const   *gen_number , unsigned char gen_dig_type ,
                         unsigned char gen_dig_scheme ) 
{ 


  {
#line 2122
  if (gen_number) {
#line 2122
    if (*(gen_number + 0)) {
      {
#line 2123
      strncpy((char */* __restrict  */)(c->gen_dig_number), (char const   */* __restrict  */)gen_number,
              sizeof(c->gen_dig_number));
#line 2124
      c->gen_dig_type = gen_dig_type;
#line 2125
      c->gen_dig_scheme = gen_dig_scheme;
      }
    }
  }
#line 2127
  return;
}
}
#line 2129 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_generic_name(struct isup_call *c , char const   *generic_name , unsigned int typeofname ,
                           unsigned int availability , unsigned int presentation ) 
{ 


  {
#line 2131
  if (generic_name) {
#line 2131
    if (*(generic_name + 0)) {
      {
#line 2132
      strncpy((char */* __restrict  */)(c->generic_name), (char const   */* __restrict  */)generic_name,
              sizeof(c->generic_name));
#line 2134
      c->generic_name[15] = (char )'\000';
#line 2135
      c->generic_name_typeofname = (unsigned char )typeofname;
#line 2136
      c->generic_name_avail = (unsigned char )availability;
#line 2137
      c->generic_name_presentation = (unsigned char )presentation;
      }
    }
  }
#line 2139
  return;
}
}
#line 2141 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_jip_digits(struct isup_call *c , char const   *jip_number ) 
{ 


  {
#line 2143
  if (jip_number) {
#line 2143
    if (*(jip_number + 0)) {
      {
#line 2144
      strncpy((char */* __restrict  */)(c->jip_number), (char const   */* __restrict  */)jip_number,
              sizeof(c->jip_number));
      }
    }
  }
#line 2146
  return;
}
}
#line 2148 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_lspi(struct isup_call *c , char const   *lspi_ident , unsigned char lspi_type ,
                   unsigned char lspi_scheme , unsigned char lspi_context ) 
{ 


  {
#line 2150
  if (lspi_ident) {
#line 2150
    if (*(lspi_ident + 0)) {
      {
#line 2151
      strncpy((char */* __restrict  */)(c->lspi_ident), (char const   */* __restrict  */)lspi_ident,
              sizeof(c->lspi_ident));
#line 2152
      c->lspi_context = lspi_context;
#line 2153
      c->lspi_scheme = lspi_scheme;
#line 2154
      c->lspi_type = lspi_type;
      }
    }
  }
#line 2156
  return;
}
}
#line 2158 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_set_callref(struct isup_call *c , unsigned int call_ref_ident , unsigned int call_ref_pc ) 
{ 


  {
#line 2160
  c->call_ref_ident = call_ref_ident;
#line 2161
  c->call_ref_pc = call_ref_pc;
#line 2162
  return;
}
}
#line 2164 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
void isup_init_call(struct ss7 *ss7 , struct isup_call *c , int cic , unsigned int dpc ) 
{ 


  {
#line 2166
  c->cic = (unsigned short )cic;
#line 2167
  c->dpc = dpc;
#line 2168
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
    {
#line 2169
    c->sls = ansi_sls_next(ss7);
    }
  } else {
#line 2171
    c->sls = (unsigned char )(cic & 15);
  }
#line 2172
  return;
}
}
#line 2174 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct isup_call *isup_find_call(struct ss7 *ss7 , struct routing_label *rl ,
                                        int cic ) 
{ 
  struct isup_call *cur ;
  struct isup_call *winner ;

  {
#line 2176
  winner = (struct isup_call *)((void *)0);
#line 2178
  cur = ss7->calls;
  {
#line 2179
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2179
    if (! cur) {
#line 2179
      goto while_break;
    }
#line 2180
    if ((int )cur->cic == cic) {
#line 2180
      if (cur->dpc == rl->opc) {
#line 2181
        winner = cur;
#line 2182
        goto while_break;
      }
    }
#line 2184
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 2187
  if (! winner) {
    {
#line 2188
    winner = __isup_new_call(ss7, 0);
#line 2189
    winner->cic = (unsigned short )cic;
#line 2190
    winner->dpc = rl->opc;
#line 2191
    winner->sls = rl->sls;
    }
  }
#line 2194
  return (winner);
}
}
#line 2197 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_free_call(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  struct isup_call *cur ;
  struct isup_call *prev ;
  struct isup_call *winner ;

  {
#line 2199
  prev = (struct isup_call *)((void *)0);
#line 2199
  winner = (struct isup_call *)((void *)0);
#line 2201
  cur = ss7->calls;
  {
#line 2202
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2202
    if (! cur) {
#line 2202
      goto while_break;
    }
#line 2203
    if ((unsigned long )cur == (unsigned long )c) {
#line 2204
      winner = cur;
#line 2205
      goto while_break;
    }
#line 2207
    prev = cur;
#line 2208
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 2211
  if (winner) {
#line 2212
    if (! prev) {
#line 2213
      ss7->calls = winner->next;
    } else {
#line 2215
      prev->next = winner->next;
    }
  }
  {
#line 2218
  free((void *)c);
  }
#line 2220
  return;
}
}
#line 2223 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int do_parm(struct ss7 *ss7 , struct isup_call *c , int message , int parm ,
                   unsigned char *parmbuf , int maxlen , int parmtype , int tx ) 
{ 
  struct isup_parm_opt *optparm ;
  int x ;
  int res ;
  int totalparms ;
  int tmp ;
  int tmp___0 ;

  {
#line 2225
  optparm = (struct isup_parm_opt *)((void *)0);
#line 2227
  res = 0;
#line 2228
  totalparms = (int )(sizeof(parms) / sizeof(struct parm_func ));
#line 2230
  x = 0;
  {
#line 2230
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2230
    if (! (x < totalparms)) {
#line 2230
      goto while_break;
    }
#line 2231
    if (parms[x].parm == parm) {
#line 2232
      if (tx) {
#line 2232
        if (parms[x].transmit) {
#line 2232
          goto _L;
        } else {
#line 2232
          goto _L___0;
        }
      } else
      _L___0: /* CIL Label */ 
#line 2232
      if (! tx) {
#line 2232
        if (parms[x].receive) {
          _L: /* CIL Label */ 
          {
#line 2234
          if (parmtype == 1) {
#line 2234
            goto case_1;
          }
#line 2239
          if (parmtype == 2) {
#line 2239
            goto case_2;
          }
#line 2252
          if (parmtype == 3) {
#line 2252
            goto case_3;
          }
#line 2233
          goto switch_break;
          case_1: /* CIL Label */ 
#line 2235
          if (tx) {
            {
#line 2236
            tmp = (*(parms[x].transmit))(ss7, c, message, parmbuf, maxlen);
            }
#line 2236
            return (tmp);
          } else {
            {
#line 2238
            tmp___0 = (*(parms[x].receive))(ss7, c, message, parmbuf, maxlen);
            }
#line 2238
            return (tmp___0);
          }
          case_2: /* CIL Label */ 
#line 2240
          if (tx) {
            {
#line 2241
            res = (*(parms[x].transmit))(ss7, c, message, parmbuf + 1, maxlen);
            }
#line 2242
            if (res > 0) {
#line 2243
              *(parmbuf + 0) = (unsigned char )res;
#line 2244
              return (res + 1);
            }
#line 2246
            return (res);
          } else {
            {
#line 2248
            (*(parms[x].receive))(ss7, c, message, parmbuf + 1, (int )*(parmbuf + 0));
            }
#line 2249
            return (1 + (int )*(parmbuf + 0));
          }
          case_3: /* CIL Label */ 
#line 2253
          optparm = (struct isup_parm_opt *)parmbuf;
#line 2254
          if (tx) {
            {
#line 2255
            optparm->type = (unsigned char )parms[x].parm;
#line 2256
            res = (*(parms[x].transmit))(ss7, c, message, optparm->data, maxlen);
            }
#line 2257
            if (res > 0) {
#line 2258
              optparm->len = (unsigned char )res;
            } else {
#line 2260
              return (res);
            }
          } else {
            {
#line 2262
            res = (*(parms[x].receive))(ss7, c, message, optparm->data, (int )optparm->len);
            }
          }
#line 2263
          return (res + 2);
          switch_break: /* CIL Label */ ;
          }
        }
      }
    }
#line 2230
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2268
  return (-1);
}
}
#line 2271 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int dump_parm(struct ss7 *ss7 , int message , int parm , unsigned char *parmbuf ,
                     int maxlen , int parmtype ) 
{ 
  struct isup_parm_opt *optparm ;
  int x ;
  int len ;
  int totalparms ;
  char const   *tmp ;

  {
#line 2273
  optparm = (struct isup_parm_opt *)((void *)0);
#line 2275
  len = 0;
#line 2276
  totalparms = (int )(sizeof(parms) / sizeof(struct parm_func ));
#line 2278
  x = 0;
  {
#line 2278
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2278
    if (! (x < totalparms)) {
#line 2278
      goto while_break;
    }
#line 2279
    if (parms[x].parm == parm) {
#line 2281
      if (parms[x].name) {
#line 2281
        tmp = (char const   *)parms[x].name;
      } else {
#line 2281
        tmp = "Unknown";
      }
      {
#line 2281
      ss7_message(ss7, (char *)"\t\t%s:\n", tmp);
      }
#line 2283
      if (parms[x].dump) {
        {
#line 2285
        if (parmtype == 1) {
#line 2285
          goto case_1;
        }
#line 2288
        if (parmtype == 2) {
#line 2288
          goto case_2;
        }
#line 2292
        if (parmtype == 3) {
#line 2292
          goto case_3;
        }
#line 2284
        goto switch_break;
        case_1: /* CIL Label */ 
        {
#line 2286
        len = (*(parms[x].dump))(ss7, message, parmbuf, maxlen);
        }
#line 2287
        goto switch_break;
        case_2: /* CIL Label */ 
        {
#line 2289
        (*(parms[x].dump))(ss7, message, parmbuf + 1, (int )*(parmbuf + 0));
#line 2290
        len = 1 + (int )*(parmbuf + 0);
        }
#line 2291
        goto switch_break;
        case_3: /* CIL Label */ 
        {
#line 2293
        optparm = (struct isup_parm_opt *)parmbuf;
#line 2294
        (*(parms[x].dump))(ss7, message, optparm->data, (int )optparm->len);
#line 2295
        len = 2 + (int )optparm->len;
        }
#line 2296
        goto switch_break;
        switch_break: /* CIL Label */ ;
        }
      } else {
        {
#line 2301
        if (parmtype == 2) {
#line 2301
          goto case_2___0;
        }
#line 2304
        if (parmtype == 3) {
#line 2304
          goto case_3___0;
        }
#line 2300
        goto switch_break___0;
        case_2___0: /* CIL Label */ 
#line 2302
        len = (int )*(parmbuf + 0) + 1;
#line 2303
        goto switch_break___0;
        case_3___0: /* CIL Label */ 
#line 2305
        optparm = (struct isup_parm_opt *)parmbuf;
#line 2306
        len = (int )optparm->len + 2;
#line 2307
        goto switch_break___0;
        switch_break___0: /* CIL Label */ ;
        }
      }
      {
#line 2311
      ss7_dump_buf(ss7, 3, parmbuf, len);
      }
#line 2312
      return (len);
    }
#line 2278
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 2317
  optparm = (struct isup_parm_opt *)parmbuf;
#line 2318
  ss7_message(ss7, (char *)"\t\tUnknown Parameter (0x%x):\n", (int )optparm->type);
#line 2319
  ss7_dump_buf(ss7, 3, optparm->data, (int )optparm->len);
  }
#line 2320
  return ((int )optparm->len + 2);
}
}
#line 2323 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_message(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                             int *parms___1 ) 
{ 
  struct ss7_msg *msg ;
  struct isup_h *mh ;
  unsigned char *rlptr ;
  int ourmessage ;
  int rlsize ;
  unsigned char *varoffsets ;
  unsigned char *opt_ptr ;
  int fixedparams ;
  int varparams ;
  int optparams ;
  int len ;
  struct routing_label rl ;
  int res ;
  int offset ;
  int x ;
  int i ;
  char *tmp ;
  char *tmp___0 ;
  int addedparms ;
  int offsetbegins ;
  char *tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
  {
#line 2326
  mh = (struct isup_h *)((void *)0);
#line 2328
  ourmessage = -1;
#line 2330
  varoffsets = (unsigned char *)((void *)0);
#line 2331
  fixedparams = 0;
#line 2331
  varparams = 0;
#line 2331
  optparams = 0;
#line 2332
  len = (int )sizeof(struct ss7_msg );
#line 2334
  res = 0;
#line 2335
  offset = 0;
#line 2336
  x = 0;
#line 2337
  i = 0;
#line 2340
  msg = ss7_msg_new();
  }
#line 2342
  if (! msg) {
    {
#line 2343
    ss7_error(ss7, (char *)"Allocation failed!\n");
    }
#line 2344
    return (-1);
  }
  {
#line 2347
  rlptr = ss7_msg_userpart(msg);
#line 2350
  rl.opc = ss7->pc;
#line 2352
  rl.dpc = c->dpc;
#line 2353
  rl.sls = c->sls;
#line 2354
  rl.type = ss7->switchtype;
#line 2355
  rlsize = set_routinglabel(rlptr, & rl);
#line 2356
  mh = (struct isup_h *)(rlptr + rlsize);
  }
#line 2359
  if (ss7->switchtype == 1U) {
#line 2360
    mh->cic[0] = (unsigned char )((int )c->cic & 255);
#line 2361
    mh->cic[1] = (unsigned char )(((int )c->cic >> 8) & 15);
  } else {
#line 2363
    mh->cic[0] = (unsigned char )((int )c->cic & 255);
#line 2364
    mh->cic[1] = (unsigned char )(((int )c->cic >> 8) & 63);
  }
#line 2367
  mh->type = (unsigned char )messagetype;
#line 2369
  x = 0;
  {
#line 2369
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2369
    if (! ((unsigned long )x < sizeof(messages) / sizeof(struct message_data ))) {
#line 2369
      goto while_break;
    }
#line 2370
    if (messages[x].messagetype == messagetype) {
#line 2371
      ourmessage = x;
    }
#line 2369
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2373
  if (ourmessage < 0) {
    {
#line 2374
    ss7_error(ss7, (char *)"Unable to find message %d in message list!\n", (int )mh->type);
    }
#line 2375
    return (-1);
  }
#line 2378
  fixedparams = messages[ourmessage].mand_fixed_params;
#line 2379
  varparams = messages[ourmessage].mand_var_params;
#line 2380
  optparams = messages[ourmessage].opt_params;
#line 2383
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 2384
    if (messages[ourmessage].messagetype == 1) {
#line 2385
      fixedparams = 3;
#line 2386
      varparams = 2;
    } else
#line 2387
    if (messages[ourmessage].messagetype == 16) {
#line 2388
      optparams = 0;
    }
  }
#line 2393
  x = 0;
  {
#line 2393
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2393
    if (! (x < fixedparams)) {
#line 2393
      goto while_break___0;
    }
    {
#line 2394
    res = do_parm(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                  len, 1, 1);
    }
#line 2396
    if (res < 0) {
      {
#line 2397
      tmp = param2str(*(parms___1 + x));
#line 2397
      ss7_error(ss7, (char *)"!! Unable to add mandatory fixed parameter \'%s\'\n",
                tmp);
      }
#line 2398
      return (-1);
    }
#line 2401
    len -= res;
#line 2402
    offset += res;
#line 2393
    x ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2405
  varoffsets = & mh->data[offset];
#line 2407
  if (optparams) {
#line 2408
    opt_ptr = & mh->data[offset + varparams];
#line 2409
    offset += varparams + 1;
#line 2410
    len -= varparams + 1;
  } else {
#line 2412
    offset += varparams;
#line 2413
    len -= varparams;
  }
  {
#line 2417
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 2417
    if (! (x - fixedparams < varparams)) {
#line 2417
      goto while_break___1;
    }
    {
#line 2418
    *(varoffsets + i) = (unsigned char )(& mh->data[offset] - (varoffsets + i));
#line 2419
    i ++;
#line 2420
    res = do_parm(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                  len, 2, 1);
    }
#line 2422
    if (res < 0) {
      {
#line 2423
      tmp___0 = param2str(*(parms___1 + x));
#line 2423
      ss7_error(ss7, (char *)"!! Unable to add mandatory variable parameter \'%s\'\n",
                tmp___0);
      }
#line 2424
      return (-1);
    }
#line 2427
    len -= res;
#line 2428
    offset += res;
#line 2417
    x ++;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 2431
  if (optparams) {
#line 2432
    addedparms = 0;
#line 2433
    offsetbegins = offset;
    {
#line 2434
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 2434
      if (! (*(parms___1 + x) > -1)) {
#line 2434
        goto while_break___2;
      }
      {
#line 2435
      res = do_parm(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                    len, 3, 1);
#line 2436
      x ++;
      }
#line 2438
      if (res < 0) {
        {
#line 2439
        tmp___1 = param2str(*(parms___1 + x));
#line 2439
        ss7_error(ss7, (char *)"!! Unable to add optional parameter \'%s\'\n", tmp___1);
        }
#line 2440
        return (-1);
      }
#line 2443
      if (res > 0) {
#line 2444
        addedparms ++;
      }
#line 2446
      len -= res;
#line 2447
      offset += res;
    }
    while_break___2: /* CIL Label */ ;
    }
#line 2450
    if (addedparms) {
#line 2451
      *opt_ptr = (unsigned char )(& mh->data[offsetbegins] - opt_ptr);
#line 2453
      tmp___2 = offset;
#line 2453
      offset ++;
#line 2453
      mh->data[tmp___2] = (unsigned char)0;
    } else {
#line 2455
      *opt_ptr = (unsigned char)0;
    }
  }
  {
#line 2459
  ss7_msg_userpart_len(msg, ((offset + rlsize) + 2) + 1);
#line 2461
  tmp___3 = mtp3_transmit(ss7, (unsigned char)5, rl.sls, msg);
  }
#line 2461
  return (tmp___3);
}
}
#line 2464 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_dump(struct ss7 *ss7 , struct mtp2 *link , unsigned char *buf , int len ) 
{ 
  struct isup_h *mh ;
  unsigned short cic ;
  int ourmessage ;
  int *parms___1 ;
  int offset ;
  int fixedparams ;
  int varparams ;
  int optparams ;
  int res ;
  int x ;
  unsigned char *opt_ptr ;
  char *tmp ;
  char *tmp___0 ;
  int tmp___1 ;
  char *tmp___2 ;
  struct isup_parm_opt *optparm ;

  {
#line 2468
  ourmessage = -1;
#line 2469
  parms___1 = (int *)((void *)0);
#line 2470
  offset = 0;
#line 2471
  fixedparams = 0;
#line 2471
  varparams = 0;
#line 2471
  optparams = 0;
#line 2473
  opt_ptr = (unsigned char *)((void *)0);
#line 2475
  mh = (struct isup_h *)buf;
#line 2477
  if (ss7->switchtype == 1U) {
#line 2478
    cic = (unsigned short )((int )mh->cic[0] | (((int )mh->cic[1] & 15) << 8));
  } else {
#line 2480
    cic = (unsigned short )((int )mh->cic[0] | (((int )mh->cic[1] & 63) << 8));
  }
  {
#line 2483
  ss7_message(ss7, (char *)"\t\tCIC: %d\n", (int )cic);
#line 2484
  ss7_dump_buf(ss7, 2, buf, 2);
#line 2485
  tmp = message2str(mh->type);
#line 2485
  ss7_message(ss7, (char *)"\t\tMessage Type: %s\n", tmp, (int )mh->type & 255);
#line 2486
  ss7_dump_buf(ss7, 2, buf + 2, 1);
#line 2489
  x = 0;
  }
  {
#line 2489
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2489
    if (! ((unsigned long )x < sizeof(messages) / sizeof(struct message_data ))) {
#line 2489
      goto while_break;
    }
#line 2490
    if (messages[x].messagetype == (int )mh->type) {
#line 2491
      ourmessage = x;
    }
#line 2489
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2493
  if (ourmessage < 0) {
    {
#line 2494
    ss7_error(ss7, (char *)"!! Unable to handle message of type 0x%x\n", (int )mh->type);
    }
#line 2495
    return (-1);
  }
#line 2498
  fixedparams = messages[ourmessage].mand_fixed_params;
#line 2499
  varparams = messages[ourmessage].mand_var_params;
#line 2500
  parms___1 = messages[ourmessage].param_list;
#line 2501
  optparams = messages[ourmessage].opt_params;
#line 2503
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 2505
    if (messages[ourmessage].messagetype == 1) {
#line 2507
      fixedparams = 3;
#line 2508
      varparams = 2;
#line 2509
      parms___1 = ansi_iam_params;
    } else
#line 2510
    if (messages[ourmessage].messagetype == 16) {
#line 2511
      optparams = 0;
    }
  }
#line 2515
  if (fixedparams) {
    {
#line 2516
    ss7_message(ss7, (char *)"\t\t--FIXED LENGTH PARMS[%d]--\n", fixedparams);
    }
  }
#line 2519
  x = 0;
  {
#line 2519
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2519
    if (! (x < fixedparams)) {
#line 2519
      goto while_break___0;
    }
    {
#line 2520
    res = dump_parm(ss7, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                    len, 1);
    }
#line 2522
    if (res < 0) {
      {
#line 2523
      tmp___0 = param2str(*(parms___1 + x));
#line 2523
      ss7_error(ss7, (char *)"!! Unable to parse mandatory fixed parameter \'%s\'\n",
                tmp___0);
      }
#line 2524
      return (-1);
    }
#line 2527
    len -= res;
#line 2528
    offset += res;
#line 2519
    x ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2531
  if (varparams) {
#line 2532
    offset += varparams;
#line 2533
    len -= varparams;
  }
#line 2535
  if (optparams) {
#line 2536
    tmp___1 = offset;
#line 2536
    offset ++;
#line 2536
    opt_ptr = & mh->data[tmp___1];
#line 2537
    len ++;
  }
#line 2540
  if (varparams) {
    {
#line 2541
    ss7_message(ss7, (char *)"\t\t--VARIABLE LENGTH PARMS[%d]--\n", varparams);
    }
  }
  {
#line 2542
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 2542
    if (! (x - fixedparams < varparams)) {
#line 2542
      goto while_break___1;
    }
    {
#line 2543
    res = dump_parm(ss7, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                    len, 2);
    }
#line 2545
    if (res < 0) {
      {
#line 2546
      tmp___2 = param2str(*(parms___1 + x));
#line 2546
      ss7_error(ss7, (char *)"!! Unable to parse mandatory variable parameter \'%s\'\n",
                tmp___2);
      }
#line 2547
      return (-1);
    }
#line 2550
    len -= res;
#line 2551
    offset += res;
#line 2542
    x ++;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 2555
  if (optparams) {
#line 2555
    if (*opt_ptr) {
#line 2556
      if (len > 0) {
        {
#line 2557
        ss7_message(ss7, (char *)"\t\t--OPTIONAL PARMS--\n");
        }
      }
      {
#line 2558
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 2558
        if (len > 0) {
#line 2558
          if (! ((int )mh->data[offset] != 0)) {
#line 2558
            goto while_break___2;
          }
        } else {
#line 2558
          goto while_break___2;
        }
        {
#line 2559
        optparm = (struct isup_parm_opt *)(mh->data + offset);
#line 2561
        res = dump_parm(ss7, (int )mh->type, (int )optparm->type, (unsigned char *)((void *)(mh->data + offset)),
                        (int )optparm->len, 3);
        }
#line 2563
        if (res < 0) {
#line 2568
          res = (int )optparm->len + 2;
        }
#line 2571
        len -= res;
#line 2572
        offset += res;
      }
      while_break___2: /* CIL Label */ ;
      }
    }
  }
#line 2576
  return (0);
}
}
#line 2579 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_receive(struct ss7 *ss7 , struct mtp2 *link , struct routing_label *rl ,
                 unsigned char *buf , int len ) 
{ 
  unsigned short cic ;
  struct isup_h *mh ;
  struct isup_call *c ;
  int i ;
  int *parms___1 ;
  int offset ;
  int ourmessage ;
  int fixedparams ;
  int varparams ;
  int optparams ;
  int res ;
  int x ;
  unsigned char *opt_ptr ;
  unsigned int opc ;
  ss7_event *e ;
  char *tmp ;
  int tmp___0 ;
  char *tmp___1 ;
  struct isup_parm_opt *optparm ;
  char *tmp___2 ;

  {
#line 2585
  parms___1 = (int *)((void *)0);
#line 2586
  offset = 0;
#line 2587
  ourmessage = -1;
#line 2588
  fixedparams = 0;
#line 2588
  varparams = 0;
#line 2588
  optparams = 0;
#line 2590
  opt_ptr = (unsigned char *)((void *)0);
#line 2591
  opc = rl->opc;
#line 2595
  mh = (struct isup_h *)buf;
#line 2596
  if (ss7->switchtype == 1U) {
#line 2597
    cic = (unsigned short )((int )mh->cic[0] | (((int )mh->cic[1] & 15) << 8));
  } else {
#line 2599
    cic = (unsigned short )((int )mh->cic[0] | (((int )mh->cic[1] & 63) << 8));
  }
#line 2603
  x = 0;
  {
#line 2603
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2603
    if (! ((unsigned long )x < sizeof(messages) / sizeof(struct message_data ))) {
#line 2603
      goto while_break;
    }
#line 2604
    if (messages[x].messagetype == (int )mh->type) {
#line 2605
      ourmessage = x;
    }
#line 2603
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2608
  if (ourmessage < 0) {
    {
#line 2609
    ss7_error(ss7, (char *)"!! Unable to handle message of type 0x%x on CIC %d\n",
              (int )mh->type, (int )cic);
    }
#line 2610
    return (-1);
  }
#line 2613
  fixedparams = messages[ourmessage].mand_fixed_params;
#line 2614
  varparams = messages[ourmessage].mand_var_params;
#line 2615
  parms___1 = messages[ourmessage].param_list;
#line 2616
  optparams = messages[ourmessage].opt_params;
#line 2618
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 2620
    if (messages[ourmessage].messagetype == 1) {
#line 2622
      fixedparams = 3;
#line 2623
      varparams = 2;
#line 2624
      parms___1 = ansi_iam_params;
    } else
#line 2625
    if (messages[ourmessage].messagetype == 16) {
#line 2626
      optparams = 0;
    }
  }
  {
#line 2645
  if ((int )mh->type == 31) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 32) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 18) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 16) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 12) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 7) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 5) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 44) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 6) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 9) {
#line 2645
    goto case_31;
  }
#line 2645
  if ((int )mh->type == 1) {
#line 2645
    goto case_31;
  }
#line 2648
  goto switch_default;
  case_31: /* CIL Label */ 
  case_32: /* CIL Label */ 
  case_18: /* CIL Label */ 
  case_16: /* CIL Label */ 
  case_12: /* CIL Label */ 
  case_7: /* CIL Label */ 
  case_5: /* CIL Label */ 
  case_44: /* CIL Label */ 
  case_6: /* CIL Label */ 
  case_9: /* CIL Label */ 
  case_1: /* CIL Label */ 
  {
#line 2646
  c = isup_find_call(ss7, rl, (int )cic);
  }
#line 2647
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 2649
  c = __isup_new_call(ss7, 1);
#line 2650
  c->dpc = rl->opc;
#line 2651
  c->cic = cic;
  }
#line 2652
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 2655
  if (! c) {
    {
#line 2656
    ss7_error(ss7, (char *)"Huh? No call!!!???\n");
    }
#line 2657
    return (-1);
  }
#line 2661
  x = 0;
  {
#line 2661
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2661
    if (! (x < fixedparams)) {
#line 2661
      goto while_break___0;
    }
    {
#line 2662
    res = do_parm(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                  len, 1, 0);
    }
#line 2664
    if (res < 0) {
      {
#line 2665
      tmp = param2str(*(parms___1 + x));
#line 2665
      ss7_error(ss7, (char *)"!! Unable to parse mandatory fixed parameter \'%s\'\n",
                tmp);
      }
#line 2666
      return (-1);
    }
#line 2669
    len -= res;
#line 2670
    offset += res;
#line 2661
    x ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2673
  if (varparams) {
#line 2674
    offset += varparams;
#line 2675
    res -= varparams;
  }
#line 2677
  if (optparams) {
#line 2679
    tmp___0 = offset;
#line 2679
    offset ++;
#line 2679
    opt_ptr = & mh->data[tmp___0];
  }
  {
#line 2682
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 2682
    if (! (x - fixedparams < varparams)) {
#line 2682
      goto while_break___1;
    }
    {
#line 2683
    res = do_parm(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                  len, 2, 0);
    }
#line 2685
    if (res < 0) {
      {
#line 2686
      tmp___1 = param2str(*(parms___1 + x));
#line 2686
      ss7_error(ss7, (char *)"!! Unable to parse mandatory variable parameter \'%s\'\n",
                tmp___1);
      }
#line 2687
      return (-1);
    }
#line 2690
    len -= res;
#line 2691
    offset += res;
#line 2682
    x ++;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 2695
  if (optparams) {
#line 2695
    if (*opt_ptr) {
      {
#line 2696
      while (1) {
        while_continue___2: /* CIL Label */ ;
#line 2696
        if (len > 0) {
#line 2696
          if (! ((int )mh->data[offset] != 0)) {
#line 2696
            goto while_break___2;
          }
        } else {
#line 2696
          goto while_break___2;
        }
        {
#line 2697
        optparm = (struct isup_parm_opt *)(mh->data + offset);
#line 2699
        res = do_parm(ss7, c, (int )mh->type, (int )optparm->type, mh->data + offset,
                      len, 3, 0);
        }
#line 2701
        if (res < 0) {
          {
#line 2702
          tmp___2 = param2str((int )optparm->type);
#line 2702
          ss7_message(ss7, (char *)"Unhandled optional parameter 0x%x \'%s\'\n", (int )optparm->type,
                      tmp___2);
#line 2703
          isup_dump_buffer(ss7, optparm->data, (int )optparm->len);
#line 2704
          res = (int )optparm->len + 2;
          }
        }
#line 2707
        len -= res;
#line 2708
        offset += res;
      }
      while_break___2: /* CIL Label */ ;
      }
    }
  }
  {
#line 2713
  if ((int )mh->type == 1) {
#line 2713
    goto case_1___0;
  }
#line 2763
  if ((int )mh->type == 42) {
#line 2763
    goto case_42;
  }
#line 2776
  if ((int )mh->type == 23) {
#line 2776
    goto case_23;
  }
#line 2789
  if ((int )mh->type == 41) {
#line 2789
    goto case_41;
  }
#line 2805
  if ((int )mh->type == 18) {
#line 2805
    goto case_18___0;
  }
#line 2817
  if ((int )mh->type == 12) {
#line 2817
    goto case_12___0;
  }
#line 2830
  if ((int )mh->type == 6) {
#line 2830
    goto case_6___0;
  }
#line 2845
  if ((int )mh->type == 7) {
#line 2845
    goto case_7___0;
  }
#line 2857
  if ((int )mh->type == 9) {
#line 2857
    goto case_9___0;
  }
#line 2869
  if ((int )mh->type == 16) {
#line 2869
    goto case_16___0;
  }
#line 2881
  if ((int )mh->type == 5) {
#line 2881
    goto case_5___0;
  }
#line 2894
  if ((int )mh->type == 17) {
#line 2894
    goto case_17;
  }
#line 2906
  if ((int )mh->type == 236) {
#line 2906
    goto case_236;
  }
#line 2917
  if ((int )mh->type == 19) {
#line 2917
    goto case_19;
  }
#line 2929
  if ((int )mh->type == 20) {
#line 2929
    goto case_20;
  }
#line 2941
  if ((int )mh->type == 21) {
#line 2941
    goto case_21;
  }
#line 2953
  if ((int )mh->type == 36) {
#line 2953
    goto case_36;
  }
#line 2965
  if ((int )mh->type == 22) {
#line 2965
    goto case_22;
  }
#line 2977
  if ((int )mh->type == 24) {
#line 2977
    goto case_24;
  }
#line 2995
  if ((int )mh->type == 25) {
#line 2995
    goto case_25;
  }
#line 3013
  if ((int )mh->type == 44) {
#line 3013
    goto case_44___0;
  }
#line 3025
  if ((int )mh->type == 46) {
#line 3025
    goto case_46;
  }
#line 3037
  if ((int )mh->type == 32) {
#line 3037
    goto case_32___0;
  }
#line 3051
  if ((int )mh->type == 31) {
#line 3051
    goto case_31___0;
  }
#line 3065
  goto switch_default___0;
  case_1___0: /* CIL Label */ 
  {
#line 2714
  e = ss7_next_empty_event(ss7);
  }
#line 2715
  if (! e) {
    {
#line 2716
    isup_free_call(ss7, c);
    }
#line 2717
    return (-1);
  }
  {
#line 2720
  e->e = 5;
#line 2721
  e->iam.cic = (int )c->cic;
#line 2722
  e->iam.transcap = c->transcap;
#line 2723
  e->iam.cot_check_required = c->cot_check_required;
#line 2724
  strncpy((char */* __restrict  */)(e->iam.called_party_num), (char const   */* __restrict  */)(c->called_party_num),
          sizeof(e->iam.called_party_num));
#line 2725
  e->iam.called_nai = c->called_nai;
#line 2726
  strncpy((char */* __restrict  */)(e->iam.calling_party_num), (char const   */* __restrict  */)(c->calling_party_num),
          sizeof(e->iam.calling_party_num));
#line 2727
  e->iam.calling_nai = c->calling_nai;
#line 2728
  e->iam.presentation_ind = c->presentation_ind;
#line 2729
  e->iam.screening_ind = c->screening_ind;
#line 2730
  strncpy((char */* __restrict  */)(e->iam.charge_number), (char const   */* __restrict  */)(c->charge_number),
          sizeof(e->iam.charge_number));
#line 2731
  e->iam.charge_nai = c->charge_nai;
#line 2732
  e->iam.charge_num_plan = c->charge_num_plan;
#line 2733
  e->iam.oli_ani2 = c->oli_ani2;
#line 2734
  e->iam.gen_add_nai = c->gen_add_nai;
#line 2735
  e->iam.gen_add_num_plan = c->gen_add_num_plan;
#line 2736
  strncpy((char */* __restrict  */)(e->iam.gen_add_number), (char const   */* __restrict  */)(c->gen_add_number),
          sizeof(e->iam.gen_add_number));
#line 2737
  e->iam.gen_add_pres_ind = c->gen_add_pres_ind;
#line 2738
  e->iam.gen_add_type = c->gen_add_type;
#line 2739
  strncpy((char */* __restrict  */)(e->iam.gen_dig_number), (char const   */* __restrict  */)(c->gen_dig_number),
          sizeof(e->iam.gen_dig_number));
#line 2740
  e->iam.gen_dig_type = c->gen_dig_type;
#line 2741
  e->iam.gen_dig_scheme = c->gen_dig_scheme;
#line 2742
  strncpy((char */* __restrict  */)(e->iam.jip_number), (char const   */* __restrict  */)(c->jip_number),
          sizeof(e->iam.jip_number));
#line 2743
  strncpy((char */* __restrict  */)(e->iam.generic_name), (char const   */* __restrict  */)(c->generic_name),
          sizeof(e->iam.generic_name));
#line 2744
  e->iam.generic_name_typeofname = c->generic_name_typeofname;
#line 2745
  e->iam.generic_name_avail = c->generic_name_avail;
#line 2746
  e->iam.generic_name_presentation = c->generic_name_presentation;
#line 2747
  e->iam.lspi_type = c->lspi_type;
#line 2748
  e->iam.lspi_scheme = c->lspi_scheme;
#line 2749
  e->iam.lspi_context = c->lspi_context;
#line 2750
  strncpy((char */* __restrict  */)(e->iam.lspi_ident), (char const   */* __restrict  */)(c->lspi_ident),
          sizeof(e->iam.lspi_ident));
#line 2751
  strncpy((char */* __restrict  */)(e->iam.orig_called_num), (char const   */* __restrict  */)(c->orig_called_num),
          sizeof(e->iam.orig_called_num));
#line 2752
  e->iam.orig_called_nai = c->orig_called_nai;
#line 2753
  e->iam.orig_called_pres_ind = c->orig_called_pres_ind;
#line 2754
  e->iam.orig_called_screening_ind = c->orig_called_screening_ind;
#line 2755
  strncpy((char */* __restrict  */)(e->iam.redirecting_num), (char const   */* __restrict  */)(c->redirecting_num),
          sizeof(e->iam.redirecting_num));
#line 2756
  e->iam.redirecting_num_nai = c->redirecting_num_nai;
#line 2757
  e->iam.redirecting_num_presentation_ind = c->redirecting_num_presentation_ind;
#line 2758
  e->iam.redirecting_num_screening_ind = c->redirecting_num_screening_ind;
#line 2759
  e->iam.calling_party_cat = c->calling_party_cat;
#line 2760
  e->iam.call = c;
#line 2761
  e->iam.opc = opc;
  }
#line 2762
  return (0);
  case_42: /* CIL Label */ 
  {
#line 2764
  e = ss7_next_empty_event(ss7);
  }
#line 2765
  if (! e) {
    {
#line 2766
    isup_free_call(ss7, c);
    }
#line 2767
    return (-1);
  }
  {
#line 2770
  e->e = 25;
#line 2771
  e->cqm.startcic = (int )cic;
#line 2772
  e->cqm.endcic = (int )cic + c->range;
#line 2773
  e->cqm.opc = opc;
#line 2774
  isup_free_call(ss7, c);
  }
#line 2775
  return (0);
  case_23: /* CIL Label */ 
  {
#line 2777
  e = ss7_next_empty_event(ss7);
  }
#line 2778
  if (! e) {
    {
#line 2779
    isup_free_call(ss7, c);
    }
#line 2780
    return (-1);
  }
  {
#line 2783
  e->e = 10;
#line 2784
  e->grs.startcic = (int )cic;
#line 2785
  e->grs.endcic = (int )cic + c->range;
#line 2786
  isup_free_call(ss7, c);
#line 2787
  e->grs.opc = opc;
  }
#line 2788
  return (0);
  case_41: /* CIL Label */ 
  {
#line 2790
  e = ss7_next_empty_event(ss7);
  }
#line 2791
  if (! e) {
    {
#line 2792
    isup_free_call(ss7, c);
    }
#line 2793
    return (-1);
  }
#line 2796
  e->e = 11;
#line 2797
  e->gra.startcic = (int )cic;
#line 2798
  e->gra.endcic = (int )cic + c->range;
#line 2799
  i = 0;
  {
#line 2799
  while (1) {
    while_continue___3: /* CIL Label */ ;
#line 2799
    if (! (i < c->range + 1)) {
#line 2799
      goto while_break___3;
    }
#line 2800
    e->gra.status[i] = c->status[i];
#line 2799
    i ++;
  }
  while_break___3: /* CIL Label */ ;
  }
  {
#line 2801
  e->gra.opc = opc;
#line 2803
  isup_free_call(ss7, c);
  }
#line 2804
  return (0);
  case_18___0: /* CIL Label */ 
  {
#line 2806
  e = ss7_next_empty_event(ss7);
  }
#line 2807
  if (! e) {
    {
#line 2808
    isup_free_call(ss7, c);
    }
#line 2809
    return (-1);
  }
#line 2812
  e->e = 21;
#line 2813
  e->rsc.cic = (int )cic;
#line 2814
  e->rsc.call = c;
#line 2815
  e->rsc.opc = opc;
#line 2816
  return (0);
  case_12___0: /* CIL Label */ 
  {
#line 2818
  e = ss7_next_empty_event(ss7);
  }
#line 2819
  if (! e) {
    {
#line 2820
    isup_free_call(ss7, c);
    }
#line 2821
    return (-1);
  }
#line 2824
  e->e = 8;
#line 2825
  e->rel.cic = (int )c->cic;
#line 2826
  e->rel.call = c;
#line 2827
  e->rel.cause = c->cause;
#line 2828
  e->rel.opc = opc;
#line 2829
  return (0);
  case_6___0: /* CIL Label */ 
  {
#line 2831
  e = ss7_next_empty_event(ss7);
  }
#line 2832
  if (! e) {
    {
#line 2833
    isup_free_call(ss7, c);
    }
#line 2834
    return (-1);
  }
#line 2837
  e->e = 6;
#line 2838
  e->acm.cic = (int )c->cic;
#line 2839
  e->acm.call_ref_ident = c->call_ref_ident;
#line 2840
  e->acm.call_ref_pc = c->call_ref_pc;
#line 2841
  e->acm.call = c;
#line 2842
  e->acm.opc = opc;
#line 2843
  e->acm.called_party_status_ind = c->called_party_status_ind;
#line 2844
  return (0);
  case_7___0: /* CIL Label */ 
  {
#line 2846
  e = ss7_next_empty_event(ss7);
  }
#line 2847
  if (! e) {
    {
#line 2848
    isup_free_call(ss7, c);
    }
#line 2849
    return (-1);
  }
#line 2852
  e->e = 12;
#line 2853
  e->con.cic = (int )c->cic;
#line 2854
  e->con.call = c;
#line 2855
  e->con.opc = opc;
#line 2856
  return (0);
  case_9___0: /* CIL Label */ 
  {
#line 2858
  e = ss7_next_empty_event(ss7);
  }
#line 2859
  if (! e) {
    {
#line 2860
    isup_free_call(ss7, c);
    }
#line 2861
    return (-1);
  }
#line 2864
  e->e = 7;
#line 2865
  e->anm.cic = (int )c->cic;
#line 2866
  e->anm.call = c;
#line 2867
  e->anm.opc = opc;
#line 2868
  return (0);
  case_16___0: /* CIL Label */ 
  {
#line 2870
  e = ss7_next_empty_event(ss7);
  }
#line 2871
  if (! e) {
    {
#line 2872
    isup_free_call(ss7, c);
    }
#line 2873
    return (-1);
  }
  {
#line 2876
  e->e = 9;
#line 2877
  e->rlc.cic = (int )c->cic;
#line 2878
  e->rlc.opc = opc;
#line 2879
  isup_free_call(ss7, c);
  }
#line 2880
  return (0);
  case_5___0: /* CIL Label */ 
  {
#line 2882
  e = ss7_next_empty_event(ss7);
  }
#line 2883
  if (! e) {
    {
#line 2884
    isup_free_call(ss7, c);
    }
#line 2885
    return (-1);
  }
#line 2888
  e->e = 13;
#line 2889
  e->cot.cic = (int )c->cic;
#line 2890
  e->cot.passed = c->cot_check_passed;
#line 2891
  e->cot.call = c;
#line 2892
  e->cot.opc = opc;
#line 2893
  return (0);
  case_17: /* CIL Label */ 
  {
#line 2895
  e = ss7_next_empty_event(ss7);
  }
#line 2896
  if (! e) {
    {
#line 2897
    isup_free_call(ss7, c);
    }
#line 2898
    return (-1);
  }
  {
#line 2901
  e->e = 14;
#line 2902
  e->ccr.cic = (int )c->cic;
#line 2903
  e->ccr.opc = opc;
#line 2904
  isup_free_call(ss7, c);
  }
#line 2905
  return (0);
  case_236: /* CIL Label */ 
  {
#line 2907
  e = ss7_next_empty_event(ss7);
  }
#line 2908
  if (! e) {
    {
#line 2909
    isup_free_call(ss7, c);
    }
#line 2910
    return (-1);
  }
  {
#line 2913
  e->e = 28;
#line 2914
  e->cvt.cic = (int )c->cic;
#line 2915
  isup_free_call(ss7, c);
  }
#line 2916
  return (0);
  case_19: /* CIL Label */ 
  {
#line 2918
  e = ss7_next_empty_event(ss7);
  }
#line 2919
  if (! e) {
    {
#line 2920
    isup_free_call(ss7, c);
    }
#line 2921
    return (-1);
  }
  {
#line 2924
  e->e = 15;
#line 2925
  e->blo.cic = (int )c->cic;
#line 2926
  e->blo.opc = opc;
#line 2927
  isup_free_call(ss7, c);
  }
#line 2928
  return (0);
  case_20: /* CIL Label */ 
  {
#line 2930
  e = ss7_next_empty_event(ss7);
  }
#line 2931
  if (! e) {
    {
#line 2932
    isup_free_call(ss7, c);
    }
#line 2933
    return (-1);
  }
  {
#line 2936
  e->e = 16;
#line 2937
  e->ubl.cic = (int )c->cic;
#line 2938
  e->ubl.opc = opc;
#line 2939
  isup_free_call(ss7, c);
  }
#line 2940
  return (0);
  case_21: /* CIL Label */ 
  {
#line 2942
  e = ss7_next_empty_event(ss7);
  }
#line 2943
  if (! e) {
    {
#line 2944
    isup_free_call(ss7, c);
    }
#line 2945
    return (-1);
  }
  {
#line 2948
  e->e = 17;
#line 2949
  e->bla.cic = (int )c->cic;
#line 2950
  e->bla.opc = opc;
#line 2951
  isup_free_call(ss7, c);
  }
#line 2952
  return (0);
  case_36: /* CIL Label */ 
  {
#line 2954
  e = ss7_next_empty_event(ss7);
  }
#line 2955
  if (! e) {
    {
#line 2956
    isup_free_call(ss7, c);
    }
#line 2957
    return (-1);
  }
  {
#line 2960
  e->e = 24;
#line 2961
  e->lpa.cic = (int )c->cic;
#line 2962
  e->lpa.opc = opc;
#line 2963
  isup_free_call(ss7, c);
  }
#line 2964
  return (0);
  case_22: /* CIL Label */ 
  {
#line 2966
  e = ss7_next_empty_event(ss7);
  }
#line 2967
  if (! e) {
    {
#line 2968
    isup_free_call(ss7, c);
    }
#line 2969
    return (-1);
  }
  {
#line 2972
  e->e = 18;
#line 2973
  e->uba.cic = (int )c->cic;
#line 2974
  e->uba.opc = opc;
#line 2975
  isup_free_call(ss7, c);
  }
#line 2976
  return (0);
  case_24: /* CIL Label */ 
  {
#line 2978
  e = ss7_next_empty_event(ss7);
  }
#line 2979
  if (! e) {
    {
#line 2980
    isup_free_call(ss7, c);
    }
#line 2981
    return (-1);
  }
#line 2984
  e->e = 19;
#line 2985
  e->cgb.startcic = (int )cic;
#line 2986
  e->cgb.endcic = (int )cic + c->range;
#line 2987
  e->cgb.type = c->cicgroupsupervisiontype;
#line 2989
  i = 0;
  {
#line 2989
  while (1) {
    while_continue___4: /* CIL Label */ ;
#line 2989
    if (! (i < c->range + 1)) {
#line 2989
      goto while_break___4;
    }
#line 2990
    e->cgb.status[i] = c->status[i];
#line 2989
    i ++;
  }
  while_break___4: /* CIL Label */ ;
  }
  {
#line 2991
  e->cgb.opc = opc;
#line 2993
  isup_free_call(ss7, c);
  }
#line 2994
  return (0);
  case_25: /* CIL Label */ 
  {
#line 2996
  e = ss7_next_empty_event(ss7);
  }
#line 2997
  if (! e) {
    {
#line 2998
    isup_free_call(ss7, c);
    }
#line 2999
    return (-1);
  }
#line 3002
  e->e = 20;
#line 3003
  e->cgu.startcic = (int )cic;
#line 3004
  e->cgu.endcic = (int )cic + c->range;
#line 3005
  e->cgu.type = c->cicgroupsupervisiontype;
#line 3007
  i = 0;
  {
#line 3007
  while (1) {
    while_continue___5: /* CIL Label */ ;
#line 3007
    if (! (i < c->range + 1)) {
#line 3007
      goto while_break___5;
    }
#line 3008
    e->cgu.status[i] = c->status[i];
#line 3007
    i ++;
  }
  while_break___5: /* CIL Label */ ;
  }
  {
#line 3009
  e->cgu.opc = opc;
#line 3011
  isup_free_call(ss7, c);
  }
#line 3012
  return (0);
  case_44___0: /* CIL Label */ 
  {
#line 3014
  e = ss7_next_empty_event(ss7);
  }
#line 3015
  if (! e) {
    {
#line 3016
    isup_free_call(ss7, c);
    }
#line 3017
    return (-1);
  }
#line 3020
  e->e = 22;
#line 3021
  e->cpg.cic = (int )c->cic;
#line 3022
  e->cpg.opc = opc;
#line 3023
  e->cpg.event = c->event_info;
#line 3024
  return (0);
  case_46: /* CIL Label */ 
  {
#line 3026
  e = ss7_next_empty_event(ss7);
  }
#line 3027
  if (! e) {
    {
#line 3028
    isup_free_call(ss7, c);
    }
#line 3029
    return (-1);
  }
  {
#line 3032
  e->e = 23;
#line 3033
  e->ucic.cic = (int )c->cic;
#line 3034
  e->ucic.opc = opc;
#line 3035
  isup_free_call(ss7, c);
  }
#line 3036
  return (0);
  case_32___0: /* CIL Label */ 
  {
#line 3038
  e = ss7_next_empty_event(ss7);
  }
#line 3039
  if (! e) {
    {
#line 3040
    isup_free_call(ss7, c);
    }
#line 3041
    return (-1);
  }
#line 3044
  e->e = 27;
#line 3045
  e->faa.cic = (int )c->cic;
#line 3046
  e->faa.call_ref_ident = c->call_ref_ident;
#line 3047
  e->faa.call_ref_pc = c->call_ref_pc;
#line 3048
  e->faa.opc = opc;
#line 3049
  e->faa.call = c;
#line 3050
  return (0);
  case_31___0: /* CIL Label */ 
  {
#line 3052
  e = ss7_next_empty_event(ss7);
  }
#line 3053
  if (! e) {
    {
#line 3054
    isup_free_call(ss7, c);
    }
#line 3055
    return (-1);
  }
#line 3058
  e->e = 26;
#line 3059
  e->far.cic = (int )c->cic;
#line 3060
  e->far.call_ref_ident = c->call_ref_ident;
#line 3061
  e->far.call_ref_pc = c->call_ref_pc;
#line 3062
  e->ucic.opc = opc;
#line 3063
  e->far.call = c;
#line 3064
  return (0);
  switch_default___0: /* CIL Label */ 
  {
#line 3066
  isup_free_call(ss7, c);
  }
#line 3067
  return (0);
  switch_break___0: /* CIL Label */ ;
  }
}
}
#line 3071 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_cicgroupmessage(struct ss7 *ss7 , int messagetype , int begincic ,
                                     int endcic , unsigned int dpc , unsigned char *status ,
                                     int type ) 
{ 
  struct isup_call call ;
  int i ;
  int tmp ;

  {
#line 3076
  i = 0;
  {
#line 3076
  while (1) {
    while_continue: /* CIL Label */ ;
#line 3076
    if (! (i + begincic <= endcic)) {
#line 3076
      goto while_break;
    }
#line 3077
    call.status[i] = *(status + i);
#line 3076
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 3079
  call.cic = (unsigned short )begincic;
#line 3080
  call.range = endcic - begincic;
#line 3081
  call.cicgroupsupervisiontype = type;
#line 3082
  call.dpc = dpc;
#line 3084
  if (call.range > 31) {
#line 3085
    return (-1);
  }
  {
#line 3087
  tmp = isup_send_message(ss7, & call, messagetype, cicgroup_params);
  }
#line 3087
  return (tmp);
}
}
#line 3090 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cqr(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *status ) 
{ 
  struct isup_call call ;
  int i ;
  int tmp ;

  {
#line 3095
  i = 0;
  {
#line 3095
  while (1) {
    while_continue: /* CIL Label */ ;
#line 3095
    if (! (i + begincic <= endcic)) {
#line 3095
      goto while_break;
    }
#line 3096
    call.status[i] = *(status + i);
#line 3095
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 3098
  call.cic = (unsigned short )begincic;
#line 3099
  call.range = endcic - begincic;
#line 3100
  call.dpc = dpc;
#line 3102
  if (call.range > 31) {
#line 3103
    return (-1);
  }
  {
#line 3105
  tmp = isup_send_message(ss7, & call, 43, cqr_params);
  }
#line 3105
  return (tmp);
}
}
#line 3108 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_grs(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc ) 
{ 
  struct isup_call call ;
  int tmp ;

  {
#line 3112
  if (! ss7) {
#line 3113
    return (-1);
  }
#line 3115
  call.cic = (unsigned short )begincic;
#line 3116
  call.range = endcic - begincic;
#line 3117
  call.dpc = dpc;
#line 3119
  if (call.range > 31) {
#line 3120
    return (-1);
  }
  {
#line 3122
  tmp = isup_send_message(ss7, & call, 23, greset_params);
  }
#line 3122
  return (tmp);
}
}
#line 3125 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_gra(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc ) 
{ 
  struct isup_call call ;
  int tmp ;

  {
#line 3129
  if (! ss7) {
#line 3130
    return (-1);
  }
#line 3131
  call.cic = (unsigned short )begincic;
#line 3132
  call.range = endcic - begincic;
#line 3133
  call.dpc = dpc;
#line 3135
  if (call.range > 31) {
#line 3136
    return (-1);
  }
  {
#line 3138
  tmp = isup_send_message(ss7, & call, 41, greset_params);
  }
#line 3138
  return (tmp);
}
}
#line 3141 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cgb(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
             int type ) 
{ 
  int tmp ;

  {
#line 3143
  if (! ss7) {
#line 3144
    return (-1);
  }
  {
#line 3146
  tmp = isup_send_cicgroupmessage(ss7, 24, begincic, endcic, dpc, state, type);
  }
#line 3146
  return (tmp);
}
}
#line 3149 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cgu(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
             int type ) 
{ 
  int tmp ;

  {
#line 3151
  if (! ss7) {
#line 3152
    return (-1);
  }
  {
#line 3154
  tmp = isup_send_cicgroupmessage(ss7, 25, begincic, endcic, dpc, state, type);
  }
#line 3154
  return (tmp);
}
}
#line 3157 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cgba(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
              int type ) 
{ 
  int tmp ;

  {
#line 3159
  if (! ss7) {
#line 3160
    return (-1);
  }
  {
#line 3161
  tmp = isup_send_cicgroupmessage(ss7, 26, begincic, endcic, dpc, state, type);
  }
#line 3161
  return (tmp);
}
}
#line 3164 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cgua(struct ss7 *ss7 , int begincic , int endcic , unsigned int dpc , unsigned char *state ,
              int type ) 
{ 
  int tmp ;

  {
#line 3166
  if (! ss7) {
#line 3167
    return (-1);
  }
  {
#line 3169
  tmp = isup_send_cicgroupmessage(ss7, 27, begincic, endcic, dpc, state, type);
  }
#line 3169
  return (tmp);
}
}
#line 3172 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_iam(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;
  int tmp___0 ;

  {
#line 3174
  if (! ss7) {
#line 3175
    return (-1);
  } else
#line 3174
  if (! c) {
#line 3175
    return (-1);
  }
#line 3177
  if (ss7->switchtype == 1U) {
    {
#line 3178
    tmp = isup_send_message(ss7, c, 1, iam_params);
    }
#line 3178
    return (tmp);
  } else {
    {
#line 3180
    tmp___0 = isup_send_message(ss7, c, 1, ansi_iam_params);
    }
#line 3180
    return (tmp___0);
  }
}
}
#line 3183 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_acm(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;

  {
#line 3185
  if (! ss7) {
#line 3186
    return (-1);
  } else
#line 3185
  if (! c) {
#line 3186
    return (-1);
  }
  {
#line 3188
  tmp = isup_send_message(ss7, c, 6, acm_params);
  }
#line 3188
  return (tmp);
}
}
#line 3191 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_faa(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;

  {
#line 3193
  if (! ss7) {
#line 3194
    return (-1);
  } else
#line 3193
  if (! c) {
#line 3194
    return (-1);
  }
  {
#line 3196
  tmp = isup_send_message(ss7, c, 32, faa_params);
  }
#line 3196
  return (tmp);
}
}
#line 3199 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_far(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;

  {
#line 3201
  if (! ss7) {
#line 3202
    return (-1);
  } else
#line 3201
  if (! c) {
#line 3202
    return (-1);
  }
#line 3204
  if (c->next) {
#line 3204
    if ((c->next)->call_ref_ident) {
      {
#line 3205
      c->call_ref_ident = (c->next)->call_ref_ident;
#line 3206
      c->call_ref_pc = (c->next)->call_ref_pc;
#line 3207
      tmp = isup_send_message(ss7, c, 31, far_params);
      }
#line 3207
      return (tmp);
    }
  }
#line 3209
  return (-1);
}
}
#line 3212 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_anm(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;

  {
#line 3214
  if (! ss7) {
#line 3215
    return (-1);
  } else
#line 3214
  if (! c) {
#line 3215
    return (-1);
  }
  {
#line 3217
  tmp = isup_send_message(ss7, c, 9, anm_params);
  }
#line 3217
  return (tmp);
}
}
#line 3220 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_con(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int tmp ;

  {
#line 3222
  if (! ss7) {
#line 3223
    return (-1);
  } else
#line 3222
  if (! c) {
#line 3223
    return (-1);
  }
  {
#line 3225
  tmp = isup_send_message(ss7, c, 7, con_params);
  }
#line 3225
  return (tmp);
}
}
#line 3228 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_rel(struct ss7 *ss7 , struct isup_call *c , int cause ) 
{ 
  int tmp ;

  {
#line 3230
  if (! ss7) {
#line 3231
    return (-1);
  } else
#line 3230
  if (! c) {
#line 3231
    return (-1);
  }
#line 3233
  if (cause < 0) {
#line 3234
    cause = 16;
  }
  {
#line 3236
  c->cause = cause;
#line 3237
  c->causecode = 0;
#line 3238
  c->causeloc = 1;
#line 3239
  tmp = isup_send_message(ss7, c, 12, rel_params);
  }
#line 3239
  return (tmp);
}
}
#line 3242 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_rlc(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  int res ;

  {
#line 3246
  if (! ss7) {
#line 3247
    return (-1);
  } else
#line 3246
  if (! c) {
#line 3247
    return (-1);
  }
  {
#line 3249
  res = isup_send_message(ss7, c, 16, empty_params);
#line 3250
  isup_free_call(ss7, c);
  }
#line 3251
  return (res);
}
}
#line 3254 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_message_ciconly(struct ss7 *ss7 , int messagetype , int cic ,
                                     unsigned int dpc ) 
{ 
  int res ;
  struct isup_call c ;

  {
  {
#line 3258
  c.cic = (unsigned short )cic;
#line 3259
  c.dpc = dpc;
#line 3260
  res = isup_send_message(ss7, & c, messagetype, empty_params);
  }
#line 3261
  return (res);
}
}
#line 3264 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cpg(struct ss7 *ss7 , struct isup_call *c , int event ) 
{ 
  int tmp ;

  {
#line 3266
  if (! ss7) {
#line 3267
    return (-1);
  } else
#line 3266
  if (! c) {
#line 3267
    return (-1);
  }
  {
#line 3269
  c->event_info = (unsigned char )event;
#line 3270
  tmp = isup_send_message(ss7, c, 44, cpg_params);
  }
#line 3270
  return (tmp);
}
}
#line 3273 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_rsc(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3275
  if (! ss7) {
#line 3276
    return (-1);
  }
  {
#line 3278
  tmp = isup_send_message_ciconly(ss7, 18, cic, dpc);
  }
#line 3278
  return (tmp);
}
}
#line 3281 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_blo(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3283
  if (! ss7) {
#line 3284
    return (-1);
  }
  {
#line 3286
  tmp = isup_send_message_ciconly(ss7, 19, cic, dpc);
  }
#line 3286
  return (tmp);
}
}
#line 3289 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_ubl(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3291
  if (! ss7) {
#line 3292
    return (-1);
  }
  {
#line 3294
  tmp = isup_send_message_ciconly(ss7, 20, cic, dpc);
  }
#line 3294
  return (tmp);
}
}
#line 3297 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_bla(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3299
  if (! ss7) {
#line 3300
    return (-1);
  }
  {
#line 3302
  tmp = isup_send_message_ciconly(ss7, 21, cic, dpc);
  }
#line 3302
  return (tmp);
}
}
#line 3305 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_lpa(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3307
  if (! ss7) {
#line 3308
    return (-1);
  }
  {
#line 3310
  tmp = isup_send_message_ciconly(ss7, 36, cic, dpc);
  }
#line 3310
  return (tmp);
}
}
#line 3313 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_ucic(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3315
  if (! ss7) {
#line 3316
    return (-1);
  }
  {
#line 3318
  tmp = isup_send_message_ciconly(ss7, 46, cic, dpc);
  }
#line 3318
  return (tmp);
}
}
#line 3321 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_uba(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3323
  if (! ss7) {
#line 3324
    return (-1);
  }
  {
#line 3326
  tmp = isup_send_message_ciconly(ss7, 22, cic, dpc);
  }
#line 3326
  return (tmp);
}
}
#line 3329 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
int isup_cvr(struct ss7 *ss7 , int cic , unsigned int dpc ) 
{ 
  int tmp ;

  {
#line 3331
  if (! ss7) {
#line 3332
    return (-1);
  }
  {
#line 3334
  tmp = isup_send_message_ciconly(ss7, 235, cic, dpc);
  }
#line 3334
  return (tmp);
}
}
#line 305 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
int ss7_schedule_run(struct ss7 *ss7 ) ;
#line 307
struct timeval *ss7_schedule_next(struct ss7 *ss7 ) ;
#line 71 "/usr/include/x86_64-linux-gnu/sys/time.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) gettimeofday)(struct timeval * __restrict  __tv ,
                                                                                                   __timezone_ptr_t __tz ) ;
#line 39 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
int ss7_schedule_event(struct ss7 *ss7 , int ms , void (*function)(void *data ) ,
                       void *data ) 
{ 
  int x ;
  struct timeval tv ;

  {
#line 43
  x = 1;
  {
#line 43
  while (1) {
    while_continue: /* CIL Label */ ;
#line 43
    if (! (x < 64)) {
#line 43
      goto while_break;
    }
#line 44
    if (! ss7->ss7_sched[x].callback) {
#line 45
      goto while_break;
    }
#line 43
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 46
  if (x == 64) {
    {
#line 47
    ss7_error(ss7, (char *)"No more room in scheduler\n");
    }
#line 48
    return (-1);
  }
  {
#line 50
  gettimeofday((struct timeval */* __restrict  */)(& tv), (__timezone_ptr_t )((void *)0));
#line 51
  tv.tv_sec += (__time_t )(ms / 1000);
#line 52
  tv.tv_usec += (__suseconds_t )((ms % 1000) * 1000);
  }
#line 53
  if (tv.tv_usec > 1000000L) {
#line 54
    tv.tv_usec -= 1000000L;
#line 55
    (tv.tv_sec) ++;
  }
#line 57
  ss7->ss7_sched[x].when = tv;
#line 58
  ss7->ss7_sched[x].callback = function;
#line 59
  ss7->ss7_sched[x].data = data;
#line 60
  return (x);
}
}
#line 63 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
struct timeval *ss7_schedule_next(struct ss7 *ss7 ) 
{ 
  struct timeval *closest ;
  int x ;

  {
#line 65
  closest = (struct timeval *)((void *)0);
#line 68
  x = 1;
  {
#line 68
  while (1) {
    while_continue: /* CIL Label */ ;
#line 68
    if (! (x < 64)) {
#line 68
      goto while_break;
    }
#line 69
    if (ss7->ss7_sched[x].callback) {
#line 69
      if (! closest) {
#line 73
        closest = & ss7->ss7_sched[x].when;
      } else
#line 69
      if (closest->tv_sec > ss7->ss7_sched[x].when.tv_sec) {
#line 73
        closest = & ss7->ss7_sched[x].when;
      } else
#line 69
      if (closest->tv_sec == ss7->ss7_sched[x].when.tv_sec) {
#line 69
        if (closest->tv_usec > ss7->ss7_sched[x].when.tv_usec) {
#line 73
          closest = & ss7->ss7_sched[x].when;
        }
      }
    }
#line 68
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 75
  return (closest);
}
}
#line 78 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
static int __ss7_schedule_run(struct ss7 *ss7 , struct timeval *tv ) 
{ 
  int x ;
  void (*callback)(void * ) ;
  void *data ;

  {
#line 83
  x = 1;
  {
#line 83
  while (1) {
    while_continue: /* CIL Label */ ;
#line 83
    if (! (x < 64)) {
#line 83
      goto while_break;
    }
#line 84
    if (ss7->ss7_sched[x].callback) {
#line 84
      if (ss7->ss7_sched[x].when.tv_sec < tv->tv_sec) {
        {
#line 88
        callback = ss7->ss7_sched[x].callback;
#line 89
        data = ss7->ss7_sched[x].data;
#line 90
        ss7->ss7_sched[x].callback = (void (*)(void *data ))((void *)0);
#line 91
        ss7->ss7_sched[x].data = (void *)0;
#line 92
        (*callback)(data);
        }
      } else
#line 84
      if (ss7->ss7_sched[x].when.tv_sec == tv->tv_sec) {
#line 84
        if (ss7->ss7_sched[x].when.tv_usec <= tv->tv_usec) {
          {
#line 88
          callback = ss7->ss7_sched[x].callback;
#line 89
          data = ss7->ss7_sched[x].data;
#line 90
          ss7->ss7_sched[x].callback = (void (*)(void *data ))((void *)0);
#line 91
          ss7->ss7_sched[x].data = (void *)0;
#line 92
          (*callback)(data);
          }
        }
      }
    }
#line 83
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 95
  return (0);
}
}
#line 98 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
int ss7_schedule_run(struct ss7 *ss7 ) 
{ 
  int res ;
  struct timeval tv ;

  {
  {
#line 103
  gettimeofday((struct timeval */* __restrict  */)(& tv), (__timezone_ptr_t )((void *)0));
#line 105
  res = __ss7_schedule_run(ss7, & tv);
  }
#line 107
  return (res);
}
}
#line 110 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
void ss7_schedule_del(struct ss7 *ss7 , int *id ) 
{ 


  {
#line 112
  if (*id >= 64) {
    {
#line 113
    ss7_error(ss7, (char *)"Asked to delete sched id %d???\n", *id);
    }
  }
#line 115
  if (*id < 0) {
#line 116
    return;
  }
#line 118
  ss7->ss7_sched[*id].callback = (void (*)(void *data ))((void *)0);
#line 119
  *id = -1;
#line 120
  return;
}
}
#line 64 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.h"
ss7_event *mtp3_process_event(struct ss7 *ss7 , ss7_event *e ) ;
#line 74
void mtp3_alarm(struct ss7 *ss7 , int fd ) ;
#line 76
void mtp3_noalarm(struct ss7 *ss7 , int fd ) ;
#line 78
void mtp3_start(struct ss7 *ss7 ) ;
#line 44 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
char testmessage[11]  = 
#line 44 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
  {      (char )'2',      (char )'5',      (char )'6',      (char )'4', 
        (char )'2',      (char )'8',      (char )'6',      (char )'2', 
        (char )'8',      (char )'8',      (char )'\000'};
#line 50 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *userpart2str(unsigned char userpart ) 
{ 


  {
  {
#line 53
  if ((int )userpart == 0) {
#line 53
    goto case_0;
  }
#line 55
  if ((int )userpart == 1) {
#line 55
    goto case_1;
  }
#line 57
  if ((int )userpart == 2) {
#line 57
    goto case_2;
  }
#line 59
  if ((int )userpart == 3) {
#line 59
    goto case_3;
  }
#line 61
  if ((int )userpart == 5) {
#line 61
    goto case_5;
  }
#line 63
  goto switch_default;
  case_0: /* CIL Label */ 
#line 54
  return ((char *)"NET_MNG");
  case_1: /* CIL Label */ 
#line 56
  return ((char *)"STD_TEST");
  case_2: /* CIL Label */ 
#line 58
  return ((char *)"SPEC_TEST");
  case_3: /* CIL Label */ 
#line 60
  return ((char *)"SCCP");
  case_5: /* CIL Label */ 
#line 62
  return ((char *)"ISUP");
  switch_default: /* CIL Label */ 
#line 64
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 68 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *ss7_ni2str(unsigned char ni ) 
{ 


  {
  {
#line 71
  if ((int )ni == 0) {
#line 71
    goto case_0;
  }
#line 73
  if ((int )ni == 1) {
#line 73
    goto case_1;
  }
#line 75
  if ((int )ni == 2) {
#line 75
    goto case_2;
  }
#line 77
  if ((int )ni == 3) {
#line 77
    goto case_3;
  }
#line 79
  goto switch_default;
  case_0: /* CIL Label */ 
#line 72
  return ((char *)"international");
  case_1: /* CIL Label */ 
#line 74
  return ((char *)"international_spare");
  case_2: /* CIL Label */ 
#line 76
  return ((char *)"national");
  case_3: /* CIL Label */ 
#line 78
  return ((char *)"national_spare");
  switch_default: /* CIL Label */ 
#line 80
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int get_routinglabel(unsigned int switchtype , unsigned char *sif , struct routing_label *rl ) 
{ 
  unsigned char *buf ;

  {
#line 86
  buf = sif;
#line 87
  rl->type = switchtype;
#line 89
  if (switchtype == (unsigned int )(1 << 1)) {
#line 90
    rl->dpc = (point_code )(((int )*(buf + 0) | ((int )*(buf + 1) << 8)) | ((int )*(buf + 2) << 16));
#line 91
    rl->opc = (point_code )(((int )*(buf + 3) | ((int )*(buf + 4) << 8)) | ((int )*(buf + 5) << 16));
#line 92
    rl->sls = *(buf + 6);
#line 93
    return (7);
  } else {
#line 96
    rl->dpc = (point_code )(((int )*(buf + 0) | ((int )*(buf + 1) << 8)) & 16383);
#line 97
    rl->opc = (point_code )(((((int )*(buf + 1) >> 6) | ((int )*(buf + 2) << 2)) | ((int )*(buf + 3) << 10)) & 16383);
#line 98
    rl->sls = (unsigned char )((int )*(buf + 3) >> 4);
#line 99
    return (4);
  }
}
}
#line 103 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
unsigned char ansi_sls_next(struct ss7 *ss7 ) 
{ 
  unsigned char res ;

  {
#line 105
  res = ss7->sls;
#line 107
  ss7->sls = (unsigned char )(((int )ss7->sls + 1) % 256);
#line 109
  return (res);
}
}
#line 112 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static unsigned char get_userpart(unsigned char sio ) 
{ 


  {
#line 114
  return ((unsigned char )((int )sio & 15));
}
}
#line 117 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static unsigned char get_ni(unsigned char sio ) 
{ 


  {
#line 119
  return ((unsigned char )(((int )sio >> 6) & 3));
}
}
#line 122 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static unsigned char get_priority(unsigned char sio ) 
{ 


  {
#line 124
  return ((unsigned char )(((int )sio >> 4) & 3));
}
}
#line 127 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
int set_routinglabel(unsigned char *sif , struct routing_label *rl ) 
{ 
  unsigned char *buf ;

  {
#line 129
  buf = sif;
  {
#line 131
  if (rl->type == (unsigned int )(1 << 1)) {
#line 131
    goto case_exp;
  }
#line 140
  if (rl->type == 1U) {
#line 140
    goto case_1;
  }
#line 150
  goto switch_default;
  case_exp: /* CIL Label */ 
#line 132
  *(buf + 0) = (unsigned char )(rl->dpc & 255U);
#line 133
  *(buf + 1) = (unsigned char )((rl->dpc >> 8) & 255U);
#line 134
  *(buf + 2) = (unsigned char )((rl->dpc >> 16) & 255U);
#line 135
  *(buf + 3) = (unsigned char )(rl->opc & 255U);
#line 136
  *(buf + 4) = (unsigned char )((rl->opc >> 8) & 255U);
#line 137
  *(buf + 5) = (unsigned char )((rl->opc >> 16) & 255U);
#line 138
  *(buf + 6) = (unsigned char )((int )rl->sls & 255);
#line 139
  return (7);
  case_1: /* CIL Label */ 
#line 145
  *(buf + 0) = (unsigned char )(rl->dpc & 255U);
#line 146
  *(buf + 1) = (unsigned char )(((rl->dpc >> 8) & 63U) | ((rl->opc << 6) & 192U));
#line 147
  *(buf + 2) = (unsigned char )((rl->opc >> 2) & 255U);
#line 148
  *(buf + 3) = (unsigned char )(((rl->opc >> 10) & 15U) | (unsigned int )(((int )rl->sls << 4) & 240));
#line 149
  return (4);
  switch_default: /* CIL Label */ 
#line 151
  return (-1);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 156 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static void set_h0(unsigned char *h0 , unsigned char val ) 
{ 


  {
#line 158
  *h0 = (unsigned char )((int )*h0 | ((int )val & 15));
#line 159
  return;
}
}
#line 161 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static unsigned char get_h0(unsigned char *byte ) 
{ 


  {
#line 163
  return ((unsigned char )((int )*byte & 15));
}
}
#line 166 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static void set_h1(unsigned char *h1 , unsigned char val ) 
{ 


  {
#line 168
  *h1 = (unsigned char )((int )*h1 | (((int )val << 4) & 240));
#line 169
  return;
}
}
#line 171 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static unsigned char get_h1(unsigned char *byte ) 
{ 


  {
#line 173
  return ((unsigned char )(((int )*byte & 240) >> 4));
}
}
#line 176 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
__inline static struct mtp2 *sls_to_link(struct ss7 *ss7 , unsigned char sls ) 
{ 
  struct mtp2 *winner ;
  int i ;

  {
#line 178
  if (ss7->mtp2_linkstate[(unsigned int )sls % ss7->numlinks] == 3U) {
#line 179
    return (ss7->links[(unsigned int )sls % ss7->numlinks]);
  } else {
#line 181
    winner = ss7->links[0];
#line 184
    i = 0;
    {
#line 184
    while (1) {
      while_continue: /* CIL Label */ ;
#line 184
      if (! ((unsigned int )i < ss7->numlinks)) {
#line 184
        goto while_break;
      }
#line 185
      if (ss7->mtp2_linkstate[i] == 3U) {
#line 186
        winner = ss7->links[i];
#line 187
        goto while_break;
      }
#line 184
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
#line 191
    return (winner);
  }
}
}
#line 195 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
struct net_mng_message net_mng_messages[33]  = 
#line 195
  {      {1, 1, (char *)"COO"}, 
        {1, 2, (char *)"COA"}, 
        {1, 5, (char *)"CBD"}, 
        {1, 6, (char *)"CBA"}, 
        {2, 1, (char *)"ECO"}, 
        {2, 2, (char *)"ECA"}, 
        {3, 1, (char *)"RCT"}, 
        {3, 2, (char *)"TFC"}, 
        {4, 1, (char *)"TFP"}, 
        {4, 2, (char *)"TCP"}, 
        {4, 3, (char *)"TFR"}, 
        {4, 4, (char *)"TCR"}, 
        {4, 5, (char *)"TFA"}, 
        {4, 6, (char *)"TCA"}, 
        {5, 1, (char *)"RST/RSP"}, 
        {5, 2, (char *)"RSR"}, 
        {5, 3, (char *)"RCP"}, 
        {5, 4, (char *)"RCR"}, 
        {6, 1, (char *)"LIN"}, 
        {6, 2, (char *)"LUN"}, 
        {6, 3, (char *)"LIA"}, 
        {6, 4, (char *)"LUA"}, 
        {6, 5, (char *)"LID"}, 
        {6, 6, (char *)"LFU"}, 
        {6, 7, (char *)"LLT/LLI"}, 
        {6, 8, (char *)"LRT/LRI"}, 
        {7, 1, (char *)"TRA"}, 
        {7, 2, (char *)"TRW"}, 
        {8, 1, (char *)"DLC"}, 
        {8, 2, (char *)"CSS"}, 
        {8, 3, (char *)"CNS"}, 
        {8, 4, (char *)"CNP"}, 
        {10, 1, (char *)"UPU"}};
#line 231 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_setstate_mtp2link(struct ss7 *ss7 , struct mtp2 *link , int newstate ) 
{ 
  int i ;

  {
#line 235
  i = 0;
  {
#line 235
  while (1) {
    while_continue: /* CIL Label */ ;
#line 235
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 235
      goto while_break;
    }
#line 236
    if ((unsigned long )ss7->links[i] == (unsigned long )link) {
#line 237
      ss7->mtp2_linkstate[i] = (unsigned int )newstate;
    }
#line 235
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 239
  return;
}
}
#line 241 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *net_mng_message2str(int h0 , int h1 ) 
{ 
  int i ;

  {
#line 245
  i = 0;
  {
#line 245
  while (1) {
    while_continue: /* CIL Label */ ;
#line 245
    if (! ((unsigned long )i < sizeof(net_mng_messages) / sizeof(struct net_mng_message ))) {
#line 245
      goto while_break;
    }
#line 246
    if (net_mng_messages[i].h0 == h0) {
#line 246
      if (net_mng_messages[i].h1 == h1) {
#line 247
        return (net_mng_messages[i].name);
      }
    }
#line 245
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 250
  return ((char *)"Unknown");
}
}
#line 253 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int net_mng_dump(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char userpart ,
                        unsigned char *buf , int len ) 
{ 
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  char *tmp___0 ;

  {
#line 255
  if (ss7->switchtype == 1U) {
#line 255
    tmp = 4;
  } else {
#line 255
    tmp = 7;
  }
  {
#line 255
  headerptr = buf + tmp;
#line 258
  h0 = *headerptr;
#line 258
  h1 = h0;
#line 260
  h1 = get_h1(headerptr);
#line 261
  h0 = get_h0(headerptr);
#line 263
  ss7_message(ss7, (char *)"\tH0: %x H1: %x\n", (int )h0, (int )h1);
  }
#line 264
  if ((int )userpart == 0) {
    {
#line 265
    tmp___0 = net_mng_message2str((int )h0, (int )h1);
#line 265
    ss7_message(ss7, (char *)"\tMessage type: %s\n", tmp___0);
    }
  }
  {
#line 266
  ss7_dump_buf(ss7, 1, headerptr, 1);
  }
#line 267
  return (0);
}
}
#line 270 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void std_test_send(struct mtp2 *link ) 
{ 
  struct ss7_msg *m ;
  unsigned char *layer4 ;
  struct routing_label rl ;
  struct ss7 *ss7 ;
  int rllen ;
  unsigned char testlen ;
  size_t tmp ;
  int tmp___0 ;

  {
  {
#line 275
  ss7 = link->master;
#line 276
  rllen = 0;
#line 277
  tmp = strlen((char const   *)(testmessage));
#line 277
  testlen = (unsigned char )tmp;
#line 279
  m = ss7_msg_new();
  }
#line 280
  if (! m) {
    {
#line 281
    ss7_error(link->master, (char *)"Malloc failed on ss7_msg!.  Unable to transmit STD_TEST\n");
    }
#line 282
    return;
  }
  {
#line 285
  layer4 = ss7_msg_userpart(m);
#line 286
  rl.type = ss7->switchtype;
#line 287
  rl.opc = ss7->pc;
#line 288
  rl.dpc = link->dpc;
#line 289
  rl.sls = (unsigned char )link->slc;
#line 291
  rllen = set_routinglabel(layer4, & rl);
#line 292
  layer4 += rllen;
#line 294
  set_h0(layer4, (unsigned char)1);
#line 295
  set_h1(layer4, (unsigned char)1);
#line 296
  *(layer4 + 1) = (unsigned char )((int )testlen << 4);
#line 297
  memcpy((void */* __restrict  */)(layer4 + 2), (void const   */* __restrict  */)(testmessage),
         (size_t )testlen);
#line 299
  ss7_msg_userpart_len(m, (rllen + (int )testlen) + 2);
  }
#line 301
  if (ss7->switchtype == 1U) {
#line 301
    tmp___0 = 1;
  } else {
#line 301
    tmp___0 = 2;
  }
  {
#line 301
  mtp3_transmit(link->master, (unsigned char )tmp___0, (unsigned char )link->slc,
                m);
  }
#line 302
  return;
}
}
#line 304 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int net_mng_receive(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char *buf ,
                           int len ) 
{ 
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  ss7_event *e ;

  {
#line 306
  if (ss7->switchtype == 1U) {
#line 306
    tmp = 4;
  } else {
#line 306
    tmp = 7;
  }
  {
#line 306
  headerptr = buf + tmp;
#line 309
  h0 = *headerptr;
#line 309
  h1 = h0;
#line 311
  h1 = get_h1(headerptr);
#line 312
  h0 = get_h0(headerptr);
  }
#line 315
  if ((int )h0 == 7) {
#line 315
    if ((int )h1 == 1) {
      {
#line 318
      mtp3_setstate_mtp2link(ss7, mtp2, 3);
      }
#line 320
      if (ss7->state != 1) {
        {
#line 321
        e = ss7_next_empty_event(ss7);
        }
#line 322
        if (! e) {
          {
#line 323
          ss7_error(ss7, (char *)"Event queue full\n");
          }
#line 324
          return (-1);
        }
#line 326
        e->e = 1;
#line 327
        ss7->state = 1;
      }
#line 329
      return (0);
    } else {
#line 334
      return (0);
    }
  } else {
#line 334
    return (0);
  }
}
}
#line 338 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void net_mng_send_tra(struct mtp2 *link ) 
{ 
  struct ss7_msg *m ;
  unsigned char *layer4 ;
  struct routing_label rl ;
  struct ss7 *ss7 ;
  int rllen ;

  {
  {
#line 343
  ss7 = link->master;
#line 344
  rllen = 0;
#line 346
  m = ss7_msg_new();
  }
#line 347
  if (! m) {
    {
#line 348
    ss7_error(link->master, (char *)"Malloc failed on ss7_msg!.  Unable to transmit NET_MNG TRA\n");
    }
#line 349
    return;
  }
  {
#line 352
  layer4 = ss7_msg_userpart(m);
#line 353
  rl.type = ss7->switchtype;
#line 354
  rl.opc = ss7->pc;
#line 355
  rl.dpc = link->dpc;
#line 356
  rl.sls = (unsigned char )link->slc;
#line 358
  rllen = set_routinglabel(layer4, & rl);
#line 359
  layer4 += rllen;
#line 361
  set_h0(layer4, (unsigned char)7);
#line 362
  set_h1(layer4, (unsigned char)1);
#line 364
  ss7_msg_userpart_len(m, rllen + 1);
#line 366
  mtp3_transmit(link->master, (unsigned char)0, (unsigned char )link->slc, m);
  }
#line 367
  return;
}
}
#line 369 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int std_test_receive(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char *buf ,
                            int len ) 
{ 
  unsigned char *sif ;
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  int testpatsize ;
  struct routing_label rl ;
  struct ss7_msg *m ;
  struct routing_label drl ;
  unsigned char *layer4 ;
  ss7_event *e ;
  int rllen ;
  int tmp___0 ;

  {
#line 371
  sif = buf;
#line 372
  if (ss7->switchtype == 1U) {
#line 372
    tmp = 4;
  } else {
#line 372
    tmp = 7;
  }
  {
#line 372
  headerptr = buf + tmp;
#line 374
  testpatsize = 0;
#line 377
  get_routinglabel(ss7->switchtype, sif, & rl);
  }
#line 379
  if (rl.dpc != ss7->pc) {
#line 380
    goto fail;
  }
  {
#line 382
  h0 = *headerptr;
#line 382
  h1 = h0;
#line 384
  h1 = get_h1(headerptr);
#line 385
  h0 = get_h0(headerptr);
  }
#line 387
  if ((int )h0 != 1) {
#line 388
    goto fail;
  }
#line 390
  if ((int )h1 == 1) {
    {
#line 397
    m = ss7_msg_new();
    }
#line 398
    if (! m) {
      {
#line 399
      ss7_error(ss7, (char *)"Unable to allocate message buffer!\n");
      }
#line 400
      return (-1);
    }
    {
#line 403
    drl.type = ss7->switchtype;
#line 404
    drl.dpc = rl.opc;
#line 405
    drl.opc = ss7->pc;
#line 413
    drl.sls = rl.sls;
#line 416
    layer4 = ss7_msg_userpart(m);
#line 418
    rllen = set_routinglabel(layer4, & drl);
#line 419
    layer4 += rllen;
#line 421
    testpatsize = ((int )*(headerptr + 1) >> 4) & 15;
#line 423
    set_h0(layer4, (unsigned char)1);
#line 424
    set_h1(layer4, (unsigned char)2);
#line 425
    *(layer4 + 1) = (unsigned char )(testpatsize << 4);
#line 426
    memcpy((void */* __restrict  */)(layer4 + 2), (void const   */* __restrict  */)(headerptr + 2),
           (size_t )testpatsize);
#line 428
    ss7_msg_userpart_len(m, (rllen + testpatsize) + 2);
    }
#line 430
    if (ss7->switchtype == 1U) {
#line 430
      tmp___0 = 1;
    } else {
#line 430
      tmp___0 = 2;
    }
    {
#line 430
    mtp3_transmit(ss7, (unsigned char )tmp___0, (unsigned char )mtp2->slc, m);
#line 434
    mtp3_setstate_mtp2link(ss7, mtp2, 3);
    }
#line 436
    if (ss7->state != 1) {
      {
#line 437
      e = ss7_next_empty_event(ss7);
      }
#line 438
      if (! e) {
        {
#line 439
        ss7_error(ss7, (char *)"Event queue full\n");
        }
#line 440
        return (-1);
      }
#line 442
      e->e = 1;
    }
#line 445
    return (0);
  } else
#line 446
  if ((int )h1 == 2) {
#line 447
    return (0);
  } else {
    {
#line 449
    ss7_error(ss7, (char *)"Unhandled STD_TEST message: h0 = %x h1 = %x", (int )h0,
              (int )h1);
    }
  }
  fail: 
#line 452
  return (-1);
}
}
#line 455 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
int mtp3_transmit(struct ss7 *ss7 , unsigned char userpart , unsigned char sls , struct ss7_msg *m ) 
{ 
  unsigned char *sio ;
  struct mtp2 *winner ;
  int priority ;
  int tmp ;

  {
  {
#line 459
  priority = 3;
#line 461
  sio = m->buf + 3;
#line 463
  winner = sls_to_link(ss7, sls);
  }
#line 465
  if (ss7->switchtype == 1U) {
#line 466
    *sio = (unsigned char )(((int )ss7->ni << 6) | (int )userpart);
  } else {
#line 468
    *sio = (unsigned char )((((int )ss7->ni << 6) | (priority << 4)) | (int )userpart);
  }
  {
#line 471
  tmp = mtp2_msu(winner, m);
  }
#line 471
  return (tmp);
}
}
#line 474 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
int mtp3_dump(struct ss7 *ss7 , struct mtp2 *link , void *msg , int len ) 
{ 
  unsigned char *buf ;
  unsigned char *sio ;
  unsigned char *sif ;
  unsigned char ni ;
  unsigned char tmp ;
  unsigned char priority ;
  unsigned char tmp___0 ;
  unsigned char userpart ;
  unsigned char tmp___1 ;
  struct routing_label rl ;
  unsigned int siflen ;
  int rlsize ;
  char *tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;

  {
  {
#line 476
  buf = (unsigned char *)msg;
#line 477
  sio = buf + 0;
#line 478
  sif = buf + 1;
#line 479
  tmp = get_ni(*sio);
#line 479
  ni = tmp;
#line 480
  tmp___0 = get_priority(*sio);
#line 480
  priority = tmp___0;
#line 481
  tmp___1 = get_userpart(*sio);
#line 481
  userpart = tmp___1;
#line 483
  siflen = (unsigned int )(len - 1);
#line 487
  tmp___2 = userpart2str(userpart);
#line 487
  ss7_message(ss7, (char *)"\tNetwork Indicator: %d Priority: %d User Part: %s (%d)\n",
              (int )ni, (int )priority, tmp___2, (int )userpart);
#line 488
  ss7_dump_buf(ss7, 1, sio, 1);
#line 489
  rlsize = get_routinglabel(ss7->switchtype, sif, & rl);
  }
#line 490
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
    {
#line 491
    ss7_message(ss7, (char *)"\tOPC %d-%d-%d DPC %d-%d-%d SLS %d\n", (rl.opc >> 16) & 255U,
                (rl.opc >> 8) & 255U, rl.opc & 255U, (rl.dpc >> 16) & 255U, (rl.dpc >> 8) & 255U,
                rl.dpc & 255U, (int )rl.sls);
    }
  } else {
    {
#line 494
    ss7_message(ss7, (char *)"\tOPC %d DPC %d SLS %d\n", rl.opc, rl.dpc, (int )rl.sls);
    }
  }
  {
#line 495
  ss7_dump_buf(ss7, 1, sif, rlsize);
  }
  {
#line 501
  if ((int )userpart == 2) {
#line 501
    goto case_2;
  }
#line 501
  if ((int )userpart == 1) {
#line 501
    goto case_2;
  }
#line 501
  if ((int )userpart == 0) {
#line 501
    goto case_2;
  }
#line 503
  if ((int )userpart == 5) {
#line 503
    goto case_5;
  }
#line 506
  goto switch_default;
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
  case_0: /* CIL Label */ 
  {
#line 502
  tmp___3 = net_mng_dump(ss7, link, userpart, sif, (int )siflen);
  }
#line 502
  return (tmp___3);
  case_5: /* CIL Label */ 
  {
#line 504
  tmp___4 = isup_dump(ss7, link, sif + rlsize, (int )(siflen - (unsigned int )rlsize));
  }
#line 504
  return (tmp___4);
  switch_default: /* CIL Label */ 
#line 507
  return (0);
  switch_break: /* CIL Label */ ;
  }
#line 509
  return (0);
}
}
#line 512 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
int mtp3_receive(struct ss7 *ss7 , struct mtp2 *link , void *msg , int len ) 
{ 
  unsigned char *buf ;
  unsigned char *sio ;
  unsigned char *sif ;
  unsigned int siflen ;
  unsigned char ni ;
  unsigned char tmp ;
  unsigned char userpart ;
  unsigned char tmp___0 ;
  struct routing_label rl ;
  int rlsize ;
  char *tmp___1 ;
  char *tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;

  {
  {
#line 514
  buf = (unsigned char *)msg;
#line 515
  sio = buf + 0;
#line 516
  sif = buf + 1;
#line 517
  siflen = (unsigned int )(len - 1);
#line 518
  tmp = get_ni(*sio);
#line 518
  ni = tmp;
#line 519
  tmp___0 = get_userpart(*sio);
#line 519
  userpart = tmp___0;
  }
#line 524
  if ((int )ss7->ni != (int )ni) {
    {
#line 525
    tmp___1 = ss7_ni2str(ss7->ni);
#line 525
    tmp___2 = ss7_ni2str(ni);
#line 525
    ss7_error(ss7, (char *)"Received MSU with network indicator of %s, but we are %s\n",
              tmp___2, tmp___1);
    }
#line 526
    return (-1);
  }
  {
#line 530
  rlsize = get_routinglabel(ss7->switchtype, sif, & rl);
  }
#line 532
  if (ss7->pc != rl.dpc) {
    {
#line 533
    ss7_error(ss7, (char *)"Received message destined for point code 0x%x but we\'re 0x%x.  Dropping\n",
              rl.dpc, ss7->pc);
    }
#line 534
    return (-1);
  }
  {
#line 542
  if ((int )userpart == 2) {
#line 542
    goto case_2;
  }
#line 542
  if ((int )userpart == 1) {
#line 542
    goto case_2;
  }
#line 544
  if ((int )userpart == 5) {
#line 544
    goto case_5;
  }
#line 547
  if ((int )userpart == 0) {
#line 547
    goto case_0;
  }
#line 550
  goto switch_default;
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
  {
#line 543
  tmp___3 = std_test_receive(ss7, link, sif, (int )siflen);
  }
#line 543
  return (tmp___3);
  case_5: /* CIL Label */ 
  {
#line 546
  tmp___4 = isup_receive(ss7, link, & rl, sif + rlsize, (int )(siflen - (unsigned int )rlsize));
  }
#line 546
  return (tmp___4);
  case_0: /* CIL Label */ 
  {
#line 548
  tmp___5 = net_mng_receive(ss7, link, sif, (int )siflen);
  }
#line 548
  return (tmp___5);
  switch_default: /* CIL Label */ 
  {
#line 551
  ss7_message(ss7, (char *)"Unable to process message destined for userpart %d; dropping message\n",
              (int )userpart);
  }
#line 552
  return (0);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 556 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_event_link_up(struct mtp2 *link ) 
{ 


  {
#line 558
  if (! link->sent_tra) {
    {
#line 559
    net_mng_send_tra(link);
#line 560
    link->sent_tra = 1;
    }
  }
  {
#line 562
  std_test_send(link);
  }
#line 563
  return;
}
}
#line 565 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_event_link_down(struct mtp2 *link ) 
{ 
  struct ss7 *ss7 ;

  {
  {
#line 567
  ss7 = link->master;
#line 570
  mtp3_setstate_mtp2link(ss7, link, 0);
  }
#line 571
  return;
}
}
#line 573 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static struct mtp2 *slc_to_mtp2(struct ss7 *ss7 , unsigned int slc ) 
{ 
  int i ;
  struct mtp2 *link ;

  {
#line 575
  i = 0;
#line 577
  link = (struct mtp2 *)((void *)0);
#line 578
  i = 0;
  {
#line 578
  while (1) {
    while_continue: /* CIL Label */ ;
#line 578
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 578
      goto while_break;
    }
#line 579
    if ((unsigned int )(ss7->links[i])->slc == slc) {
#line 580
      link = ss7->links[i];
    }
#line 578
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 583
  return (link);
}
}
#line 586 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
ss7_event *mtp3_process_event(struct ss7 *ss7 , ss7_event *e ) 
{ 
  struct mtp2 *link ;

  {
#line 591
  if (! e) {
#line 592
    return ((ss7_event *)((void *)0));
  }
  {
#line 595
  if (e->e == 3) {
#line 595
    goto case_3;
  }
#line 599
  if (e->e == 4) {
#line 599
    goto case_4;
  }
#line 603
  goto switch_default;
  case_3: /* CIL Label */ 
  {
#line 596
  link = slc_to_mtp2(ss7, e->gen.data);
#line 597
  mtp3_event_link_up(link);
  }
#line 598
  return (e);
  case_4: /* CIL Label */ 
  {
#line 600
  link = slc_to_mtp2(ss7, e->gen.data);
#line 601
  mtp3_event_link_down(link);
  }
#line 602
  return (e);
  switch_default: /* CIL Label */ 
#line 604
  return (e);
  switch_break: /* CIL Label */ ;
  }
#line 607
  return (e);
}
}
#line 610 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
void mtp3_start(struct ss7 *ss7 ) 
{ 
  int i ;

  {
#line 614
  i = 0;
  {
#line 614
  while (1) {
    while_continue: /* CIL Label */ ;
#line 614
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 614
      goto while_break;
    }
#line 615
    if (ss7->mtp2_linkstate[i] == 0U) {
      {
#line 616
      mtp2_start(ss7->links[i], 1);
#line 617
      ss7->mtp2_linkstate[i] = 2U;
      }
    }
#line 614
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 621
  return;
}
}
#line 624 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
void mtp3_alarm(struct ss7 *ss7 , int fd ) 
{ 
  int i ;
  int winner ;
  int linksup ;
  ss7_event *e ;
  ss7_event *tmp ;

  {
#line 627
  winner = -1;
#line 628
  linksup = 0;
#line 630
  i = 0;
  {
#line 630
  while (1) {
    while_continue: /* CIL Label */ ;
#line 630
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 630
      goto while_break;
    }
#line 631
    if ((ss7->links[i])->fd == fd) {
#line 632
      winner = i;
#line 633
      goto while_break;
    }
#line 630
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 636
  if (winner > -1) {
    {
#line 637
    ss7->mtp2_linkstate[winner] = 1U;
#line 638
    mtp2_stop(ss7->links[winner]);
    }
  }
#line 641
  i = 0;
  {
#line 641
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 641
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 641
      goto while_break___0;
    }
#line 643
    if (ss7->mtp2_linkstate[i] == 3U) {
#line 644
      linksup ++;
    }
#line 641
    i ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 646
  if (! linksup) {
    {
#line 647
    ss7->state = 0;
#line 648
    tmp = ss7_next_empty_event(ss7);
#line 648
    e = tmp;
    }
#line 650
    if (! e) {
      {
#line 651
      ss7_error(ss7, (char *)"Event queue full!");
      }
#line 652
      return;
    }
#line 654
    e->e = 2;
#line 655
    return;
  }
#line 657
  return;
}
}
#line 659 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
void mtp3_noalarm(struct ss7 *ss7 , int fd ) 
{ 
  int i ;
  int winner ;

  {
#line 662
  winner = -1;
#line 664
  i = 0;
  {
#line 664
  while (1) {
    while_continue: /* CIL Label */ ;
#line 664
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 664
      goto while_break;
    }
#line 665
    if ((ss7->links[i])->fd == fd) {
#line 666
      winner = i;
#line 667
      goto while_break;
    }
#line 664
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 670
  if (winner > -1) {
    {
#line 671
    ss7->mtp2_linkstate[winner] = 2U;
#line 672
    mtp2_start(ss7->links[winner], 1);
    }
  }
#line 674
  return;
}
}
/* compiler builtin: 
   void __builtin_va_start(__builtin_va_list  ) ;  */
/* compiler builtin: 
   void __builtin_va_end(__builtin_va_list  ) ;  */
#line 360 "/usr/include/unistd.h"
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
#line 169 "/usr/include/stdio.h"
extern struct _IO_FILE *stdout ;
#line 390
extern  __attribute__((__nothrow__)) int ( /* format attribute */  vsnprintf)(char * __restrict  __s ,
                                                                              size_t __maxlen ,
                                                                              char const   * __restrict  __format ,
                                                                              __gnuc_va_list __arg ) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 298 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
void ss7_set_message(void (*func)(struct ss7 *ss7 , char *message ) ) ;
#line 300
void ss7_set_error(void (*func)(struct ss7 *ss7 , char *message ) ) ;
#line 302
void ss7_set_debug(struct ss7 *ss7 , unsigned int flags ) ;
#line 309
int ss7_add_link(struct ss7 *ss7 , int transport , int fd ) ;
#line 311
int ss7_set_adjpc(struct ss7 *ss7 , int fd , unsigned int pc ) ;
#line 313
int ss7_set_network_ind(struct ss7 *ss7 , int ni ) ;
#line 315
int ss7_set_pc(struct ss7 *ss7 , unsigned int pc ) ;
#line 319
struct ss7 *ss7_new(int switchtype ) ;
#line 321
ss7_event *ss7_check_event(struct ss7 *ss7 ) ;
#line 323
int ss7_start(struct ss7 *ss7 ) ;
#line 325
int ss7_read(struct ss7 *ss7 , int fd ) ;
#line 327
int ss7_write(struct ss7 *ss7 , int fd ) ;
#line 329
void ss7_link_alarm(struct ss7 *ss7 , int fd ) ;
#line 331
void ss7_link_noalarm(struct ss7 *ss7 , int fd ) ;
#line 333
char *ss7_event2str(int event ) ;
#line 337
int ss7_pollflags(struct ss7 *ss7 , int fd ) ;
#line 109 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_internal.h"
void ss7_msg_free(struct ss7_msg *m ) ;
#line 45 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
static void (*__ss7_message)(struct ss7 *ss7 , char *message )  ;
#line 46 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
static void (*__ss7_error)(struct ss7 *ss7 , char *message )  ;
#line 48 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_set_message(void (*func)(struct ss7 *ss7 , char *message ) ) 
{ 


  {
#line 50
  __ss7_message = func;
#line 51
  return;
}
}
#line 53 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_set_error(void (*func)(struct ss7 *ss7 , char *message ) ) 
{ 


  {
#line 55
  __ss7_error = func;
#line 56
  return;
}
}
#line 58 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_message(struct ss7 *ss7 , char *fmt  , ...) 
{ 
  char tmp[1024] ;
  va_list ap ;

  {
  {
#line 63
  __builtin_va_start(ap, fmt);
#line 64
  vsnprintf((char */* __restrict  */)(tmp), sizeof(tmp), (char const   */* __restrict  */)fmt,
            ap);
#line 65
  __builtin_va_end(ap);
  }
#line 66
  if (__ss7_message) {
    {
#line 67
    (*__ss7_message)(ss7, tmp);
    }
  } else {
    {
#line 69
    fputs((char const   */* __restrict  */)(tmp), (FILE */* __restrict  */)stdout);
    }
  }
#line 70
  return;
}
}
#line 72 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_error(struct ss7 *ss7 , char *fmt  , ...) 
{ 
  char tmp[1024] ;
  va_list ap ;

  {
  {
#line 77
  __builtin_va_start(ap, fmt);
#line 78
  vsnprintf((char */* __restrict  */)(tmp), sizeof(tmp), (char const   */* __restrict  */)fmt,
            ap);
#line 79
  __builtin_va_end(ap);
  }
#line 80
  if (__ss7_error) {
    {
#line 81
    (*__ss7_error)(ss7, tmp);
    }
  } else {
    {
#line 83
    fputs((char const   */* __restrict  */)(tmp), (FILE */* __restrict  */)stdout);
    }
  }
#line 84
  return;
}
}
#line 86 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_set_debug(struct ss7 *ss7 , unsigned int flags ) 
{ 


  {
#line 88
  ss7->debug = flags;
#line 89
  return;
}
}
#line 91 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_dump_buf(struct ss7 *ss7 , int tabs , unsigned char *buf , int len ) 
{ 
  int i ;
  int j ;
  char tmp[1024] ;

  {
#line 93
  j = 0;
#line 96
  i = 0;
  {
#line 96
  while (1) {
    while_continue: /* CIL Label */ ;
#line 96
    if (! (i < tabs)) {
#line 96
      goto while_break;
    }
    {
#line 97
    snprintf((char */* __restrict  */)(& tmp[i]), sizeof(tmp) - (unsigned long )i,
             (char const   */* __restrict  */)"\t");
#line 96
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 98
  snprintf((char */* __restrict  */)(& tmp[i]), sizeof(tmp) - (unsigned long )i, (char const   */* __restrict  */)"[ ");
#line 99
  j = i + 2;
#line 100
  i = 0;
  }
  {
#line 100
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 100
    if (! (i < len)) {
#line 100
      goto while_break___0;
    }
    {
#line 101
    snprintf((char */* __restrict  */)(& tmp[3 * i] + j), (sizeof(tmp) - (unsigned long )(3 * i)) - (unsigned long )j,
             (char const   */* __restrict  */)"%02x ", (int )*(buf + i));
#line 100
    i ++;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
  {
#line 103
  ss7_message(ss7, (char *)"%s]\n", tmp);
  }
#line 104
  return;
}
}
#line 106 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_dump_msg(struct ss7 *ss7 , unsigned char *buf , int len ) 
{ 
  int i ;
  char tmp[1024] ;

  {
#line 111
  i = 0;
  {
#line 111
  while (1) {
    while_continue: /* CIL Label */ ;
#line 111
    if (! (i < len)) {
#line 111
      goto while_break;
    }
    {
#line 112
    snprintf((char */* __restrict  */)(& tmp[3 * i]), sizeof(tmp) - (unsigned long )(3 * i),
             (char const   */* __restrict  */)"%02x ", (int )*(buf + i));
#line 111
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 114
  ss7_message(ss7, (char *)"Len = %d [ %s]\n", len, tmp);
  }
#line 115
  return;
}
}
#line 117 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_msg_free(struct ss7_msg *m ) 
{ 


  {
  {
#line 119
  free((void *)m);
  }
#line 120
  return;
}
}
#line 122 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
struct ss7_msg *ss7_msg_new(void) 
{ 
  void *tmp ;

  {
  {
#line 124
  tmp = calloc((size_t )1, sizeof(struct ss7_msg ));
  }
#line 124
  return ((struct ss7_msg *)tmp);
}
}
#line 127 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
unsigned char *ss7_msg_userpart(struct ss7_msg *msg ) 
{ 


  {
#line 129
  return ((msg->buf + 3) + 1);
}
}
#line 132 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_msg_userpart_len(struct ss7_msg *msg , int len ) 
{ 


  {
#line 134
  msg->size = (unsigned int )(4 + len);
#line 135
  return;
}
}
#line 138 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
ss7_event *ss7_next_empty_event(struct ss7 *ss7 ) 
{ 
  ss7_event *e ;

  {
#line 142
  if (ss7->ev_len == 16) {
    {
#line 143
    ss7_error(ss7, (char *)"Event queue full!\n");
    }
#line 144
    return ((ss7_event *)((void *)0));
  }
#line 147
  e = & ss7->ev_q[(ss7->ev_h + ss7->ev_len) % 16];
#line 148
  (ss7->ev_len) ++;
#line 150
  return (e);
}
}
#line 153 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
ss7_event *ss7_check_event(struct ss7 *ss7 ) 
{ 
  ss7_event *e ;
  ss7_event *tmp ;

  {
#line 157
  if (! ss7->ev_len) {
#line 158
    return ((ss7_event *)((void *)0));
  } else {
#line 160
    e = & ss7->ev_q[ss7->ev_h];
  }
  {
#line 161
  (ss7->ev_h) ++;
#line 162
  ss7->ev_h %= 16;
#line 163
  (ss7->ev_len) --;
#line 165
  tmp = mtp3_process_event(ss7, e);
  }
#line 165
  return (tmp);
}
}
#line 168 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_start(struct ss7 *ss7 ) 
{ 


  {
  {
#line 170
  mtp3_start(ss7);
  }
#line 171
  return (0);
}
}
#line 174 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_link_alarm(struct ss7 *ss7 , int fd ) 
{ 


  {
  {
#line 176
  mtp3_alarm(ss7, fd);
  }
#line 177
  return;
}
}
#line 179 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
void ss7_link_noalarm(struct ss7 *ss7 , int fd ) 
{ 


  {
  {
#line 181
  mtp3_noalarm(ss7, fd);
  }
#line 182
  return;
}
}
#line 184 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_add_link(struct ss7 *ss7 , int transport , int fd ) 
{ 
  struct mtp2 *m ;
  int zapmtp2 ;

  {
#line 188
  if (ss7->numlinks >= 4U) {
#line 189
    return (-1);
  }
#line 194
  if (transport == 0) {
#line 194
    goto _L;
  } else
#line 194
  if (transport == 1) {
    _L: /* CIL Label */ 
#line 195
    zapmtp2 = 0;
#line 197
    if (transport == 1) {
#line 198
      zapmtp2 = 1;
    }
    {
#line 200
    m = mtp2_new(fd, ss7->switchtype);
    }
#line 202
    if (! m) {
#line 203
      return (-1);
    }
#line 205
    m->slc = (int )ss7->numlinks;
#line 206
    (ss7->numlinks) ++;
#line 207
    m->master = ss7;
#line 208
    if (zapmtp2) {
#line 209
      m->flags |= 1;
    }
#line 211
    ss7->links[ss7->numlinks - 1U] = m;
  }
#line 214
  return (0);
}
}
#line 217 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_pollflags(struct ss7 *ss7 , int fd ) 
{ 
  int i ;
  int winner ;
  int flags ;

  {
#line 220
  winner = -1;
#line 221
  flags = 3;
#line 223
  i = 0;
  {
#line 223
  while (1) {
    while_continue: /* CIL Label */ ;
#line 223
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 223
      goto while_break;
    }
#line 224
    if ((ss7->links[i])->fd == fd) {
#line 225
      winner = i;
#line 226
      goto while_break;
    }
#line 223
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 230
  if (winner < 0) {
#line 231
    return (-1);
  }
#line 233
  if ((ss7->links[winner])->flags & 1) {
#line 234
    if ((ss7->links[winner])->flags & (1 << 1)) {
#line 235
      flags |= 4;
    }
  } else {
#line 237
    flags |= 4;
  }
#line 239
  return (flags);
}
}
#line 243 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_set_adjpc(struct ss7 *ss7 , int fd , unsigned int pc ) 
{ 
  int i ;
  int winner ;

  {
#line 246
  winner = -1;
#line 248
  i = 0;
  {
#line 248
  while (1) {
    while_continue: /* CIL Label */ ;
#line 248
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 248
      goto while_break;
    }
#line 249
    if ((ss7->links[i])->fd == fd) {
#line 250
      winner = i;
    }
#line 248
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 252
  if (winner > -1) {
#line 253
    (ss7->links[winner])->dpc = pc;
  } else {
#line 255
    return (-1);
  }
#line 257
  return (0);
}
}
#line 260 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_set_pc(struct ss7 *ss7 , unsigned int pc ) 
{ 


  {
#line 262
  ss7->pc = pc;
#line 263
  return (0);
}
}
#line 266 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_set_network_ind(struct ss7 *ss7 , int ni ) 
{ 


  {
#line 268
  ss7->ni = (unsigned char )ni;
#line 269
  return (0);
}
}
#line 272 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
char *ss7_event2str(int event ) 
{ 


  {
  {
#line 275
  if (event == 1) {
#line 275
    goto case_1;
  }
#line 277
  if (event == 2) {
#line 277
    goto case_2;
  }
#line 279
  if (event == 5) {
#line 279
    goto case_5;
  }
#line 281
  if (event == 6) {
#line 281
    goto case_6;
  }
#line 283
  if (event == 7) {
#line 283
    goto case_7;
  }
#line 285
  if (event == 8) {
#line 285
    goto case_8;
  }
#line 287
  if (event == 9) {
#line 287
    goto case_9;
  }
#line 289
  if (event == 10) {
#line 289
    goto case_10;
  }
#line 291
  if (event == 11) {
#line 291
    goto case_11;
  }
#line 293
  if (event == 12) {
#line 293
    goto case_12;
  }
#line 295
  goto switch_default;
  case_1: /* CIL Label */ 
#line 276
  return ((char *)"SS7_EVENT_UP");
  case_2: /* CIL Label */ 
#line 278
  return ((char *)"SS7_EVENT_DOWN");
  case_5: /* CIL Label */ 
#line 280
  return ((char *)"ISUP_EVENT_IAM");
  case_6: /* CIL Label */ 
#line 282
  return ((char *)"ISUP_EVENT_ACM");
  case_7: /* CIL Label */ 
#line 284
  return ((char *)"ISUP_EVENT_ANM");
  case_8: /* CIL Label */ 
#line 286
  return ((char *)"ISUP_EVENT_REL");
  case_9: /* CIL Label */ 
#line 288
  return ((char *)"ISUP_EVENT_RLC");
  case_10: /* CIL Label */ 
#line 290
  return ((char *)"ISUP_EVENT_GRS");
  case_11: /* CIL Label */ 
#line 292
  return ((char *)"ISUP_EVENT_GRA");
  case_12: /* CIL Label */ 
#line 294
  return ((char *)"ISUP_EVENT_CON");
  switch_default: /* CIL Label */ 
#line 296
  return ((char *)"Unknown Event");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 301 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
struct ss7 *ss7_new(int switchtype ) 
{ 
  struct ss7 *s ;
  void *tmp ;

  {
  {
#line 304
  tmp = calloc((size_t )1, sizeof(struct ss7 ));
#line 304
  s = (struct ss7 *)tmp;
  }
#line 306
  if (! s) {
#line 307
    return ((struct ss7 *)((void *)0));
  }
#line 310
  s->ev_h = 0;
#line 311
  s->ev_len = 0;
#line 312
  s->state = 0;
#line 314
  if (switchtype == 1) {
#line 315
    s->switchtype = (unsigned int )switchtype;
  } else
#line 314
  if (switchtype == 1 << 1) {
#line 315
    s->switchtype = (unsigned int )switchtype;
  } else {
    {
#line 317
    free((void *)s);
    }
#line 318
    return ((struct ss7 *)((void *)0));
  }
#line 321
  return (s);
}
}
#line 324 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_write(struct ss7 *ss7 , int fd ) 
{ 
  int res ;
  int i ;
  int winner ;

  {
#line 326
  winner = -1;
#line 328
  i = 0;
  {
#line 328
  while (1) {
    while_continue: /* CIL Label */ ;
#line 328
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 328
      goto while_break;
    }
#line 329
    if ((ss7->links[i])->fd == fd) {
#line 330
      winner = i;
#line 331
      goto while_break;
    }
#line 328
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 335
  if (winner < 0) {
#line 336
    return (-1);
  }
  {
#line 338
  res = mtp2_transmit(ss7->links[winner]);
  }
#line 340
  return (res);
}
}
#line 343 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
int ss7_read(struct ss7 *ss7 , int fd ) 
{ 
  unsigned char buf[1024] ;
  int res ;
  int winner ;
  int i ;
  ssize_t tmp ;

  {
#line 347
  winner = -1;
#line 350
  i = 0;
  {
#line 350
  while (1) {
    while_continue: /* CIL Label */ ;
#line 350
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 350
      goto while_break;
    }
#line 351
    if ((ss7->links[i])->fd == fd) {
#line 352
      winner = i;
#line 353
      goto while_break;
    }
#line 350
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 357
  if (winner < 0) {
#line 358
    return (-1);
  }
  {
#line 360
  tmp = read((ss7->links[winner])->fd, (void *)(buf), sizeof(buf));
#line 360
  res = (int )tmp;
  }
#line 361
  if (res <= 0) {
#line 362
    return (res);
  }
  {
#line 365
  res = mtp2_receive(ss7->links[winner], buf, res);
  }
#line 367
  return (res);
}
}
#line 335 "/home/wheatley/newnew/temp/libss7-1.0.2/libss7.h"
char const   *ss7_get_version(void) ;
#line 8 "/home/wheatley/newnew/temp/libss7-1.0.2/version.c"
static char const   ss7_version[6]  = {      (char const   )'1',      (char const   )'.',      (char const   )'0',      (char const   )'.', 
        (char const   )'2',      (char const   )'\000'};
#line 10 "/home/wheatley/newnew/temp/libss7-1.0.2/version.c"
char const   *ss7_get_version(void) 
{ 


  {
#line 12
  return (ss7_version);
}
}
#line 45 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
static void (*__ss7_message___0)(struct ss7 *ss7 , char *message )  ;
#line 46 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7.c"
static void (*__ss7_error___0)(struct ss7 *ss7 , char *message )  ;
#line 61 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int iam_params___0[7]  = {      6,      7,      9,      2, 
        4,      10,      -1};
#line 64 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int ansi_iam_params___0[14]  = 
#line 64
  {      6,      7,      9,      29, 
        4,      10,      235,      234, 
        192,      193,      199,      196, 
        228,      -1};
#line 70 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int acm_params___0[2]  = {      17,      -1};
#line 72 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int faa_params___0[3]  = {      24,      1,      -1};
#line 74 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int far_params___0[3]  = {      24,      1,      -1};
#line 76 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int anm_params___0[1]  = {      -1};
#line 78 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int con_params___0[2]  = {      17,      -1};
#line 80 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int rel_params___0[2]  = {      18,      -1};
#line 82 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int greset_params___0[2]  = {      22,      -1};
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cot_params___0[2]  = {      16,      -1};
#line 86 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cpg_params___0[2]  = {      36,      -1};
#line 88 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cicgroup_params___0[3]  = {      21,      22,      -1};
#line 90 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cqr_params___0[3]  = {      22,      38,      -1};
#line 92 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int empty_params___0[1]  = {      -1};
#line 94 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct message_data messages___0[29]  = 
#line 94
  {      {1, 4, 1, 1, iam_params___0}, 
        {6, 1, 0, 1, acm_params___0}, 
        {9, 0, 0, 1, anm_params___0}, 
        {7, 1, 0, 1, con_params___0}, 
        {12, 0, 1, 1, rel_params___0}, 
        {16, 0, 0, 1, empty_params___0}, 
        {23, 0, 1, 0, greset_params___0}, 
        {41, 0, 1, 0, greset_params___0}, 
        {24, 1, 1, 0, cicgroup_params___0}, 
        {25, 1, 1, 0, cicgroup_params___0}, 
        {26, 1, 1, 0, cicgroup_params___0}, 
        {27, 1, 1, 0, cicgroup_params___0}, 
        {5, 1, 0, 0, cot_params___0}, 
        {17, 0, 0, 0, empty_params___0}, 
        {19, 0, 0, 0, empty_params___0}, 
        {36, 0, 0, 0, empty_params___0}, 
        {20, 0, 0, 0, empty_params___0}, 
        {21, 0, 0, 0, empty_params___0}, 
        {22, 0, 0, 0, empty_params___0}, 
        {18, 0, 0, 0, empty_params___0}, 
        {235, 0, 0, 0, empty_params___0}, 
        {236, 0, 0, 0, empty_params___0}, 
        {44, 1, 0, 1, cpg_params___0}, 
        {46, 0, 0, 0, empty_params___0}, 
        {42, 0, 1, 0, greset_params___0}, 
        {43, 0, 2, 0, cqr_params___0}, 
        {32, 1, 0, 1, faa_params___0}, 
        {31, 1, 0, 1, far_params___0}, 
        {47, 0, 1, 0, rel_params___0}};
#line 132
static int isup_send_message___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 int *parms___1 ) ;
#line 134 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char *message2str___0(unsigned char message ) 
{ 


  {
  {
#line 137
  if ((int )message == 1) {
#line 137
    goto case_1;
  }
#line 139
  if ((int )message == 6) {
#line 139
    goto case_6;
  }
#line 141
  if ((int )message == 9) {
#line 141
    goto case_9;
  }
#line 143
  if ((int )message == 12) {
#line 143
    goto case_12;
  }
#line 145
  if ((int )message == 16) {
#line 145
    goto case_16;
  }
#line 147
  if ((int )message == 23) {
#line 147
    goto case_23;
  }
#line 149
  if ((int )message == 41) {
#line 149
    goto case_41;
  }
#line 151
  if ((int )message == 5) {
#line 151
    goto case_5;
  }
#line 153
  if ((int )message == 17) {
#line 153
    goto case_17;
  }
#line 155
  if ((int )message == 19) {
#line 155
    goto case_19;
  }
#line 157
  if ((int )message == 20) {
#line 157
    goto case_20;
  }
#line 159
  if ((int )message == 21) {
#line 159
    goto case_21;
  }
#line 161
  if ((int )message == 22) {
#line 161
    goto case_22;
  }
#line 163
  if ((int )message == 24) {
#line 163
    goto case_24;
  }
#line 165
  if ((int )message == 25) {
#line 165
    goto case_25;
  }
#line 167
  if ((int )message == 26) {
#line 167
    goto case_26;
  }
#line 169
  if ((int )message == 27) {
#line 169
    goto case_27;
  }
#line 171
  if ((int )message == 18) {
#line 171
    goto case_18;
  }
#line 173
  if ((int )message == 44) {
#line 173
    goto case_44;
  }
#line 175
  if ((int )message == 46) {
#line 175
    goto case_46;
  }
#line 177
  if ((int )message == 36) {
#line 177
    goto case_36;
  }
#line 179
  if ((int )message == 32) {
#line 179
    goto case_32;
  }
#line 181
  if ((int )message == 31) {
#line 181
    goto case_31;
  }
#line 183
  if ((int )message == 33) {
#line 183
    goto case_33;
  }
#line 185
  if ((int )message == 236) {
#line 185
    goto case_236;
  }
#line 187
  if ((int )message == 235) {
#line 187
    goto case_235;
  }
#line 189
  if ((int )message == 47) {
#line 189
    goto case_47;
  }
#line 191
  goto switch_default;
  case_1: /* CIL Label */ 
#line 138
  return ((char *)"IAM");
  case_6: /* CIL Label */ 
#line 140
  return ((char *)"ACM");
  case_9: /* CIL Label */ 
#line 142
  return ((char *)"ANM");
  case_12: /* CIL Label */ 
#line 144
  return ((char *)"REL");
  case_16: /* CIL Label */ 
#line 146
  return ((char *)"RLC");
  case_23: /* CIL Label */ 
#line 148
  return ((char *)"GRS");
  case_41: /* CIL Label */ 
#line 150
  return ((char *)"GRA");
  case_5: /* CIL Label */ 
#line 152
  return ((char *)"COT");
  case_17: /* CIL Label */ 
#line 154
  return ((char *)"CCR");
  case_19: /* CIL Label */ 
#line 156
  return ((char *)"BLO");
  case_20: /* CIL Label */ 
#line 158
  return ((char *)"UBL");
  case_21: /* CIL Label */ 
#line 160
  return ((char *)"BLA");
  case_22: /* CIL Label */ 
#line 162
  return ((char *)"UBA");
  case_24: /* CIL Label */ 
#line 164
  return ((char *)"CGB");
  case_25: /* CIL Label */ 
#line 166
  return ((char *)"CGU");
  case_26: /* CIL Label */ 
#line 168
  return ((char *)"CGBA");
  case_27: /* CIL Label */ 
#line 170
  return ((char *)"CGUA");
  case_18: /* CIL Label */ 
#line 172
  return ((char *)"RSC");
  case_44: /* CIL Label */ 
#line 174
  return ((char *)"CPG");
  case_46: /* CIL Label */ 
#line 176
  return ((char *)"UCIC");
  case_36: /* CIL Label */ 
#line 178
  return ((char *)"LPA");
  case_32: /* CIL Label */ 
#line 180
  return ((char *)"FAA");
  case_31: /* CIL Label */ 
#line 182
  return ((char *)"FAR");
  case_33: /* CIL Label */ 
#line 184
  return ((char *)"FRJ");
  case_236: /* CIL Label */ 
#line 186
  return ((char *)"CVT");
  case_235: /* CIL Label */ 
#line 188
  return ((char *)"CVR");
  case_47: /* CIL Label */ 
#line 190
  return ((char *)"CFN");
  switch_default: /* CIL Label */ 
#line 192
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 196 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char char2digit___0(char localchar ) 
{ 


  {
  {
#line 199
  if ((int )localchar == 48) {
#line 199
    goto case_48;
  }
#line 201
  if ((int )localchar == 49) {
#line 201
    goto case_49;
  }
#line 203
  if ((int )localchar == 50) {
#line 203
    goto case_50;
  }
#line 205
  if ((int )localchar == 51) {
#line 205
    goto case_51;
  }
#line 207
  if ((int )localchar == 52) {
#line 207
    goto case_52;
  }
#line 209
  if ((int )localchar == 53) {
#line 209
    goto case_53;
  }
#line 211
  if ((int )localchar == 54) {
#line 211
    goto case_54;
  }
#line 213
  if ((int )localchar == 55) {
#line 213
    goto case_55;
  }
#line 215
  if ((int )localchar == 56) {
#line 215
    goto case_56;
  }
#line 217
  if ((int )localchar == 57) {
#line 217
    goto case_57;
  }
#line 219
  if ((int )localchar == 35) {
#line 219
    goto case_35;
  }
#line 221
  goto switch_default;
  case_48: /* CIL Label */ 
#line 200
  return ((char)0);
  case_49: /* CIL Label */ 
#line 202
  return ((char)1);
  case_50: /* CIL Label */ 
#line 204
  return ((char)2);
  case_51: /* CIL Label */ 
#line 206
  return ((char)3);
  case_52: /* CIL Label */ 
#line 208
  return ((char)4);
  case_53: /* CIL Label */ 
#line 210
  return ((char)5);
  case_54: /* CIL Label */ 
#line 212
  return ((char)6);
  case_55: /* CIL Label */ 
#line 214
  return ((char)7);
  case_56: /* CIL Label */ 
#line 216
  return ((char)8);
  case_57: /* CIL Label */ 
#line 218
  return ((char)9);
  case_35: /* CIL Label */ 
#line 220
  return ((char)15);
  switch_default: /* CIL Label */ 
#line 222
  return ((char)0);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 226 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char digit2char___0(unsigned char digit ) 
{ 


  {
  {
#line 229
  if (((int )digit & 15) == 0) {
#line 229
    goto case_0;
  }
#line 231
  if (((int )digit & 15) == 1) {
#line 231
    goto case_1;
  }
#line 233
  if (((int )digit & 15) == 2) {
#line 233
    goto case_2;
  }
#line 235
  if (((int )digit & 15) == 3) {
#line 235
    goto case_3;
  }
#line 237
  if (((int )digit & 15) == 4) {
#line 237
    goto case_4;
  }
#line 239
  if (((int )digit & 15) == 5) {
#line 239
    goto case_5;
  }
#line 241
  if (((int )digit & 15) == 6) {
#line 241
    goto case_6;
  }
#line 243
  if (((int )digit & 15) == 7) {
#line 243
    goto case_7;
  }
#line 245
  if (((int )digit & 15) == 8) {
#line 245
    goto case_8;
  }
#line 247
  if (((int )digit & 15) == 9) {
#line 247
    goto case_9;
  }
#line 249
  if (((int )digit & 15) == 15) {
#line 249
    goto case_15;
  }
#line 251
  goto switch_default;
  case_0: /* CIL Label */ 
#line 230
  return ((char )'0');
  case_1: /* CIL Label */ 
#line 232
  return ((char )'1');
  case_2: /* CIL Label */ 
#line 234
  return ((char )'2');
  case_3: /* CIL Label */ 
#line 236
  return ((char )'3');
  case_4: /* CIL Label */ 
#line 238
  return ((char )'4');
  case_5: /* CIL Label */ 
#line 240
  return ((char )'5');
  case_6: /* CIL Label */ 
#line 242
  return ((char )'6');
  case_7: /* CIL Label */ 
#line 244
  return ((char )'7');
  case_8: /* CIL Label */ 
#line 246
  return ((char )'8');
  case_9: /* CIL Label */ 
#line 248
  return ((char )'9');
  case_15: /* CIL Label */ 
#line 250
  return ((char )'#');
  switch_default: /* CIL Label */ 
#line 252
  return ((char)0);
  switch_break: /* CIL Label */ ;
  }
}
}
#line 256 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_dump_buffer___0(struct ss7 *ss7 , unsigned char *data , int len ) 
{ 
  int i ;

  {
  {
#line 260
  ss7_message(ss7, (char *)"[");
#line 261
  i = 0;
  }
  {
#line 261
  while (1) {
    while_continue: /* CIL Label */ ;
#line 261
    if (! (i < len)) {
#line 261
      goto while_break;
    }
    {
#line 262
    ss7_message(ss7, (char *)"0x%x ", (int )*(data + i));
#line 261
    i ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 264
  ss7_message(ss7, (char *)"]\n");
  }
#line 265
  return;
}
}
#line 267 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_get_number___0(char *dest , unsigned char *src , int srclen , int oddeven ) 
{ 
  int i ;
  int tmp ;

  {
#line 271
  if (oddeven < 2) {
#line 273
    i = 0;
    {
#line 273
    while (1) {
      while_continue: /* CIL Label */ ;
#line 273
      if (! (i < srclen * 2 - oddeven)) {
#line 273
        goto while_break;
      }
#line 274
      if (i % 2) {
#line 274
        tmp = 4;
      } else {
#line 274
        tmp = 0;
      }
      {
#line 274
      *(dest + i) = digit2char___0((unsigned char )((int )*(src + i / 2) >> tmp));
#line 273
      i ++;
      }
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 277
    i = 0;
    {
#line 277
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 277
      if (! (i < srclen)) {
#line 277
        goto while_break___0;
      }
#line 278
      *(dest + i) = (char )*(src + i);
#line 277
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 280
  *(dest + i) = (char )'\000';
#line 281
  return;
}
}
#line 284 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_put_generic___0(unsigned char *dest , char *src , int *len ) 
{ 
  int i ;
  int numlen ;
  size_t tmp ;

  {
  {
#line 286
  i = 0;
#line 287
  tmp = strlen((char const   *)src);
#line 287
  numlen = (int )tmp;
#line 289
  *len = numlen;
  }
  {
#line 291
  while (1) {
    while_continue: /* CIL Label */ ;
#line 291
    if (! (i < numlen)) {
#line 291
      goto while_break;
    }
#line 292
    *(dest + i) = (unsigned char )*(src + i);
#line 293
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 295
  return;
}
}
#line 297 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_put_number___0(unsigned char *dest , char *src , int *len , int *oddeven ) 
{ 
  int i ;
  int numlen ;
  size_t tmp ;
  char tmp___0 ;
  char tmp___1 ;

  {
  {
#line 299
  i = 0;
#line 300
  tmp = strlen((char const   *)src);
#line 300
  numlen = (int )tmp;
  }
#line 302
  if (numlen % 2) {
#line 303
    *oddeven = 1;
#line 304
    *len = numlen / 2 + 1;
  } else {
#line 306
    *oddeven = 0;
#line 307
    *len = numlen / 2;
  }
  {
#line 310
  while (1) {
    while_continue: /* CIL Label */ ;
#line 310
    if (! (i < numlen)) {
#line 310
      goto while_break;
    }
#line 311
    if (! (i % 2)) {
      {
#line 312
      tmp___0 = char2digit___0(*(src + i));
#line 312
      *(dest + i / 2) = (unsigned char )((int )*(dest + i / 2) | ((int )tmp___0 & 15));
      }
    } else {
      {
#line 314
      tmp___1 = char2digit___0(*(src + i));
#line 314
      *(dest + i / 2) = (unsigned char )((int )*(dest + i / 2) | (((int )tmp___1 << 4) & 240));
      }
    }
#line 315
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 317
  return;
}
}
#line 319 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                                 int messagetype , unsigned char *parm ,
                                                 int len ) 
{ 


  {
#line 321
  *(parm + 0) = (unsigned char)0;
#line 323
  if (c->cot_check_required) {
#line 324
    *(parm + 0) = (unsigned char )((int )*(parm + 0) | 4);
  }
#line 326
  return (1);
}
}
#line 329 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                                int messagetype , unsigned char *parm ,
                                                int len ) 
{ 
  unsigned char cci ;

  {
#line 331
  cci = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 333
  if ((int )cci == 1) {
#line 334
    c->cot_check_required = 1;
  } else {
#line 336
    c->cot_check_required = 0;
  }
#line 338
  return (1);
}
}
#line 341 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int nature_of_connection_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                             int len ) 
{ 
  unsigned char con ;
  char *continuity ;
  char const   *tmp ;

  {
  {
#line 343
  con = *(parm + 0);
#line 346
  ss7_message(ss7, (char *)"\t\t\tSatellites in connection: %d\n", (int )con & 3);
#line 347
  con = (unsigned char )((int )con >> 2);
  }
  {
#line 349
  if (((int )con & 3) == 0) {
#line 349
    goto case_0;
  }
#line 352
  if (((int )con & 3) == 1) {
#line 352
    goto case_1;
  }
#line 355
  if (((int )con & 3) == 2) {
#line 355
    goto case_2;
  }
#line 358
  if (((int )con & 3) == 3) {
#line 358
    goto case_3;
  }
#line 348
  goto switch_break;
  case_0: /* CIL Label */ 
#line 350
  continuity = (char *)"Check not required";
#line 351
  goto switch_break;
  case_1: /* CIL Label */ 
#line 353
  continuity = (char *)"Check required on this circuit";
#line 354
  goto switch_break;
  case_2: /* CIL Label */ 
#line 356
  continuity = (char *)"Check performed on a previous circuit";
#line 357
  goto switch_break;
  case_3: /* CIL Label */ 
#line 359
  continuity = (char *)"spare";
#line 360
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 362
  ss7_message(ss7, (char *)"\t\t\tContinuity Check: %s (%d)\n", continuity, (int )con & 3);
#line 363
  con = (unsigned char )((int )con >> 2);
#line 364
  con = (unsigned char )((int )con & 1);
  }
#line 366
  if (con) {
#line 366
    tmp = "included";
  } else {
#line 366
    tmp = "not included";
  }
  {
#line 366
  ss7_message(ss7, (char *)"\t\t\tOutgoing half echo control device: %s (%d)\n", tmp,
              (int )con);
  }
#line 368
  return (1);
}
}
#line 372 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 374
  *(parm + 0) = (unsigned char)96;
#line 375
  *(parm + 1) = (unsigned char)1;
#line 376
  return (2);
}
}
#line 379 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 


  {
#line 381
  return (2);
}
}
#line 384 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int forward_call_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                     int len ) 
{ 
  char *cb_str ;
  char *hg_str ;
  char *kj_str ;
  char const   *tmp ;
  char const   *tmp___0 ;
  char const   *tmp___1 ;
  char const   *tmp___2 ;
  char const   *tmp___3 ;

  {
  {
#line 388
  if ((((int )*(parm + 0) >> 1) & 3) == 0) {
#line 388
    goto case_0;
  }
#line 391
  if ((((int )*(parm + 0) >> 1) & 3) == 1) {
#line 391
    goto case_1;
  }
#line 394
  if ((((int )*(parm + 0) >> 1) & 3) == 2) {
#line 394
    goto case_2;
  }
#line 397
  if ((((int )*(parm + 0) >> 1) & 3) == 3) {
#line 397
    goto case_3;
  }
#line 387
  goto switch_break;
  case_0: /* CIL Label */ 
#line 389
  cb_str = (char *)"no end-to-end";
#line 390
  goto switch_break;
  case_1: /* CIL Label */ 
#line 392
  cb_str = (char *)"pass-along";
#line 393
  goto switch_break;
  case_2: /* CIL Label */ 
#line 395
  cb_str = (char *)"SCCP";
#line 396
  goto switch_break;
  case_3: /* CIL Label */ 
#line 398
  cb_str = (char *)"pass-along and SCCP";
#line 399
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 403
  if ((((int )*(parm + 0) >> 6) & 3) == 0) {
#line 403
    goto case_0___0;
  }
#line 406
  if ((((int )*(parm + 0) >> 6) & 3) == 1) {
#line 406
    goto case_1___0;
  }
#line 409
  if ((((int )*(parm + 0) >> 6) & 3) == 2) {
#line 409
    goto case_2___0;
  }
#line 412
  if ((((int )*(parm + 0) >> 6) & 3) == 3) {
#line 412
    goto case_3___0;
  }
#line 402
  goto switch_break___0;
  case_0___0: /* CIL Label */ 
#line 404
  hg_str = (char *)"ISDN user part preferred all the way";
#line 405
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 407
  hg_str = (char *)"ISDN user part not preferred all the way";
#line 408
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 410
  hg_str = (char *)"ISDN user part required all the way";
#line 411
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 413
  hg_str = (char *)"spare";
#line 414
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 418
  if ((((int )*(parm + 1) >> 1) & 3) == 0) {
#line 418
    goto case_0___1;
  }
#line 421
  if ((((int )*(parm + 1) >> 1) & 3) == 1) {
#line 421
    goto case_1___1;
  }
#line 424
  if ((((int )*(parm + 1) >> 1) & 3) == 2) {
#line 424
    goto case_2___1;
  }
#line 427
  if ((((int )*(parm + 1) >> 1) & 3) == 3) {
#line 427
    goto case_3___1;
  }
#line 417
  goto switch_break___1;
  case_0___1: /* CIL Label */ 
#line 419
  kj_str = (char *)"no indication";
#line 420
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 422
  kj_str = (char *)"connectionless method available";
#line 423
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 425
  kj_str = (char *)"connection oriented method available";
#line 426
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 428
  kj_str = (char *)"connectionless and connection oriented method available";
#line 429
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
#line 432
  if ((int )*(parm + 0) & 1) {
#line 432
    tmp = "international";
  } else {
#line 432
    tmp = "national";
  }
  {
#line 432
  ss7_message(ss7, (char *)"\t\t\tNat/Intl Call Ind: call to be treated as a %s call (%d)\n",
              tmp, (int )*(parm + 0) & 1);
#line 433
  ss7_message(ss7, (char *)"\t\t\tEnd to End Method Ind: %s method(s) available (%d)\n",
              cb_str, ((int )*(parm + 0) >> 1) & 3);
  }
#line 434
  if (((int )*(parm + 0) >> 3) & 1) {
#line 434
    tmp___0 = "";
  } else {
#line 434
    tmp___0 = "no ";
  }
  {
#line 434
  ss7_message(ss7, (char *)"\t\t\tInterworking Ind: %sinterworking encountered (%d)\n",
              tmp___0, ((int )*(parm + 0) >> 3) & 1);
  }
#line 435
  if (((int )*(parm + 0) >> 4) & 1) {
#line 435
    tmp___1 = "";
  } else {
#line 435
    tmp___1 = "no ";
  }
  {
#line 435
  ss7_message(ss7, (char *)"\t\t\tEnd to End Info Ind: %send-to-end information available (%d)\n",
              tmp___1, ((int )*(parm + 0) >> 4) & 1);
  }
#line 436
  if (((int )*(parm + 0) >> 5) & 1) {
#line 436
    tmp___2 = "";
  } else {
#line 436
    tmp___2 = "not ";
  }
  {
#line 436
  ss7_message(ss7, (char *)"\t\t\tISDN User Part Ind: ISDN user part %sused all the way (%d)\n",
              tmp___2, ((int )*(parm + 0) >> 5) & 1);
#line 437
  ss7_message(ss7, (char *)"\t\t\tISDN User Part Pref Ind: %s (%d)\n", hg_str, ((int )*(parm + 0) >> 6) & 3);
  }
#line 438
  if ((int )*(parm + 1) & 1) {
#line 438
    tmp___3 = "ISDN";
  } else {
#line 438
    tmp___3 = "non-ISDN";
  }
  {
#line 438
  ss7_message(ss7, (char *)"\t\t\tISDN Access Ind: originating access %s (%d)\n",
              tmp___3, (int )*(parm + 1) & 1);
#line 439
  ss7_message(ss7, (char *)"\t\t\tSCCP Method Ind: %s (%d)\n", kj_str, ((int )*(parm + 1) >> 1) & 3);
  }
#line 440
  return (2);
}
}
#line 443 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 445
  c->calling_party_cat = *(parm + 0);
#line 446
  return (1);
}
}
#line 449 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 


  {
#line 451
  *(parm + 0) = (unsigned char)10;
#line 452
  return (1);
}
}
#line 455 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_cat_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  char *cattype ;

  {
  {
#line 460
  if ((int )*(parm + 0) == 1) {
#line 460
    goto case_1;
  }
#line 463
  if ((int )*(parm + 0) == 2) {
#line 463
    goto case_2;
  }
#line 466
  if ((int )*(parm + 0) == 3) {
#line 466
    goto case_3;
  }
#line 469
  if ((int )*(parm + 0) == 4) {
#line 469
    goto case_4;
  }
#line 472
  if ((int )*(parm + 0) == 5) {
#line 472
    goto case_5;
  }
#line 475
  if ((int )*(parm + 0) == 9) {
#line 475
    goto case_9;
  }
#line 478
  if ((int )*(parm + 0) == 10) {
#line 478
    goto case_10;
  }
#line 481
  if ((int )*(parm + 0) == 11) {
#line 481
    goto case_11;
  }
#line 484
  if ((int )*(parm + 0) == 12) {
#line 484
    goto case_12;
  }
#line 487
  if ((int )*(parm + 0) == 13) {
#line 487
    goto case_13;
  }
#line 490
  if ((int )*(parm + 0) == 15) {
#line 490
    goto case_15;
  }
#line 493
  goto switch_default;
  case_1: /* CIL Label */ 
#line 461
  cattype = (char *)"Operator, French";
#line 462
  goto switch_break;
  case_2: /* CIL Label */ 
#line 464
  cattype = (char *)"Operator, English";
#line 465
  goto switch_break;
  case_3: /* CIL Label */ 
#line 467
  cattype = (char *)"Operator, German";
#line 468
  goto switch_break;
  case_4: /* CIL Label */ 
#line 470
  cattype = (char *)"Operator, Russian";
#line 471
  goto switch_break;
  case_5: /* CIL Label */ 
#line 473
  cattype = (char *)"Operator, Spanish";
#line 474
  goto switch_break;
  case_9: /* CIL Label */ 
#line 476
  cattype = (char *)"Reserved";
#line 477
  goto switch_break;
  case_10: /* CIL Label */ 
#line 479
  cattype = (char *)"Ordinary calling subscriber";
#line 480
  goto switch_break;
  case_11: /* CIL Label */ 
#line 482
  cattype = (char *)"Calling subscriber with priority";
#line 483
  goto switch_break;
  case_12: /* CIL Label */ 
#line 485
  cattype = (char *)"Data Call (voice band data)";
#line 486
  goto switch_break;
  case_13: /* CIL Label */ 
#line 488
  cattype = (char *)"Test Call";
#line 489
  goto switch_break;
  case_15: /* CIL Label */ 
#line 491
  cattype = (char *)"Payphone";
#line 492
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 494
  cattype = (char *)"Unknown";
#line 495
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 498
  ss7_message(ss7, (char *)"\t\t\tCategory: %s (%d)\n", cattype, (int )*(parm + 0));
  }
#line 499
  return (1);
}
}
#line 502 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int user_service_info_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 505
  return (len);
}
}
#line 508 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int user_service_info_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 


  {
#line 511
  *(parm + 0) = (unsigned char)144;
#line 513
  *(parm + 1) = (unsigned char)144;
#line 515
  *(parm + 2) = (unsigned char)162;
#line 517
  return (3);
}
}
#line 520 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                                 int messagetype , unsigned char *parm ,
                                                 int len ) 
{ 


  {
#line 522
  if (ss7->switchtype != 1U) {
#line 523
    return (0);
  }
#line 525
  *(parm + 0) = (unsigned char)0;
#line 526
  return (1);
}
}
#line 529 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                                int messagetype , unsigned char *parm ,
                                                int len ) 
{ 


  {
#line 531
  c->transcap = (int )*(parm + 0) & 127;
#line 532
  return (1);
}
}
#line 535 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int transmission_medium_reqs_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                             int len ) 
{ 
  char *type ;

  {
  {
#line 540
  if ((int )*(parm + 0) == 0) {
#line 540
    goto case_0;
  }
#line 543
  if ((int )*(parm + 0) == 1) {
#line 543
    goto case_1;
  }
#line 546
  if ((int )*(parm + 0) == 2) {
#line 546
    goto case_2;
  }
#line 549
  if ((int )*(parm + 0) == 4) {
#line 549
    goto case_4;
  }
#line 552
  if ((int )*(parm + 0) == 6) {
#line 552
    goto case_6;
  }
#line 555
  if ((int )*(parm + 0) == 7) {
#line 555
    goto case_7;
  }
#line 558
  if ((int )*(parm + 0) == 8) {
#line 558
    goto case_8;
  }
#line 561
  if ((int )*(parm + 0) == 9) {
#line 561
    goto case_9;
  }
#line 564
  if ((int )*(parm + 0) == 10) {
#line 564
    goto case_10;
  }
#line 567
  goto switch_default;
  case_0: /* CIL Label */ 
#line 541
  type = (char *)"Speech";
#line 542
  goto switch_break;
  case_1: /* CIL Label */ 
#line 544
  type = (char *)"Spare";
#line 545
  goto switch_break;
  case_2: /* CIL Label */ 
#line 547
  type = (char *)"64 kbit/s unrestricted";
#line 548
  goto switch_break;
  case_4: /* CIL Label */ 
#line 550
  type = (char *)"3.1 khz audio";
#line 551
  goto switch_break;
  case_6: /* CIL Label */ 
#line 553
  type = (char *)"64 kbit/s preferred";
#line 554
  goto switch_break;
  case_7: /* CIL Label */ 
#line 556
  type = (char *)"2 x 64 kbit/s unrestricted";
#line 557
  goto switch_break;
  case_8: /* CIL Label */ 
#line 559
  type = (char *)"384 kbit/s unrestricted";
#line 560
  goto switch_break;
  case_9: /* CIL Label */ 
#line 562
  type = (char *)"1536 kbit/s unrestricted";
#line 563
  goto switch_break;
  case_10: /* CIL Label */ 
#line 565
  type = (char *)"1920 kbit/s unrestricted";
#line 566
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 568
  type = (char *)"N x 64kbit/s unrestricted or possibly spare";
#line 569
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 571
  ss7_message(ss7, (char *)"\t\t\t%s (%d)\n", type, (int )*(parm + 0));
  }
#line 572
  return (1);
}
}
#line 575 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                     int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 577
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 578
  numbuf[0] = (char )'\000';
#line 578
  tmp = 1U;
  {
#line 578
  while (1) {
    while_continue: /* CIL Label */ ;
#line 578
    if (tmp >= 64U) {
#line 578
      goto while_break;
    }
#line 578
    numbuf[tmp] = (char)0;
#line 578
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 580
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 581
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 582
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 584
  isup_get_number___0(numbuf, parm + 2, len - 2, oddeven);
#line 586
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 588
  return (len);
}
}
#line 592 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 
  int odd ;

  {
#line 594
  odd = 0;
#line 596
  if ((int )*(parm + 0) & 128) {
#line 597
    odd = 1;
  }
  {
#line 599
  isup_get_number___0(c->called_party_num, parm + 2, len - 2, odd);
#line 601
  c->called_nai = (unsigned char )((int )*(parm + 0) & 127);
  }
#line 603
  return (len);
}
}
#line 606 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int called_party_num_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 
  int numlen ;
  int oddeven ;

  {
  {
#line 610
  isup_put_number___0(parm + 2, c->called_party_num, & numlen, & oddeven);
#line 612
  *(parm + 0) = (unsigned char )((int )c->called_nai & 127);
  }
#line 614
  if (oddeven) {
#line 615
    *(parm + 0) = (unsigned char )((int )*(parm + 0) | 128);
  }
#line 617
  *(parm + 1) = (unsigned char )(1 << 4);
#line 619
  return (numlen + 2);
}
}
#line 622 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 624
  c->called_party_status_ind = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 625
  return (2);
}
}
#line 628 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 


  {
#line 630
  *(parm + 0) = (unsigned char)64;
#line 631
  *(parm + 1) = (unsigned char)20;
#line 632
  return (2);
}
}
#line 635 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int backward_call_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  unsigned char ba ;
  unsigned char dc ;
  unsigned char fe ;
  unsigned char hg ;
  unsigned char i ;
  unsigned char j ;
  unsigned char k ;
  unsigned char l ;
  unsigned char m ;
  unsigned char n ;
  unsigned char pq ;

  {
  {
#line 637
  ba = (unsigned char )((int )*(parm + 0) & 3);
#line 638
  dc = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 639
  fe = (unsigned char )(((int )*(parm + 0) >> 4) & 3);
#line 640
  hg = (unsigned char )(((int )*(parm + 0) >> 6) & 3);
#line 641
  i = (unsigned char )((int )*(parm + 1) & 1);
#line 642
  j = (unsigned char )(((int )*(parm + 1) >> 1) & 1);
#line 643
  k = (unsigned char )(((int )*(parm + 1) >> 2) & 1);
#line 644
  l = (unsigned char )(((int )*(parm + 1) >> 3) & 1);
#line 645
  m = (unsigned char )(((int )*(parm + 1) >> 4) & 1);
#line 646
  n = (unsigned char )(((int )*(parm + 1) >> 5) & 1);
#line 647
  pq = (unsigned char )(((int )*(parm + 1) >> 7) & 3);
#line 649
  ss7_message(ss7, (char *)"\t\t\tCharge indicator: %d\n", (int )ba);
#line 650
  ss7_message(ss7, (char *)"\t\t\tCalled party\'s status indicator: %d\n", (int )dc);
#line 651
  ss7_message(ss7, (char *)"\t\t\tCalled party\'s category indicator: %d\n", (int )fe);
#line 652
  ss7_message(ss7, (char *)"\t\t\tEnd to End method indicator: %d\n", (int )hg);
#line 653
  ss7_message(ss7, (char *)"\t\t\tInterworking indicator: %d\n", (int )i);
#line 654
  ss7_message(ss7, (char *)"\t\t\tEnd to End information indicator: %d\n", (int )j);
#line 655
  ss7_message(ss7, (char *)"\t\t\tISDN user part indicator: %d\n", (int )k);
#line 656
  ss7_message(ss7, (char *)"\t\t\tHolding indicator: %d\n", (int )l);
#line 657
  ss7_message(ss7, (char *)"\t\t\tISDN access indicator: %d\n", (int )m);
#line 658
  ss7_message(ss7, (char *)"\t\t\tEcho control device indicator: %d\n", (int )n);
#line 659
  ss7_message(ss7, (char *)"\t\t\tSCCP method indicator: %d\n", (int )pq);
  }
#line 661
  return (2);
}
}
#line 664 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int opt_backward_call_ind_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                             int messagetype , unsigned char *parm ,
                                             int len ) 
{ 


  {
#line 666
  return (1);
}
}
#line 669 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int opt_backward_call_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                          int len ) 
{ 
  unsigned char a ;
  unsigned char b ;
  unsigned char c ;
  unsigned char d ;

  {
  {
#line 672
  a = (unsigned char )((int )*(parm + 0) & 1);
#line 673
  b = (unsigned char )(((int )*(parm + 0) >> 1) & 1);
#line 674
  c = (unsigned char )(((int )*(parm + 0) >> 2) & 1);
#line 675
  d = (unsigned char )(((int )*(parm + 0) >> 3) & 1);
#line 677
  ss7_message(ss7, (char *)"\t\t\tIn-band information indicator: %d\n", (int )a);
#line 678
  ss7_message(ss7, (char *)"\t\t\tCall diversion may occur indicator: %d\n", (int )b);
#line 679
  ss7_message(ss7, (char *)"\t\t\tSimple segmentation indicator: %d\n", (int )c);
#line 680
  ss7_message(ss7, (char *)"\t\t\tMLPP user indicator: %d\n", (int )d);
  }
#line 681
  return (1);
}
}
#line 684 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                             unsigned char *parm , int len ) 
{ 


  {
#line 686
  c->causeloc = (int )*(parm + 0) & 15;
#line 687
  c->causecode = ((int )*(parm + 0) & 96) >> 5;
#line 688
  c->cause = (int )*(parm + 1) & 127;
#line 690
  return (len);
}
}
#line 693 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                              unsigned char *parm , int len ) 
{ 


  {
#line 695
  *(parm + 0) = (unsigned char )((128 | (c->causecode << 5)) | c->causeloc);
#line 696
  *(parm + 1) = (unsigned char )(128 | c->cause);
#line 697
  return (2);
}
}
#line 700 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int cause_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                          int len ) 
{ 
  char *cause ;

  {
  {
#line 704
  if (((int )*(parm + 1) & 127) == 1) {
#line 704
    goto case_1;
  }
#line 707
  if (((int )*(parm + 1) & 127) == 2) {
#line 707
    goto case_2;
  }
#line 710
  if (((int )*(parm + 1) & 127) == 3) {
#line 710
    goto case_3;
  }
#line 713
  if (((int )*(parm + 1) & 127) == 4) {
#line 713
    goto case_4;
  }
#line 716
  if (((int )*(parm + 1) & 127) == 5) {
#line 716
    goto case_5;
  }
#line 719
  if (((int )*(parm + 1) & 127) == 6) {
#line 719
    goto case_6;
  }
#line 722
  if (((int )*(parm + 1) & 127) == 7) {
#line 722
    goto case_7;
  }
#line 725
  if (((int )*(parm + 1) & 127) == 8) {
#line 725
    goto case_8;
  }
#line 728
  if (((int )*(parm + 1) & 127) == 9) {
#line 728
    goto case_9;
  }
#line 731
  if (((int )*(parm + 1) & 127) == 16) {
#line 731
    goto case_16;
  }
#line 734
  if (((int )*(parm + 1) & 127) == 17) {
#line 734
    goto case_17;
  }
#line 737
  if (((int )*(parm + 1) & 127) == 18) {
#line 737
    goto case_18;
  }
#line 740
  if (((int )*(parm + 1) & 127) == 19) {
#line 740
    goto case_19;
  }
#line 743
  if (((int )*(parm + 1) & 127) == 20) {
#line 743
    goto case_20;
  }
#line 746
  if (((int )*(parm + 1) & 127) == 21) {
#line 746
    goto case_21;
  }
#line 749
  if (((int )*(parm + 1) & 127) == 22) {
#line 749
    goto case_22;
  }
#line 752
  if (((int )*(parm + 1) & 127) == 23) {
#line 752
    goto case_23;
  }
#line 755
  if (((int )*(parm + 1) & 127) == 25) {
#line 755
    goto case_25;
  }
#line 758
  if (((int )*(parm + 1) & 127) == 26) {
#line 758
    goto case_26;
  }
#line 761
  if (((int )*(parm + 1) & 127) == 27) {
#line 761
    goto case_27;
  }
#line 764
  if (((int )*(parm + 1) & 127) == 28) {
#line 764
    goto case_28;
  }
#line 767
  if (((int )*(parm + 1) & 127) == 29) {
#line 767
    goto case_29;
  }
#line 770
  if (((int )*(parm + 1) & 127) == 30) {
#line 770
    goto case_30;
  }
#line 773
  if (((int )*(parm + 1) & 127) == 31) {
#line 773
    goto case_31;
  }
#line 776
  if (((int )*(parm + 1) & 127) == 34) {
#line 776
    goto case_34;
  }
#line 779
  if (((int )*(parm + 1) & 127) == 38) {
#line 779
    goto case_38;
  }
#line 782
  if (((int )*(parm + 1) & 127) == 39) {
#line 782
    goto case_39;
  }
#line 785
  if (((int )*(parm + 1) & 127) == 40) {
#line 785
    goto case_40;
  }
#line 788
  if (((int )*(parm + 1) & 127) == 41) {
#line 788
    goto case_41;
  }
#line 791
  if (((int )*(parm + 1) & 127) == 42) {
#line 791
    goto case_42;
  }
#line 795
  goto switch_default;
  case_1: /* CIL Label */ 
#line 705
  cause = (char *)"Unallocated (unassigned) number";
#line 706
  goto switch_break;
  case_2: /* CIL Label */ 
#line 708
  cause = (char *)"No route to specified transit network";
#line 709
  goto switch_break;
  case_3: /* CIL Label */ 
#line 711
  cause = (char *)"No route to destination";
#line 712
  goto switch_break;
  case_4: /* CIL Label */ 
#line 714
  cause = (char *)"Send special information tone";
#line 715
  goto switch_break;
  case_5: /* CIL Label */ 
#line 717
  cause = (char *)"Misdialled trunk prefix";
#line 718
  goto switch_break;
  case_6: /* CIL Label */ 
#line 720
  cause = (char *)"Channel unacceptable";
#line 721
  goto switch_break;
  case_7: /* CIL Label */ 
#line 723
  cause = (char *)"Call awarded and being delivered in an established channel";
#line 724
  goto switch_break;
  case_8: /* CIL Label */ 
#line 726
  cause = (char *)"Preemption";
#line 727
  goto switch_break;
  case_9: /* CIL Label */ 
#line 729
  cause = (char *)"Preemption - circuit reserved for reuse";
#line 730
  goto switch_break;
  case_16: /* CIL Label */ 
#line 732
  cause = (char *)"Normal call clearing";
#line 733
  goto switch_break;
  case_17: /* CIL Label */ 
#line 735
  cause = (char *)"User busy";
#line 736
  goto switch_break;
  case_18: /* CIL Label */ 
#line 738
  cause = (char *)"No user responding";
#line 739
  goto switch_break;
  case_19: /* CIL Label */ 
#line 741
  cause = (char *)"No answer from user (user alerted)";
#line 742
  goto switch_break;
  case_20: /* CIL Label */ 
#line 744
  cause = (char *)"Subscriber absent";
#line 745
  goto switch_break;
  case_21: /* CIL Label */ 
#line 747
  cause = (char *)"Call rejected";
#line 748
  goto switch_break;
  case_22: /* CIL Label */ 
#line 750
  cause = (char *)"Number changed";
#line 751
  goto switch_break;
  case_23: /* CIL Label */ 
#line 753
  cause = (char *)"Redirection to new destination";
#line 754
  goto switch_break;
  case_25: /* CIL Label */ 
#line 756
  cause = (char *)"Exchange routing error";
#line 757
  goto switch_break;
  case_26: /* CIL Label */ 
#line 759
  cause = (char *)"Non-selected user clearing";
#line 760
  goto switch_break;
  case_27: /* CIL Label */ 
#line 762
  cause = (char *)"Destination out of order";
#line 763
  goto switch_break;
  case_28: /* CIL Label */ 
#line 765
  cause = (char *)"Invalid number format (address incomplete)";
#line 766
  goto switch_break;
  case_29: /* CIL Label */ 
#line 768
  cause = (char *)"Facility rejected";
#line 769
  goto switch_break;
  case_30: /* CIL Label */ 
#line 771
  cause = (char *)"Response to STATUS ENQUIRY";
#line 772
  goto switch_break;
  case_31: /* CIL Label */ 
#line 774
  cause = (char *)"Normal, unspecified";
#line 775
  goto switch_break;
  case_34: /* CIL Label */ 
#line 777
  cause = (char *)"No circuit/channel available";
#line 778
  goto switch_break;
  case_38: /* CIL Label */ 
#line 780
  cause = (char *)"Network out of order";
#line 781
  goto switch_break;
  case_39: /* CIL Label */ 
#line 783
  cause = (char *)"Permanent frame mode connection out of service";
#line 784
  goto switch_break;
  case_40: /* CIL Label */ 
#line 786
  cause = (char *)"Permanent frame mode connection operational";
#line 787
  goto switch_break;
  case_41: /* CIL Label */ 
#line 789
  cause = (char *)"Temporary failure";
#line 790
  goto switch_break;
  case_42: /* CIL Label */ 
#line 792
  cause = (char *)"Switching equipment congestion";
#line 793
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 796
  cause = (char *)"Unknown";
  switch_break: /* CIL Label */ ;
  }
  {
#line 798
  ss7_message(ss7, (char *)"\t\t\tCoding Standard: %d\n", ((int )*(parm + 0) >> 5) & 3);
#line 799
  ss7_message(ss7, (char *)"\t\t\tLocation: %d\n", (int )*(parm + 0) & 15);
#line 800
  ss7_message(ss7, (char *)"\t\t\tCause Class: %d\n", ((int )*(parm + 1) >> 4) & 7);
#line 801
  ss7_message(ss7, (char *)"\t\t\tCause Subclass: %d\n", (int )*(parm + 1) & 15);
#line 802
  ss7_message(ss7, (char *)"\t\t\tCause: %s (%d)\n", cause, (int )*(parm + 1) & 127);
  }
#line 804
  return (len);
}
}
#line 808 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                     int len ) 
{ 


  {
  {
#line 810
  ss7_message(ss7, (char *)"\t\t\tRange: %d\n", (int )*(parm + 0) & 255);
  }
#line 811
  return (len);
}
}
#line 814 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 
  int i ;
  int numcics ;

  {
#line 819
  c->range = (int )*(parm + 0);
#line 820
  numcics = c->range + 1;
#line 823
  if (messagetype == 43) {
#line 824
    return (len);
  } else
#line 823
  if (messagetype == 42) {
#line 824
    return (len);
  } else
#line 823
  if (messagetype == 23) {
#line 824
    return (len);
  }
#line 826
  i = 0;
  {
#line 826
  while (1) {
    while_continue: /* CIL Label */ ;
#line 826
    if (! (i < numcics)) {
#line 826
      goto while_break;
    }
#line 827
    if ((int )*(parm + (1 + i / 8)) & (1 << i % 8)) {
#line 828
      c->status[i] = (unsigned char)1;
    } else {
#line 830
      c->status[i] = (unsigned char)0;
    }
#line 826
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 833
  return (len);
}
}
#line 836 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int range_and_status_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 
  int i ;
  int statuslen ;
  int numcics ;

  {
#line 838
  statuslen = 0;
#line 839
  numcics = c->range + 1;
#line 841
  *(parm + 0) = (unsigned char )(c->range & 255);
#line 844
  if (messagetype == 43) {
#line 845
    return (1);
  } else
#line 844
  if (messagetype == 42) {
#line 845
    return (1);
  } else
#line 844
  if (messagetype == 23) {
#line 845
    return (1);
  }
#line 847
  statuslen = numcics / 8 + ! (! (numcics % 8));
#line 849
  if (messagetype == 41) {
#line 850
    i = 0;
    {
#line 850
    while (1) {
      while_continue: /* CIL Label */ ;
#line 850
      if (! (i < statuslen)) {
#line 850
        goto while_break;
      }
#line 851
      *(parm + (1 + i)) = (unsigned char)0;
#line 850
      i ++;
    }
    while_break: /* CIL Label */ ;
    }
  } else {
#line 854
    i = 0;
    {
#line 854
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 854
      if (! (i < numcics)) {
#line 854
        goto while_break___0;
      }
#line 855
      if (c->status[i]) {
#line 856
        *(parm + (1 + i / 8)) = (unsigned char )((int )*(parm + (1 + i / 8)) | (1 << i % 8));
      }
#line 854
      i ++;
    }
    while_break___0: /* CIL Label */ ;
    }
  }
#line 860
  return (statuslen + 1);
}
}
#line 863 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 865
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 866
  numbuf[0] = (char )'\000';
#line 866
  tmp = 1U;
  {
#line 866
  while (1) {
    while_continue: /* CIL Label */ ;
#line 866
    if (tmp >= 64U) {
#line 866
      goto while_break;
    }
#line 866
    numbuf[tmp] = (char)0;
#line 866
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 868
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 869
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 870
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 871
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 872
  ss7_message(ss7, (char *)"\t\t\tScreening: %x\n", (int )*(parm + 1) & 3);
#line 874
  isup_get_number___0(numbuf, parm + 2, len - 2, oddeven);
#line 876
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 878
  return (len);
}
}
#line 881 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 883
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 885
  isup_get_number___0(c->calling_party_num, parm + 2, len - 2, oddeven);
#line 887
  c->calling_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 888
  c->presentation_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 889
  c->screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 891
  return (len);
}
}
#line 895 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int calling_party_num_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 899
  if (! c->calling_party_num[0]) {
#line 900
    return (0);
  }
  {
#line 902
  isup_put_number___0(parm + 2, c->calling_party_num, & datalen, & oddeven);
#line 904
  *(parm + 0) = (unsigned char )((oddeven << 7) | (int )c->calling_nai);
#line 905
  *(parm + 1) = (unsigned char )(((1 << 4) | (((int )c->presentation_ind & 3) << 2)) | ((int )c->screening_ind & 3));
  }
#line 909
  return (datalen + 2);
}
}
#line 912 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_dump___0(struct ss7 *ss7 , int messagetype ,
                                                 unsigned char *parm , int len ) 
{ 
  char *name ;

  {
  {
#line 917
  if ((int )*(parm + 0) == 0) {
#line 917
    goto case_0;
  }
#line 920
  if ((int )*(parm + 0) == 1) {
#line 920
    goto case_1;
  }
#line 923
  if ((int )*(parm + 0) == 2) {
#line 923
    goto case_2;
  }
#line 928
  if ((int )*(parm + 0) == 5) {
#line 928
    goto case_5;
  }
#line 928
  if ((int )*(parm + 0) == 4) {
#line 928
    goto case_5;
  }
#line 928
  if ((int )*(parm + 0) == 3) {
#line 928
    goto case_5;
  }
#line 931
  if ((int )*(parm + 0) == 6) {
#line 931
    goto case_6;
  }
#line 934
  if ((int )*(parm + 0) == 7) {
#line 934
    goto case_7;
  }
#line 938
  if ((int )*(parm + 0) == 9) {
#line 938
    goto case_9;
  }
#line 938
  if ((int )*(parm + 0) == 8) {
#line 938
    goto case_9;
  }
#line 941
  if ((int )*(parm + 0) == 10) {
#line 941
    goto case_10;
  }
#line 944
  if ((int )*(parm + 0) == 11) {
#line 944
    goto case_11;
  }
#line 954
  if ((int )*(parm + 0) == 19) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 18) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 17) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 16) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 15) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 14) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 13) {
#line 954
    goto case_19;
  }
#line 954
  if ((int )*(parm + 0) == 12) {
#line 954
    goto case_19;
  }
#line 957
  if ((int )*(parm + 0) == 20) {
#line 957
    goto case_20;
  }
#line 961
  if ((int )*(parm + 0) == 22) {
#line 961
    goto case_22;
  }
#line 961
  if ((int )*(parm + 0) == 21) {
#line 961
    goto case_22;
  }
#line 964
  if ((int )*(parm + 0) == 23) {
#line 964
    goto case_23;
  }
#line 968
  if ((int )*(parm + 0) == 25) {
#line 968
    goto case_25;
  }
#line 968
  if ((int )*(parm + 0) == 24) {
#line 968
    goto case_25;
  }
#line 971
  if ((int )*(parm + 0) == 26) {
#line 971
    goto case_26;
  }
#line 974
  if ((int )*(parm + 0) == 27) {
#line 974
    goto case_27;
  }
#line 977
  if ((int )*(parm + 0) == 28) {
#line 977
    goto case_28;
  }
#line 980
  if ((int )*(parm + 0) == 29) {
#line 980
    goto case_29;
  }
#line 985
  if ((int )*(parm + 0) == 32) {
#line 985
    goto case_32;
  }
#line 985
  if ((int )*(parm + 0) == 31) {
#line 985
    goto case_32;
  }
#line 985
  if ((int )*(parm + 0) == 30) {
#line 985
    goto case_32;
  }
#line 988
  if ((int )*(parm + 0) == 33) {
#line 988
    goto case_33;
  }
#line 991
  if ((int )*(parm + 0) == 34) {
#line 991
    goto case_34;
  }
#line 998
  if ((int )*(parm + 0) == 39) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 38) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 37) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 36) {
#line 998
    goto case_39;
  }
#line 998
  if ((int )*(parm + 0) == 35) {
#line 998
    goto case_39;
  }
#line 1010
  if ((int )*(parm + 0) == 49) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 48) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 47) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 46) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 45) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 44) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 43) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 42) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 41) {
#line 1010
    goto case_49;
  }
#line 1010
  if ((int )*(parm + 0) == 40) {
#line 1010
    goto case_49;
  }
#line 1014
  if ((int )*(parm + 0) == 51) {
#line 1014
    goto case_51;
  }
#line 1014
  if ((int )*(parm + 0) == 50) {
#line 1014
    goto case_51;
  }
#line 1017
  if ((int )*(parm + 0) == 52) {
#line 1017
    goto case_52;
  }
#line 1026
  if ((int )*(parm + 0) == 59) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 58) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 57) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 56) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 55) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 54) {
#line 1026
    goto case_59;
  }
#line 1026
  if ((int )*(parm + 0) == 53) {
#line 1026
    goto case_59;
  }
#line 1029
  if ((int )*(parm + 0) == 60) {
#line 1029
    goto case_60;
  }
#line 1032
  if ((int )*(parm + 0) == 61) {
#line 1032
    goto case_61;
  }
#line 1035
  if ((int )*(parm + 0) == 62) {
#line 1035
    goto case_62;
  }
#line 1038
  if ((int )*(parm + 0) == 63) {
#line 1038
    goto case_63;
  }
#line 1042
  if ((int )*(parm + 0) == 65) {
#line 1042
    goto case_65;
  }
#line 1042
  if ((int )*(parm + 0) == 64) {
#line 1042
    goto case_65;
  }
#line 1045
  if ((int )*(parm + 0) == 66) {
#line 1045
    goto case_66;
  }
#line 1048
  if ((int )*(parm + 0) == 67) {
#line 1048
    goto case_67;
  }
#line 1052
  if ((int )*(parm + 0) == 69) {
#line 1052
    goto case_69;
  }
#line 1052
  if ((int )*(parm + 0) == 68) {
#line 1052
    goto case_69;
  }
#line 1055
  if ((int )*(parm + 0) == 70) {
#line 1055
    goto case_70;
  }
#line 1066
  if ((int )*(parm + 0) == 79) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 78) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 77) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 76) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 75) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 74) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 73) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 72) {
#line 1066
    goto case_79;
  }
#line 1066
  if ((int )*(parm + 0) == 71) {
#line 1066
    goto case_79;
  }
#line 1078
  if ((int )*(parm + 0) == 89) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 88) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 87) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 86) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 85) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 84) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 83) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 82) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 81) {
#line 1078
    goto case_89;
  }
#line 1078
  if ((int )*(parm + 0) == 80) {
#line 1078
    goto case_89;
  }
#line 1083
  if ((int )*(parm + 0) == 92) {
#line 1083
    goto case_92;
  }
#line 1083
  if ((int )*(parm + 0) == 91) {
#line 1083
    goto case_92;
  }
#line 1083
  if ((int )*(parm + 0) == 90) {
#line 1083
    goto case_92;
  }
#line 1086
  if ((int )*(parm + 0) == 93) {
#line 1086
    goto case_93;
  }
#line 1094
  if ((int )*(parm + 0) == 99) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 98) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 97) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 96) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 95) {
#line 1094
    goto case_99;
  }
#line 1094
  if ((int )*(parm + 0) == 94) {
#line 1094
    goto case_99;
  }
#line 1098
  goto switch_default;
  case_0: /* CIL Label */ 
#line 918
  name = (char *)" Plain Old Telephone Service POTS";
#line 919
  goto switch_break;
  case_1: /* CIL Label */ 
#line 921
  name = (char *)" Multiparty line";
#line 922
  goto switch_break;
  case_2: /* CIL Label */ 
#line 924
  name = (char *)" ANI Failure";
#line 925
  goto switch_break;
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
  case_3: /* CIL Label */ 
#line 929
  name = (char *)" Unassigned";
#line 930
  goto switch_break;
  case_6: /* CIL Label */ 
#line 932
  name = (char *)" Station Level Rating";
#line 933
  goto switch_break;
  case_7: /* CIL Label */ 
#line 935
  name = (char *)" Special Operator Handling Required";
#line 936
  goto switch_break;
  case_9: /* CIL Label */ 
  case_8: /* CIL Label */ 
#line 939
  name = (char *)"Unassigned";
#line 940
  goto switch_break;
  case_10: /* CIL Label */ 
#line 942
  name = (char *)"Not assignable";
#line 943
  goto switch_break;
  case_11: /* CIL Label */ 
#line 945
  name = (char *)"Unassigned";
#line 946
  goto switch_break;
  case_19: /* CIL Label */ 
  case_18: /* CIL Label */ 
  case_17: /* CIL Label */ 
  case_16: /* CIL Label */ 
  case_15: /* CIL Label */ 
  case_14: /* CIL Label */ 
  case_13: /* CIL Label */ 
  case_12: /* CIL Label */ 
#line 955
  name = (char *)"Not assignable";
#line 956
  goto switch_break;
  case_20: /* CIL Label */ 
#line 958
  name = (char *)"Automatic Identified Outward Dialing";
#line 959
  goto switch_break;
  case_22: /* CIL Label */ 
  case_21: /* CIL Label */ 
#line 962
  name = (char *)"Unassigned";
#line 963
  goto switch_break;
  case_23: /* CIL Label */ 
#line 965
  name = (char *)"Coin or Non-Coin";
#line 966
  goto switch_break;
  case_25: /* CIL Label */ 
  case_24: /* CIL Label */ 
#line 969
  name = (char *)"Toll Free Service translated to POTS";
#line 970
  goto switch_break;
  case_26: /* CIL Label */ 
#line 972
  name = (char *)"Unassigned";
#line 973
  goto switch_break;
  case_27: /* CIL Label */ 
#line 975
  name = (char *)"Pay Station using Coin Control Signalling";
#line 976
  goto switch_break;
  case_28: /* CIL Label */ 
#line 978
  name = (char *)"Unassigned";
#line 979
  goto switch_break;
  case_29: /* CIL Label */ 
#line 981
  name = (char *)"Prison/Inmate Service";
#line 982
  goto switch_break;
  case_32: /* CIL Label */ 
  case_31: /* CIL Label */ 
  case_30: /* CIL Label */ 
#line 986
  name = (char *)"Intercept";
#line 987
  goto switch_break;
  case_33: /* CIL Label */ 
#line 989
  name = (char *)"Unassigned";
#line 990
  goto switch_break;
  case_34: /* CIL Label */ 
#line 992
  name = (char *)"Telco Operator Handled Call";
#line 993
  goto switch_break;
  case_39: /* CIL Label */ 
  case_38: /* CIL Label */ 
  case_37: /* CIL Label */ 
  case_36: /* CIL Label */ 
  case_35: /* CIL Label */ 
#line 999
  name = (char *)"Unassigned";
#line 1000
  goto switch_break;
  case_49: /* CIL Label */ 
  case_48: /* CIL Label */ 
  case_47: /* CIL Label */ 
  case_46: /* CIL Label */ 
  case_45: /* CIL Label */ 
  case_44: /* CIL Label */ 
  case_43: /* CIL Label */ 
  case_42: /* CIL Label */ 
  case_41: /* CIL Label */ 
  case_40: /* CIL Label */ 
#line 1011
  name = (char *)"Unrestricted Use - locally determined by carrier";
#line 1012
  goto switch_break;
  case_51: /* CIL Label */ 
  case_50: /* CIL Label */ 
#line 1015
  name = (char *)"Unassigned";
#line 1016
  goto switch_break;
  case_52: /* CIL Label */ 
#line 1018
  name = (char *)"OUTWATS";
#line 1019
  goto switch_break;
  case_59: /* CIL Label */ 
  case_58: /* CIL Label */ 
  case_57: /* CIL Label */ 
  case_56: /* CIL Label */ 
  case_55: /* CIL Label */ 
  case_54: /* CIL Label */ 
  case_53: /* CIL Label */ 
#line 1027
  name = (char *)"Unassigned";
#line 1028
  goto switch_break;
  case_60: /* CIL Label */ 
#line 1030
  name = (char *)"TRS Unrestricted Line";
#line 1031
  goto switch_break;
  case_61: /* CIL Label */ 
#line 1033
  name = (char *)"Cellular Wireless PCS Type 1";
#line 1034
  goto switch_break;
  case_62: /* CIL Label */ 
#line 1036
  name = (char *)"Cellular Wireless PCS Type 2";
#line 1037
  goto switch_break;
  case_63: /* CIL Label */ 
#line 1039
  name = (char *)"Cellular Wireless PCS Roaming";
#line 1040
  goto switch_break;
  case_65: /* CIL Label */ 
  case_64: /* CIL Label */ 
#line 1043
  name = (char *)"Unassigned";
#line 1044
  goto switch_break;
  case_66: /* CIL Label */ 
#line 1046
  name = (char *)"TRS Hotel Motel";
#line 1047
  goto switch_break;
  case_67: /* CIL Label */ 
#line 1049
  name = (char *)"TRS Restricted Line";
#line 1050
  goto switch_break;
  case_69: /* CIL Label */ 
  case_68: /* CIL Label */ 
#line 1053
  name = (char *)"Unassigned";
#line 1054
  goto switch_break;
  case_70: /* CIL Label */ 
#line 1056
  name = (char *)"Pay Station No network Coin Control Signalling";
#line 1057
  goto switch_break;
  case_79: /* CIL Label */ 
  case_78: /* CIL Label */ 
  case_77: /* CIL Label */ 
  case_76: /* CIL Label */ 
  case_75: /* CIL Label */ 
  case_74: /* CIL Label */ 
  case_73: /* CIL Label */ 
  case_72: /* CIL Label */ 
  case_71: /* CIL Label */ 
#line 1067
  name = (char *)"Unassigned";
#line 1068
  goto switch_break;
  case_89: /* CIL Label */ 
  case_88: /* CIL Label */ 
  case_87: /* CIL Label */ 
  case_86: /* CIL Label */ 
  case_85: /* CIL Label */ 
  case_84: /* CIL Label */ 
  case_83: /* CIL Label */ 
  case_82: /* CIL Label */ 
  case_81: /* CIL Label */ 
  case_80: /* CIL Label */ 
#line 1079
  name = (char *)"Reserved";
#line 1080
  goto switch_break;
  case_92: /* CIL Label */ 
  case_91: /* CIL Label */ 
  case_90: /* CIL Label */ 
#line 1084
  name = (char *)"Unassigned";
#line 1085
  goto switch_break;
  case_93: /* CIL Label */ 
#line 1087
  name = (char *)"Private Virtual Network Type of service call";
#line 1088
  goto switch_break;
  case_99: /* CIL Label */ 
  case_98: /* CIL Label */ 
  case_97: /* CIL Label */ 
  case_96: /* CIL Label */ 
  case_95: /* CIL Label */ 
  case_94: /* CIL Label */ 
#line 1095
  name = (char *)"Unassigned";
#line 1096
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1099
  name = (char *)"Unknown to Asterisk ";
  switch_break: /* CIL Label */ ;
  }
  {
#line 1101
  ss7_message(ss7, (char *)"\t\t\tLine info code: %s (%d)\n", name, (int )*(parm + 0));
  }
#line 1103
  return (1);
}
}
#line 1106 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                                    int messagetype , unsigned char *parm ,
                                                    int len ) 
{ 


  {
#line 1108
  c->oli_ani2 = (int )*(parm + 0);
#line 1110
  return (1);
}
}
#line 1113 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int originating_line_information_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                                     int messagetype , unsigned char *parm ,
                                                     int len ) 
{ 


  {
#line 1115
  if (c->oli_ani2 < 0) {
#line 1116
    return (0);
  } else
#line 1117
  if (c->oli_ani2 < 99) {
#line 1118
    *(parm + 0) = (unsigned char )c->oli_ani2;
#line 1119
    return (1);
  } else {
#line 1121
    *(parm + 0) = (unsigned char)0;
#line 1122
    return (1);
  }
}
}
#line 1126 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                           int len ) 
{ 


  {
#line 1128
  return (len);
}
}
#line 1131 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                              int messagetype , unsigned char *parm ,
                                              int len ) 
{ 


  {
#line 1133
  return (len);
}
}
#line 1136 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int carrier_identification_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                               int messagetype , unsigned char *parm ,
                                               int len ) 
{ 


  {
#line 1138
  *(parm + 0) = (unsigned char)34;
#line 1139
  *(parm + 1) = (unsigned char)0;
#line 1140
  *(parm + 2) = (unsigned char)0;
#line 1142
  return (3);
}
}
#line 1144 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                        int len ) 
{ 
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1146
  numbuf[0] = (char )'\000';
#line 1146
  tmp = 1U;
  {
#line 1146
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1146
    if (tmp >= 64U) {
#line 1146
      goto while_break;
    }
#line 1146
    numbuf[tmp] = (char)0;
#line 1146
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1148
  isup_get_number___0(numbuf, parm + 0, len, 0);
#line 1149
  ss7_message(ss7, (char *)"\t\t\tJIP: %s\n", numbuf);
  }
#line 1150
  return (len);
}
}
#line 1153 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                           unsigned char *parm , int len ) 
{ 


  {
  {
#line 1155
  isup_get_number___0(c->jip_number, parm + 0, len, 0);
  }
#line 1156
  return (len);
}
}
#line 1159 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int jip_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                            unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1163
  if (c->jip_number[0]) {
    {
#line 1164
    isup_put_number___0(parm + 0, c->jip_number, & datalen, & oddeven);
    }
#line 1165
    return (datalen);
  }
#line 1167
  return (0);
}
}
#line 1170 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                int len ) 
{ 


  {
#line 1172
  return (1);
}
}
#line 1175 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                   unsigned char *parm , int len ) 
{ 


  {
#line 1177
  return (1);
}
}
#line 1180 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int hop_counter_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
#line 1182
  *(parm + 0) = (unsigned char)1;
#line 1183
  return (1);
}
}
#line 1186 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1188
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1190
  isup_get_number___0(c->charge_number, parm + 2, len - 2, oddeven);
#line 1192
  c->charge_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1193
  c->charge_num_plan = (unsigned char )(((int )*(parm + 1) >> 4) & 7);
  }
#line 1195
  return (len);
}
}
#line 1198 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                  int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1200
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1201
  numbuf[0] = (char )'\000';
#line 1201
  tmp = 1U;
  {
#line 1201
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1201
    if (tmp >= 64U) {
#line 1201
      goto while_break;
    }
#line 1201
    numbuf[tmp] = (char)0;
#line 1201
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1203
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1204
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1206
  isup_get_number___0(numbuf, parm + 2, len - 2, oddeven);
#line 1208
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1210
  return (len);
}
}
#line 1213 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int charge_number_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1217
  if (! c->charge_number[0]) {
#line 1218
    return (0);
  }
  {
#line 1220
  isup_put_number___0(parm + 2, c->charge_number, & datalen, & oddeven);
#line 1222
  *(parm + 0) = (unsigned char )((oddeven << 7) | (int )c->charge_nai);
#line 1223
  *(parm + 1) = (unsigned char )(1 << 4);
  }
#line 1225
  return (datalen + 2);
}
}
#line 1229 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                       unsigned char *parm , int len ) 
{ 


  {
#line 1231
  if (c->cot_check_passed) {
#line 1232
    *(parm + 0) = (unsigned char)1;
  } else {
#line 1234
    *(parm + 0) = (unsigned char)0;
  }
#line 1236
  return (1);
}
}
#line 1239 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 


  {
#line 1241
  if (1 & (int )*(parm + 0)) {
#line 1242
    c->cot_check_passed = 1;
  } else {
#line 1244
    c->cot_check_passed = 0;
  }
#line 1245
  return (1);
}
}
#line 1248 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int continuity_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                   int len ) 
{ 
  char const   *tmp ;

  {
#line 1250
  if (1 & (int )*(parm + 0)) {
#line 1250
    tmp = "successful";
  } else {
#line 1250
    tmp = "failed";
  }
  {
#line 1250
  ss7_message(ss7, (char *)"\t\t\tContinuity Check: %s\n", tmp);
  }
#line 1252
  return (1);
}
}
#line 1255 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_dump___0(struct ss7 *ss7 , int messagetype ,
                                              unsigned char *parm , int len ) 
{ 
  char *name ;

  {
  {
#line 1260
  if (((int )*(parm + 0) & 3) == 0) {
#line 1260
    goto case_0;
  }
#line 1263
  if (((int )*(parm + 0) & 3) == 1) {
#line 1263
    goto case_1;
  }
#line 1266
  if (((int )*(parm + 0) & 3) == 2) {
#line 1266
    goto case_2;
  }
#line 1269
  if (((int )*(parm + 0) & 3) == 3) {
#line 1269
    goto case_3;
  }
#line 1272
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1261
  name = (char *)"Maintenance oriented";
#line 1262
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1264
  name = (char *)"Hardware Failure oriented";
#line 1265
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1267
  name = (char *)"Reserved for national use";
#line 1268
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1270
  name = (char *)"Spare";
#line 1271
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1273
  name = (char *)"Huh?!";
  switch_break: /* CIL Label */ ;
  }
  {
#line 1275
  ss7_message(ss7, (char *)"\t\t\tType indicator: %s\n", name);
  }
#line 1277
  return (1);
}
}
#line 1280 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                                 int messagetype , unsigned char *parm ,
                                                 int len ) 
{ 


  {
#line 1282
  c->cicgroupsupervisiontype = 3 & (int )*(parm + 0);
#line 1283
  return (1);
}
}
#line 1286 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_group_supervision_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                                  int messagetype , unsigned char *parm ,
                                                  int len ) 
{ 


  {
#line 1288
  *(parm + 0) = (unsigned char )(c->cicgroupsupervisiontype & 3);
#line 1289
  return (1);
}
}
#line 1292 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                               int len ) 
{ 
  char *name ;

  {
  {
#line 1297
  if ((int )*(parm + 0) == 0) {
#line 1297
    goto case_0;
  }
#line 1300
  if ((int )*(parm + 0) == 1) {
#line 1300
    goto case_1;
  }
#line 1303
  if ((int )*(parm + 0) == 2) {
#line 1303
    goto case_2;
  }
#line 1306
  if ((int )*(parm + 0) == 3) {
#line 1306
    goto case_3;
  }
#line 1309
  if ((int )*(parm + 0) == 4) {
#line 1309
    goto case_4;
  }
#line 1312
  if ((int )*(parm + 0) == 5) {
#line 1312
    goto case_5;
  }
#line 1315
  if ((int )*(parm + 0) == 6) {
#line 1315
    goto case_6;
  }
#line 1318
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1298
  name = (char *)"spare";
#line 1299
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1301
  name = (char *)"ALERTING";
#line 1302
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1304
  name = (char *)"PROGRESS";
#line 1305
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1307
  name = (char *)"In-band information or an appropriate pattern is now available";
#line 1308
  goto switch_break;
  case_4: /* CIL Label */ 
#line 1310
  name = (char *)"Call forward on busy";
#line 1311
  goto switch_break;
  case_5: /* CIL Label */ 
#line 1313
  name = (char *)"Call forward on no reply";
#line 1314
  goto switch_break;
  case_6: /* CIL Label */ 
#line 1316
  name = (char *)"Call forward unconditional";
#line 1317
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1319
  name = (char *)"Spare";
#line 1320
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1322
  ss7_message(ss7, (char *)"\t\t\t%s\n", name);
  }
#line 1323
  return (1);
}
}
#line 1326 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                  unsigned char *parm , int len ) 
{ 


  {
#line 1328
  c->event_info = *(parm + 0);
#line 1329
  return (1);
}
}
#line 1332 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int event_info_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                   unsigned char *parm , int len ) 
{ 


  {
#line 1334
  *(parm + 0) = c->event_info;
#line 1335
  return (1);
}
}
#line 1338 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                     int len ) 
{ 
  char *redirect_ind ;
  char *orig_redir_reas ;
  char *redir_reas ;

  {
  {
#line 1343
  if (((int )*(parm + 0) & 7) == 0) {
#line 1343
    goto case_0;
  }
#line 1346
  if (((int )*(parm + 0) & 7) == 1) {
#line 1346
    goto case_1;
  }
#line 1349
  if (((int )*(parm + 0) & 7) == 2) {
#line 1349
    goto case_2;
  }
#line 1352
  if (((int )*(parm + 0) & 7) == 3) {
#line 1352
    goto case_3;
  }
#line 1355
  if (((int )*(parm + 0) & 7) == 4) {
#line 1355
    goto case_4;
  }
#line 1358
  if (((int )*(parm + 0) & 7) == 5) {
#line 1358
    goto case_5;
  }
#line 1361
  if (((int )*(parm + 0) & 7) == 6) {
#line 1361
    goto case_6;
  }
#line 1364
  if (((int )*(parm + 0) & 7) == 7) {
#line 1364
    goto case_7;
  }
#line 1367
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1344
  redirect_ind = (char *)"No Redirection (national use)";
#line 1345
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1347
  redirect_ind = (char *)"Call rerouted (national use)";
#line 1348
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1350
  redirect_ind = (char *)"Call rerouted, all rediection information presentation restricted (national use)";
#line 1351
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1353
  redirect_ind = (char *)"Call diverted";
#line 1354
  goto switch_break;
  case_4: /* CIL Label */ 
#line 1356
  redirect_ind = (char *)"Call diverted, all redirection information presentation restricted";
#line 1357
  goto switch_break;
  case_5: /* CIL Label */ 
#line 1359
  redirect_ind = (char *)"Call rerouted, redirection number presentation restricted (national use)";
#line 1360
  goto switch_break;
  case_6: /* CIL Label */ 
#line 1362
  redirect_ind = (char *)"Call diversion, redirection number presentation restricted (national use)";
#line 1363
  goto switch_break;
  case_7: /* CIL Label */ 
#line 1365
  redirect_ind = (char *)"spare";
#line 1366
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1368
  redirect_ind = (char *)"Unknown";
#line 1369
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1372
  ss7_message(ss7, (char *)"\t\t\tRedirecting indicator: %s (%d)\n", redirect_ind,
              (int )*(parm + 0) & 7);
  }
  {
#line 1375
  if ((((int )*(parm + 0) >> 4) & 15) == 0) {
#line 1375
    goto case_0___0;
  }
#line 1378
  if ((((int )*(parm + 0) >> 4) & 15) == 1) {
#line 1378
    goto case_1___0;
  }
#line 1381
  if ((((int )*(parm + 0) >> 4) & 15) == 2) {
#line 1381
    goto case_2___0;
  }
#line 1384
  if ((((int )*(parm + 0) >> 4) & 15) == 3) {
#line 1384
    goto case_3___0;
  }
#line 1387
  goto switch_default___0;
  case_0___0: /* CIL Label */ 
#line 1376
  orig_redir_reas = (char *)"Unknown/not available";
#line 1377
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 1379
  orig_redir_reas = (char *)"User busy (national use)";
#line 1380
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 1382
  orig_redir_reas = (char *)"No reply (national use)";
#line 1383
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 1385
  orig_redir_reas = (char *)"Unconditional (national use)";
#line 1386
  goto switch_break___0;
  switch_default___0: /* CIL Label */ 
#line 1388
  orig_redir_reas = (char *)"spare";
#line 1389
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 1392
  ss7_message(ss7, (char *)"\t\t\tOriginal redirection reason: %s (%d)\n", orig_redir_reas,
              ((int )*(parm + 0) >> 4) & 15);
#line 1393
  ss7_message(ss7, (char *)"\t\t\tRedirection counter: %d\n", (int )*(parm + 1) & 7);
  }
  {
#line 1396
  if ((((int )*(parm + 1) >> 4) & 15) == 0) {
#line 1396
    goto case_0___1;
  }
#line 1399
  if ((((int )*(parm + 1) >> 4) & 15) == 1) {
#line 1399
    goto case_1___1;
  }
#line 1402
  if ((((int )*(parm + 1) >> 4) & 15) == 2) {
#line 1402
    goto case_2___1;
  }
#line 1405
  if ((((int )*(parm + 1) >> 4) & 15) == 3) {
#line 1405
    goto case_3___1;
  }
#line 1408
  if ((((int )*(parm + 1) >> 4) & 15) == 4) {
#line 1408
    goto case_4___0;
  }
#line 1411
  if ((((int )*(parm + 1) >> 4) & 15) == 5) {
#line 1411
    goto case_5___0;
  }
#line 1414
  if ((((int )*(parm + 1) >> 4) & 15) == 6) {
#line 1414
    goto case_6___0;
  }
#line 1417
  goto switch_default___1;
  case_0___1: /* CIL Label */ 
#line 1397
  redir_reas = (char *)"Unknown/not available";
#line 1398
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 1400
  redir_reas = (char *)"User busy";
#line 1401
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 1403
  redir_reas = (char *)"No reply";
#line 1404
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 1406
  redir_reas = (char *)"Unconditional";
#line 1407
  goto switch_break___1;
  case_4___0: /* CIL Label */ 
#line 1409
  redir_reas = (char *)"Deflection during alerting";
#line 1410
  goto switch_break___1;
  case_5___0: /* CIL Label */ 
#line 1412
  redir_reas = (char *)"Deflection immediate response";
#line 1413
  goto switch_break___1;
  case_6___0: /* CIL Label */ 
#line 1415
  redir_reas = (char *)"Mobile subscriber not reachable";
#line 1416
  goto switch_break___1;
  switch_default___1: /* CIL Label */ 
#line 1418
  redir_reas = (char *)"spare";
#line 1419
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  {
#line 1422
  ss7_message(ss7, (char *)"\t\t\tRedirecting reason: %s (%d)\n", redir_reas, ((int )*(parm + 1) >> 4) & 15);
  }
#line 1424
  return (2);
}
}
#line 1427 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 


  {
#line 1429
  return (2);
}
}
#line 1432 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirection_info_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 1434
  return (2);
}
}
#line 1437 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
  {
#line 1439
  c->generic_name_typeofname = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1440
  c->generic_name_avail = (unsigned char )(((int )*(parm + 0) >> 4) & 1);
#line 1441
  c->generic_name_presentation = (unsigned char )((int )*(parm + 0) & 3);
#line 1442
  memcpy((void */* __restrict  */)(c->generic_name), (void const   */* __restrict  */)(parm + 1),
         (size_t )(len - 1));
  }
#line 1443
  return (len);
}
}
#line 1446 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 
  unsigned int typeofname ;
  unsigned int avail ;
  unsigned int presentation ;
  char name[17] ;
  char const   *tmp ;
  char const   *tmp___0 ;

  {
  {
#line 1448
  typeofname = (unsigned int )(((int )*(parm + 0) >> 5) & 7);
#line 1449
  avail = (unsigned int )(((int )*(parm + 0) >> 4) & 1);
#line 1450
  presentation = (unsigned int )((int )*(parm + 0) & 3);
#line 1453
  memcpy((void */* __restrict  */)(name), (void const   */* __restrict  */)(parm + 1),
         (size_t )(len - 1));
  }
#line 1455
  if (typeofname == 1U) {
#line 1455
    tmp = "Calling Name";
  } else {
#line 1455
    tmp = "Unknown";
  }
  {
#line 1455
  ss7_message(ss7, (char *)"\t\t\tType of Name: %s (%d)\n", tmp, typeofname);
  }
#line 1456
  if (avail == 1U) {
#line 1456
    tmp___0 = "Name not available";
  } else {
#line 1456
    tmp___0 = "Name available, or availability unknown";
  }
  {
#line 1456
  ss7_message(ss7, (char *)"\t\t\tAvail: %s (%d)\n", tmp___0, avail);
#line 1457
  ss7_message(ss7, (char *)"\t\t\tPresentation: %d\n", presentation);
#line 1458
  ss7_message(ss7, (char *)"\t\t\tName: %s\n", name);
  }
#line 1460
  return (len);
}
}
#line 1463 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_name_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 
  int namelen ;
  size_t tmp ;

  {
  {
#line 1465
  tmp = strlen((char const   *)(c->generic_name));
#line 1465
  namelen = (int )tmp;
  }
#line 1468
  if (! c->generic_name[0]) {
#line 1469
    return (0);
  }
  {
#line 1471
  *(parm + 0) = (unsigned char )((((int )c->generic_name_typeofname << 5) | (((int )c->generic_name_avail & 1) << 4)) | ((int )c->generic_name_presentation & 3));
#line 1472
  memcpy((void */* __restrict  */)(parm + 1), (void const   */* __restrict  */)(c->generic_name),
         (size_t )namelen);
  }
#line 1474
  return (namelen + 1);
}
}
#line 1477 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                    int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1479
  oddeven = ((int )*(parm + 1) >> 7) & 1;
#line 1480
  numbuf[0] = (char )'\000';
#line 1480
  tmp = 1U;
  {
#line 1480
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1480
    if (tmp >= 64U) {
#line 1480
      goto while_break;
    }
#line 1480
    numbuf[tmp] = (char)0;
#line 1480
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1482
  ss7_message(ss7, (char *)"\t\t\tType of address: %x\n", (int )*(parm + 0));
#line 1483
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 1) & 127);
#line 1484
  ss7_message(ss7, (char *)"\t\t\tOddEven: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 1485
  ss7_message(ss7, (char *)"\t\t\tReserved: %x\n", (int )*(parm + 2) & 3);
#line 1486
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 2) >> 2) & 3);
#line 1487
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 2) >> 4) & 7);
#line 1489
  isup_get_number___0(numbuf, parm + 3, len - 3, oddeven);
#line 1491
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1493
  return (len);
}
}
#line 1496 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                       unsigned char *parm , int len ) 
{ 
  int oddeven ;

  {
  {
#line 1498
  oddeven = ((int )*(parm + 1) >> 7) & 1;
#line 1500
  c->gen_add_type = *(parm + 0);
#line 1501
  c->gen_add_nai = (unsigned char )((int )*(parm + 1) & 127);
#line 1502
  c->gen_add_pres_ind = (unsigned char )(((int )*(parm + 2) >> 2) & 3);
#line 1503
  c->gen_add_num_plan = (unsigned char )(((int )*(parm + 2) >> 4) & 7);
#line 1505
  isup_get_number___0(c->gen_add_number, parm + 3, len - 3, oddeven);
  }
#line 1507
  return (len);
}
}
#line 1510 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_address_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1515
  if (! c->gen_add_number[0]) {
#line 1516
    return (0);
  }
  {
#line 1518
  isup_put_number___0(parm + 3, c->gen_add_number, & datalen, & oddeven);
#line 1520
  *(parm + 0) = c->gen_add_type;
#line 1521
  *(parm + 1) = (unsigned char )((oddeven << 7) | (int )c->gen_add_nai);
#line 1522
  *(parm + 2) = (unsigned char )(((int )c->gen_add_num_plan << 4) | (((int )c->gen_add_pres_ind & 3) << 2));
  }
#line 1526
  return (datalen + 3);
}
}
#line 1530 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                   int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1532
  oddeven = ((int )*(parm + 0) >> 5) & 7;
#line 1533
  numbuf[0] = (char )'\000';
#line 1533
  tmp = 1U;
  {
#line 1533
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1533
    if (tmp >= 64U) {
#line 1533
      goto while_break;
    }
#line 1533
    numbuf[tmp] = (char)0;
#line 1533
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1535
  ss7_message(ss7, (char *)"\t\t\tType of digits: %x\n", (int )*(parm + 0) & 31);
#line 1536
  ss7_message(ss7, (char *)"\t\t\tEncoding Scheme: %x\n", ((int )*(parm + 0) >> 5) & 7);
#line 1537
  isup_get_number___0(numbuf, parm + 1, len - 1, oddeven);
#line 1538
  ss7_message(ss7, (char *)"\t\t\tAddress digits: %s\n", numbuf);
  }
#line 1540
  return (len);
}
}
#line 1544 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                      unsigned char *parm , int len ) 
{ 


  {
  {
#line 1546
  c->gen_dig_scheme = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1547
  c->gen_dig_type = (unsigned char )((int )*(parm + 0) & 31);
#line 1549
  isup_get_number___0(c->gen_dig_number, parm + 1, len - 1, (int )c->gen_dig_scheme);
  }
#line 1550
  return (len);
}
}
#line 1553 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int generic_digits_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                       unsigned char *parm , int len ) 
{ 
  int oddeven ;
  int datalen ;

  {
#line 1557
  if (! c->gen_dig_number[0]) {
#line 1558
    return (0);
  }
  {
#line 1563
  if ((int )c->gen_dig_type == 2) {
#line 1563
    goto case_2;
  }
#line 1563
  if ((int )c->gen_dig_type == 1) {
#line 1563
    goto case_2;
  }
#line 1563
  if ((int )c->gen_dig_type == 0) {
#line 1563
    goto case_2;
  }
#line 1567
  if ((int )c->gen_dig_type == 3) {
#line 1567
    goto case_3;
  }
#line 1571
  goto switch_default;
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
  case_0: /* CIL Label */ 
  {
#line 1564
  isup_put_number___0(parm + 1, c->gen_dig_number, & datalen, & oddeven);
#line 1565
  *(parm + 0) = (unsigned char )((oddeven << 5) | (int )c->gen_dig_type);
  }
#line 1566
  goto switch_break;
  case_3: /* CIL Label */ 
  {
#line 1568
  isup_put_generic___0(parm + 1, c->gen_dig_number, & datalen);
#line 1569
  *(parm + 0) = (unsigned char )(((int )c->gen_dig_scheme << 5) | (int )c->gen_dig_type);
  }
#line 1570
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 1572
  isup_put_number___0(parm + 1, c->gen_dig_number, & datalen, & oddeven);
#line 1573
  *(parm + 0) = (unsigned char )((oddeven << 5) | (int )c->gen_dig_type);
  }
#line 1574
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 1576
  return (datalen + 1);
}
}
#line 1579 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                        int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1581
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1582
  numbuf[0] = (char )'\000';
#line 1582
  tmp = 1U;
  {
#line 1582
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1582
    if (tmp >= 64U) {
#line 1582
      goto while_break;
    }
#line 1582
    numbuf[tmp] = (char)0;
#line 1582
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1584
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1585
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1586
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 1588
  isup_get_number___0(numbuf, parm + 2, len - 2, oddeven);
#line 1590
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1592
  return (len);
}
}
#line 1595 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                           int messagetype , unsigned char *parm ,
                                           int len ) 
{ 
  int oddeven ;

  {
  {
#line 1597
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1599
  isup_get_number___0(c->orig_called_num, parm + 2, len - 2, oddeven);
#line 1601
  c->orig_called_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1602
  c->orig_called_pres_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 1603
  c->orig_called_screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 1605
  return (len);
}
}
#line 1608 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int original_called_num_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                            int messagetype , unsigned char *parm ,
                                            int len ) 
{ 


  {
#line 1610
  return (len);
}
}
#line 1613 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int echo_control_info_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  unsigned char ba ;
  unsigned char dc ;
  unsigned char fe ;
  unsigned char hg ;
  char *ba_str ;
  char *dc_str ;
  char *fe_str ;
  char *hg_str ;

  {
#line 1615
  ba = (unsigned char )((int )*(parm + 0) & 3);
#line 1616
  dc = (unsigned char )(((int )*(parm + 0) >> 2) & 3);
#line 1617
  fe = (unsigned char )(((int )*(parm + 0) >> 4) & 3);
#line 1618
  hg = (unsigned char )(((int )*(parm + 0) >> 6) & 3);
  {
#line 1622
  if ((int )ba == 0) {
#line 1622
    goto case_0;
  }
#line 1625
  if ((int )ba == 1) {
#line 1625
    goto case_1;
  }
#line 1628
  if ((int )ba == 2) {
#line 1628
    goto case_2;
  }
#line 1631
  if ((int )ba == 3) {
#line 1631
    goto case_3;
  }
#line 1634
  goto switch_default;
  case_0: /* CIL Label */ 
#line 1623
  ba_str = (char *)"no information";
#line 1624
  goto switch_break;
  case_1: /* CIL Label */ 
#line 1626
  ba_str = (char *)"outgoing echo control device not included and not available";
#line 1627
  goto switch_break;
  case_2: /* CIL Label */ 
#line 1629
  ba_str = (char *)"outgoing echo control device included";
#line 1630
  goto switch_break;
  case_3: /* CIL Label */ 
#line 1632
  ba_str = (char *)"outgoing echo control device not included but available";
#line 1633
  goto switch_break;
  switch_default: /* CIL Label */ 
#line 1635
  ba_str = (char *)"unknown";
#line 1636
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
  {
#line 1640
  if ((int )dc == 0) {
#line 1640
    goto case_0___0;
  }
#line 1643
  if ((int )dc == 1) {
#line 1643
    goto case_1___0;
  }
#line 1646
  if ((int )dc == 2) {
#line 1646
    goto case_2___0;
  }
#line 1649
  if ((int )dc == 3) {
#line 1649
    goto case_3___0;
  }
#line 1652
  goto switch_default___0;
  case_0___0: /* CIL Label */ 
#line 1641
  dc_str = (char *)"no information";
#line 1642
  goto switch_break___0;
  case_1___0: /* CIL Label */ 
#line 1644
  dc_str = (char *)"incoming echo control device not included and not available";
#line 1645
  goto switch_break___0;
  case_2___0: /* CIL Label */ 
#line 1647
  dc_str = (char *)"incoming echo control device included";
#line 1648
  goto switch_break___0;
  case_3___0: /* CIL Label */ 
#line 1650
  dc_str = (char *)"incoming echo control device not included but available";
#line 1651
  goto switch_break___0;
  switch_default___0: /* CIL Label */ 
#line 1653
  dc_str = (char *)"unknown";
#line 1654
  goto switch_break___0;
  switch_break___0: /* CIL Label */ ;
  }
  {
#line 1658
  if ((int )fe == 0) {
#line 1658
    goto case_0___1;
  }
#line 1661
  if ((int )fe == 1) {
#line 1661
    goto case_1___1;
  }
#line 1664
  if ((int )fe == 2) {
#line 1664
    goto case_2___1;
  }
#line 1667
  if ((int )fe == 3) {
#line 1667
    goto case_3___1;
  }
#line 1670
  goto switch_default___1;
  case_0___1: /* CIL Label */ 
#line 1659
  fe_str = (char *)"no information";
#line 1660
  goto switch_break___1;
  case_1___1: /* CIL Label */ 
#line 1662
  fe_str = (char *)"outgoing echo control device activation request";
#line 1663
  goto switch_break___1;
  case_2___1: /* CIL Label */ 
#line 1665
  fe_str = (char *)"outgoing echo control device deactivation request";
#line 1666
  goto switch_break___1;
  case_3___1: /* CIL Label */ 
#line 1668
  fe_str = (char *)"spare";
#line 1669
  goto switch_break___1;
  switch_default___1: /* CIL Label */ 
#line 1671
  fe_str = (char *)"unknown";
#line 1672
  goto switch_break___1;
  switch_break___1: /* CIL Label */ ;
  }
  {
#line 1676
  if ((int )hg == 0) {
#line 1676
    goto case_0___2;
  }
#line 1679
  if ((int )hg == 1) {
#line 1679
    goto case_1___2;
  }
#line 1682
  if ((int )hg == 2) {
#line 1682
    goto case_2___2;
  }
#line 1685
  if ((int )hg == 3) {
#line 1685
    goto case_3___2;
  }
#line 1688
  goto switch_default___2;
  case_0___2: /* CIL Label */ 
#line 1677
  hg_str = (char *)"no information";
#line 1678
  goto switch_break___2;
  case_1___2: /* CIL Label */ 
#line 1680
  hg_str = (char *)"incoming echo control device activation request";
#line 1681
  goto switch_break___2;
  case_2___2: /* CIL Label */ 
#line 1683
  hg_str = (char *)"incoming echo control device deactivation request";
#line 1684
  goto switch_break___2;
  case_3___2: /* CIL Label */ 
#line 1686
  hg_str = (char *)"spare";
#line 1687
  goto switch_break___2;
  switch_default___2: /* CIL Label */ 
#line 1689
  hg_str = (char *)"unknown";
#line 1690
  goto switch_break___2;
  switch_break___2: /* CIL Label */ ;
  }
  {
#line 1693
  ss7_message(ss7, (char *)"\t\t\tOutgoing echo control device information: %s (%d)\n",
              ba_str, (int )ba);
#line 1694
  ss7_message(ss7, (char *)"\t\t\tIncoming echo control device information: %s (%d)\n",
              dc_str, (int )dc);
#line 1695
  ss7_message(ss7, (char *)"\t\t\tOutgoing echo control device request: %s (%d)\n",
              fe_str, (int )fe);
#line 1696
  ss7_message(ss7, (char *)"\t\t\tIncoming echo control device request: %s (%d)\n",
              hg_str, (int )hg);
  }
#line 1698
  return (len);
}
}
#line 1701 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int parameter_compat_info_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                          int len ) 
{ 


  {
#line 1703
  return (len);
}
}
#line 1706 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int propagation_delay_cntr_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                           int len ) 
{ 


  {
  {
#line 1708
  ss7_message(ss7, (char *)"\t\t\tDelay: %dms\n", (int )((unsigned short )((((int )*(parm + 0) & 255) << 8) | ((int )*(parm + 0) & 255))));
  }
#line 1709
  return (len);
}
}
#line 1712 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_state_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                      int len ) 
{ 
  unsigned char dcbits ;
  unsigned char babits ;
  unsigned char febits ;
  char *ba_str ;
  char *dc_str ;
  char *fe_str ;
  int i ;

  {
#line 1718
  i = 0;
  {
#line 1718
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1718
    if (! (i < len)) {
#line 1718
      goto while_break;
    }
#line 1719
    babits = (unsigned char )((int )*(parm + i) & 3);
#line 1720
    dcbits = (unsigned char )(((int )*(parm + i) >> 2) & 3);
#line 1721
    febits = (unsigned char )(((int )*(parm + i) >> 4) & 3);
#line 1723
    if ((int )dcbits == 0) {
      {
#line 1725
      if ((int )babits == 0) {
#line 1725
        goto case_0;
      }
#line 1729
      if ((int )babits == 2) {
#line 1729
        goto case_2;
      }
#line 1729
      if ((int )babits == 1) {
#line 1729
        goto case_2;
      }
#line 1732
      if ((int )babits == 3) {
#line 1732
        goto case_3;
      }
#line 1724
      goto switch_break;
      case_0: /* CIL Label */ 
#line 1726
      ba_str = (char *)"transient";
#line 1727
      goto switch_break;
      case_2: /* CIL Label */ 
      case_1: /* CIL Label */ 
#line 1730
      ba_str = (char *)"spare";
#line 1731
      goto switch_break;
      case_3: /* CIL Label */ 
#line 1733
      ba_str = (char *)"unequipped";
#line 1734
      goto switch_break;
      switch_break: /* CIL Label */ ;
      }
    } else {
      {
#line 1738
      if ((int )babits == 0) {
#line 1738
        goto case_0___0;
      }
#line 1741
      if ((int )babits == 1) {
#line 1741
        goto case_1___0;
      }
#line 1744
      if ((int )babits == 2) {
#line 1744
        goto case_2___0;
      }
#line 1747
      if ((int )babits == 3) {
#line 1747
        goto case_3___0;
      }
#line 1737
      goto switch_break___0;
      case_0___0: /* CIL Label */ 
#line 1739
      ba_str = (char *)"no blocking (active)";
#line 1740
      goto switch_break___0;
      case_1___0: /* CIL Label */ 
#line 1742
      ba_str = (char *)"locally blocked";
#line 1743
      goto switch_break___0;
      case_2___0: /* CIL Label */ 
#line 1745
      ba_str = (char *)"remotely blocked";
#line 1746
      goto switch_break___0;
      case_3___0: /* CIL Label */ 
#line 1748
      ba_str = (char *)"locally and remotely blocked";
#line 1749
      goto switch_break___0;
      switch_break___0: /* CIL Label */ ;
      }
      {
#line 1753
      if ((int )dcbits == 1) {
#line 1753
        goto case_1___1;
      }
#line 1756
      if ((int )dcbits == 2) {
#line 1756
        goto case_2___1;
      }
#line 1759
      if ((int )dcbits == 3) {
#line 1759
        goto case_3___1;
      }
#line 1752
      goto switch_break___1;
      case_1___1: /* CIL Label */ 
#line 1754
      dc_str = (char *)"circuit incoming busy";
#line 1755
      goto switch_break___1;
      case_2___1: /* CIL Label */ 
#line 1757
      dc_str = (char *)"circuit outgoing busy";
#line 1758
      goto switch_break___1;
      case_3___1: /* CIL Label */ 
#line 1760
      dc_str = (char *)"idle";
#line 1761
      goto switch_break___1;
      switch_break___1: /* CIL Label */ ;
      }
      {
#line 1765
      if ((int )febits == 0) {
#line 1765
        goto case_0___1;
      }
#line 1768
      if ((int )febits == 1) {
#line 1768
        goto case_1___2;
      }
#line 1771
      if ((int )febits == 2) {
#line 1771
        goto case_2___2;
      }
#line 1774
      if ((int )febits == 3) {
#line 1774
        goto case_3___2;
      }
#line 1764
      goto switch_break___2;
      case_0___1: /* CIL Label */ 
#line 1766
      fe_str = (char *)"no blocking (active)";
#line 1767
      goto switch_break___2;
      case_1___2: /* CIL Label */ 
#line 1769
      fe_str = (char *)"locally blocked";
#line 1770
      goto switch_break___2;
      case_2___2: /* CIL Label */ 
#line 1772
      fe_str = (char *)"remotely blocked";
#line 1773
      goto switch_break___2;
      case_3___2: /* CIL Label */ 
#line 1775
      fe_str = (char *)"locally and remotely blocked";
#line 1776
      goto switch_break___2;
      switch_break___2: /* CIL Label */ ;
      }
    }
    {
#line 1781
    ss7_message(ss7, (char *)"\t\t\tMaintenance blocking state: %s (%d)\n", ba_str,
                (int )babits);
    }
#line 1782
    if (! dcbits) {
#line 1783
      goto __Cont;
    }
    {
#line 1784
    ss7_message(ss7, (char *)"\t\t\tCall processing state: %s (%d)\n", dc_str, (int )dcbits);
#line 1785
    ss7_message(ss7, (char *)"\t\t\tHardware blocking state: %s (%d)\n", fe_str, (int )febits);
    }
    __Cont: /* CIL Label */ 
#line 1718
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1787
  return (len);
}
}
#line 1790 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int circuit_state_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 
  int numcics ;
  int i ;

  {
#line 1792
  numcics = c->range + 1;
#line 1794
  i = 0;
  {
#line 1794
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1794
    if (! (i < numcics)) {
#line 1794
      goto while_break;
    }
#line 1795
    *(parm + i) = c->status[i];
#line 1794
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 1797
  return (numcics);
}
}
#line 1800 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                        int len ) 
{ 


  {
  {
#line 1802
  ss7_message(ss7, (char *)"\t\t\tType of Network: %x\n", ((int )*(parm + 0) >> 4) & 7);
#line 1803
  ss7_message(ss7, (char *)"\t\t\tNetwork ID plan: %x\n", (int )*(parm + 0) & 15);
#line 1804
  ss7_message(ss7, (char *)"\t\t\tNetwork ID: %x %x\n", (int )*(parm + 1), (int )*(parm + 2));
#line 1805
  ss7_message(ss7, (char *)"\t\t\tCircuit Code: %x\n", ((int )*(parm + 3) >> 4) & 15);
  }
#line 1807
  return (len);
}
}
#line 1810 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                            unsigned char *parm , int len ) 
{ 


  {
#line 1812
  return (0);
}
}
#line 1815 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int tns_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                           unsigned char *parm , int len ) 
{ 


  {
#line 1817
  return (len);
}
}
#line 1820 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                             unsigned char *parm , int len ) 
{ 


  {
#line 1825
  if (c->lspi_scheme) {
#line 1826
    *(parm + 0) = (unsigned char )(((int )c->lspi_scheme << 5) | (int )c->lspi_type);
#line 1827
    return (1);
  }
#line 1829
  return (0);
}
}
#line 1832 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                            unsigned char *parm , int len ) 
{ 


  {
  {
#line 1834
  c->lspi_type = (unsigned char )((int )*(parm + 0) & 31);
#line 1835
  c->lspi_scheme = (unsigned char )(((int )*(parm + 0) >> 5) & 7);
#line 1836
  c->lspi_context = (unsigned char )((int )*(parm + 1) & 15);
#line 1837
  isup_get_number___0(c->lspi_ident, parm + 2, len - 2, (int )c->lspi_scheme);
  }
#line 1839
  return (len);
}
}
#line 1842 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int lspi_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                         int len ) 
{ 


  {
  {
#line 1844
  ss7_message(ss7, (char *)"\t\t\tLSPI Type: %x\n", (int )*(parm + 0) & 31);
#line 1845
  ss7_message(ss7, (char *)"\t\t\tEncoding Scheme: %x\n", ((int )*(parm + 0) >> 5) & 7);
#line 1846
  ss7_message(ss7, (char *)"\t\t\tContext ID: %x\n", (int )*(parm + 1) & 15);
#line 1847
  ss7_message(ss7, (char *)"\t\t\tSpare: %x\n", ((int )*(parm + 1) >> 4) & 15);
#line 1848
  ss7_message(ss7, (char *)"\t\t\tLSP Identity: %x\n", (int )*(parm + 2));
  }
#line 1850
  return (len);
}
}
#line 1853 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                             int len ) 
{ 
  unsigned int ptc ;
  unsigned int callr ;

  {
#line 1857
  callr = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1858
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1859
    ptc = (unsigned int )(((int )*(parm + 3) | ((int )*(parm + 4) << 8)) | ((int )*(parm + 5) << 16));
  } else {
#line 1861
    ptc = (unsigned int )((int )*(parm + 3) | ((int )*(parm + 4) << 8));
  }
  {
#line 1863
  ss7_message(ss7, (char *)"\t\t\tCall identity: %d\n", callr);
  }
#line 1864
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
    {
#line 1865
    ss7_message(ss7, (char *)"\t\t\tPC: Net-CLstr-Mbr: %d-%d-%d\n", (ptc >> 16) & 255U,
                (ptc >> 8) & 255U, ptc & 255U);
    }
  } else {
    {
#line 1867
    ss7_message(ss7, (char *)"\t\t\tPC: 0x%x\n", ptc);
    }
  }
#line 1869
  return (len);
}
}
#line 1872 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 unsigned char *parm , int len ) 
{ 


  {
#line 1874
  if (c->call_ref_ident) {
#line 1875
    if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1876
      *(parm + 0) = (unsigned char )(c->call_ref_ident & 255U);
#line 1877
      *(parm + 1) = (unsigned char )((c->call_ref_ident >> 8) & 255U);
#line 1878
      *(parm + 2) = (unsigned char )((c->call_ref_ident >> 16) & 255U);
#line 1879
      *(parm + 3) = (unsigned char )(c->call_ref_pc & 255U);
#line 1880
      *(parm + 4) = (unsigned char )((c->call_ref_pc >> 8) & 255U);
#line 1881
      *(parm + 5) = (unsigned char )((c->call_ref_pc >> 16) & 255U);
#line 1882
      return (6);
    } else {
#line 1884
      *(parm + 0) = (unsigned char )(c->call_ref_ident & 255U);
#line 1885
      *(parm + 1) = (unsigned char )((c->call_ref_ident >> 8) & 255U);
#line 1886
      *(parm + 2) = (unsigned char )((c->call_ref_ident >> 16) & 255U);
#line 1887
      *(parm + 3) = (unsigned char )(c->call_ref_pc & 255U);
#line 1888
      *(parm + 4) = (unsigned char )((c->call_ref_pc >> 8) & 63U);
#line 1889
      return (5);
    }
  }
#line 1892
  return (0);
}
}
#line 1895 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int call_ref_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                unsigned char *parm , int len ) 
{ 


  {
#line 1897
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 1898
    c->call_ref_ident = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1899
    c->call_ref_pc = (unsigned int )(((int )*(parm + 3) | ((int )*(parm + 4) << 8)) | ((int )*(parm + 5) << 16));
  } else {
#line 1901
    c->call_ref_ident = (unsigned int )(((int )*(parm + 0) | ((int )*(parm + 1) << 8)) | ((int )*(parm + 2) << 16));
#line 1902
    c->call_ref_pc = (unsigned int )((int )*(parm + 3) | (((int )*(parm + 4) & 63) << 8));
  }
#line 1904
  return (len);
}
}
#line 1907 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                 int len ) 
{ 


  {
  {
#line 1909
  ss7_message(ss7, (char *)"\t\t\tFacility Indicator: %x\n", (int )*(parm + 0));
  }
#line 1910
  return (1);
}
}
#line 1913 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                    unsigned char *parm , int len ) 
{ 


  {
#line 1915
  return (1);
}
}
#line 1918 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int facility_ind_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ) 
{ 


  {
#line 1920
  *(parm + 0) = (unsigned char)16;
#line 1921
  return (1);
}
}
#line 1924 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                       int len ) 
{ 
  int oddeven ;
  char numbuf[64] ;
  unsigned int tmp ;

  {
#line 1926
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1927
  numbuf[0] = (char )'\000';
#line 1927
  tmp = 1U;
  {
#line 1927
  while (1) {
    while_continue: /* CIL Label */ ;
#line 1927
    if (tmp >= 64U) {
#line 1927
      goto while_break;
    }
#line 1927
    numbuf[tmp] = (char)0;
#line 1927
    tmp ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 1929
  ss7_message(ss7, (char *)"\t\t\tNature of address: %x\n", (int )*(parm + 0) & 127);
#line 1930
  ss7_message(ss7, (char *)"\t\t\tNI: %x\n", ((int )*(parm + 1) >> 7) & 1);
#line 1931
  ss7_message(ss7, (char *)"\t\t\tNumbering plan: %x\n", ((int )*(parm + 1) >> 4) & 7);
#line 1932
  ss7_message(ss7, (char *)"\t\t\tPresentation: %x\n", ((int )*(parm + 1) >> 2) & 3);
#line 1933
  ss7_message(ss7, (char *)"\t\t\tScreening: %x\n", (int )*(parm + 1) & 3);
#line 1935
  isup_get_number___0(numbuf, parm + 2, len - 2, oddeven);
#line 1937
  ss7_message(ss7, (char *)"\t\t\tAddress signals: %s\n", numbuf);
  }
#line 1939
  return (len);
}
}
#line 1942 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_receive___0(struct ss7 *ss7 , struct isup_call *c ,
                                          int messagetype , unsigned char *parm ,
                                          int len ) 
{ 
  int oddeven ;

  {
  {
#line 1944
  oddeven = ((int )*(parm + 0) >> 7) & 1;
#line 1946
  isup_get_number___0(c->redirecting_num, parm + 2, len - 2, oddeven);
#line 1948
  c->redirecting_num_nai = (unsigned char )((int )*(parm + 0) & 127);
#line 1949
  c->redirecting_num_presentation_ind = (unsigned char )(((int )*(parm + 1) >> 2) & 3);
#line 1950
  c->redirecting_num_screening_ind = (unsigned char )((int )*(parm + 1) & 3);
  }
#line 1952
  return (len);
}
}
#line 1956 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int redirecting_number_transmit___0(struct ss7 *ss7 , struct isup_call *c ,
                                           int messagetype , unsigned char *parm ,
                                           int len ) 
{ 


  {
#line 1958
  return (0);
}
}
#line 1961 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_dump___0(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                     int len ) 
{ 


  {
#line 1963
  return (len);
}
}
#line 1965 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_receive___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                        unsigned char *parm , int len ) 
{ 


  {
#line 1967
  return (len);
}
}
#line 1970 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int access_transport_transmit___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                         unsigned char *parm , int len ) 
{ 


  {
#line 1972
  return (len);
}
}
#line 1976 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct parm_func parms___0[44]  = 
#line 1976
  {      {6, (char *)"Nature of Connection Indicator", & nature_of_connection_ind_dump___0,
      & nature_of_connection_ind_receive___0, & nature_of_connection_ind_transmit___0}, 
        {7,
      (char *)"Forward Call Indicators", & forward_call_ind_dump___0, & forward_call_ind_receive___0,
      & forward_call_ind_transmit___0}, 
        {9, (char *)"Calling Party\'s Category", & calling_party_cat_dump___0, & calling_party_cat_receive___0,
      & calling_party_cat_transmit___0}, 
        {2, (char *)"Transmission Medium Requirements", & transmission_medium_reqs_dump___0,
      & transmission_medium_reqs_receive___0, & transmission_medium_reqs_transmit___0}, 
        {29,
      (char *)"User Service Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                   unsigned char *parm , int len ))((void *)0),
      & user_service_info_receive___0, & user_service_info_transmit___0}, 
        {4, (char *)"Called Party Number", & called_party_num_dump___0, & called_party_num_receive___0,
      & called_party_num_transmit___0}, 
        {18, (char *)"Cause Indicator", & cause_dump___0, & cause_receive___0, & cause_transmit___0}, 
        {16,
      (char *)"Continuity Indicator", & continuity_ind_dump___0, & continuity_ind_receive___0,
      & continuity_ind_transmit___0}, 
        {3, (char *)"Access Transport", & access_transport_dump___0, & access_transport_receive___0,
      & access_transport_transmit___0}, 
        {198, (char *)"Business Group", (int (*)(struct ss7 *ss7 , int messagetype ,
                                              unsigned char *parm , int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                          struct isup_call *c ,
                                                                                          int messagetype ,
                                                                                          unsigned char *parm ,
                                                                                          int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {1, (char *)"Call Reference", & call_ref_dump___0, & call_ref_receive___0, & call_ref_transmit___0}, 
        {10,
      (char *)"Calling Party Number", & calling_party_num_dump___0, & calling_party_num_receive___0,
      & calling_party_num_transmit___0}, 
        {197, (char *)"Carrier Identification", & carrier_identification_dump___0, & carrier_identification_receive___0,
      & carrier_identification_transmit___0}, 
        {238, (char *)"Selection Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                     unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {235, (char *)"Charge Number", & charge_number_dump___0, & charge_number_receive___0,
      & charge_number_transmit___0}, 
        {37, (char *)"Circuit Assignment Map", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                     unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {13, (char *)"Connection Request", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                 unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {28, (char *)"Interlock Code", (int (*)(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                             int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                   struct isup_call *c ,
                                                                   int messagetype ,
                                                                   unsigned char *parm ,
                                                                   int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                         struct isup_call *c ,
                                                                                         int messagetype ,
                                                                                         unsigned char *parm ,
                                                                                         int len ))0}, 
        {195,
      (char *)"Egress Service", (int (*)(struct ss7 *ss7 , int messagetype , unsigned char *parm ,
                                         int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                                               int messagetype , unsigned char *parm ,
                                                               int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                     struct isup_call *c ,
                                                                                     int messagetype ,
                                                                                     unsigned char *parm ,
                                                                                     int len ))0}, 
        {192,
      (char *)"Generic Address", & generic_address_dump___0, & generic_address_receive___0,
      & generic_address_transmit___0}, 
        {193, (char *)"Generic Digits", & generic_digits_dump___0, & generic_digits_receive___0,
      & generic_digits_transmit___0}, 
        {199, (char *)"Generic Name", & generic_name_dump___0, & generic_name_receive___0,
      & generic_name_transmit___0}, 
        {35, (char *)"Transit Network Selection", & tns_dump___0, & tns_receive___0,
      & tns_transmit___0}, 
        {44, (char *)"Generic Notification Indication", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                              unsigned char *parm ,
                                                              int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                    struct isup_call *c ,
                                                                                    int messagetype ,
                                                                                    unsigned char *parm ,
                                                                                    int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {49, (char *)"Propagation Delay Counter", & propagation_delay_cntr_dump___0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}, 
        {61, (char *)"Hop Counter", & hop_counter_dump___0, & hop_counter_receive___0,
      & hop_counter_transmit___0}, 
        {17, (char *)"Backward Call Indicator", & backward_call_ind_dump___0, & backward_call_ind_receive___0,
      & backward_call_ind_transmit___0}, 
        {41, (char *)"Optional Backward Call Indicator", & opt_backward_call_ind_dump___0,
      & opt_backward_call_ind_receive___0, (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                                    int messagetype , unsigned char *parm ,
                                                    int len ))((void *)0)}, 
        {21, (char *)"Circuit Group Supervision Indicator", & circuit_group_supervision_dump___0,
      & circuit_group_supervision_receive___0, & circuit_group_supervision_transmit___0}, 
        {22,
      (char *)"Range and status", & range_and_status_dump___0, & range_and_status_receive___0,
      & range_and_status_transmit___0}, 
        {36, (char *)"Event Information", & event_info_dump___0, & event_info_receive___0,
      & event_info_transmit___0}, 
        {8, (char *)"Optional forward call indicator", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                             unsigned char *parm ,
                                                             int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                   struct isup_call *c ,
                                                                                   int messagetype ,
                                                                                   unsigned char *parm ,
                                                                                   int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {63, (char *)"Location Number", (int (*)(struct ss7 *ss7 , int messagetype ,
                                              unsigned char *parm , int len ))0, (int (*)(struct ss7 *ss7 ,
                                                                                          struct isup_call *c ,
                                                                                          int messagetype ,
                                                                                          unsigned char *parm ,
                                                                                          int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0}, 
        {234, (char *)"Originating line information", & originating_line_information_dump___0,
      & originating_line_information_receive___0, & originating_line_information_transmit___0}, 
        {19,
      (char *)"Redirection Information", & redirection_info_dump___0, & redirection_info_receive___0,
      & redirection_info_transmit___0}, 
        {40, (char *)"Original called number", & original_called_num_dump___0, & original_called_num_receive___0,
      & original_called_num_transmit___0}, 
        {196, (char *)"Jurisdiction Information Parameter", & jip_dump___0, & jip_receive___0,
      & jip_transmit___0}, 
        {55, (char *)"Echo Control Information", & echo_control_info_dump___0, (int (*)(struct ss7 *ss7 ,
                                                                                     struct isup_call *c ,
                                                                                     int messagetype ,
                                                                                     unsigned char *parm ,
                                                                                     int len ))((void *)0),
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))((void *)0)}, 
        {57, (char *)"Parameter Compatibility Information", & parameter_compat_info_dump___0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))((void *)0), (int (*)(struct ss7 *ss7 , struct isup_call *c ,
                                               int messagetype , unsigned char *parm ,
                                               int len ))((void *)0)}, 
        {38, (char *)"Circuit State Indicator", & circuit_state_ind_dump___0, (int (*)(struct ss7 *ss7 ,
                                                                                    struct isup_call *c ,
                                                                                    int messagetype ,
                                                                                    unsigned char *parm ,
                                                                                    int len ))((void *)0),
      & circuit_state_ind_transmit___0}, 
        {228, (char *)"Local Service Provider ID", & lspi_dump___0, & lspi_receive___0,
      & lspi_transmit___0}, 
        {24, (char *)"Facility Indicator", & facility_ind_dump___0, & facility_ind_receive___0,
      & facility_ind_transmit___0}, 
        {11, (char *)"Redirecting Number", & redirecting_number_dump___0, & redirecting_number_receive___0,
      & redirecting_number_transmit___0}, 
        {46, (char *)"Access Delivery Information", (int (*)(struct ss7 *ss7 , int messagetype ,
                                                          unsigned char *parm , int len ))0,
      (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype , unsigned char *parm ,
               int len ))0, (int (*)(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                     unsigned char *parm , int len ))0}};
#line 2023 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static char *param2str___0(int parm ) 
{ 
  int x ;
  int totalparms ;

  {
#line 2026
  totalparms = (int )(sizeof(parms___0) / sizeof(struct parm_func ));
#line 2027
  x = 0;
  {
#line 2027
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2027
    if (! (x < totalparms)) {
#line 2027
      goto while_break;
    }
#line 2028
    if (parms___0[x].parm == parm) {
#line 2029
      return (parms___0[x].name);
    }
#line 2027
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2031
  return ((char *)"Unknown");
}
}
#line 2034 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void init_isup_call___0(struct isup_call *c ) 
{ 


  {
#line 2036
  c->oli_ani2 = -1;
#line 2037
  return;
}
}
#line 2039 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct isup_call *__isup_new_call___0(struct ss7 *ss7 , int nolink ) 
{ 
  struct isup_call *c ;
  struct isup_call *cur ;
  void *tmp ;

  {
  {
#line 2042
  tmp = calloc((size_t )1, sizeof(struct isup_call ));
#line 2042
  c = (struct isup_call *)tmp;
  }
#line 2043
  if (! c) {
#line 2044
    return ((struct isup_call *)((void *)0));
  }
  {
#line 2046
  init_isup_call___0(c);
  }
#line 2048
  if (nolink) {
#line 2049
    return (c);
  } else {
#line 2051
    cur = ss7->calls;
#line 2052
    if (cur) {
      {
#line 2053
      while (1) {
        while_continue: /* CIL Label */ ;
#line 2053
        if (! cur->next) {
#line 2053
          goto while_break;
        }
#line 2054
        cur = cur->next;
      }
      while_break: /* CIL Label */ ;
      }
#line 2055
      cur->next = c;
    } else {
#line 2057
      ss7->calls = c;
    }
#line 2059
    return (c);
  }
}
}
#line 2174 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static struct isup_call *isup_find_call___0(struct ss7 *ss7 , struct routing_label *rl ,
                                            int cic ) 
{ 
  struct isup_call *cur ;
  struct isup_call *winner ;

  {
#line 2176
  winner = (struct isup_call *)((void *)0);
#line 2178
  cur = ss7->calls;
  {
#line 2179
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2179
    if (! cur) {
#line 2179
      goto while_break;
    }
#line 2180
    if ((int )cur->cic == cic) {
#line 2180
      if (cur->dpc == rl->opc) {
#line 2181
        winner = cur;
#line 2182
        goto while_break;
      }
    }
#line 2184
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 2187
  if (! winner) {
    {
#line 2188
    winner = __isup_new_call___0(ss7, 0);
#line 2189
    winner->cic = (unsigned short )cic;
#line 2190
    winner->dpc = rl->opc;
#line 2191
    winner->sls = rl->sls;
    }
  }
#line 2194
  return (winner);
}
}
#line 2197 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static void isup_free_call___0(struct ss7 *ss7 , struct isup_call *c ) 
{ 
  struct isup_call *cur ;
  struct isup_call *prev ;
  struct isup_call *winner ;

  {
#line 2199
  prev = (struct isup_call *)((void *)0);
#line 2199
  winner = (struct isup_call *)((void *)0);
#line 2201
  cur = ss7->calls;
  {
#line 2202
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2202
    if (! cur) {
#line 2202
      goto while_break;
    }
#line 2203
    if ((unsigned long )cur == (unsigned long )c) {
#line 2204
      winner = cur;
#line 2205
      goto while_break;
    }
#line 2207
    prev = cur;
#line 2208
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 2211
  if (winner) {
#line 2212
    if (! prev) {
#line 2213
      ss7->calls = winner->next;
    } else {
#line 2215
      prev->next = winner->next;
    }
  }
  {
#line 2218
  free((void *)c);
  }
#line 2220
  return;
}
}
#line 2223 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int do_parm___0(struct ss7 *ss7 , struct isup_call *c , int message , int parm ,
                       unsigned char *parmbuf , int maxlen , int parmtype , int tx ) 
{ 
  struct isup_parm_opt *optparm ;
  int x ;
  int res ;
  int totalparms ;
  int tmp ;
  int tmp___0 ;

  {
#line 2225
  optparm = (struct isup_parm_opt *)((void *)0);
#line 2227
  res = 0;
#line 2228
  totalparms = (int )(sizeof(parms___0) / sizeof(struct parm_func ));
#line 2230
  x = 0;
  {
#line 2230
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2230
    if (! (x < totalparms)) {
#line 2230
      goto while_break;
    }
#line 2231
    if (parms___0[x].parm == parm) {
#line 2232
      if (tx) {
#line 2232
        if (parms___0[x].transmit) {
#line 2232
          goto _L;
        } else {
#line 2232
          goto _L___0;
        }
      } else
      _L___0: /* CIL Label */ 
#line 2232
      if (! tx) {
#line 2232
        if (parms___0[x].receive) {
          _L: /* CIL Label */ 
          {
#line 2234
          if (parmtype == 1) {
#line 2234
            goto case_1;
          }
#line 2239
          if (parmtype == 2) {
#line 2239
            goto case_2;
          }
#line 2252
          if (parmtype == 3) {
#line 2252
            goto case_3;
          }
#line 2233
          goto switch_break;
          case_1: /* CIL Label */ 
#line 2235
          if (tx) {
            {
#line 2236
            tmp = (*(parms___0[x].transmit))(ss7, c, message, parmbuf, maxlen);
            }
#line 2236
            return (tmp);
          } else {
            {
#line 2238
            tmp___0 = (*(parms___0[x].receive))(ss7, c, message, parmbuf, maxlen);
            }
#line 2238
            return (tmp___0);
          }
          case_2: /* CIL Label */ 
#line 2240
          if (tx) {
            {
#line 2241
            res = (*(parms___0[x].transmit))(ss7, c, message, parmbuf + 1, maxlen);
            }
#line 2242
            if (res > 0) {
#line 2243
              *(parmbuf + 0) = (unsigned char )res;
#line 2244
              return (res + 1);
            }
#line 2246
            return (res);
          } else {
            {
#line 2248
            (*(parms___0[x].receive))(ss7, c, message, parmbuf + 1, (int )*(parmbuf + 0));
            }
#line 2249
            return (1 + (int )*(parmbuf + 0));
          }
          case_3: /* CIL Label */ 
#line 2253
          optparm = (struct isup_parm_opt *)parmbuf;
#line 2254
          if (tx) {
            {
#line 2255
            optparm->type = (unsigned char )parms___0[x].parm;
#line 2256
            res = (*(parms___0[x].transmit))(ss7, c, message, optparm->data, maxlen);
            }
#line 2257
            if (res > 0) {
#line 2258
              optparm->len = (unsigned char )res;
            } else {
#line 2260
              return (res);
            }
          } else {
            {
#line 2262
            res = (*(parms___0[x].receive))(ss7, c, message, optparm->data, (int )optparm->len);
            }
          }
#line 2263
          return (res + 2);
          switch_break: /* CIL Label */ ;
          }
        }
      }
    }
#line 2230
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2268
  return (-1);
}
}
#line 2271 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int dump_parm___0(struct ss7 *ss7 , int message , int parm , unsigned char *parmbuf ,
                         int maxlen , int parmtype ) 
{ 
  struct isup_parm_opt *optparm ;
  int x ;
  int len ;
  int totalparms ;
  char const   *tmp ;

  {
#line 2273
  optparm = (struct isup_parm_opt *)((void *)0);
#line 2275
  len = 0;
#line 2276
  totalparms = (int )(sizeof(parms___0) / sizeof(struct parm_func ));
#line 2278
  x = 0;
  {
#line 2278
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2278
    if (! (x < totalparms)) {
#line 2278
      goto while_break;
    }
#line 2279
    if (parms___0[x].parm == parm) {
#line 2281
      if (parms___0[x].name) {
#line 2281
        tmp = (char const   *)parms___0[x].name;
      } else {
#line 2281
        tmp = "Unknown";
      }
      {
#line 2281
      ss7_message(ss7, (char *)"\t\t%s:\n", tmp);
      }
#line 2283
      if (parms___0[x].dump) {
        {
#line 2285
        if (parmtype == 1) {
#line 2285
          goto case_1;
        }
#line 2288
        if (parmtype == 2) {
#line 2288
          goto case_2;
        }
#line 2292
        if (parmtype == 3) {
#line 2292
          goto case_3;
        }
#line 2284
        goto switch_break;
        case_1: /* CIL Label */ 
        {
#line 2286
        len = (*(parms___0[x].dump))(ss7, message, parmbuf, maxlen);
        }
#line 2287
        goto switch_break;
        case_2: /* CIL Label */ 
        {
#line 2289
        (*(parms___0[x].dump))(ss7, message, parmbuf + 1, (int )*(parmbuf + 0));
#line 2290
        len = 1 + (int )*(parmbuf + 0);
        }
#line 2291
        goto switch_break;
        case_3: /* CIL Label */ 
        {
#line 2293
        optparm = (struct isup_parm_opt *)parmbuf;
#line 2294
        (*(parms___0[x].dump))(ss7, message, optparm->data, (int )optparm->len);
#line 2295
        len = 2 + (int )optparm->len;
        }
#line 2296
        goto switch_break;
        switch_break: /* CIL Label */ ;
        }
      } else {
        {
#line 2301
        if (parmtype == 2) {
#line 2301
          goto case_2___0;
        }
#line 2304
        if (parmtype == 3) {
#line 2304
          goto case_3___0;
        }
#line 2300
        goto switch_break___0;
        case_2___0: /* CIL Label */ 
#line 2302
        len = (int )*(parmbuf + 0) + 1;
#line 2303
        goto switch_break___0;
        case_3___0: /* CIL Label */ 
#line 2305
        optparm = (struct isup_parm_opt *)parmbuf;
#line 2306
        len = (int )optparm->len + 2;
#line 2307
        goto switch_break___0;
        switch_break___0: /* CIL Label */ ;
        }
      }
      {
#line 2311
      ss7_dump_buf(ss7, 3, parmbuf, len);
      }
#line 2312
      return (len);
    }
#line 2278
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 2317
  optparm = (struct isup_parm_opt *)parmbuf;
#line 2318
  ss7_message(ss7, (char *)"\t\tUnknown Parameter (0x%x):\n", (int )optparm->type);
#line 2319
  ss7_dump_buf(ss7, 3, optparm->data, (int )optparm->len);
  }
#line 2320
  return ((int )optparm->len + 2);
}
}
#line 2323 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_message___0(struct ss7 *ss7 , struct isup_call *c , int messagetype ,
                                 int *parms___1 ) 
{ 
  struct ss7_msg *msg ;
  struct isup_h *mh ;
  unsigned char *rlptr ;
  int ourmessage ;
  int rlsize ;
  unsigned char *varoffsets ;
  unsigned char *opt_ptr ;
  int fixedparams ;
  int varparams ;
  int optparams ;
  int len ;
  struct routing_label rl ;
  int res ;
  int offset ;
  int x ;
  int i ;
  char *tmp ;
  char *tmp___0 ;
  int addedparms ;
  int offsetbegins ;
  char *tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;

  {
  {
#line 2326
  mh = (struct isup_h *)((void *)0);
#line 2328
  ourmessage = -1;
#line 2330
  varoffsets = (unsigned char *)((void *)0);
#line 2331
  fixedparams = 0;
#line 2331
  varparams = 0;
#line 2331
  optparams = 0;
#line 2332
  len = (int )sizeof(struct ss7_msg );
#line 2334
  res = 0;
#line 2335
  offset = 0;
#line 2336
  x = 0;
#line 2337
  i = 0;
#line 2340
  msg = ss7_msg_new();
  }
#line 2342
  if (! msg) {
    {
#line 2343
    ss7_error(ss7, (char *)"Allocation failed!\n");
    }
#line 2344
    return (-1);
  }
  {
#line 2347
  rlptr = ss7_msg_userpart(msg);
#line 2350
  rl.opc = ss7->pc;
#line 2352
  rl.dpc = c->dpc;
#line 2353
  rl.sls = c->sls;
#line 2354
  rl.type = ss7->switchtype;
#line 2355
  rlsize = set_routinglabel(rlptr, & rl);
#line 2356
  mh = (struct isup_h *)(rlptr + rlsize);
  }
#line 2359
  if (ss7->switchtype == 1U) {
#line 2360
    mh->cic[0] = (unsigned char )((int )c->cic & 255);
#line 2361
    mh->cic[1] = (unsigned char )(((int )c->cic >> 8) & 15);
  } else {
#line 2363
    mh->cic[0] = (unsigned char )((int )c->cic & 255);
#line 2364
    mh->cic[1] = (unsigned char )(((int )c->cic >> 8) & 63);
  }
#line 2367
  mh->type = (unsigned char )messagetype;
#line 2369
  x = 0;
  {
#line 2369
  while (1) {
    while_continue: /* CIL Label */ ;
#line 2369
    if (! ((unsigned long )x < sizeof(messages___0) / sizeof(struct message_data ))) {
#line 2369
      goto while_break;
    }
#line 2370
    if (messages___0[x].messagetype == messagetype) {
#line 2371
      ourmessage = x;
    }
#line 2369
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 2373
  if (ourmessage < 0) {
    {
#line 2374
    ss7_error(ss7, (char *)"Unable to find message %d in message list!\n", (int )mh->type);
    }
#line 2375
    return (-1);
  }
#line 2378
  fixedparams = messages___0[ourmessage].mand_fixed_params;
#line 2379
  varparams = messages___0[ourmessage].mand_var_params;
#line 2380
  optparams = messages___0[ourmessage].opt_params;
#line 2383
  if (ss7->switchtype == (unsigned int )(1 << 1)) {
#line 2384
    if (messages___0[ourmessage].messagetype == 1) {
#line 2385
      fixedparams = 3;
#line 2386
      varparams = 2;
    } else
#line 2387
    if (messages___0[ourmessage].messagetype == 16) {
#line 2388
      optparams = 0;
    }
  }
#line 2393
  x = 0;
  {
#line 2393
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 2393
    if (! (x < fixedparams)) {
#line 2393
      goto while_break___0;
    }
    {
#line 2394
    res = do_parm___0(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                      len, 1, 1);
    }
#line 2396
    if (res < 0) {
      {
#line 2397
      tmp = param2str___0(*(parms___1 + x));
#line 2397
      ss7_error(ss7, (char *)"!! Unable to add mandatory fixed parameter \'%s\'\n",
                tmp);
      }
#line 2398
      return (-1);
    }
#line 2401
    len -= res;
#line 2402
    offset += res;
#line 2393
    x ++;
  }
  while_break___0: /* CIL Label */ ;
  }
#line 2405
  varoffsets = & mh->data[offset];
#line 2407
  if (optparams) {
#line 2408
    opt_ptr = & mh->data[offset + varparams];
#line 2409
    offset += varparams + 1;
#line 2410
    len -= varparams + 1;
  } else {
#line 2412
    offset += varparams;
#line 2413
    len -= varparams;
  }
  {
#line 2417
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 2417
    if (! (x - fixedparams < varparams)) {
#line 2417
      goto while_break___1;
    }
    {
#line 2418
    *(varoffsets + i) = (unsigned char )(& mh->data[offset] - (varoffsets + i));
#line 2419
    i ++;
#line 2420
    res = do_parm___0(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                      len, 2, 1);
    }
#line 2422
    if (res < 0) {
      {
#line 2423
      tmp___0 = param2str___0(*(parms___1 + x));
#line 2423
      ss7_error(ss7, (char *)"!! Unable to add mandatory variable parameter \'%s\'\n",
                tmp___0);
      }
#line 2424
      return (-1);
    }
#line 2427
    len -= res;
#line 2428
    offset += res;
#line 2417
    x ++;
  }
  while_break___1: /* CIL Label */ ;
  }
#line 2431
  if (optparams) {
#line 2432
    addedparms = 0;
#line 2433
    offsetbegins = offset;
    {
#line 2434
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 2434
      if (! (*(parms___1 + x) > -1)) {
#line 2434
        goto while_break___2;
      }
      {
#line 2435
      res = do_parm___0(ss7, c, (int )mh->type, *(parms___1 + x), (unsigned char *)((void *)(mh->data + offset)),
                        len, 3, 1);
#line 2436
      x ++;
      }
#line 2438
      if (res < 0) {
        {
#line 2439
        tmp___1 = param2str___0(*(parms___1 + x));
#line 2439
        ss7_error(ss7, (char *)"!! Unable to add optional parameter \'%s\'\n", tmp___1);
        }
#line 2440
        return (-1);
      }
#line 2443
      if (res > 0) {
#line 2444
        addedparms ++;
      }
#line 2446
      len -= res;
#line 2447
      offset += res;
    }
    while_break___2: /* CIL Label */ ;
    }
#line 2450
    if (addedparms) {
#line 2451
      *opt_ptr = (unsigned char )(& mh->data[offsetbegins] - opt_ptr);
#line 2453
      tmp___2 = offset;
#line 2453
      offset ++;
#line 2453
      mh->data[tmp___2] = (unsigned char)0;
    } else {
#line 2455
      *opt_ptr = (unsigned char)0;
    }
  }
  {
#line 2459
  ss7_msg_userpart_len(msg, ((offset + rlsize) + 2) + 1);
#line 2461
  tmp___3 = mtp3_transmit(ss7, (unsigned char)5, rl.sls, msg);
  }
#line 2461
  return (tmp___3);
}
}
#line 3071 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_cicgroupmessage___0(struct ss7 *ss7 , int messagetype , int begincic ,
                                         int endcic , unsigned int dpc , unsigned char *status ,
                                         int type ) 
{ 
  struct isup_call call ;
  int i ;
  int tmp ;

  {
#line 3076
  i = 0;
  {
#line 3076
  while (1) {
    while_continue: /* CIL Label */ ;
#line 3076
    if (! (i + begincic <= endcic)) {
#line 3076
      goto while_break;
    }
#line 3077
    call.status[i] = *(status + i);
#line 3076
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 3079
  call.cic = (unsigned short )begincic;
#line 3080
  call.range = endcic - begincic;
#line 3081
  call.cicgroupsupervisiontype = type;
#line 3082
  call.dpc = dpc;
#line 3084
  if (call.range > 31) {
#line 3085
    return (-1);
  }
  {
#line 3087
  tmp = isup_send_message___0(ss7, & call, messagetype, cicgroup_params___0);
  }
#line 3087
  return (tmp);
}
}
#line 3254 "/home/wheatley/newnew/temp/libss7-1.0.2/isup.c"
static int isup_send_message_ciconly___0(struct ss7 *ss7 , int messagetype , int cic ,
                                         unsigned int dpc ) 
{ 
  int res ;
  struct isup_call c ;

  {
  {
#line 3258
  c.cic = (unsigned short )cic;
#line 3259
  c.dpc = dpc;
#line 3260
  res = isup_send_message___0(ss7, & c, messagetype, empty_params___0);
  }
#line 3261
  return (res);
}
}
#line 78 "/home/wheatley/newnew/temp/libss7-1.0.2/ss7_sched.c"
static int __ss7_schedule_run___0(struct ss7 *ss7 , struct timeval *tv ) 
{ 
  int x ;
  void (*callback)(void * ) ;
  void *data ;

  {
#line 83
  x = 1;
  {
#line 83
  while (1) {
    while_continue: /* CIL Label */ ;
#line 83
    if (! (x < 64)) {
#line 83
      goto while_break;
    }
#line 84
    if (ss7->ss7_sched[x].callback) {
#line 84
      if (ss7->ss7_sched[x].when.tv_sec < tv->tv_sec) {
        {
#line 88
        callback = ss7->ss7_sched[x].callback;
#line 89
        data = ss7->ss7_sched[x].data;
#line 90
        ss7->ss7_sched[x].callback = (void (*)(void *data ))((void *)0);
#line 91
        ss7->ss7_sched[x].data = (void *)0;
#line 92
        (*callback)(data);
        }
      } else
#line 84
      if (ss7->ss7_sched[x].when.tv_sec == tv->tv_sec) {
#line 84
        if (ss7->ss7_sched[x].when.tv_usec <= tv->tv_usec) {
          {
#line 88
          callback = ss7->ss7_sched[x].callback;
#line 89
          data = ss7->ss7_sched[x].data;
#line 90
          ss7->ss7_sched[x].callback = (void (*)(void *data ))((void *)0);
#line 91
          ss7->ss7_sched[x].data = (void *)0;
#line 92
          (*callback)(data);
          }
        }
      }
    }
#line 83
    x ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 95
  return (0);
}
}
#line 50 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *userpart2str___0(unsigned char userpart ) 
{ 


  {
  {
#line 53
  if ((int )userpart == 0) {
#line 53
    goto case_0;
  }
#line 55
  if ((int )userpart == 1) {
#line 55
    goto case_1;
  }
#line 57
  if ((int )userpart == 2) {
#line 57
    goto case_2;
  }
#line 59
  if ((int )userpart == 3) {
#line 59
    goto case_3;
  }
#line 61
  if ((int )userpart == 5) {
#line 61
    goto case_5;
  }
#line 63
  goto switch_default;
  case_0: /* CIL Label */ 
#line 54
  return ((char *)"NET_MNG");
  case_1: /* CIL Label */ 
#line 56
  return ((char *)"STD_TEST");
  case_2: /* CIL Label */ 
#line 58
  return ((char *)"SPEC_TEST");
  case_3: /* CIL Label */ 
#line 60
  return ((char *)"SCCP");
  case_5: /* CIL Label */ 
#line 62
  return ((char *)"ISUP");
  switch_default: /* CIL Label */ 
#line 64
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 68 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *ss7_ni2str___0(unsigned char ni ) 
{ 


  {
  {
#line 71
  if ((int )ni == 0) {
#line 71
    goto case_0;
  }
#line 73
  if ((int )ni == 1) {
#line 73
    goto case_1;
  }
#line 75
  if ((int )ni == 2) {
#line 75
    goto case_2;
  }
#line 77
  if ((int )ni == 3) {
#line 77
    goto case_3;
  }
#line 79
  goto switch_default;
  case_0: /* CIL Label */ 
#line 72
  return ((char *)"international");
  case_1: /* CIL Label */ 
#line 74
  return ((char *)"international_spare");
  case_2: /* CIL Label */ 
#line 76
  return ((char *)"national");
  case_3: /* CIL Label */ 
#line 78
  return ((char *)"national_spare");
  switch_default: /* CIL Label */ 
#line 80
  return ((char *)"Unknown");
  switch_break: /* CIL Label */ ;
  }
}
}
#line 84 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int get_routinglabel___0(unsigned int switchtype , unsigned char *sif , struct routing_label *rl ) 
{ 
  unsigned char *buf ;

  {
#line 86
  buf = sif;
#line 87
  rl->type = switchtype;
#line 89
  if (switchtype == (unsigned int )(1 << 1)) {
#line 90
    rl->dpc = (point_code )(((int )*(buf + 0) | ((int )*(buf + 1) << 8)) | ((int )*(buf + 2) << 16));
#line 91
    rl->opc = (point_code )(((int )*(buf + 3) | ((int )*(buf + 4) << 8)) | ((int )*(buf + 5) << 16));
#line 92
    rl->sls = *(buf + 6);
#line 93
    return (7);
  } else {
#line 96
    rl->dpc = (point_code )(((int )*(buf + 0) | ((int )*(buf + 1) << 8)) & 16383);
#line 97
    rl->opc = (point_code )(((((int )*(buf + 1) >> 6) | ((int )*(buf + 2) << 2)) | ((int )*(buf + 3) << 10)) & 16383);
#line 98
    rl->sls = (unsigned char )((int )*(buf + 3) >> 4);
#line 99
    return (4);
  }
}
}
#line 112 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static unsigned char get_userpart___0(unsigned char sio ) 
{ 


  {
#line 114
  return ((unsigned char )((int )sio & 15));
}
}
#line 231 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_setstate_mtp2link___0(struct ss7 *ss7 , struct mtp2 *link , int newstate ) 
{ 
  int i ;

  {
#line 235
  i = 0;
  {
#line 235
  while (1) {
    while_continue: /* CIL Label */ ;
#line 235
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 235
      goto while_break;
    }
#line 236
    if ((unsigned long )ss7->links[i] == (unsigned long )link) {
#line 237
      ss7->mtp2_linkstate[i] = (unsigned int )newstate;
    }
#line 235
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 239
  return;
}
}
#line 241 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static char *net_mng_message2str___0(int h0 , int h1 ) 
{ 
  int i ;

  {
#line 245
  i = 0;
  {
#line 245
  while (1) {
    while_continue: /* CIL Label */ ;
#line 245
    if (! ((unsigned long )i < sizeof(net_mng_messages) / sizeof(struct net_mng_message ))) {
#line 245
      goto while_break;
    }
#line 246
    if (net_mng_messages[i].h0 == h0) {
#line 246
      if (net_mng_messages[i].h1 == h1) {
#line 247
        return (net_mng_messages[i].name);
      }
    }
#line 245
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 250
  return ((char *)"Unknown");
}
}
#line 253 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int net_mng_dump___0(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char userpart ,
                            unsigned char *buf , int len ) 
{ 
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  char *tmp___0 ;

  {
#line 255
  if (ss7->switchtype == 1U) {
#line 255
    tmp = 4;
  } else {
#line 255
    tmp = 7;
  }
  {
#line 255
  headerptr = buf + tmp;
#line 258
  h0 = *headerptr;
#line 258
  h1 = h0;
#line 260
  h1 = get_h1(headerptr);
#line 261
  h0 = get_h0(headerptr);
#line 263
  ss7_message(ss7, (char *)"\tH0: %x H1: %x\n", (int )h0, (int )h1);
  }
#line 264
  if ((int )userpart == 0) {
    {
#line 265
    tmp___0 = net_mng_message2str___0((int )h0, (int )h1);
#line 265
    ss7_message(ss7, (char *)"\tMessage type: %s\n", tmp___0);
    }
  }
  {
#line 266
  ss7_dump_buf(ss7, 1, headerptr, 1);
  }
#line 267
  return (0);
}
}
#line 270 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void std_test_send___0(struct mtp2 *link ) 
{ 
  struct ss7_msg *m ;
  unsigned char *layer4 ;
  struct routing_label rl ;
  struct ss7 *ss7 ;
  int rllen ;
  unsigned char testlen ;
  size_t tmp ;
  int tmp___0 ;

  {
  {
#line 275
  ss7 = link->master;
#line 276
  rllen = 0;
#line 277
  tmp = strlen((char const   *)(testmessage));
#line 277
  testlen = (unsigned char )tmp;
#line 279
  m = ss7_msg_new();
  }
#line 280
  if (! m) {
    {
#line 281
    ss7_error(link->master, (char *)"Malloc failed on ss7_msg!.  Unable to transmit STD_TEST\n");
    }
#line 282
    return;
  }
  {
#line 285
  layer4 = ss7_msg_userpart(m);
#line 286
  rl.type = ss7->switchtype;
#line 287
  rl.opc = ss7->pc;
#line 288
  rl.dpc = link->dpc;
#line 289
  rl.sls = (unsigned char )link->slc;
#line 291
  rllen = set_routinglabel(layer4, & rl);
#line 292
  layer4 += rllen;
#line 294
  set_h0(layer4, (unsigned char)1);
#line 295
  set_h1(layer4, (unsigned char)1);
#line 296
  *(layer4 + 1) = (unsigned char )((int )testlen << 4);
#line 297
  memcpy((void */* __restrict  */)(layer4 + 2), (void const   */* __restrict  */)(testmessage),
         (size_t )testlen);
#line 299
  ss7_msg_userpart_len(m, (rllen + (int )testlen) + 2);
  }
#line 301
  if (ss7->switchtype == 1U) {
#line 301
    tmp___0 = 1;
  } else {
#line 301
    tmp___0 = 2;
  }
  {
#line 301
  mtp3_transmit(link->master, (unsigned char )tmp___0, (unsigned char )link->slc,
                m);
  }
#line 302
  return;
}
}
#line 304 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int net_mng_receive___0(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char *buf ,
                               int len ) 
{ 
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  ss7_event *e ;

  {
#line 306
  if (ss7->switchtype == 1U) {
#line 306
    tmp = 4;
  } else {
#line 306
    tmp = 7;
  }
  {
#line 306
  headerptr = buf + tmp;
#line 309
  h0 = *headerptr;
#line 309
  h1 = h0;
#line 311
  h1 = get_h1(headerptr);
#line 312
  h0 = get_h0(headerptr);
  }
#line 315
  if ((int )h0 == 7) {
#line 315
    if ((int )h1 == 1) {
      {
#line 318
      mtp3_setstate_mtp2link___0(ss7, mtp2, 3);
      }
#line 320
      if (ss7->state != 1) {
        {
#line 321
        e = ss7_next_empty_event(ss7);
        }
#line 322
        if (! e) {
          {
#line 323
          ss7_error(ss7, (char *)"Event queue full\n");
          }
#line 324
          return (-1);
        }
#line 326
        e->e = 1;
#line 327
        ss7->state = 1;
      }
#line 329
      return (0);
    } else {
#line 334
      return (0);
    }
  } else {
#line 334
    return (0);
  }
}
}
#line 338 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void net_mng_send_tra___0(struct mtp2 *link ) 
{ 
  struct ss7_msg *m ;
  unsigned char *layer4 ;
  struct routing_label rl ;
  struct ss7 *ss7 ;
  int rllen ;

  {
  {
#line 343
  ss7 = link->master;
#line 344
  rllen = 0;
#line 346
  m = ss7_msg_new();
  }
#line 347
  if (! m) {
    {
#line 348
    ss7_error(link->master, (char *)"Malloc failed on ss7_msg!.  Unable to transmit NET_MNG TRA\n");
    }
#line 349
    return;
  }
  {
#line 352
  layer4 = ss7_msg_userpart(m);
#line 353
  rl.type = ss7->switchtype;
#line 354
  rl.opc = ss7->pc;
#line 355
  rl.dpc = link->dpc;
#line 356
  rl.sls = (unsigned char )link->slc;
#line 358
  rllen = set_routinglabel(layer4, & rl);
#line 359
  layer4 += rllen;
#line 361
  set_h0(layer4, (unsigned char)7);
#line 362
  set_h1(layer4, (unsigned char)1);
#line 364
  ss7_msg_userpart_len(m, rllen + 1);
#line 366
  mtp3_transmit(link->master, (unsigned char)0, (unsigned char )link->slc, m);
  }
#line 367
  return;
}
}
#line 369 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static int std_test_receive___0(struct ss7 *ss7 , struct mtp2 *mtp2 , unsigned char *buf ,
                                int len ) 
{ 
  unsigned char *sif ;
  unsigned char *headerptr ;
  int tmp ;
  unsigned char h1 ;
  unsigned char h0 ;
  int testpatsize ;
  struct routing_label rl ;
  struct ss7_msg *m ;
  struct routing_label drl ;
  unsigned char *layer4 ;
  ss7_event *e ;
  int rllen ;
  int tmp___0 ;

  {
#line 371
  sif = buf;
#line 372
  if (ss7->switchtype == 1U) {
#line 372
    tmp = 4;
  } else {
#line 372
    tmp = 7;
  }
  {
#line 372
  headerptr = buf + tmp;
#line 374
  testpatsize = 0;
#line 377
  get_routinglabel___0(ss7->switchtype, sif, & rl);
  }
#line 379
  if (rl.dpc != ss7->pc) {
#line 380
    goto fail;
  }
  {
#line 382
  h0 = *headerptr;
#line 382
  h1 = h0;
#line 384
  h1 = get_h1(headerptr);
#line 385
  h0 = get_h0(headerptr);
  }
#line 387
  if ((int )h0 != 1) {
#line 388
    goto fail;
  }
#line 390
  if ((int )h1 == 1) {
    {
#line 397
    m = ss7_msg_new();
    }
#line 398
    if (! m) {
      {
#line 399
      ss7_error(ss7, (char *)"Unable to allocate message buffer!\n");
      }
#line 400
      return (-1);
    }
    {
#line 403
    drl.type = ss7->switchtype;
#line 404
    drl.dpc = rl.opc;
#line 405
    drl.opc = ss7->pc;
#line 413
    drl.sls = rl.sls;
#line 416
    layer4 = ss7_msg_userpart(m);
#line 418
    rllen = set_routinglabel(layer4, & drl);
#line 419
    layer4 += rllen;
#line 421
    testpatsize = ((int )*(headerptr + 1) >> 4) & 15;
#line 423
    set_h0(layer4, (unsigned char)1);
#line 424
    set_h1(layer4, (unsigned char)2);
#line 425
    *(layer4 + 1) = (unsigned char )(testpatsize << 4);
#line 426
    memcpy((void */* __restrict  */)(layer4 + 2), (void const   */* __restrict  */)(headerptr + 2),
           (size_t )testpatsize);
#line 428
    ss7_msg_userpart_len(m, (rllen + testpatsize) + 2);
    }
#line 430
    if (ss7->switchtype == 1U) {
#line 430
      tmp___0 = 1;
    } else {
#line 430
      tmp___0 = 2;
    }
    {
#line 430
    mtp3_transmit(ss7, (unsigned char )tmp___0, (unsigned char )mtp2->slc, m);
#line 434
    mtp3_setstate_mtp2link___0(ss7, mtp2, 3);
    }
#line 436
    if (ss7->state != 1) {
      {
#line 437
      e = ss7_next_empty_event(ss7);
      }
#line 438
      if (! e) {
        {
#line 439
        ss7_error(ss7, (char *)"Event queue full\n");
        }
#line 440
        return (-1);
      }
#line 442
      e->e = 1;
    }
#line 445
    return (0);
  } else
#line 446
  if ((int )h1 == 2) {
#line 447
    return (0);
  } else {
    {
#line 449
    ss7_error(ss7, (char *)"Unhandled STD_TEST message: h0 = %x h1 = %x", (int )h0,
              (int )h1);
    }
  }
  fail: 
#line 452
  return (-1);
}
}
#line 556 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_event_link_up___0(struct mtp2 *link ) 
{ 


  {
#line 558
  if (! link->sent_tra) {
    {
#line 559
    net_mng_send_tra___0(link);
#line 560
    link->sent_tra = 1;
    }
  }
  {
#line 562
  std_test_send___0(link);
  }
#line 563
  return;
}
}
#line 565 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static void mtp3_event_link_down___0(struct mtp2 *link ) 
{ 
  struct ss7 *ss7 ;

  {
  {
#line 567
  ss7 = link->master;
#line 570
  mtp3_setstate_mtp2link___0(ss7, link, 0);
  }
#line 571
  return;
}
}
#line 573 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp3.c"
static struct mtp2 *slc_to_mtp2___0(struct ss7 *ss7 , unsigned int slc ) 
{ 
  int i ;
  struct mtp2 *link ;

  {
#line 575
  i = 0;
#line 577
  link = (struct mtp2 *)((void *)0);
#line 578
  i = 0;
  {
#line 578
  while (1) {
    while_continue: /* CIL Label */ ;
#line 578
    if (! ((unsigned int )i < ss7->numlinks)) {
#line 578
      goto while_break;
    }
#line 579
    if ((unsigned int )(ss7->links[i])->slc == slc) {
#line 580
      link = ss7->links[i];
    }
#line 578
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 583
  return (link);
}
}
#line 8 "/home/wheatley/newnew/temp/libss7-1.0.2/version.c"
static char const   ss7_version___0[6]  = {      (char const   )'1',      (char const   )'.',      (char const   )'0',      (char const   )'.', 
        (char const   )'2',      (char const   )'\000'};
#line 108 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void flush_bufs___0(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *list ;
  struct ss7_msg *cur ;

  {
#line 112
  list = link___0->tx_buf;
#line 114
  link___0->tx_buf = (struct ss7_msg *)((void *)0);
  {
#line 116
  while (1) {
    while_continue: /* CIL Label */ ;
#line 116
    if (! list) {
#line 116
      goto while_break;
    }
    {
#line 117
    cur = list;
#line 118
    list = list->next;
#line 119
    free((void *)cur);
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 122
  list = link___0->tx_q;
#line 124
  link___0->tx_q = (struct ss7_msg *)((void *)0);
  {
#line 126
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 126
    if (! list) {
#line 126
      goto while_break___0;
    }
    {
#line 127
    cur = list;
#line 128
    list = list->next;
#line 129
    free((void *)cur);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 132
  link___0->retransmit_pos = (struct ss7_msg *)((void *)0);
#line 133
  return;
}
}
#line 135 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void reset_mtp___0(struct mtp2 *link___0 ) 
{ 


  {
  {
#line 137
  link___0->curfsn = (unsigned char)127;
#line 138
  link___0->curfib = (unsigned char)1;
#line 139
  link___0->curbib = (unsigned char)1;
#line 140
  link___0->lastfsnacked = (unsigned char)127;
#line 141
  link___0->retransmissioncount = 0U;
#line 142
  link___0->flags |= 1 << 1;
#line 144
  flush_bufs___0(link___0);
  }
#line 145
  return;
}
}
#line 148 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void mtp2_request_retransmission___0(struct mtp2 *link___0 ) 
{ 


  {
#line 150
  (link___0->retransmissioncount) ++;
#line 151
  link___0->curbib = (unsigned char )(! link___0->curbib);
#line 152
  link___0->flags |= 1 << 1;
#line 153
  return;
}
}
#line 155 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_queue_su___0(struct mtp2 *link___0 , struct ss7_msg *m ) 
{ 
  struct ss7_msg *cur ;

  {
#line 159
  if (! link___0->tx_q) {
#line 160
    link___0->tx_q = m;
#line 161
    m->next = (struct ss7_msg *)((void *)0);
#line 162
    return (0);
  }
#line 165
  cur = link___0->tx_q;
#line 167
  cur = link___0->tx_q;
  {
#line 167
  while (1) {
    while_continue: /* CIL Label */ ;
#line 167
    if (! cur->next) {
#line 167
      goto while_break;
    }
#line 167
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 169
  cur->next = m;
#line 170
  m->next = (struct ss7_msg *)((void *)0);
#line 172
  return (0);
}
}
#line 175 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void make_lssu___0(struct mtp2 *link___0 , unsigned char *buf , unsigned int *size ,
                          int lssu_status ) 
{ 
  struct mtp_su_head *head ;

  {
  {
#line 179
  *size = 6U;
#line 181
  memset((void *)buf, 0, (size_t )6);
#line 183
  head = (struct mtp_su_head *)buf;
#line 184
  head->li = (unsigned char)1;
  }
  {
#line 187
  if (lssu_status == 0) {
#line 187
    goto case_0;
  }
#line 187
  if (lssu_status == 3) {
#line 187
    goto case_0;
  }
#line 192
  if (lssu_status == 5) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 4) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 2) {
#line 192
    goto case_5;
  }
#line 192
  if (lssu_status == 1) {
#line 192
    goto case_5;
  }
#line 185
  goto switch_break;
  case_0: /* CIL Label */ 
  case_3: /* CIL Label */ 
  {
#line 188
  reset_mtp___0(link___0);
  }
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
  case_2: /* CIL Label */ 
  case_1: /* CIL Label */ 
#line 193
  head->bib = link___0->curbib;
#line 194
  head->bsn = link___0->lastfsnacked;
#line 195
  head->fib = link___0->curfib;
#line 196
  head->fsn = link___0->curfsn;
#line 197
  goto switch_break;
  switch_break: /* CIL Label */ ;
  }
#line 200
  head->data[0] = (unsigned char )lssu_status;
#line 201
  return;
}
}
#line 203 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void make_fisu___0(struct mtp2 *link___0 , unsigned char *buf , unsigned int *size ,
                          int nack ) 
{ 
  struct mtp_su_head *h ;

  {
  {
#line 207
  *size = 5U;
#line 209
  h = (struct mtp_su_head *)buf;
#line 211
  memset((void *)buf, 0, (size_t )*size);
#line 213
  init_mtp2_header(link___0, h, 0, nack);
#line 215
  h->li = (unsigned char)0;
  }
#line 216
  return;
}
}
#line 218 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void add_txbuf___0(struct mtp2 *link___0 , struct ss7_msg *m ) 
{ 


  {
#line 220
  m->next = link___0->tx_buf;
#line 221
  link___0->tx_buf = m;
#line 225
  return;
}
}
#line 227 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void update_retransmit_pos___0(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *cur ;
  struct ss7_msg *prev ;

  {
#line 229
  prev = (struct ss7_msg *)((void *)0);
#line 232
  cur = link___0->tx_buf;
  {
#line 234
  while (1) {
    while_continue: /* CIL Label */ ;
#line 234
    if (! cur) {
#line 234
      goto while_break;
    }
#line 235
    if ((unsigned long )cur == (unsigned long )link___0->retransmit_pos) {
#line 236
      goto while_break;
    }
#line 237
    prev = cur;
#line 238
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 241
  link___0->retransmit_pos = prev;
#line 243
  return;
}
}
#line 245 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void mtp2_retransmit___0(struct mtp2 *link___0 ) 
{ 
  struct ss7_msg *m ;

  {
#line 249
  link___0->flags |= 1 << 1;
#line 251
  link___0->curfib = (unsigned char )(! link___0->curfib);
#line 253
  m = link___0->tx_buf;
#line 254
  if (! m) {
    {
#line 255
    ss7_error(link___0->master, (char *)"Huh!? Asked to retransmit but we don\'t have anything in the tx buffer\n");
    }
#line 256
    return;
  }
  {
#line 259
  while (1) {
    while_continue: /* CIL Label */ ;
#line 259
    if (! m->next) {
#line 259
      goto while_break;
    }
#line 260
    m = m->next;
  }
  while_break: /* CIL Label */ ;
  }
#line 262
  link___0->retransmit_pos = m;
#line 263
  return;
}
}
#line 355 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_lssu___0(struct mtp2 *link___0 , int lssu_status ) 
{ 


  {
#line 357
  link___0->flags |= 1 << 1;
#line 358
  link___0->autotxsutype = lssu_status;
#line 359
  return (0);
}
}
#line 362 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int mtp2_fisu___0(struct mtp2 *link___0 , int nack ) 
{ 


  {
#line 364
  link___0->flags |= 1 << 1;
#line 365
  link___0->autotxsutype = 6;
#line 366
  return (0);
}
}
#line 369 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void update_txbuf___0(struct mtp2 *link___0 , unsigned char upto ) 
{ 
  struct mtp_su_head *h ;
  struct ss7_msg *prev ;
  struct ss7_msg *cur ;
  struct ss7_msg *frlist ;

  {
#line 372
  prev = (struct ss7_msg *)((void *)0);
#line 373
  frlist = (struct ss7_msg *)((void *)0);
#line 377
  if (! link___0->tx_buf) {
#line 378
    return;
  }
#line 381
  cur = link___0->tx_buf;
  {
#line 383
  while (1) {
    while_continue: /* CIL Label */ ;
#line 383
    if (! cur) {
#line 383
      goto while_break;
    }
#line 384
    h = (struct mtp_su_head *)(cur->buf);
#line 385
    if ((int )h->fsn == (int )upto) {
#line 386
      frlist = cur;
#line 387
      if (! prev) {
#line 388
        link___0->tx_buf = (struct ss7_msg *)((void *)0);
      } else {
#line 390
        prev->next = (struct ss7_msg *)((void *)0);
      }
#line 391
      frlist = cur;
#line 392
      goto while_break;
    }
#line 394
    prev = cur;
#line 395
    cur = cur->next;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 398
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 398
    if (! frlist) {
#line 398
      goto while_break___0;
    }
    {
#line 399
    cur = frlist;
#line 400
    frlist = frlist->next;
#line 401
    free((void *)cur);
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 404
  return;
}
}
#line 407 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int fisu_rx___0(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  int tmp ;

  {
#line 409
  if (link___0->lastsurxd == 6) {
#line 410
    return (0);
  } else {
#line 412
    link___0->lastsurxd = 6;
  }
  {
#line 415
  if (link___0->state == 3) {
#line 415
    goto case_3;
  }
#line 418
  if (link___0->state == 4) {
#line 418
    goto case_4;
  }
#line 420
  if (link___0->state == 5) {
#line 420
    goto case_5;
  }
#line 426
  goto switch_default;
  case_3: /* CIL Label */ 
  {
#line 416
  tmp = mtp2_setstate(link___0, 4);
  }
#line 416
  return (tmp);
  case_4: /* CIL Label */ 
  {
#line 419
  mtp2_setstate(link___0, 5);
  }
  case_5: /* CIL Label */ 
#line 421
  if ((int )h->fsn != (int )link___0->lastfsnacked) {
    {
#line 422
    ss7_message(link___0->master, (char *)"Received out of sequence FISU w/ fsn of %d, lastfsnacked = %d, requesting retransmission\n",
                (int )h->fsn, (int )link___0->lastfsnacked);
#line 423
    mtp2_request_retransmission___0(link___0);
    }
  }
#line 425
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 427
  ss7_message(link___0->master, (char *)"Huh?! Got FISU in link state %d\n", link___0->state);
  }
#line 428
  return (-1);
  switch_break: /* CIL Label */ ;
  }
#line 431
  return (0);
}
}
#line 434 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t1_expiry___0(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 436
  link___0 = (struct mtp2 *)data;
#line 438
  mtp2_setstate(link___0, 0);
  }
#line 440
  return;
}
}
#line 443 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t2_expiry___0(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 445
  link___0 = (struct mtp2 *)data;
#line 447
  mtp2_setstate(link___0, 0);
  }
#line 449
  return;
}
}
#line 452 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t3_expiry___0(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
  {
#line 454
  link___0 = (struct mtp2 *)data;
#line 456
  mtp2_setstate(link___0, 0);
  }
#line 458
  return;
}
}
#line 461 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static void t4_expiry___0(void *data ) 
{ 
  struct mtp2 *link___0 ;

  {
#line 463
  link___0 = (struct mtp2 *)data;
#line 465
  if ((link___0->master)->debug & 1U) {
    {
#line 466
    ss7_message(link___0->master, (char *)"T4 expired!\n");
    }
  }
  {
#line 468
  mtp2_setstate(link___0, 4);
  }
#line 470
  return;
}
}
#line 473 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int to_idle___0(struct mtp2 *link___0 ) 
{ 
  int tmp ;

  {
  {
#line 475
  link___0->state = 0;
#line 476
  tmp = mtp2_lssu___0(link___0, 3);
  }
#line 476
  if (tmp) {
    {
#line 477
    ss7_error(link___0->master, (char *)"Could not transmit LSSU\n");
    }
#line 478
    return (-1);
  }
  {
#line 481
  mtp2_setstate(link___0, 1);
  }
#line 483
  return (0);
}
}
#line 616 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int lssu_rx___0(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  unsigned char lssutype ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;
  int tmp___3 ;
  int tmp___4 ;
  int tmp___5 ;
  int tmp___6 ;
  int tmp___7 ;

  {
  {
#line 618
  tmp = lssu_type(h);
#line 618
  lssutype = (unsigned char )tmp;
  }
#line 620
  if (len > 8) {
    {
#line 621
    ss7_error(link___0->master, (char *)"Received LSSU with length %d longer than expected\n",
              len);
    }
  }
#line 623
  if (link___0->lastsurxd == (int )lssutype) {
#line 624
    return (0);
  } else {
#line 626
    link___0->lastsurxd = (int )lssutype;
  }
#line 628
  if ((int )lssutype == 2) {
#line 629
    link___0->emergency = 1;
  }
  {
#line 633
  if (link___0->state == 1) {
#line 633
    goto case_1;
  }
#line 633
  if (link___0->state == 0) {
#line 633
    goto case_1;
  }
#line 646
  if (link___0->state == 2) {
#line 646
    goto case_2;
  }
#line 659
  if (link___0->state == 3) {
#line 659
    goto case_3;
  }
#line 669
  if (link___0->state == 5) {
#line 669
    goto case_5;
  }
#line 669
  if (link___0->state == 4) {
#line 669
    goto case_5;
  }
#line 631
  goto switch_break;
  case_1: /* CIL Label */ 
  case_0: /* CIL Label */ 
#line 634
  if ((int )lssutype != 2) {
#line 634
    if ((int )lssutype != 1) {
#line 634
      if ((int )lssutype != 0) {
        {
#line 635
        tmp___0 = mtp2_setstate(link___0, 1);
        }
#line 635
        return (tmp___0);
      }
    }
  }
#line 637
  if (link___0->emergency) {
#line 638
    link___0->provingperiod = link___0->timers.t4e;
  } else
#line 637
  if ((int )lssutype == 2) {
#line 638
    link___0->provingperiod = link___0->timers.t4e;
  } else {
#line 640
    link___0->provingperiod = link___0->timers.t4;
  }
#line 642
  if ((int )lssutype == 2) {
    {
#line 643
    tmp___1 = mtp2_setstate(link___0, 3);
    }
#line 643
    return (tmp___1);
  } else
#line 642
  if ((int )lssutype == 1) {
    {
#line 643
    tmp___1 = mtp2_setstate(link___0, 3);
    }
#line 643
    return (tmp___1);
  } else {
    {
#line 645
    tmp___2 = mtp2_setstate(link___0, 2);
    }
#line 645
    return (tmp___2);
  }
  case_2: /* CIL Label */ 
#line 647
  if ((int )lssutype == 3) {
    {
#line 648
    tmp___3 = mtp2_setstate(link___0, 0);
    }
#line 648
    return (tmp___3);
  }
#line 650
  if (link___0->emergency) {
#line 651
    link___0->provingperiod = link___0->timers.t4e;
  } else
#line 650
  if ((int )lssutype == 2) {
#line 651
    link___0->provingperiod = link___0->timers.t4e;
  } else {
#line 653
    link___0->provingperiod = link___0->timers.t4;
  }
#line 655
  if (link___0->provingperiod == link___0->timers.t4) {
#line 655
    if (link___0->emergency) {
#line 656
      link___0->provingperiod = link___0->timers.t4e;
    } else
#line 655
    if ((int )lssutype == 2) {
#line 656
      link___0->provingperiod = link___0->timers.t4e;
    }
  }
  {
#line 658
  tmp___4 = mtp2_setstate(link___0, 3);
  }
#line 658
  return (tmp___4);
  case_3: /* CIL Label */ 
#line 660
  if ((int )lssutype == 3) {
    {
#line 661
    tmp___5 = mtp2_setstate(link___0, 0);
    }
#line 661
    return (tmp___5);
  }
#line 663
  if ((int )lssutype == 0) {
    {
#line 664
    tmp___6 = mtp2_setstate(link___0, 2);
    }
#line 664
    return (tmp___6);
  }
  {
#line 666
  ss7_message(link___0->master, (char *)"Don\'t handle any other conditions in state %d\n",
              link___0->state);
  }
#line 667
  goto switch_break;
  case_5: /* CIL Label */ 
  case_4: /* CIL Label */ 
#line 670
  if ((int )lssutype != 3) {
#line 670
    if ((int )lssutype != 0) {
      {
#line 671
      ss7_message(link___0->master, (char *)"Got LSSU of type %d while link is in state %d.  Re-Aligning\n",
                  (int )lssutype, link___0->state);
      }
    }
  }
  {
#line 672
  tmp___7 = mtp2_setstate(link___0, 0);
  }
#line 672
  return (tmp___7);
  switch_break: /* CIL Label */ ;
  }
#line 676
  return (0);
}
}
#line 679 "/home/wheatley/newnew/temp/libss7-1.0.2/mtp2.c"
static int msu_rx___0(struct mtp2 *link___0 , struct mtp_su_head *h , int len ) 
{ 
  int res ;

  {
#line 681
  res = 0;
  {
#line 684
  if (link___0->state == 4) {
#line 684
    goto case_4;
  }
#line 687
  if (link___0->state == 5) {
#line 687
    goto case_5;
  }
#line 689
  goto switch_default;
  case_4: /* CIL Label */ 
  {
#line 685
  mtp2_setstate(link___0, 5);
  }
#line 686
  goto switch_break;
  case_5: /* CIL Label */ 
#line 688
  goto switch_break;
  switch_default: /* CIL Label */ 
  {
#line 690
  ss7_error(link___0->master, (char *)"Received MSU in invalid state %d\n", link___0->state);
  }
#line 691
  return (-1);
  switch_break: /* CIL Label */ ;
  }
#line 695
  if ((int )h->fib != (int )link___0->curbib) {
    {
#line 696
    ss7_message(link___0->master, (char *)"MSU received, though still waiting for retransmission start.  Dropping.\n");
    }
#line 697
    return (0);
  }
#line 700
  if ((int )h->fsn == (int )link___0->lastfsnacked) {
    {
#line 702
    ss7_message(link___0->master, (char *)"Received double MSU, dropping\n");
    }
#line 703
    return (0);
  }
#line 706
  if ((int )h->fsn != ((int )link___0->lastfsnacked + 1) % 128) {
    {
#line 707
    ss7_message(link___0->master, (char *)"Received out of sequence MSU w/ fsn of %d, lastfsnacked = %d, requesting retransmission\n",
                (int )h->fsn, (int )link___0->lastfsnacked);
#line 708
    mtp2_request_retransmission___0(link___0);
    }
#line 709
    return (0);
  }
  {
#line 713
  link___0->lastfsnacked = h->fsn;
#line 715
  link___0->flags |= 1 << 1;
#line 717
  res = mtp3_receive(link___0->master, link___0, (void *)(h->data), len - 3);
  }
#line 719
  return (res);
}
}
