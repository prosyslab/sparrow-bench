/* Generated by CIL v. 1.7.3 */
/* print_CIL_Input is false */

#line 49 "/usr/include/stdint.h"
typedef unsigned short uint16_t;
#line 51 "/usr/include/stdint.h"
typedef unsigned int uint32_t;
#line 125 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __uid_t;
#line 126 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __gid_t;
#line 129 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __mode_t;
#line 131 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off_t;
#line 132 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __off64_t;
#line 139 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __time_t;
#line 141 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __suseconds_t;
#line 172 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef long __ssize_t;
#line 189 "/usr/include/x86_64-linux-gnu/bits/types.h"
typedef unsigned int __socklen_t;
#line 109 "/usr/include/x86_64-linux-gnu/sys/types.h"
typedef __ssize_t ssize_t;
#line 75 "/usr/include/time.h"
typedef __time_t time_t;
#line 212 "/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h"
typedef unsigned long size_t;
#line 30 "/usr/include/x86_64-linux-gnu/bits/time.h"
struct timeval {
   __time_t tv_sec ;
   __suseconds_t tv_usec ;
};
#line 54 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef long __fd_mask;
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
struct __anonstruct_fd_set_3 {
   __fd_mask __fds_bits[1024 / (8 * (int )sizeof(__fd_mask ))] ;
};
#line 64 "/usr/include/x86_64-linux-gnu/sys/select.h"
typedef struct __anonstruct_fd_set_3 fd_set;
#line 33 "/usr/include/x86_64-linux-gnu/bits/socket.h"
typedef __socklen_t socklen_t;
#line 28 "/usr/include/x86_64-linux-gnu/bits/sockaddr.h"
typedef unsigned short sa_family_t;
#line 149 "/usr/include/x86_64-linux-gnu/bits/socket.h"
struct sockaddr {
   sa_family_t sa_family ;
   char sa_data[14] ;
};
#line 30 "/usr/include/netinet/in.h"
typedef uint32_t in_addr_t;
#line 31 "/usr/include/netinet/in.h"
struct in_addr {
   in_addr_t s_addr ;
};
#line 117 "/usr/include/netinet/in.h"
typedef uint16_t in_port_t;
#line 237 "/usr/include/netinet/in.h"
struct sockaddr_in {
   sa_family_t sin_family ;
   in_port_t sin_port ;
   struct in_addr sin_addr ;
   unsigned char sin_zero[((sizeof(struct sockaddr ) - sizeof(unsigned short )) - sizeof(in_port_t )) - sizeof(struct in_addr )] ;
};
#line 100 "/usr/include/netdb.h"
struct hostent {
   char *h_name ;
   char **h_aliases ;
   int h_addrtype ;
   int h_length ;
   char **h_addr_list ;
};
#line 44 "/usr/include/stdio.h"
struct _IO_FILE;
#line 44
struct _IO_FILE;
#line 48 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 144 "/usr/include/libio.h"
struct _IO_FILE;
#line 154 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 160 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 245 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 49 "/usr/include/pwd.h"
struct passwd {
   char *pw_name ;
   char *pw_passwd ;
   __uid_t pw_uid ;
   __gid_t pw_gid ;
   char *pw_gecos ;
   char *pw_dir ;
   char *pw_shell ;
};
#line 133 "/usr/include/time.h"
struct tm {
   int tm_sec ;
   int tm_min ;
   int tm_hour ;
   int tm_mday ;
   int tm_mon ;
   int tm_year ;
   int tm_wday ;
   int tm_yday ;
   int tm_isdst ;
   long tm_gmtoff ;
   char const   *tm_zone ;
};
#line 29 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
struct Channel;
#line 29 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
typedef struct Channel Channel;
#line 30 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
struct Channel {
   int fd ;
   char *name ;
   Channel *next ;
};
#line 50 "/usr/include/x86_64-linux-gnu/bits/errno.h"
extern  __attribute__((__nothrow__)) int *( __attribute__((__leaf__)) __errno_location)(void)  __attribute__((__const__)) ;
#line 106 "/usr/include/x86_64-linux-gnu/sys/select.h"
extern int select(int __nfds , fd_set * __restrict  __readfds , fd_set * __restrict  __writefds ,
                  fd_set * __restrict  __exceptfds , struct timeval * __restrict  __timeout ) ;
#line 113 "/usr/include/x86_64-linux-gnu/sys/socket.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) socket)(int __domain ,
                                                                             int __type ,
                                                                             int __protocol ) ;
#line 137
extern int connect(int __fd , struct sockaddr  const  *__addr , socklen_t __len ) ;
#line 379 "/usr/include/netinet/in.h"
extern  __attribute__((__nothrow__)) uint16_t ( __attribute__((__leaf__)) htons)(uint16_t __hostshort )  __attribute__((__const__)) ;
#line 144 "/usr/include/netdb.h"
extern struct hostent *gethostbyname(char const   *__name ) ;
#line 321 "/usr/include/x86_64-linux-gnu/sys/stat.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) mkdir)(char const   *__path ,
                                                                                            __mode_t __mode ) ;
#line 350
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) mkfifo)(char const   *__path ,
                                                                                             __mode_t __mode ) ;
#line 170 "/usr/include/stdio.h"
extern struct _IO_FILE *stderr ;
#line 237
extern int fclose(FILE *__stream ) ;
#line 272
extern FILE *fopen(char const   * __restrict  __filename , char const   * __restrict  __modes ) ;
#line 356
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 362
extern int printf(char const   * __restrict  __format  , ...) ;
#line 386
extern  __attribute__((__nothrow__)) int ( /* format attribute */  snprintf)(char * __restrict  __s ,
                                                                             size_t __maxlen ,
                                                                             char const   * __restrict  __format 
                                                                             , ...) ;
#line 689
extern int fputs(char const   * __restrict  __s , FILE * __restrict  __stream ) ;
#line 846
extern void perror(char const   *__s ) ;
#line 183 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) long ( __attribute__((__nonnull__(1), __leaf__)) strtol)(char const   * __restrict  __nptr ,
                                                                                              char ** __restrict  __endptr ,
                                                                                              int __base ) ;
#line 468
extern  __attribute__((__nothrow__)) void *( __attribute__((__leaf__)) calloc)(size_t __nmemb ,
                                                                               size_t __size )  __attribute__((__malloc__)) ;
#line 483
extern  __attribute__((__nothrow__)) void ( __attribute__((__leaf__)) free)(void *__ptr ) ;
#line 543
extern  __attribute__((__nothrow__, __noreturn__)) void ( __attribute__((__leaf__)) exit)(int __status ) ;
#line 564
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) getenv)(char const   *__name ) ;
#line 146 "/usr/include/fcntl.h"
extern int ( __attribute__((__nonnull__(1))) open)(char const   *__file , int __oflag 
                                                   , ...) ;
#line 46 "/usr/include/string.h"
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1,2), __leaf__)) memcpy)(void * __restrict  __dest ,
                                                                                                 void const   * __restrict  __src ,
                                                                                                 size_t __n ) ;
#line 66
extern  __attribute__((__nothrow__)) void *( __attribute__((__nonnull__(1), __leaf__)) memset)(void *__s ,
                                                                                               int __c ,
                                                                                               size_t __n ) ;
#line 144
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strcmp)(char const   *__s1 ,
                                                                                               char const   *__s2 )  __attribute__((__pure__)) ;
#line 147
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1,2), __leaf__)) strncmp)(char const   *__s1 ,
                                                                                                char const   *__s2 ,
                                                                                                size_t __n )  __attribute__((__pure__)) ;
#line 176
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strdup)(char const   *__s )  __attribute__((__malloc__)) ;
#line 236
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1), __leaf__)) strchr)(char const   *__s ,
                                                                                               int __c )  __attribute__((__pure__)) ;
#line 342
extern  __attribute__((__nothrow__)) char *( __attribute__((__nonnull__(1,2), __leaf__)) strstr)(char const   *__haystack ,
                                                                                                 char const   *__needle )  __attribute__((__pure__)) ;
#line 399
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__nonnull__(1), __leaf__)) strlen)(char const   *__s )  __attribute__((__pure__)) ;
#line 110 "/usr/include/pwd.h"
extern struct passwd *getpwuid(__uid_t __uid ) ;
#line 124 "/usr/include/ctype.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__leaf__)) tolower)(int __c ) ;
#line 192 "/usr/include/time.h"
extern  __attribute__((__nothrow__)) time_t ( __attribute__((__leaf__)) time)(time_t *__timer ) ;
#line 205
extern  __attribute__((__nothrow__)) size_t ( __attribute__((__leaf__)) strftime)(char * __restrict  __s ,
                                                                                  size_t __maxsize ,
                                                                                  char const   * __restrict  __format ,
                                                                                  struct tm  const  * __restrict  __tp ) ;
#line 243
extern  __attribute__((__nothrow__)) struct tm *( __attribute__((__leaf__)) localtime)(time_t const   *__timer ) ;
#line 287 "/usr/include/unistd.h"
extern  __attribute__((__nothrow__)) int ( __attribute__((__nonnull__(1), __leaf__)) access)(char const   *__name ,
                                                                                             int __type ) ;
#line 353
extern int close(int __fd ) ;
#line 360
extern ssize_t read(int __fd , void *__buf , size_t __nbytes ) ;
#line 366
extern ssize_t write(int __fd , void const   *__buf , size_t __n ) ;
#line 675
extern  __attribute__((__nothrow__)) __uid_t ( __attribute__((__leaf__)) getuid)(void) ;
#line 36 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static int irc  ;
#line 37 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static time_t last_response  ;
#line 38 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static Channel *channels  =    (Channel *)((void *)0);
#line 39 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char *host  =    (char *)"irc.freenode.net";
#line 40 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char nick[32]  ;
#line 41 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char path[256]  ;
#line 42 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char message[4096]  ;
#line 44 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void usage(void) 
{ 


  {
  {
#line 45
  fputs((char const   */* __restrict  */)"ii - irc it - 1.7\n(C)opyright MMV-MMVI Anselm R. Garbe\n(C)opyright MMV-MMXI Nico Golde\nusage: ii [-i <irc dir>] [-s <host>] [-p <port>]\n          [-n <nick>] [-k <password>] [-f <fullname>]\n",
        (FILE */* __restrict  */)stderr);
#line 50
  exit(1);
  }
}
}
#line 53 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char *striplower(char *s ) 
{ 
  char *p ;
  int tmp ;

  {
#line 54
  p = (char *)((void *)0);
#line 55
  p = s;
  {
#line 55
  while (1) {
    while_continue: /* CIL Label */ ;
#line 55
    if (p) {
#line 55
      if (! *p) {
#line 55
        goto while_break;
      }
    } else {
#line 55
      goto while_break;
    }
#line 56
    if ((int )*p == 47) {
#line 56
      *p = (char )',';
    }
    {
#line 57
    tmp = tolower((int )*p);
#line 57
    *p = (char )tmp;
#line 55
    p ++;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 59
  return (s);
}
}
#line 63 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void create_dirtree(char const   *dir ) 
{ 
  char tmp[256] ;
  char *p ;
  size_t len ;

  {
  {
#line 65
  p = (char *)((void *)0);
#line 67
  snprintf((char */* __restrict  */)(tmp), sizeof(tmp), (char const   */* __restrict  */)"%s",
           dir);
#line 68
  len = strlen((char const   *)(tmp));
  }
#line 69
  if ((int )tmp[len - 1UL] == 47) {
#line 70
    tmp[len - 1UL] = (char)0;
  }
#line 71
  p = tmp + 1;
  {
#line 71
  while (1) {
    while_continue: /* CIL Label */ ;
#line 71
    if (! *p) {
#line 71
      goto while_break;
    }
#line 72
    if ((int )*p == 47) {
      {
#line 73
      *p = (char)0;
#line 74
      mkdir((char const   *)(tmp), (__mode_t )448);
#line 75
      *p = (char )'/';
      }
    }
#line 71
    p ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 77
  mkdir((char const   *)(tmp), (__mode_t )448);
  }
#line 78
  return;
}
}
#line 80 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static int get_filepath(char *filepath , size_t len , char *channel , char *file ) 
{ 
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;

  {
#line 81
  if (channel) {
    {
#line 82
    tmp = snprintf((char */* __restrict  */)filepath, len, (char const   */* __restrict  */)"%s/%s",
                   path, channel);
    }
#line 82
    if (! tmp) {
#line 83
      return (0);
    }
    {
#line 84
    create_dirtree((char const   *)filepath);
#line 85
    tmp___0 = snprintf((char */* __restrict  */)filepath, len, (char const   */* __restrict  */)"%s/%s/%s",
                       path, channel, file);
    }
#line 85
    return (tmp___0);
  }
  {
#line 87
  tmp___1 = snprintf((char */* __restrict  */)filepath, len, (char const   */* __restrict  */)"%s/%s",
                     path, file);
  }
#line 87
  return (tmp___1);
}
}
#line 90 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void create_filepath(char *filepath , size_t len , char *channel , char *suffix ) 
{ 
  char *tmp ;
  int tmp___0 ;

  {
  {
#line 91
  tmp = striplower(channel);
#line 91
  tmp___0 = get_filepath(filepath, len, tmp, suffix);
  }
#line 91
  if (! tmp___0) {
    {
#line 92
    fputs((char const   */* __restrict  */)"ii: path to irc directory too long\n",
          (FILE */* __restrict  */)stderr);
#line 93
    exit(1);
    }
  }
#line 95
  return;
}
}
#line 98 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char infile[256]  ;
#line 97 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static int open_channel(char *name ) 
{ 
  int tmp ;
  int tmp___0 ;

  {
  {
#line 99
  create_filepath(infile, sizeof(infile), name, (char *)"in");
#line 100
  tmp = access((char const   *)(infile), 0);
  }
#line 100
  if (tmp == -1) {
    {
#line 101
    mkfifo((char const   *)(infile), (__mode_t )448);
    }
  }
  {
#line 102
  tmp___0 = open((char const   *)(infile), 2048, 0);
  }
#line 102
  return (tmp___0);
}
}
#line 105 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void add_channel(char *cname ) 
{ 
  Channel *c ;
  int fd ;
  char *name ;
  char *tmp ;
  int tmp___0 ;
  void *tmp___1 ;

  {
  {
#line 108
  tmp = striplower(cname);
#line 108
  name = tmp;
#line 110
  c = channels;
  }
  {
#line 110
  while (1) {
    while_continue: /* CIL Label */ ;
#line 110
    if (! c) {
#line 110
      goto while_break;
    }
    {
#line 111
    tmp___0 = strcmp((char const   *)name, (char const   *)c->name);
    }
#line 111
    if (! tmp___0) {
#line 112
      return;
    }
#line 110
    c = c->next;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 114
  fd = open_channel(name);
  }
#line 115
  if (fd == -1) {
    {
#line 116
    printf((char const   */* __restrict  */)"ii: exiting, cannot create in channel: %s\n",
           name);
#line 117
    exit(1);
    }
  }
  {
#line 119
  tmp___1 = calloc((size_t )1, sizeof(Channel ));
#line 119
  c = (Channel *)tmp___1;
  }
#line 120
  if (! c) {
    {
#line 121
    perror("ii: cannot allocate memory");
#line 122
    exit(1);
    }
  }
#line 124
  if (! channels) {
#line 124
    channels = c;
  } else {
#line 126
    c->next = channels;
#line 127
    channels = c;
  }
  {
#line 129
  c->fd = fd;
#line 130
  c->name = strdup((char const   *)name);
  }
#line 131
  return;
}
}
#line 133 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void rm_channel(Channel *c ) 
{ 
  Channel *p ;

  {
#line 135
  if ((unsigned long )channels == (unsigned long )c) {
#line 135
    channels = channels->next;
  } else {
#line 137
    p = channels;
    {
#line 137
    while (1) {
      while_continue: /* CIL Label */ ;
#line 137
      if (p) {
#line 137
        if (! ((unsigned long )p->next != (unsigned long )c)) {
#line 137
          goto while_break;
        }
      } else {
#line 137
        goto while_break;
      }
#line 137
      p = p->next;
    }
    while_break: /* CIL Label */ ;
    }
#line 138
    if ((unsigned long )p->next == (unsigned long )c) {
#line 139
      p->next = c->next;
    }
  }
  {
#line 141
  free((void *)c->name);
#line 142
  free((void *)c);
  }
#line 143
  return;
}
}
#line 145 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void login(char *key , char *fullname ) 
{ 
  char *tmp ;
  char *tmp___0 ;
  size_t tmp___1 ;

  {
#line 146
  if (key) {
#line 146
    if (fullname) {
#line 146
      tmp = fullname;
    } else {
#line 146
      tmp = nick;
    }
    {
#line 146
    snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PASS %s\r\nNICK %s\r\nUSER %s localhost %s :%s\r\n",
             key, nick, nick, host, tmp);
    }
  } else {
#line 149
    if (fullname) {
#line 149
      tmp___0 = fullname;
    } else {
#line 149
      tmp___0 = nick;
    }
    {
#line 149
    snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"NICK %s\r\nUSER %s localhost %s :%s\r\n",
             nick, nick, host, tmp___0);
    }
  }
  {
#line 151
  tmp___1 = strlen((char const   *)(message));
#line 151
  write(irc, (void const   *)(message), tmp___1);
  }
#line 152
  return;
}
}
#line 154 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static int tcpopen(unsigned short port ) 
{ 
  int fd ;
  struct sockaddr_in sin ;
  struct hostent *hp ;
  struct hostent *tmp ;
  int tmp___0 ;

  {
  {
#line 157
  tmp = gethostbyname((char const   *)host);
#line 157
  hp = tmp;
#line 159
  memset((void *)(& sin), 0, sizeof(struct sockaddr_in ));
  }
#line 160
  if (! hp) {
    {
#line 161
    perror("ii: cannot retrieve host information");
#line 162
    exit(1);
    }
  }
  {
#line 164
  sin.sin_family = (sa_family_t )2;
#line 165
  memcpy((void */* __restrict  */)(& sin.sin_addr), (void const   */* __restrict  */)*(hp->h_addr_list + 0),
         (size_t )hp->h_length);
#line 166
  sin.sin_port = htons(port);
#line 167
  fd = socket(2, 1, 0);
  }
#line 167
  if (fd < 0) {
    {
#line 168
    perror("ii: cannot create socket");
#line 169
    exit(1);
    }
  }
  {
#line 171
  tmp___0 = connect(fd, (struct sockaddr  const  *)(& sin), (socklen_t )sizeof(sin));
  }
#line 171
  if (tmp___0 < 0) {
    {
#line 172
    perror("ii: cannot connect to host");
#line 173
    exit(1);
    }
  }
#line 175
  return (fd);
}
}
#line 178 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static size_t tokenize(char **result , size_t reslen , char *str , char delim ) 
{ 
  char *p ;
  char *n ;
  size_t i ;
  long tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___2 ;

  {
#line 179
  p = (char *)((void *)0);
#line 179
  n = (char *)((void *)0);
#line 182
  if (! str) {
#line 183
    return ((size_t )0);
  }
#line 184
  n = str;
  {
#line 184
  while (1) {
    while_continue: /* CIL Label */ ;
#line 184
    if (! ((int )*n == 32)) {
#line 184
      goto while_break;
    }
#line 184
    n ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 185
  p = n;
#line 186
  i = (size_t )0;
  {
#line 186
  while (1) {
    while_continue___0: /* CIL Label */ ;
#line 186
    if (! ((int )*n != 0)) {
#line 186
      goto while_break___0;
    }
#line 187
    if (i == reslen) {
#line 188
      return ((size_t )0);
    }
#line 189
    if (i > 1UL) {
      {
#line 189
      tmp = strtol((char const   */* __restrict  */)*(result + 0), (char **/* __restrict  */)((void *)0),
                   10);
      }
#line 189
      if (tmp > 0L) {
#line 189
        delim = (char )':';
      }
    }
#line 190
    if ((int )*n == (int )delim) {
#line 191
      *n = (char)0;
#line 192
      tmp___0 = i;
#line 192
      i ++;
#line 192
      *(result + tmp___0) = p;
#line 193
      n ++;
#line 193
      p = n;
    } else {
#line 195
      n ++;
    }
  }
  while_break___0: /* CIL Label */ ;
  }
#line 197
  if (i < reslen) {
#line 197
    if ((unsigned long )p < (unsigned long )n) {
      {
#line 197
      tmp___2 = strlen((char const   *)p);
      }
#line 197
      if (tmp___2) {
#line 198
        tmp___1 = i;
#line 198
        i ++;
#line 198
        *(result + tmp___1) = p;
      }
    }
  }
#line 199
  return (i);
}
}
#line 203 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char outfile[256]  ;
#line 203 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char server[256]  ;
#line 203 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char buft[18]  ;
#line 202 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void print_out(char *channel , char *buf ) 
{ 
  FILE *out ;
  time_t t ;
  time_t tmp ;
  char *tmp___0 ;
  struct tm *tmp___1 ;

  {
  {
#line 204
  out = (FILE *)((void *)0);
#line 205
  tmp = time((time_t *)0);
#line 205
  t = tmp;
  }
#line 207
  if (channel) {
    {
#line 207
    snprintf((char */* __restrict  */)(server), sizeof(server), (char const   */* __restrict  */)"-!- %s",
             channel);
    }
  }
  {
#line 208
  tmp___0 = strstr((char const   *)buf, (char const   *)(server));
  }
#line 208
  if (tmp___0) {
#line 208
    channel = (char *)"";
  }
  {
#line 209
  create_filepath(outfile, sizeof(outfile), channel, (char *)"out");
#line 210
  out = fopen((char const   */* __restrict  */)(outfile), (char const   */* __restrict  */)"a");
  }
#line 210
  if (! out) {
#line 210
    return;
  }
#line 211
  if (channel) {
#line 211
    if (*(channel + 0)) {
      {
#line 211
      add_channel(channel);
      }
    }
  }
  {
#line 213
  tmp___1 = localtime((time_t const   *)(& t));
#line 213
  strftime((char */* __restrict  */)(buft), sizeof(buft), (char const   */* __restrict  */)"%F %R",
           (struct tm  const  */* __restrict  */)tmp___1);
#line 214
  fprintf((FILE */* __restrict  */)out, (char const   */* __restrict  */)"%s %s\n",
          buft, buf);
#line 215
  fclose(out);
  }
#line 216
  return;
}
}
#line 218 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void proc_channels_privmsg(char *channel , char *buf ) 
{ 
  size_t tmp ;

  {
  {
#line 219
  snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"<%s> %s",
           nick, buf);
#line 220
  print_out(channel, message);
#line 221
  snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PRIVMSG %s :%s\r\n",
           channel, buf);
#line 222
  tmp = strlen((char const   *)(message));
#line 222
  write(irc, (void const   *)(message), tmp);
  }
#line 223
  return;
}
}
#line 225 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void proc_channels_input(Channel *c , char *buf ) 
{ 
  char *p ;
  size_t tmp ;
  size_t tmp___0 ;
  size_t tmp___1 ;
  size_t tmp___2 ;
  size_t tmp___3 ;
  size_t tmp___4 ;
  size_t tmp___5 ;

  {
#line 227
  p = (char *)((void *)0);
#line 229
  if ((int )*(buf + 0) != 47) {
#line 229
    if ((int )*(buf + 0) != 0) {
      {
#line 230
      proc_channels_privmsg(c->name, buf);
      }
#line 231
      return;
    }
  }
#line 233
  message[0] = (char )'\000';
#line 234
  if ((int )*(buf + 2) == 32) {
#line 234
    goto _L___0;
  } else
#line 234
  if ((int )*(buf + 2) == 0) {
    _L___0: /* CIL Label */ 
    {
#line 235
    if ((int )*(buf + 1) == 106) {
#line 235
      goto case_106;
    }
#line 249
    if ((int )*(buf + 1) == 116) {
#line 249
      goto case_116;
    }
#line 252
    if ((int )*(buf + 1) == 97) {
#line 252
      goto case_97;
    }
#line 262
    if ((int )*(buf + 1) == 110) {
#line 262
      goto case_110;
    }
#line 268
    if ((int )*(buf + 1) == 108) {
#line 268
      goto case_108;
    }
#line 283
    goto switch_default;
    case_106: /* CIL Label */ 
    {
#line 236
    p = strchr((char const   *)(buf + 3), ' ');
    }
#line 237
    if (p) {
#line 237
      *p = (char)0;
    }
#line 238
    if ((int )*(buf + 3) == 35) {
#line 238
      goto _L;
    } else
#line 238
    if ((int )*(buf + 3) == 38) {
#line 238
      goto _L;
    } else
#line 238
    if ((int )*(buf + 3) == 43) {
#line 238
      goto _L;
    } else
#line 238
    if ((int )*(buf + 3) == 33) {
      _L: /* CIL Label */ 
#line 239
      if (p) {
        {
#line 239
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"JOIN %s %s\r\n",
                 buf + 3, p + 1);
        }
      } else {
        {
#line 240
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"JOIN %s\r\n",
                 buf + 3);
        }
      }
      {
#line 241
      add_channel(buf + 3);
      }
    } else
#line 243
    if (p) {
      {
#line 244
      add_channel(buf + 3);
#line 245
      proc_channels_privmsg(buf + 3, p + 1);
      }
#line 246
      return;
    }
#line 248
    goto switch_break;
    case_116: /* CIL Label */ 
    {
#line 250
    tmp = strlen((char const   *)buf);
    }
#line 250
    if (tmp >= 3UL) {
      {
#line 250
      snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"TOPIC %s :%s\r\n",
               c->name, buf + 3);
      }
    }
#line 251
    goto switch_break;
    case_97: /* CIL Label */ 
    {
#line 253
    tmp___0 = strlen((char const   *)buf);
    }
#line 253
    if (tmp___0 >= 3UL) {
      {
#line 254
      snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- %s is away \"%s\"",
               nick, buf + 3);
#line 255
      print_out(c->name, message);
      }
    }
#line 257
    if ((int )*(buf + 2) == 0) {
      {
#line 258
      snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"AWAY\r\n");
      }
    } else {
      {
#line 257
      tmp___1 = strlen((char const   *)buf);
      }
#line 257
      if (tmp___1 < 3UL) {
        {
#line 258
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"AWAY\r\n");
        }
      } else {
        {
#line 260
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"AWAY :%s\r\n",
                 buf + 3);
        }
      }
    }
#line 261
    goto switch_break;
    case_110: /* CIL Label */ 
    {
#line 263
    tmp___2 = strlen((char const   *)buf);
    }
#line 263
    if (tmp___2 >= 3UL) {
      {
#line 264
      snprintf((char */* __restrict  */)(nick), sizeof(nick), (char const   */* __restrict  */)"%s",
               buf + 3);
#line 265
      snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"NICK %s\r\n",
               buf + 3);
      }
    }
#line 267
    goto switch_break;
    case_108: /* CIL Label */ 
#line 269
    if ((int )*(c->name + 0) == 0) {
#line 270
      return;
    }
#line 271
    if ((int )*(buf + 2) == 32) {
      {
#line 271
      tmp___3 = strlen((char const   *)buf);
      }
#line 271
      if (tmp___3 >= 3UL) {
        {
#line 272
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PART %s :%s\r\n",
                 c->name, buf + 3);
        }
      } else {
        {
#line 274
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PART %s :ii - 500 SLOC are too much\r\n",
                 c->name);
        }
      }
    } else {
      {
#line 274
      snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PART %s :ii - 500 SLOC are too much\r\n",
               c->name);
      }
    }
    {
#line 276
    tmp___4 = strlen((char const   *)(message));
#line 276
    write(irc, (void const   *)(message), tmp___4);
#line 277
    close(c->fd);
#line 280
    rm_channel(c);
    }
#line 281
    return;
#line 282
    goto switch_break;
    switch_default: /* CIL Label */ 
    {
#line 284
    snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"%s\r\n",
             buf + 1);
    }
#line 285
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
  } else {
    {
#line 288
    snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"%s\r\n",
             buf + 1);
    }
  }
#line 290
  if ((int )message[0] != 0) {
    {
#line 291
    tmp___5 = strlen((char const   *)(message));
#line 291
    write(irc, (void const   *)(message), tmp___5);
    }
  }
#line 292
  return;
}
}
#line 294 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void proc_server_cmd(char *buf ) 
{ 
  char *argv[6] ;
  char *cmd ;
  char *p ;
  int i ;
  size_t tmp ;
  char const   *tmp___0 ;
  char const   *tmp___1 ;
  char const   *tmp___2 ;
  char const   *tmp___3 ;
  char const   *tmp___4 ;
  char const   *tmp___5 ;
  char const   *tmp___6 ;
  char const   *tmp___7 ;
  char const   *tmp___8 ;
  char const   *tmp___9 ;
  char const   *tmp___10 ;
  int tmp___11 ;
  int tmp___12 ;
  int tmp___13 ;
  int tmp___14 ;
  int tmp___15 ;
  int tmp___16 ;
  int tmp___17 ;
  int tmp___18 ;
  int tmp___19 ;
  int tmp___20 ;
  int tmp___21 ;
  int tmp___22 ;
  size_t tmp___23 ;
  int tmp___24 ;

  {
#line 295
  cmd = (char *)((void *)0);
#line 295
  p = (char *)((void *)0);
#line 298
  if (! buf) {
#line 299
    return;
  } else
#line 298
  if ((int )*buf == 0) {
#line 299
    return;
  }
#line 301
  i = 0;
  {
#line 301
  while (1) {
    while_continue: /* CIL Label */ ;
#line 301
    if (! (i < 6)) {
#line 301
      goto while_break;
    }
#line 302
    argv[i] = (char *)((void *)0);
#line 301
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
#line 313
  if ((int )*(buf + 0) == 58) {
    {
#line 314
    p = strchr((char const   *)buf, ' ');
    }
#line 314
    if (! p) {
#line 314
      return;
    }
#line 315
    *p = (char)0;
#line 316
    p ++;
    {
#line 316
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 316
      if (! ((int )*p == 32)) {
#line 316
        goto while_break___0;
      }
#line 316
      p ++;
    }
    while_break___0: /* CIL Label */ ;
    }
    {
#line 317
    cmd = p;
#line 318
    argv[0] = buf + 1;
#line 319
    p = strchr((char const   *)buf, '!');
    }
#line 319
    if (p) {
#line 320
      *p = (char)0;
#line 321
      p ++;
#line 321
      argv[1] = p;
    }
  } else {
#line 324
    cmd = buf;
  }
#line 327
  p = cmd;
  {
#line 327
  while (1) {
    while_continue___1: /* CIL Label */ ;
#line 327
    if (p) {
#line 327
      if (! ((int )*p != 0)) {
#line 327
        goto while_break___1;
      }
    } else {
#line 327
      goto while_break___1;
    }
#line 328
    if ((int )*p == 13) {
#line 329
      *p = (char)0;
    } else
#line 328
    if ((int )*p == 10) {
#line 329
      *p = (char)0;
    }
#line 327
    p ++;
  }
  while_break___1: /* CIL Label */ ;
  }
  {
#line 331
  p = strchr((char const   *)cmd, ':');
  }
#line 331
  if (p) {
#line 332
    *p = (char)0;
#line 333
    p ++;
#line 333
    argv[5] = p;
  }
  {
#line 336
  tokenize(& argv[2], (size_t )4, cmd, (char )' ');
  }
#line 338
  if (! argv[2]) {
#line 339
    return;
  } else {
    {
#line 338
    tmp___22 = strncmp("PONG", (char const   *)argv[2], (size_t )5);
    }
#line 338
    if (tmp___22) {
      {
#line 340
      tmp___21 = strncmp("PING", (char const   *)argv[2], (size_t )5);
      }
#line 340
      if (tmp___21) {
#line 344
        if (! argv[0]) {
#line 344
          goto _L;
        } else
#line 344
        if (! argv[1]) {
          _L: /* CIL Label */ 
#line 345
          if (argv[5]) {
#line 345
            tmp___0 = (char const   *)argv[5];
          } else {
#line 345
            tmp___0 = "";
          }
#line 345
          if (argv[4]) {
#line 345
            tmp___1 = (char const   *)argv[4];
          } else {
#line 345
            tmp___1 = "";
          }
          {
#line 345
          snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"%s%s",
                   tmp___1, tmp___0);
#line 346
          print_out((char *)0, message);
          }
#line 347
          return;
        } else {
          {
#line 348
          tmp___20 = strncmp("ERROR", (char const   *)argv[2], (size_t )6);
          }
#line 348
          if (tmp___20) {
            {
#line 350
            tmp___19 = strncmp("JOIN", (char const   *)argv[2], (size_t )5);
            }
#line 350
            if (tmp___19) {
              {
#line 354
              tmp___18 = strncmp("PART", (char const   *)argv[2], (size_t )5);
              }
#line 354
              if (tmp___18) {
                {
#line 356
                tmp___17 = strncmp("MODE", (char const   *)argv[2], (size_t )5);
                }
#line 356
                if (tmp___17) {
                  {
#line 358
                  tmp___16 = strncmp("QUIT", (char const   *)argv[2], (size_t )5);
                  }
#line 358
                  if (tmp___16) {
                    {
#line 360
                    tmp___15 = strncmp("NICK", (char const   *)argv[2], (size_t )5);
                    }
#line 360
                    if (tmp___15) {
                      {
#line 362
                      tmp___14 = strncmp("TOPIC", (char const   *)argv[2], (size_t )6);
                      }
#line 362
                      if (tmp___14) {
                        {
#line 364
                        tmp___13 = strncmp("KICK", (char const   *)argv[2], (size_t )5);
                        }
#line 364
                        if (tmp___13) {
                          {
#line 366
                          tmp___12 = strncmp("NOTICE", (char const   *)argv[2], (size_t )7);
                          }
#line 366
                          if (tmp___12) {
                            {
#line 368
                            tmp___11 = strncmp("PRIVMSG", (char const   *)argv[2],
                                               (size_t )8);
                            }
#line 368
                            if (! tmp___11) {
#line 369
                              if (argv[5]) {
#line 369
                                tmp___10 = (char const   *)argv[5];
                              } else {
#line 369
                                tmp___10 = "";
                              }
                              {
#line 369
                              snprintf((char */* __restrict  */)(message), (size_t )4096,
                                       (char const   */* __restrict  */)"<%s> %s",
                                       argv[0], tmp___10);
                              }
                            }
                          } else {
#line 367
                            if (argv[5]) {
#line 367
                              tmp___9 = (char const   *)argv[5];
                            } else {
#line 367
                              tmp___9 = "";
                            }
                            {
#line 367
                            snprintf((char */* __restrict  */)(message), (size_t )4096,
                                     (char const   */* __restrict  */)"-!- \"%s\")",
                                     tmp___9);
                            }
                          }
                        } else {
#line 365
                          if (argv[5]) {
#line 365
                            tmp___8 = (char const   *)argv[5];
                          } else {
#line 365
                            tmp___8 = "";
                          }
                          {
#line 365
                          snprintf((char */* __restrict  */)(message), (size_t )4096,
                                   (char const   */* __restrict  */)"-!- %s kicked %s (\"%s\")",
                                   argv[0], argv[4], tmp___8);
                          }
                        }
                      } else {
#line 363
                        if (argv[5]) {
#line 363
                          tmp___7 = (char const   *)argv[5];
                        } else {
#line 363
                          tmp___7 = "";
                        }
                        {
#line 363
                        snprintf((char */* __restrict  */)(message), (size_t )4096,
                                 (char const   */* __restrict  */)"-!- %s changed topic to \"%s\"",
                                 argv[0], tmp___7);
                        }
                      }
                    } else {
                      {
#line 361
                      snprintf((char */* __restrict  */)(message), (size_t )4096,
                               (char const   */* __restrict  */)"-!- %s changed nick to %s",
                               argv[0], argv[5]);
                      }
                    }
                  } else {
#line 359
                    if (argv[5]) {
#line 359
                      tmp___6 = (char const   *)argv[5];
                    } else {
#line 359
                      tmp___6 = "";
                    }
                    {
#line 359
                    snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- %s(%s) has quit \"%s\"",
                             argv[0], argv[1], tmp___6);
                    }
                  }
                } else {
#line 357
                  if (argv[5]) {
#line 357
                    tmp___3 = (char const   *)argv[5];
                  } else {
#line 357
                    tmp___3 = "";
                  }
#line 357
                  if (argv[4]) {
#line 357
                    tmp___4 = (char const   *)argv[4];
                  } else {
#line 357
                    tmp___4 = "";
                  }
#line 357
                  if (argv[3]) {
#line 357
                    tmp___5 = (char const   *)argv[3];
                  } else {
#line 357
                    tmp___5 = "";
                  }
                  {
#line 357
                  snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- %s changed mode/%s -> %s %s",
                           argv[0], tmp___5, tmp___4, tmp___3);
                  }
                }
              } else {
                {
#line 355
                snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- %s(%s) has left %s",
                         argv[0], argv[1], argv[3]);
                }
              }
            } else {
#line 351
              if ((unsigned long )argv[5] != (unsigned long )((void *)0)) {
#line 352
                argv[3] = argv[5];
              }
              {
#line 353
              snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- %s(%s) has joined %s",
                       argv[0], argv[1], argv[3]);
              }
            }
          } else {
#line 349
            if (argv[5]) {
#line 349
              tmp___2 = (char const   *)argv[5];
            } else {
#line 349
              tmp___2 = "unknown";
            }
            {
#line 349
            snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"-!- error %s",
                     tmp___2);
            }
          }
        }
      } else {
        {
#line 341
        snprintf((char */* __restrict  */)(message), (size_t )4096, (char const   */* __restrict  */)"PONG %s\r\n",
                 argv[5]);
#line 342
        tmp = strlen((char const   *)(message));
#line 342
        write(irc, (void const   *)(message), tmp);
        }
#line 343
        return;
      }
    } else {
#line 339
      return;
    }
  }
#line 370
  if (! argv[3]) {
    {
#line 371
    print_out(argv[0], message);
    }
  } else {
    {
#line 370
    tmp___23 = strlen((char const   *)(nick));
#line 370
    tmp___24 = strncmp((char const   *)argv[3], (char const   *)(nick), tmp___23);
    }
#line 370
    if (tmp___24) {
      {
#line 373
      print_out(argv[3], message);
      }
    } else {
      {
#line 371
      print_out(argv[0], message);
      }
    }
  }
#line 374
  return;
}
}
#line 376 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static int read_line(int fd , size_t res_len , char *buf ) 
{ 
  size_t i ;
  char c ;
  ssize_t tmp ;
  size_t tmp___0 ;

  {
#line 377
  i = (size_t )0;
#line 378
  c = (char)0;
  {
#line 379
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 380
    tmp = read(fd, (void *)(& c), sizeof(char ));
    }
#line 380
    if ((unsigned long )tmp != sizeof(char )) {
#line 381
      return (-1);
    }
#line 382
    tmp___0 = i;
#line 382
    i ++;
#line 382
    *(buf + tmp___0) = c;
#line 379
    if ((int )c != 10) {
#line 379
      if (! (i < res_len)) {
#line 379
        goto while_break;
      }
    } else {
#line 379
      goto while_break;
    }
  }
  while_break: /* CIL Label */ ;
  }
#line 385
  *(buf + (i - 1UL)) = (char)0;
#line 386
  return (0);
}
}
#line 390 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char buf[4096]  ;
#line 389 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void handle_channels_input(Channel *c ) 
{ 
  int fd ;
  int tmp ;
  int tmp___0 ;

  {
  {
#line 391
  tmp___0 = read_line(c->fd, (size_t )4096, buf);
  }
#line 391
  if (tmp___0 == -1) {
    {
#line 392
    close(c->fd);
#line 393
    tmp = open_channel(c->name);
#line 393
    fd = tmp;
    }
#line 394
    if (fd != -1) {
#line 395
      c->fd = fd;
    } else {
      {
#line 397
      rm_channel(c);
      }
    }
#line 398
    return;
  }
  {
#line 400
  proc_channels_input(c, buf);
  }
#line 401
  return;
}
}
#line 404 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static char buf___0[4096]  ;
#line 403 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void handle_server_output(void) 
{ 
  int tmp ;

  {
  {
#line 405
  tmp = read_line(irc, (size_t )4096, buf___0);
  }
#line 405
  if (tmp == -1) {
    {
#line 406
    perror("ii: remote host closed connection");
#line 407
    exit(1);
    }
  }
  {
#line 409
  proc_server_cmd(buf___0);
  }
#line 410
  return;
}
}
#line 412 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
static void run(void) 
{ 
  Channel *c ;
  int r ;
  int maxfd ;
  fd_set rd ;
  struct timeval tv ;
  char ping_msg[512] ;
  int __d0 ;
  int __d1 ;
  int *tmp ;
  time_t tmp___0 ;
  size_t tmp___1 ;

  {
  {
#line 419
  snprintf((char */* __restrict  */)(ping_msg), sizeof(ping_msg), (char const   */* __restrict  */)"PING %s\r\n",
           host);
  }
  {
#line 420
  while (1) {
    while_continue: /* CIL Label */ ;
    {
#line 421
    while (1) {
      while_continue___0: /* CIL Label */ ;
#line 421
      __asm__  volatile   ("cld; rep; "
                           "stosq": "=c" (__d0), "=D" (__d1): "a" (0), "0" (sizeof(fd_set ) / sizeof(__fd_mask )),
                           "1" (& rd.__fds_bits[0]): "memory");
#line 421
      goto while_break___0;
    }
    while_break___0: /* CIL Label */ ;
    }
#line 422
    maxfd = irc;
#line 423
    rd.__fds_bits[irc / (8 * (int )sizeof(__fd_mask ))] |= 1L << irc % (8 * (int )sizeof(__fd_mask ));
#line 424
    c = channels;
    {
#line 424
    while (1) {
      while_continue___1: /* CIL Label */ ;
#line 424
      if (! c) {
#line 424
        goto while_break___1;
      }
#line 425
      if (maxfd < c->fd) {
#line 426
        maxfd = c->fd;
      }
#line 427
      rd.__fds_bits[c->fd / (8 * (int )sizeof(__fd_mask ))] |= 1L << c->fd % (8 * (int )sizeof(__fd_mask ));
#line 424
      c = c->next;
    }
    while_break___1: /* CIL Label */ ;
    }
    {
#line 430
    tv.tv_sec = (__time_t )120;
#line 431
    tv.tv_usec = (__suseconds_t )0;
#line 432
    r = select(maxfd + 1, (fd_set */* __restrict  */)(& rd), (fd_set */* __restrict  */)0,
               (fd_set */* __restrict  */)0, (struct timeval */* __restrict  */)(& tv));
    }
#line 433
    if (r < 0) {
      {
#line 434
      tmp = __errno_location();
      }
#line 434
      if (*tmp == 4) {
#line 435
        goto __Cont;
      }
      {
#line 436
      perror("ii: error on select()");
#line 437
      exit(1);
      }
    } else
#line 438
    if (r == 0) {
      {
#line 439
      tmp___0 = time((time_t *)((void *)0));
      }
#line 439
      if (tmp___0 - last_response >= 300L) {
        {
#line 440
        print_out((char *)((void *)0), (char *)"-!- ii shutting down: ping timeout");
#line 441
        exit(1);
        }
      }
      {
#line 443
      tmp___1 = strlen((char const   *)(ping_msg));
#line 443
      write(irc, (void const   *)(ping_msg), tmp___1);
      }
#line 444
      goto __Cont;
    }
#line 446
    if ((rd.__fds_bits[irc / (8 * (int )sizeof(__fd_mask ))] & (1L << irc % (8 * (int )sizeof(__fd_mask )))) != 0L) {
      {
#line 447
      handle_server_output();
#line 448
      last_response = time((time_t *)((void *)0));
      }
    }
#line 450
    c = channels;
    {
#line 450
    while (1) {
      while_continue___2: /* CIL Label */ ;
#line 450
      if (! c) {
#line 450
        goto while_break___2;
      }
#line 451
      if ((rd.__fds_bits[c->fd / (8 * (int )sizeof(__fd_mask ))] & (1L << c->fd % (8 * (int )sizeof(__fd_mask )))) != 0L) {
        {
#line 452
        handle_channels_input(c);
        }
      }
#line 450
      c = c->next;
    }
    while_break___2: /* CIL Label */ ;
    }
    __Cont: /* CIL Label */ ;
  }
  while_break: /* CIL Label */ ;
  }
}
}
#line 456 "/home/june/repo/benchmarks/collector/temp/ii-1.7/ii.c"
int main(int argc , char **argv ) 
{ 
  int i ;
  unsigned short port ;
  struct passwd *spw ;
  __uid_t tmp ;
  struct passwd *tmp___0 ;
  char *key ;
  char *fullname ;
  char prefix[256] ;
  long tmp___1 ;
  int tmp___2 ;

  {
  {
#line 458
  port = (unsigned short)6667;
#line 459
  tmp = getuid();
#line 459
  tmp___0 = getpwuid(tmp);
#line 459
  spw = tmp___0;
#line 460
  key = (char *)((void *)0);
#line 460
  fullname = (char *)((void *)0);
  }
#line 463
  if (! spw) {
    {
#line 464
    fputs((char const   */* __restrict  */)"ii: getpwuid() failed\n", (FILE */* __restrict  */)stderr);
#line 465
    exit(1);
    }
  }
  {
#line 467
  snprintf((char */* __restrict  */)(nick), sizeof(nick), (char const   */* __restrict  */)"%s",
           spw->pw_name);
#line 468
  snprintf((char */* __restrict  */)(prefix), sizeof(prefix), (char const   */* __restrict  */)"%s/irc",
           spw->pw_dir);
  }
#line 469
  if (argc <= 1) {
    {
#line 469
    usage();
    }
  } else
#line 469
  if (argc == 2) {
#line 469
    if ((int )*(*(argv + 1) + 0) == 45) {
#line 469
      if ((int )*(*(argv + 1) + 1) == 104) {
        {
#line 469
        usage();
        }
      }
    }
  }
#line 471
  i = 1;
  {
#line 471
  while (1) {
    while_continue: /* CIL Label */ ;
#line 471
    if (i + 1 < argc) {
#line 471
      if (! ((int )*(*(argv + i) + 0) == 45)) {
#line 471
        goto while_break;
      }
    } else {
#line 471
      goto while_break;
    }
    {
#line 473
    if ((int )*(*(argv + i) + 1) == 105) {
#line 473
      goto case_105;
    }
#line 474
    if ((int )*(*(argv + i) + 1) == 115) {
#line 474
      goto case_115;
    }
#line 475
    if ((int )*(*(argv + i) + 1) == 112) {
#line 475
      goto case_112;
    }
#line 476
    if ((int )*(*(argv + i) + 1) == 110) {
#line 476
      goto case_110;
    }
#line 477
    if ((int )*(*(argv + i) + 1) == 107) {
#line 477
      goto case_107;
    }
#line 478
    if ((int )*(*(argv + i) + 1) == 102) {
#line 478
      goto case_102;
    }
#line 479
    goto switch_default;
    case_105: /* CIL Label */ 
    {
#line 473
    i ++;
#line 473
    snprintf((char */* __restrict  */)(prefix), sizeof(prefix), (char const   */* __restrict  */)"%s",
             *(argv + i));
    }
#line 473
    goto switch_break;
    case_115: /* CIL Label */ 
#line 474
    i ++;
#line 474
    host = *(argv + i);
#line 474
    goto switch_break;
    case_112: /* CIL Label */ 
    {
#line 475
    i ++;
#line 475
    tmp___1 = strtol((char const   */* __restrict  */)*(argv + i), (char **/* __restrict  */)((void *)0),
                     10);
#line 475
    port = (unsigned short )tmp___1;
    }
#line 475
    goto switch_break;
    case_110: /* CIL Label */ 
    {
#line 476
    i ++;
#line 476
    snprintf((char */* __restrict  */)(nick), sizeof(nick), (char const   */* __restrict  */)"%s",
             *(argv + i));
    }
#line 476
    goto switch_break;
    case_107: /* CIL Label */ 
    {
#line 477
    i ++;
#line 477
    key = getenv((char const   *)*(argv + i));
    }
#line 477
    goto switch_break;
    case_102: /* CIL Label */ 
#line 478
    i ++;
#line 478
    fullname = *(argv + i);
#line 478
    goto switch_break;
    switch_default: /* CIL Label */ 
    {
#line 479
    usage();
    }
#line 479
    goto switch_break;
    switch_break: /* CIL Label */ ;
    }
#line 471
    i ++;
  }
  while_break: /* CIL Label */ ;
  }
  {
#line 482
  irc = tcpopen(port);
#line 483
  tmp___2 = snprintf((char */* __restrict  */)(path), sizeof(path), (char const   */* __restrict  */)"%s/%s",
                     prefix, host);
  }
#line 483
  if (! tmp___2) {
    {
#line 484
    fputs((char const   */* __restrict  */)"ii: path to irc directory too long\n",
          (FILE */* __restrict  */)stderr);
#line 485
    exit(1);
    }
  }
  {
#line 487
  create_dirtree((char const   *)(path));
#line 489
  add_channel((char *)"");
#line 490
  login(key, fullname);
#line 491
  run();
  }
#line 493
  return (0);
}
}
